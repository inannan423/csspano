(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-vendors"],{"014b":function(t,e,n){"use strict";var i=n("e53d"),r=n("07e3"),o=n("8e60"),a=n("63b6"),s=n("9138"),l=n("ebfd").KEY,c=n("294c"),u=n("dbdb"),h=n("45f2"),d=n("62a0"),p=n("5168"),f=n("ccb9"),m=n("6718"),v=n("47ee"),g=n("9003"),y=n("e4ae"),b=n("f772"),x=n("241e"),w=n("36c3"),_=n("1bc3"),M=n("aebd"),E=n("a159"),S=n("0395"),T=n("bf0b"),A=n("9aa9"),C=n("d9f6"),L=n("c3a1"),P=T.f,O=C.f,R=S.f,k=i.Symbol,D=i.JSON,I=D&&D.stringify,N="prototype",z=p("_hidden"),B=p("toPrimitive"),F={}.propertyIsEnumerable,j=u("symbol-registry"),H=u("symbols"),U=u("op-symbols"),V=Object[N],G="function"==typeof k&&!!A.f,W=i.QObject,$=!W||!W[N]||!W[N].findChild,q=o&&c(function(){return 7!=E(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=P(V,e);i&&delete V[e],O(t,e,n),i&&t!==V&&O(V,e,i)}:O,Y=function(t){var e=H[t]=E(k[N]);return e._k=t,e},X=G&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},Z=function(t,e,n){return t===V&&Z(U,e,n),y(t),e=_(e,!0),y(n),r(H,e)?(n.enumerable?(r(t,z)&&t[z][e]&&(t[z][e]=!1),n=E(n,{enumerable:M(0,!1)})):(r(t,z)||O(t,z,M(1,{})),t[z][e]=!0),q(t,e,n)):O(t,e,n)},J=function(t,e){y(t);var n,i=v(e=w(e)),r=0,o=i.length;while(o>r)Z(t,n=i[r++],e[n]);return t},K=function(t,e){return void 0===e?E(t):J(E(t),e)},Q=function(t){var e=F.call(this,t=_(t,!0));return!(this===V&&r(H,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(H,t)||r(this,z)&&this[z][t])||e)},tt=function(t,e){if(t=w(t),e=_(e,!0),t!==V||!r(H,e)||r(U,e)){var n=P(t,e);return!n||!r(H,e)||r(t,z)&&t[z][e]||(n.enumerable=!0),n}},et=function(t){var e,n=R(w(t)),i=[],o=0;while(n.length>o)r(H,e=n[o++])||e==z||e==l||i.push(e);return i},nt=function(t){var e,n=t===V,i=R(n?U:w(t)),o=[],a=0;while(i.length>a)!r(H,e=i[a++])||n&&!r(V,e)||o.push(H[e]);return o};G||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(U,n),r(this,z)&&r(this[z],t)&&(this[z][t]=!1),q(this,t,M(1,n))};return o&&$&&q(V,t,{configurable:!0,set:e}),Y(t)},s(k[N],"toString",function(){return this._k}),T.f=tt,C.f=Z,n("6abf").f=S.f=et,n("355d").f=Q,A.f=nt,o&&!n("b8e3")&&s(V,"propertyIsEnumerable",Q,!0),f.f=function(t){return Y(p(t))}),a(a.G+a.W+a.F*!G,{Symbol:k});for(var it="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;it.length>rt;)p(it[rt++]);for(var ot=L(p.store),at=0;ot.length>at;)m(ot[at++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return r(j,t+="")?j[t]:j[t]=k(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),a(a.S+a.F*!G,"Object",{create:K,defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var st=c(function(){A.f(1)});a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return A.f(x(t))}}),D&&a(a.S+a.F*(!G||c(function(){var t=k();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){var e,n,i=[t],r=1;while(arguments.length>r)i.push(arguments[r++]);if(n=e=i[1],(b(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,I.apply(D,i)}}),k[N][B]||n("35e8")(k[N],B,k[N].valueOf),h(k,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},"01f9":function(t,e,n){"use strict";var i=n("2d00"),r=n("5ca1"),o=n("2aba"),a=n("32e9"),s=n("84f2"),l=n("41a0"),c=n("7f20"),u=n("38fd"),h=n("2b4c")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",m="values",v=function(){return this};t.exports=function(t,e,n,g,y,b,x){l(n,e,g);var w,_,M,E=function(t){if(!d&&t in C)return C[t];switch(t){case f:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T=y==m,A=!1,C=t.prototype,L=C[h]||C[p]||y&&C[y],P=L||E(y),O=y?T?E("entries"):P:void 0,R="Array"==e&&C.entries||L;if(R&&(M=u(R.call(new t)),M!==Object.prototype&&M.next&&(c(M,S,!0),i||"function"==typeof M[h]||a(M,h,v))),T&&L&&L.name!==m&&(A=!0,P=function(){return L.call(this)}),i&&!x||!d&&!A&&C[h]||a(C,h,P),s[e]=P,s[S]=v,y)if(w={values:T?P:E(m),keys:b?P:E(f),entries:O},x)for(_ in w)_ in C||o(C,_,w[_]);else r(r.P+r.F*(d||A),e,w);return w}},"0395":function(t,e,n){var i=n("36c3"),r=n("6abf").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},"07e3":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"097d":function(t,e,n){"use strict";var i=n("5ca1"),r=n("8378"),o=n("7726"),a=n("ebd6"),s=n("bcaa");i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},"0a06":function(t,e,n){"use strict";var i=n("c532"),r=n("30b5"),o=n("f6b4"),a=n("5270"),s=n("4a7b");function l(t){this.defaults=t,this.interceptors={request:new o,response:new o}}l.prototype.request=function(t){"string"===typeof t?(t=arguments[1]||{},t.url=arguments[0]):t=t||{},t=s(this.defaults,t),t.method?t.method=t.method.toLowerCase():this.defaults.method?t.method=this.defaults.method.toLowerCase():t.method="get";var e=[a,void 0],n=Promise.resolve(t);this.interceptors.request.forEach(function(t){e.unshift(t.fulfilled,t.rejected)}),this.interceptors.response.forEach(function(t){e.push(t.fulfilled,t.rejected)});while(e.length)n=n.then(e.shift(),e.shift());return n},l.prototype.getUri=function(t){return t=s(this.defaults,t),r(t.url,t.params,t.paramsSerializer).replace(/^\?/,"")},i.forEach(["delete","get","head","options"],function(t){l.prototype[t]=function(e,n){return this.request(s(n||{},{method:t,url:e,data:(n||{}).data}))}}),i.forEach(["post","put","patch"],function(t){l.prototype[t]=function(e,n,i){return this.request(s(i||{},{method:t,url:e,data:n}))}}),t.exports=l},"0d58":function(t,e,n){var i=n("ce10"),r=n("e11e");t.exports=Object.keys||function(t){return i(t,r)}},"0df6":function(t,e,n){"use strict";t.exports=function(t){return function(e){return t.apply(null,e)}}},"0e15":function(t,e,n){var i=n("597f");t.exports=function(t,e,n){return void 0===n?i(t,e,!1):i(t,n,!1!==e)}},"0fc9":function(t,e,n){var i=n("3a38"),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},1098:function(t,e,n){"use strict";e.__esModule=!0;var i=n("17ed"),r=l(i),o=n("f893"),a=l(o),s="function"===typeof a.default&&"symbol"===typeof r.default?function(t){return typeof t}:function(t){return t&&"function"===typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":typeof t};function l(t){return t&&t.__esModule?t:{default:t}}e.default="function"===typeof a.default&&"symbol"===s(r.default)?function(t){return"undefined"===typeof t?"undefined":s(t)}:function(t){return t&&"function"===typeof a.default&&t.constructor===a.default&&t!==a.default.prototype?"symbol":"undefined"===typeof t?"undefined":s(t)}},1169:function(t,e,n){var i=n("2d95");t.exports=Array.isArray||function(t){return"Array"==i(t)}},"11e9":function(t,e,n){var i=n("52a7"),r=n("4630"),o=n("6821"),a=n("6a99"),s=n("69a8"),l=n("c69a"),c=Object.getOwnPropertyDescriptor;e.f=n("9e1e")?c:function(t,e){if(t=o(t),e=a(e,!0),l)try{return c(t,e)}catch(n){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},"12f2":function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){return{methods:{focus:function(){this.$refs[t].focus()}}}}},1495:function(t,e,n){var i=n("86cc"),r=n("cb7c"),o=n("0d58");t.exports=n("9e1e")?Object.defineProperties:function(t,e){r(t);var n,a=o(e),s=a.length,l=0;while(s>l)i.f(t,n=a[l++],e[n]);return t}},"14e9":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=127)}({127:function(t,e,n){"use strict";n.r(e);var i=n(16),r=n(38),o=n.n(r),a=n(3),s=n(2),l={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function c(t){var e=t.move,n=t.size,i=t.bar,r={},o="translate"+i.axis+"("+e+"%)";return r[i.size]=n,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var u={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return l[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(t){var e=this.size,n=this.move,i=this.bar;return t("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[t("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:c({size:e,move:n,bar:i})})])},methods:{clickThumbHandler:function(t){t.ctrlKey||2===t.button||(this.startDrag(t),this[this.bar.axis]=t.currentTarget[this.bar.offset]-(t[this.bar.client]-t.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(t){var e=Math.abs(t.target.getBoundingClientRect()[this.bar.direction]-t[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,i=100*(e-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100},startDrag:function(t){t.stopImmediatePropagation(),this.cursorDown=!0,Object(s["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(s["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(t){if(!1!==this.cursorDown){var e=this[this.bar.axis];if(e){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-t[this.bar.client]),i=this.$refs.thumb[this.bar.offset]-e,r=100*(n-i)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(t){this.cursorDown=!1,this[this.bar.axis]=0,Object(s["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(s["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},h={name:"ElScrollbar",components:{Bar:u},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(t){var e=o()(),n=this.wrapStyle;if(e){var i="-"+e+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(n=Object(a["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=i):"string"===typeof this.wrapStyle?n+=r:n=r}var s=t(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),l=t("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",e?"":"el-scrollbar__wrap--hidden-default"]},[[s]]),c=void 0;return c=this.native?[t("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[s]])]:[l,t(u,{attrs:{move:this.moveX,size:this.sizeWidth}}),t(u,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],t("div",{class:"el-scrollbar"},c)},methods:{handleScroll:function(){var t=this.wrap;this.moveY=100*t.scrollTop/t.clientHeight,this.moveX=100*t.scrollLeft/t.clientWidth},update:function(){var t=void 0,e=void 0,n=this.wrap;n&&(t=100*n.clientHeight/n.scrollHeight,e=100*n.clientWidth/n.scrollWidth,this.sizeHeight=t<100?t+"%":"",this.sizeWidth=e<100?e+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(i["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(i["removeResizeListener"])(this.$refs.resize,this.update)},install:function(t){t.component(h.name,h)}};e["default"]=h},16:function(t,e){t.exports=n("4010")},2:function(t,e){t.exports=n("5924")},3:function(t,e){t.exports=n("8122")},38:function(t,e){t.exports=n("e62d")}})},1654:function(t,e,n){"use strict";var i=n("71c1")(!0);n("30f1")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},1691:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},"17ed":function(t,e,n){t.exports={default:n("d8d6"),__esModule:!0}},1991:function(t,e,n){var i,r,o,a=n("9b43"),s=n("31f4"),l=n("fab2"),c=n("230e"),u=n("7726"),h=u.process,d=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,v=0,g={},y="onreadystatechange",b=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},x=function(t){b.call(t.data)};d&&p||(d=function(t){var e=[],n=1;while(arguments.length>n)e.push(arguments[n++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},i(v),v},p=function(t){delete g[t]},"process"==n("2d95")(h)?i=function(t){h.nextTick(a(b,t,1))}:m&&m.now?i=function(t){m.now(a(b,t,1))}:f?(r=new f,o=r.port2,r.port1.onmessage=x,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",x,!1)):i=y in c("script")?function(t){l.appendChild(c("script"))[y]=function(){l.removeChild(this),b.call(t)}}:function(t){setTimeout(a(b,t,1),0)}),t.exports={set:d,clear:p}},"1bc3":function(t,e,n){var i=n("f772");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"1d2b":function(t,e,n){"use strict";t.exports=function(t,e){return function(){for(var n=new Array(arguments.length),i=0;i<n.length;i++)n[i]=arguments[i];return t.apply(e,n)}}},"1ec9":function(t,e,n){var i=n("f772"),r=n("e53d").document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},"1fa8":function(t,e,n){var i=n("cb7c");t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(a){var o=t["return"];throw void 0!==o&&i(o.call(t)),a}}},"230e":function(t,e,n){var i=n("d3f4"),r=n("7726").document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},"23c6":function(t,e,n){var i=n("2d95"),r=n("2b4c")("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(n){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},"241e":function(t,e,n){var i=n("25eb");t.exports=function(t){return Object(i(t))}},2444:function(t,e,n){"use strict";(function(e){var i=n("c532"),r=n("c8af"),o={"Content-Type":"application/x-www-form-urlencoded"};function a(t,e){!i.isUndefined(t)&&i.isUndefined(t["Content-Type"])&&(t["Content-Type"]=e)}function s(){var t;return"undefined"!==typeof XMLHttpRequest?t=n("b50d"):"undefined"!==typeof e&&"[object process]"===Object.prototype.toString.call(e)&&(t=n("b50d")),t}var l={adapter:s(),transformRequest:[function(t,e){return r(e,"Accept"),r(e,"Content-Type"),i.isFormData(t)||i.isArrayBuffer(t)||i.isBuffer(t)||i.isStream(t)||i.isFile(t)||i.isBlob(t)?t:i.isArrayBufferView(t)?t.buffer:i.isURLSearchParams(t)?(a(e,"application/x-www-form-urlencoded;charset=utf-8"),t.toString()):i.isObject(t)?(a(e,"application/json;charset=utf-8"),JSON.stringify(t)):t}],transformResponse:[function(t){if("string"===typeof t)try{t=JSON.parse(t)}catch(e){}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};i.forEach(["delete","get","head"],function(t){l.headers[t]={}}),i.forEach(["post","put","patch"],function(t){l.headers[t]=i.merge(o)}),t.exports=l}).call(this,n("f28c"))},"25eb":function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},2621:function(t,e){e.f=Object.getOwnPropertySymbols},"27ee":function(t,e,n){var i=n("23c6"),r=n("2b4c")("iterator"),o=n("84f2");t.exports=n("8378").getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},2877:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},"294c":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"299c":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=131)}({131:function(t,e,n){"use strict";n.r(e);var i=n(5),r=n.n(i),o=n(17),a=n.n(o),s=n(2),l=n(3),c=n(7),u=n.n(c),h={name:"ElTooltip",mixins:[r.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(l["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var t=this;this.$isServer||(this.popperVM=new u.a({data:{node:""},render:function(t){return this.node}}).$mount(),this.debounceClose=a()(200,function(){return t.handleClosePopper()}))},render:function(t){var e=this;this.popperVM&&(this.popperVM.node=t("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[t("div",{on:{mouseleave:function(){e.setExpectedState(!1),e.debounceClose()},mouseenter:function(){e.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var i=n.data=n.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),n},mounted:function(){var t=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(s["on"])(this.referenceElm,"mouseenter",this.show),Object(s["on"])(this.referenceElm,"mouseleave",this.hide),Object(s["on"])(this.referenceElm,"focus",function(){if(t.$slots.default&&t.$slots.default.length){var e=t.$slots.default[0].componentInstance;e&&e.focus?e.focus():t.handleFocus()}else t.handleFocus()}),Object(s["on"])(this.referenceElm,"blur",this.handleBlur),Object(s["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick(function(){t.value&&t.updatePopper()})},watch:{focusing:function(t){t?Object(s["addClass"])(this.referenceElm,"focusing"):Object(s["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(t){return t?"el-tooltip "+t.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var t=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.showPopper=!0},this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout(function(){t.showPopper=!1},this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(t){!1===t&&clearTimeout(this.timeoutPending),this.expectedState=t},getFirstElement:function(){var t=this.$slots.default;if(!Array.isArray(t))return null;for(var e=null,n=0;n<t.length;n++)t[n]&&t[n].tag&&(e=t[n]);return e}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var t=this.referenceElm;1===t.nodeType&&(Object(s["off"])(t,"mouseenter",this.show),Object(s["off"])(t,"mouseleave",this.hide),Object(s["off"])(t,"focus",this.handleFocus),Object(s["off"])(t,"blur",this.handleBlur),Object(s["off"])(t,"click",this.removeFocusing))},install:function(t){t.component(h.name,h)}};e["default"]=h},17:function(t,e){t.exports=n("0e15")},2:function(t,e){t.exports=n("5924")},3:function(t,e){t.exports=n("8122")},5:function(t,e){t.exports=n("e974")},7:function(t,e){t.exports=n("2b0e")}})},"2a5e":function(t,e,n){"use strict";e.__esModule=!0,e.default=a;var i=n("2b0e"),r=o(i);function o(t){return t&&t.__esModule?t:{default:t}}function a(t,e){if(!r.default.prototype.$isServer)if(e){var n=[],i=e.offsetParent;while(i&&t!==i&&t.contains(i))n.push(i),i=i.offsetParent;var o=e.offsetTop+n.reduce(function(t,e){return t+e.offsetTop},0),a=o+e.offsetHeight,s=t.scrollTop,l=s+t.clientHeight;o<s?t.scrollTop=o:a>l&&(t.scrollTop=a-t.clientHeight)}else t.scrollTop=0}},"2aba":function(t,e,n){var i=n("7726"),r=n("32e9"),o=n("69a8"),a=n("ca5a")("src"),s=n("fa5b"),l="toString",c=(""+s).split(l);n("8378").inspectSource=function(t){return s.call(t)},(t.exports=function(t,e,n,s){var l="function"==typeof n;l&&(o(n,"name")||r(n,"name",e)),t[e]!==n&&(l&&(o(n,a)||r(n,a,t[e]?""+t[e]:c.join(String(e)))),t===i?t[e]=n:s?t[e]?t[e]=n:r(t,e,n):(delete t[e],r(t,e,n)))})(Function.prototype,l,function(){return"function"==typeof this&&this[a]||s.call(this)})},"2aeb":function(t,e,n){var i=n("cb7c"),r=n("1495"),o=n("e11e"),a=n("613b")("IE_PROTO"),s=function(){},l="prototype",c=function(){var t,e=n("230e")("iframe"),i=o.length,r="<",a=">";e.style.display="none",n("fab2").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+a+"document.F=Object"+r+"/script"+a),t.close(),c=t.F;while(i--)delete c[l][o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[l]=i(t),n=new s,s[l]=null,n[a]=t):n=c(),void 0===e?n:r(n,e)}},"2b0e":function(t,e,n){"use strict";n.r(e),function(t){
/*!
 * Vue.js v2.6.10
 * (c) 2014-2019 Evan You
 * Released under the MIT License.
 */
var n=Object.freeze({});function i(t){return void 0===t||null===t}function r(t){return void 0!==t&&null!==t}function o(t){return!0===t}function a(t){return!1===t}function s(t){return"string"===typeof t||"number"===typeof t||"symbol"===typeof t||"boolean"===typeof t}function l(t){return null!==t&&"object"===typeof t}var c=Object.prototype.toString;function u(t){return"[object Object]"===c.call(t)}function h(t){return"[object RegExp]"===c.call(t)}function d(t){var e=parseFloat(String(t));return e>=0&&Math.floor(e)===e&&isFinite(t)}function p(t){return r(t)&&"function"===typeof t.then&&"function"===typeof t.catch}function f(t){return null==t?"":Array.isArray(t)||u(t)&&t.toString===c?JSON.stringify(t,null,2):String(t)}function m(t){var e=parseFloat(t);return isNaN(e)?t:e}function v(t,e){for(var n=Object.create(null),i=t.split(","),r=0;r<i.length;r++)n[i[r]]=!0;return e?function(t){return n[t.toLowerCase()]}:function(t){return n[t]}}v("slot,component",!0);var g=v("key,ref,slot,slot-scope,is");function y(t,e){if(t.length){var n=t.indexOf(e);if(n>-1)return t.splice(n,1)}}var b=Object.prototype.hasOwnProperty;function x(t,e){return b.call(t,e)}function w(t){var e=Object.create(null);return function(n){var i=e[n];return i||(e[n]=t(n))}}var _=/-(\w)/g,M=w(function(t){return t.replace(_,function(t,e){return e?e.toUpperCase():""})}),E=w(function(t){return t.charAt(0).toUpperCase()+t.slice(1)}),S=/\B([A-Z])/g,T=w(function(t){return t.replace(S,"-$1").toLowerCase()});function A(t,e){function n(n){var i=arguments.length;return i?i>1?t.apply(e,arguments):t.call(e,n):t.call(e)}return n._length=t.length,n}function C(t,e){return t.bind(e)}var L=Function.prototype.bind?C:A;function P(t,e){e=e||0;var n=t.length-e,i=new Array(n);while(n--)i[n]=t[n+e];return i}function O(t,e){for(var n in e)t[n]=e[n];return t}function R(t){for(var e={},n=0;n<t.length;n++)t[n]&&O(e,t[n]);return e}function k(t,e,n){}var D=function(t,e,n){return!1},I=function(t){return t};function N(t,e){if(t===e)return!0;var n=l(t),i=l(e);if(!n||!i)return!n&&!i&&String(t)===String(e);try{var r=Array.isArray(t),o=Array.isArray(e);if(r&&o)return t.length===e.length&&t.every(function(t,n){return N(t,e[n])});if(t instanceof Date&&e instanceof Date)return t.getTime()===e.getTime();if(r||o)return!1;var a=Object.keys(t),s=Object.keys(e);return a.length===s.length&&a.every(function(n){return N(t[n],e[n])})}catch(c){return!1}}function z(t,e){for(var n=0;n<t.length;n++)if(N(t[n],e))return n;return-1}function B(t){var e=!1;return function(){e||(e=!0,t.apply(this,arguments))}}var F="data-server-rendered",j=["component","directive","filter"],H=["beforeCreate","created","beforeMount","mounted","beforeUpdate","updated","beforeDestroy","destroyed","activated","deactivated","errorCaptured","serverPrefetch"],U={optionMergeStrategies:Object.create(null),silent:!1,productionTip:!1,devtools:!1,performance:!1,errorHandler:null,warnHandler:null,ignoredElements:[],keyCodes:Object.create(null),isReservedTag:D,isReservedAttr:D,isUnknownElement:D,getTagNamespace:k,parsePlatformTagName:I,mustUseProp:D,async:!0,_lifecycleHooks:H},V=/a-zA-Z\u00B7\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u037D\u037F-\u1FFF\u200C-\u200D\u203F-\u2040\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD/;function G(t){var e=(t+"").charCodeAt(0);return 36===e||95===e}function W(t,e,n,i){Object.defineProperty(t,e,{value:n,enumerable:!!i,writable:!0,configurable:!0})}var $=new RegExp("[^"+V.source+".$_\\d]");function q(t){if(!$.test(t)){var e=t.split(".");return function(t){for(var n=0;n<e.length;n++){if(!t)return;t=t[e[n]]}return t}}}var Y,X="__proto__"in{},Z="undefined"!==typeof window,J="undefined"!==typeof WXEnvironment&&!!WXEnvironment.platform,K=J&&WXEnvironment.platform.toLowerCase(),Q=Z&&window.navigator.userAgent.toLowerCase(),tt=Q&&/msie|trident/.test(Q),et=Q&&Q.indexOf("msie 9.0")>0,nt=Q&&Q.indexOf("edge/")>0,it=(Q&&Q.indexOf("android"),Q&&/iphone|ipad|ipod|ios/.test(Q)||"ios"===K),rt=(Q&&/chrome\/\d+/.test(Q),Q&&/phantomjs/.test(Q),Q&&Q.match(/firefox\/(\d+)/)),ot={}.watch,at=!1;if(Z)try{var st={};Object.defineProperty(st,"passive",{get:function(){at=!0}}),window.addEventListener("test-passive",null,st)}catch(Ma){}var lt=function(){return void 0===Y&&(Y=!Z&&!J&&"undefined"!==typeof t&&(t["process"]&&"server"===t["process"].env.VUE_ENV)),Y},ct=Z&&window.__VUE_DEVTOOLS_GLOBAL_HOOK__;function ut(t){return"function"===typeof t&&/native code/.test(t.toString())}var ht,dt="undefined"!==typeof Symbol&&ut(Symbol)&&"undefined"!==typeof Reflect&&ut(Reflect.ownKeys);ht="undefined"!==typeof Set&&ut(Set)?Set:function(){function t(){this.set=Object.create(null)}return t.prototype.has=function(t){return!0===this.set[t]},t.prototype.add=function(t){this.set[t]=!0},t.prototype.clear=function(){this.set=Object.create(null)},t}();var pt=k,ft=0,mt=function(){this.id=ft++,this.subs=[]};mt.prototype.addSub=function(t){this.subs.push(t)},mt.prototype.removeSub=function(t){y(this.subs,t)},mt.prototype.depend=function(){mt.target&&mt.target.addDep(this)},mt.prototype.notify=function(){var t=this.subs.slice();for(var e=0,n=t.length;e<n;e++)t[e].update()},mt.target=null;var vt=[];function gt(t){vt.push(t),mt.target=t}function yt(){vt.pop(),mt.target=vt[vt.length-1]}var bt=function(t,e,n,i,r,o,a,s){this.tag=t,this.data=e,this.children=n,this.text=i,this.elm=r,this.ns=void 0,this.context=o,this.fnContext=void 0,this.fnOptions=void 0,this.fnScopeId=void 0,this.key=e&&e.key,this.componentOptions=a,this.componentInstance=void 0,this.parent=void 0,this.raw=!1,this.isStatic=!1,this.isRootInsert=!0,this.isComment=!1,this.isCloned=!1,this.isOnce=!1,this.asyncFactory=s,this.asyncMeta=void 0,this.isAsyncPlaceholder=!1},xt={child:{configurable:!0}};xt.child.get=function(){return this.componentInstance},Object.defineProperties(bt.prototype,xt);var wt=function(t){void 0===t&&(t="");var e=new bt;return e.text=t,e.isComment=!0,e};function _t(t){return new bt(void 0,void 0,void 0,String(t))}function Mt(t){var e=new bt(t.tag,t.data,t.children&&t.children.slice(),t.text,t.elm,t.context,t.componentOptions,t.asyncFactory);return e.ns=t.ns,e.isStatic=t.isStatic,e.key=t.key,e.isComment=t.isComment,e.fnContext=t.fnContext,e.fnOptions=t.fnOptions,e.fnScopeId=t.fnScopeId,e.asyncMeta=t.asyncMeta,e.isCloned=!0,e}var Et=Array.prototype,St=Object.create(Et),Tt=["push","pop","shift","unshift","splice","sort","reverse"];Tt.forEach(function(t){var e=Et[t];W(St,t,function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];var r,o=e.apply(this,n),a=this.__ob__;switch(t){case"push":case"unshift":r=n;break;case"splice":r=n.slice(2);break}return r&&a.observeArray(r),a.dep.notify(),o})});var At=Object.getOwnPropertyNames(St),Ct=!0;function Lt(t){Ct=t}var Pt=function(t){this.value=t,this.dep=new mt,this.vmCount=0,W(t,"__ob__",this),Array.isArray(t)?(X?Ot(t,St):Rt(t,St,At),this.observeArray(t)):this.walk(t)};function Ot(t,e){t.__proto__=e}function Rt(t,e,n){for(var i=0,r=n.length;i<r;i++){var o=n[i];W(t,o,e[o])}}function kt(t,e){var n;if(l(t)&&!(t instanceof bt))return x(t,"__ob__")&&t.__ob__ instanceof Pt?n=t.__ob__:Ct&&!lt()&&(Array.isArray(t)||u(t))&&Object.isExtensible(t)&&!t._isVue&&(n=new Pt(t)),e&&n&&n.vmCount++,n}function Dt(t,e,n,i,r){var o=new mt,a=Object.getOwnPropertyDescriptor(t,e);if(!a||!1!==a.configurable){var s=a&&a.get,l=a&&a.set;s&&!l||2!==arguments.length||(n=t[e]);var c=!r&&kt(n);Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:function(){var e=s?s.call(t):n;return mt.target&&(o.depend(),c&&(c.dep.depend(),Array.isArray(e)&&zt(e))),e},set:function(e){var i=s?s.call(t):n;e===i||e!==e&&i!==i||s&&!l||(l?l.call(t,e):n=e,c=!r&&kt(e),o.notify())}})}}function It(t,e,n){if(Array.isArray(t)&&d(e))return t.length=Math.max(t.length,e),t.splice(e,1,n),n;if(e in t&&!(e in Object.prototype))return t[e]=n,n;var i=t.__ob__;return t._isVue||i&&i.vmCount?n:i?(Dt(i.value,e,n),i.dep.notify(),n):(t[e]=n,n)}function Nt(t,e){if(Array.isArray(t)&&d(e))t.splice(e,1);else{var n=t.__ob__;t._isVue||n&&n.vmCount||x(t,e)&&(delete t[e],n&&n.dep.notify())}}function zt(t){for(var e=void 0,n=0,i=t.length;n<i;n++)e=t[n],e&&e.__ob__&&e.__ob__.dep.depend(),Array.isArray(e)&&zt(e)}Pt.prototype.walk=function(t){for(var e=Object.keys(t),n=0;n<e.length;n++)Dt(t,e[n])},Pt.prototype.observeArray=function(t){for(var e=0,n=t.length;e<n;e++)kt(t[e])};var Bt=U.optionMergeStrategies;function Ft(t,e){if(!e)return t;for(var n,i,r,o=dt?Reflect.ownKeys(e):Object.keys(e),a=0;a<o.length;a++)n=o[a],"__ob__"!==n&&(i=t[n],r=e[n],x(t,n)?i!==r&&u(i)&&u(r)&&Ft(i,r):It(t,n,r));return t}function jt(t,e,n){return n?function(){var i="function"===typeof e?e.call(n,n):e,r="function"===typeof t?t.call(n,n):t;return i?Ft(i,r):r}:e?t?function(){return Ft("function"===typeof e?e.call(this,this):e,"function"===typeof t?t.call(this,this):t)}:e:t}function Ht(t,e){var n=e?t?t.concat(e):Array.isArray(e)?e:[e]:t;return n?Ut(n):n}function Ut(t){for(var e=[],n=0;n<t.length;n++)-1===e.indexOf(t[n])&&e.push(t[n]);return e}function Vt(t,e,n,i){var r=Object.create(t||null);return e?O(r,e):r}Bt.data=function(t,e,n){return n?jt(t,e,n):e&&"function"!==typeof e?t:jt(t,e)},H.forEach(function(t){Bt[t]=Ht}),j.forEach(function(t){Bt[t+"s"]=Vt}),Bt.watch=function(t,e,n,i){if(t===ot&&(t=void 0),e===ot&&(e=void 0),!e)return Object.create(t||null);if(!t)return e;var r={};for(var o in O(r,t),e){var a=r[o],s=e[o];a&&!Array.isArray(a)&&(a=[a]),r[o]=a?a.concat(s):Array.isArray(s)?s:[s]}return r},Bt.props=Bt.methods=Bt.inject=Bt.computed=function(t,e,n,i){if(!t)return e;var r=Object.create(null);return O(r,t),e&&O(r,e),r},Bt.provide=jt;var Gt=function(t,e){return void 0===e?t:e};function Wt(t,e){var n=t.props;if(n){var i,r,o,a={};if(Array.isArray(n)){i=n.length;while(i--)r=n[i],"string"===typeof r&&(o=M(r),a[o]={type:null})}else if(u(n))for(var s in n)r=n[s],o=M(s),a[o]=u(r)?r:{type:r};else 0;t.props=a}}function $t(t,e){var n=t.inject;if(n){var i=t.inject={};if(Array.isArray(n))for(var r=0;r<n.length;r++)i[n[r]]={from:n[r]};else if(u(n))for(var o in n){var a=n[o];i[o]=u(a)?O({from:o},a):{from:a}}else 0}}function qt(t){var e=t.directives;if(e)for(var n in e){var i=e[n];"function"===typeof i&&(e[n]={bind:i,update:i})}}function Yt(t,e,n){if("function"===typeof e&&(e=e.options),Wt(e,n),$t(e,n),qt(e),!e._base&&(e.extends&&(t=Yt(t,e.extends,n)),e.mixins))for(var i=0,r=e.mixins.length;i<r;i++)t=Yt(t,e.mixins[i],n);var o,a={};for(o in t)s(o);for(o in e)x(t,o)||s(o);function s(i){var r=Bt[i]||Gt;a[i]=r(t[i],e[i],n,i)}return a}function Xt(t,e,n,i){if("string"===typeof n){var r=t[e];if(x(r,n))return r[n];var o=M(n);if(x(r,o))return r[o];var a=E(o);if(x(r,a))return r[a];var s=r[n]||r[o]||r[a];return s}}function Zt(t,e,n,i){var r=e[t],o=!x(n,t),a=n[t],s=te(Boolean,r.type);if(s>-1)if(o&&!x(r,"default"))a=!1;else if(""===a||a===T(t)){var l=te(String,r.type);(l<0||s<l)&&(a=!0)}if(void 0===a){a=Jt(i,r,t);var c=Ct;Lt(!0),kt(a),Lt(c)}return a}function Jt(t,e,n){if(x(e,"default")){var i=e.default;return t&&t.$options.propsData&&void 0===t.$options.propsData[n]&&void 0!==t._props[n]?t._props[n]:"function"===typeof i&&"Function"!==Kt(e.type)?i.call(t):i}}function Kt(t){var e=t&&t.toString().match(/^\s*function (\w+)/);return e?e[1]:""}function Qt(t,e){return Kt(t)===Kt(e)}function te(t,e){if(!Array.isArray(e))return Qt(e,t)?0:-1;for(var n=0,i=e.length;n<i;n++)if(Qt(e[n],t))return n;return-1}function ee(t,e,n){gt();try{if(e){var i=e;while(i=i.$parent){var r=i.$options.errorCaptured;if(r)for(var o=0;o<r.length;o++)try{var a=!1===r[o].call(i,t,e,n);if(a)return}catch(Ma){ie(Ma,i,"errorCaptured hook")}}}ie(t,e,n)}finally{yt()}}function ne(t,e,n,i,r){var o;try{o=n?t.apply(e,n):t.call(e),o&&!o._isVue&&p(o)&&!o._handled&&(o.catch(function(t){return ee(t,i,r+" (Promise/async)")}),o._handled=!0)}catch(Ma){ee(Ma,i,r)}return o}function ie(t,e,n){if(U.errorHandler)try{return U.errorHandler.call(null,t,e,n)}catch(Ma){Ma!==t&&re(Ma,null,"config.errorHandler")}re(t,e,n)}function re(t,e,n){if(!Z&&!J||"undefined"===typeof console)throw t;console.error(t)}var oe,ae=!1,se=[],le=!1;function ce(){le=!1;var t=se.slice(0);se.length=0;for(var e=0;e<t.length;e++)t[e]()}if("undefined"!==typeof Promise&&ut(Promise)){var ue=Promise.resolve();oe=function(){ue.then(ce),it&&setTimeout(k)},ae=!0}else if(tt||"undefined"===typeof MutationObserver||!ut(MutationObserver)&&"[object MutationObserverConstructor]"!==MutationObserver.toString())oe="undefined"!==typeof setImmediate&&ut(setImmediate)?function(){setImmediate(ce)}:function(){setTimeout(ce,0)};else{var he=1,de=new MutationObserver(ce),pe=document.createTextNode(String(he));de.observe(pe,{characterData:!0}),oe=function(){he=(he+1)%2,pe.data=String(he)},ae=!0}function fe(t,e){var n;if(se.push(function(){if(t)try{t.call(e)}catch(Ma){ee(Ma,e,"nextTick")}else n&&n(e)}),le||(le=!0,oe()),!t&&"undefined"!==typeof Promise)return new Promise(function(t){n=t})}var me=new ht;function ve(t){ge(t,me),me.clear()}function ge(t,e){var n,i,r=Array.isArray(t);if(!(!r&&!l(t)||Object.isFrozen(t)||t instanceof bt)){if(t.__ob__){var o=t.__ob__.dep.id;if(e.has(o))return;e.add(o)}if(r){n=t.length;while(n--)ge(t[n],e)}else{i=Object.keys(t),n=i.length;while(n--)ge(t[i[n]],e)}}}var ye=w(function(t){var e="&"===t.charAt(0);t=e?t.slice(1):t;var n="~"===t.charAt(0);t=n?t.slice(1):t;var i="!"===t.charAt(0);return t=i?t.slice(1):t,{name:t,once:n,capture:i,passive:e}});function be(t,e){function n(){var t=arguments,i=n.fns;if(!Array.isArray(i))return ne(i,null,arguments,e,"v-on handler");for(var r=i.slice(),o=0;o<r.length;o++)ne(r[o],null,t,e,"v-on handler")}return n.fns=t,n}function xe(t,e,n,r,a,s){var l,c,u,h;for(l in t)c=t[l],u=e[l],h=ye(l),i(c)||(i(u)?(i(c.fns)&&(c=t[l]=be(c,s)),o(h.once)&&(c=t[l]=a(h.name,c,h.capture)),n(h.name,c,h.capture,h.passive,h.params)):c!==u&&(u.fns=c,t[l]=u));for(l in e)i(t[l])&&(h=ye(l),r(h.name,e[l],h.capture))}function we(t,e,n){var a;t instanceof bt&&(t=t.data.hook||(t.data.hook={}));var s=t[e];function l(){n.apply(this,arguments),y(a.fns,l)}i(s)?a=be([l]):r(s.fns)&&o(s.merged)?(a=s,a.fns.push(l)):a=be([s,l]),a.merged=!0,t[e]=a}function _e(t,e,n){var o=e.options.props;if(!i(o)){var a={},s=t.attrs,l=t.props;if(r(s)||r(l))for(var c in o){var u=T(c);Me(a,l,c,u,!0)||Me(a,s,c,u,!1)}return a}}function Me(t,e,n,i,o){if(r(e)){if(x(e,n))return t[n]=e[n],o||delete e[n],!0;if(x(e,i))return t[n]=e[i],o||delete e[i],!0}return!1}function Ee(t){for(var e=0;e<t.length;e++)if(Array.isArray(t[e]))return Array.prototype.concat.apply([],t);return t}function Se(t){return s(t)?[_t(t)]:Array.isArray(t)?Ae(t):void 0}function Te(t){return r(t)&&r(t.text)&&a(t.isComment)}function Ae(t,e){var n,a,l,c,u=[];for(n=0;n<t.length;n++)a=t[n],i(a)||"boolean"===typeof a||(l=u.length-1,c=u[l],Array.isArray(a)?a.length>0&&(a=Ae(a,(e||"")+"_"+n),Te(a[0])&&Te(c)&&(u[l]=_t(c.text+a[0].text),a.shift()),u.push.apply(u,a)):s(a)?Te(c)?u[l]=_t(c.text+a):""!==a&&u.push(_t(a)):Te(a)&&Te(c)?u[l]=_t(c.text+a.text):(o(t._isVList)&&r(a.tag)&&i(a.key)&&r(e)&&(a.key="__vlist"+e+"_"+n+"__"),u.push(a)));return u}function Ce(t){var e=t.$options.provide;e&&(t._provided="function"===typeof e?e.call(t):e)}function Le(t){var e=Pe(t.$options.inject,t);e&&(Lt(!1),Object.keys(e).forEach(function(n){Dt(t,n,e[n])}),Lt(!0))}function Pe(t,e){if(t){for(var n=Object.create(null),i=dt?Reflect.ownKeys(t):Object.keys(t),r=0;r<i.length;r++){var o=i[r];if("__ob__"!==o){var a=t[o].from,s=e;while(s){if(s._provided&&x(s._provided,a)){n[o]=s._provided[a];break}s=s.$parent}if(!s)if("default"in t[o]){var l=t[o].default;n[o]="function"===typeof l?l.call(e):l}else 0}}return n}}function Oe(t,e){if(!t||!t.length)return{};for(var n={},i=0,r=t.length;i<r;i++){var o=t[i],a=o.data;if(a&&a.attrs&&a.attrs.slot&&delete a.attrs.slot,o.context!==e&&o.fnContext!==e||!a||null==a.slot)(n.default||(n.default=[])).push(o);else{var s=a.slot,l=n[s]||(n[s]=[]);"template"===o.tag?l.push.apply(l,o.children||[]):l.push(o)}}for(var c in n)n[c].every(Re)&&delete n[c];return n}function Re(t){return t.isComment&&!t.asyncFactory||" "===t.text}function ke(t,e,i){var r,o=Object.keys(e).length>0,a=t?!!t.$stable:!o,s=t&&t.$key;if(t){if(t._normalized)return t._normalized;if(a&&i&&i!==n&&s===i.$key&&!o&&!i.$hasNormal)return i;for(var l in r={},t)t[l]&&"$"!==l[0]&&(r[l]=De(e,l,t[l]))}else r={};for(var c in e)c in r||(r[c]=Ie(e,c));return t&&Object.isExtensible(t)&&(t._normalized=r),W(r,"$stable",a),W(r,"$key",s),W(r,"$hasNormal",o),r}function De(t,e,n){var i=function(){var t=arguments.length?n.apply(null,arguments):n({});return t=t&&"object"===typeof t&&!Array.isArray(t)?[t]:Se(t),t&&(0===t.length||1===t.length&&t[0].isComment)?void 0:t};return n.proxy&&Object.defineProperty(t,e,{get:i,enumerable:!0,configurable:!0}),i}function Ie(t,e){return function(){return t[e]}}function Ne(t,e){var n,i,o,a,s;if(Array.isArray(t)||"string"===typeof t)for(n=new Array(t.length),i=0,o=t.length;i<o;i++)n[i]=e(t[i],i);else if("number"===typeof t)for(n=new Array(t),i=0;i<t;i++)n[i]=e(i+1,i);else if(l(t))if(dt&&t[Symbol.iterator]){n=[];var c=t[Symbol.iterator](),u=c.next();while(!u.done)n.push(e(u.value,n.length)),u=c.next()}else for(a=Object.keys(t),n=new Array(a.length),i=0,o=a.length;i<o;i++)s=a[i],n[i]=e(t[s],s,i);return r(n)||(n=[]),n._isVList=!0,n}function ze(t,e,n,i){var r,o=this.$scopedSlots[t];o?(n=n||{},i&&(n=O(O({},i),n)),r=o(n)||e):r=this.$slots[t]||e;var a=n&&n.slot;return a?this.$createElement("template",{slot:a},r):r}function Be(t){return Xt(this.$options,"filters",t,!0)||I}function Fe(t,e){return Array.isArray(t)?-1===t.indexOf(e):t!==e}function je(t,e,n,i,r){var o=U.keyCodes[e]||n;return r&&i&&!U.keyCodes[e]?Fe(r,i):o?Fe(o,t):i?T(i)!==e:void 0}function He(t,e,n,i,r){if(n)if(l(n)){var o;Array.isArray(n)&&(n=R(n));var a=function(a){if("class"===a||"style"===a||g(a))o=t;else{var s=t.attrs&&t.attrs.type;o=i||U.mustUseProp(e,s,a)?t.domProps||(t.domProps={}):t.attrs||(t.attrs={})}var l=M(a),c=T(a);if(!(l in o)&&!(c in o)&&(o[a]=n[a],r)){var u=t.on||(t.on={});u["update:"+a]=function(t){n[a]=t}}};for(var s in n)a(s)}else;return t}function Ue(t,e){var n=this._staticTrees||(this._staticTrees=[]),i=n[t];return i&&!e?i:(i=n[t]=this.$options.staticRenderFns[t].call(this._renderProxy,null,this),Ge(i,"__static__"+t,!1),i)}function Ve(t,e,n){return Ge(t,"__once__"+e+(n?"_"+n:""),!0),t}function Ge(t,e,n){if(Array.isArray(t))for(var i=0;i<t.length;i++)t[i]&&"string"!==typeof t[i]&&We(t[i],e+"_"+i,n);else We(t,e,n)}function We(t,e,n){t.isStatic=!0,t.key=e,t.isOnce=n}function $e(t,e){if(e)if(u(e)){var n=t.on=t.on?O({},t.on):{};for(var i in e){var r=n[i],o=e[i];n[i]=r?[].concat(r,o):o}}else;return t}function qe(t,e,n,i){e=e||{$stable:!n};for(var r=0;r<t.length;r++){var o=t[r];Array.isArray(o)?qe(o,e,n):o&&(o.proxy&&(o.fn.proxy=!0),e[o.key]=o.fn)}return i&&(e.$key=i),e}function Ye(t,e){for(var n=0;n<e.length;n+=2){var i=e[n];"string"===typeof i&&i&&(t[e[n]]=e[n+1])}return t}function Xe(t,e){return"string"===typeof t?e+t:t}function Ze(t){t._o=Ve,t._n=m,t._s=f,t._l=Ne,t._t=ze,t._q=N,t._i=z,t._m=Ue,t._f=Be,t._k=je,t._b=He,t._v=_t,t._e=wt,t._u=qe,t._g=$e,t._d=Ye,t._p=Xe}function Je(t,e,i,r,a){var s,l=this,c=a.options;x(r,"_uid")?(s=Object.create(r),s._original=r):(s=r,r=r._original);var u=o(c._compiled),h=!u;this.data=t,this.props=e,this.children=i,this.parent=r,this.listeners=t.on||n,this.injections=Pe(c.inject,r),this.slots=function(){return l.$slots||ke(t.scopedSlots,l.$slots=Oe(i,r)),l.$slots},Object.defineProperty(this,"scopedSlots",{enumerable:!0,get:function(){return ke(t.scopedSlots,this.slots())}}),u&&(this.$options=c,this.$slots=this.slots(),this.$scopedSlots=ke(t.scopedSlots,this.$slots)),c._scopeId?this._c=function(t,e,n,i){var o=hn(s,t,e,n,i,h);return o&&!Array.isArray(o)&&(o.fnScopeId=c._scopeId,o.fnContext=r),o}:this._c=function(t,e,n,i){return hn(s,t,e,n,i,h)}}function Ke(t,e,i,o,a){var s=t.options,l={},c=s.props;if(r(c))for(var u in c)l[u]=Zt(u,c,e||n);else r(i.attrs)&&tn(l,i.attrs),r(i.props)&&tn(l,i.props);var h=new Je(i,l,a,o,t),d=s.render.call(null,h._c,h);if(d instanceof bt)return Qe(d,i,h.parent,s,h);if(Array.isArray(d)){for(var p=Se(d)||[],f=new Array(p.length),m=0;m<p.length;m++)f[m]=Qe(p[m],i,h.parent,s,h);return f}}function Qe(t,e,n,i,r){var o=Mt(t);return o.fnContext=n,o.fnOptions=i,e.slot&&((o.data||(o.data={})).slot=e.slot),o}function tn(t,e){for(var n in e)t[M(n)]=e[n]}Ze(Je.prototype);var en={init:function(t,e){if(t.componentInstance&&!t.componentInstance._isDestroyed&&t.data.keepAlive){var n=t;en.prepatch(n,n)}else{var i=t.componentInstance=on(t,Pn);i.$mount(e?t.elm:void 0,e)}},prepatch:function(t,e){var n=e.componentOptions,i=e.componentInstance=t.componentInstance;In(i,n.propsData,n.listeners,e,n.children)},insert:function(t){var e=t.context,n=t.componentInstance;n._isMounted||(n._isMounted=!0,Fn(n,"mounted")),t.data.keepAlive&&(e._isMounted?Kn(n):zn(n,!0))},destroy:function(t){var e=t.componentInstance;e._isDestroyed||(t.data.keepAlive?Bn(e,!0):e.$destroy())}},nn=Object.keys(en);function rn(t,e,n,a,s){if(!i(t)){var c=n.$options._base;if(l(t)&&(t=c.extend(t)),"function"===typeof t){var u;if(i(t.cid)&&(u=t,t=wn(u,c),void 0===t))return xn(u,e,n,a,s);e=e||{},wi(t),r(e.model)&&ln(t.options,e);var h=_e(e,t,s);if(o(t.options.functional))return Ke(t,h,e,n,a);var d=e.on;if(e.on=e.nativeOn,o(t.options.abstract)){var p=e.slot;e={},p&&(e.slot=p)}an(e);var f=t.options.name||s,m=new bt("vue-component-"+t.cid+(f?"-"+f:""),e,void 0,void 0,void 0,n,{Ctor:t,propsData:h,listeners:d,tag:s,children:a},u);return m}}}function on(t,e){var n={_isComponent:!0,_parentVnode:t,parent:e},i=t.data.inlineTemplate;return r(i)&&(n.render=i.render,n.staticRenderFns=i.staticRenderFns),new t.componentOptions.Ctor(n)}function an(t){for(var e=t.hook||(t.hook={}),n=0;n<nn.length;n++){var i=nn[n],r=e[i],o=en[i];r===o||r&&r._merged||(e[i]=r?sn(o,r):o)}}function sn(t,e){var n=function(n,i){t(n,i),e(n,i)};return n._merged=!0,n}function ln(t,e){var n=t.model&&t.model.prop||"value",i=t.model&&t.model.event||"input";(e.attrs||(e.attrs={}))[n]=e.model.value;var o=e.on||(e.on={}),a=o[i],s=e.model.callback;r(a)?(Array.isArray(a)?-1===a.indexOf(s):a!==s)&&(o[i]=[s].concat(a)):o[i]=s}var cn=1,un=2;function hn(t,e,n,i,r,a){return(Array.isArray(n)||s(n))&&(r=i,i=n,n=void 0),o(a)&&(r=un),dn(t,e,n,i,r)}function dn(t,e,n,i,o){if(r(n)&&r(n.__ob__))return wt();if(r(n)&&r(n.is)&&(e=n.is),!e)return wt();var a,s,l;(Array.isArray(i)&&"function"===typeof i[0]&&(n=n||{},n.scopedSlots={default:i[0]},i.length=0),o===un?i=Se(i):o===cn&&(i=Ee(i)),"string"===typeof e)?(s=t.$vnode&&t.$vnode.ns||U.getTagNamespace(e),a=U.isReservedTag(e)?new bt(U.parsePlatformTagName(e),n,i,void 0,void 0,t):n&&n.pre||!r(l=Xt(t.$options,"components",e))?new bt(e,n,i,void 0,void 0,t):rn(l,n,t,i,e)):a=rn(e,n,t,i);return Array.isArray(a)?a:r(a)?(r(s)&&pn(a,s),r(n)&&fn(n),a):wt()}function pn(t,e,n){if(t.ns=e,"foreignObject"===t.tag&&(e=void 0,n=!0),r(t.children))for(var a=0,s=t.children.length;a<s;a++){var l=t.children[a];r(l.tag)&&(i(l.ns)||o(n)&&"svg"!==l.tag)&&pn(l,e,n)}}function fn(t){l(t.style)&&ve(t.style),l(t.class)&&ve(t.class)}function mn(t){t._vnode=null,t._staticTrees=null;var e=t.$options,i=t.$vnode=e._parentVnode,r=i&&i.context;t.$slots=Oe(e._renderChildren,r),t.$scopedSlots=n,t._c=function(e,n,i,r){return hn(t,e,n,i,r,!1)},t.$createElement=function(e,n,i,r){return hn(t,e,n,i,r,!0)};var o=i&&i.data;Dt(t,"$attrs",o&&o.attrs||n,null,!0),Dt(t,"$listeners",e._parentListeners||n,null,!0)}var vn,gn=null;function yn(t){Ze(t.prototype),t.prototype.$nextTick=function(t){return fe(t,this)},t.prototype._render=function(){var t,e=this,n=e.$options,i=n.render,r=n._parentVnode;r&&(e.$scopedSlots=ke(r.data.scopedSlots,e.$slots,e.$scopedSlots)),e.$vnode=r;try{gn=e,t=i.call(e._renderProxy,e.$createElement)}catch(Ma){ee(Ma,e,"render"),t=e._vnode}finally{gn=null}return Array.isArray(t)&&1===t.length&&(t=t[0]),t instanceof bt||(t=wt()),t.parent=r,t}}function bn(t,e){return(t.__esModule||dt&&"Module"===t[Symbol.toStringTag])&&(t=t.default),l(t)?e.extend(t):t}function xn(t,e,n,i,r){var o=wt();return o.asyncFactory=t,o.asyncMeta={data:e,context:n,children:i,tag:r},o}function wn(t,e){if(o(t.error)&&r(t.errorComp))return t.errorComp;if(r(t.resolved))return t.resolved;var n=gn;if(n&&r(t.owners)&&-1===t.owners.indexOf(n)&&t.owners.push(n),o(t.loading)&&r(t.loadingComp))return t.loadingComp;if(n&&!r(t.owners)){var a=t.owners=[n],s=!0,c=null,u=null;n.$on("hook:destroyed",function(){return y(a,n)});var h=function(t){for(var e=0,n=a.length;e<n;e++)a[e].$forceUpdate();t&&(a.length=0,null!==c&&(clearTimeout(c),c=null),null!==u&&(clearTimeout(u),u=null))},d=B(function(n){t.resolved=bn(n,e),s?a.length=0:h(!0)}),f=B(function(e){r(t.errorComp)&&(t.error=!0,h(!0))}),m=t(d,f);return l(m)&&(p(m)?i(t.resolved)&&m.then(d,f):p(m.component)&&(m.component.then(d,f),r(m.error)&&(t.errorComp=bn(m.error,e)),r(m.loading)&&(t.loadingComp=bn(m.loading,e),0===m.delay?t.loading=!0:c=setTimeout(function(){c=null,i(t.resolved)&&i(t.error)&&(t.loading=!0,h(!1))},m.delay||200)),r(m.timeout)&&(u=setTimeout(function(){u=null,i(t.resolved)&&f(null)},m.timeout)))),s=!1,t.loading?t.loadingComp:t.resolved}}function _n(t){return t.isComment&&t.asyncFactory}function Mn(t){if(Array.isArray(t))for(var e=0;e<t.length;e++){var n=t[e];if(r(n)&&(r(n.componentOptions)||_n(n)))return n}}function En(t){t._events=Object.create(null),t._hasHookEvent=!1;var e=t.$options._parentListeners;e&&Cn(t,e)}function Sn(t,e){vn.$on(t,e)}function Tn(t,e){vn.$off(t,e)}function An(t,e){var n=vn;return function i(){var r=e.apply(null,arguments);null!==r&&n.$off(t,i)}}function Cn(t,e,n){vn=t,xe(e,n||{},Sn,Tn,An,t),vn=void 0}function Ln(t){var e=/^hook:/;t.prototype.$on=function(t,n){var i=this;if(Array.isArray(t))for(var r=0,o=t.length;r<o;r++)i.$on(t[r],n);else(i._events[t]||(i._events[t]=[])).push(n),e.test(t)&&(i._hasHookEvent=!0);return i},t.prototype.$once=function(t,e){var n=this;function i(){n.$off(t,i),e.apply(n,arguments)}return i.fn=e,n.$on(t,i),n},t.prototype.$off=function(t,e){var n=this;if(!arguments.length)return n._events=Object.create(null),n;if(Array.isArray(t)){for(var i=0,r=t.length;i<r;i++)n.$off(t[i],e);return n}var o,a=n._events[t];if(!a)return n;if(!e)return n._events[t]=null,n;var s=a.length;while(s--)if(o=a[s],o===e||o.fn===e){a.splice(s,1);break}return n},t.prototype.$emit=function(t){var e=this,n=e._events[t];if(n){n=n.length>1?P(n):n;for(var i=P(arguments,1),r='event handler for "'+t+'"',o=0,a=n.length;o<a;o++)ne(n[o],e,i,e,r)}return e}}var Pn=null;function On(t){var e=Pn;return Pn=t,function(){Pn=e}}function Rn(t){var e=t.$options,n=e.parent;if(n&&!e.abstract){while(n.$options.abstract&&n.$parent)n=n.$parent;n.$children.push(t)}t.$parent=n,t.$root=n?n.$root:t,t.$children=[],t.$refs={},t._watcher=null,t._inactive=null,t._directInactive=!1,t._isMounted=!1,t._isDestroyed=!1,t._isBeingDestroyed=!1}function kn(t){t.prototype._update=function(t,e){var n=this,i=n.$el,r=n._vnode,o=On(n);n._vnode=t,n.$el=r?n.__patch__(r,t):n.__patch__(n.$el,t,e,!1),o(),i&&(i.__vue__=null),n.$el&&(n.$el.__vue__=n),n.$vnode&&n.$parent&&n.$vnode===n.$parent._vnode&&(n.$parent.$el=n.$el)},t.prototype.$forceUpdate=function(){var t=this;t._watcher&&t._watcher.update()},t.prototype.$destroy=function(){var t=this;if(!t._isBeingDestroyed){Fn(t,"beforeDestroy"),t._isBeingDestroyed=!0;var e=t.$parent;!e||e._isBeingDestroyed||t.$options.abstract||y(e.$children,t),t._watcher&&t._watcher.teardown();var n=t._watchers.length;while(n--)t._watchers[n].teardown();t._data.__ob__&&t._data.__ob__.vmCount--,t._isDestroyed=!0,t.__patch__(t._vnode,null),Fn(t,"destroyed"),t.$off(),t.$el&&(t.$el.__vue__=null),t.$vnode&&(t.$vnode.parent=null)}}}function Dn(t,e,n){var i;return t.$el=e,t.$options.render||(t.$options.render=wt),Fn(t,"beforeMount"),i=function(){t._update(t._render(),n)},new ni(t,i,k,{before:function(){t._isMounted&&!t._isDestroyed&&Fn(t,"beforeUpdate")}},!0),n=!1,null==t.$vnode&&(t._isMounted=!0,Fn(t,"mounted")),t}function In(t,e,i,r,o){var a=r.data.scopedSlots,s=t.$scopedSlots,l=!!(a&&!a.$stable||s!==n&&!s.$stable||a&&t.$scopedSlots.$key!==a.$key),c=!!(o||t.$options._renderChildren||l);if(t.$options._parentVnode=r,t.$vnode=r,t._vnode&&(t._vnode.parent=r),t.$options._renderChildren=o,t.$attrs=r.data.attrs||n,t.$listeners=i||n,e&&t.$options.props){Lt(!1);for(var u=t._props,h=t.$options._propKeys||[],d=0;d<h.length;d++){var p=h[d],f=t.$options.props;u[p]=Zt(p,f,e,t)}Lt(!0),t.$options.propsData=e}i=i||n;var m=t.$options._parentListeners;t.$options._parentListeners=i,Cn(t,i,m),c&&(t.$slots=Oe(o,r.context),t.$forceUpdate())}function Nn(t){while(t&&(t=t.$parent))if(t._inactive)return!0;return!1}function zn(t,e){if(e){if(t._directInactive=!1,Nn(t))return}else if(t._directInactive)return;if(t._inactive||null===t._inactive){t._inactive=!1;for(var n=0;n<t.$children.length;n++)zn(t.$children[n]);Fn(t,"activated")}}function Bn(t,e){if((!e||(t._directInactive=!0,!Nn(t)))&&!t._inactive){t._inactive=!0;for(var n=0;n<t.$children.length;n++)Bn(t.$children[n]);Fn(t,"deactivated")}}function Fn(t,e){gt();var n=t.$options[e],i=e+" hook";if(n)for(var r=0,o=n.length;r<o;r++)ne(n[r],t,null,t,i);t._hasHookEvent&&t.$emit("hook:"+e),yt()}var jn=[],Hn=[],Un={},Vn=!1,Gn=!1,Wn=0;function $n(){Wn=jn.length=Hn.length=0,Un={},Vn=Gn=!1}var qn=0,Yn=Date.now;if(Z&&!tt){var Xn=window.performance;Xn&&"function"===typeof Xn.now&&Yn()>document.createEvent("Event").timeStamp&&(Yn=function(){return Xn.now()})}function Zn(){var t,e;for(qn=Yn(),Gn=!0,jn.sort(function(t,e){return t.id-e.id}),Wn=0;Wn<jn.length;Wn++)t=jn[Wn],t.before&&t.before(),e=t.id,Un[e]=null,t.run();var n=Hn.slice(),i=jn.slice();$n(),Qn(n),Jn(i),ct&&U.devtools&&ct.emit("flush")}function Jn(t){var e=t.length;while(e--){var n=t[e],i=n.vm;i._watcher===n&&i._isMounted&&!i._isDestroyed&&Fn(i,"updated")}}function Kn(t){t._inactive=!1,Hn.push(t)}function Qn(t){for(var e=0;e<t.length;e++)t[e]._inactive=!0,zn(t[e],!0)}function ti(t){var e=t.id;if(null==Un[e]){if(Un[e]=!0,Gn){var n=jn.length-1;while(n>Wn&&jn[n].id>t.id)n--;jn.splice(n+1,0,t)}else jn.push(t);Vn||(Vn=!0,fe(Zn))}}var ei=0,ni=function(t,e,n,i,r){this.vm=t,r&&(t._watcher=this),t._watchers.push(this),i?(this.deep=!!i.deep,this.user=!!i.user,this.lazy=!!i.lazy,this.sync=!!i.sync,this.before=i.before):this.deep=this.user=this.lazy=this.sync=!1,this.cb=n,this.id=++ei,this.active=!0,this.dirty=this.lazy,this.deps=[],this.newDeps=[],this.depIds=new ht,this.newDepIds=new ht,this.expression="","function"===typeof e?this.getter=e:(this.getter=q(e),this.getter||(this.getter=k)),this.value=this.lazy?void 0:this.get()};ni.prototype.get=function(){var t;gt(this);var e=this.vm;try{t=this.getter.call(e,e)}catch(Ma){if(!this.user)throw Ma;ee(Ma,e,'getter for watcher "'+this.expression+'"')}finally{this.deep&&ve(t),yt(),this.cleanupDeps()}return t},ni.prototype.addDep=function(t){var e=t.id;this.newDepIds.has(e)||(this.newDepIds.add(e),this.newDeps.push(t),this.depIds.has(e)||t.addSub(this))},ni.prototype.cleanupDeps=function(){var t=this.deps.length;while(t--){var e=this.deps[t];this.newDepIds.has(e.id)||e.removeSub(this)}var n=this.depIds;this.depIds=this.newDepIds,this.newDepIds=n,this.newDepIds.clear(),n=this.deps,this.deps=this.newDeps,this.newDeps=n,this.newDeps.length=0},ni.prototype.update=function(){this.lazy?this.dirty=!0:this.sync?this.run():ti(this)},ni.prototype.run=function(){if(this.active){var t=this.get();if(t!==this.value||l(t)||this.deep){var e=this.value;if(this.value=t,this.user)try{this.cb.call(this.vm,t,e)}catch(Ma){ee(Ma,this.vm,'callback for watcher "'+this.expression+'"')}else this.cb.call(this.vm,t,e)}}},ni.prototype.evaluate=function(){this.value=this.get(),this.dirty=!1},ni.prototype.depend=function(){var t=this.deps.length;while(t--)this.deps[t].depend()},ni.prototype.teardown=function(){if(this.active){this.vm._isBeingDestroyed||y(this.vm._watchers,this);var t=this.deps.length;while(t--)this.deps[t].removeSub(this);this.active=!1}};var ii={enumerable:!0,configurable:!0,get:k,set:k};function ri(t,e,n){ii.get=function(){return this[e][n]},ii.set=function(t){this[e][n]=t},Object.defineProperty(t,n,ii)}function oi(t){t._watchers=[];var e=t.$options;e.props&&ai(t,e.props),e.methods&&fi(t,e.methods),e.data?si(t):kt(t._data={},!0),e.computed&&ui(t,e.computed),e.watch&&e.watch!==ot&&mi(t,e.watch)}function ai(t,e){var n=t.$options.propsData||{},i=t._props={},r=t.$options._propKeys=[],o=!t.$parent;o||Lt(!1);var a=function(o){r.push(o);var a=Zt(o,e,n,t);Dt(i,o,a),o in t||ri(t,"_props",o)};for(var s in e)a(s);Lt(!0)}function si(t){var e=t.$options.data;e=t._data="function"===typeof e?li(e,t):e||{},u(e)||(e={});var n=Object.keys(e),i=t.$options.props,r=(t.$options.methods,n.length);while(r--){var o=n[r];0,i&&x(i,o)||G(o)||ri(t,"_data",o)}kt(e,!0)}function li(t,e){gt();try{return t.call(e,e)}catch(Ma){return ee(Ma,e,"data()"),{}}finally{yt()}}var ci={lazy:!0};function ui(t,e){var n=t._computedWatchers=Object.create(null),i=lt();for(var r in e){var o=e[r],a="function"===typeof o?o:o.get;0,i||(n[r]=new ni(t,a||k,k,ci)),r in t||hi(t,r,o)}}function hi(t,e,n){var i=!lt();"function"===typeof n?(ii.get=i?di(e):pi(n),ii.set=k):(ii.get=n.get?i&&!1!==n.cache?di(e):pi(n.get):k,ii.set=n.set||k),Object.defineProperty(t,e,ii)}function di(t){return function(){var e=this._computedWatchers&&this._computedWatchers[t];if(e)return e.dirty&&e.evaluate(),mt.target&&e.depend(),e.value}}function pi(t){return function(){return t.call(this,this)}}function fi(t,e){t.$options.props;for(var n in e)t[n]="function"!==typeof e[n]?k:L(e[n],t)}function mi(t,e){for(var n in e){var i=e[n];if(Array.isArray(i))for(var r=0;r<i.length;r++)vi(t,n,i[r]);else vi(t,n,i)}}function vi(t,e,n,i){return u(n)&&(i=n,n=n.handler),"string"===typeof n&&(n=t[n]),t.$watch(e,n,i)}function gi(t){var e={get:function(){return this._data}},n={get:function(){return this._props}};Object.defineProperty(t.prototype,"$data",e),Object.defineProperty(t.prototype,"$props",n),t.prototype.$set=It,t.prototype.$delete=Nt,t.prototype.$watch=function(t,e,n){var i=this;if(u(e))return vi(i,t,e,n);n=n||{},n.user=!0;var r=new ni(i,t,e,n);if(n.immediate)try{e.call(i,r.value)}catch(o){ee(o,i,'callback for immediate watcher "'+r.expression+'"')}return function(){r.teardown()}}}var yi=0;function bi(t){t.prototype._init=function(t){var e=this;e._uid=yi++,e._isVue=!0,t&&t._isComponent?xi(e,t):e.$options=Yt(wi(e.constructor),t||{},e),e._renderProxy=e,e._self=e,Rn(e),En(e),mn(e),Fn(e,"beforeCreate"),Le(e),oi(e),Ce(e),Fn(e,"created"),e.$options.el&&e.$mount(e.$options.el)}}function xi(t,e){var n=t.$options=Object.create(t.constructor.options),i=e._parentVnode;n.parent=e.parent,n._parentVnode=i;var r=i.componentOptions;n.propsData=r.propsData,n._parentListeners=r.listeners,n._renderChildren=r.children,n._componentTag=r.tag,e.render&&(n.render=e.render,n.staticRenderFns=e.staticRenderFns)}function wi(t){var e=t.options;if(t.super){var n=wi(t.super),i=t.superOptions;if(n!==i){t.superOptions=n;var r=_i(t);r&&O(t.extendOptions,r),e=t.options=Yt(n,t.extendOptions),e.name&&(e.components[e.name]=t)}}return e}function _i(t){var e,n=t.options,i=t.sealedOptions;for(var r in n)n[r]!==i[r]&&(e||(e={}),e[r]=n[r]);return e}function Mi(t){this._init(t)}function Ei(t){t.use=function(t){var e=this._installedPlugins||(this._installedPlugins=[]);if(e.indexOf(t)>-1)return this;var n=P(arguments,1);return n.unshift(this),"function"===typeof t.install?t.install.apply(t,n):"function"===typeof t&&t.apply(null,n),e.push(t),this}}function Si(t){t.mixin=function(t){return this.options=Yt(this.options,t),this}}function Ti(t){t.cid=0;var e=1;t.extend=function(t){t=t||{};var n=this,i=n.cid,r=t._Ctor||(t._Ctor={});if(r[i])return r[i];var o=t.name||n.options.name;var a=function(t){this._init(t)};return a.prototype=Object.create(n.prototype),a.prototype.constructor=a,a.cid=e++,a.options=Yt(n.options,t),a["super"]=n,a.options.props&&Ai(a),a.options.computed&&Ci(a),a.extend=n.extend,a.mixin=n.mixin,a.use=n.use,j.forEach(function(t){a[t]=n[t]}),o&&(a.options.components[o]=a),a.superOptions=n.options,a.extendOptions=t,a.sealedOptions=O({},a.options),r[i]=a,a}}function Ai(t){var e=t.options.props;for(var n in e)ri(t.prototype,"_props",n)}function Ci(t){var e=t.options.computed;for(var n in e)hi(t.prototype,n,e[n])}function Li(t){j.forEach(function(e){t[e]=function(t,n){return n?("component"===e&&u(n)&&(n.name=n.name||t,n=this.options._base.extend(n)),"directive"===e&&"function"===typeof n&&(n={bind:n,update:n}),this.options[e+"s"][t]=n,n):this.options[e+"s"][t]}})}function Pi(t){return t&&(t.Ctor.options.name||t.tag)}function Oi(t,e){return Array.isArray(t)?t.indexOf(e)>-1:"string"===typeof t?t.split(",").indexOf(e)>-1:!!h(t)&&t.test(e)}function Ri(t,e){var n=t.cache,i=t.keys,r=t._vnode;for(var o in n){var a=n[o];if(a){var s=Pi(a.componentOptions);s&&!e(s)&&ki(n,o,i,r)}}}function ki(t,e,n,i){var r=t[e];!r||i&&r.tag===i.tag||r.componentInstance.$destroy(),t[e]=null,y(n,e)}bi(Mi),gi(Mi),Ln(Mi),kn(Mi),yn(Mi);var Di=[String,RegExp,Array],Ii={name:"keep-alive",abstract:!0,props:{include:Di,exclude:Di,max:[String,Number]},created:function(){this.cache=Object.create(null),this.keys=[]},destroyed:function(){for(var t in this.cache)ki(this.cache,t,this.keys)},mounted:function(){var t=this;this.$watch("include",function(e){Ri(t,function(t){return Oi(e,t)})}),this.$watch("exclude",function(e){Ri(t,function(t){return!Oi(e,t)})})},render:function(){var t=this.$slots.default,e=Mn(t),n=e&&e.componentOptions;if(n){var i=Pi(n),r=this,o=r.include,a=r.exclude;if(o&&(!i||!Oi(o,i))||a&&i&&Oi(a,i))return e;var s=this,l=s.cache,c=s.keys,u=null==e.key?n.Ctor.cid+(n.tag?"::"+n.tag:""):e.key;l[u]?(e.componentInstance=l[u].componentInstance,y(c,u),c.push(u)):(l[u]=e,c.push(u),this.max&&c.length>parseInt(this.max)&&ki(l,c[0],c,this._vnode)),e.data.keepAlive=!0}return e||t&&t[0]}},Ni={KeepAlive:Ii};function zi(t){var e={get:function(){return U}};Object.defineProperty(t,"config",e),t.util={warn:pt,extend:O,mergeOptions:Yt,defineReactive:Dt},t.set=It,t.delete=Nt,t.nextTick=fe,t.observable=function(t){return kt(t),t},t.options=Object.create(null),j.forEach(function(e){t.options[e+"s"]=Object.create(null)}),t.options._base=t,O(t.options.components,Ni),Ei(t),Si(t),Ti(t),Li(t)}zi(Mi),Object.defineProperty(Mi.prototype,"$isServer",{get:lt}),Object.defineProperty(Mi.prototype,"$ssrContext",{get:function(){return this.$vnode&&this.$vnode.ssrContext}}),Object.defineProperty(Mi,"FunctionalRenderContext",{value:Je}),Mi.version="2.6.10";var Bi=v("style,class"),Fi=v("input,textarea,option,select,progress"),ji=function(t,e,n){return"value"===n&&Fi(t)&&"button"!==e||"selected"===n&&"option"===t||"checked"===n&&"input"===t||"muted"===n&&"video"===t},Hi=v("contenteditable,draggable,spellcheck"),Ui=v("events,caret,typing,plaintext-only"),Vi=function(t,e){return Yi(e)||"false"===e?"false":"contenteditable"===t&&Ui(e)?e:"true"},Gi=v("allowfullscreen,async,autofocus,autoplay,checked,compact,controls,declare,default,defaultchecked,defaultmuted,defaultselected,defer,disabled,enabled,formnovalidate,hidden,indeterminate,inert,ismap,itemscope,loop,multiple,muted,nohref,noresize,noshade,novalidate,nowrap,open,pauseonexit,readonly,required,reversed,scoped,seamless,selected,sortable,translate,truespeed,typemustmatch,visible"),Wi="http://www.w3.org/1999/xlink",$i=function(t){return":"===t.charAt(5)&&"xlink"===t.slice(0,5)},qi=function(t){return $i(t)?t.slice(6,t.length):""},Yi=function(t){return null==t||!1===t};function Xi(t){var e=t.data,n=t,i=t;while(r(i.componentInstance))i=i.componentInstance._vnode,i&&i.data&&(e=Zi(i.data,e));while(r(n=n.parent))n&&n.data&&(e=Zi(e,n.data));return Ji(e.staticClass,e.class)}function Zi(t,e){return{staticClass:Ki(t.staticClass,e.staticClass),class:r(t.class)?[t.class,e.class]:e.class}}function Ji(t,e){return r(t)||r(e)?Ki(t,Qi(e)):""}function Ki(t,e){return t?e?t+" "+e:t:e||""}function Qi(t){return Array.isArray(t)?tr(t):l(t)?er(t):"string"===typeof t?t:""}function tr(t){for(var e,n="",i=0,o=t.length;i<o;i++)r(e=Qi(t[i]))&&""!==e&&(n&&(n+=" "),n+=e);return n}function er(t){var e="";for(var n in t)t[n]&&(e&&(e+=" "),e+=n);return e}var nr={svg:"http://www.w3.org/2000/svg",math:"http://www.w3.org/1998/Math/MathML"},ir=v("html,body,base,head,link,meta,style,title,address,article,aside,footer,header,h1,h2,h3,h4,h5,h6,hgroup,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,rtc,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,menuitem,summary,content,element,shadow,template,blockquote,iframe,tfoot"),rr=v("svg,animate,circle,clippath,cursor,defs,desc,ellipse,filter,font-face,foreignObject,g,glyph,image,line,marker,mask,missing-glyph,path,pattern,polygon,polyline,rect,switch,symbol,text,textpath,tspan,use,view",!0),or=function(t){return ir(t)||rr(t)};function ar(t){return rr(t)?"svg":"math"===t?"math":void 0}var sr=Object.create(null);function lr(t){if(!Z)return!0;if(or(t))return!1;if(t=t.toLowerCase(),null!=sr[t])return sr[t];var e=document.createElement(t);return t.indexOf("-")>-1?sr[t]=e.constructor===window.HTMLUnknownElement||e.constructor===window.HTMLElement:sr[t]=/HTMLUnknownElement/.test(e.toString())}var cr=v("text,number,password,search,email,tel,url");function ur(t){if("string"===typeof t){var e=document.querySelector(t);return e||document.createElement("div")}return t}function hr(t,e){var n=document.createElement(t);return"select"!==t?n:(e.data&&e.data.attrs&&void 0!==e.data.attrs.multiple&&n.setAttribute("multiple","multiple"),n)}function dr(t,e){return document.createElementNS(nr[t],e)}function pr(t){return document.createTextNode(t)}function fr(t){return document.createComment(t)}function mr(t,e,n){t.insertBefore(e,n)}function vr(t,e){t.removeChild(e)}function gr(t,e){t.appendChild(e)}function yr(t){return t.parentNode}function br(t){return t.nextSibling}function xr(t){return t.tagName}function wr(t,e){t.textContent=e}function _r(t,e){t.setAttribute(e,"")}var Mr=Object.freeze({createElement:hr,createElementNS:dr,createTextNode:pr,createComment:fr,insertBefore:mr,removeChild:vr,appendChild:gr,parentNode:yr,nextSibling:br,tagName:xr,setTextContent:wr,setStyleScope:_r}),Er={create:function(t,e){Sr(e)},update:function(t,e){t.data.ref!==e.data.ref&&(Sr(t,!0),Sr(e))},destroy:function(t){Sr(t,!0)}};function Sr(t,e){var n=t.data.ref;if(r(n)){var i=t.context,o=t.componentInstance||t.elm,a=i.$refs;e?Array.isArray(a[n])?y(a[n],o):a[n]===o&&(a[n]=void 0):t.data.refInFor?Array.isArray(a[n])?a[n].indexOf(o)<0&&a[n].push(o):a[n]=[o]:a[n]=o}}var Tr=new bt("",{},[]),Ar=["create","activate","update","remove","destroy"];function Cr(t,e){return t.key===e.key&&(t.tag===e.tag&&t.isComment===e.isComment&&r(t.data)===r(e.data)&&Lr(t,e)||o(t.isAsyncPlaceholder)&&t.asyncFactory===e.asyncFactory&&i(e.asyncFactory.error))}function Lr(t,e){if("input"!==t.tag)return!0;var n,i=r(n=t.data)&&r(n=n.attrs)&&n.type,o=r(n=e.data)&&r(n=n.attrs)&&n.type;return i===o||cr(i)&&cr(o)}function Pr(t,e,n){var i,o,a={};for(i=e;i<=n;++i)o=t[i].key,r(o)&&(a[o]=i);return a}function Or(t){var e,n,a={},l=t.modules,c=t.nodeOps;for(e=0;e<Ar.length;++e)for(a[Ar[e]]=[],n=0;n<l.length;++n)r(l[n][Ar[e]])&&a[Ar[e]].push(l[n][Ar[e]]);function u(t){return new bt(c.tagName(t).toLowerCase(),{},[],void 0,t)}function h(t,e){function n(){0===--n.listeners&&d(t)}return n.listeners=e,n}function d(t){var e=c.parentNode(t);r(e)&&c.removeChild(e,t)}function p(t,e,n,i,a,s,l){if(r(t.elm)&&r(s)&&(t=s[l]=Mt(t)),t.isRootInsert=!a,!f(t,e,n,i)){var u=t.data,h=t.children,d=t.tag;r(d)?(t.elm=t.ns?c.createElementNS(t.ns,d):c.createElement(d,t),_(t),b(t,h,e),r(u)&&w(t,e),y(n,t.elm,i)):o(t.isComment)?(t.elm=c.createComment(t.text),y(n,t.elm,i)):(t.elm=c.createTextNode(t.text),y(n,t.elm,i))}}function f(t,e,n,i){var a=t.data;if(r(a)){var s=r(t.componentInstance)&&a.keepAlive;if(r(a=a.hook)&&r(a=a.init)&&a(t,!1),r(t.componentInstance))return m(t,e),y(n,t.elm,i),o(s)&&g(t,e,n,i),!0}}function m(t,e){r(t.data.pendingInsert)&&(e.push.apply(e,t.data.pendingInsert),t.data.pendingInsert=null),t.elm=t.componentInstance.$el,x(t)?(w(t,e),_(t)):(Sr(t),e.push(t))}function g(t,e,n,i){var o,s=t;while(s.componentInstance)if(s=s.componentInstance._vnode,r(o=s.data)&&r(o=o.transition)){for(o=0;o<a.activate.length;++o)a.activate[o](Tr,s);e.push(s);break}y(n,t.elm,i)}function y(t,e,n){r(t)&&(r(n)?c.parentNode(n)===t&&c.insertBefore(t,e,n):c.appendChild(t,e))}function b(t,e,n){if(Array.isArray(e)){0;for(var i=0;i<e.length;++i)p(e[i],n,t.elm,null,!0,e,i)}else s(t.text)&&c.appendChild(t.elm,c.createTextNode(String(t.text)))}function x(t){while(t.componentInstance)t=t.componentInstance._vnode;return r(t.tag)}function w(t,n){for(var i=0;i<a.create.length;++i)a.create[i](Tr,t);e=t.data.hook,r(e)&&(r(e.create)&&e.create(Tr,t),r(e.insert)&&n.push(t))}function _(t){var e;if(r(e=t.fnScopeId))c.setStyleScope(t.elm,e);else{var n=t;while(n)r(e=n.context)&&r(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e),n=n.parent}r(e=Pn)&&e!==t.context&&e!==t.fnContext&&r(e=e.$options._scopeId)&&c.setStyleScope(t.elm,e)}function M(t,e,n,i,r,o){for(;i<=r;++i)p(n[i],o,t,e,!1,n,i)}function E(t){var e,n,i=t.data;if(r(i))for(r(e=i.hook)&&r(e=e.destroy)&&e(t),e=0;e<a.destroy.length;++e)a.destroy[e](t);if(r(e=t.children))for(n=0;n<t.children.length;++n)E(t.children[n])}function S(t,e,n,i){for(;n<=i;++n){var o=e[n];r(o)&&(r(o.tag)?(T(o),E(o)):d(o.elm))}}function T(t,e){if(r(e)||r(t.data)){var n,i=a.remove.length+1;for(r(e)?e.listeners+=i:e=h(t.elm,i),r(n=t.componentInstance)&&r(n=n._vnode)&&r(n.data)&&T(n,e),n=0;n<a.remove.length;++n)a.remove[n](t,e);r(n=t.data.hook)&&r(n=n.remove)?n(t,e):e()}else d(t.elm)}function A(t,e,n,o,a){var s,l,u,h,d=0,f=0,m=e.length-1,v=e[0],g=e[m],y=n.length-1,b=n[0],x=n[y],w=!a;while(d<=m&&f<=y)i(v)?v=e[++d]:i(g)?g=e[--m]:Cr(v,b)?(L(v,b,o,n,f),v=e[++d],b=n[++f]):Cr(g,x)?(L(g,x,o,n,y),g=e[--m],x=n[--y]):Cr(v,x)?(L(v,x,o,n,y),w&&c.insertBefore(t,v.elm,c.nextSibling(g.elm)),v=e[++d],x=n[--y]):Cr(g,b)?(L(g,b,o,n,f),w&&c.insertBefore(t,g.elm,v.elm),g=e[--m],b=n[++f]):(i(s)&&(s=Pr(e,d,m)),l=r(b.key)?s[b.key]:C(b,e,d,m),i(l)?p(b,o,t,v.elm,!1,n,f):(u=e[l],Cr(u,b)?(L(u,b,o,n,f),e[l]=void 0,w&&c.insertBefore(t,u.elm,v.elm)):p(b,o,t,v.elm,!1,n,f)),b=n[++f]);d>m?(h=i(n[y+1])?null:n[y+1].elm,M(t,h,n,f,y,o)):f>y&&S(t,e,d,m)}function C(t,e,n,i){for(var o=n;o<i;o++){var a=e[o];if(r(a)&&Cr(t,a))return o}}function L(t,e,n,s,l,u){if(t!==e){r(e.elm)&&r(s)&&(e=s[l]=Mt(e));var h=e.elm=t.elm;if(o(t.isAsyncPlaceholder))r(e.asyncFactory.resolved)?R(t.elm,e,n):e.isAsyncPlaceholder=!0;else if(o(e.isStatic)&&o(t.isStatic)&&e.key===t.key&&(o(e.isCloned)||o(e.isOnce)))e.componentInstance=t.componentInstance;else{var d,p=e.data;r(p)&&r(d=p.hook)&&r(d=d.prepatch)&&d(t,e);var f=t.children,m=e.children;if(r(p)&&x(e)){for(d=0;d<a.update.length;++d)a.update[d](t,e);r(d=p.hook)&&r(d=d.update)&&d(t,e)}i(e.text)?r(f)&&r(m)?f!==m&&A(h,f,m,n,u):r(m)?(r(t.text)&&c.setTextContent(h,""),M(h,null,m,0,m.length-1,n)):r(f)?S(h,f,0,f.length-1):r(t.text)&&c.setTextContent(h,""):t.text!==e.text&&c.setTextContent(h,e.text),r(p)&&r(d=p.hook)&&r(d=d.postpatch)&&d(t,e)}}}function P(t,e,n){if(o(n)&&r(t.parent))t.parent.data.pendingInsert=e;else for(var i=0;i<e.length;++i)e[i].data.hook.insert(e[i])}var O=v("attrs,class,staticClass,staticStyle,key");function R(t,e,n,i){var a,s=e.tag,l=e.data,c=e.children;if(i=i||l&&l.pre,e.elm=t,o(e.isComment)&&r(e.asyncFactory))return e.isAsyncPlaceholder=!0,!0;if(r(l)&&(r(a=l.hook)&&r(a=a.init)&&a(e,!0),r(a=e.componentInstance)))return m(e,n),!0;if(r(s)){if(r(c))if(t.hasChildNodes())if(r(a=l)&&r(a=a.domProps)&&r(a=a.innerHTML)){if(a!==t.innerHTML)return!1}else{for(var u=!0,h=t.firstChild,d=0;d<c.length;d++){if(!h||!R(h,c[d],n,i)){u=!1;break}h=h.nextSibling}if(!u||h)return!1}else b(e,c,n);if(r(l)){var p=!1;for(var f in l)if(!O(f)){p=!0,w(e,n);break}!p&&l["class"]&&ve(l["class"])}}else t.data!==e.text&&(t.data=e.text);return!0}return function(t,e,n,s){if(!i(e)){var l=!1,h=[];if(i(t))l=!0,p(e,h);else{var d=r(t.nodeType);if(!d&&Cr(t,e))L(t,e,h,null,null,s);else{if(d){if(1===t.nodeType&&t.hasAttribute(F)&&(t.removeAttribute(F),n=!0),o(n)&&R(t,e,h))return P(e,h,!0),t;t=u(t)}var f=t.elm,m=c.parentNode(f);if(p(e,h,f._leaveCb?null:m,c.nextSibling(f)),r(e.parent)){var v=e.parent,g=x(e);while(v){for(var y=0;y<a.destroy.length;++y)a.destroy[y](v);if(v.elm=e.elm,g){for(var b=0;b<a.create.length;++b)a.create[b](Tr,v);var w=v.data.hook.insert;if(w.merged)for(var _=1;_<w.fns.length;_++)w.fns[_]()}else Sr(v);v=v.parent}}r(m)?S(m,[t],0,0):r(t.tag)&&E(t)}}return P(e,h,l),e.elm}r(t)&&E(t)}}var Rr={create:kr,update:kr,destroy:function(t){kr(t,Tr)}};function kr(t,e){(t.data.directives||e.data.directives)&&Dr(t,e)}function Dr(t,e){var n,i,r,o=t===Tr,a=e===Tr,s=Nr(t.data.directives,t.context),l=Nr(e.data.directives,e.context),c=[],u=[];for(n in l)i=s[n],r=l[n],i?(r.oldValue=i.value,r.oldArg=i.arg,Br(r,"update",e,t),r.def&&r.def.componentUpdated&&u.push(r)):(Br(r,"bind",e,t),r.def&&r.def.inserted&&c.push(r));if(c.length){var h=function(){for(var n=0;n<c.length;n++)Br(c[n],"inserted",e,t)};o?we(e,"insert",h):h()}if(u.length&&we(e,"postpatch",function(){for(var n=0;n<u.length;n++)Br(u[n],"componentUpdated",e,t)}),!o)for(n in s)l[n]||Br(s[n],"unbind",t,t,a)}var Ir=Object.create(null);function Nr(t,e){var n,i,r=Object.create(null);if(!t)return r;for(n=0;n<t.length;n++)i=t[n],i.modifiers||(i.modifiers=Ir),r[zr(i)]=i,i.def=Xt(e.$options,"directives",i.name,!0);return r}function zr(t){return t.rawName||t.name+"."+Object.keys(t.modifiers||{}).join(".")}function Br(t,e,n,i,r){var o=t.def&&t.def[e];if(o)try{o(n.elm,t,n,i,r)}catch(Ma){ee(Ma,n.context,"directive "+t.name+" "+e+" hook")}}var Fr=[Er,Rr];function jr(t,e){var n=e.componentOptions;if((!r(n)||!1!==n.Ctor.options.inheritAttrs)&&(!i(t.data.attrs)||!i(e.data.attrs))){var o,a,s,l=e.elm,c=t.data.attrs||{},u=e.data.attrs||{};for(o in r(u.__ob__)&&(u=e.data.attrs=O({},u)),u)a=u[o],s=c[o],s!==a&&Hr(l,o,a);for(o in(tt||nt)&&u.value!==c.value&&Hr(l,"value",u.value),c)i(u[o])&&($i(o)?l.removeAttributeNS(Wi,qi(o)):Hi(o)||l.removeAttribute(o))}}function Hr(t,e,n){t.tagName.indexOf("-")>-1?Ur(t,e,n):Gi(e)?Yi(n)?t.removeAttribute(e):(n="allowfullscreen"===e&&"EMBED"===t.tagName?"true":e,t.setAttribute(e,n)):Hi(e)?t.setAttribute(e,Vi(e,n)):$i(e)?Yi(n)?t.removeAttributeNS(Wi,qi(e)):t.setAttributeNS(Wi,e,n):Ur(t,e,n)}function Ur(t,e,n){if(Yi(n))t.removeAttribute(e);else{if(tt&&!et&&"TEXTAREA"===t.tagName&&"placeholder"===e&&""!==n&&!t.__ieph){var i=function(e){e.stopImmediatePropagation(),t.removeEventListener("input",i)};t.addEventListener("input",i),t.__ieph=!0}t.setAttribute(e,n)}}var Vr={create:jr,update:jr};function Gr(t,e){var n=e.elm,o=e.data,a=t.data;if(!(i(o.staticClass)&&i(o.class)&&(i(a)||i(a.staticClass)&&i(a.class)))){var s=Xi(e),l=n._transitionClasses;r(l)&&(s=Ki(s,Qi(l))),s!==n._prevClass&&(n.setAttribute("class",s),n._prevClass=s)}}var Wr,$r={create:Gr,update:Gr},qr="__r",Yr="__c";function Xr(t){if(r(t[qr])){var e=tt?"change":"input";t[e]=[].concat(t[qr],t[e]||[]),delete t[qr]}r(t[Yr])&&(t.change=[].concat(t[Yr],t.change||[]),delete t[Yr])}function Zr(t,e,n){var i=Wr;return function r(){var o=e.apply(null,arguments);null!==o&&Qr(t,r,n,i)}}var Jr=ae&&!(rt&&Number(rt[1])<=53);function Kr(t,e,n,i){if(Jr){var r=qn,o=e;e=o._wrapper=function(t){if(t.target===t.currentTarget||t.timeStamp>=r||t.timeStamp<=0||t.target.ownerDocument!==document)return o.apply(this,arguments)}}Wr.addEventListener(t,e,at?{capture:n,passive:i}:n)}function Qr(t,e,n,i){(i||Wr).removeEventListener(t,e._wrapper||e,n)}function to(t,e){if(!i(t.data.on)||!i(e.data.on)){var n=e.data.on||{},r=t.data.on||{};Wr=e.elm,Xr(n),xe(n,r,Kr,Qr,Zr,e.context),Wr=void 0}}var eo,no={create:to,update:to};function io(t,e){if(!i(t.data.domProps)||!i(e.data.domProps)){var n,o,a=e.elm,s=t.data.domProps||{},l=e.data.domProps||{};for(n in r(l.__ob__)&&(l=e.data.domProps=O({},l)),s)n in l||(a[n]="");for(n in l){if(o=l[n],"textContent"===n||"innerHTML"===n){if(e.children&&(e.children.length=0),o===s[n])continue;1===a.childNodes.length&&a.removeChild(a.childNodes[0])}if("value"===n&&"PROGRESS"!==a.tagName){a._value=o;var c=i(o)?"":String(o);ro(a,c)&&(a.value=c)}else if("innerHTML"===n&&rr(a.tagName)&&i(a.innerHTML)){eo=eo||document.createElement("div"),eo.innerHTML="<svg>"+o+"</svg>";var u=eo.firstChild;while(a.firstChild)a.removeChild(a.firstChild);while(u.firstChild)a.appendChild(u.firstChild)}else if(o!==s[n])try{a[n]=o}catch(Ma){}}}}function ro(t,e){return!t.composing&&("OPTION"===t.tagName||oo(t,e)||ao(t,e))}function oo(t,e){var n=!0;try{n=document.activeElement!==t}catch(Ma){}return n&&t.value!==e}function ao(t,e){var n=t.value,i=t._vModifiers;if(r(i)){if(i.number)return m(n)!==m(e);if(i.trim)return n.trim()!==e.trim()}return n!==e}var so={create:io,update:io},lo=w(function(t){var e={},n=/;(?![^(]*\))/g,i=/:(.+)/;return t.split(n).forEach(function(t){if(t){var n=t.split(i);n.length>1&&(e[n[0].trim()]=n[1].trim())}}),e});function co(t){var e=uo(t.style);return t.staticStyle?O(t.staticStyle,e):e}function uo(t){return Array.isArray(t)?R(t):"string"===typeof t?lo(t):t}function ho(t,e){var n,i={};if(e){var r=t;while(r.componentInstance)r=r.componentInstance._vnode,r&&r.data&&(n=co(r.data))&&O(i,n)}(n=co(t.data))&&O(i,n);var o=t;while(o=o.parent)o.data&&(n=co(o.data))&&O(i,n);return i}var po,fo=/^--/,mo=/\s*!important$/,vo=function(t,e,n){if(fo.test(e))t.style.setProperty(e,n);else if(mo.test(n))t.style.setProperty(T(e),n.replace(mo,""),"important");else{var i=yo(e);if(Array.isArray(n))for(var r=0,o=n.length;r<o;r++)t.style[i]=n[r];else t.style[i]=n}},go=["Webkit","Moz","ms"],yo=w(function(t){if(po=po||document.createElement("div").style,t=M(t),"filter"!==t&&t in po)return t;for(var e=t.charAt(0).toUpperCase()+t.slice(1),n=0;n<go.length;n++){var i=go[n]+e;if(i in po)return i}});function bo(t,e){var n=e.data,o=t.data;if(!(i(n.staticStyle)&&i(n.style)&&i(o.staticStyle)&&i(o.style))){var a,s,l=e.elm,c=o.staticStyle,u=o.normalizedStyle||o.style||{},h=c||u,d=uo(e.data.style)||{};e.data.normalizedStyle=r(d.__ob__)?O({},d):d;var p=ho(e,!0);for(s in h)i(p[s])&&vo(l,s,"");for(s in p)a=p[s],a!==h[s]&&vo(l,s,null==a?"":a)}}var xo={create:bo,update:bo},wo=/\s+/;function _o(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach(function(e){return t.classList.add(e)}):t.classList.add(e);else{var n=" "+(t.getAttribute("class")||"")+" ";n.indexOf(" "+e+" ")<0&&t.setAttribute("class",(n+e).trim())}}function Mo(t,e){if(e&&(e=e.trim()))if(t.classList)e.indexOf(" ")>-1?e.split(wo).forEach(function(e){return t.classList.remove(e)}):t.classList.remove(e),t.classList.length||t.removeAttribute("class");else{var n=" "+(t.getAttribute("class")||"")+" ",i=" "+e+" ";while(n.indexOf(i)>=0)n=n.replace(i," ");n=n.trim(),n?t.setAttribute("class",n):t.removeAttribute("class")}}function Eo(t){if(t){if("object"===typeof t){var e={};return!1!==t.css&&O(e,So(t.name||"v")),O(e,t),e}return"string"===typeof t?So(t):void 0}}var So=w(function(t){return{enterClass:t+"-enter",enterToClass:t+"-enter-to",enterActiveClass:t+"-enter-active",leaveClass:t+"-leave",leaveToClass:t+"-leave-to",leaveActiveClass:t+"-leave-active"}}),To=Z&&!et,Ao="transition",Co="animation",Lo="transition",Po="transitionend",Oo="animation",Ro="animationend";To&&(void 0===window.ontransitionend&&void 0!==window.onwebkittransitionend&&(Lo="WebkitTransition",Po="webkitTransitionEnd"),void 0===window.onanimationend&&void 0!==window.onwebkitanimationend&&(Oo="WebkitAnimation",Ro="webkitAnimationEnd"));var ko=Z?window.requestAnimationFrame?window.requestAnimationFrame.bind(window):setTimeout:function(t){return t()};function Do(t){ko(function(){ko(t)})}function Io(t,e){var n=t._transitionClasses||(t._transitionClasses=[]);n.indexOf(e)<0&&(n.push(e),_o(t,e))}function No(t,e){t._transitionClasses&&y(t._transitionClasses,e),Mo(t,e)}function zo(t,e,n){var i=Fo(t,e),r=i.type,o=i.timeout,a=i.propCount;if(!r)return n();var s=r===Ao?Po:Ro,l=0,c=function(){t.removeEventListener(s,u),n()},u=function(e){e.target===t&&++l>=a&&c()};setTimeout(function(){l<a&&c()},o+1),t.addEventListener(s,u)}var Bo=/\b(transform|all)(,|$)/;function Fo(t,e){var n,i=window.getComputedStyle(t),r=(i[Lo+"Delay"]||"").split(", "),o=(i[Lo+"Duration"]||"").split(", "),a=jo(r,o),s=(i[Oo+"Delay"]||"").split(", "),l=(i[Oo+"Duration"]||"").split(", "),c=jo(s,l),u=0,h=0;e===Ao?a>0&&(n=Ao,u=a,h=o.length):e===Co?c>0&&(n=Co,u=c,h=l.length):(u=Math.max(a,c),n=u>0?a>c?Ao:Co:null,h=n?n===Ao?o.length:l.length:0);var d=n===Ao&&Bo.test(i[Lo+"Property"]);return{type:n,timeout:u,propCount:h,hasTransform:d}}function jo(t,e){while(t.length<e.length)t=t.concat(t);return Math.max.apply(null,e.map(function(e,n){return Ho(e)+Ho(t[n])}))}function Ho(t){return 1e3*Number(t.slice(0,-1).replace(",","."))}function Uo(t,e){var n=t.elm;r(n._leaveCb)&&(n._leaveCb.cancelled=!0,n._leaveCb());var o=Eo(t.data.transition);if(!i(o)&&!r(n._enterCb)&&1===n.nodeType){var a=o.css,s=o.type,c=o.enterClass,u=o.enterToClass,h=o.enterActiveClass,d=o.appearClass,p=o.appearToClass,f=o.appearActiveClass,v=o.beforeEnter,g=o.enter,y=o.afterEnter,b=o.enterCancelled,x=o.beforeAppear,w=o.appear,_=o.afterAppear,M=o.appearCancelled,E=o.duration,S=Pn,T=Pn.$vnode;while(T&&T.parent)S=T.context,T=T.parent;var A=!S._isMounted||!t.isRootInsert;if(!A||w||""===w){var C=A&&d?d:c,L=A&&f?f:h,P=A&&p?p:u,O=A&&x||v,R=A&&"function"===typeof w?w:g,k=A&&_||y,D=A&&M||b,I=m(l(E)?E.enter:E);0;var N=!1!==a&&!et,z=Wo(R),F=n._enterCb=B(function(){N&&(No(n,P),No(n,L)),F.cancelled?(N&&No(n,C),D&&D(n)):k&&k(n),n._enterCb=null});t.data.show||we(t,"insert",function(){var e=n.parentNode,i=e&&e._pending&&e._pending[t.key];i&&i.tag===t.tag&&i.elm._leaveCb&&i.elm._leaveCb(),R&&R(n,F)}),O&&O(n),N&&(Io(n,C),Io(n,L),Do(function(){No(n,C),F.cancelled||(Io(n,P),z||(Go(I)?setTimeout(F,I):zo(n,s,F)))})),t.data.show&&(e&&e(),R&&R(n,F)),N||z||F()}}}function Vo(t,e){var n=t.elm;r(n._enterCb)&&(n._enterCb.cancelled=!0,n._enterCb());var o=Eo(t.data.transition);if(i(o)||1!==n.nodeType)return e();if(!r(n._leaveCb)){var a=o.css,s=o.type,c=o.leaveClass,u=o.leaveToClass,h=o.leaveActiveClass,d=o.beforeLeave,p=o.leave,f=o.afterLeave,v=o.leaveCancelled,g=o.delayLeave,y=o.duration,b=!1!==a&&!et,x=Wo(p),w=m(l(y)?y.leave:y);0;var _=n._leaveCb=B(function(){n.parentNode&&n.parentNode._pending&&(n.parentNode._pending[t.key]=null),b&&(No(n,u),No(n,h)),_.cancelled?(b&&No(n,c),v&&v(n)):(e(),f&&f(n)),n._leaveCb=null});g?g(M):M()}function M(){_.cancelled||(!t.data.show&&n.parentNode&&((n.parentNode._pending||(n.parentNode._pending={}))[t.key]=t),d&&d(n),b&&(Io(n,c),Io(n,h),Do(function(){No(n,c),_.cancelled||(Io(n,u),x||(Go(w)?setTimeout(_,w):zo(n,s,_)))})),p&&p(n,_),b||x||_())}}function Go(t){return"number"===typeof t&&!isNaN(t)}function Wo(t){if(i(t))return!1;var e=t.fns;return r(e)?Wo(Array.isArray(e)?e[0]:e):(t._length||t.length)>1}function $o(t,e){!0!==e.data.show&&Uo(e)}var qo=Z?{create:$o,activate:$o,remove:function(t,e){!0!==t.data.show?Vo(t,e):e()}}:{},Yo=[Vr,$r,no,so,xo,qo],Xo=Yo.concat(Fr),Zo=Or({nodeOps:Mr,modules:Xo});et&&document.addEventListener("selectionchange",function(){var t=document.activeElement;t&&t.vmodel&&ra(t,"input")});var Jo={inserted:function(t,e,n,i){"select"===n.tag?(i.elm&&!i.elm._vOptions?we(n,"postpatch",function(){Jo.componentUpdated(t,e,n)}):Ko(t,e,n.context),t._vOptions=[].map.call(t.options,ea)):("textarea"===n.tag||cr(t.type))&&(t._vModifiers=e.modifiers,e.modifiers.lazy||(t.addEventListener("compositionstart",na),t.addEventListener("compositionend",ia),t.addEventListener("change",ia),et&&(t.vmodel=!0)))},componentUpdated:function(t,e,n){if("select"===n.tag){Ko(t,e,n.context);var i=t._vOptions,r=t._vOptions=[].map.call(t.options,ea);if(r.some(function(t,e){return!N(t,i[e])})){var o=t.multiple?e.value.some(function(t){return ta(t,r)}):e.value!==e.oldValue&&ta(e.value,r);o&&ra(t,"change")}}}};function Ko(t,e,n){Qo(t,e,n),(tt||nt)&&setTimeout(function(){Qo(t,e,n)},0)}function Qo(t,e,n){var i=e.value,r=t.multiple;if(!r||Array.isArray(i)){for(var o,a,s=0,l=t.options.length;s<l;s++)if(a=t.options[s],r)o=z(i,ea(a))>-1,a.selected!==o&&(a.selected=o);else if(N(ea(a),i))return void(t.selectedIndex!==s&&(t.selectedIndex=s));r||(t.selectedIndex=-1)}}function ta(t,e){return e.every(function(e){return!N(e,t)})}function ea(t){return"_value"in t?t._value:t.value}function na(t){t.target.composing=!0}function ia(t){t.target.composing&&(t.target.composing=!1,ra(t.target,"input"))}function ra(t,e){var n=document.createEvent("HTMLEvents");n.initEvent(e,!0,!0),t.dispatchEvent(n)}function oa(t){return!t.componentInstance||t.data&&t.data.transition?t:oa(t.componentInstance._vnode)}var aa={bind:function(t,e,n){var i=e.value;n=oa(n);var r=n.data&&n.data.transition,o=t.__vOriginalDisplay="none"===t.style.display?"":t.style.display;i&&r?(n.data.show=!0,Uo(n,function(){t.style.display=o})):t.style.display=i?o:"none"},update:function(t,e,n){var i=e.value,r=e.oldValue;if(!i!==!r){n=oa(n);var o=n.data&&n.data.transition;o?(n.data.show=!0,i?Uo(n,function(){t.style.display=t.__vOriginalDisplay}):Vo(n,function(){t.style.display="none"})):t.style.display=i?t.__vOriginalDisplay:"none"}},unbind:function(t,e,n,i,r){r||(t.style.display=t.__vOriginalDisplay)}},sa={model:Jo,show:aa},la={name:String,appear:Boolean,css:Boolean,mode:String,type:String,enterClass:String,leaveClass:String,enterToClass:String,leaveToClass:String,enterActiveClass:String,leaveActiveClass:String,appearClass:String,appearActiveClass:String,appearToClass:String,duration:[Number,String,Object]};function ca(t){var e=t&&t.componentOptions;return e&&e.Ctor.options.abstract?ca(Mn(e.children)):t}function ua(t){var e={},n=t.$options;for(var i in n.propsData)e[i]=t[i];var r=n._parentListeners;for(var o in r)e[M(o)]=r[o];return e}function ha(t,e){if(/\d-keep-alive$/.test(e.tag))return t("keep-alive",{props:e.componentOptions.propsData})}function da(t){while(t=t.parent)if(t.data.transition)return!0}function pa(t,e){return e.key===t.key&&e.tag===t.tag}var fa=function(t){return t.tag||_n(t)},ma=function(t){return"show"===t.name},va={name:"transition",props:la,abstract:!0,render:function(t){var e=this,n=this.$slots.default;if(n&&(n=n.filter(fa),n.length)){0;var i=this.mode;0;var r=n[0];if(da(this.$vnode))return r;var o=ca(r);if(!o)return r;if(this._leaving)return ha(t,r);var a="__transition-"+this._uid+"-";o.key=null==o.key?o.isComment?a+"comment":a+o.tag:s(o.key)?0===String(o.key).indexOf(a)?o.key:a+o.key:o.key;var l=(o.data||(o.data={})).transition=ua(this),c=this._vnode,u=ca(c);if(o.data.directives&&o.data.directives.some(ma)&&(o.data.show=!0),u&&u.data&&!pa(o,u)&&!_n(u)&&(!u.componentInstance||!u.componentInstance._vnode.isComment)){var h=u.data.transition=O({},l);if("out-in"===i)return this._leaving=!0,we(h,"afterLeave",function(){e._leaving=!1,e.$forceUpdate()}),ha(t,r);if("in-out"===i){if(_n(o))return c;var d,p=function(){d()};we(l,"afterEnter",p),we(l,"enterCancelled",p),we(h,"delayLeave",function(t){d=t})}}return r}}},ga=O({tag:String,moveClass:String},la);delete ga.mode;var ya={props:ga,beforeMount:function(){var t=this,e=this._update;this._update=function(n,i){var r=On(t);t.__patch__(t._vnode,t.kept,!1,!0),t._vnode=t.kept,r(),e.call(t,n,i)}},render:function(t){for(var e=this.tag||this.$vnode.data.tag||"span",n=Object.create(null),i=this.prevChildren=this.children,r=this.$slots.default||[],o=this.children=[],a=ua(this),s=0;s<r.length;s++){var l=r[s];if(l.tag)if(null!=l.key&&0!==String(l.key).indexOf("__vlist"))o.push(l),n[l.key]=l,(l.data||(l.data={})).transition=a;else;}if(i){for(var c=[],u=[],h=0;h<i.length;h++){var d=i[h];d.data.transition=a,d.data.pos=d.elm.getBoundingClientRect(),n[d.key]?c.push(d):u.push(d)}this.kept=t(e,null,c),this.removed=u}return t(e,null,o)},updated:function(){var t=this.prevChildren,e=this.moveClass||(this.name||"v")+"-move";t.length&&this.hasMove(t[0].elm,e)&&(t.forEach(ba),t.forEach(xa),t.forEach(wa),this._reflow=document.body.offsetHeight,t.forEach(function(t){if(t.data.moved){var n=t.elm,i=n.style;Io(n,e),i.transform=i.WebkitTransform=i.transitionDuration="",n.addEventListener(Po,n._moveCb=function t(i){i&&i.target!==n||i&&!/transform$/.test(i.propertyName)||(n.removeEventListener(Po,t),n._moveCb=null,No(n,e))})}}))},methods:{hasMove:function(t,e){if(!To)return!1;if(this._hasMove)return this._hasMove;var n=t.cloneNode();t._transitionClasses&&t._transitionClasses.forEach(function(t){Mo(n,t)}),_o(n,e),n.style.display="none",this.$el.appendChild(n);var i=Fo(n);return this.$el.removeChild(n),this._hasMove=i.hasTransform}}};function ba(t){t.elm._moveCb&&t.elm._moveCb(),t.elm._enterCb&&t.elm._enterCb()}function xa(t){t.data.newPos=t.elm.getBoundingClientRect()}function wa(t){var e=t.data.pos,n=t.data.newPos,i=e.left-n.left,r=e.top-n.top;if(i||r){t.data.moved=!0;var o=t.elm.style;o.transform=o.WebkitTransform="translate("+i+"px,"+r+"px)",o.transitionDuration="0s"}}var _a={Transition:va,TransitionGroup:ya};Mi.config.mustUseProp=ji,Mi.config.isReservedTag=or,Mi.config.isReservedAttr=Bi,Mi.config.getTagNamespace=ar,Mi.config.isUnknownElement=lr,O(Mi.options.directives,sa),O(Mi.options.components,_a),Mi.prototype.__patch__=Z?Zo:k,Mi.prototype.$mount=function(t,e){return t=t&&Z?ur(t):void 0,Dn(this,t,e)},Z&&setTimeout(function(){U.devtools&&ct&&ct.emit("init",Mi)},0),e["default"]=Mi}.call(this,n("c8ba"))},"2b4c":function(t,e,n){var i=n("5537")("wks"),r=n("ca5a"),o=n("7726").Symbol,a="function"==typeof o,s=t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))};s.store=i},"2bb5":function(t,e,n){"use strict";e.__esModule=!0;n("8122");e.default={mounted:function(){},methods:{getMigratingConfig:function(){return{props:{},events:{}}}}}},"2d00":function(t,e){t.exports=!1},"2d83":function(t,e,n){"use strict";var i=n("387f");t.exports=function(t,e,n,r,o){var a=new Error(t);return i(a,e,n,r,o)}},"2d95":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"2e67":function(t,e,n){"use strict";t.exports=function(t){return!(!t||!t.__CANCEL__)}},"2f21":function(t,e,n){"use strict";var i=n("79e5");t.exports=function(t,e){return!!t&&i(function(){e?t.call(null,function(){},1):t.call(null)})}},"2f69":function(t,e,n){!function(e,i){t.exports=i(n("2b0e"))}(0,function(t){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.i=function(t){return t},e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=51)}([function(t,e){var n=t.exports={version:"2.5.3"};"number"==typeof __e&&(__e=n)},function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(t,e,n){var i=n(39)("wks"),r=n(43),o=n(1).Symbol,a="function"==typeof o;(t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))}).store=i},function(t,e,n){var i=n(1),r=n(0),o=n(11),a=n(5),s=function(t,e,n){var l,c,u,h=t&s.F,d=t&s.G,p=t&s.S,f=t&s.P,m=t&s.B,v=t&s.W,g=d?r:r[e]||(r[e]={}),y=g.prototype,b=d?i:p?i[e]:(i[e]||{}).prototype;for(l in d&&(n=e),n)(c=!h&&b&&void 0!==b[l])&&l in g||(u=c?b[l]:n[l],g[l]=d&&"function"!=typeof b[l]?n[l]:m&&c?o(u,i):v&&b[l]==u?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e.prototype=t.prototype,e}(u):f&&"function"==typeof u?o(Function.call,u):u,f&&((g.virtual||(g.virtual={}))[l]=u,t&s.R&&y&&!y[l]&&a(y,l,u)))};s.F=1,s.G=2,s.S=4,s.P=8,s.B=16,s.W=32,s.U=64,s.R=128,t.exports=s},function(t,e,n){var i=n(7);t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},function(t,e,n){var i=n(14),r=n(38);t.exports=n(6)?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},function(t,e,n){t.exports=!n(12)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t){return"object"==typeof t?null!==t:"function"==typeof t}},function(t,e){t.exports={}},function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},function(t,e,n){var i=n(9);t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},function(t,e){t.exports=function(t){try{return!!t()}catch(t){return!0}}},function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},function(t,e,n){var i=n(4),r=n(66),o=n(86),a=Object.defineProperty;e.f=n(6)?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},function(t,e,n){"use strict";function i(){}function r(t,e){this.x=t||0,this.y=e||0}function o(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function a(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function s(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}function l(t,e,n,i,o,a,c,u,h,d){Object.defineProperty(this,"id",{value:fl++}),this.uuid=hl.generateUUID(),this.name="",this.image=void 0!==t?t:l.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:l.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:Ka,this.wrapT=void 0!==i?i:Ka,this.magFilter=void 0!==o?o:is,this.minFilter=void 0!==a?a:os,this.anisotropy=void 0!==h?h:1,this.format=void 0!==c?c:xs,this.type=void 0!==u?u:as,this.offset=new r(0,0),this.repeat=new r(1,1),this.center=new r(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new s,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==d?d:tl,this.version=0,this.onUpdate=null}function c(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function u(t,e,n){this.width=t,this.height=e,this.scissor=new c(0,0,t,e),this.scissorTest=!1,this.viewport=new c(0,0,t,e),n=n||{},this.texture=new l(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:is,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function h(t,e,n){u.call(this,t,e,n),this.samples=4}function d(t,e,n){u.call(this,t,e,n)}function p(t,e,n,i,r,o,a,s,c,u,h,d){l.call(this,null,o,a,s,c,u,i,r,h,d),this.image={data:t,width:e,height:n},this.magFilter=void 0!==c?c:ts,this.minFilter=void 0!==u?u:ts,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function f(t,e){this.min=void 0!==t?t:new a(1/0,1/0,1/0),this.max=void 0!==e?e:new a(-1/0,-1/0,-1/0)}function m(t,e){this.center=void 0!==t?t:new a,this.radius=void 0!==e?e:0}function v(t,e){this.normal=void 0!==t?t:new a(1,0,0),this.constant=void 0!==e?e:0}function g(t,e,n,i,r,o){this.planes=[void 0!==t?t:new v,void 0!==e?e:new v,void 0!==n?n:new v,void 0!==i?i:new v,void 0!==r?r:new v,void 0!==o?o:new v]}function y(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}function b(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function x(t){for(var e={},n=0;n<t.length;n++){var i=b(t[n]);for(var r in i)e[r]=i[r]}return e}function w(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}function _(){function t(r,o){!1!==n&&(i(r,o),e.requestAnimationFrame(t))}var e=null,n=!1,i=null;return{start:function(){!0!==n&&null!==i&&(e.requestAnimationFrame(t),n=!0)},stop:function(){n=!1},setAnimationLoop:function(t){i=t},setContext:function(t){e=t}}}function M(t){function e(e,n){var i=e.array,r=e.dynamic?35048:35044,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();var a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function n(e,n,i){var r=n.array,o=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,35044):-1===o.count?t.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function i(t){return t.isInterleavedBufferAttribute&&(t=t.data),a.get(t)}function r(e){e.isInterleavedBufferAttribute&&(e=e.data);var n=a.get(e);n&&(t.deleteBuffer(n.buffer),a.delete(e))}function o(t,i){t.isInterleavedBufferAttribute&&(t=t.data);var r=a.get(t);void 0===r?a.set(t,e(t,i)):r.version<t.version&&(n(r.buffer,t,i),r.version=t.version)}var a=new WeakMap;return{get:i,remove:r,update:o}}function E(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new a,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new w,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function S(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||S.DefaultOrder}function T(){this.mask=1}function A(){function t(){r.setFromEuler(i,!1)}function e(){i.setFromQuaternion(r,void 0,!1)}Object.defineProperty(this,"id",{value:bl++}),this.uuid=hl.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=A.DefaultUp.clone();var n=new a,i=new S,r=new o,l=new a(1,1,1);i.onChange(t),r.onChange(e),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:n},rotation:{configurable:!0,enumerable:!0,value:i},quaternion:{configurable:!0,enumerable:!0,value:r},scale:{configurable:!0,enumerable:!0,value:l},modelViewMatrix:{value:new y},normalMatrix:{value:new s}}),this.matrix=new y,this.matrixWorld=new y,this.matrixAutoUpdate=A.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new T,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}function C(){Object.defineProperty(this,"id",{value:xl+=2}),this.uuid=hl.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function L(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function P(t,e,n){L.call(this,new Int8Array(t),e,n)}function O(t,e,n){L.call(this,new Uint8Array(t),e,n)}function R(t,e,n){L.call(this,new Uint8ClampedArray(t),e,n)}function k(t,e,n){L.call(this,new Int16Array(t),e,n)}function D(t,e,n){L.call(this,new Uint16Array(t),e,n)}function I(t,e,n){L.call(this,new Int32Array(t),e,n)}function N(t,e,n){L.call(this,new Uint32Array(t),e,n)}function z(t,e,n){L.call(this,new Float32Array(t),e,n)}function B(t,e,n){L.call(this,new Float64Array(t),e,n)}function F(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function j(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}function H(){Object.defineProperty(this,"id",{value:wl+=2}),this.uuid=hl.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function U(t,e,n,i,r,o){C.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new V(t,e,n,i,r,o)),this.mergeVertices()}function V(t,e,n,i,r,o){function s(t,e,n,i,r,o,s,m,v,g,y){var b,x,w=o/v,_=s/g,M=o/2,E=s/2,S=m/2,T=v+1,A=g+1,C=0,L=0,P=new a;for(x=0;x<A;x++){var O=x*_-E;for(b=0;b<T;b++){var R=b*w-M;P[t]=R*i,P[e]=O*r,P[n]=S,u.push(P.x,P.y,P.z),P[t]=0,P[e]=0,P[n]=m>0?1:-1,h.push(P.x,P.y,P.z),d.push(b/v),d.push(1-x/g),C+=1}}for(x=0;x<g;x++)for(b=0;b<v;b++){var k=p+b+T*x,D=p+b+T*(x+1),I=p+(b+1)+T*(x+1),N=p+(b+1)+T*x;c.push(k,D,N),c.push(D,I,N),L+=6}l.addGroup(f,L,y),f+=L,p+=C}H.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var l=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var c=[],u=[],h=[],d=[],p=0,f=0;s("z","y","x",-1,-1,n,e,t,o,r,0),s("z","y","x",1,-1,n,e,-t,o,r,1),s("x","z","y",1,1,t,n,e,i,o,2),s("x","z","y",1,-1,t,n,-e,i,o,3),s("x","y","z",1,-1,t,e,n,i,r,4),s("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(c),this.addAttribute("position",new z(u,3)),this.addAttribute("normal",new z(h,3)),this.addAttribute("uv",new z(d,2))}function G(t,e,n,i){C.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new W(t,e,n,i)),this.mergeVertices()}function W(t,e,n,i){H.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},t=t||1,e=e||1;var r,o,a=t/2,s=e/2,l=Math.floor(n)||1,c=Math.floor(i)||1,u=l+1,h=c+1,d=t/l,p=e/c,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(r=0;r<u;r++){var b=r*d-a;m.push(b,-y,0),v.push(0,0,1),g.push(r/l),g.push(1-o/c)}}for(o=0;o<c;o++)for(r=0;r<l;r++){var x=r+u*o,w=r+u*(o+1),_=r+1+u*(o+1),M=r+1+u*o;f.push(x,w,M),f.push(w,_,M)}this.setIndex(f),this.addAttribute("position",new z(m,3)),this.addAttribute("normal",new z(v,3)),this.addAttribute("uv",new z(g,2))}function $(){Object.defineProperty(this,"id",{value:_l++}),this.uuid=hl.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=aa,this.side=Qo,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=na,this.opacity=1,this.transparent=!1,this.blendSrc=xa,this.blendDst=wa,this.blendEquation=ha,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=Pa,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}function q(t){$.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Ml,this.fragmentShader=El,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Y(t,e){this.origin=void 0!==t?t:new a,this.direction=void 0!==e?e:new a}function X(t,e,n){this.a=void 0!==t?t:new a,this.b=void 0!==e?e:new a,this.c=void 0!==n?n:new a}function Z(t){$.call(this),this.type="MeshBasicMaterial",this.color=new w(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ia,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function J(t,e){A.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new H,this.material=void 0!==e?e:new Z({color:16777215*Math.random()}),this.drawMode=Js,this.updateMorphTargets()}function K(t,e,n,i){function r(e,i,r,d){var p=i.background,f=t.vr,m=f.getSession&&f.getSession();if(m&&"additive"===m.environmentBlendMode&&(p=null),null===p?(o(l,c),u=null,h=0):p&&p.isColor&&(o(p,1),d=!0,u=null,h=0),(t.autoClear||d)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),p&&(p.isCubeTexture||p.isWebGLRenderTargetCube)){void 0===s&&(s=new J(new V(1,1,1),new q({type:"BackgroundCubeMaterial",uniforms:b(yl.cube.uniforms),vertexShader:yl.cube.vertexShader,fragmentShader:yl.cube.fragmentShader,side:ta,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.removeAttribute("normal"),s.geometry.removeAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(s));var v=p.isWebGLRenderTargetCube?p.texture:p;s.material.uniforms.tCube.value=v,s.material.uniforms.tFlip.value=p.isWebGLRenderTargetCube?1:-1,u===p&&h===v.version||(s.material.needsUpdate=!0,u=p,h=v.version),e.unshift(s,s.geometry,s.material,0,0,null)}else p&&p.isTexture&&(void 0===a&&(a=new J(new W(2,2),new q({type:"BackgroundMaterial",uniforms:b(yl.background.uniforms),vertexShader:yl.background.vertexShader,fragmentShader:yl.background.fragmentShader,side:Qo,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.removeAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(a)),a.material.uniforms.t2D.value=p,!0===p.matrixAutoUpdate&&p.updateMatrix(),a.material.uniforms.uvTransform.value.copy(p.matrix),u===p&&h===p.version||(a.material.needsUpdate=!0,u=p,h=p.version),e.unshift(a,a.geometry,a.material,0,0,null))}function o(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}var a,s,l=new w(0),c=0,u=null,h=0;return{getClearColor:function(){return l},setClearColor:function(t,e){l.set(t),c=void 0!==e?e:1,o(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(t){c=t,o(l,c)},render:r}}function Q(t,e,n,i){function r(t){s=t}function o(e,i){t.drawArrays(s,e,i),n.update(i,s)}function a(r,o,a){var l;if(i.isWebGL2)l=t;else if(null===(l=e.get("ANGLE_instanced_arrays")))return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](s,o,a,r.maxInstancedCount),n.update(a,s,r.maxInstancedCount)}var s;this.setMode=r,this.render=o,this.renderInstances=a}function tt(t,e,n){function i(){if(void 0!==o)return o;var n=e.get("EXT_texture_filter_anisotropic");return o=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0}function r(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var o,a="undefined"!=typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",l=r(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),v=t.getParameter(36348),g=t.getParameter(36349),y=h>0,b=a||!!e.get("OES_texture_float");return{isWebGL2:a,getMaxAnisotropy:i,getMaxPrecision:r,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:y&&b,maxSamples:a?t.getParameter(36183):0}}function et(){function t(){u.value!==i&&(u.value=i,u.needsUpdate=r>0),n.numPlanes=r,n.numIntersection=0}function e(t,e,i,r){var o=null!==t?t.length:0,a=null;if(0!==o){if(a=u.value,!0!==r||null===a){var s=i+4*o,h=e.matrixWorldInverse;c.getNormalMatrix(h),(null===a||a.length<s)&&(a=new Float32Array(s));for(var d=0,p=i;d!==o;++d,p+=4)l.copy(t[d]).applyMatrix4(h,c),l.normal.toArray(a,p),a[p+3]=l.constant}u.value=a,u.needsUpdate=!0}return n.numPlanes=o,a}var n=this,i=null,r=0,o=!1,a=!1,l=new v,c=new s,u={value:null,needsUpdate:!1};this.uniform=u,this.numPlanes=0,this.numIntersection=0,this.init=function(t,n,a){var s=0!==t.length||n||0!==r||o;return o=n,i=e(t,a,0),r=t.length,s},this.beginShadows=function(){a=!0,e(null)},this.endShadows=function(){a=!1,t()},this.setState=function(n,s,l,c,h,d){if(!o||null===n||0===n.length||a&&!l)a?e(null):t();else{var p=a?0:r,f=4*p,m=h.clippingState||null;u.value=m,m=e(n,c,f,d);for(var v=0;v!==f;++v)m[v]=i[v];h.clippingState=m,this.numIntersection=s?this.numPlanes:0,this.numPlanes+=p}}}function nt(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function it(t,e,n){function i(t){var r=t.target,o=s[r.id];for(var a in null!==o.index&&e.remove(o.index),o.attributes)e.remove(o.attributes[a]);r.removeEventListener("dispose",i),delete s[r.id];var c=l[o.id];c&&(e.remove(c),delete l[o.id]),n.memory.geometries--}function r(t,e){var r=s[e.id];return r||(e.addEventListener("dispose",i),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new H).setFromObject(t)),r=e._bufferGeometry),s[e.id]=r,n.memory.geometries++,r)}function o(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);var o=t.morphAttributes;for(var r in o)for(var a=o[r],s=0,l=a.length;s<l;s++)e.update(a[s],34962)}function a(t){var n=l[t.id];if(n)return n;var i=[],r=t.index,o=t.attributes;if(null!==r)for(var a=r.array,s=0,c=a.length;s<c;s+=3){var u=a[s+0],h=a[s+1],d=a[s+2];i.push(u,h,h,d,d,u)}else for(a=o.position.array,s=0,c=a.length/3-1;s<c;s+=3){u=s+0,h=s+1,d=s+2;i.push(u,h,h,d,d,u)}return n=new(j(i)>65535?N:D)(i,1),e.update(n,34963),l[t.id]=n,n}var s={},l={};return{get:r,update:o,getWireframeAttribute:a}}function rt(t,e,n,i){function r(t){l=t}function o(t){c=t.type,u=t.bytesPerElement}function a(e,i){t.drawElements(l,i,c,e*u),n.update(i,l)}function s(r,o,a){if(i.isWebGL2)s=t;else{var s=e.get("ANGLE_instanced_arrays");if(null===s)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}s[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](l,a,c,o*u,r.maxInstancedCount),n.update(a,l,r.maxInstancedCount)}var l,c,u;this.setMode=r,this.setIndex=o,this.render=a,this.renderInstances=s}function ot(t){function e(t,e,n){switch(n=n||1,r.calls++,e){case 4:r.triangles+=n*(t/3);break;case 5:case 6:r.triangles+=n*(t-2);break;case 1:r.lines+=n*(t/2);break;case 3:r.lines+=n*(t-1);break;case 2:r.lines+=n*t;break;case 0:r.points+=n*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e)}}function n(){r.frame++,r.calls=0,r.triangles=0,r.points=0,r.lines=0}var i={geometries:0,textures:0},r={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:i,render:r,programs:null,autoReset:!0,reset:n,update:e}}function at(t,e){return Math.abs(e[1])-Math.abs(t[1])}function st(t){function e(e,r,o,a){var s=e.morphTargetInfluences,l=s.length,c=n[r.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];n[r.id]=c}var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal;for(u=0;u<l;u++){var p=c[u];0!==p[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u))}for(u=0;u<l;u++){p=c[u];p[0]=u,p[1]=s[u]}c.sort(at);for(u=0;u<8;u++){p=c[u];if(p){var f=p[0],m=p[1];if(m){h&&r.addAttribute("morphTarget"+u,h[f]),d&&r.addAttribute("morphNormal"+u,d[f]),i[u]=m;continue}}i[u]=0}a.getUniforms().setValue(t,"morphTargetInfluences",i)}var n={},i=new Float32Array(8);return{update:e}}function lt(t,e){function n(n){var i=e.render.frame,o=n.geometry,a=t.get(n,o);return r[a.id]!==i&&(o.isGeometry&&a.updateFromObject(n),t.update(a),r[a.id]=i),a}function i(){r={}}var r={};return{update:n,dispose:i}}function ct(t,e,n,i,r,o,a,s,c,u){t=void 0!==t?t:[],e=void 0!==e?e:Ga,a=void 0!==a?a:bs,l.call(this,t,e,n,i,r,o,a,s,c,u),this.flipY=!1}function ut(t,e,n,i){l.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=ts,this.minFilter=ts,this.wrapR=Ka,this.generateMipmaps=!1,this.flipY=!1}function ht(t,e,n,i){l.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=ts,this.minFilter=ts,this.wrapR=Ka,this.generateMipmaps=!1,this.flipY=!1}function dt(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=Ll[r];if(void 0===o&&(o=new Float32Array(r),Ll[r]=o),0!==e){i.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function pt(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function ft(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function mt(t,e){var n=Pl[e];void 0===n&&(n=new Int32Array(e),Pl[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function vt(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function gt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(pt(n,e))return;t.uniform2fv(this.addr,e),ft(n,e)}}function yt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(pt(n,e))return;t.uniform3fv(this.addr,e),ft(n,e)}}function bt(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(pt(n,e))return;t.uniform4fv(this.addr,e),ft(n,e)}}function xt(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(pt(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),ft(n,e)}else{if(pt(n,i))return;kl.set(i),t.uniformMatrix2fv(this.addr,!1,kl),ft(n,i)}}function wt(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(pt(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),ft(n,e)}else{if(pt(n,i))return;Rl.set(i),t.uniformMatrix3fv(this.addr,!1,Rl),ft(n,i)}}function _t(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(pt(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),ft(n,e)}else{if(pt(n,i))return;Ol.set(i),t.uniformMatrix4fv(this.addr,!1,Ol),ft(n,i)}}function Mt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||Sl,r)}function Et(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||Tl,r)}function St(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Al,r)}function Tt(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||Cl,r)}function At(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Ct(t,e){var n=this.cache;pt(n,e)||(t.uniform2iv(this.addr,e),ft(n,e))}function Lt(t,e){var n=this.cache;pt(n,e)||(t.uniform3iv(this.addr,e),ft(n,e))}function Pt(t,e){var n=this.cache;pt(n,e)||(t.uniform4iv(this.addr,e),ft(n,e))}function Ot(t){switch(t){case 5126:return vt;case 35664:return gt;case 35665:return yt;case 35666:return bt;case 35674:return xt;case 35675:return wt;case 35676:return _t;case 35678:case 36198:return Mt;case 35679:return St;case 35680:return Tt;case 36289:return Et;case 5124:case 35670:return At;case 35667:case 35671:return Ct;case 35668:case 35672:return Lt;case 35669:case 35673:return Pt}}function Rt(t,e){t.uniform1fv(this.addr,e)}function kt(t,e){t.uniform1iv(this.addr,e)}function Dt(t,e){t.uniform2iv(this.addr,e)}function It(t,e){t.uniform3iv(this.addr,e)}function Nt(t,e){t.uniform4iv(this.addr,e)}function zt(t,e){var n=dt(e,this.size,2);t.uniform2fv(this.addr,n)}function Bt(t,e){var n=dt(e,this.size,3);t.uniform3fv(this.addr,n)}function Ft(t,e){var n=dt(e,this.size,4);t.uniform4fv(this.addr,n)}function jt(t,e){var n=dt(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Ht(t,e){var n=dt(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ut(t,e){var n=dt(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Vt(t,e,n){var i=e.length,r=mt(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTexture2D(e[o]||Sl,r[o])}function Gt(t,e,n){var i=e.length,r=mt(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTextureCube(e[o]||Cl,r[o])}function Wt(t){switch(t){case 5126:return Rt;case 35664:return zt;case 35665:return Bt;case 35666:return Ft;case 35674:return jt;case 35675:return Ht;case 35676:return Ut;case 35678:return Vt;case 35680:return Gt;case 5124:case 35670:return kt;case 35667:case 35671:return Dt;case 35668:case 35672:return It;case 35669:case 35673:return Nt}}function $t(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Ot(e.type)}function qt(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=Wt(e.type)}function Yt(t){this.id=t,this.seq=[],this.map={}}function Xt(t,e){t.seq.push(e),t.map[e.id]=e}function Zt(t,e,n){var i=t.name,r=i.length;for(Dl.lastIndex=0;;){var o=Dl.exec(i),a=Dl.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){Xt(n,void 0===c?new $t(s,t,e):new qt(s,t,e));break}var u=n.map,h=u[s];void 0===h&&(h=new Yt(s),Xt(n,h)),n=h}}function Jt(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i);Zt(r,t.getUniformLocation(e,r.name),this)}}function Kt(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function Qt(t,e,n,i){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!0===i&&(!1===t.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(r),Kt(n))),r}function te(t){switch(t){case tl:return["Linear","( value )"];case el:return["sRGB","( value )"];case il:return["RGBE","( value )"];case rl:return["RGBM","( value, 7.0 )"];case ol:return["RGBM","( value, 16.0 )"];case al:return["RGBD","( value, 256.0 )"];case nl:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function ee(t,e){var n=te(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function ne(t,e){var n=te(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ie(t,e){var n;switch(e){case Fa:n="Linear";break;case ja:n="Reinhard";break;case Ha:n="Uncharted2";break;case Ua:n="OptimizedCineon";break;case Va:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function re(t,e,n){return t=t||{},[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""].filter(se).join("\n")}function oe(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}function ae(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var o=t.getActiveAttrib(e,r),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function se(t){return""!==t}function le(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function ce(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function ue(t){function e(t,e){var n=ml[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return ue(n)}var n=/^[ \t]*#include +<([\w\d.\/]+)>/gm;return t.replace(n,e)}function he(t){function e(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}var n=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;return t.replace(n,e)}function de(t,e,n,i,r,o,a,s){var l=t.context,c=i.defines,u=r.vertexShader,h=r.fragmentShader,d="SHADOWMAP_TYPE_BASIC";o.shadowMapType===Jo?d="SHADOWMAP_TYPE_PCF":o.shadowMapType===Ko&&(d="SHADOWMAP_TYPE_PCF_SOFT");var p="ENVMAP_TYPE_CUBE",f="ENVMAP_MODE_REFLECTION",m="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case Ga:case Wa:p="ENVMAP_TYPE_CUBE";break;case Xa:case Za:p="ENVMAP_TYPE_CUBE_UV";break;case $a:case qa:p="ENVMAP_TYPE_EQUIREC";break;case Ya:p="ENVMAP_TYPE_SPHERE"}switch(i.envMap.mapping){case Wa:case qa:f="ENVMAP_MODE_REFRACTION"}switch(i.combine){case Ia:m="ENVMAP_BLENDING_MULTIPLY";break;case Na:m="ENVMAP_BLENDING_MIX";break;case za:m="ENVMAP_BLENDING_ADD"}}var v,g,y=t.gammaFactor>0?t.gammaFactor:1,b=a.isWebGL2?"":re(i.extensions,o,e),x=oe(c),w=l.createProgram();if(i.isRawShaderMaterial?(v=[x].filter(se).join("\n"),v.length>0&&(v+="\n"),g=[b,x].filter(se).join("\n"),g.length>0&&(g+="\n")):(v=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,x,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+y,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+f:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(se).join("\n"),g=[b,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,x,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+y,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+p:"",o.envMap?"#define "+f:"",o.envMap?"#define "+m:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+d:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==Ba?"#define TONE_MAPPING":"",o.toneMapping!==Ba?ml.tonemapping_pars_fragment:"",o.toneMapping!==Ba?ie("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?ml.encodings_pars_fragment:"",o.mapEncoding?ee("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?ee("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?ee("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?ee("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?ne("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(se).join("\n")),u=ue(u),u=le(u,o),u=ce(u,o),h=ue(h),h=le(h,o),h=ce(h,o),u=he(u),h=he(h),a.isWebGL2&&!i.isRawShaderMaterial){var _=!1,M=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==u.match(M)&&null!==h.match(M)&&(_=!0,u=u.replace(M,""),h=h.replace(M,"")),v=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#version 300 es\n","#define varying in",_?"":"out highp vec4 pc_fragColor;",_?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g}var E,S,T=v+u,A=g+h,C=Qt(l,35633,T,t.debug.checkShaderErrors),L=Qt(l,35632,A,t.debug.checkShaderErrors);if(l.attachShader(w,C),l.attachShader(w,L),void 0!==i.index0AttributeName?l.bindAttribLocation(w,0,i.index0AttributeName):!0===o.morphTargets&&l.bindAttribLocation(w,0,"position"),l.linkProgram(w),t.debug.checkShaderErrors){var P=l.getProgramInfoLog(w).trim(),O=l.getShaderInfoLog(C).trim(),R=l.getShaderInfoLog(L).trim(),k=!0,D=!0;!1===l.getProgramParameter(w,35714)?(k=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(w,35715),"gl.getProgramInfoLog",P,O,R)):""!==P?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",P):""!==O&&""!==R||(D=!1),D&&(this.diagnostics={runnable:k,material:i,programLog:P,vertexShader:{log:O,prefix:v},fragmentShader:{log:R,prefix:g}})}return l.deleteShader(C),l.deleteShader(L),this.getUniforms=function(){return void 0===E&&(E=new Jt(l,w,s)),E},this.getAttributes=function(){return void 0===S&&(S=ae(l,w)),S},this.destroy=function(){l.deleteProgram(w),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=Il++,this.code=n,this.usedTimes=1,this.program=w,this.vertexShader=C,this.fragmentShader=L,this}function pe(t,e,n,i){function r(t){var e=t.skeleton,i=e.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,o=Math.floor((r-20)/4),a=Math.min(o,i.length);return a<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+a+"."),0):a}function o(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=tl,n===tl&&e&&(n=nl),n}var a=[],s={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},l=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];this.getParameters=function(e,i,a,l,c,u,h){var d=s[e.type],p=h.isSkinnedMesh?r(h):0,f=n.precision;null!==e.precision&&(f=n.getMaxPrecision(e.precision))!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",f,"instead.");var m=t.getRenderTarget();return{shaderID:d,precision:f,supportsVertexTextures:n.vertexTextures,outputEncoding:o(m?m.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:o(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:o(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:o(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===Xa||e.envMap.mapping===Za),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:o(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===ul,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!l,useFog:e.fog,fogExp:l&&l.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&p>0,maxBones:p,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:u,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&a.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===ea,flipSided:e.side===ta,depthPacking:void 0!==e.depthPacking&&e.depthPacking}},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<l.length;o++)i.push(n[l[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(r,o,s,l){for(var c,u=0,h=a.length;u<h;u++){var d=a[u];if(d.code===l){c=d,++c.usedTimes;break}}return void 0===c&&(c=new de(t,e,l,r,o,s,n,i),a.push(c)),c},this.releaseProgram=function(t){if(0==--t.usedTimes){var e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}},this.programs=a}function fe(){function t(t){var e=r.get(t);return void 0===e&&(e={},r.set(t,e)),e}function e(t){r.delete(t)}function n(t,e,n){r.get(t)[e]=n}function i(){r=new WeakMap}var r=new WeakMap;return{get:t,remove:e,update:n,dispose:i}}function me(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ge(){function t(){a=0,s.length=0,l.length=0}function e(t,e,n,i,r,s){var l=o[a];return void 0===l?(l={id:t.id,object:t,geometry:e,material:n,program:n.program||c,groupOrder:i,renderOrder:t.renderOrder,z:r,group:s},o[a]=l):(l.id=t.id,l.object=t,l.geometry=e,l.material=n,l.program=n.program||c,l.groupOrder=i,l.renderOrder=t.renderOrder,l.z=r,l.group=s),a++,l}function n(t,n,i,r,o,a){var c=e(t,n,i,r,o,a);(!0===i.transparent?l:s).push(c)}function i(t,n,i,r,o,a){var c=e(t,n,i,r,o,a);(!0===i.transparent?l:s).unshift(c)}function r(){s.length>1&&s.sort(me),l.length>1&&l.sort(ve)}var o=[],a=0,s=[],l=[],c={id:-1};return{opaque:s,transparent:l,init:t,push:n,unshift:i,sort:r}}function ye(){function t(e){var n=e.target;n.removeEventListener("dispose",t),delete i[n.id]}function e(e,n){var r,o=i[e.id];return void 0===o?(r=new ge,i[e.id]={},i[e.id][n.id]=r,e.addEventListener("dispose",t)):void 0===(r=o[n.id])&&(r=new ge,o[n.id]=r),r}function n(){i={}}var i={};return{get:e,dispose:n}}function be(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new a,color:new w,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"SpotLight":n={position:new a,direction:new a,color:new w,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r};break;case"PointLight":n={position:new a,color:new w,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new r,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new a,skyColor:new w,groundColor:new w};break;case"RectAreaLight":n={color:new w,position:new a,halfWidth:new a,halfHeight:new a}}return t[e.id]=n,n}}}function xe(){function t(t,i,a){for(var l=0,c=0,u=0,h=0;h<9;h++)n.probe[h].set(0,0,0);for(var d=0,p=0,f=0,m=0,v=0,g=a.matrixWorldInverse,y=(h=0,t.length);h<y;h++){var b=t[h],x=b.color,w=b.intensity,_=b.distance,M=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=x.r*w,c+=x.g*w,u+=x.b*w;else if(b.isLightProbe)for(var E=0;E<9;E++)n.probe[E].addScaledVector(b.sh.coefficients[E],w);else if(b.isDirectionalLight){var S=e.get(b);if(S.color.copy(b.color).multiplyScalar(b.intensity),S.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),S.shadow=b.castShadow,b.castShadow){var T=b.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}n.directionalShadowMap[d]=M,n.directionalShadowMatrix[d]=b.shadow.matrix,n.directional[d]=S,d++}else if(b.isSpotLight){S=e.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),S.color.copy(x).multiplyScalar(w),S.distance=_,S.direction.setFromMatrixPosition(b.matrixWorld),r.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(r),S.direction.transformDirection(g),S.coneCos=Math.cos(b.angle),S.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),S.decay=b.decay,S.shadow=b.castShadow,b.castShadow){T=b.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}n.spotShadowMap[f]=M,n.spotShadowMatrix[f]=b.shadow.matrix,n.spot[f]=S,f++}else if(b.isRectAreaLight){S=e.get(b);S.color.copy(x).multiplyScalar(w),S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),s.identity(),o.copy(b.matrixWorld),o.premultiply(g),s.extractRotation(o),S.halfWidth.set(.5*b.width,0,0),S.halfHeight.set(0,.5*b.height,0),S.halfWidth.applyMatrix4(s),S.halfHeight.applyMatrix4(s),n.rectArea[m]=S,m++}else if(b.isPointLight){S=e.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),S.color.copy(b.color).multiplyScalar(b.intensity),S.distance=b.distance,S.decay=b.decay,S.shadow=b.castShadow,b.castShadow){T=b.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize,S.shadowCameraNear=T.camera.near,S.shadowCameraFar=T.camera.far}n.pointShadowMap[p]=M,n.pointShadowMatrix[p]=b.shadow.matrix,n.point[p]=S,p++}else if(b.isHemisphereLight){S=e.get(b);S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(g),S.direction.normalize(),S.skyColor.copy(b.color).multiplyScalar(w),S.groundColor.copy(b.groundColor).multiplyScalar(w),n.hemi[v]=S,v++}}n.ambient[0]=l,n.ambient[1]=c,n.ambient[2]=u,n.directional.length=d,n.spot.length=f,n.rectArea.length=m,n.point.length=p,n.hemi.length=v,n.hash.stateID=n.id,n.hash.directionalLength=d,n.hash.pointLength=p,n.hash.spotLength=f,n.hash.rectAreaLength=m,n.hash.hemiLength=v,n.hash.shadowsLength=i.length}for(var e=new be,n={id:Nl++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},i=0;i<9;i++)n.probe.push(new a);var r=new a,o=new y,s=new y;return{setup:t,state:n}}function we(){function t(){o.length=0,a.length=0}function e(t){o.push(t)}function n(t){a.push(t)}function i(t){r.setup(o,a,t)}var r=new xe,o=[],a=[];return{init:t,state:{lightsArray:o,shadowsArray:a,lights:r},setupLights:i,pushLight:e,pushShadow:n}}function _e(){function t(e){var n=e.target;n.removeEventListener("dispose",t),delete i[n.id]}function e(e,n){var r;return void 0===i[e.id]?(r=new we,i[e.id]={},i[e.id][n.id]=r,e.addEventListener("dispose",t)):void 0===i[e.id][n.id]?(r=new we,i[e.id][n.id]=r):r=i[e.id][n.id],r}function n(){i={}}var i={};return{get:e,dispose:n}}function Me(t){$.call(this),this.type="MeshDepthMaterial",this.depthPacking=sl,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function Ee(t){$.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new a,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Se(t,e,n){function i(e,n,i,r,o,a){var s=e.geometry,l=null,c=x,u=e.customDepthMaterial;if(i&&(c=w,u=e.customDistanceMaterial),u)l=u;else{var h=!1;n.morphTargets&&(s&&s.isBufferGeometry?h=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(h=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var d=e.isSkinnedMesh&&n.skinning,p=0;h&&(p|=m),d&&(p|=v),l=c[p]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var f=l.uuid,g=n.uuid,y=_[f];void 0===y&&(y={},_[f]=y);var b=y[g];void 0===b&&(b=l.clone(),y[g]=b),l=b}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:M[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function o(n,r,a,l){if(!1!==n.visible){if(n.layers.test(r.layers)&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||s.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(a.matrixWorldInverse,n.matrixWorld);var c=e.update(n),u=n.material;if(Array.isArray(u))for(var h=c.groups,d=0,p=h.length;d<p;d++){var m=h[d],v=u[m.materialIndex];if(v&&v.visible){var g=i(n,v,l,f,a.near,a.far);t.renderBufferDirect(a,null,c,g,n,m)}}else if(u.visible){g=i(n,u,l,f,a.near,a.far);t.renderBufferDirect(a,null,c,g,n,null)}}for(var y=n.children,b=0,x=y.length;b<x;b++)o(y[b],r,a,l)}}for(var s=new g,l=new y,h=new r,d=new r(n,n),p=new a,f=new a,m=1,v=2,b=1+(m|v),x=new Array(b),w=new Array(b),_={},M={0:ta,1:Qo,2:ea},E=[new a(1,0,0),new a(-1,0,0),new a(0,0,1),new a(0,0,-1),new a(0,1,0),new a(0,-1,0)],S=[new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,1,0),new a(0,0,1),new a(0,0,-1)],T=[new c,new c,new c,new c,new c,new c],A=0;A!==b;++A){var C=0!=(A&m),L=0!=(A&v),P=new Me({depthPacking:ll,morphTargets:C,skinning:L});x[A]=P;var O=new Ee({morphTargets:C,skinning:L});w[A]=O}var R=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Jo,this.render=function(e,n,i){if(!1!==R.enabled&&(!1!==R.autoUpdate||!1!==R.needsUpdate)&&0!==e.length){var r=t.getRenderTarget(),a=t.getActiveCubeFace(),c=t.getActiveMipMapLevel(),m=t.state;m.setBlending(oa),m.buffers.color.setClear(1,1,1,1),m.buffers.depth.setTest(!0),m.setScissorTest(!1);for(var v,g=0,y=e.length;g<y;g++){var b=e[g],x=b.shadow,w=b&&b.isPointLight;if(void 0!==x){var _=x.camera;if(h.copy(x.mapSize),h.min(d),w){var M=h.x,A=h.y;T[0].set(2*M,A,M,A),T[1].set(0,A,M,A),T[2].set(3*M,A,M,A),T[3].set(M,A,M,A),T[4].set(3*M,0,M,A),T[5].set(M,0,M,A),h.x*=4,h.y*=2}if(null===x.map){var C={minFilter:ts,magFilter:ts,format:xs};x.map=new u(h.x,h.y,C),x.map.texture.name=b.name+".shadowMap",_.updateProjectionMatrix()}x.isSpotLightShadow&&x.update(b);var L=x.map,P=x.matrix;f.setFromMatrixPosition(b.matrixWorld),_.position.copy(f),w?(v=6,P.makeTranslation(-f.x,-f.y,-f.z)):(v=1,p.setFromMatrixPosition(b.target.matrixWorld),_.lookAt(p),_.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(_.projectionMatrix),P.multiply(_.matrixWorldInverse)),t.setRenderTarget(L),t.clear();for(var O=0;O<v;O++){if(w){p.copy(_.position),p.add(E[O]),_.up.copy(S[O]),_.lookAt(p),_.updateMatrixWorld();var k=T[O];m.viewport(k)}l.multiplyMatrices(_.projectionMatrix,_.matrixWorldInverse),s.setFromMatrix(l),o(n,i,_,w)}}else console.warn("THREE.WebGLShadowMap:",b,"has no shadow.")}R.needsUpdate=!1,t.setRenderTarget(r,a,c)}}}function Te(t,e,n,i){function r(){var e=!1,n=new c,i=null,r=new c(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}}function o(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?p(2929):f(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case Aa:t.depthFunc(512);break;case Ca:t.depthFunc(519);break;case La:t.depthFunc(513);break;case Pa:t.depthFunc(515);break;case Oa:t.depthFunc(514);break;case Ra:t.depthFunc(518);break;case ka:t.depthFunc(516);break;case Da:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function a(){var e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?p(2960):f(2960)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}}function s(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<i;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return o}function l(){for(var t=0,e=N.length;t<e;t++)N[t]=0}function u(t){h(t,0)}function h(n,r){N[n]=1,0===z[n]&&(t.enableVertexAttribArray(n),z[n]=1),B[n]!==r&&((i.isWebGL2?t:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),B[n]=r)}function d(){for(var e=0,n=z.length;e!==n;++e)z[e]!==N[e]&&(t.disableVertexAttribArray(e),z[e]=0)}function p(e){!0!==F[e]&&(t.enable(e),F[e]=!0)}function f(e){!1!==F[e]&&(t.disable(e),F[e]=!1)}function m(){if(null===j&&(j=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),i=0;i<n.length;i++)j.push(n[i]);return j}function v(e){return H!==e&&(t.useProgram(e),H=e,!0)}function g(e,i,r,o,a,s,l,c){if(e!==oa){if(U||(p(3042),U=!0),e===ua)a=a||i,s=s||r,l=l||o,i===G&&a===q||(t.blendEquationSeparate(n.convert(i),n.convert(a)),G=i,q=a),r===W&&o===$&&s===Y&&l===X||(t.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(l)),W=r,$=o,Y=s,X=l),V=e,Z=null;else if(e!==V||c!==Z){if(G===ha&&q===ha||(t.blendEquation(32774),G=ha,q=ha),c)switch(e){case aa:t.blendFuncSeparate(1,771,1,771);break;case sa:t.blendFunc(1,1);break;case la:t.blendFuncSeparate(0,0,769,771);break;case ca:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case aa:t.blendFuncSeparate(770,771,1,771);break;case sa:t.blendFunc(770,1);break;case la:t.blendFunc(0,769);break;case ca:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e)}W=null,$=null,Y=null,X=null,V=e,Z=c}}else U&&(f(3042),U=!1)}function y(t,e){t.side===ea?f(2884):p(2884);var n=t.side===ta;e&&(n=!n),b(n),t.blending===aa&&!1===t.transparent?g(oa):g(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),k.setFunc(t.depthFunc),k.setTest(t.depthTest),k.setMask(t.depthWrite),R.setMask(t.colorWrite),_(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function b(e){J!==e&&(e?t.frontFace(2304):t.frontFace(2305),J=e)}function x(e){e!==Yo?(p(2884),e!==K&&(e===Xo?t.cullFace(1029):e===Zo?t.cullFace(1028):t.cullFace(1032))):f(2884),K=e}function w(e){e!==Q&&(it&&t.lineWidth(e),Q=e)}function _(e,n,i){e?(p(32823),tt===n&&et===i||(t.polygonOffset(n,i),tt=n,et=i)):f(32823)}function M(t){t?p(3089):f(3089)}function E(e){void 0===e&&(e=33984+nt-1),at!==e&&(t.activeTexture(e),at=e)}function S(e,n){null===at&&E();var i=st[at];void 0===i&&(i={type:void 0,texture:void 0},st[at]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||ut[e]),i.type=e,i.texture=n)}function T(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function A(){try{t.texImage2D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function C(){try{t.texImage3D.apply(t,arguments)}catch(t){console.error("THREE.WebGLState:",t)}}function L(e){!1===lt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),lt.copy(e))}function P(e){!1===ct.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ct.copy(e))}function O(){for(var e=0;e<z.length;e++)1===z[e]&&(t.disableVertexAttribArray(e),z[e]=0);F={},j=null,at=null,st={},H=null,V=null,J=null,K=null,R.reset(),k.reset(),D.reset()}var R=new r,k=new o,D=new a,I=t.getParameter(34921),N=new Uint8Array(I),z=new Uint8Array(I),B=new Uint8Array(I),F={},j=null,H=null,U=null,V=null,G=null,W=null,$=null,q=null,Y=null,X=null,Z=!1,J=null,K=null,Q=null,tt=null,et=null,nt=t.getParameter(35661),it=!1,rt=0,ot=t.getParameter(7938);-1!==ot.indexOf("WebGL")?(rt=parseFloat(/^WebGL\ ([0-9])/.exec(ot)[1]),it=rt>=1):-1!==ot.indexOf("OpenGL ES")&&(rt=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(ot)[1]),it=rt>=2);var at=null,st={},lt=new c,ct=new c,ut={};return ut[3553]=s(3553,3553,1),ut[34067]=s(34067,34069,6),R.setClear(0,0,0,1),k.setClear(1),D.setClear(0),p(2929),k.setFunc(Pa),b(!1),x(Xo),p(2884),g(oa),{buffers:{color:R,depth:k,stencil:D},initAttributes:l,enableAttribute:u,enableAttributeAndDivisor:h,disableUnusedAttributes:d,enable:p,disable:f,getCompressedTextureFormats:m,useProgram:v,setBlending:g,setMaterial:y,setFlipSided:b,setCullFace:x,setLineWidth:w,setPolygonOffset:_,setScissorTest:M,activeTexture:E,bindTexture:S,compressedTexImage2D:T,texImage2D:A,texImage3D:C,scissor:L,viewport:P,reset:O}}function Ae(t,e,n,i,r,o,a){function s(t,e){return U?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function l(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?hl.floorPowerOfTwo:Math.floor,a=o(r*t.width),l=o(r*t.height);void 0===j&&(j=s(a,l));var c=n?s(a,l):j;return c.width=a,c.height=l,c.getContext("2d").drawImage(t,0,0,a,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+l+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function c(t){return hl.isPowerOfTwo(t.width)&&hl.isPowerOfTwo(t.height)}function u(t){return!r.isWebGL2&&(t.wrapS!==Ka||t.wrapT!==Ka||t.minFilter!==ts&&t.minFilter!==is)}function h(t,e){return t.generateMipmaps&&e&&t.minFilter!==ts&&t.minFilter!==is}function d(e,n,r,o){t.generateMipmap(e),i.get(n).__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function p(t,n){if(!r.isWebGL2)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function f(t){return t===ts||t===es||t===ns?9728:9729}function m(t){var e=t.target;e.removeEventListener("dispose",m),g(e),e.isVideoTexture&&delete H[e.id],a.memory.textures--}function v(t){var e=t.target;e.removeEventListener("dispose",v),y(e),a.memory.textures--}function g(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}function y(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}function b(){V=0}function x(){var t=V;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),V+=1,t}function w(t,e){var r=i.get(t);if(t.isVideoTexture&&z(t),t.version>0&&r.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void C(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function _(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?C(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))}function M(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?C(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))}function E(e,a){var s=i.get(e);if(6===e.image.length)if(e.version>0&&s.__version!==e.version){A(s,e),n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);for(var u=e&&e.isCompressedTexture,f=e.image[0]&&e.image[0].isDataTexture,m=[],v=0;v<6;v++)m[v]=u||f?f?e.image[v].image:e.image[v]:l(e.image[v],!1,!0,r.maxCubemapSize);var g=m[0],y=c(g)||r.isWebGL2,b=o.convert(e.format),x=o.convert(e.type),w=p(b,x);T(34067,e,y);for(v=0;v<6;v++)if(u)for(var _,M=m[v].mipmaps,E=0,S=M.length;E<S;E++)_=M[E],e.format!==xs&&e.format!==bs?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+v,E,w,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+v,E,w,_.width,_.height,0,b,x,_.data);else f?n.texImage2D(34069+v,0,w,m[v].width,m[v].height,0,b,x,m[v].data):n.texImage2D(34069+v,0,w,b,x,m[v]);s.__maxMipLevel=u?M.length-1:0,h(e,y)&&d(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture)}function S(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function T(n,a,s){var l;if(s?(t.texParameteri(n,10242,o.convert(a.wrapS)),t.texParameteri(n,10243,o.convert(a.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,o.convert(a.wrapR)),t.texParameteri(n,10240,o.convert(a.magFilter)),t.texParameteri(n,10241,o.convert(a.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===Ka&&a.wrapT===Ka||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,f(a.magFilter)),t.texParameteri(n,10241,f(a.minFilter)),a.minFilter!==ts&&a.minFilter!==is&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=e.get("EXT_texture_filter_anisotropic")){if(a.type===ds&&null===e.get("OES_texture_float_linear"))return;if(a.type===ps&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function A(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",m),e.__webglTexture=t.createTexture(),a.memory.textures++)}function C(e,i,a){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),A(e,i),n.activeTexture(33984+a),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var f=u(i)&&!1===c(i.image),m=l(i.image,f,!1,r.maxTextureSize),v=c(m)||r.isWebGL2,g=o.convert(i.format),y=o.convert(i.type),b=p(g,y);T(s,i,v);var x,w=i.mipmaps;if(i.isDepthTexture){if(b=6402,i.type===ds){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");b=36012}else r.isWebGL2&&(b=33189);i.format===Ms&&6402===b&&i.type!==cs&&i.type!==hs&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=cs,y=o.convert(i.type)),i.format===Es&&(b=34041,i.type!==gs&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=gs,y=o.convert(i.type))),n.texImage2D(3553,0,b,m.width,m.height,0,g,y,null)}else if(i.isDataTexture)if(w.length>0&&v){for(var _=0,M=w.length;_<M;_++)x=w[_],n.texImage2D(3553,_,b,x.width,x.height,0,g,y,x.data);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,m.width,m.height,0,g,y,m.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(_=0,M=w.length;_<M;_++)x=w[_],i.format!==xs&&i.format!==bs?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,_,b,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,_,b,x.width,x.height,0,g,y,x.data);e.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,b,m.width,m.height,m.depth,0,g,y,m.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,b,m.width,m.height,m.depth,0,g,y,m.data),e.__maxMipLevel=0;else if(w.length>0&&v){for(_=0,M=w.length;_<M;_++)x=w[_],n.texImage2D(3553,_,b,g,y,x);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,g,y,m),e.__maxMipLevel=0;h(i,v)&&d(3553,i,m.width,m.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function L(e,r,a,s){var l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=p(l,c);n.texImage2D(s,0,u,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function P(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=N(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=N(n);t.renderbufferStorageMultisample(36161,r,34041,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),l=p(a,s);if(i){r=N(n);t.renderbufferStorageMultisample(36161,r,l,n.width,n.height)}else t.renderbufferStorage(36161,l,n.width,n.height)}t.bindRenderbuffer(36161,null)}function O(e,n){if(n&&n.isWebGLRenderTargetCube)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),w(n.depthTexture,0);var r=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ms)t.framebufferTexture2D(36160,36096,3553,r,0);else{if(n.depthTexture.format!==Es)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,r,0)}}function R(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");O(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),P(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),P(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function k(e){var s=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",v),l.__webglTexture=t.createTexture(),a.memory.textures++;var u=!0===e.isWebGLRenderTargetCube,f=!0===e.isWebGLMultisampleRenderTarget,m=c(e)||r.isWebGL2;if(u){s.__webglFramebuffer=[];for(var g=0;g<6;g++)s.__webglFramebuffer[g]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),f)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var y=o.convert(e.texture.format),b=o.convert(e.texture.type),x=p(y,b),w=N(e);t.renderbufferStorageMultisample(36161,w,x,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),P(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(u){n.bindTexture(34067,l.__webglTexture),T(34067,e.texture,m);for(g=0;g<6;g++)L(s.__webglFramebuffer[g],e,36064,34069+g);h(e.texture,m)&&d(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),T(3553,e.texture,m),L(s.__webglFramebuffer,e,36064,3553),h(e.texture,m)&&d(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&R(e)}function D(t){var e=t.texture;if(h(e,c(t)||r.isWebGL2)){var o=t.isWebGLRenderTargetCube?34067:3553,a=i.get(e).__webglTexture;n.bindTexture(o,a),d(o,e,t.width,t.height),n.bindTexture(o,null)}}function I(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var o=e.width,a=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function N(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}function z(t){var e=t.id,n=a.render.frame;H[e]!==n&&(H[e]=n,t.update())}function B(t,e){t&&t.isWebGLRenderTarget&&(!1===G&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),G=!0),t=t.texture),w(t,e)}function F(t,e){t&&t.isWebGLRenderTargetCube&&(!1===W&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),W=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?E(t,e):S(t,e)}var j,H={},U="undefined"!=typeof OffscreenCanvas,V=0,G=!1,W=!1;this.allocateTextureUnit=x,this.resetTextureUnits=b,this.setTexture2D=w,this.setTexture2DArray=_,this.setTexture3D=M,this.setTextureCube=E,this.setTextureCubeDynamic=S,this.setupRenderTarget=k,this.updateRenderTargetMipmap=D,this.updateMultisampleRenderTarget=I,this.safeSetTexture2D=B,this.safeSetTextureCube=F}function Ce(t,e,n){function i(t){var i;if(t===Ja)return 10497;if(t===Ka)return 33071;if(t===Qa)return 33648;if(t===ts)return 9728;if(t===es)return 9984;if(t===ns)return 9986;if(t===is)return 9729;if(t===rs)return 9985;if(t===os)return 9987;if(t===as)return 5121;if(t===fs)return 32819;if(t===ms)return 32820;if(t===vs)return 33635;if(t===ss)return 5120;if(t===ls)return 5122;if(t===cs)return 5123;if(t===us)return 5124;if(t===hs)return 5125;if(t===ds)return 5126;if(t===ps){if(n.isWebGL2)return 5131;if(null!==(i=e.get("OES_texture_half_float")))return i.HALF_FLOAT_OES}if(t===ys)return 6406;if(t===bs)return 6407;if(t===xs)return 6408;if(t===ws)return 6409;if(t===_s)return 6410;if(t===Ms)return 6402;if(t===Es)return 34041;if(t===Ss)return 6403;if(t===ha)return 32774;if(t===da)return 32778;if(t===pa)return 32779;if(t===va)return 0;if(t===ga)return 1;if(t===ya)return 768;if(t===ba)return 769;if(t===xa)return 770;if(t===wa)return 771;if(t===_a)return 772;if(t===Ma)return 773;if(t===Ea)return 774;if(t===Sa)return 775;if(t===Ta)return 776;if((t===Ts||t===As||t===Cs||t===Ls)&&null!==(i=e.get("WEBGL_compressed_texture_s3tc"))){if(t===Ts)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===As)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Cs)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Ls)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Ps||t===Os||t===Rs||t===ks)&&null!==(i=e.get("WEBGL_compressed_texture_pvrtc"))){if(t===Ps)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===Os)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===Rs)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ks)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Ds&&null!==(i=e.get("WEBGL_compressed_texture_etc1")))return i.COMPRESSED_RGB_ETC1_WEBGL;if((t===Is||t===Ns||t===zs||t===Bs||t===Fs||t===js||t===Hs||t===Us||t===Vs||t===Gs||t===Ws||t===$s||t===qs||t===Ys)&&null!==(i=e.get("WEBGL_compressed_texture_astc")))return t;if(t===fa||t===ma){if(n.isWebGL2){if(t===fa)return 32775;if(t===ma)return 32776}if(null!==(i=e.get("EXT_blend_minmax"))){if(t===fa)return i.MIN_EXT;if(t===ma)return i.MAX_EXT}}if(t===gs){if(n.isWebGL2)return 34042;if(null!==(i=e.get("WEBGL_depth_texture")))return i.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:i}}function Le(){A.call(this),this.type="Group"}function Pe(){A.call(this),this.type="Camera",this.matrixWorldInverse=new y,this.projectionMatrix=new y,this.projectionMatrixInverse=new y}function Oe(t,e,n,i){Pe.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Re(t){Oe.call(this),this.cameras=t||[]}function ke(t,e,n){Bl.setFromMatrixPosition(e.matrixWorld),Fl.setFromMatrixPosition(n.matrixWorld);var i=Bl.distanceTo(Fl),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=a+f,g=s+f,y=d-m,b=p+(i-m),x=l*s/g*v,w=c*s/g*v;t.projectionMatrix.makePerspective(y,b,x,w,v,g)}function De(t){function e(){return null!==p&&!0===p.isPresenting}function n(){if(e()){var n=p.getEyeParameters("left");u=2*n.renderWidth*x,h=n.renderHeight*x,L=t.getPixelRatio(),t.getSize(P),t.setDrawingBufferSize(u,h,1),T.viewport.set(0,0,u/2,h),A.viewport.set(u/2,0,u/2,h),R.start()}else d.enabled&&t.setDrawingBufferSize(P.width,P.height,L),R.stop()}function i(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=e.length;n<r;n++){var o=e[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(i===t)return o;i++}}}function s(){for(var t=0;t<v.length;t++){var e=v[t],n=i(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var r=n.pose;!1===r.hasPosition&&e.position.set(.2,-.6,-.05),null!==r.position&&e.position.fromArray(r.position),null!==r.orientation&&e.quaternion.fromArray(r.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(g),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var o="Daydream Controller"===n.id?0:1;void 0===O[t]&&(O[t]=!1),O[t]!==n.buttons[o].pressed&&(O[t]=n.buttons[o].pressed,!0===O[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}function l(t,e){null!==e&&4===e.length&&t.set(e[0]*u,e[1]*h,e[2]*u,e[3]*h)}var u,h,d=this,p=null,f=null,m=null,v=[],g=new y,b=new y,x=1,w="local-floor";"undefined"!=typeof window&&"VRFrameData"in window&&(f=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",n,!1));var M=new y,E=new o,S=new a,T=new Oe;T.viewport=new c,T.layers.enable(1);var A=new Oe;A.viewport=new c,A.layers.enable(2);var C=new Re([T,A]);C.layers.enable(1),C.layers.enable(2);var L,P=new r,O=[];this.enabled=!1,this.getController=function(t){var e=v[t];return void 0===e&&(e=new Le,e.matrixAutoUpdate=!1,e.visible=!1,v[t]=e),e},this.getDevice=function(){return p},this.setDevice=function(t){void 0!==t&&(p=t),R.setContext(t)},this.setFramebufferScaleFactor=function(t){x=t},this.setReferenceSpaceType=function(t){w=t},this.setPoseTarget=function(t){void 0!==t&&(m=t)},this.getCamera=function(t){var n="local-floor"===w?1.6:0;if(!1===e())return t.position.set(0,n,0),t.rotation.set(0,0,0),t;if(p.depthNear=t.near,p.depthFar=t.far,p.getFrameData(f),"local-floor"===w){var i=p.stageParameters;i?g.fromArray(i.sittingToStandingTransform):g.makeTranslation(0,n,0)}var r=f.pose,o=null!==m?m:t;o.matrix.copy(g),o.matrix.decompose(o.position,o.quaternion,o.scale),null!==r.orientation&&(E.fromArray(r.orientation),o.quaternion.multiply(E)),null!==r.position&&(E.setFromRotationMatrix(g),S.fromArray(r.position),S.applyQuaternion(E),o.position.add(S)),o.updateMatrixWorld(),T.near=t.near,A.near=t.near,T.far=t.far,A.far=t.far,T.matrixWorldInverse.fromArray(f.leftViewMatrix),A.matrixWorldInverse.fromArray(f.rightViewMatrix),b.getInverse(g),"local-floor"===w&&(T.matrixWorldInverse.multiply(b),A.matrixWorldInverse.multiply(b));var a=o.parent;null!==a&&(M.getInverse(a.matrixWorld),T.matrixWorldInverse.multiply(M),A.matrixWorldInverse.multiply(M)),T.matrixWorld.getInverse(T.matrixWorldInverse),A.matrixWorld.getInverse(A.matrixWorldInverse),T.projectionMatrix.fromArray(f.leftProjectionMatrix),A.projectionMatrix.fromArray(f.rightProjectionMatrix),ke(C,T,A);var c=p.getLayers();if(c.length){var u=c[0];l(T.viewport,u.leftBounds),l(A.viewport,u.rightBounds)}return s(),C},this.getStandingMatrix=function(){return g},this.isPresenting=e;var R=new _;this.setAnimationLoop=function(t){R.setAnimationLoop(t),e()&&R.start()},this.submitFrame=function(){e()&&p.submitFrame()},this.dispose=function(){"undefined"!=typeof window&&window.removeEventListener("vrdisplaypresentchange",n)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Ie(t){function e(){return null!==l&&null!==u}function n(t){for(var e=0;e<p.length;e++)f[e]===t.inputSource&&p[e].dispatchEvent({type:t.type})}function i(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),x.stop()}function r(t){u=t,x.setContext(l),x.start()}function o(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}function a(e,n){if(null!==(d=n.getViewerPose(u))){var i=d.views,r=l.renderState.baseLayer;t.setFramebuffer(r.framebuffer);for(var o=0;o<i.length;o++){var a=i[o],s=r.getViewport(a),c=a.transform.inverse.matrix,h=g.cameras[o];h.matrix.fromArray(c).getInverse(h.matrix),h.projectionMatrix.fromArray(a.projectionMatrix),h.viewport.set(s.x,s.y,s.width,s.height),0===o&&g.matrix.copy(h.matrix)}}for(o=0;o<p.length;o++){var m=p[o],v=f[o];if(v){var y=n.getPose(v.targetRaySpace,u);if(null!==y){m.matrix.fromArray(y.transform.matrix),m.matrix.decompose(m.position,m.rotation,m.scale),m.visible=!0;continue}}m.visible=!1}b&&b(e)}var s=t.context,l=null,u=null,h="local-floor",d=null,p=[],f=[],m=new Oe;m.layers.enable(1),m.viewport=new c;var v=new Oe;v.layers.enable(2),v.viewport=new c;var g=new Re([m,v]);g.layers.enable(1),g.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=p[t];return void 0===e&&(e=new Le,e.matrixAutoUpdate=!1,e.visible=!1,p[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){h=t},this.getSession=function(){return l},this.setSession=function(t){null!==(l=t)&&(l.addEventListener("select",n),l.addEventListener("selectstart",n),l.addEventListener("selectend",n),l.addEventListener("end",i),l.updateRenderState({baseLayer:new XRWebGLLayer(l,s)}),l.requestReferenceSpace(h).then(r),f=l.inputSources,l.addEventListener("inputsourceschange",function(){f=l.inputSources,console.log(f);for(var t=0;t<p.length;t++)p[t].userData.inputSource=f[t]}))},this.getCamera=function(t){if(e()){var n=t.parent,i=g.cameras;o(g,n);for(var r=0;r<i.length;r++)o(i[r],n);t.matrixWorld.copy(g.matrixWorld);for(var a=t.children,s=(r=0,a.length);r<s;r++)a[r].updateMatrixWorld(!0);return ke(g,m,v),g}return t},this.isPresenting=e;var b=null,x=new _;x.setAnimationLoop(a),this.setAnimationLoop=function(t){b=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new y},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Ne(t){function e(){return null===Rt?Vt:1}function n(){ut=new nt(ct),ht=new tt(ct,ut,t),ht.isWebGL2||(ut.get("WEBGL_depth_texture"),ut.get("OES_texture_float"),ut.get("OES_texture_half_float"),ut.get("OES_texture_half_float_linear"),ut.get("OES_standard_derivatives"),ut.get("OES_element_index_uint"),ut.get("ANGLE_instanced_arrays")),ut.get("OES_texture_float_linear"),Tt=new Ce(ct,ut,ht),dt=new Te(ct,ut,Tt,ht),dt.scissor(Ft.copy(Wt).multiplyScalar(Vt)),dt.viewport(Bt.copy(Gt).multiplyScalar(Vt)),pt=new ot(ct),ft=new fe,mt=new Ae(ct,ut,dt,ft,ht,Tt,pt),vt=new M(ct),gt=new it(ct,vt,pt),yt=new lt(gt,pt),Mt=new st(ct),bt=new pe(At,ut,ht,mt),xt=new ye,wt=new _e,_t=new K(At,dt,yt,q),Et=new Q(ct,ut,pt,ht),St=new rt(ct,ut,pt,ht),pt.programs=bt.programs,At.context=ct,At.capabilities=ht,At.extensions=ut,At.properties=ft,At.renderLists=xt,At.state=dt,At.info=pt}function i(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),Ct=!0}function o(){console.log("THREE.WebGLRenderer: Context Restored."),Ct=!1,n()}function s(t){var e=t.target;e.removeEventListener("dispose",s),l(e)}function l(t){u(t),ft.remove(t)}function u(t){var e=ft.get(t).program;t.program=void 0,void 0!==e&&bt.releaseProgram(e)}function h(t,e){t.render(function(t){At.renderBufferImmediate(t,e)})}function d(t,e,n){if(n&&n.isInstancedBufferGeometry&&!ht.isWebGL2&&null===ut.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{dt.initAttributes();var i=n.attributes,r=e.getAttributes(),o=t.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var l=i[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,h=vt.get(l);if(void 0===h)continue;var d=h.buffer,p=h.type,f=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var m=l.data,v=m.stride,g=l.offset;m&&m.isInstancedInterleavedBuffer?(dt.enableAttributeAndDivisor(s,m.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=m.meshPerAttribute*m.count)):dt.enableAttribute(s),ct.bindBuffer(34962,d),ct.vertexAttribPointer(s,u,p,c,v*f,g*f)}else l.isInstancedBufferAttribute?(dt.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):dt.enableAttribute(s),ct.bindBuffer(34962,d),ct.vertexAttribPointer(s,u,p,c,0,0)}else if(void 0!==o){var y=o[a];if(void 0!==y)switch(y.length){case 2:ct.vertexAttrib2fv(s,y);break;case 3:ct.vertexAttrib3fv(s,y);break;case 4:ct.vertexAttrib4fv(s,y);break;default:ct.vertexAttrib1fv(s,y)}}}}dt.disableUnusedAttributes()}}function f(t){ee.isPresenting()||ie&&ie(t)}function m(t,e,n,i){if(!1!==t.visible){if(t.layers.test(e.layers))if(t.isGroup)n=t.renderOrder;else if(t.isLight)at.pushLight(t),t.castShadow&&at.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||qt.intersectsSprite(t)){i&&Qt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Kt);var r=yt.update(t),o=t.material;o.visible&&J.push(t,r,o,n,Qt.z,null)}}else if(t.isImmediateRenderObject)i&&Qt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Kt),J.push(t,null,t.material,n,Qt.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||qt.intersectsObject(t))){i&&Qt.setFromMatrixPosition(t.matrixWorld).applyMatrix4(Kt);r=yt.update(t),o=t.material;if(Array.isArray(o))for(var a=r.groups,s=0,l=a.length;s<l;s++){var c=a[s],u=o[c.materialIndex];u&&u.visible&&J.push(t,r,u,n,Qt.z,c)}else o.visible&&J.push(t,r,o,n,Qt.z,null)}var h=t.children;for(s=0,l=h.length;s<l;s++)m(h[s],e,n,i)}}function v(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,l=a.geometry,c=void 0===i?a.material:i,u=a.group;if(n.isArrayCamera){zt=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var f=h[d];s.layers.test(f.layers)&&(dt.viewport(Bt.copy(f.viewport)),at.setupLights(f),x(s,e,f,l,c,u))}}else zt=null,x(s,e,n,l,c,u)}}function x(t,e,n,i,r,o){if(t.onBeforeRender(At,e,n,i,r,o),at=wt.get(e,zt||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){dt.setMaterial(r);var a=E(n,e.fog,r,t);It.geometry=null,It.program=null,It.wireframe=!1,h(t,a)}else At.renderBufferDirect(n,e.fog,i,r,t,o);t.onAfterRender(At,e,n,i,r,o),at=wt.get(e,zt||n)}function w(t,e,n){var i=ft.get(t),r=at.state.lights,o=at.state.shadowsArray,a=i.lightsHash,l=r.state.hash,c=bt.getParameters(t,r.state,o,e,Yt.numPlanes,Yt.numIntersection,n),h=bt.getProgramCode(t,c),d=i.program,p=!0;if(void 0===d)t.addEventListener("dispose",s);else if(d.code!==h)u(t);else if(a.stateID!==l.stateID||a.directionalLength!==l.directionalLength||a.pointLength!==l.pointLength||a.spotLength!==l.spotLength||a.rectAreaLength!==l.rectAreaLength||a.hemiLength!==l.hemiLength||a.shadowsLength!==l.shadowsLength)a.stateID=l.stateID,a.directionalLength=l.directionalLength,a.pointLength=l.pointLength,a.spotLength=l.spotLength,a.rectAreaLength=l.rectAreaLength,a.hemiLength=l.hemiLength,a.shadowsLength=l.shadowsLength,p=!1;else{if(void 0!==c.shaderID)return;p=!1}if(p){if(c.shaderID){var f=yl[c.shaderID];i.shader={name:t.type,uniforms:b(f.uniforms),vertexShader:f.vertexShader,fragmentShader:f.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,At),h=bt.getProgramCode(t,c),d=bt.acquireProgram(t,i.shader,c,h),i.program=d,t.program=d}var m=d.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var v=0;v<At.maxMorphTargets;v++)m["morphTarget"+v]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(v=0;v<At.maxMorphNormals;v++)m["morphNormal"+v]>=0&&t.numSupportedMorphNormals++}var g=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=Yt.numPlanes,i.numIntersection=Yt.numIntersection,g.clippingPlanes=Yt.uniform),i.fog=e,void 0===a&&(i.lightsHash=a={}),a.stateID=l.stateID,a.directionalLength=l.directionalLength,a.pointLength=l.pointLength,a.spotLength=l.spotLength,a.rectAreaLength=l.rectAreaLength,a.hemiLength=l.hemiLength,a.shadowsLength=l.shadowsLength,t.lights&&(g.ambientLightColor.value=r.state.ambient,g.lightProbe.value=r.state.probe,g.directionalLights.value=r.state.directional,g.spotLights.value=r.state.spot,g.rectAreaLights.value=r.state.rectArea,g.pointLights.value=r.state.point,g.hemisphereLights.value=r.state.hemi,g.directionalShadowMap.value=r.state.directionalShadowMap,g.directionalShadowMatrix.value=r.state.directionalShadowMatrix,g.spotShadowMap.value=r.state.spotShadowMap,g.spotShadowMatrix.value=r.state.spotShadowMatrix,g.pointShadowMap.value=r.state.pointShadowMap,g.pointShadowMatrix.value=r.state.pointShadowMatrix);var y=i.program.getUniforms(),x=Jt.seqWithValue(y.seq,g);i.uniformsList=x}function E(t,e,n,i){mt.resetTextureUnits();var r=ft.get(n),o=at.state.lights,a=r.lightsHash,s=o.state.hash;if(Xt&&(Zt||t!==Nt)){var l=t===Nt&&n.id===Dt;Yt.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,l)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:(!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===Yt.numPlanes&&r.numIntersection===Yt.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(w(n,e,i),n.needsUpdate=!1);var c=!1,u=!1,h=!1,d=r.program,f=d.getUniforms(),m=r.shader.uniforms;if(dt.useProgram(d.program)&&(c=!0,u=!0,h=!0),n.id!==Dt&&(Dt=n.id,u=!0),c||Nt!==t){if(f.setValue(ct,"projectionMatrix",t.projectionMatrix),ht.logarithmicDepthBuffer&&f.setValue(ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),Nt!==t&&(Nt=t,u=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var v=f.map.cameraPosition;void 0!==v&&v.setValue(ct,Qt.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&f.setValue(ct,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){f.setOptional(ct,i,"bindMatrix"),f.setOptional(ct,i,"bindMatrixInverse");var g=i.skeleton;if(g){var y=g.bones;if(ht.floatVertexTextures){if(void 0===g.boneTexture){var b=Math.sqrt(4*y.length);b=hl.ceilPowerOfTwo(b),b=Math.max(b,4);var x=new Float32Array(b*b*4);x.set(g.boneMatrices);var _=new p(x,b,b,xs,ds);_.needsUpdate=!0,g.boneMatrices=x,g.boneTexture=_,g.boneTextureSize=b}f.setValue(ct,"boneTexture",g.boneTexture,mt),f.setValue(ct,"boneTextureSize",g.boneTextureSize)}else f.setOptional(ct,g,"boneMatrices")}}return u&&(f.setValue(ct,"toneMappingExposure",At.toneMappingExposure),f.setValue(ct,"toneMappingWhitePoint",At.toneMappingWhitePoint),n.lights&&j(m,h),e&&n.fog&&P(m,e),n.isMeshBasicMaterial?S(m,n):n.isMeshLambertMaterial?(S(m,n),O(m,n)):n.isMeshPhongMaterial?(S(m,n),n.isMeshToonMaterial?k(m,n):R(m,n)):n.isMeshStandardMaterial?(S(m,n),n.isMeshPhysicalMaterial?I(m,n):D(m,n)):n.isMeshMatcapMaterial?(S(m,n),N(m,n)):n.isMeshDepthMaterial?(S(m,n),z(m,n)):n.isMeshDistanceMaterial?(S(m,n),B(m,n)):n.isMeshNormalMaterial?(S(m,n),F(m,n)):n.isLineBasicMaterial?(T(m,n),n.isLineDashedMaterial&&A(m,n)):n.isPointsMaterial?C(m,n):n.isSpriteMaterial?L(m,n):n.isShadowMaterial&&(m.color.value.copy(n.color),m.opacity.value=n.opacity),void 0!==m.ltc_1&&(m.ltc_1.value=gl.LTC_1),void 0!==m.ltc_2&&(m.ltc_2.value=gl.LTC_2),Jt.upload(ct,r.uniformsList,m,mt)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Jt.upload(ct,r.uniformsList,m,mt),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&f.setValue(ct,"center",i.center),f.setValue(ct,"modelViewMatrix",i.modelViewMatrix),f.setValue(ct,"normalMatrix",i.normalMatrix),f.setValue(ct,"modelMatrix",i.matrixWorld),d}function S(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=ft.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function T(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function A(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function C(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*Vt,t.scale.value=.5*Ut,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function L(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function P(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function O(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function R(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ta&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ta&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function k(t,e){R(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function D(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ta&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ta&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function I(t,e){D(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}function N(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ta&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ta&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function z(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function B(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function F(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===ta&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===ta&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function j(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}console.log("THREE.WebGLRenderer",$o),t=t||{};var H=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),U=void 0!==t.context?t.context:null,V=void 0!==t.alpha&&t.alpha,G=void 0===t.depth||t.depth,W=void 0===t.stencil||t.stencil,$=void 0!==t.antialias&&t.antialias,q=void 0===t.premultipliedAlpha||t.premultipliedAlpha,Y=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,X=void 0!==t.powerPreference?t.powerPreference:"default",Z=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,J=null,at=null;this.domElement=H,this.context=null,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Fa,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var ct,ut,ht,dt,pt,ft,mt,vt,gt,yt,bt,xt,wt,_t,Mt,Et,St,Tt,At=this,Ct=!1,Lt=null,Pt=0,Ot=0,Rt=null,kt=null,Dt=-1,It={geometry:null,program:null,wireframe:!1},Nt=null,zt=null,Bt=new c,Ft=new c,jt=null,Ht=H.width,Ut=H.height,Vt=1,Gt=new c(0,0,Ht,Ut),Wt=new c(0,0,Ht,Ut),$t=!1,qt=new g,Yt=new et,Xt=!1,Zt=!1,Kt=new y,Qt=new a;try{var te={alpha:V,depth:G,stencil:W,antialias:$,premultipliedAlpha:q,preserveDrawingBuffer:Y,powerPreference:X,failIfMajorPerformanceCaveat:Z,xrCompatible:!0};if(H.addEventListener("webglcontextlost",i,!1),H.addEventListener("webglcontextrestored",o,!1),null===(ct=U||H.getContext("webgl",te)||H.getContext("experimental-webgl",te)))throw null!==H.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(t){throw console.error("THREE.WebGLRenderer: "+t.message),t}n();var ee="undefined"!=typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Ie(At):new De(At);this.vr=ee;var ne=new Se(At,yt,ht.maxTextureSize);this.shadowMap=ne,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){var t=ut.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=ut.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return Vt},this.setPixelRatio=function(t){void 0!==t&&(Vt=t,this.setSize(Ht,Ut,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new r),t.set(Ht,Ut)},this.setSize=function(t,e,n){ee.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Ht=t,Ut=e,H.width=t*Vt,H.height=e*Vt,!1!==n&&(H.style.width=t+"px",H.style.height=e+"px"),this.setViewport(0,0,t,e))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new r),t.set(Ht*Vt,Ut*Vt)},this.setDrawingBufferSize=function(t,e,n){Ht=t,Ut=e,Vt=n,H.width=t*n,H.height=e*n,this.setViewport(0,0,t,e)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new c),t.copy(Bt)},this.getViewport=function(t){return t.copy(Gt)},this.setViewport=function(t,e,n,i){t.isVector4?Gt.set(t.x,t.y,t.z,t.w):Gt.set(t,e,n,i),dt.viewport(Bt.copy(Gt).multiplyScalar(Vt))},this.getScissor=function(t){return t.copy(Wt)},this.setScissor=function(t,e,n,i){t.isVector4?Wt.set(t.x,t.y,t.z,t.w):Wt.set(t,e,n,i),dt.scissor(Ft.copy(Wt).multiplyScalar(Vt))},this.getScissorTest=function(){return $t},this.setScissorTest=function(t){dt.setScissorTest($t=t)},this.getClearColor=function(){return _t.getClearColor()},this.setClearColor=function(){_t.setClearColor.apply(_t,arguments)},this.getClearAlpha=function(){return _t.getClearAlpha()},this.setClearAlpha=function(){_t.setClearAlpha.apply(_t,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),ct.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){H.removeEventListener("webglcontextlost",i,!1),H.removeEventListener("webglcontextrestored",o,!1),xt.dispose(),wt.dispose(),ft.dispose(),yt.dispose(),ee.dispose(),re.stop()},this.renderBufferImmediate=function(t,e){dt.initAttributes();var n=ft.get(t);t.hasPositions&&!n.position&&(n.position=ct.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ct.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ct.createBuffer()),t.hasColors&&!n.color&&(n.color=ct.createBuffer());var i=e.getAttributes();t.hasPositions&&(ct.bindBuffer(34962,n.position),ct.bufferData(34962,t.positionArray,35048),dt.enableAttribute(i.position),ct.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(ct.bindBuffer(34962,n.normal),ct.bufferData(34962,t.normalArray,35048),dt.enableAttribute(i.normal),ct.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(ct.bindBuffer(34962,n.uv),ct.bufferData(34962,t.uvArray,35048),dt.enableAttribute(i.uv),ct.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(ct.bindBuffer(34962,n.color),ct.bufferData(34962,t.colorArray,35048),dt.enableAttribute(i.color),ct.vertexAttribPointer(i.color,3,5126,!1,0,0)),dt.disableUnusedAttributes(),ct.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,n,i,r,o,a){var s=o.isMesh&&o.matrixWorld.determinant()<0;dt.setMaterial(r,s);var l=E(t,n,r,o),c=!1;It.geometry===i.id&&It.program===l.id&&It.wireframe===(!0===r.wireframe)||(It.geometry=i.id,It.program=l.id,It.wireframe=!0===r.wireframe,c=!0),o.morphTargetInfluences&&(Mt.update(o,i,r,l),c=!0);var u=i.index,h=i.attributes.position,p=1;!0===r.wireframe&&(u=gt.getWireframeAttribute(i),p=2);var f,m=Et;null!==u&&(f=vt.get(u),m=St,m.setIndex(f)),c&&(d(r,l,i),null!==u&&ct.bindBuffer(34963,f.buffer));var v=1/0;null!==u?v=u.count:void 0!==h&&(v=h.count);var g=i.drawRange.start*p,y=i.drawRange.count*p,b=null!==a?a.start*p:0,x=null!==a?a.count*p:1/0,w=Math.max(g,b),_=Math.min(v,g+y,b+x)-1,M=Math.max(0,_-w+1);if(0!==M){if(o.isMesh)if(!0===r.wireframe)dt.setLineWidth(r.wireframeLinewidth*e()),m.setMode(1);else switch(o.drawMode){case Js:m.setMode(4);break;case Ks:m.setMode(5);break;case Qs:m.setMode(6)}else if(o.isLine){var S=r.linewidth;void 0===S&&(S=1),dt.setLineWidth(S*e()),o.isLineSegments?m.setMode(1):o.isLineLoop?m.setMode(2):m.setMode(3)}else o.isPoints?m.setMode(0):o.isSprite&&m.setMode(4);i&&i.isInstancedBufferGeometry?i.maxInstancedCount>0&&m.renderInstances(i,w,M):m.render(w,M)}},this.compile=function(t,e){at=wt.get(t,e),at.init(),t.traverse(function(t){t.isLight&&(at.pushLight(t),t.castShadow&&at.pushShadow(t))}),at.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)w(e.material[n],t.fog,e);else w(e.material,t.fog,e)})};var ie=null,re=new _;re.setAnimationLoop(f),"undefined"!=typeof window&&re.setContext(window),this.setAnimationLoop=function(t){ie=t,ee.setAnimationLoop(t),re.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!Ct){It.geometry=null,It.program=null,It.wireframe=!1,Dt=-1,Nt=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ee.enabled&&(e=ee.getCamera(e)),at=wt.get(t,e),at.init(),t.onBeforeRender(At,t,e,n||Rt),Kt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),qt.setFromMatrix(Kt),Zt=this.localClippingEnabled,Xt=Yt.init(this.clippingPlanes,Zt,e),J=xt.get(t,e),J.init(),m(t,e,0,At.sortObjects),!0===At.sortObjects&&J.sort(),Xt&&Yt.beginShadows();var r=at.state.shadowsArray;ne.render(r,t,e),at.setupLights(e),Xt&&Yt.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),_t.render(J,t,e,i);var o=J.opaque,a=J.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&v(o,t,e,s),a.length&&v(a,t,e,s)}else o.length&&v(o,t,e),a.length&&v(a,t,e);t.onAfterRender(At,t,e),null!==Rt&&(mt.updateRenderTargetMipmap(Rt),mt.updateMultisampleRenderTarget(Rt)),dt.buffers.depth.setTest(!0),dt.buffers.depth.setMask(!0),dt.buffers.color.setMask(!0),dt.setPolygonOffset(!1),ee.enabled&&ee.submitFrame(),J=null,at=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){Lt!==t&&ct.bindFramebuffer(36160,t),Lt=t},this.getActiveCubeFace=function(){return Pt},this.getActiveMipMapLevel=function(){return Ot},this.getRenderTarget=function(){return Rt},this.setRenderTarget=function(t,e,n){Rt=t,Pt=e,Ot=n,t&&void 0===ft.get(t).__webglFramebuffer&&mt.setupRenderTarget(t);var i=Lt,r=!1;if(t){var o=ft.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=o[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?ft.get(t).__webglMultisampledFramebuffer:o,Bt.copy(t.viewport),Ft.copy(t.scissor),jt=t.scissorTest}else Bt.copy(Gt).multiplyScalar(Vt),Ft.copy(Wt).multiplyScalar(Vt),jt=$t;if(kt!==i&&(ct.bindFramebuffer(36160,i),kt=i),dt.viewport(Bt),dt.scissor(Ft),dt.setScissorTest(jt),r){var a=ft.get(t.texture);ct.framebufferTexture2D(36160,36064,34069+(e||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(t&&t.isWebGLRenderTarget){var s=ft.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var l=!1;s!==kt&&(ct.bindFramebuffer(36160,s),l=!0);try{var c=t.texture,u=c.format,h=c.type;if(u!==xs&&Tt.convert(u)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!(h===as||Tt.convert(h)===ct.getParameter(35738)||h===ds&&(ht.isWebGL2||ut.get("OES_texture_float")||ut.get("WEBGL_color_buffer_float"))||h===ps&&(ht.isWebGL2?ut.get("EXT_color_buffer_float"):ut.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ct.readPixels(e,n,i,r,Tt.convert(u),Tt.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&ct.bindFramebuffer(36160,kt)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,o=Tt.convert(e.format);mt.setTexture2D(e,0),ct.copyTexImage2D(3553,n||0,o,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,o=e.image.height,a=Tt.convert(n.format),s=Tt.convert(n.type);mt.setTexture2D(n,0),e.isDataTexture?ct.texSubImage2D(3553,i||0,t.x,t.y,r,o,a,s,e.image.data):ct.texSubImage2D(3553,i||0,t.x,t.y,a,s,e.image)}}function ze(t,e){this.name="",this.color=new w(t),this.density=void 0!==e?e:25e-5}function Be(t,e,n){this.name="",this.color=new w(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function Fe(){A.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function je(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function He(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Ue(t){$.call(this),this.type="SpriteMaterial",this.color=new w(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function Ve(t){if(A.call(this),this.type="Sprite",void 0===zl){zl=new H;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new je(e,5);zl.setIndex([0,1,2,0,2,3]),zl.addAttribute("position",new He(n,3,0,!1)),zl.addAttribute("uv",new He(n,2,3,!1))}this.geometry=zl,this.material=void 0!==t?t:new Ue,this.center=new r(.5,.5)}function Ge(){A.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function We(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),J.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new y,this.bindMatrixInverse=new y}function $e(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new y)}}function qe(){A.call(this),this.type="Bone"}function Ye(t){$.call(this),this.type="LineBasicMaterial",this.color=new w(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function Xe(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),A.call(this),this.type="Line",this.geometry=void 0!==t?t:new H,this.material=void 0!==e?e:new Ye({color:16777215*Math.random()})}function Ze(t,e){Xe.call(this,t,e),this.type="LineSegments"}function Je(t,e){Xe.call(this,t,e),this.type="LineLoop"}function Ke(t){$.call(this),this.type="PointsMaterial",this.color=new w(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Qe(t,e){A.call(this),this.type="Points",this.geometry=void 0!==t?t:new H,this.material=void 0!==e?e:new Ke({color:16777215*Math.random()})}function tn(t,e,n,i,r,o,a,s,c){l.call(this,t,e,n,i,r,o,a,s,c),this.format=void 0!==a?a:bs,this.minFilter=void 0!==o?o:is,this.magFilter=void 0!==r?r:is,this.generateMipmaps=!1}function en(t,e,n,i,r,o,a,s,c,u,h,d){l.call(this,null,o,a,s,c,u,i,r,h,d),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function nn(t,e,n,i,r,o,a,s,c){l.call(this,t,e,n,i,r,o,a,s,c),this.needsUpdate=!0}function rn(t,e,n,i,r,o,a,s,c,u){if((u=void 0!==u?u:Ms)!==Ms&&u!==Es)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&u===Ms&&(n=cs),void 0===n&&u===Es&&(n=gs),l.call(this,null,i,r,o,a,s,u,n,c),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ts,this.minFilter=void 0!==s?s:ts,this.flipY=!1,this.generateMipmaps=!1}function on(t){H.call(this),this.type="WireframeGeometry";var e,n,i,r,o,s,l,c,u,h,d=[],p=[0,0],f={},m=["a","b","c"];if(t&&t.isGeometry){var v=t.faces;for(e=0,i=v.length;e<i;e++){var g=v[e];for(n=0;n<3;n++)l=g[m[n]],c=g[m[(n+1)%3]],p[0]=Math.min(l,c),p[1]=Math.max(l,c),u=p[0]+","+p[1],void 0===f[u]&&(f[u]={index1:p[0],index2:p[1]})}for(u in f)s=f[u],h=t.vertices[s.index1],d.push(h.x,h.y,h.z),h=t.vertices[s.index2],d.push(h.x,h.y,h.z)}else if(t&&t.isBufferGeometry){var y,b,x,w,_,M,E,S;if(h=new a,null!==t.index){for(y=t.attributes.position,b=t.index,x=t.groups,0===x.length&&(x=[{start:0,count:b.count,materialIndex:0}]),r=0,o=x.length;r<o;++r)for(w=x[r],_=w.start,M=w.count,e=_,i=_+M;e<i;e+=3)for(n=0;n<3;n++)l=b.getX(e+n),c=b.getX(e+(n+1)%3),p[0]=Math.min(l,c),p[1]=Math.max(l,c),u=p[0]+","+p[1],void 0===f[u]&&(f[u]={index1:p[0],index2:p[1]});for(u in f)s=f[u],h.fromBufferAttribute(y,s.index1),d.push(h.x,h.y,h.z),h.fromBufferAttribute(y,s.index2),d.push(h.x,h.y,h.z)}else for(y=t.attributes.position,e=0,i=y.count/3;e<i;e++)for(n=0;n<3;n++)E=3*e+n,h.fromBufferAttribute(y,E),d.push(h.x,h.y,h.z),S=3*e+(n+1)%3,h.fromBufferAttribute(y,S),d.push(h.x,h.y,h.z)}this.addAttribute("position",new z(d,3))}function an(t,e,n){C.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new sn(t,e,n)),this.mergeVertices()}function sn(t,e,n){H.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,o=[],s=[],l=[],c=[],u=new a,h=new a,d=new a,p=new a,f=new a;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(i=0;i<=n;i++){var v=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,v,h),s.push(h.x,h.y,h.z),g-1e-5>=0?(t(g-1e-5,v,d),p.subVectors(h,d)):(t(g+1e-5,v,d),p.subVectors(d,h)),v-1e-5>=0?(t(g,v-1e-5,d),f.subVectors(h,d)):(t(g,v+1e-5,d),f.subVectors(d,h)),u.crossVectors(p,f).normalize(),l.push(u.x,u.y,u.z),c.push(g,v)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var y=i*m+r,b=i*m+r+1,x=(i+1)*m+r+1,w=(i+1)*m+r;o.push(y,b,w),o.push(b,x,w)}this.setIndex(o),this.addAttribute("position",new z(s,3)),this.addAttribute("normal",new z(l,3)),this.addAttribute("uv",new z(c,2))}function ln(t,e,n,i){C.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new cn(t,e,n,i)),this.mergeVertices()}function cn(t,e,n,i){function o(t,e,n,i){var r,o,a=Math.pow(2,i),s=[];for(r=0;r<=a;r++){s[r]=[];var c=t.clone().lerp(n,r/a),u=e.clone().lerp(n,r/a),h=a-r;for(o=0;o<=h;o++)s[r][o]=0===o&&r===a?c:c.clone().lerp(u,o/h)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var d=Math.floor(o/2);o%2==0?(l(s[r][d+1]),l(s[r+1][d]),l(s[r][d])):(l(s[r][d+1]),l(s[r+1][d+1]),l(s[r+1][d]))}}function s(){for(var t=0;t<m.length;t+=6){var e=m[t+0],n=m[t+2],i=m[t+4],r=Math.max(e,n,i),o=Math.min(e,n,i);r>.9&&o<.1&&(e<.2&&(m[t+0]+=1),n<.2&&(m[t+2]+=1),i<.2&&(m[t+4]+=1))}}function l(t){f.push(t.x,t.y,t.z)}function c(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function u(){for(var t=new a,e=new a,n=new a,i=new a,o=new r,s=new r,l=new r,c=0,u=0;c<f.length;c+=9,u+=6){t.set(f[c+0],f[c+1],f[c+2]),e.set(f[c+3],f[c+4],f[c+5]),n.set(f[c+6],f[c+7],f[c+8]),o.set(m[u+0],m[u+1]),s.set(m[u+2],m[u+3]),l.set(m[u+4],m[u+5]),i.copy(t).add(e).add(n).divideScalar(3);var p=d(i);h(o,u+0,t,p),h(s,u+2,e,p),h(l,u+4,n,p)}}function h(t,e,n,i){i<0&&1===t.x&&(m[e]=t.x-1),0===n.x&&0===n.z&&(m[e]=i/2/Math.PI+.5)}function d(t){return Math.atan2(t.z,-t.x)}function p(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}H.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1,i=i||0;var f=[],m=[];!function(t){for(var n=new a,i=new a,r=new a,s=0;s<e.length;s+=3)c(e[s+0],n),c(e[s+1],i),c(e[s+2],r),o(n,i,r,t)}(i),function(t){for(var e=new a,n=0;n<f.length;n+=3)e.x=f[n+0],e.y=f[n+1],e.z=f[n+2],e.normalize().multiplyScalar(t),f[n+0]=e.x,f[n+1]=e.y,f[n+2]=e.z}(n),function(){for(var t=new a,e=0;e<f.length;e+=3){t.x=f[e+0],t.y=f[e+1],t.z=f[e+2];var n=d(t)/2/Math.PI+.5,i=p(t)/Math.PI+.5;m.push(n,1-i)}u(),s()}(),this.addAttribute("position",new z(f,3)),this.addAttribute("normal",new z(f.slice(),3)),this.addAttribute("uv",new z(m,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function un(t,e){C.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new hn(t,e)),this.mergeVertices()}function hn(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];cn.call(this,n,i,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function dn(t,e){C.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new pn(t,e)),this.mergeVertices()}function pn(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];cn.call(this,n,i,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function fn(t,e){C.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new mn(t,e)),this.mergeVertices()}function mn(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];cn.call(this,i,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function vn(t,e){C.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new gn(t,e)),this.mergeVertices()}function gn(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];cn.call(this,r,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function yn(t,e,n,i,r,o){C.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new bn(t,e,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function bn(t,e,n,i,o){function s(r){v=t.getPointAt(r/e,v);var o=u.normals[r],a=u.binormals[r];for(d=0;d<=i;d++){var s=d/i*Math.PI*2,l=Math.sin(s),c=-Math.cos(s);f.x=c*o.x+l*a.x,f.y=c*o.y+l*a.y,f.z=c*o.z+l*a.z,f.normalize(),y.push(f.x,f.y,f.z),p.x=v.x+n*f.x,p.y=v.y+n*f.y,p.z=v.z+n*f.z,g.push(p.x,p.y,p.z)}}function l(){for(d=1;d<=e;d++)for(h=1;h<=i;h++){var t=(i+1)*(d-1)+(h-1),n=(i+1)*d+(h-1),r=(i+1)*d+h,o=(i+1)*(d-1)+h;x.push(t,n,o),x.push(n,r,o)}}function c(){for(h=0;h<=e;h++)for(d=0;d<=i;d++)m.x=h/e,m.y=d/i,b.push(m.x,m.y)}H.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:o},e=e||64,n=n||1,i=i||8,o=o||!1;var u=t.computeFrenetFrames(e,o);this.tangents=u.tangents,this.normals=u.normals,this.binormals=u.binormals;var h,d,p=new a,f=new a,m=new r,v=new a,g=[],y=[],b=[],x=[];!function(){for(h=0;h<e;h++)s(h);s(!1===o?e:0),c(),l()}(),this.setIndex(x),this.addAttribute("position",new z(g,3)),this.addAttribute("normal",new z(y,3)),this.addAttribute("uv",new z(b,2))}function xn(t,e,n,i,r,o,a){C.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new wn(t,e,n,i,r,o)),this.mergeVertices()}function wn(t,e,n,i,r,o){function s(t,e,n,i,r){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}H.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var l,c,u=[],h=[],d=[],p=[],f=new a,m=new a,v=new a,g=new a,y=new a,b=new a,x=new a;for(l=0;l<=n;++l){var w=l/n*r*Math.PI*2;for(s(w,r,o,t,v),s(w+.01,r,o,t,g),b.subVectors(g,v),x.addVectors(g,v),y.crossVectors(b,x),x.crossVectors(y,b),y.normalize(),x.normalize(),c=0;c<=i;++c){var _=c/i*Math.PI*2,M=-e*Math.cos(_),E=e*Math.sin(_);f.x=v.x+(M*x.x+E*y.x),f.y=v.y+(M*x.y+E*y.y),f.z=v.z+(M*x.z+E*y.z),h.push(f.x,f.y,f.z),m.subVectors(f,v).normalize(),d.push(m.x,m.y,m.z),p.push(l/n),p.push(c/i)}}for(c=1;c<=n;c++)for(l=1;l<=i;l++){var S=(i+1)*(c-1)+(l-1),T=(i+1)*c+(l-1),A=(i+1)*c+l,C=(i+1)*(c-1)+l;u.push(S,T,C),u.push(T,A,C)}this.setIndex(u),this.addAttribute("position",new z(h,3)),this.addAttribute("normal",new z(d,3)),this.addAttribute("uv",new z(p,2))}function _n(t,e,n,i,r){C.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Mn(t,e,n,i,r)),this.mergeVertices()}function Mn(t,e,n,i,r){H.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,s,l=[],c=[],u=[],h=[],d=new a,p=new a,f=new a;for(o=0;o<=n;o++)for(s=0;s<=i;s++){var m=s/i*r,v=o/n*Math.PI*2;p.x=(t+e*Math.cos(v))*Math.cos(m),p.y=(t+e*Math.cos(v))*Math.sin(m),p.z=e*Math.sin(v),c.push(p.x,p.y,p.z),d.x=t*Math.cos(m),d.y=t*Math.sin(m),f.subVectors(p,d).normalize(),u.push(f.x,f.y,f.z),h.push(s/i),h.push(o/n)}for(o=1;o<=n;o++)for(s=1;s<=i;s++){var g=(i+1)*o+s-1,y=(i+1)*(o-1)+s-1,b=(i+1)*(o-1)+s,x=(i+1)*o+s;l.push(g,y,x),l.push(y,b,x)}this.setIndex(l),this.addAttribute("position",new z(c,3)),this.addAttribute("normal",new z(u,3)),this.addAttribute("uv",new z(h,2))}function En(t,e,n,i,r){var o,a;if(r===Jn(t,e,n,i)>0)for(o=e;o<n;o+=i)a=Yn(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=Yn(o,t[o],t[o+1],a);return a&&Un(a,a.next)&&(Xn(a),a=a.next),a}function Sn(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!Un(i,i.next)&&0!==Hn(i.prev,i,i.next))i=i.next;else{if(Xn(i),(i=e=i.prev)===i.next)break;n=!0}}while(n||i!==e);return e}function Tn(t,e,n,i,r,o,a){if(t){!a&&o&&In(t,i,r,o);for(var s,l,c=t;t.prev!==t.next;)if(s=t.prev,l=t.next,o?Cn(t,i,r,o):An(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),Xn(t),t=l.next,c=l.next;else if((t=l)===c){a?1===a?(t=Ln(t,e,n),Tn(t,e,n,i,r,o,2)):2===a&&Pn(t,e,n,i,r,o):Tn(Sn(t),e,n,i,r,o,1);break}}}function An(t){var e=t.prev,n=t,i=t.next;if(Hn(e,n,i)>=0)return!1;for(var r=t.next.next;r!==t.prev;){if(Fn(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&Hn(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Cn(t,e,n,i){var r=t.prev,o=t,a=t.next;if(Hn(r,o,a)>=0)return!1;for(var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=zn(s,l,e,n,i),d=zn(c,u,e,n,i),p=t.nextZ;p&&p.z<=d;){if(p!==t.prev&&p!==t.next&&Fn(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Hn(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(p=t.prevZ;p&&p.z>=h;){if(p!==t.prev&&p!==t.next&&Fn(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&Hn(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function Ln(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!Un(r,o)&&Vn(r,i,i.next,o)&&Wn(r,o)&&Wn(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),Xn(i),Xn(i.next),i=t=o),i=i.next}while(i!==t);return i}function Pn(t,e,n,i,r,o){var a=t;do{for(var s=a.next.next;s!==a.prev;){if(a.i!==s.i&&jn(a,s)){var l=qn(a,s);return a=Sn(a,a.next),l=Sn(l,l.next),Tn(a,e,n,i,r,o),void Tn(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function On(t,e,n,i){var r,o,a,s,l,c=[];for(r=0,o=e.length;r<o;r++)a=e[r]*i,s=r<o-1?e[r+1]*i:t.length,l=En(t,a,s,i,!1),l===l.next&&(l.steiner=!0),c.push(Bn(l));for(c.sort(Rn),r=0;r<c.length;r++)kn(c[r],n),n=Sn(n,n.next);return n}function Rn(t,e){return t.x-e.x}function kn(t,e){if(e=Dn(t,e)){var n=qn(e,t);Sn(n,n.next)}}function Dn(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,c=n,u=n.x,h=n.y,d=1/0;for(i=n.next;i!==c;)r>=i.x&&i.x>=u&&r!==i.x&&Fn(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&((l=Math.abs(o-i.y)/(r-i.x))<d||l===d&&i.x>n.x)&&Wn(i,t)&&(n=i,d=l),i=i.next;return n}function In(t,e,n,i){var r=t;do{null===r.z&&(r.z=zn(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Nn(r)}function Nn(t){var e,n,i,r,o,a,s,l,c=1;do{for(n=t,t=null,o=null,a=0;n;){for(a++,i=n,s=0,e=0;e<c&&(s++,i=i.nextZ);e++);for(l=c;s>0||l>0&&i;)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1);return t}function zn(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function Bn(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function Fn(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function jn(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!Gn(t,e)&&Wn(t,e)&&Wn(e,t)&&$n(t,e)}function Hn(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function Un(t,e){return t.x===e.x&&t.y===e.y}function Vn(t,e,n,i){return!!(Un(t,e)&&Un(n,i)||Un(t,i)&&Un(n,e))||Hn(t,e,n)>0!=Hn(t,e,i)>0&&Hn(n,i,t)>0!=Hn(n,i,e)>0}function Gn(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&Vn(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function Wn(t,e){return Hn(t.prev,t,t.next)<0?Hn(t,e,t.next)>=0&&Hn(t,t.prev,e)>=0:Hn(t,e,t.prev)<0||Hn(t,t.next,e)<0}function $n(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!=n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function qn(t,e){var n=new Zn(t.i,t.x,t.y),i=new Zn(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function Yn(t,e,n,i){var r=new Zn(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Xn(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Zn(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Jn(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}function Kn(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function Qn(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function ti(t,e){C.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new ei(t,e)),this.mergeVertices()}function ei(t,e){H.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],o=[],s=0,l=t.length;s<l;s++){var c=t[s];!function(t){function s(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}function l(t,e,n){var i,o,a,s=t.x-e.x,l=t.y-e.y,c=n.x-t.x,u=n.y-t.y,h=s*s+l*l,d=s*u-l*c;if(Math.abs(d)>Number.EPSILON){var p=Math.sqrt(h),f=Math.sqrt(c*c+u*u),m=e.x-l/p,v=e.y+s/p,g=n.x-u/f,y=n.y+c/f,b=((g-m)*u-(y-v)*c)/(s*u-l*c);i=m+s*b-t.x,o=v+l*b-t.y;var x=i*i+o*o;if(x<=2)return new r(i,o);a=Math.sqrt(x/2)}else{var w=!1;s>Number.EPSILON?c>Number.EPSILON&&(w=!0):s<-Number.EPSILON?c<-Number.EPSILON&&(w=!0):Math.sign(l)===Math.sign(u)&&(w=!0),w?(i=-l,o=s,a=Math.sqrt(h)):(i=s,o=l,a=Math.sqrt(h/2))}return new r(i/a,o/a)}function c(t,e){var n,i;for(X=t.length;--X>=0;){n=X,(i=X-1)<0&&(i=t.length-1);var r=0,o=g+2*M;for(r=0;r<o;r++){var a=$*r,s=$*(r+1);d(e+n+a,e+i+a,e+i+s,e+n+s)}}}function u(t,e,n){m.push(t),m.push(e),m.push(n)}function h(t,e,r){p(t),p(e),p(r);var o=i.length/3,a=S.generateTopUV(n,i,o-3,o-2,o-1);f(a[0]),f(a[1]),f(a[2])}function d(t,e,r,o){p(t),p(e),p(o),p(e),p(r),p(o);var a=i.length/3,s=S.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);f(s[0]),f(s[1]),f(s[3]),f(s[1]),f(s[2]),f(s[3])}function p(t){i.push(m[3*t+0]),i.push(m[3*t+1]),i.push(m[3*t+2])}function f(t){o.push(t.x),o.push(t.y)}var m=[],v=void 0!==e.curveSegments?e.curveSegments:12,g=void 0!==e.steps?e.steps:1,y=void 0!==e.depth?e.depth:100,b=void 0===e.bevelEnabled||e.bevelEnabled,x=void 0!==e.bevelThickness?e.bevelThickness:6,w=void 0!==e.bevelSize?e.bevelSize:x-2,_=void 0!==e.bevelOffset?e.bevelOffset:0,M=void 0!==e.bevelSegments?e.bevelSegments:3,E=e.extrudePath,S=void 0!==e.UVGenerator?e.UVGenerator:Ul;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),y=e.amount);var T,A,C,L,P,O=!1;E&&(T=E.getSpacedPoints(g),O=!0,b=!1,A=E.computeFrenetFrames(g,!1),C=new a,L=new a,P=new a),b||(M=0,x=0,w=0,_=0);var R,k,D,I=t.extractPoints(v),N=I.shape,z=I.holes;if(!Hl.isClockWise(N))for(N=N.reverse(),k=0,D=z.length;k<D;k++)R=z[k],Hl.isClockWise(R)&&(z[k]=R.reverse());var B=Hl.triangulateShape(N,z),F=N;for(k=0,D=z.length;k<D;k++)R=z[k],N=N.concat(R);for(var j,H,U,V,G,W,$=N.length,q=B.length,Y=[],X=0,Z=F.length,J=Z-1,K=X+1;X<Z;X++,J++,K++)J===Z&&(J=0),K===Z&&(K=0),Y[X]=l(F[X],F[J],F[K]);var Q,tt,et=[],nt=Y.concat();for(k=0,D=z.length;k<D;k++){for(R=z[k],Q=[],X=0,Z=R.length,J=Z-1,K=X+1;X<Z;X++,J++,K++)J===Z&&(J=0),K===Z&&(K=0),Q[X]=l(R[X],R[J],R[K]);et.push(Q),nt=nt.concat(Q)}for(j=0;j<M;j++){for(U=j/M,V=x*Math.cos(U*Math.PI/2),H=w*Math.sin(U*Math.PI/2)+_,X=0,Z=F.length;X<Z;X++)G=s(F[X],Y[X],H),u(G.x,G.y,-V);for(k=0,D=z.length;k<D;k++)for(R=z[k],Q=et[k],X=0,Z=R.length;X<Z;X++)G=s(R[X],Q[X],H),u(G.x,G.y,-V)}for(H=w+_,X=0;X<$;X++)G=b?s(N[X],nt[X],H):N[X],O?(L.copy(A.normals[0]).multiplyScalar(G.x),C.copy(A.binormals[0]).multiplyScalar(G.y),P.copy(T[0]).add(L).add(C),u(P.x,P.y,P.z)):u(G.x,G.y,0);for(tt=1;tt<=g;tt++)for(X=0;X<$;X++)G=b?s(N[X],nt[X],H):N[X],O?(L.copy(A.normals[tt]).multiplyScalar(G.x),C.copy(A.binormals[tt]).multiplyScalar(G.y),P.copy(T[tt]).add(L).add(C),u(P.x,P.y,P.z)):u(G.x,G.y,y/g*tt);for(j=M-1;j>=0;j--){for(U=j/M,V=x*Math.cos(U*Math.PI/2),H=w*Math.sin(U*Math.PI/2)+_,X=0,Z=F.length;X<Z;X++)G=s(F[X],Y[X],H),u(G.x,G.y,y+V);for(k=0,D=z.length;k<D;k++)for(R=z[k],Q=et[k],X=0,Z=R.length;X<Z;X++)G=s(R[X],Q[X],H),O?u(G.x,G.y+T[g-1].y,T[g-1].x+V):u(G.x,G.y,y+V)}!function(){var t=i.length/3;if(b){var e=0,r=$*e;for(X=0;X<q;X++)W=B[X],h(W[2]+r,W[1]+r,W[0]+r);for(e=g+2*M,r=$*e,X=0;X<q;X++)W=B[X],h(W[0]+r,W[1]+r,W[2]+r)}else{for(X=0;X<q;X++)W=B[X],h(W[2],W[1],W[0]);for(X=0;X<q;X++)W=B[X],h(W[0]+$*g,W[1]+$*g,W[2]+$*g)}n.addGroup(t,i.length/3-t,0)}(),function(){var t=i.length/3,e=0;for(c(F,e),e+=F.length,k=0,D=z.length;k<D;k++)R=z[k],c(R,e),e+=R.length;n.addGroup(t,i.length/3-t,1)}()}(c)}this.addAttribute("position",new z(i,3)),this.addAttribute("uv",new z(o,2)),this.computeVertexNormals()}function ni(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function ii(t,e){C.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new ri(t,e)),this.mergeVertices()}function ri(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new C;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),ei.call(this,i,e),this.type="TextBufferGeometry"}function oi(t,e,n,i,r,o,a){C.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new ai(t,e,n,i,r,o,a)),this.mergeVertices()}function ai(t,e,n,i,r,o,s){H.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:s},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,s=void 0!==s?s:Math.PI;var l,c,u=Math.min(o+s,Math.PI),h=0,d=[],p=new a,f=new a,m=[],v=[],g=[],y=[];for(c=0;c<=n;c++){var b=[],x=c/n,w=0;for(0==c&&0==o?w=.5/e:c==n&&u==Math.PI&&(w=-.5/e),l=0;l<=e;l++){var _=l/e;p.x=-t*Math.cos(i+_*r)*Math.sin(o+x*s),p.y=t*Math.cos(o+x*s),p.z=t*Math.sin(i+_*r)*Math.sin(o+x*s),v.push(p.x,p.y,p.z),f.copy(p).normalize(),g.push(f.x,f.y,f.z),y.push(_+w,1-x),b.push(h++)}d.push(b)}for(c=0;c<n;c++)for(l=0;l<e;l++){var M=d[c][l+1],E=d[c][l],S=d[c+1][l],T=d[c+1][l+1];(0!==c||o>0)&&m.push(M,E,T),(c!==n-1||u<Math.PI)&&m.push(E,S,T)}this.setIndex(m),this.addAttribute("position",new z(v,3)),this.addAttribute("normal",new z(g,3)),this.addAttribute("uv",new z(y,2))}function si(t,e,n,i,r,o){C.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new li(t,e,n,i,r,o)),this.mergeVertices()}function li(t,e,n,i,o,s){H.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:o,thetaLength:s},t=t||.5,e=e||1,o=void 0!==o?o:0,s=void 0!==s?s:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var l,c,u,h=[],d=[],p=[],f=[],m=t,v=(e-t)/i,g=new a,y=new r;for(c=0;c<=i;c++){for(u=0;u<=n;u++)l=o+u/n*s,g.x=m*Math.cos(l),g.y=m*Math.sin(l),d.push(g.x,g.y,g.z),p.push(0,0,1),y.x=(g.x/e+1)/2,y.y=(g.y/e+1)/2,f.push(y.x,y.y);m+=v}for(c=0;c<i;c++){var b=c*(n+1);for(u=0;u<n;u++){l=u+b;var x=l,w=l+n+1,_=l+n+2,M=l+1;h.push(x,w,M),h.push(w,_,M)}}this.setIndex(h),this.addAttribute("position",new z(d,3)),this.addAttribute("normal",new z(p,3)),this.addAttribute("uv",new z(f,2))}function ci(t,e,n,i){C.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new ui(t,e,n,i)),this.mergeVertices()}function ui(t,e,n,i){H.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=hl.clamp(i,0,2*Math.PI);var o,s,l,c=[],u=[],h=[],d=1/e,p=new a,f=new r;for(s=0;s<=e;s++){var m=n+s*d*i,v=Math.sin(m),g=Math.cos(m);for(l=0;l<=t.length-1;l++)p.x=t[l].x*v,p.y=t[l].y,p.z=t[l].x*g,u.push(p.x,p.y,p.z),f.x=s/e,f.y=l/(t.length-1),h.push(f.x,f.y)}for(s=0;s<e;s++)for(l=0;l<t.length-1;l++){o=l+s*t.length;var y=o,b=o+t.length,x=o+t.length+1,w=o+1;c.push(y,b,w),c.push(b,x,w)}if(this.setIndex(c),this.addAttribute("position",new z(u,3)),this.addAttribute("uv",new z(h,2)),this.computeVertexNormals(),i===2*Math.PI){var _=this.attributes.normal.array,M=new a,E=new a,S=new a;for(o=e*t.length*3,s=0,l=0;s<t.length;s++,l+=3)M.x=_[l+0],M.y=_[l+1],M.z=_[l+2],E.x=_[o+l+0],E.y=_[o+l+1],E.z=_[o+l+2],S.addVectors(M,E).normalize(),_[l+0]=_[o+l+0]=S.x,_[l+1]=_[o+l+1]=S.y,_[l+2]=_[o+l+2]=S.z}}function hi(t,e){C.call(this),this.type="ShapeGeometry","object"==typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new di(t,e)),this.mergeVertices()}function di(t,e){function n(t){var n,s,c,u=r.length/3,h=t.extractPoints(e),d=h.shape,p=h.holes;for(!1===Hl.isClockWise(d)&&(d=d.reverse()),n=0,s=p.length;n<s;n++)c=p[n],!0===Hl.isClockWise(c)&&(p[n]=c.reverse());var f=Hl.triangulateShape(d,p);for(n=0,s=p.length;n<s;n++)c=p[n],d=d.concat(c);for(n=0,s=d.length;n<s;n++){var m=d[n];r.push(m.x,m.y,0),o.push(0,0,1),a.push(m.x,m.y)}for(n=0,s=f.length;n<s;n++){var v=f[n],g=v[0]+u,y=v[1]+u,b=v[2]+u;i.push(g,y,b),l+=3}}H.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var i=[],r=[],o=[],a=[],s=0,l=0;if(!1===Array.isArray(t))n(t);else for(var c=0;c<t.length;c++)n(t[c]),this.addGroup(s,l,c),s+=l,l=0;this.setIndex(i),this.addAttribute("position",new z(r,3)),this.addAttribute("normal",new z(o,3)),this.addAttribute("uv",new z(a,2))}function pi(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function fi(t,e){H.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,o,a=[],s=Math.cos(hl.DEG2RAD*e),l=[0,0],c={},u=["a","b","c"];t.isBufferGeometry?(o=new C,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[u[v]],i=m[u[(v+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),r=l[0]+","+l[1],void 0===c[r]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var g=c[r];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new z(a,3))}function mi(t,e,n,i,r,o,a,s){C.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new vi(t,e,n,i,r,o,a,s)),this.mergeVertices()}function vi(t,e,n,i,o,s,l,c){function u(n){var o,s,u,g=new r,x=new a,w=0,_=!0===n?t:e,M=!0===n?1:-1;for(s=v,o=1;o<=i;o++)p.push(0,y*M,0),f.push(0,M,0),m.push(.5,.5),v++;for(u=v,o=0;o<=i;o++){var E=o/i,S=E*c+l,T=Math.cos(S),A=Math.sin(S);x.x=_*A,x.y=y*M,x.z=_*T,p.push(x.x,x.y,x.z),f.push(0,M,0),g.x=.5*T+.5,g.y=.5*A*M+.5,m.push(g.x,g.y),v++}for(o=0;o<i;o++){var C=s+o,L=u+o;!0===n?d.push(L,L+1,C):d.push(L+1,L,C),w+=3}h.addGroup(b,w,!0===n?1:2),b+=w}H.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:o,openEnded:s,thetaStart:l,thetaLength:c};var h=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,o=Math.floor(o)||1,s=void 0!==s&&s,l=void 0!==l?l:0,c=void 0!==c?c:2*Math.PI;var d=[],p=[],f=[],m=[],v=0,g=[],y=n/2,b=0;!function(){var r,s,u=new a,x=new a,w=0,_=(e-t)/n;for(s=0;s<=o;s++){var M=[],E=s/o,S=E*(e-t)+t;for(r=0;r<=i;r++){var T=r/i,A=T*c+l,C=Math.sin(A),L=Math.cos(A);x.x=S*C,x.y=-E*n+y,x.z=S*L,p.push(x.x,x.y,x.z),u.set(C,_,L).normalize(),f.push(u.x,u.y,u.z),m.push(T,1-E),M.push(v++)}g.push(M)}for(r=0;r<i;r++)for(s=0;s<o;s++){var P=g[s][r],O=g[s+1][r],R=g[s+1][r+1],k=g[s][r+1];d.push(P,O,k),d.push(O,R,k),w+=6}h.addGroup(b,w,0),b+=w}(),!1===s&&(t>0&&u(!0),e>0&&u(!1)),this.setIndex(d),this.addAttribute("position",new z(p,3)),this.addAttribute("normal",new z(f,3)),this.addAttribute("uv",new z(m,2))}function gi(t,e,n,i,r,o,a){mi.call(this,0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function yi(t,e,n,i,r,o,a){vi.call(this,0,t,e,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function bi(t,e,n,i){C.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new xi(t,e,n,i)),this.mergeVertices()}function xi(t,e,n,i){H.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var o,s,l=[],c=[],u=[],h=[],d=new a,p=new r;for(c.push(0,0,0),u.push(0,0,1),h.push(.5,.5),s=0,o=3;s<=e;s++,o+=3){var f=n+s/e*i;d.x=t*Math.cos(f),d.y=t*Math.sin(f),c.push(d.x,d.y,d.z),u.push(0,0,1),p.x=(c[o]/t+1)/2,p.y=(c[o+1]/t+1)/2,h.push(p.x,p.y)}for(o=1;o<=e;o++)l.push(o,o+1,0);this.setIndex(l),this.addAttribute("position",new z(c,3)),this.addAttribute("normal",new z(u,3)),this.addAttribute("uv",new z(h,2))}function wi(t){$.call(this),this.type="ShadowMaterial",this.color=new w(0),this.transparent=!0,this.setValues(t)}function _i(t){q.call(this,t),this.type="RawShaderMaterial"}function Mi(t){$.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new w(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ei(t){Mi.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Si(t){$.call(this),this.type="MeshPhongMaterial",this.color=new w(16777215),this.specular=new w(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ia,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ti(t){Si.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function Ai(t){$.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Ci(t){$.call(this),this.type="MeshLambertMaterial",this.color=new w(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new w(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Ia,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Li(t){$.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new w(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new r(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Pi(t){Ye.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}function Oi(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Ri(t,e,n,i){Oi.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function ki(t,e,n,i){Oi.call(this,t,e,n,i)}function Di(t,e,n,i){Oi.call(this,t,e,n,i)}function Ii(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Wl.convertArray(e,this.TimeBufferType),this.values=Wl.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function Ni(t,e,n){Ii.call(this,t,e,n)}function zi(t,e,n,i){Ii.call(this,t,e,n,i)}function Bi(t,e,n,i){Ii.call(this,t,e,n,i)}function Fi(t,e,n,i){Oi.call(this,t,e,n,i)}function ji(t,e,n,i){Ii.call(this,t,e,n,i)}function Hi(t,e,n,i){Ii.call(this,t,e,n,i)}function Ui(t,e,n,i){Ii.call(this,t,e,n,i)}function Vi(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=hl.generateUUID(),this.duration<0&&this.resetDuration()}function Gi(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Bi;case"vector":case"vector2":case"vector3":case"vector4":return Ui;case"color":return zi;case"quaternion":return ji;case"bool":case"boolean":return Ni;case"string":return Hi}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function Wi(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=Gi(t.type);if(void 0===t.times){var n=[],i=[];Wl.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}function $i(t,e,n){var i=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}function qi(t){this.manager=void 0!==t?t:ql}function Yi(t){this.manager=void 0!==t?t:ql}function Xi(t){this.manager=void 0!==t?t:ql,this._parser=null}function Zi(t){this.manager=void 0!==t?t:ql,this._parser=null}function Ji(t){this.manager=void 0!==t?t:ql}function Ki(t){this.manager=void 0!==t?t:ql}function Qi(t){this.manager=void 0!==t?t:ql}function tr(){this.type="Curve",this.arcLengthDivisions=200}function er(t,e,n,i,r,o,a,s){tr.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function nr(t,e,n,i,r,o){er.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function ir(){function t(t,o,a,s){e=t,n=a,i=-3*t+3*o-2*a-s,r=2*t-2*o+a+s}var e=0,n=0,i=0,r=0;return{initCatmullRom:function(e,n,i,r,o){t(n,i,o*(i-e),o*(r-n))},initNonuniformCatmullRom:function(e,n,i,r,o,a,s){var l=(n-e)/o-(i-e)/(o+a)+(i-n)/a,c=(i-n)/a-(r-n)/(a+s)+(r-i)/s;l*=a,c*=a,t(n,i,l,c)},calc:function(t){var o=t*t;return e+n*t+i*o+r*(o*t)}}}function rr(t,e,n,i){tr.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function or(t,e,n,i,r){var o=.5*(i-e),a=.5*(r-n),s=t*t;return(2*n-2*i+o+a)*(t*s)+(-3*n+3*i-2*o-a)*s+o*t+n}function ar(t,e){var n=1-t;return n*n*e}function sr(t,e){return 2*(1-t)*t*e}function lr(t,e){return t*t*e}function cr(t,e,n,i){return ar(t,e)+sr(t,n)+lr(t,i)}function ur(t,e){var n=1-t;return n*n*n*e}function hr(t,e){var n=1-t;return 3*n*n*t*e}function dr(t,e){return 3*(1-t)*t*t*e}function pr(t,e){return t*t*t*e}function fr(t,e,n,i,r){return ur(t,e)+hr(t,n)+dr(t,i)+pr(t,r)}function mr(t,e,n,i){tr.call(this),this.type="CubicBezierCurve",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r,this.v3=i||new r}function vr(t,e,n,i){tr.call(this),this.type="CubicBezierCurve3",this.v0=t||new a,this.v1=e||new a,this.v2=n||new a,this.v3=i||new a}function gr(t,e){tr.call(this),this.type="LineCurve",this.v1=t||new r,this.v2=e||new r}function yr(t,e){tr.call(this),this.type="LineCurve3",this.v1=t||new a,this.v2=e||new a}function br(t,e,n){tr.call(this),this.type="QuadraticBezierCurve",this.v0=t||new r,this.v1=e||new r,this.v2=n||new r}function xr(t,e,n){tr.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new a,this.v1=e||new a,this.v2=n||new a}function wr(t){tr.call(this),this.type="SplineCurve",this.points=t||[]}function _r(){tr.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Mr(t){_r.call(this),this.type="Path",this.currentPoint=new r,t&&this.setFromPoints(t)}function Er(t){Mr.call(this,t),this.uuid=hl.generateUUID(),this.type="Shape",this.holes=[]}function Sr(t,e){A.call(this),this.type="Light",this.color=new w(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function Tr(t,e,n){Sr.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(A.DefaultUp),this.updateMatrix(),this.groundColor=new w(e)}function Ar(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new r(512,512),this.map=null,this.matrix=new y}function Cr(){Ar.call(this,new Oe(50,1,.5,500))}function Lr(t,e,n,i,r,o){Sr.call(this,t,e),this.type="SpotLight",this.position.copy(A.DefaultUp),this.updateMatrix(),this.target=new A,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new Cr}function Pr(t,e,n,i){Sr.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new Ar(new Oe(90,1,.5,500))}function Or(t,e,n,i,r,o){Pe.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function Rr(){Ar.call(this,new Or(-5,5,5,-5,.5,500))}function kr(t,e){Sr.call(this,t,e),this.type="DirectionalLight",this.position.copy(A.DefaultUp),this.updateMatrix(),this.target=new A,this.shadow=new Rr}function Dr(t,e){Sr.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function Ir(t,e,n,i){Sr.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function Nr(t){this.manager=void 0!==t?t:ql,this.textures={}}function zr(){H.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function Br(t,e,n,i){"number"==typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),L.call(this,t,e,n),this.meshPerAttribute=i||1}function Fr(t){this.manager=void 0!==t?t:ql}function jr(t){this.manager=void 0!==t?t:ql,this.resourcePath=""}function Hr(t){"undefined"==typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"==typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:ql,this.options=void 0}function Ur(){this.type="ShapePath",this.color=new w,this.subPaths=[],this.currentPath=null}function Vr(t){this.type="Font",this.data=t}function Gr(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[],s=0,l=0,c=0;c<i.length;c++){var u=i[c];if("\n"===u)s=0,l-=o;else{var h=Wr(u,r,s,l,n);s+=h.offsetX,a.push(h.path)}}return a}function Wr(t,e,n,i,r){var o=r.glyphs[t]||r.glyphs["?"];if(o){var a,s,l,c,u,h,d,p,f=new Ur;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){var y=m[v++];switch(y){case"m":a=m[v++]*e+n,s=m[v++]*e+i,f.moveTo(a,s);break;case"l":a=m[v++]*e+n,s=m[v++]*e+i,f.lineTo(a,s);break;case"q":l=m[v++]*e+n,c=m[v++]*e+i,u=m[v++]*e+n,h=m[v++]*e+i,f.quadraticCurveTo(u,h,l,c);break;case"b":l=m[v++]*e+n,c=m[v++]*e+i,u=m[v++]*e+n,h=m[v++]*e+i,d=m[v++]*e+n,p=m[v++]*e+i,f.bezierCurveTo(u,h,d,p,l,c)}}return{offsetX:o.ha*e,path:f}}}function $r(t){this.manager=void 0!==t?t:ql}function qr(){}function Yr(t){this.manager=void 0!==t?t:ql}function Xr(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new a)}function Zr(t,e){Sr.call(this,void 0,e),this.sh=void 0!==t?t:new Xr}function Jr(t,e,n){Zr.call(this,void 0,n);var i=(new w).set(t),r=(new w).set(e),o=new a(i.r,i.g,i.b),s=new a(r.r,r.g,r.b),l=Math.sqrt(Math.PI),c=l*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(s).multiplyScalar(l),this.sh.coefficients[1].copy(o).sub(s).multiplyScalar(c)}function Kr(t,e){Zr.call(this,void 0,e);var n=(new w).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Qr(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Oe,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Oe,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}function to(t,e,n,i){A.call(this),this.type="CubeCamera";var r=new Oe(sc,lc,t,e);r.up.set(0,-1,0),r.lookAt(new a(1,0,0)),this.add(r);var o=new Oe(sc,lc,t,e);o.up.set(0,-1,0),o.lookAt(new a(-1,0,0)),this.add(o);var s=new Oe(sc,lc,t,e);s.up.set(0,0,1),s.lookAt(new a(0,1,0)),this.add(s);var l=new Oe(sc,lc,t,e);l.up.set(0,0,-1),l.lookAt(new a(0,-1,0)),this.add(l);var c=new Oe(sc,lc,t,e);c.up.set(0,-1,0),c.lookAt(new a(0,0,1)),this.add(c);var u=new Oe(sc,lc,t,e);u.up.set(0,-1,0),u.lookAt(new a(0,0,-1)),this.add(u),i=i||{format:bs,magFilter:is,minFilter:is},this.renderTarget=new d(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,a=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,o),t.setRenderTarget(i,2),t.render(e,s),t.setRenderTarget(i,3),t.render(e,l),t.setRenderTarget(i,4),t.render(e,c),i.texture.generateMipmaps=a,t.setRenderTarget(i,5),t.render(e,u),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,i);t.setRenderTarget(r)}}function eo(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function no(){A.call(this),this.type="AudioListener",this.context=ac.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function io(t){A.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function ro(t){io.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function oo(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function ao(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}function so(t,e,n){var i=n||lo.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function lo(t,e,n){this.path=e,this.parsedPath=n||lo.parseTrackName(e),this.node=lo.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function co(){this.uuid=hl.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function uo(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,o=new Array(r),a={endingStart:Zs,endingEnd:Zs},s=0;s!==r;++s){var l=i[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=Xs,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function ho(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function po(t){"string"==typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function fo(t,e,n){je.call(this,t,e),this.meshPerAttribute=n||1}function mo(t,e,n,i){this.ray=new Y(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function vo(t,e){return t.distance-e.distance}function go(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,o=0,a=r.length;o<a;o++)go(r[o],e,n,!0)}function yo(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function bo(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function xo(t,e){this.min=void 0!==t?t:new r(1/0,1/0),this.max=void 0!==e?e:new r(-1/0,-1/0)}function wo(t,e){this.start=void 0!==t?t:new a,this.end=void 0!==e?e:new a}function _o(t){A.call(this),this.material=t,this.render=function(){}}function Mo(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new H,c=new z(2*a*3,3);l.addAttribute("position",c),Ze.call(this,l,new Ye({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Eo(t,e){A.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new H,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1;r<32;r++,o++){var a=r/32*Math.PI*2,s=o/32*Math.PI*2;i.push(Math.cos(a),Math.sin(a),1,Math.cos(s),Math.sin(s),1)}n.addAttribute("position",new z(i,3));var l=new Ye({fog:!1});this.cone=new Ze(n,l),this.add(this.cone),this.update()}function So(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,So(t.children[n]));return e}function To(t){for(var e=So(t),n=new H,i=[],r=[],o=new w(0,0,1),a=new w(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new z(i,3)),n.addAttribute("color",new z(r,3));var c=new Ye({vertexColors:ra,depthTest:!1,depthWrite:!1,transparent:!0});Ze.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function Ao(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new ai(e,4,2),r=new Z({wireframe:!0,fog:!1});J.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function Co(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],i=new H;i.addAttribute("position",new z(n,3)),i.computeBoundingSphere();var r=new Ye({fog:!1});Xe.call(this,i,r);var o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new H;a.addAttribute("position",new z(o,3)),a.computeBoundingSphere(),this.add(new J(a,new Z({side:ta,fog:!1}))),this.update()}function Lo(t,e,n){A.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new pn(e);i.rotateY(.5*Math.PI),this.material=new Z({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=ra);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new L(o,3)),this.add(new J(i,this.material)),this.update()}function Po(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},i=new q({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new ai(1,32,16);J.call(this,r,i),this.onBeforeRender()}function Oo(t,e,n,i){t=t||10,e=e||10,n=new w(void 0!==n?n:4473924),i=new w(void 0!==i?i:8947848);for(var r=e/2,o=t/e,a=t/2,s=[],l=[],c=0,u=0,h=-a;c<=e;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=c===r?n:i;d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3}var p=new H;p.addAttribute("position",new z(s,3)),p.addAttribute("color",new z(l,3));var f=new Ye({vertexColors:ra});Ze.call(this,p,f)}function Ro(t,e,n,i,r,o){t=t||10,e=e||16,n=n||8,i=i||64,r=new w(void 0!==r?r:4473924),o=new w(void 0!==o?o:8947848);var a,s,l,c,u,h,d,p=[],f=[];for(c=0;c<=e;c++)l=c/e*(2*Math.PI),a=Math.sin(l)*t,s=Math.cos(l)*t,p.push(0,0,0),p.push(a,0,s),d=1&c?r:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?r:o,h=t-t/n*c,u=0;u<i;u++)l=u/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),l=(u+1)/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new H;m.addAttribute("position",new z(p,3)),m.addAttribute("color",new z(f,3));var v=new Ye({vertexColors:ra});Ze.call(this,m,v)}function ko(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new H,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));r.addAttribute("position",new L(a,3));var s=new Ye({color:65280}),l=new Ye({color:16776960});Xe.call(this,r,[l,s]),this.update()}function Do(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new H,c=new z(2*a*3,3);l.addAttribute("position",c),Ze.call(this,l,new Ye({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function Io(t,e,n){A.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new H;i.addAttribute("position",new z([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new Ye({fog:!1});this.lightPlane=new Xe(i,r),this.add(this.lightPlane),i=new H,i.addAttribute("position",new z([0,0,0,0,0,1],3)),this.targetLine=new Xe(i,r),this.add(this.targetLine),this.update()}function No(t){function e(t,e,i){n(t,i),n(e,i)}function n(t,e){o.push(0,0,0),a.push(e.r,e.g,e.b),void 0===s[t]&&(s[t]=[]),s[t].push(o.length/3-1)}var i=new H,r=new Ye({color:16777215,vertexColors:ia}),o=[],a=[],s={},l=new w(16755200),c=new w(16711680),u=new w(43775),h=new w(16777215),d=new w(3355443);e("n1","n2",l),e("n2","n4",l),e("n4","n3",l),e("n3","n1",l),e("f1","f2",l),e("f2","f4",l),e("f4","f3",l),e("f3","f1",l),e("n1","f1",l),e("n2","f2",l),e("n3","f3",l),e("n4","f4",l),e("p","n1",c),e("p","n2",c),e("p","n3",c),e("p","n4",c),e("u1","u2",u),e("u2","u3",u),e("u3","u1",u),e("c","t",h),e("p","c",d),e("cn1","cn2",d),e("cn3","cn4",d),e("cf1","cf2",d),e("cf3","cf4",d),i.addAttribute("position",new z(o,3)),i.addAttribute("color",new z(a,3)),Ze.call(this,i,r),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=s,this.update()}function zo(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new H;r.setIndex(new L(n,1)),r.addAttribute("position",new L(i,3)),Ze.call(this,r,new Ye({color:e})),this.matrixAutoUpdate=!1,this.update()}function Bo(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new H;o.setIndex(new L(i,1)),o.addAttribute("position",new z(r,3)),Ze.call(this,o,new Ye({color:n})),this.geometry.computeBoundingSphere()}function Fo(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new H;o.addAttribute("position",new z(r,3)),o.computeBoundingSphere(),Xe.call(this,o,new Ye({color:i}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new H;s.addAttribute("position",new z(a,3)),s.computeBoundingSphere(),this.add(new J(s,new Z({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function jo(t,e,n,i,r,o){A.call(this),void 0===t&&(t=new a(0,0,1)),void 0===e&&(e=new a(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===cc&&(cc=new H,cc.addAttribute("position",new z([0,0,0,0,1,0],3)),uc=new vi(0,.5,1,5,1),uc.translate(0,-.5,0)),this.position.copy(e),this.line=new Xe(cc,new Ye({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new J(uc,new Z({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}function Ho(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new H;i.addAttribute("position",new z(e,3)),i.addAttribute("color",new z(n,3));var r=new Ye({vertexColors:ra});Ze.call(this,i,r)}function Uo(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Vo(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),rr.call(this,t),this.type="catmullrom",this.closed=!0}function Go(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),rr.call(this,t),this.type="catmullrom"}function Wo(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),rr.call(this,t),this.type="catmullrom"}n.d(e,"B",function(){return ta}),n.d(e,"G",function(){return V}),n.d(e,"E",function(){return L}),n.d(e,"D",function(){return H}),n.d(e,"p",function(){return $l}),n.d(e,"A",function(){return nn}),n.d(e,"g",function(){return bi}),n.d(e,"z",function(){return w}),n.d(e,"t",function(){return ct}),n.d(e,"f",function(){return ea}),n.d(e,"O",function(){return S}),n.d(e,"u",function(){return i}),n.d(e,"U",function(){return g}),n.d(e,"i",function(){return C}),n.d(e,"w",function(){return is}),n.d(e,"L",function(){return qo}),n.d(e,"l",function(){return hl}),n.d(e,"I",function(){return y}),n.d(e,"h",function(){return J}),n.d(e,"k",function(){return Z}),n.d(e,"j",function(){return Uo}),n.d(e,"e",function(){return Si}),n.d(e,"R",function(){return ts}),n.d(e,"a",function(){return A}),n.d(e,"N",function(){return Or}),n.d(e,"M",function(){return Oe}),n.d(e,"K",function(){return W}),n.d(e,"J",function(){return o}),n.d(e,"V",function(){return $o}),n.d(e,"s",function(){return xs}),n.d(e,"r",function(){return bs}),n.d(e,"b",function(){return mo}),n.d(e,"d",function(){return si}),n.d(e,"P",function(){return Fe}),n.d(e,"F",function(){return yl}),n.d(e,"H",function(){return q}),n.d(e,"m",function(){return Er}),n.d(e,"n",function(){return hi}),n.d(e,"C",function(){return ai}),n.d(e,"y",function(){return Ve}),n.d(e,"x",function(){return Ue}),n.d(e,"Q",function(){return Qr}),n.d(e,"q",function(){return l}),n.d(e,"c",function(){return r}),n.d(e,"o",function(){return a}),n.d(e,"v",function(){return tn}),n.d(e,"S",function(){return u}),n.d(e,"T",function(){return Ne}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype==0&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}}(),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var i=n.slice(0),r=0,o=i.length;r<o;r++)i[r].call(this,t)}}}});var $o="105",qo={LEFT:0,MIDDLE:1,RIGHT:2},Yo=0,Xo=1,Zo=2,Jo=1,Ko=2,Qo=0,ta=1,ea=2,na=0,ia=1,ra=2,oa=0,aa=1,sa=2,la=3,ca=4,ua=5,ha=100,da=101,pa=102,fa=103,ma=104,va=200,ga=201,ya=202,ba=203,xa=204,wa=205,_a=206,Ma=207,Ea=208,Sa=209,Ta=210,Aa=0,Ca=1,La=2,Pa=3,Oa=4,Ra=5,ka=6,Da=7,Ia=0,Na=1,za=2,Ba=0,Fa=1,ja=2,Ha=3,Ua=4,Va=5,Ga=301,Wa=302,$a=303,qa=304,Ya=305,Xa=306,Za=307,Ja=1e3,Ka=1001,Qa=1002,ts=1003,es=1004,ns=1005,is=1006,rs=1007,os=1008,as=1009,ss=1010,ls=1011,cs=1012,us=1013,hs=1014,ds=1015,ps=1016,fs=1017,ms=1018,vs=1019,gs=1020,ys=1021,bs=1022,xs=1023,ws=1024,_s=1025,Ms=1026,Es=1027,Ss=1028,Ts=33776,As=33777,Cs=33778,Ls=33779,Ps=35840,Os=35841,Rs=35842,ks=35843,Ds=36196,Is=37808,Ns=37809,zs=37810,Bs=37811,Fs=37812,js=37813,Hs=37814,Us=37815,Vs=37816,Gs=37817,Ws=37818,$s=37819,qs=37820,Ys=37821,Xs=2201,Zs=2400,Js=0,Ks=1,Qs=2,tl=3e3,el=3001,nl=3007,il=3002,rl=3004,ol=3005,al=3006,sl=3200,ll=3201,cl=0,ul=1,hl={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255]).toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*(3-2*t)},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e))*t*t*(t*(6*t-15)+10)},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*hl.DEG2RAD},radToDeg:function(t){return t*hl.RAD2DEG},isPowerOfTwo:function(t){return 0==(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};Object.defineProperties(r.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(r.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}}),Object.assign(o,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,o,a){var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||l!==d||c!==p){var m=1-a,v=s*h+l*d+c*p+u*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*g;if(s=s*m+h*w,l=l*m+d*w,c=c*m+p*w,u=u*m+f*w,m===1-a){var _=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=_,l*=_,c*=_,u*=_}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}}),Object.defineProperties(o.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(o.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);return"XYZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"YXZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"ZXY"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"ZYX"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"YZX"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p):"XZY"===o&&(this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],h=n[10],d=i+s+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(u-l)*e,this._y=(o-c)*e,this._z=(a-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(u-l)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+c)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(o-c)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(l+u)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(a-r)/e,this._x=(o+c)/e,this._y=(l+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=t.dot(e)+1;return n<1e-6?(n=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=n):(this._x=0,this._y=-t.z,this._z=t.y,this._w=n)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=n),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(hl.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-e;return this._w=l*o+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize()}var c=Math.sqrt(s),u=Math.atan2(c,a),h=Math.sin((1-e)*u)/c,d=Math.sin(e*u)/c;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(a.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new o;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new o;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new a;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new a;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(hl.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(s.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,o,a,s,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new a;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],b=i[7],x=i[2],w=i[5],_=i[8];return r[0]=o*f+a*g+s*x,r[3]=o*m+a*y+s*w,r[6]=o*v+a*b+s*_,r[1]=l*f+c*g+u*x,r[4]=l*m+c*y+u*w,r[7]=l*v+c*b+u*_,r[2]=h*f+d*g+p*x,r[5]=h*m+d*y+p*w,r[8]=h*v+d*b+p*_,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=d*l-c*h,f=c*u-d*s,m=h*s-l*u,v=r*p+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=p*y,i[1]=(a*h-d*o)*y,i[2]=(c*o-a*l)*y,i[3]=f*y,i[4]=(d*r-a*u)*y,i[5]=(a*s-c*r)*y,i[6]=m*y,i[7]=(o*u-h*r)*y,i[8]=(l*r-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var dl,pl={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===dl&&(dl=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),dl.width=t.width,dl.height=t.height;var n=dl.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=dl}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},fl=0;l.DEFAULT_IMAGE=void 0,l.DEFAULT_MAPPING=300,l.prototype=Object.assign(Object.create(i.prototype),{constructor:l,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=hl.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,a=i.length;o<a;o++)r.push(pl.getDataURL(i[o]))}else r=pl.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case Ja:t.x=t.x-Math.floor(t.x);break;case Ka:t.x=t.x<0?0:1;break;case Qa:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case Ja:t.y=t.y-Math.floor(t.y);break;case Ka:t.y=t.y<0?0:1;break;case Qa:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(l.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(c.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,o=t.elements,a=o[0],s=o[4],l=o[8],c=o[1],u=o[5],h=o[9],d=o[2],p=o[6],f=o[10];if(Math.abs(s-c)<.01&&Math.abs(l-d)<.01&&Math.abs(h-p)<.01){if(Math.abs(s+c)<.1&&Math.abs(l+d)<.1&&Math.abs(h+p)<.1&&Math.abs(a+u+f-3)<.1)return this.set(1,0,0,0),this;e=Math.PI;var m=(a+1)/2,v=(u+1)/2,g=(f+1)/2,y=(s+c)/4,b=(l+d)/4,x=(h+p)/4;return m>v&&m>g?m<.01?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(m),i=y/n,r=b/n):v>g?v<.01?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(v),n=y/i,r=x/i):g<.01?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=b/r,i=x/r),this.set(n,i,r,e),this}var w=Math.sqrt((p-h)*(p-h)+(l-d)*(l-d)+(c-s)*(c-s));return Math.abs(w)<.001&&(w=1),this.x=(p-h)/w,this.y=(l-d)/w,this.z=(c-s)/w,this.w=Math.acos((a+u+f-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new c,e=new c),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),u.prototype=Object.assign(Object.create(i.prototype),{constructor:u,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),h.prototype=Object.assign(Object.create(u.prototype),{constructor:h,isWebGLMultisampleRenderTarget:!0,copy:function(t){return u.prototype.copy.call(this,t),this.samples=t.samples,this}}),d.prototype=Object.create(u.prototype),d.prototype.constructor=d,d.prototype.isWebGLRenderTargetCube=!0,p.prototype=Object.create(l.prototype),p.prototype.constructor=p,p.prototype.isDataTexture=!0,Object.assign(f.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],u=t[s+1],h=t[s+2];c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),u=t.getY(s),h=t.getZ(s);c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new a;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new a),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new a),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){function t(t){var o=t.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(n=0,i=a.length;n<i;n++)r.copy(a[n]),r.applyMatrix4(t.matrixWorld),e.expandByPoint(r)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(n=0,i=s.count;n<i;n++)r.fromBufferAttribute(s,n).applyMatrix4(t.matrixWorld),e.expandByPoint(r)}}var e,n,i,r=new a;return function(n){return e=this,n.updateMatrixWorld(!0),n.traverse(t),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new a),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new a;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){function t(t){var r,o;for(r=0,o=t.length-3;r<=o;r+=3){l.fromArray(t,r);var a=u.x*Math.abs(l.x)+u.y*Math.abs(l.y)+u.z*Math.abs(l.z),s=e.dot(l),c=n.dot(l),h=i.dot(l);if(Math.max(-Math.max(s,c,h),Math.min(s,c,h))>a)return!1}return!0}var e=new a,n=new a,i=new a,r=new a,o=new a,s=new a,l=new a,c=new a,u=new a,h=new a;return function(a){if(this.isEmpty())return!1;this.getCenter(c),u.subVectors(this.max,c),e.subVectors(a.a,c),n.subVectors(a.b,c),i.subVectors(a.c,c),r.subVectors(n,e),o.subVectors(i,n),s.subVectors(e,i);var l=[0,-r.z,r.y,0,-o.z,o.y,0,-s.z,s.y,r.z,0,-r.x,o.z,0,-o.x,s.z,0,-s.x,-r.y,r.x,0,-o.y,o.x,0,-s.y,s.x,0];return!!t(l)&&(l=[1,0,0,0,1,0,0,0,1],!!t(l)&&(h.crossVectors(r,o),l=[h.x,h.y,h.z],t(l)))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new a),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new a;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),getBoundingSphere:function(){var t=new a;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new a,new a,new a,new a,new a,new a,new a,new a];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(m.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new f;return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,o=0,a=e.length;o<a;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new a),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new f),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(v.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new a,e=new a;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new a),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new a;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new a);var i=e.delta(t),r=this.normal.dot(i);if(0!==r){var o=-(e.start.dot(this.normal)+this.constant)/r;if(!(o<0||o>1))return n.copy(i).multiplyScalar(o).add(e.start)}else if(0===this.distanceToPoint(e.start))return n.copy(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new a),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new a,e=new s;return function(n,i){var r=i||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(g.prototype,{set:function(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-i,u-s,f-h,y-m).normalize(),e[1].setComponents(a+i,u+s,f+h,y+m).normalize(),e[2].setComponents(a+r,u+l,f+d,y+v).normalize(),e[3].setComponents(a-r,u-l,f-d,y-v).normalize(),e[4].setComponents(a-o,u-c,f-p,y-g).normalize(),e[5].setComponents(a+o,u+c,f+p,y+g).normalize(),this},intersectsObject:function(){var t=new m;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new m;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++)if(e[r].distanceToPoint(n)<i)return!1;return!0},intersectsBox:function(){var t=new a;return function(e){for(var n=this.planes,i=0;i<6;i++){var r=n[i];if(t.x=r.normal.x>0?e.max.x:e.min.x,t.y=r.normal.y>0?e.max.y:e.min.y,t.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(t)<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}),Object.assign(y.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new y).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new a;return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=o*c,d=o*u,p=a*c,f=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=d+p*l,e[5]=h-f*l,e[9]=-a*s,e[2]=f-h*l,e[6]=p+d*l,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,v=s*u,g=l*c,y=l*u;e[0]=m+y*a,e[4]=g*a-v,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=v*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){m=s*c,v=s*u,g=l*c,y=l*u;e[0]=m-y*a,e[4]=-o*u,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*c,e[9]=y-m*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){h=o*c,d=o*u,p=a*c,f=a*u;e[0]=s*c,e[4]=p*l-d,e[8]=h*l+f,e[1]=s*u,e[5]=f*l+h,e[9]=d*l-p,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var b=o*s,x=o*l,w=a*s,_=a*l;e[0]=s*c,e[4]=_-b*u,e[8]=w*u+x,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=x*u+w,e[10]=b-_*u}else if("XZY"===t.order){b=o*s,x=o*l,w=a*s,_=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=b*u+_,e[5]=o*c,e[9]=x*u-w,e[2]=w*u-x,e[6]=a*c,e[10]=_*u+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new a(0,0,0),e=new a(1,1,1);return function(n){return this.compose(t,n,e)}}(),lookAt:function(){var t=new a,e=new a,n=new a;return function(i,r,o){var a=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=i[0],_=i[4],M=i[8],E=i[12],S=i[1],T=i[5],A=i[9],C=i[13],L=i[2],P=i[6],O=i[10],R=i[14],k=i[3],D=i[7],I=i[11],N=i[15];return r[0]=o*w+a*S+s*L+l*k,r[4]=o*_+a*T+s*P+l*D,r[8]=o*M+a*A+s*O+l*I,r[12]=o*E+a*C+s*R+l*N,r[1]=c*w+u*S+h*L+d*k,r[5]=c*_+u*T+h*P+d*D,r[9]=c*M+u*A+h*O+d*I,r[13]=c*E+u*C+h*R+d*N,r[2]=p*w+f*S+m*L+v*k,r[6]=p*_+f*T+m*P+v*D,r[10]=p*M+f*A+m*O+v*I,r[14]=p*E+f*C+m*R+v*N,r[3]=g*w+y*S+b*L+x*k,r[7]=g*_+y*T+b*P+x*D,r[11]=g*M+y*A+b*O+x*I,r[15]=g*E+y*C+b*R+x*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new a;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14];return t[3]*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+t[7]*(+e*s*d-e*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+t[11]*(+e*l*u-e*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+t[15]*(-i*a*c-e*s*u+e*a*h+i*o*u-n*o*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],b=i[15],x=p*y*h-g*f*h+g*u*m-c*y*m-p*u*b+c*f*b,w=v*f*h-d*y*h-v*u*m+l*y*m+d*u*b-l*f*b,_=d*g*h-v*p*h+v*c*m-l*g*m-d*c*b+l*p*b,M=v*p*u-d*g*u-v*c*f+l*g*f+d*c*y-l*p*y,E=r*x+o*w+a*_+s*M;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var T=1/E;return n[0]=x*T,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*b-o*f*b)*T,n[2]=(c*y*s-g*u*s+g*a*h-o*y*h-c*a*b+o*u*b)*T,n[3]=(p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m)*T,n[4]=w*T,n[5]=(d*y*s-v*f*s+v*a*m-r*y*m-d*a*b+r*f*b)*T,n[6]=(v*u*s-l*y*s-v*a*h+r*y*h+l*a*b-r*u*b)*T,n[7]=(l*f*s-d*u*s+d*a*h-r*f*h-l*a*m+r*u*m)*T,n[8]=_*T,n[9]=(v*p*s-d*g*s-v*o*m+r*g*m+d*o*b-r*p*b)*T,n[10]=(l*g*s-v*c*s+v*o*h-r*g*h-l*o*b+r*c*b)*T,n[11]=(d*c*s-l*p*s-d*o*h+r*p*h+l*o*m-r*c*m)*T,n[12]=M*T,n[13]=(d*g*a-v*p*a+v*o*f-r*g*f-d*o*y+r*p*y)*T,n[14]=(v*c*a-l*g*a-v*o*u+r*g*u+l*o*y-r*c*y)*T,n[15]=(l*p*a-d*c*a+d*o*u-r*p*u-l*o*f+r*c*f)*T,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,v=a*u,g=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return i[0]=(1-(f+v))*x,i[1]=(d+b)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(p+y)*_,i[9]=(m-g)*_,i[10]=(1-(h+f))*_,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(){var t=new a,e=new y;return function(n,i,r){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),l=t.set(o[8],o[9],o[10]).length();this.determinant()<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var c=1/a,u=1/s,h=1/l;return e.elements[0]*=c,e.elements[1]*=c,e.elements[2]*=c,e.elements[4]*=u,e.elements[5]*=u,e.elements[6]*=u,e.elements[8]*=h,e.elements[9]*=h,e.elements[10]*=h,i.setFromRotationMatrix(e),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,h=(n+i)*l,d=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var ml={alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",begin_vertex:"vec3 transformed = vec3( position );",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",color_fragment:"#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",color_vertex:"#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",common:"#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",encodings_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",encodings_pars_fragment:"\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_pars_fragment:"#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",lightmap_fragment:"#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_vertex:"vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",lights_pars_begin:"uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",map_particle_pars_fragment:"#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",normal_fragment_begin:"#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",normal_fragment_maps:"#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",shadowmap_pars_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",shadowmap_vertex:"#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",uv_pars_fragment:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",uv_pars_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",uv_vertex:"#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",uv2_pars_fragment:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",uv2_pars_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",uv2_vertex:"#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",background_frag:"uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",depth_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshbasic_vert:"#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphysical_frag:"#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",normal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",normal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",shadow_vert:"#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}"},vl={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Object.assign(w.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"==typeof t?this.setHex(t):"string"==typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=hl.euclideanModulo(e,1),n=hl.clamp(n,0,1),i=hl.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,s,l)}}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(t&&t.length>0){c=vl[t];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),l=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=l<=.5?c/(a+s):c/(2-a-s),a){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,i){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=i,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(n,i){this.getHSL(t),n.getHSL(e);var r=hl.lerp(t.h,e.h,i),o=hl.lerp(t.s,e.s,i),a=hl.lerp(t.l,e.l,i);return this.setHSL(r,o,a),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var gl={common:{diffuse:{value:new w(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new s},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new r(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new w(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new w(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new s}},sprite:{diffuse:{value:new w(15658734)},opacity:{value:1},center:{value:new r(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new s}}},yl={basic:{uniforms:x([gl.common,gl.specularmap,gl.envmap,gl.aomap,gl.lightmap,gl.fog]),vertexShader:ml.meshbasic_vert,fragmentShader:ml.meshbasic_frag},lambert:{uniforms:x([gl.common,gl.specularmap,gl.envmap,gl.aomap,gl.lightmap,gl.emissivemap,gl.fog,gl.lights,{emissive:{value:new w(0)}}]),vertexShader:ml.meshlambert_vert,fragmentShader:ml.meshlambert_frag},phong:{uniforms:x([gl.common,gl.specularmap,gl.envmap,gl.aomap,gl.lightmap,gl.emissivemap,gl.bumpmap,gl.normalmap,gl.displacementmap,gl.gradientmap,gl.fog,gl.lights,{emissive:{value:new w(0)},specular:{value:new w(1118481)},shininess:{value:30}}]),vertexShader:ml.meshphong_vert,fragmentShader:ml.meshphong_frag},standard:{uniforms:x([gl.common,gl.envmap,gl.aomap,gl.lightmap,gl.emissivemap,gl.bumpmap,gl.normalmap,gl.displacementmap,gl.roughnessmap,gl.metalnessmap,gl.fog,gl.lights,{emissive:{value:new w(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:ml.meshphysical_vert,fragmentShader:ml.meshphysical_frag},matcap:{uniforms:x([gl.common,gl.bumpmap,gl.normalmap,gl.displacementmap,gl.fog,{matcap:{value:null}}]),vertexShader:ml.meshmatcap_vert,fragmentShader:ml.meshmatcap_frag},points:{uniforms:x([gl.points,gl.fog]),vertexShader:ml.points_vert,fragmentShader:ml.points_frag},dashed:{uniforms:x([gl.common,gl.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:ml.linedashed_vert,fragmentShader:ml.linedashed_frag},depth:{uniforms:x([gl.common,gl.displacementmap]),vertexShader:ml.depth_vert,fragmentShader:ml.depth_frag},normal:{uniforms:x([gl.common,gl.bumpmap,gl.normalmap,gl.displacementmap,{opacity:{value:1}}]),vertexShader:ml.normal_vert,fragmentShader:ml.normal_frag},sprite:{uniforms:x([gl.sprite,gl.fog]),vertexShader:ml.sprite_vert,fragmentShader:ml.sprite_frag},background:{uniforms:{uvTransform:{value:new s},t2D:{value:null}},vertexShader:ml.background_vert,fragmentShader:ml.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:ml.cube_vert,fragmentShader:ml.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:ml.equirect_vert,fragmentShader:ml.equirect_frag},distanceRGBA:{uniforms:x([gl.common,gl.displacementmap,{referencePosition:{value:new a},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:ml.distanceRGBA_vert,fragmentShader:ml.distanceRGBA_frag},shadow:{uniforms:x([gl.lights,gl.fog,{color:{value:new w(0)},opacity:{value:1}}]),vertexShader:ml.shadow_vert,fragmentShader:ml.shadow_frag}};yl.physical={uniforms:x([yl.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:ml.meshphysical_vert,fragmentShader:ml.meshphysical_frag},Object.assign(E.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),S.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],S.DefaultOrder="XYZ",Object.defineProperties(S.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(S.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=hl.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new y;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new o;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new a(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(T.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!=(this.mask&t.mask)}});var bl=0;A.DefaultUp=new a(0,1,0),A.DefaultMatrixAutoUpdate=!0,A.prototype=Object.assign(Object.create(i.prototype),{constructor:A,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new o;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new o;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new a(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new a(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new a(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new a;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new a(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new a(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new a(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new y;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new o,e=new y,n=new a,i=new a;return function(r,o,a){r.isVector3?n.copy(r):n.set(r,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(i,n,this.up):e.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},attach:function(){var t=new y;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new a),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new a,e=new a;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new o),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new a,e=new o;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new a),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new a),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){function e(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}function n(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var i=void 0===t||"string"==typeof t,r={};i&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},r.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var o={};if(o.uuid=this.uuid,o.type=this.type,""!==this.name&&(o.name=this.name),!0===this.castShadow&&(o.castShadow=!0),!0===this.receiveShadow&&(o.receiveShadow=!0),!1===this.visible&&(o.visible=!1),!1===this.frustumCulled&&(o.frustumCulled=!1),0!==this.renderOrder&&(o.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(o.userData=this.userData),o.layers=this.layers.mask,o.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(o.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==Js&&(o.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){o.geometry=e(t.geometries,this.geometry);var a=this.geometry.parameters;if(void 0!==a&&void 0!==a.shapes){var s=a.shapes;if(Array.isArray(s))for(var l=0,c=s.length;l<c;l++){var u=s[l];e(t.shapes,u)}else e(t.shapes,s)}}if(void 0!==this.material)if(Array.isArray(this.material)){var h=[];for(l=0,c=this.material.length;l<c;l++)h.push(e(t.materials,this.material[l]));o.material=h}else o.material=e(t.materials,this.material);if(this.children.length>0){o.children=[];for(l=0;l<this.children.length;l++)o.children.push(this.children[l].toJSON(t).object)}if(i){var d=n(t.geometries),p=n(t.materials),f=n(t.textures),m=n(t.images);s=n(t.shapes);d.length>0&&(r.geometries=d),p.length>0&&(r.materials=p),f.length>0&&(r.textures=f),m.length>0&&(r.images=m),s.length>0&&(r.shapes=s)}return r.object=o,r},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}});var xl=0;C.prototype=Object.assign(Object.create(i.prototype),{constructor:C,isGeometry:!0,applyMatrix:function(t){for(var e=(new s).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++)this.vertices[n].applyMatrix4(t);for(n=0,i=this.faces.length;n<i;n++){var r=this.faces[n];r.normal.applyMatrix3(e).normalize();for(var o=0,a=r.vertexNormals.length;o<a;o++)r.vertexNormals[o].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new y;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new y;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new y;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new y;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new y;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new A;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){function e(t,e,i,o){var s=void 0===c?[]:[n.colors[t].clone(),n.colors[e].clone(),n.colors[i].clone()],d=void 0===l?[]:[(new a).fromArray(l,3*t),(new a).fromArray(l,3*e),(new a).fromArray(l,3*i)],p=new E(t,e,i,d,s,o);n.faces.push(p),void 0!==u&&n.faceVertexUvs[0].push([(new r).fromArray(u,2*t),(new r).fromArray(u,2*e),(new r).fromArray(u,2*i)]),void 0!==h&&n.faceVertexUvs[1].push([(new r).fromArray(h,2*t),(new r).fromArray(h,2*e),(new r).fromArray(h,2*i)])}var n=this,i=null!==t.index?t.index.array:void 0,o=t.attributes,s=o.position.array,l=void 0!==o.normal?o.normal.array:void 0,c=void 0!==o.color?o.color.array:void 0,u=void 0!==o.uv?o.uv.array:void 0,h=void 0!==o.uv2?o.uv2.array:void 0;void 0!==h&&(this.faceVertexUvs[1]=[]);for(var d=0;d<s.length;d+=3)n.vertices.push((new a).fromArray(s,d)),void 0!==c&&n.colors.push((new w).fromArray(c,d));var p=t.groups;if(p.length>0)for(d=0;d<p.length;d++)for(var f=p[d],m=f.start,v=f.count,g=m,y=m+v;g<y;g+=3)void 0!==i?e(i[g],i[g+1],i[g+2],f.materialIndex):e(g,g+1,g+2,f.materialIndex);else if(void 0!==i)for(d=0;d<i.length;d+=3)e(i[d],i[d+1],i[d+2]);else for(d=0;d<s.length/3;d+=3)e(d,d+1,d+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new y;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new a,e=new a,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],s=this.vertices[r.b],l=this.vertices[r.c];t.subVectors(l,s),e.subVectors(o,s),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,o,s;for(void 0===t&&(t=!0),s=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)s[e]=new a;if(t){var l,c,u,h=new a,d=new a;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],l=this.vertices[o.a],c=this.vertices[o.b],u=this.vertices[o.c],h.subVectors(u,c),d.subVectors(l,c),h.cross(d),s[o.a].add(h),s[o.b].add(h),s[o.c].add(h)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s[o.a].add(o.normal),s[o.b].add(o.normal),s[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)s[e].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var p=o.vertexNormals;3===p.length?(p[0].copy(s[o.a]),p[1].copy(s[o.b]),p[2].copy(s[o.c])):(p[0]=s[o.a].clone(),p[1]=s[o.b].clone(),p[2]=s[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new C;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var s=this.morphNormals[t].faceNormals,l=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)c=new a,u={a:new a,b:new a,c:new a},s.push(c),l.push(u)}var c,u,h=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],c=h.faceNormals[n],u=h.vertexNormals[n],c.copy(r.normal),u.a.copy(r.vertexNormals[0]),u.b.copy(r.vertexNormals[1]),u.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new f),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new m),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=t.vertices,l=this.faces,c=t.faces,u=this.faceVertexUvs[0],h=t.faceVertexUvs[0],d=this.colors,p=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new s).getNormalMatrix(e));for(var f=0,m=a.length;f<m;f++){var v=a[f],g=v.clone();void 0!==e&&g.applyMatrix4(e),o.push(g)}for(f=0,m=p.length;f<m;f++)d.push(p[f].clone());for(f=0,m=c.length;f<m;f++){var y,b,x,w=c[f],_=w.vertexNormals,M=w.vertexColors;y=new E(w.a+r,w.b+r,w.c+r),y.normal.copy(w.normal),void 0!==i&&y.normal.applyMatrix3(i).normalize();for(var S=0,T=_.length;S<T;S++)b=_[S].clone(),void 0!==i&&b.applyMatrix3(i).normalize(),y.vertexNormals.push(b);y.color.copy(w.color);for(S=0,T=M.length;S<T;S++)x=M[S],y.vertexColors.push(x.clone());y.materialIndex=w.materialIndex+n,l.push(y)}for(f=0,m=h.length;f<m;f++){var A=h[f],C=[];if(void 0!==A){for(S=0,T=A.length;S<T;S++)C.push(A[S].clone());u.push(C)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,o,a,s,l={},c=[],u=[],h=Math.pow(10,4);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],e=Math.round(t.x*h)+"_"+Math.round(t.y*h)+"_"+Math.round(t.z*h),void 0===l[e]?(l[e]=n,c.push(this.vertices[n]),u[n]=c.length-1):u[n]=u[l[e]];var d=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var p=0;p<3;p++)if(o[p]===o[(p+1)%3]){d.push(n);break}}for(n=d.length-1;n>=0;n--){var f=d[n];for(this.faces.splice(f,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(f,1)}var m=this.vertices.length-c.length;return this.vertices=c,m},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new a(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){function t(t,e){return t.materialIndex-e.materialIndex}for(var e=this.faces,n=e.length,i=0;i<n;i++)e[i]._id=i;e.sort(t);var r,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===n&&(r=[]),s&&s.length===n&&(o=[]);for(i=0;i<n;i++){var l=e[i]._id;r&&r.push(a[l]),o&&o.push(s[l])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){function t(t,e,n){return n?t|1<<e:t&~(1<<e)}function e(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==d[e]?d[e]:(d[e]=h.length/3,h.push(t.x,t.y,t.z),d[e])}function n(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==f[e]?f[e]:(f[e]=p.length,p.push(t.getHex()),f[e])}function i(t){var e=t.x.toString()+t.y.toString();return void 0!==v[e]?v[e]:(v[e]=m.length/2,m.push(t.x,t.y),v[e])}var r={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),void 0!==this.parameters){var o=this.parameters;for(var a in o)void 0!==o[a]&&(r[a]=o[a]);return r}for(var s=[],l=0;l<this.vertices.length;l++){var c=this.vertices[l];s.push(c.x,c.y,c.z)}var u=[],h=[],d={},p=[],f={},m=[],v={};for(l=0;l<this.faces.length;l++){var g=this.faces[l],y=void 0!==this.faceVertexUvs[0][l],b=g.normal.length()>0,x=g.vertexNormals.length>0,w=1!==g.color.r||1!==g.color.g||1!==g.color.b,_=g.vertexColors.length>0,M=0;if(M=t(M,0,0),M=t(M,1,!0),M=t(M,2,!1),M=t(M,3,y),M=t(M,4,b),M=t(M,5,x),M=t(M,6,w),M=t(M,7,_),u.push(M),u.push(g.a,g.b,g.c),u.push(g.materialIndex),y){var E=this.faceVertexUvs[0][l];u.push(i(E[0]),i(E[1]),i(E[2]))}if(b&&u.push(e(g.normal)),x){var S=g.vertexNormals;u.push(e(S[0]),e(S[1]),e(S[2]))}if(w&&u.push(n(g.color)),_){var T=g.vertexColors;u.push(n(T[0]),n(T[1]),n(T[2]))}}return r.data={},r.data.vertices=s,r.data.normals=h,p.length>0&&(r.data.colors=p),m.length>0&&(r.data.uvs=[m]),r.data.faces=u,r},clone:function(){return(new C).copy(this)},copy:function(t){var e,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var u=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[e].push(d)}}var f=t.morphTargets;for(e=0,n=f.length;e<n;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,r=f[e].vertices.length;i<r;i++)m.vertices.push(f[e].vertices[i].clone());if(void 0!==f[e].normals)for(m.normals=[],i=0,r=f[e].normals.length;i<r;i++)m.normals.push(f[e].normals[i].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],i=0,r=v[e].vertexNormals.length;i<r;i++){var y=v[e].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],i=0,r=v[e].faceNormals.length;i<r;i++)g.faceNormals.push(v[e].faceNormals[i].clone());this.morphNormals.push(g)}var x=t.skinWeights;for(e=0,n=x.length;e<n;e++)this.skinWeights.push(x[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var _=t.lineDistances;for(e=0,n=_.length;e<n;e++)this.lineDistances.push(_[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(L.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(L.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new w),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,o=t.length;i<o;i++){var a=t[i];void 0===a&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),a=new r),e[n++]=a.x,e[n++]=a.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new a),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new c),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),P.prototype=Object.create(L.prototype),P.prototype.constructor=P,O.prototype=Object.create(L.prototype),O.prototype.constructor=O,R.prototype=Object.create(L.prototype),R.prototype.constructor=R,k.prototype=Object.create(L.prototype),k.prototype.constructor=k,D.prototype=Object.create(L.prototype),D.prototype.constructor=D,I.prototype=Object.create(L.prototype),I.prototype.constructor=I,N.prototype=Object.create(L.prototype),N.prototype.constructor=N,z.prototype=Object.create(L.prototype),z.prototype.constructor=z,B.prototype=Object.create(L.prototype),B.prototype.constructor=B,Object.assign(F.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,o=t.faceVertexUvs,a=o[0]&&o[0].length>0,s=o[1]&&o[1].length>0,l=t.morphTargets,c=l.length;if(c>0){e=[];for(var u=0;u<c;u++)e[u]={name:l[u].name,data:[]};this.morphTargets.position=e}var h,d=t.morphNormals,p=d.length;if(p>0){h=[];for(u=0;u<p;u++)h[u]={name:d[u].name,data:[]};this.morphTargets.normal=h}var f=t.skinIndices,m=t.skinWeights,v=f.length===i.length,g=m.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(u=0;u<n.length;u++){var y=n[u];this.vertices.push(i[y.a],i[y.b],i[y.c]);var b=y.vertexNormals;if(3===b.length)this.normals.push(b[0],b[1],b[2]);else{var x=y.normal;this.normals.push(x,x,x)}var w=y.vertexColors;if(3===w.length)this.colors.push(w[0],w[1],w[2]);else{var _=y.color;this.colors.push(_,_,_)}if(!0===a){var M=o[0][u];void 0!==M?this.uvs.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",u),this.uvs.push(new r,new r,new r))}if(!0===s){M=o[1][u];void 0!==M?this.uvs2.push(M[0],M[1],M[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",u),this.uvs2.push(new r,new r,new r))}for(var E=0;E<c;E++){var S=l[E].vertices;e[E].data.push(S[y.a],S[y.b],S[y.c])}for(E=0;E<p;E++){var T=d[E].vertexNormals[u];h[E].data.push(T.a,T.b,T.c)}v&&this.skinIndices.push(f[y.a],f[y.b],f[y.c]),g&&this.skinWeights.push(m[y.a],m[y.b],m[y.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var wl=1;H.prototype=Object.assign(Object.create(i.prototype),{constructor:H,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(j(t)>65535?N:D)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new L(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new s).getNormalMatrix(t);i.applyToBufferAttribute(n),n.needsUpdate=!0}var r=this.attributes.tangent;if(void 0!==r){i=(new s).getNormalMatrix(t);i.applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new y;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new y;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new y;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new y;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new y;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new A;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new a;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new z(3*e.vertices.length,3),i=new z(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new z(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new z(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(e=this.attributes.position,void 0!==e&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(e=this.attributes.normal,void 0!==e&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(e=this.attributes.color,void 0!==e&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(e=this.attributes.uv,void 0!==e&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(e=this.attributes.lineDistance,void 0!==e&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new F).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new L(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new L(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new L(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new L(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new L(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],l=t.morphTargets[a],c=0,u=l.length;c<u;c++){var h=l[c],d=new z(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new z(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new z(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new f;return function(){null===this.boundingBox&&(this.boundingBox=new f);var e=this.attributes.position,n=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),n)for(var i=0,r=n.length;i<r;i++){var o=n[i];t.setFromBufferAttribute(o),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new f,e=new f,n=new a;return function(){null===this.boundingSphere&&(this.boundingSphere=new m);var i=this.attributes.position,r=this.morphAttributes.position;if(i){var o=this.boundingSphere.center;if(t.setFromBufferAttribute(i),r)for(var a=0,s=r.length;a<s;a++){var l=r[a];e.setFromBufferAttribute(l),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(o);var c=0;for(a=0,s=i.count;a<s;a++)n.fromBufferAttribute(i,a),c=Math.max(c,o.distanceToSquared(n));if(r)for(a=0,s=r.length;a<s;a++){l=r[a];for(var u=0,h=l.count;u<h;u++)n.fromBufferAttribute(l,u),c=Math.max(c,o.distanceToSquared(n))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new L(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,o=i.length;r<o;r++)i[r]=0;var s,l,c,u=e.normal.array,h=new a,d=new a,p=new a,f=new a,m=new a;if(t){var v=t.array;for(r=0,o=t.count;r<o;r+=3)s=3*v[r+0],l=3*v[r+1],c=3*v[r+2],h.fromArray(n,s),d.fromArray(n,l),p.fromArray(n,c),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[s]+=f.x,u[s+1]+=f.y,u[s+2]+=f.z,u[l]+=f.x,u[l+1]+=f.y,u[l+2]+=f.z,u[c]+=f.x,u[c+1]+=f.y,u[c+2]+=f.z}else for(r=0,o=n.length;r<o;r+=9)h.fromArray(n,r),d.fromArray(n,r+3),p.fromArray(n,r+6),f.subVectors(p,d),m.subVectors(h,d),f.cross(m),u[r]=f.x,u[r+1]=f.y,u[r+2]=f.z,u[r+3]=f.x,u[r+4]=f.y,u[r+5]=f.z,u[r+6]=f.x,u[r+7]=f.y,u[r+8]=f.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],o=r.array,a=t.attributes[i],s=a.array,l=a.itemSize*e,c=Math.min(s.length,o.length-l),u=0,h=l;u<c;u++,h++)o[h]=s[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new a;return function(){for(var e=this.attributes.normal,n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),o=0,a=0,s=0,l=e.length;s<l;s++){o=e[s]*i;for(var c=0;c<i;c++)r[a++]=n[o++]}return new L(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new H,n=this.index.array,i=this.attributes;for(var r in i){var o=i[r],a=t(o,n);e.addAttribute(r,a)}var s=this.morphAttributes;for(r in s){for(var l=[],c=s[r],u=0,h=c.length;u<h;u++){o=c[u],a=t(o,n);l.push(a)}e.morphAttributes[r]=l}for(var d=this.groups,p=(u=0,d.length);u<p;u++){var f=d[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var o=r[n],a=o.toJSON();""!==o.name&&(a.name=o.name),t.data.attributes[n]=a}var s={},l=!1;for(var n in this.morphAttributes){for(var c=this.morphAttributes[n],u=[],h=0,d=c.length;h<d;h++){o=c[h],a=o.toJSON();""!==o.name&&(a.name=o.name),u.push(a)}u.length>0&&(s[n]=u,l=!0)}l&&(t.data.morphAttributes=s);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new H).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var l=[],c=s[e];for(n=0,i=c.length;n<i;n++)l.push(c[n].clone());this.morphAttributes[e]=l}var u=t.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=t.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),U.prototype=Object.create(C.prototype),U.prototype.constructor=U,V.prototype=Object.create(H.prototype),V.prototype.constructor=V,G.prototype=Object.create(C.prototype),G.prototype.constructor=G,W.prototype=Object.create(H.prototype),W.prototype.constructor=W;var _l=0;$.prototype=Object.assign(Object.create(i.prototype),{constructor:$,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===n;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){function e(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}var n=void 0===t||"string"==typeof t;n&&(t={textures:{},images:{}});var i={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearCoat&&(i.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(i.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,i.reflectivity=this.reflectivity,void 0!==this.combine&&(i.combine=this.combine),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(i.size=this.size),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==aa&&(i.blending=this.blending),!0===this.flatShading&&(i.flatShading=this.flatShading),this.side!==Qo&&(i.side=this.side),this.vertexColors!==na&&(i.vertexColors=this.vertexColors),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(i.morphTargets=!0),!0===this.skinning&&(i.skinning=!0),!1===this.visible&&(i.visible=!1),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),n){var r=e(t.textures),o=e(t.images);r.length>0&&(i.textures=r),o.length>0&&(i.images=o)}return i},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Ml="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",El="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";q.prototype=Object.create($.prototype),q.prototype.constructor=q,q.prototype.isShaderMaterial=!0,q.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=b(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},q.prototype.toJSON=function(t){var e=$.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n],r=i.value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e},Object.assign(Y.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new a),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new a;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new a),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new a;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new a,e=new a,n=new a;return function(i,r,o,a){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var s,l,c,u,h=.5*i.distanceTo(r),d=-this.direction.dot(e),p=n.dot(this.direction),f=-n.dot(e),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*f-p,l=d*p-f,u=h*v,s>=0)if(l>=-u)if(l<=u){var g=1/v;s*=g,l*=g,c=s*(s+d*l+2*p)+l*(d*s+l+2*f)+m}else l=h,s=Math.max(0,-(d*l+p)),c=-s*s+l*(l+2*f)+m;else l=-h,s=Math.max(0,-(d*l+p)),c=-s*s+l*(l+2*f)+m;else l<=-u?(s=Math.max(0,-(-d*h+p)),l=s>0?-h:Math.min(Math.max(-h,-f),h),c=-s*s+l*(l+2*f)+m):l<=u?(s=0,l=Math.min(Math.max(-h,-f),h),c=l*(l+2*f)+m):(s=Math.max(0,-(d*h+p)),l=s>0?h:Math.min(Math.max(-h,-f),h),c=-s*s+l*(l+2*f)+m);else l=d>0?-h:h,s=Math.max(0,-(d*l+p)),c=-s*s+l*(l+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(l).add(t),c}}(),intersectSphere:function(){var t=new a;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,l=i+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0},intersectBox:function(t,e){var n,i,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(){var t=new a;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new a,e=new a,n=new a,i=new a;return function(r,o,a,s,l){e.subVectors(o,r),n.subVectors(a,r),i.crossVectors(e,n);var c,u=this.direction.dot(i);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}t.subVectors(this.origin,r);var h=c*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var d=c*this.direction.dot(e.cross(t));if(d<0)return null;if(h+d>u)return null;var p=-c*t.dot(i);return p<0?null:this.at(p/u,l)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(X,{getNormal:function(){var t=new a;return function(e,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new a),r.subVectors(i,n),t.subVectors(e,n),r.cross(t);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var t=new a,e=new a,n=new a;return function(i,r,o,s,l){t.subVectors(s,r),e.subVectors(o,r),n.subVectors(i,r);var c=t.dot(t),u=t.dot(e),h=t.dot(n),d=e.dot(e),p=e.dot(n),f=c*d-u*u;if(void 0===l&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),l=new a),0===f)return l.set(-2,-1,-1);var m=1/f,v=(d*h-u*p)*m,g=(c*p-u*h)*m;return l.set(1-v-g,g,v)}}(),containsPoint:function(){var t=new a;return function(e,n,i,r){return X.getBarycoord(e,n,i,r,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:function(){var t=new a;return function(e,n,i,r,o,a,s,l){return this.getBarycoord(e,n,i,r,t),l.set(0,0),l.addScaledVector(o,t.x),l.addScaledVector(a,t.y),l.addScaledVector(s,t.z),l}}(),isFrontFacing:function(){var t=new a,e=new a;return function(n,i,r,o){return t.subVectors(r,i),e.subVectors(n,i),t.cross(e).dot(o)<0}}()}),Object.assign(X.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new a,e=new a;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new a),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return X.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new a),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return X.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return X.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return X.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return X.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new a,e=new a,n=new a,i=new a,r=new a,o=new a;return function(s,l){void 0===l&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),l=new a);var c,u,h=this.a,d=this.b,p=this.c;t.subVectors(d,h),e.subVectors(p,h),i.subVectors(s,h);var f=t.dot(i),m=e.dot(i);if(f<=0&&m<=0)return l.copy(h);r.subVectors(s,d);var v=t.dot(r),g=e.dot(r);if(v>=0&&g<=v)return l.copy(d);var y=f*g-v*m;if(y<=0&&f>=0&&v<=0)return c=f/(f-v),l.copy(h).addScaledVector(t,c);o.subVectors(s,p);var b=t.dot(o),x=e.dot(o);if(x>=0&&b<=x)return l.copy(p);var w=b*m-f*x;if(w<=0&&m>=0&&x<=0)return u=m/(m-x),l.copy(h).addScaledVector(e,u);var _=v*x-b*g;if(_<=0&&g-v>=0&&b-x>=0)return n.subVectors(p,d),u=(g-v)/(g-v+(b-x)),l.copy(d).addScaledVector(n,u);var M=1/(_+w+y);return c=w*M,u=y*M,l.copy(h).addScaledVector(t,c).addScaledVector(e,u)}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Z.prototype=Object.create($.prototype),Z.prototype.constructor=Z,Z.prototype.isMeshBasicMaterial=!0,Z.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},J.prototype=Object.assign(Object.create(A.prototype),{constructor:J,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return A.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){function t(t,e,n,i,r,o,a,s){if(null===(e.side===ta?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side!==ea,s)))return null;_.copy(s),_.applyMatrix4(t.matrixWorld);var l=n.ray.origin.distanceTo(_);return l<n.near||l>n.far?null:{distance:l,point:_.clone(),object:t}}function e(e,n,i,o,a,m,y,_,M,S){s.fromBufferAttribute(a,_),l.fromBufferAttribute(a,M),c.fromBufferAttribute(a,S);var T=e.morphTargetInfluences;if(n.morphTargets&&m&&T){p.set(0,0,0),f.set(0,0,0),v.set(0,0,0);for(var A=0,C=m.length;A<C;A++){var L=T[A],P=m[A];0!==L&&(u.fromBufferAttribute(P,_),h.fromBufferAttribute(P,M),d.fromBufferAttribute(P,S),p.addScaledVector(u.sub(s),L),f.addScaledVector(h.sub(l),L),v.addScaledVector(d.sub(c),L))}s.add(p),l.add(f),c.add(v)}var O=t(e,n,i,o,s,l,c,w);if(O){y&&(g.fromBufferAttribute(y,_),b.fromBufferAttribute(y,M),x.fromBufferAttribute(y,S),O.uv=X.getUV(w,s,l,c,g,b,x,new r));var R=new E(_,M,S);X.getNormal(s,l,c,R.normal),O.face=R}return O}var n=new y,i=new Y,o=new m,s=new a,l=new a,c=new a,u=new a,h=new a,d=new a,p=new a,f=new a,v=new a,g=new r,b=new r,x=new r,w=new a,_=new a;return function(a,s){var l,c=this.geometry,u=this.material,h=this.matrixWorld;if(void 0!==u&&(null===c.boundingSphere&&c.computeBoundingSphere(),o.copy(c.boundingSphere),o.applyMatrix4(h),!1!==a.ray.intersectsSphere(o)&&(n.getInverse(h),i.copy(a.ray).applyMatrix4(n),null===c.boundingBox||!1!==i.intersectsBox(c.boundingBox))))if(c.isBufferGeometry){var d,p,f,m,v,y,_,M,E,S,T,A=c.index,C=c.attributes.position,L=c.morphAttributes.position,P=c.attributes.uv,O=c.groups,R=c.drawRange;if(null!==A)if(Array.isArray(u))for(m=0,y=O.length;m<y;m++)for(M=O[m],E=u[M.materialIndex],S=Math.max(M.start,R.start),T=Math.min(M.start+M.count,R.start+R.count),v=S,_=T;v<_;v+=3)d=A.getX(v),p=A.getX(v+1),f=A.getX(v+2),(l=e(this,E,a,i,C,L,P,d,p,f))&&(l.faceIndex=Math.floor(v/3),l.face.materialIndex=M.materialIndex,s.push(l));else for(S=Math.max(0,R.start),T=Math.min(A.count,R.start+R.count),m=S,y=T;m<y;m+=3)d=A.getX(m),p=A.getX(m+1),f=A.getX(m+2),(l=e(this,u,a,i,C,L,P,d,p,f))&&(l.faceIndex=Math.floor(m/3),s.push(l));else if(void 0!==C)if(Array.isArray(u))for(m=0,y=O.length;m<y;m++)for(M=O[m],E=u[M.materialIndex],S=Math.max(M.start,R.start),T=Math.min(M.start+M.count,R.start+R.count),v=S,_=T;v<_;v+=3)d=v,p=v+1,f=v+2,(l=e(this,E,a,i,C,L,P,d,p,f))&&(l.faceIndex=Math.floor(v/3),l.face.materialIndex=M.materialIndex,s.push(l));else for(S=Math.max(0,R.start),T=Math.min(C.count,R.start+R.count),m=S,y=T;m<y;m+=3)d=m,p=m+1,f=m+2,(l=e(this,u,a,i,C,L,P,d,p,f))&&(l.faceIndex=Math.floor(m/3),s.push(l))}else if(c.isGeometry){var k,D,I,N,z=Array.isArray(u),B=c.vertices,F=c.faces,j=c.faceVertexUvs[0];j.length>0&&(N=j);for(var H=0,U=F.length;H<U;H++){var V=F[H],G=z?u[V.materialIndex]:u;if(void 0!==G&&(k=B[V.a],D=B[V.b],I=B[V.c],l=t(this,G,a,i,k,D,I,w))){if(N&&N[H]){var W=N[H];g.copy(W[0]),b.copy(W[1]),x.copy(W[2]),l.uv=X.getUV(w,k,D,I,g,b,x,new r)}l.face=V,l.faceIndex=H,s.push(l)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ct.prototype=Object.create(l.prototype),ct.prototype.constructor=ct,ct.prototype.isCubeTexture=!0,Object.defineProperty(ct.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),ut.prototype=Object.create(l.prototype),ut.prototype.constructor=ut,ut.prototype.isDataTexture2DArray=!0,ht.prototype=Object.create(l.prototype),ht.prototype.constructor=ht,ht.prototype.isDataTexture3D=!0;var Sl=new l,Tl=new ut,Al=new ht,Cl=new ct,Ll=[],Pl=[],Ol=new Float32Array(16),Rl=new Float32Array(9),kl=new Float32Array(4);qt.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),ft(e,t)},Yt.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var a=i[r];a.setValue(t,e[a.id],n)}};var Dl=/([\w\d_]+)(\])?(\[|\.)?/g;Jt.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},Jt.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},Jt.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}},Jt.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n};var Il=0,Nl=0;Me.prototype=Object.create($.prototype),Me.prototype.constructor=Me,Me.prototype.isMeshDepthMaterial=!0,Me.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},Ee.prototype=Object.create($.prototype),Ee.prototype.constructor=Ee,Ee.prototype.isMeshDistanceMaterial=!0,Ee.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Le.prototype=Object.assign(Object.create(A.prototype),{constructor:Le,isGroup:!0}),Pe.prototype=Object.assign(Object.create(A.prototype),{constructor:Pe,isCamera:!0,copy:function(t,e){return A.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new a),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){A.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Oe.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Oe,isPerspectiveCamera:!0,copy:function(t,e){return Pe.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*hl.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*hl.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*hl.RAD2DEG*Math.atan(Math.tan(.5*hl.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*hl.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=A.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Re.prototype=Object.assign(Object.create(Oe.prototype),{constructor:Re,isArrayCamera:!0});var zl,Bl=new a,Fl=new a;Object.assign(ze.prototype,{isFogExp2:!0,clone:function(){return new ze(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(Be.prototype,{isFog:!0,clone:function(){return new Be(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),Fe.prototype=Object.assign(Object.create(A.prototype),{constructor:Fe,isScene:!0,copy:function(t,e){return A.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=A.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(je.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(je.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(He.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(He.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),Ue.prototype=Object.create($.prototype),Ue.prototype.constructor=Ue,Ue.prototype.isSpriteMaterial=!0,Ue.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},Ve.prototype=Object.assign(Object.create(A.prototype),{constructor:Ve,isSprite:!0,raycast:function(){function t(t,e,n,i,r,a){o.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(s.x=a*o.x-r*o.y,s.y=r*o.x+a*o.y):s.copy(o),t.copy(e),t.x+=s.x,t.y+=s.y,t.applyMatrix4(l)}var e=new a,n=new a,i=new a,o=new r,s=new r,l=new y,c=new a,u=new a,h=new a,d=new r,p=new r,f=new r;return function(o,a){n.setFromMatrixScale(this.matrixWorld),l.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),i.setFromMatrixPosition(this.modelViewMatrix);var s,m,v=this.material.rotation;0!==v&&(m=Math.cos(v),s=Math.sin(v));var g=this.center;t(c.set(-.5,-.5,0),i,g,n,s,m),t(u.set(.5,-.5,0),i,g,n,s,m),t(h.set(.5,.5,0),i,g,n,s,m),d.set(0,0),p.set(1,0),f.set(1,1);var y=o.ray.intersectTriangle(c,u,h,!1,e);if(null!==y||(t(u.set(-.5,.5,0),i,g,n,s,m),p.set(0,1),null!==(y=o.ray.intersectTriangle(c,h,u,!1,e)))){var b=o.ray.origin.distanceTo(e);b<o.near||b>o.far||a.push({distance:b,point:e.clone(),uv:X.getUV(e,c,u,h,d,p,f,new r),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return A.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),Ge.prototype=Object.assign(Object.create(A.prototype),{constructor:Ge,isLOD:!0,copy:function(t){A.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length&&!(e<n[i].distance);i++);return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i&&!(t<e[n].distance);n++);return e[n-1].object},raycast:function(){var t=new a;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new a,e=new a;return function(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var o=1,a=i.length;o<a&&r>=i[o].distance;o++)i[o-1].object.visible=!1,i[o].object.visible=!0;for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(t){var e=A.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),We.prototype=Object.assign(Object.create(J.prototype),{constructor:We,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new c,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){J.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign($e.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new y;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)(t=this.bones[e])&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new y,e=new y;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var l=n[a]?n[a].matrixWorld:e;t.multiplyMatrices(l,i[a]),t.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new $e(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),qe.prototype=Object.assign(Object.create(A.prototype),{constructor:qe,isBone:!0}),Ye.prototype=Object.create($.prototype),Ye.prototype.constructor=Ye,Ye.prototype.isLineBasicMaterial=!0,Ye.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},Xe.prototype=Object.assign(Object.create(A.prototype),{constructor:Xe,isLine:!0,computeLineDistances:function(){var t=new a,e=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,a=i.count;o<a;o++)t.fromBufferAttribute(i,o-1),e.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new z(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;r=n.lineDistances;r[0]=0;for(o=1,a=s.length;o<a;o++)r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var t=new y,e=new Y,n=new m;return function(i,r){var o=i.linePrecision,s=this.geometry,l=this.matrixWorld;if(null===s.boundingSphere&&s.computeBoundingSphere(),n.copy(s.boundingSphere),n.applyMatrix4(l),n.radius+=o,!1!==i.ray.intersectsSphere(n)){t.getInverse(l),e.copy(i.ray).applyMatrix4(t);var c=o/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new a,d=new a,p=new a,f=new a,m=this&&this.isLineSegments?2:1;if(s.isBufferGeometry){var v=s.index,g=s.attributes,y=g.position.array;if(null!==v)for(var b=v.array,x=0,w=b.length-1;x<w;x+=m){var _=b[x],M=b[x+1];h.fromArray(y,3*_),d.fromArray(y,3*M);var E=e.distanceSqToSegment(h,d,f,p);if(!(E>u)){f.applyMatrix4(this.matrixWorld);var S=i.ray.origin.distanceTo(f);S<i.near||S>i.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}else for(x=0,w=y.length/3-1;x<w;x+=m){h.fromArray(y,3*x),d.fromArray(y,3*x+3);E=e.distanceSqToSegment(h,d,f,p);if(!(E>u)){f.applyMatrix4(this.matrixWorld);S=i.ray.origin.distanceTo(f);S<i.near||S>i.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}else if(s.isGeometry){var T=s.vertices,A=T.length;for(x=0;x<A-1;x+=m){E=e.distanceSqToSegment(T[x],T[x+1],f,p);if(!(E>u)){f.applyMatrix4(this.matrixWorld);S=i.ray.origin.distanceTo(f);S<i.near||S>i.far||r.push({distance:S,point:p.clone().applyMatrix4(this.matrixWorld),index:x,face:null,faceIndex:null,object:this})}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Ze.prototype=Object.assign(Object.create(Xe.prototype),{constructor:Ze,isLineSegments:!0,computeLineDistances:function(){var t=new a,e=new a;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2)t.fromBufferAttribute(i,o),e.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e);n.addAttribute("lineDistance",new z(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e)}return this}}()}),Je.prototype=Object.assign(Object.create(Xe.prototype),{constructor:Je,isLineLoop:!0}),Ke.prototype=Object.create($.prototype),Ke.prototype.constructor=Ke,Ke.prototype.isPointsMaterial=!0,Ke.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},Qe.prototype=Object.assign(Object.create(A.prototype),{constructor:Qe,isPoints:!0,raycast:function(){var t=new y,e=new Y,n=new m;return function(i,r){function o(t,n){var o=e.distanceSqToPoint(t);if(o<d){e.closestPointToPoint(t,f),f.applyMatrix4(c);var a=i.ray.origin.distanceTo(f);if(a<i.near||a>i.far)return;r.push({distance:a,distanceToRay:Math.sqrt(o),point:f.clone(),index:n,face:null,object:s})}}var s=this,l=this.geometry,c=this.matrixWorld,u=i.params.Points.threshold;if(null===l.boundingSphere&&l.computeBoundingSphere(),n.copy(l.boundingSphere),n.applyMatrix4(c),n.radius+=u,!1!==i.ray.intersectsSphere(n)){t.getInverse(c),e.copy(i.ray).applyMatrix4(t);var h=u/((this.scale.x+this.scale.y+this.scale.z)/3),d=h*h,p=new a,f=new a;if(l.isBufferGeometry){var m=l.index,v=l.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,x=y.length;b<x;b++){var w=y[b];p.fromArray(g,3*w),o(p,w)}else{b=0;for(var _=g.length/3;b<_;b++)p.fromArray(g,3*b),o(p,b)}}else{var M=l.vertices;for(b=0,_=M.length;b<_;b++)o(M[b],b)}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),tn.prototype=Object.assign(Object.create(l.prototype),{constructor:tn,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),en.prototype=Object.create(l.prototype),en.prototype.constructor=en,en.prototype.isCompressedTexture=!0,nn.prototype=Object.create(l.prototype),nn.prototype.constructor=nn,nn.prototype.isCanvasTexture=!0,rn.prototype=Object.create(l.prototype),rn.prototype.constructor=rn,rn.prototype.isDepthTexture=!0,on.prototype=Object.create(H.prototype),on.prototype.constructor=on,an.prototype=Object.create(C.prototype),an.prototype.constructor=an,sn.prototype=Object.create(H.prototype),sn.prototype.constructor=sn,ln.prototype=Object.create(C.prototype),ln.prototype.constructor=ln,cn.prototype=Object.create(H.prototype),cn.prototype.constructor=cn,un.prototype=Object.create(C.prototype),un.prototype.constructor=un,hn.prototype=Object.create(cn.prototype),hn.prototype.constructor=hn,dn.prototype=Object.create(C.prototype),dn.prototype.constructor=dn,pn.prototype=Object.create(cn.prototype),pn.prototype.constructor=pn,fn.prototype=Object.create(C.prototype),fn.prototype.constructor=fn,mn.prototype=Object.create(cn.prototype),mn.prototype.constructor=mn,vn.prototype=Object.create(C.prototype),vn.prototype.constructor=vn,gn.prototype=Object.create(cn.prototype),gn.prototype.constructor=gn,yn.prototype=Object.create(C.prototype),yn.prototype.constructor=yn,bn.prototype=Object.create(H.prototype),bn.prototype.constructor=bn,bn.prototype.toJSON=function(){var t=H.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},xn.prototype=Object.create(C.prototype),xn.prototype.constructor=xn,wn.prototype=Object.create(H.prototype),wn.prototype.constructor=wn,_n.prototype=Object.create(C.prototype),_n.prototype.constructor=_n,Mn.prototype=Object.create(H.prototype),Mn.prototype.constructor=Mn;var jl={triangulate:function(t,e,n){n=n||2;var i,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=En(t,0,h,n,!0),p=[];if(!d)return p;if(u&&(d=On(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)s=t[f],l=t[f+1],s<i&&(i=s),l<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=Math.max(o-i,a-r),c=0!==c?1/c:0}return Tn(d,p,n,i,r,c),p}},Hl={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return Hl.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];Kn(t),Qn(n,t);var o=t.length;e.forEach(Kn);for(var a=0;a<e.length;a++)i.push(o),o+=e[a].length,Qn(n,e[a]);var s=jl.triangulate(n,i);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};ti.prototype=Object.create(C.prototype),ti.prototype.constructor=ti,ti.prototype.toJSON=function(){var t=C.prototype.toJSON.call(this);return ni(this.parameters.shapes,this.parameters.options,t)},ei.prototype=Object.create(H.prototype),ei.prototype.constructor=ei,ei.prototype.toJSON=function(){var t=H.prototype.toJSON.call(this);return ni(this.parameters.shapes,this.parameters.options,t)};var Ul={generateTopUV:function(t,e,n,i,o){var a=e[3*n],s=e[3*n+1],l=e[3*i],c=e[3*i+1],u=e[3*o],h=e[3*o+1];return[new r(a,s),new r(l,c),new r(u,h)]},generateSideWallUV:function(t,e,n,i,o,a){var s=e[3*n],l=e[3*n+1],c=e[3*n+2],u=e[3*i],h=e[3*i+1],d=e[3*i+2],p=e[3*o],f=e[3*o+1],m=e[3*o+2],v=e[3*a],g=e[3*a+1],y=e[3*a+2];return Math.abs(l-h)<.01?[new r(s,1-c),new r(u,1-d),new r(p,1-m),new r(v,1-y)]:[new r(l,1-c),new r(h,1-d),new r(f,1-m),new r(g,1-y)]}};ii.prototype=Object.create(C.prototype),ii.prototype.constructor=ii,ri.prototype=Object.create(ei.prototype),ri.prototype.constructor=ri,oi.prototype=Object.create(C.prototype),oi.prototype.constructor=oi,ai.prototype=Object.create(H.prototype),ai.prototype.constructor=ai,si.prototype=Object.create(C.prototype),si.prototype.constructor=si,li.prototype=Object.create(H.prototype),li.prototype.constructor=li,ci.prototype=Object.create(C.prototype),ci.prototype.constructor=ci,ui.prototype=Object.create(H.prototype),ui.prototype.constructor=ui,hi.prototype=Object.create(C.prototype),hi.prototype.constructor=hi,hi.prototype.toJSON=function(){var t=C.prototype.toJSON.call(this);return pi(this.parameters.shapes,t)},di.prototype=Object.create(H.prototype),di.prototype.constructor=di,di.prototype.toJSON=function(){var t=H.prototype.toJSON.call(this);return pi(this.parameters.shapes,t)},fi.prototype=Object.create(H.prototype),fi.prototype.constructor=fi,mi.prototype=Object.create(C.prototype),mi.prototype.constructor=mi,vi.prototype=Object.create(H.prototype),vi.prototype.constructor=vi,gi.prototype=Object.create(mi.prototype),gi.prototype.constructor=gi,yi.prototype=Object.create(vi.prototype),yi.prototype.constructor=yi,bi.prototype=Object.create(C.prototype),bi.prototype.constructor=bi,xi.prototype=Object.create(H.prototype),xi.prototype.constructor=xi;var Vl=Object.freeze({WireframeGeometry:on,ParametricGeometry:an,ParametricBufferGeometry:sn,TetrahedronGeometry:un,TetrahedronBufferGeometry:hn,OctahedronGeometry:dn,OctahedronBufferGeometry:pn,IcosahedronGeometry:fn,IcosahedronBufferGeometry:mn,DodecahedronGeometry:vn,DodecahedronBufferGeometry:gn,PolyhedronGeometry:ln,PolyhedronBufferGeometry:cn,TubeGeometry:yn,TubeBufferGeometry:bn,TorusKnotGeometry:xn,TorusKnotBufferGeometry:wn,TorusGeometry:_n,TorusBufferGeometry:Mn,TextGeometry:ii,TextBufferGeometry:ri,SphereGeometry:oi,SphereBufferGeometry:ai,RingGeometry:si,RingBufferGeometry:li,PlaneGeometry:G,PlaneBufferGeometry:W,LatheGeometry:ci,LatheBufferGeometry:ui,ShapeGeometry:hi,ShapeBufferGeometry:di,ExtrudeGeometry:ti,ExtrudeBufferGeometry:ei,EdgesGeometry:fi,ConeGeometry:gi,ConeBufferGeometry:yi,CylinderGeometry:mi,CylinderBufferGeometry:vi,CircleGeometry:bi,CircleBufferGeometry:xi,BoxGeometry:U,BoxBufferGeometry:V});wi.prototype=Object.create($.prototype),wi.prototype.constructor=wi,wi.prototype.isShadowMaterial=!0,wi.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this},_i.prototype=Object.create(q.prototype),_i.prototype.constructor=_i,_i.prototype.isRawShaderMaterial=!0,Mi.prototype=Object.create($.prototype),Mi.prototype.constructor=Mi,Mi.prototype.isMeshStandardMaterial=!0,Mi.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ei.prototype=Object.create(Mi.prototype),Ei.prototype.constructor=Ei,Ei.prototype.isMeshPhysicalMaterial=!0,Ei.prototype.copy=function(t){return Mi.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},Si.prototype=Object.create($.prototype),Si.prototype.constructor=Si,Si.prototype.isMeshPhongMaterial=!0,Si.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ti.prototype=Object.create(Si.prototype),Ti.prototype.constructor=Ti,Ti.prototype.isMeshToonMaterial=!0,Ti.prototype.copy=function(t){return Si.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},Ai.prototype=Object.create($.prototype),Ai.prototype.constructor=Ai,Ai.prototype.isMeshNormalMaterial=!0,Ai.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Ci.prototype=Object.create($.prototype),Ci.prototype.constructor=Ci,Ci.prototype.isMeshLambertMaterial=!0,Ci.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Li.prototype=Object.create($.prototype),Li.prototype.constructor=Li,Li.prototype.isMeshMatcapMaterial=!0,Li.prototype.copy=function(t){return $.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Pi.prototype=Object.create(Ye.prototype),Pi.prototype.constructor=Pi,Pi.prototype.isLineDashedMaterial=!0,Pi.prototype.copy=function(t){return Ye.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Gl=Object.freeze({ShadowMaterial:wi,SpriteMaterial:Ue,RawShaderMaterial:_i,ShaderMaterial:q,PointsMaterial:Ke,MeshPhysicalMaterial:Ei,MeshStandardMaterial:Mi,MeshPhongMaterial:Si,MeshToonMaterial:Ti,MeshNormalMaterial:Ai,MeshLambertMaterial:Ci,MeshDepthMaterial:Me,MeshDistanceMaterial:Ee,MeshBasicMaterial:Z,MeshMatcapMaterial:Li,LineDashedMaterial:Pi,LineBasicMaterial:Ye,Material:$}),Wl={arraySlice:function(t,e,n){return Wl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*e,l=0;l!==e;++l)r[a++]=t[s+l];return r},flattenJSON:function(t,e,n,i){for(var r=1,o=t[0];void 0!==o&&void 0===o[i];)o=t[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)}}};Object.assign(Oi.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}for(;n<o;){var l=n+o>>>1;t<e[l]?o=l:n=l+1}if(i=e[n],void 0===(r=e[n-1]))return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Oi.prototype,{beforeStart_:Oi.prototype.copySampleValue_,afterEnd_:Oi.prototype.copySampleValue_}),Ri.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Ri,DefaultSettings_:{endingStart:Zs,endingEnd:Zs},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case 2401:r=t,a=2*e-n;break;case 2402:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case 2401:o=t,s=2*n-e;break;case 2402:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f,x=0;x!==a;++x)r[x]=v*o[c+x]+g*o[l+x]+y*o[s+x]+b*o[u+x];return r}}),ki.prototype=Object.assign(Object.create(Oi.prototype),{constructor:ki,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c,h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}),Di.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Di,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(Ii,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Wl.convertArray(t.times,Array),values:Wl.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(Ii.prototype,{constructor:Ii,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:2301,InterpolantFactoryMethodDiscrete:function(t){return new Di(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new ki(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ri(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case 2300:e=this.InterpolantFactoryMethodDiscrete;break;case 2301:e=this.InterpolantFactoryMethodLinear;break;case 2302:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return 2300;case this.InterpolantFactoryMethodLinear:return 2301;case this.InterpolantFactoryMethodSmooth:return 2302}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){for(var n=this.times,i=n.length,r=0,o=i-1;r!==i&&n[r]<t;)++r;for(;-1!==o&&n[o]>e;)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var a=this.getValueSize();this.times=Wl.arraySlice(n,r,o),this.values=Wl.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!=0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"==typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==i&&Wl.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=2302===this.getInterpolation(),r=1,o=t.length-1,a=1;a<o;++a){var s=!1,l=t[a];if(l!==t[a+1]&&(1!==a||l!==l[0]))if(i)s=!0;else for(var c=a*n,u=c-n,h=c+n,d=0;d!==n;++d){var p=e[c+d];if(p!==e[u+d]||p!==e[h+d]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];var f=a*n,m=r*n;for(d=0;d!==n;++d)e[m+d]=e[f+d]}++r}}if(o>0){t[r]=t[o];for(f=o*n,m=r*n,d=0;d!==n;++d)e[m+d]=e[f+d];++r}return r!==t.length&&(this.times=Wl.arraySlice(t,0,r),this.values=Wl.arraySlice(e,0,r*n)),this},clone:function(){var t=Wl.arraySlice(this.times,0),e=Wl.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}),Ni.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ni,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),zi.prototype=Object.assign(Object.create(Ii.prototype),{constructor:zi,ValueTypeName:"color"}),Bi.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Bi,ValueTypeName:"number"}),Fi.prototype=Object.assign(Object.create(Oi.prototype),{constructor:Fi,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=t*s,c=(n-e)/(i-e),u=l+s;l!==u;l+=4)o.slerpFlat(r,0,a,l-s,a,l,c);return r}}),ji.prototype=Object.assign(Object.create(Ii.prototype),{constructor:ji,ValueTypeName:"quaternion",DefaultInterpolation:2301,InterpolantFactoryMethodLinear:function(t){return new Fi(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),Hi.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Hi,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:2300,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),Ui.prototype=Object.assign(Object.create(Ii.prototype),{constructor:Ui,ValueTypeName:"vector"}),Object.assign(Vi,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(Wi(n[r]).scale(i));return new Vi(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,o=n.length;r!==o;++r)e.push(Ii.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=Wl.getKeyframeOrder(s);s=Wl.sortedArray(s,1,c),l=Wl.sortedArray(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new Bi(".morphTargetInfluences["+e[a].name+"]",s,l).scale(1/n))}return new Vi(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],l=s.name.match(r);if(l&&l.length>1){var c=l[1],u=i[c];u||(i[c]=u=[]),u.push(s)}}var h=[];for(var c in i)h.push(Vi.CreateFromMorphTargetSequence(c,i[c],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var o=[],a=[];Wl.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)u[c[h].morphTargets[d]]=-1;for(var p in u){var f=[],m=[];for(d=0;d!==c[h].morphTargets.length;++d){var v=c[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}i.push(new Bi(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{var g=".bones["+e[l].name+"]";n(Ui,g+".position",c,"pos",i),n(ji,g+".quaternion",c,"rot",i),n(Ui,g+".scale",c,"scl",i)}}return 0===i.length?null:new Vi(r,o,i)}}),Object.assign(Vi.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new Vi(this.name,this.duration,t)}});var $l={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}},ql=new $i,Yl={};Object.assign(qi.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=$l.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0===Yl[t]){var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var l=s[1],c=!!s[2],u=s[3];u=decodeURIComponent(u),c&&(u=atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),f=0;f<u.length;f++)p[f]=u.charCodeAt(f);h="blob"===d?new Blob([p.buffer],{type:l}):p.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(u,l);break;case"json":h=JSON.parse(u);break;default:h=u}setTimeout(function(){e&&e(h),r.manager.itemEnd(t)},0)}catch(e){setTimeout(function(){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{Yl[t]=[],Yl[t].push({onLoad:e,onProgress:n,onError:i});var v=new XMLHttpRequest;for(var g in v.open("GET",t,!0),v.addEventListener("load",function(e){var n=this.response;$l.add(t,n);var i=Yl[t];if(delete Yl[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=i.length;o<a;o++){var s=i[o];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(o=0,a=i.length;o<a;o++){s=i[o];s.onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),v.addEventListener("progress",function(e){for(var n=Yl[t],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(e)}},!1),v.addEventListener("error",function(e){var n=Yl[t];delete Yl[t];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),v.addEventListener("abort",function(e){var n=Yl[t];delete Yl[t];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return r.manager.itemStart(t),v}Yl[t].push({onLoad:e,onProgress:n,onError:i})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(Yi.prototype,{load:function(t,e,n,i){var r=this,o=new qi(r.manager);o.setPath(r.path),o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=Vi.parse(t[n]);e.push(i)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(Xi.prototype,{load:function(t,e,n,i){var r=this,o=[],a=new en;a.image=o;var s=new qi(this.manager);if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var l=0,c=0,u=t.length;c<u;++c)!function(c){s.load(t[c],function(t){var n=r._parser(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},6===(l+=1)&&(1===n.mipmapCount&&(a.minFilter=is),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}(c);else s.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=is),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a},setPath:function(t){return this.path=t,this}}),Object.assign(Zi.prototype,{load:function(t,e,n,i){var r=this,o=new p,a=new qi(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:Ka,o.wrapT=void 0!==n.wrapT?n.wrapT:Ka,o.magFilter=void 0!==n.magFilter?n.magFilter:is,o.minFilter=void 0!==n.minFilter?n.minFilter:os,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=is),o.needsUpdate=!0,e&&e(o,n))},n,i),o},setPath:function(t){return this.path=t,this}}),Object.assign(Ji.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){function r(){l.removeEventListener("load",r,!1),l.removeEventListener("error",o,!1),$l.add(t,this),e&&e(this),a.manager.itemEnd(t)}function o(e){l.removeEventListener("load",r,!1),l.removeEventListener("error",o,!1),i&&i(e),a.manager.itemError(t),a.manager.itemEnd(t)}void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var a=this,s=$l.get(t);if(void 0!==s)return a.manager.itemStart(t),setTimeout(function(){e&&e(s),a.manager.itemEnd(t)},0),s;var l=document.createElementNS("http://www.w3.org/1999/xhtml","img");return l.addEventListener("load",r,!1),l.addEventListener("error",o,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(l.crossOrigin=this.crossOrigin),a.manager.itemStart(t),l.src=t,l},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ki.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=new ct,o=new Ji(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);for(var a=0,s=0;s<t.length;++s)!function(n){o.load(t[n],function(t){r.images[n]=t,6==++a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}(s);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Qi.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=new l,o=new Ji(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?bs:xs,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(tr.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(r),i.push(o),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];for(var a,s=0,l=o-1;s<=l;)if(r=Math.floor(s+(l-s)/2),(a=i[r]-n)<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,i[r]===n)return r/(o-1);var c=i[r];return(r+(n-c)/(i[r+1]-c))/(o-1)},getTangent:function(t){var e=t-1e-4,n=t+1e-4;e<0&&(e=0),n>1&&(n=1);var i=this.getPoint(e);return this.getPoint(n).clone().sub(i).normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,o=new a,s=[],l=[],c=[],u=new a,h=new y;for(n=0;n<=t;n++)i=n/t,s[n]=this.getTangentAt(i),s[n].normalize();l[0]=new a,c[0]=new a;var d=Number.MAX_VALUE,p=Math.abs(s[0].x),f=Math.abs(s[0].y),m=Math.abs(s[0].z);for(p<=d&&(d=p,o.set(1,0,0)),f<=d&&(d=f,o.set(0,1,0)),m<=d&&o.set(0,0,1),u.crossVectors(s[0],o).normalize(),l[0].crossVectors(s[0],u),c[0].crossVectors(s[0],l[0]),n=1;n<=t;n++)l[n]=l[n-1].clone(),c[n]=c[n-1].clone(),u.crossVectors(s[n-1],s[n]),u.length()>Number.EPSILON&&(u.normalize(),r=Math.acos(hl.clamp(s[n-1].dot(s[n]),-1,1)),l[n].applyMatrix4(h.makeRotationAxis(u,r))),c[n].crossVectors(s[n],l[n]);if(!0===e)for(r=Math.acos(hl.clamp(l[0].dot(l[t]),-1,1)),r/=t,s[0].dot(u.crossVectors(l[0],l[t]))>0&&(r=-r),n=1;n<=t;n++)l[n].applyMatrix4(h.makeRotationAxis(s[n],r*n)),c[n].crossVectors(s[n],l[n]);return{tangents:s,normals:l,binormals:c}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),er.prototype=Object.create(tr.prototype),er.prototype.constructor=er,er.prototype.isEllipseCurve=!0,er.prototype.getPoint=function(t,e){for(var n=e||new r,i=2*Math.PI,o=this.aEndAngle-this.aStartAngle,a=Math.abs(o)<Number.EPSILON;o<0;)o+=i;for(;o>i;)o-=i;o<Number.EPSILON&&(o=a?0:i),!0!==this.aClockwise||a||(o===i?o=-i:o-=i);var s=this.aStartAngle+t*o,l=this.aX+this.xRadius*Math.cos(s),c=this.aY+this.yRadius*Math.sin(s);if(0!==this.aRotation){var u=Math.cos(this.aRotation),h=Math.sin(this.aRotation),d=l-this.aX,p=c-this.aY;l=d*u-p*h+this.aX,c=d*h+p*u+this.aY}return n.set(l,c)},er.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},er.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},er.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},nr.prototype=Object.create(er.prototype),nr.prototype.constructor=nr,nr.prototype.isArcCurve=!0;var Xl=new a,Zl=new ir,Jl=new ir,Kl=new ir;rr.prototype=Object.create(tr.prototype),rr.prototype.constructor=rr,rr.prototype.isCatmullRomCurve3=!0,rr.prototype.getPoint=function(t,e){var n,i,r,o,s=e||new a,l=this.points,c=l.length,u=(c-(this.closed?0:1))*t,h=Math.floor(u),d=u-h;if(this.closed?h+=h>0?0:(Math.floor(Math.abs(h)/c)+1)*c:0===d&&h===c-1&&(h=c-2,d=1),this.closed||h>0?n=l[(h-1)%c]:(Xl.subVectors(l[0],l[1]).add(l[0]),n=Xl),i=l[h%c],r=l[(h+1)%c],this.closed||h+2<c?o=l[(h+2)%c]:(Xl.subVectors(l[c-1],l[c-2]).add(l[c-1]),o=Xl),"centripetal"===this.curveType||"chordal"===this.curveType){var p="chordal"===this.curveType?.5:.25,f=Math.pow(n.distanceToSquared(i),p),m=Math.pow(i.distanceToSquared(r),p),v=Math.pow(r.distanceToSquared(o),p);m<1e-4&&(m=1),f<1e-4&&(f=m),v<1e-4&&(v=m),Zl.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,f,m,v),Jl.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,f,m,v),Kl.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,f,m,v)}else"catmullrom"===this.curveType&&(Zl.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),Jl.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),Kl.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return s.set(Zl.calc(d),Jl.calc(d),Kl.calc(d)),s},rr.prototype.copy=function(t){tr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},rr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},rr.prototype.fromJSON=function(t){tr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new a).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},mr.prototype=Object.create(tr.prototype),mr.prototype.constructor=mr,mr.prototype.isCubicBezierCurve=!0,mr.prototype.getPoint=function(t,e){var n=e||new r,i=this.v0,o=this.v1,a=this.v2,s=this.v3;return n.set(fr(t,i.x,o.x,a.x,s.x),fr(t,i.y,o.y,a.y,s.y)),n},mr.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},mr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},mr.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},vr.prototype=Object.create(tr.prototype),vr.prototype.constructor=vr,vr.prototype.isCubicBezierCurve3=!0,vr.prototype.getPoint=function(t,e){var n=e||new a,i=this.v0,r=this.v1,o=this.v2,s=this.v3;return n.set(fr(t,i.x,r.x,o.x,s.x),fr(t,i.y,r.y,o.y,s.y),fr(t,i.z,r.z,o.z,s.z)),n},vr.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},vr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},vr.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},gr.prototype=Object.create(tr.prototype),gr.prototype.constructor=gr,gr.prototype.isLineCurve=!0,gr.prototype.getPoint=function(t,e){var n=e||new r;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},gr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},gr.prototype.getTangent=function(){return this.v2.clone().sub(this.v1).normalize()},gr.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},gr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},gr.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},yr.prototype=Object.create(tr.prototype),yr.prototype.constructor=yr,yr.prototype.isLineCurve3=!0,yr.prototype.getPoint=function(t,e){var n=e||new a;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},yr.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},yr.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},yr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},yr.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},br.prototype=Object.create(tr.prototype),br.prototype.constructor=br,br.prototype.isQuadraticBezierCurve=!0,br.prototype.getPoint=function(t,e){var n=e||new r,i=this.v0,o=this.v1,a=this.v2;return n.set(cr(t,i.x,o.x,a.x),cr(t,i.y,o.y,a.y)),n},br.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},br.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},br.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},xr.prototype=Object.create(tr.prototype),xr.prototype.constructor=xr,xr.prototype.isQuadraticBezierCurve3=!0,xr.prototype.getPoint=function(t,e){var n=e||new a,i=this.v0,r=this.v1,o=this.v2;return n.set(cr(t,i.x,r.x,o.x),cr(t,i.y,r.y,o.y),cr(t,i.z,r.z,o.z)),n},xr.prototype.copy=function(t){return tr.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},xr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},xr.prototype.fromJSON=function(t){return tr.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},wr.prototype=Object.create(tr.prototype),wr.prototype.constructor=wr,wr.prototype.isSplineCurve=!0,wr.prototype.getPoint=function(t,e){var n=e||new r,i=this.points,o=(i.length-1)*t,a=Math.floor(o),s=o-a,l=i[0===a?a:a-1],c=i[a],u=i[a>i.length-2?i.length-1:a+1],h=i[a>i.length-3?i.length-1:a+2];return n.set(or(s,l.x,c.x,u.x,h.x),or(s,l.y,c.y,u.y,h.y)),n},wr.prototype.copy=function(t){tr.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},wr.prototype.toJSON=function(){var t=tr.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},wr.prototype.fromJSON=function(t){tr.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new r).fromArray(i))}return this};var Ql=Object.freeze({ArcCurve:nr,CatmullRomCurve3:rr,CubicBezierCurve:mr,CubicBezierCurve3:vr,EllipseCurve:er,LineCurve:gr,LineCurve3:yr,QuadraticBezierCurve:br,QuadraticBezierCurve3:xr,SplineCurve:wr});_r.prototype=Object.assign(Object.create(tr.prototype),{constructor:_r,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new gr(e,t))},getPoint:function(t){for(var e=t*this.getLength(),n=this.getCurveLengths(),i=0;i<n.length;){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){tr.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=tr.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){tr.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new Ql[i.type]).fromJSON(i))}return this}}),Mr.prototype=Object.assign(Object.create(_r.prototype),{constructor:Mr,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new gr(this.currentPoint.clone(),new r(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var o=new br(this.currentPoint.clone(),new r(t,e),new r(n,i));this.curves.push(o),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,o,a){var s=new mr(this.currentPoint.clone(),new r(t,e),new r(n,i),new r(o,a));this.curves.push(s),this.currentPoint.set(o,a)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new wr(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,i,r,o)},absarc:function(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},ellipse:function(t,e,n,i,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+l,e+c,n,i,r,o,a,s)},absellipse:function(t,e,n,i,r,o,a,s){var l=new er(t,e,n,i,r,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(t){return _r.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=_r.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return _r.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Er.prototype=Object.assign(Object.create(Mr.prototype),{constructor:Er,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Mr.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Mr.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Mr.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Mr).fromJSON(i))}return this}}),Sr.prototype=Object.assign(Object.create(A.prototype),{constructor:Sr,isLight:!0,copy:function(t){return A.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=A.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),Tr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Tr,isHemisphereLight:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(Ar.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),Cr.prototype=Object.assign(Object.create(Ar.prototype),{constructor:Cr,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*hl.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),Lr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Lr,isSpotLight:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Pr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Pr,isPointLight:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),Or.prototype=Object.assign(Object.create(Pe.prototype),{constructor:Or,isOrthographicCamera:!0,copy:function(t,e){return Pe.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/l),o=r+u*(this.view.width/l),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=A.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),Rr.prototype=Object.assign(Object.create(Ar.prototype),{constructor:Rr}),kr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:kr,isDirectionalLight:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),Dr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Dr,isAmbientLight:!0}),Ir.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Ir,isRectAreaLight:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=Sr.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(Nr.prototype,{load:function(t,e,n,i){var r=this,o=new qi(r.manager);o.setPath(r.path),o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){function e(t){return void 0===n[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),n[t]}var n=this.textures,i=new Gl[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var o in t.uniforms){var l=t.uniforms[o];switch(i.uniforms[o]={},l.type){case"t":i.uniforms[o].value=e(l.value);break;case"c":i.uniforms[o].value=(new w).setHex(l.value);break;case"v2":i.uniforms[o].value=(new r).fromArray(l.value);break;case"v3":i.uniforms[o].value=(new a).fromArray(l.value);break;case"v4":i.uniforms[o].value=(new c).fromArray(l.value);break;case"m3":i.uniforms[o].value=(new s).fromArray(l.value);case"m4":i.uniforms[o].value=(new y).fromArray(l.value);break;default:i.uniforms[o].value=l.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var u in t.extensions)i.extensions[u]=t.extensions[u];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=e(t.map)),void 0!==t.matcap&&(i.matcap=e(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=e(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=e(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=e(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var h=t.normalScale;!1===Array.isArray(h)&&(h=[h,h]),i.normalScale=(new r).fromArray(h)}return void 0!==t.displacementMap&&(i.displacementMap=e(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=e(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=e(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=e(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=e(t.specularMap)),void 0!==t.envMap&&(i.envMap=e(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=e(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=e(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=e(t.gradientMap)),i},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var tc={decodeText:function(t){if("undefined"!=typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(t){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};zr.prototype=Object.assign(Object.create(H.prototype),{constructor:zr,isInstancedBufferGeometry:!0,copy:function(t){return H.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=H.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),Br.prototype=Object.assign(Object.create(L.prototype),{constructor:Br,isInstancedBufferAttribute:!0,copy:function(t){return L.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=L.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.assign(Fr.prototype,{load:function(t,e,n,i){var r=this,o=new qi(r.manager);o.setPath(r.path),o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new zr:new H,n=t.data.index;if(void 0!==n){var i=new ec[n.type](n.array);e.setIndex(new L(i,1))}var r=t.data.attributes;for(var o in r){var s=r[o],l=(i=new ec[s.type](s.array),s.isInstancedBufferAttribute?Br:L),c=new l(i,s.itemSize,s.normalized);void 0!==s.name&&(c.name=s.name),e.addAttribute(o,c)}var u=t.data.morphAttributes;if(u)for(var o in u){for(var h=u[o],d=[],p=0,f=h.length;p<f;p++){s=h[p],i=new ec[s.type](s.array),c=new L(i,s.itemSize,s.normalized);void 0!==s.name&&(c.name=s.name),d.push(c)}e.morphAttributes[o]=d}var v=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==v){p=0;for(var g=v.length;p!==g;++p){var y=v[p];e.addGroup(y.start,y.count,y.materialIndex)}}var b=t.data.boundingSphere;if(void 0!==b){var x=new a;void 0!==b.center&&x.fromArray(b.center),e.boundingSphere=new m(x,b.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var ec={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!=typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};Object.assign(jr.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=this,o=void 0===this.path?tc.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new qi(r.manager);a.setPath(this.path),a.load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(e){return void 0!==i&&i(e),void console.error("THREE:ObjectLoader: Can't parse "+t+".",e.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,i)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Er).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new Fr,r=0,o=t.length;r<o;r++){var a,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Vl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Vl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Vl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Vl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Vl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Vl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Vl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Vl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Vl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Vl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Vl[s.type]((new Ql[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Vl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Vl[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,u=s.shapes.length;c<u;c++){var h=e[s.shapes[c]];l.push(h)}a=new Vl[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,u=s.shapes.length;c<u;c++){h=e[s.shapes[c]];l.push(h)}var d=s.options.extrudePath;void 0!==d&&(s.options.extrudePath=(new Ql[d.type]).fromJSON(d)),a=new Vl[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var p=new THREE.LegacyJSONLoader;a=p.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new Nr;r.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=r.parse(u)),l.push(n[u.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=Vi.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){function n(t){return i.manager.itemStart(t),a.load(t,function(){i.manager.itemEnd(t)},void 0,function(){i.manager.itemError(t),i.manager.itemEnd(t)})}var i=this,r={};if(void 0!==t&&t.length>0){var o=new $i(e),a=new Ji(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,l=t.length;s<l;s++){var c=t[s],u=c.url;if(Array.isArray(u)){r[c.uuid]=[];for(var h=0,d=u.length;h<d;h++){var p=u[h],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:i.resourcePath+p;r[c.uuid].push(n(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:i.resourcePath+c.url;r[c.uuid]=n(f)}}}return r},parseTextures:function(t,e){function n(t,e){return"number"==typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a,s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),a=Array.isArray(e[s.image])?new ct(e[s.image]):new l(e[s.image]),a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,nc)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],ic),a.wrapT=n(s.wrap[1],ic)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,rc)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,rc)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),i[s.uuid]=a}return i},parseObject:function(t,e,n){function i(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function r(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}var o;switch(t.type){case"Scene":o=new Fe,void 0!==t.background&&Number.isInteger(t.background)&&(o.background=new w(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?o.fog=new Be(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(o.fog=new ze(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":o=new Oe(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(o.focus=t.focus),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.filmGauge&&(o.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(o.filmOffset=t.filmOffset),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"OrthographicCamera":o=new Or(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(o.zoom=t.zoom),void 0!==t.view&&(o.view=Object.assign({},t.view));break;case"AmbientLight":o=new Dr(t.color,t.intensity);break;case"DirectionalLight":o=new kr(t.color,t.intensity);break;case"PointLight":o=new Pr(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":o=new Ir(t.color,t.intensity,t.width,t.height);break;case"SpotLight":o=new Lr(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":o=new Tr(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=i(t.geometry),s=r(t.material);o=a.bones&&a.bones.length>0?new We(a,s):new J(a,s),void 0!==t.drawMode&&o.setDrawMode(t.drawMode);break;case"LOD":o=new Ge;break;case"Line":o=new Xe(i(t.geometry),r(t.material),t.mode);break;case"LineLoop":o=new Je(i(t.geometry),r(t.material));break;case"LineSegments":o=new Ze(i(t.geometry),r(t.material));break;case"PointCloud":case"Points":o=new Qe(i(t.geometry),r(t.material));break;case"Sprite":o=new Ve(r(t.material));break;case"Group":o=new Le;break;default:o=new A}if(o.uuid=t.uuid,void 0!==t.name&&(o.name=t.name),void 0!==t.matrix?(o.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(o.matrixAutoUpdate=t.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(void 0!==t.position&&o.position.fromArray(t.position),void 0!==t.rotation&&o.rotation.fromArray(t.rotation),void 0!==t.quaternion&&o.quaternion.fromArray(t.quaternion),void 0!==t.scale&&o.scale.fromArray(t.scale)),void 0!==t.castShadow&&(o.castShadow=t.castShadow),void 0!==t.receiveShadow&&(o.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(o.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(o.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&o.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(o.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(o.visible=t.visible),void 0!==t.frustumCulled&&(o.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(o.renderOrder=t.renderOrder),void 0!==t.userData&&(o.userData=t.userData),void 0!==t.layers&&(o.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,c=0;c<l.length;c++)o.add(this.parseObject(l[c],e,n));if("LOD"===t.type)for(var u=t.levels,h=0;h<u.length;h++){var d=u[h],p=o.getObjectByProperty("uuid",d.object);void 0!==p&&o.addLevel(p,d.distance)}return o}});var nc={UVMapping:300,CubeReflectionMapping:Ga,CubeRefractionMapping:Wa,EquirectangularReflectionMapping:$a,EquirectangularRefractionMapping:qa,SphericalReflectionMapping:Ya,CubeUVReflectionMapping:Xa,CubeUVRefractionMapping:Za},ic={RepeatWrapping:Ja,ClampToEdgeWrapping:Ka,MirroredRepeatWrapping:Qa},rc={NearestFilter:ts,NearestMipMapNearestFilter:es,NearestMipMapLinearFilter:ns,LinearFilter:is,LinearMipMapNearestFilter:rs,LinearMipMapLinearFilter:os};Hr.prototype={constructor:Hr,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=$l.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)}).then(function(n){$l.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Ur.prototype,{moveTo:function(t,e){this.currentPath=new Mr,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new Er;o.curves=r.curves,e.push(o)}return e}var i=Hl.isClockWise,r=this.subPaths;if(0===r.length)return[];if(!0===e)return n(r);var o,a,s,l=[];if(1===r.length)return a=r[0],s=new Er,s.curves=a.curves,l.push(s),l;var c=!i(r[0].getPoints());c=t?!c:c;var u,h=[],d=[],p=[],f=0;d[f]=void 0,p[f]=[];for(var m=0,v=r.length;m<v;m++)a=r[m],u=a.getPoints(),o=i(u),o=t?!o:o,o?(!c&&d[f]&&f++,d[f]={s:new Er,p:u},d[f].s.curves=a.curves,c&&f++,p[f]=[]):p[f].push({h:a,p:u[0]});if(!d[0])return n(r);if(d.length>1){for(var g=!1,y=[],b=0,x=d.length;b<x;b++)h[b]=[];for(b=0,x=d.length;b<x;b++)for(var w=p[b],_=0;_<w.length;_++){for(var M=w[_],E=!0,S=0;S<d.length;S++)(function(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],l=-l,s=e[r],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var u=c*(t.x-a.x)-l*(t.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return i})(M.p,d[S].p)&&(b!==S&&y.push({froms:b,tos:S,hole:_}),E?(E=!1,h[S].push(M)):g=!0);E&&h[b].push(M)}y.length>0&&(g||(p=h))}m=0;for(var T,A=d.length;m<A;m++){s=d[m].s,l.push(s),T=p[m];for(var C=0,L=T.length;C<L;C++)s.holes.push(T[C].h)}return l}}),Object.assign(Vr.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=Gr(t,e,this.data),r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign($r.prototype,{load:function(t,e,n,i){var r=this,o=new qi(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(e){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new Vr(t)},setPath:function(t){return this.path=t,this}}),qr.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}},Object.assign(qr.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:function(){var t={NoBlending:oa,NormalBlending:aa,AdditiveBlending:sa,SubtractiveBlending:la,MultiplyBlending:ca,CustomBlending:ua},e=new w,n=new Qi,i=new Nr;return function(r,o,a){function s(t,e,i,r,s){var c,u=o+t,h=qr.Handlers.get(u);null!==h?c=h.load(u):(n.setCrossOrigin(a),c=n.load(u)),void 0!==e&&(c.repeat.fromArray(e),1!==e[0]&&(c.wrapS=Ja),1!==e[1]&&(c.wrapT=Ja)),void 0!==i&&c.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(c.wrapS=Ja),"mirror"===r[0]&&(c.wrapS=Qa),"repeat"===r[1]&&(c.wrapT=Ja),"mirror"===r[1]&&(c.wrapT=Qa)),void 0!==s&&(c.anisotropy=s);var d=hl.generateUUID();return l[d]=c,d}var l={},c={uuid:hl.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(h).getHex();break;case"colorSpecular":c.specular=e.fromArray(h).getHex();break;case"colorEmissive":c.emissive=e.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=s(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=s(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=s(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=s(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=s(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=s(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=s(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=s(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=s(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=s(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=ta;break;case"doubleSided":c.side=ea;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=h;break;case"vertexColors":!0===h&&(c.vertexColors=ra),"face"===h&&(c.vertexColors=ia);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h)}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),i.setTextures(l),i.parse(c)}}()});var oc,ac={getContext:function(){return void 0===oc&&(oc=new(window.AudioContext||window.webkitAudioContext)),oc},setContext:function(t){oc=t}};Object.assign(Yr.prototype,{load:function(t,e,n,i){var r=new qi(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,function(t){var n=t.slice(0);ac.getContext().decodeAudioData(n,function(t){e(t)})},n,i)},setPath:function(t){return this.path=t,this}}),Object.assign(Xr.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e=.282095*o[0],e+=.488603*o[1]*i,e+=.488603*o[2]*r,e+=.488603*o[3]*n,e+=1.092548*o[4]*(n*i),e+=1.092548*o[5]*(i*r),e+=.315392*o[6]*(3*r*r-1),e+=1.092548*o[7]*(n*r),e+.546274*o[8]*(n*n-i*i)},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e=.886227*o[0],e+=2*o[1]*.511664*i,e+=2*o[2]*.511664*r,e+=2*o[3]*.511664*n,e+=2*o[4]*.429043*n*i,e+=2*o[5]*.429043*i*r,e+=o[6]*(.743125*r*r-.247708),e+=2*o[7]*.429043*n*r,e+.429043*o[8]*(n*n-i*i)},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var e=this.coefficients,n=0;n<9;n++)e[n].fromArray(t,3*n);return this},toArray:function(){for(var t=[],e=this.coefficients,n=0;n<9;n++)e[n].toArray(t,3*n);return t}}),Object.assign(Xr,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),Zr.prototype=Object.assign(Object.create(Sr.prototype),{constructor:Zr,isLightProbe:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){return Sr.prototype.toJSON.call(this,t)}}),Jr.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Jr,isHemisphereLightProbe:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this},toJSON:function(t){return Zr.prototype.toJSON.call(this,t)}}),Kr.prototype=Object.assign(Object.create(Zr.prototype),{constructor:Kr,isAmbientLightProbe:!0,copy:function(t){return Zr.prototype.copy.call(this,t),this},toJSON:function(t){return Zr.prototype.toJSON.call(this,t)}}),Object.assign(Qr.prototype,{update:function(){var t,e,n,i,r,o,a,s,l=new y,c=new y;return function(u){if(t!==this||e!==u.focus||n!==u.fov||i!==u.aspect*this.aspect||r!==u.near||o!==u.far||a!==u.zoom||s!==this.eyeSep){t=this,e=u.focus,n=u.fov,i=u.aspect*this.aspect,r=u.near,o=u.far,a=u.zoom;var h=u.projectionMatrix.clone();s=this.eyeSep/2;var d,p,f=s*r/e,m=r*Math.tan(hl.DEG2RAD*n*.5)/a;c.elements[12]=-s,l.elements[12]=s,d=-m*i+f,p=m*i+f,h.elements[0]=2*r/(p-d),h.elements[8]=(p+d)/(p-d),this.cameraL.projectionMatrix.copy(h),d=-m*i-f,p=m*i-f,h.elements[0]=2*r/(p-d),h.elements[8]=(p+d)/(p-d),this.cameraR.projectionMatrix.copy(h)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(l)}}()});var sc=90,lc=1;to.prototype=Object.create(A.prototype),to.prototype.constructor=to,Object.assign(eo.prototype,{start:function(){this.startTime=("undefined"==typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"==typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),no.prototype=Object.assign(Object.create(A.prototype),{constructor:no,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new a,e=new o,n=new a,i=new a,r=new eo;return function(o){A.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=r.getDelta(),this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),a.positionX){var l=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(t.x,l),a.positionY.linearRampToValueAtTime(t.y,l),a.positionZ.linearRampToValueAtTime(t.z,l),a.forwardX.linearRampToValueAtTime(i.x,l),a.forwardY.linearRampToValueAtTime(i.y,l),a.forwardZ.linearRampToValueAtTime(i.z,l),a.upX.linearRampToValueAtTime(s.x,l),a.upY.linearRampToValueAtTime(s.y,l),a.upZ.linearRampToValueAtTime(s.z,l)}else a.setPosition(t.x,t.y,t.z),a.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z)}}()}),io.prototype=Object.assign(Object.create(A.prototype),{constructor:io,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this)},stop:function(){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this)},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this)},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){return!1===this.hasPlaybackControl?void console.warn("THREE.Audio: this Audio has no playback control."):(this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this)},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),ro.prototype=Object.assign(Object.create(io.prototype),{constructor:ro,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var t=new a,e=new o,n=new a,i=new a;return function(r){if(A.prototype.updateMatrixWorld.call(this,r),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(t,e,n),i.set(0,0,1).applyQuaternion(e);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(t.x,a),o.positionY.linearRampToValueAtTime(t.y,a),o.positionZ.linearRampToValueAtTime(t.z,a),o.orientationX.linearRampToValueAtTime(i.x,a),o.orientationY.linearRampToValueAtTime(i.y,a),o.orientationZ.linearRampToValueAtTime(i.z,a)}else o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z)}}}()}),Object.assign(oo.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(ao.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*e;this._mixBufferRegion(n,i,a,1-r,e)}for(var s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){o.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*i}}});var cc,uc,hc="\\[\\]\\.:\\/";Object.assign(so.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(lo,{Composite:so,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new lo.Composite(t,e,n):new lo(t,e,n)},sanitizeNodeName:function(){var t=new RegExp("["+hc+"]","g");return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+hc+"]",e="[^"+hc.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),i=/(WCOD+)?/.source.replace("WCOD",e),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),a=new RegExp("^"+n+i+r+o+"$"),s=["material","materials","bones"];return function(t){var e=a.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(lo.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=lo.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(lo.prototype,{_getValue_unbound:lo.prototype.getValue,_setValue_unbound:lo.prototype.setValue}),Object.assign(co.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,p=i[d];if(void 0===p){p=e++,i[d]=p,t.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new lo(h,r[f],o[f]))}else if(p<n){l=t[p];var v=--n,g=t[v];i[g.uuid]=p,t[p]=g,i[d]=v,t[v]=h;for(f=0,m=s;f!==m;++f){var y=a[f],b=y[v],x=y[p];y[p]=b,void 0===x&&(x=new lo(h,r[f],o[f])),y[v]=x}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=n[l];if(void 0!==c&&c>=e){var u=e++,h=t[u];n[h.uuid]=c,t[c]=h,n[l]=u,t[u]=s;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[u],v=f[c];f[c]=m,f[u]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],c=l.uuid,u=i[c];if(void 0!==u)if(delete i[c],u<n){var h=--n,d=t[h],p=--e,f=t[p];i[d.uuid]=u,t[u]=d,i[f.uuid]=h,t[h]=f,t.pop();for(var m=0,v=o;m!==v;++m){var g=r[m],y=g[h],b=g[p];g[u]=y,g[h]=b,g.pop()}}else{p=--e,f=t[p];i[f.uuid]=u,t[u]=f,t.pop();for(m=0,v=o;m!==v;++m){g=r[m];g[u]=g[p],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(var h=c,d=s.length;h!==d;++h){var p=s[h];u[h]=new lo(p,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a];e[t[a]]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(uo.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=r/i,a=i/r;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/a,l[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;null!==n&&(e*=n.evaluate(t)[0],t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e))}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,o=2202===i;if(0===t)return-1===r?e:o&&1==(1&r)?n-e:e;if(2200===i){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&1==(1&r))return n-e}return e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=2401,i.endingEnd=2401):(i.endingStart=t?this.zeroSlopeAtStart?2401:Zs:2402,i.endingEnd=e?this.zeroSlopeAtEnd?2401:Zs:2402)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}),ho.prototype=Object.assign(Object.create(i.prototype),{constructor:ho,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var h=i[u],d=h.name,p=c[d];if(void 0!==p)o[u]=p;else{if(void 0!==(p=o[u])){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=e&&e._propertyBindings[u].binding.parsedPath;p=new ao(lo.create(n,d,f),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0==s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null,delete a.actionByRoot[(t._localRoot||this._root).uuid],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0==--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],o=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r];t:{for(var c in a)break t;delete o[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new ki(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Vi.findByName(n,t):t,o=null!==r?r.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new uo(this,r,e);return this._bindAction(c,s),this._addInactiveAction(c,o,i),c},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"==typeof t?Vi.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a)e[a]._update(i,t,r,o);var s=this._bindings,l=this._nActiveBindings;for(a=0;a!==l;++a)s[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,e[c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,o=r[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var l in s){var c=s[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),po.prototype.clone=function(){return new po(void 0===this.value.clone?this.value:this.value.clone())},fo.prototype=Object.assign(Object.create(je.prototype),{constructor:fo,isInstancedInterleavedBuffer:!0,copy:function(t){return je.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(mo.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return go(t,this,i,e),i.sort(vo),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=t.length;r<o;r++)go(t[r],this,i,e);return i.sort(vo),i}}),Object.assign(yo.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(hl.clamp(e/this.radius,-1,1))),this}}),Object.assign(bo.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}),Object.assign(xo.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new r;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new r),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new r),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new r),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new r),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new r;return function(e){return t.copy(e).clamp(this.min,this.max).sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(wo.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new a),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new a),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new a),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new a,e=new a;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),a=o/r;return i&&(a=hl.clamp(a,0,1)),a}}(),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new a),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),_o.prototype=Object.create(A.prototype),_o.prototype.constructor=_o,_o.prototype.isImmediateRenderObject=!0,Mo.prototype=Object.create(Ze.prototype),Mo.prototype.constructor=Mo,Mo.prototype.update=function(){var t=new a,e=new a,n=new s;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var d=l[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[i[p]]],v=d.vertexNormals[p];t.copy(m).applyMatrix4(r),e.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(c=0,p=0,f=g.count;p<f;p++)t.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(r),e.set(y.getX(p),y.getY(p),y.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}o.needsUpdate=!0}}(),Eo.prototype=Object.create(A.prototype),Eo.prototype.constructor=Eo,Eo.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},Eo.prototype.update=function(){var t=new a;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),To.prototype=Object.create(Ze.prototype),To.prototype.constructor=To,To.prototype.updateMatrixWorld=function(){var t=new a,e=new y,n=new y;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(l,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(l+1,t.x,t.y,t.z),l+=2)}o.getAttribute("position").needsUpdate=!0,A.prototype.updateMatrixWorld.call(this,i)}}(),Ao.prototype=Object.create(J.prototype),Ao.prototype.constructor=Ao,Ao.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Ao.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},Co.prototype=Object.create(Xe.prototype),Co.prototype.constructor=Co,Co.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},Co.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},Lo.prototype=Object.create(A.prototype),Lo.prototype.constructor=Lo,Lo.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},Lo.prototype.update=function(){var t=new a,e=new w,n=new w;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?e:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),Po.prototype=Object.create(J.prototype),Po.prototype.constructor=Po,Po.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},Po.prototype.onBeforeRender=function(){return function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity}}(),Oo.prototype=Object.assign(Object.create(Ze.prototype),{constructor:Oo,copy:function(t){return Ze.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),Ro.prototype=Object.create(Ze.prototype),Ro.prototype.constructor=Ro,ko.prototype=Object.create(Xe.prototype),ko.prototype.constructor=ko,ko.prototype.update=function(){function t(t,i,o,a){var s=(i-t)/o;for(f.setXYZ(h,0,0,0),d++,e=t;e<i;e+=s)n=h+d,f.setXYZ(n,Math.sin(e)*r,0,Math.cos(e)*r),f.setXYZ(n+1,Math.sin(Math.min(e+s,i))*r,0,Math.cos(Math.min(e+s,i))*r),f.setXYZ(n+2,0,0,0),d+=3;p.addGroup(h,d,a),h+=d,d=0}var e,n,i=this.audio,r=this.range,o=this.divisionsInnerAngle,a=this.divisionsOuterAngle,s=hl.degToRad(i.panner.coneInnerAngle),l=hl.degToRad(i.panner.coneOuterAngle),c=s/2,u=l/2,h=0,d=0,p=this.geometry,f=p.attributes.position;p.clearGroups(),t(-u,-c,a,0),t(-c,c,o,1),t(c,u,a,0),f.needsUpdate=!0,s===l&&(this.material[0].visible=!1)},ko.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},Do.prototype=Object.create(Ze.prototype),Do.prototype.constructor=Do,Do.prototype.update=function(){var t=new a,e=new a,n=new s;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var h=s[c],d=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(l,t.x,t.y,t.z),l+=1,r.setXYZ(l,e.x,e.y,e.z),l+=1}r.needsUpdate=!0}}(),Io.prototype=Object.create(A.prototype),Io.prototype.constructor=Io,Io.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},Io.prototype.update=function(){var t=new a,e=new a,n=new a;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=n.length()}}(),No.prototype=Object.create(Ze.prototype),No.prototype.constructor=No,No.prototype.update=function(){function t(t,o,a,s){i.set(o,a,s).unproject(r);var l=n[t];if(void 0!==l)for(var c=e.getAttribute("position"),u=0,h=l.length;u<h;u++)c.setXYZ(l[u],i.x,i.y,i.z)}var e,n,i=new a,r=new Pe;return function(){e=this.geometry,n=this.pointMap,r.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),t("c",0,0,-1),t("t",0,0,1),t("n1",-1,-1,-1),t("n2",1,-1,-1),t("n3",-1,1,-1),t("n4",1,1,-1),t("f1",-1,-1,1),t("f2",1,-1,1),t("f3",-1,1,1),t("f4",1,1,1),t("u1",.7,1.1,-1),t("u2",-.7,1.1,-1),t("u3",0,2,-1),t("cf1",-1,0,1),t("cf2",1,0,1),t("cf3",0,-1,1),t("cf4",0,1,1),t("cn1",-1,0,-1),t("cn2",1,0,-1),t("cn3",0,-1,-1),t("cn4",0,1,-1),e.getAttribute("position").needsUpdate=!0}}(),zo.prototype=Object.create(Ze.prototype),zo.prototype.constructor=zo,zo.prototype.update=function(){var t=new f;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),zo.prototype.setFromObject=function(t){return this.object=t,this.update(),this},zo.prototype.copy=function(t){return Ze.prototype.copy.call(this,t),this.object=t.object,this},zo.prototype.clone=function(){return(new this.constructor).copy(this)},Bo.prototype=Object.create(Ze.prototype),Bo.prototype.constructor=Bo,Bo.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),A.prototype.updateMatrixWorld.call(this,t))},Fo.prototype=Object.create(Xe.prototype),Fo.prototype.constructor=Fo,Fo.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?ta:Qo,this.lookAt(this.plane.normal),A.prototype.updateMatrixWorld.call(this,t)},jo.prototype=Object.create(A.prototype),jo.prototype.constructor=jo,jo.prototype.setDirection=function(){var t,e=new a;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),jo.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},jo.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},jo.prototype.copy=function(t){return A.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},jo.prototype.clone=function(){return(new this.constructor).copy(this)},Ho.prototype=Object.create(Ze.prototype),Ho.prototype.constructor=Ho,tr.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(tr.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(_r.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new C,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new a(r.x,r.y,r.z||0))}return e}}),Object.assign(Mr.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Vo.prototype=Object.create(rr.prototype),Go.prototype=Object.create(rr.prototype),Wo.prototype=Object.create(rr.prototype),Object.assign(Wo.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Oo.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},To.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(qr.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),tc.extractUrlBase(t)}}),Object.assign(jr.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(xo.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(f.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),wo.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(hl,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),hl.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),hl.ceilPowerOfTwo(t)}}),Object.assign(s.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(y.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new a),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)}}),v.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},o.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Y.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(X.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(X,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),X.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),X.getNormal(t,e,n,i)}}),Object.assign(Er.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new ti(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new hi(this,t)}}),Object.assign(r.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(a.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(c.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(C.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(A.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(A.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(Ge.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty($e.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),We.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(tr.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Oe.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Sr.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(L.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(H.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(H.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(ei.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(po.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties($.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new w}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=1===t}}}),Object.defineProperties(Si.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(q.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ne.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Ne.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Se.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(d.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(u.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(De.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),io.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this;return(new Yr).load(t,function(t){e.setBuffer(t)}),this},oo.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},to.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},pl.crossOrigin=void 0,pl.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Qi;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},pl.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new Ki;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},pl.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},pl.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},function(t,e,n){"use strict";(function(t){function i(t){var e={video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1};this.constraints=O()(e,t),this.container=null,this.scene=null,this.element=null,this.devices=[],this.stream=null,this.ratioScalar=1,this.videoDeviceIndex=0}function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16777215,e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1500;this.dpr=window.devicePixelRatio;var i=this.createCanvas(),r=i.canvas,o=i.context,a=new R.x({color:t,map:this.createCanvasTexture(r)});R.y.call(this,a),this.canvasWidth=r.width,this.canvasHeight=r.height,this.context=o,this.color=t instanceof R.z?t:new R.z(t),this.autoSelect=e,this.dwellTime=n,this.rippleDuration=500,this.position.z=-10,this.center.set(.5,.5),this.scale.set(.5,.5,1),this.startTimestamp=null,this.timerId=null,this.callback=null,this.frustumCulled=!1,this.updateCanvasArcByProgress(0)}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:300,e=arguments[1],n=arguments[2];e=e||B.Info,R.y.call(this),this.type="infospot",this.animated=void 0===n||n,this.isHovering=!1,this.frustumCulled=!1,this.element=null,this.toPanorama=null,this.cursorStyle=null,this.mode=z.NORMAL,this.scale.set(t,t,1),this.rotation.y=Math.PI,this.container=null,this.originalRaycast=this.raycast,this.HANDLER_FOCUS=null,this.material.side=R.f,this.material.depthTest=!1,this.material.transparent=!0,this.material.opacity=0,this.scaleUpAnimation=new U.Tween,this.scaleDownAnimation=new U.Tween;var i=function(e){if(this.material){var n=e.image.width/e.image.height,i=new R.o;e.image.width=e.image.naturalWidth||64,e.image.height=e.image.naturalHeight||64,this.scale.set(n*t,t,1),i.copy(this.scale),this.scaleUpAnimation=new U.Tween(this.scale).to({x:1.3*i.x,y:1.3*i.y},500).easing(U.Easing.Elastic.Out),this.scaleDownAnimation=new U.Tween(this.scale).to({x:i.x,y:i.y},500).easing(U.Easing.Elastic.Out),this.material.map=e,this.material.needsUpdate=!0}}.bind(this);this.showAnimation=new U.Tween(this.material).to({opacity:1},500).onStart(this.enableRaycast.bind(this,!0)).easing(U.Easing.Quartic.Out),this.hideAnimation=new U.Tween(this.material).to({opacity:0},500).onStart(this.enableRaycast.bind(this,!1)).easing(U.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("panolens-dual-eye-effect",this.onDualEyeEffect),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("dismiss",this.onDismiss),this.addEventListener("panolens-infospot-focus",this.setFocusMethod),j.load(e,i)}function a(t){t||console.warn("PANOLENS.Widget: No container specified"),R.u.call(this),this.DEFAULT_TRANSITION="all 0.27s ease",this.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),this.PREVENT_EVENT_HANDLER=function(t){t.preventDefault(),t.stopPropagation()},this.container=t,this.barElement=null,this.fullscreenElement=null,this.videoElement=null,this.settingElement=null,this.mainMenu=null,this.activeMainItem=null,this.activeSubMenu=null,this.mask=null}function s(t,e){R.h.call(this,t,e),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=1e3,this.defaultInfospotSize=350,this.container=void 0,this.loaded=!1,this.linkedSpots=[],this.isInfospotVisible=!1,this.linkingImageURL=void 0,this.linkingImageScale=void 0,this.material.side=R.B,this.material.opacity=0,this.scale.x*=-1,this.renderOrder=-1,this.active=!1,this.infospotAnimation=new U.Tween(this).to({},this.animationDuration/2),this.addEventListener("load",this.fadeIn.bind(this)),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("click",this.onClick.bind(this)),this.setupTransitions()}function l(t,e,n){var i=e||new R.C(5e3,60,40),r=n||new R.k({opacity:0,transparent:!0});s.call(this,i,r),this.src=t,this.radius=5e3}function c(){var t=new R.D,e=new R.k({color:0,opacity:0,transparent:!0});t.addAttribute("position",new R.E(new Float32Array,1)),s.call(this,t,e)}function u(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=O()({},R.F.cube),n=new R.G(1e4,1e4,1e4),i=new R.H({fragmentShader:e.fragmentShader,vertexShader:e.vertexShader,uniforms:e.uniforms,side:R.B,transparent:!0});s.call(this,n,i),this.images=t,this.edgeLength=1e4,this.material.uniforms.opacity.value=0}function h(){for(var t=[],e=0;e<6;e++)t.push(B.WhiteTile);u.call(this,t)}function d(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new R.C(5e3,60,40),i=new R.k({opacity:0,transparent:!0});s.call(this,n,i),this.src=t,this.options={videoElement:document.createElement("video"),loop:!0,muted:!0,autoplay:!1,playsinline:!0,crossOrigin:"anonymous"},O()(this.options,e),this.videoElement=this.options.videoElement,this.videoProgress=0,this.radius=5e3,this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))}function p(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._parameters=t,this._zoom=null,this._panoId=null,this._panoClient=new google.maps.StreetViewService,this._count=0,this._total=0,this._canvas=[],this._ctx=[],this._wc=0,this._hc=0,this.result=null,this.rotation=0,this.copyright="",this.onSizeChange=null,this.onPanoramaLoad=null,this.levelsW=[1,2,4,7,13,26],this.levelsH=[1,1,2,4,7,13],this.widths=[416,832,1664,3328,6656,13312],this.heights=[416,416,832,1664,3328,6656],this.maxW=6656,this.maxH=6656;var e=void 0;try{var n=document.createElement("canvas");e=n.getContext("experimental-webgl"),e||(e=n.getContext("webgl"))}catch(t){}this.maxW=Math.max(e.getParameter(e.MAX_TEXTURE_SIZE),this.maxW),this.maxH=Math.max(e.getParameter(e.MAX_TEXTURE_SIZE),this.maxH)}function f(t,e){l.call(this),this.panoId=t,this.gsvLoader=null,this.loadRequested=!1,this.setupGoogleMapAPI(e)}function m(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"image",e=arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e4,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;"image"===t&&l.call(this,e,this.createGeometry(n,i),this.createMaterial(n)),this.size=n,this.ratio=i,this.EPS=1e-6,this.frameId=null,this.dragging=!1,this.userMouse=new R.c,this.quatA=new R.J,this.quatB=new R.J,this.quatCur=new R.J,this.quatSlerp=new R.J,this.vectorX=new R.o(1,0,0),this.vectorY=new R.o(0,1,0),this.addEventListener("window-resize",this.onWindowResize)}function v(t,e,n){m.call(this,"image",t,e,n)}function g(t){var e=new R.C(5e3,60,40),n=new R.k({visible:!1});s.call(this,e,n),this.media=new i(t),this.radius=5e3,this.addEventListener("enter",this.start.bind(this)),this.addEventListener("leave",this.stop.bind(this)),this.addEventListener("panolens-container",this.onPanolensContainer.bind(this)),this.addEventListener("panolens-scene",this.onPanolensScene.bind(this))}function y(t,e){function n(){return 2*Math.PI/60/60*y.autoRotateSpeed}function i(){return Math.pow(.95,y.zoomSpeed)}function r(t){if(H=!1,F=j=0,!1!==y.enabled){if(t.preventDefault(),t.button===y.mouseButtons.ORBIT){if(!0===y.noRotate)return;V=U.ROTATE,b.set(t.clientX,t.clientY)}else if(t.button===y.mouseButtons.ZOOM){if(!0===y.noZoom)return;V=U.DOLLY,A.set(t.clientX,t.clientY)}else if(t.button===y.mouseButtons.PAN){if(!0===y.noPan)return;V=U.PAN,_.set(t.clientX,t.clientY)}V!==U.NONE&&(document.addEventListener("mousemove",o,!1),document.addEventListener("mouseup",a,!1),y.dispatchEvent(q)),y.update()}}function o(t){if(!1!==y.enabled){t.preventDefault();var e=y.domElement===document?y.domElement.body:y.domElement;if(V===U.ROTATE){if(!0===y.noRotate)return;x.set(t.clientX,t.clientY),w.subVectors(x,b),y.rotateLeft(2*Math.PI*w.x/e.clientWidth*y.rotateSpeed),y.rotateUp(2*Math.PI*w.y/e.clientHeight*y.rotateSpeed),b.copy(x),p&&(F=t.clientX-p.clientX,j=t.clientY-p.clientY),p=t}else if(V===U.DOLLY){if(!0===y.noZoom)return;C.set(t.clientX,t.clientY),L.subVectors(C,A),L.y>0?y.dollyIn():L.y<0&&y.dollyOut(),A.copy(C)}else if(V===U.PAN){if(!0===y.noPan)return;M.set(t.clientX,t.clientY),E.subVectors(M,_),y.pan(E.x,E.y),_.copy(M)}V!==U.NONE&&y.update()}}function a(){H=!0,p=void 0,!1!==y.enabled&&(document.removeEventListener("mousemove",o,!1),document.removeEventListener("mouseup",a,!1),y.dispatchEvent(Y),V=U.NONE)}function s(t){if(!1!==y.enabled&&!0!==y.noZoom&&V===U.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?(y.object.fov=y.object.fov<y.maxFov?y.object.fov+1:y.maxFov,y.object.updateProjectionMatrix()):e<0&&(y.object.fov=y.object.fov>y.minFov?y.object.fov-1:y.minFov,y.object.updateProjectionMatrix()),y.update(),y.dispatchEvent($),y.dispatchEvent(q),y.dispatchEvent(Y)}}function l(t){switch(t.keyCode){case y.keys.UP:f=!1;break;case y.keys.BOTTOM:m=!1;break;case y.keys.LEFT:v=!1;break;case y.keys.RIGHT:g=!1}}function c(t){if(!1!==y.enabled&&!0!==y.noKeys&&!0!==y.noRotate){switch(t.keyCode){case y.keys.UP:f=!0;break;case y.keys.BOTTOM:m=!0;break;case y.keys.LEFT:v=!0;break;case y.keys.RIGHT:g=!0}(f||m||v||g)&&(H=!0,f&&(j=-y.rotateSpeed*y.momentumKeydownFactor),m&&(j=y.rotateSpeed*y.momentumKeydownFactor),v&&(F=-y.rotateSpeed*y.momentumKeydownFactor),g&&(F=y.rotateSpeed*y.momentumKeydownFactor))}}function u(t){if(H=!1,F=j=0,!1!==y.enabled){switch(t.touches.length){case 1:if(!0===y.noRotate)return;V=U.TOUCH_ROTATE,b.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!0===y.noZoom)return;V=U.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);A.set(0,i);break;case 3:if(!0===y.noPan)return;V=U.TOUCH_PAN,_.set(t.touches[0].pageX,t.touches[0].pageY);break;default:V=U.NONE}V!==U.NONE&&y.dispatchEvent(q)}}function h(t){if(!1!==y.enabled){t.preventDefault(),t.stopPropagation();var e=y.domElement===document?y.domElement.body:y.domElement;switch(t.touches.length){case 1:if(!0===y.noRotate)return;if(V!==U.TOUCH_ROTATE)return;x.set(t.touches[0].pageX,t.touches[0].pageY),w.subVectors(x,b),y.rotateLeft(2*Math.PI*w.x/e.clientWidth*y.rotateSpeed),y.rotateUp(2*Math.PI*w.y/e.clientHeight*y.rotateSpeed),b.copy(x),p&&(F=t.touches[0].pageX-p.pageX,j=t.touches[0].pageY-p.pageY),p={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},y.update();break;case 2:if(!0===y.noZoom)return;if(V!==U.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(n*n+i*i);C.set(0,r),L.subVectors(C,A),L.y<0?(y.object.fov=y.object.fov<y.maxFov?y.object.fov+1:y.maxFov,y.object.updateProjectionMatrix()):L.y>0&&(y.object.fov=y.object.fov>y.minFov?y.object.fov-1:y.minFov,y.object.updateProjectionMatrix()),A.copy(C),y.update(),y.dispatchEvent($);break;case 3:if(!0===y.noPan)return;if(V!==U.TOUCH_PAN)return;M.set(t.touches[0].pageX,t.touches[0].pageY),E.subVectors(M,_),y.pan(E.x,E.y),_.copy(M),y.update();break;default:V=U.NONE}}}function d(){H=!0,p=void 0,!1!==y.enabled&&(y.dispatchEvent(Y),V=U.NONE)}this.object=t,this.domElement=void 0!==e?e:document,this.frameId=null,this.enabled=!0,this.target=new R.o,this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=-.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=-.005,this.momentumKeydownFactor=20,this.minFov=30,this.maxFov=120,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:R.L.LEFT,ZOOM:R.L.MIDDLE,PAN:R.L.RIGHT};var p,f,m,v,g,y=this,b=new R.c,x=new R.c,w=new R.c,_=new R.c,M=new R.c,E=new R.c,S=new R.o,T=new R.o,A=new R.c,C=new R.c,L=new R.c,P=0,O=0,k=0,D=0,I=1,N=new R.o,z=new R.o,B=new R.J,F=0,j=0,H=!1,U={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},V=U.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var G=(new R.J).setFromUnitVectors(t.up,new R.o(0,1,0)),W=G.clone().inverse(),$={type:"change"},q={type:"start"},Y={type:"end"};this.setLastQuaternion=function(t){B.copy(t),y.object.quaternion.copy(t)},this.getLastPosition=function(){return z},this.rotateLeft=function(t){void 0===t&&(t=n()),D-=t},this.rotateUp=function(t){void 0===t&&(t=n()),k-=t},this.panLeft=function(t){var e=this.object.matrix.elements;S.set(e[0],e[1],e[2]),S.multiplyScalar(-t),N.add(S)},this.panUp=function(t){var e=this.object.matrix.elements;S.set(e[4],e[5],e[6]),S.multiplyScalar(t),N.add(S)},this.pan=function(t,e){var n=y.domElement===document?y.domElement.body:y.domElement;if(y.object instanceof R.M){var i=y.object.position,r=i.clone().sub(y.target),o=r.length();o*=Math.tan(y.object.fov/2*Math.PI/180),y.panLeft(2*t*o/n.clientHeight),y.panUp(2*e*o/n.clientHeight)}else y.object instanceof R.N?(y.panLeft(t*(y.object.right-y.object.left)/n.clientWidth),y.panUp(e*(y.object.top-y.object.bottom)/n.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.momentum=function(){if(H){if(Math.abs(F)<1e-4&&Math.abs(j)<1e-4)return void(H=!1);j*=this.momentumDampingFactor,F*=this.momentumDampingFactor,D-=this.momentumScalingFactor*F,k-=this.momentumScalingFactor*j}},this.dollyIn=function(t){void 0===t&&(t=i()),y.object instanceof R.M?I/=t:y.object instanceof R.N?(y.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),y.object.updateProjectionMatrix(),y.dispatchEvent($)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=i()),y.object instanceof R.M?I*=t:y.object instanceof R.N?(y.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),y.object.updateProjectionMatrix(),y.dispatchEvent($)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(t){var e=this.object.position;T.copy(e).sub(this.target),T.applyQuaternion(G),P=Math.atan2(T.x,T.z),O=Math.atan2(Math.sqrt(T.x*T.x+T.z*T.z),T.y),this.autoRotate&&V===U.NONE&&this.rotateLeft(n()),this.momentum(),P+=D,O+=k,P=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,P)),O=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,O)),O=Math.max(1e-7,Math.min(Math.PI-1e-7,O));var i=T.length()*I;i=Math.max(this.minDistance,Math.min(this.maxDistance,i)),this.target.add(N),T.x=i*Math.sin(O)*Math.sin(P),T.y=i*Math.cos(O),T.z=i*Math.sin(O)*Math.cos(P),T.applyQuaternion(W),e.copy(this.target).add(T),this.object.lookAt(this.target),D=0,k=0,I=1,N.set(0,0,0),(z.distanceToSquared(this.object.position)>1e-7||8*(1-B.dot(this.object.quaternion))>1e-7)&&(!0!==t&&this.dispatchEvent($),z.copy(this.object.position),B.copy(this.object.quaternion))},this.reset=function(){V=U.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent($),this.update()},this.getPolarAngle=function(){return O},this.getAzimuthalAngle=function(){return P},this.dispose=function(){this.domElement.removeEventListener("mousedown",r),this.domElement.removeEventListener("mousewheel",s),this.domElement.removeEventListener("DOMMouseScroll",s),this.domElement.removeEventListener("touchstart",u),this.domElement.removeEventListener("touchend",d),this.domElement.removeEventListener("touchmove",h),window.removeEventListener("keyup",l),window.removeEventListener("keydown",c)},this.domElement.addEventListener("mousedown",r,{passive:!1}),this.domElement.addEventListener("mousewheel",s,{passive:!1}),this.domElement.addEventListener("DOMMouseScroll",s,{passive:!1}),this.domElement.addEventListener("touchstart",u,{passive:!1}),this.domElement.addEventListener("touchend",d,{passive:!1}),this.domElement.addEventListener("touchmove",h,{passive:!1}),window.addEventListener("keyup",l,{passive:!1}),window.addEventListener("keydown",c,{passive:!1}),this.update()}function b(t,e){var n=this,i={type:"change"},r=0,o=0,a=0,s=0;this.camera=t,this.camera.rotation.reorder("YXZ"),this.domElement=void 0!==e?e:document,this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var l=function(t){n.deviceOrientation=t},c=function(){n.screenOrientation=window.orientation||0},u=function(t){t.preventDefault(),t.stopPropagation(),a=t.touches[0].pageX,s=t.touches[0].pageY},h=function(t){t.preventDefault(),t.stopPropagation(),r+=R.l.degToRad((t.touches[0].pageX-a)/4),o+=R.l.degToRad((s-t.touches[0].pageY)/4),n.updateAlphaOffsetAngle(r),a=t.touches[0].pageX,s=t.touches[0].pageY},d=function(t,e,i,r,a){var s,l=new R.o(0,0,1),c=new R.O,u=new R.J,h=new R.J(-Math.sqrt(.5),0,0,Math.sqrt(.5)),d=new R.J,p=new R.J;0==n.screenOrientation?(s=new R.o(1,0,0),d.setFromAxisAngle(s,-o)):180==n.screenOrientation?(s=new R.o(1,0,0),d.setFromAxisAngle(s,o)):90==n.screenOrientation?(s=new R.o(0,1,0),d.setFromAxisAngle(s,o)):-90==n.screenOrientation&&(s=new R.o(0,1,0),d.setFromAxisAngle(s,-o)),h.multiply(d),h.multiply(p),c.set(i,e,-r,"YXZ"),t.setFromEuler(c),t.multiply(h),t.multiply(u.setFromAxisAngle(l,-a))};this.connect=function(){c(),window.addEventListener("orientationchange",c,{passive:!0}),window.addEventListener("deviceorientation",l,{passive:!0}),window.addEventListener("deviceorientation",this.update.bind(this),{passive:!0}),n.domElement.addEventListener("touchstart",u,{passive:!1}),n.domElement.addEventListener("touchmove",h,{passive:!1}),n.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",c,!1),window.removeEventListener("deviceorientation",l,!1),window.removeEventListener("deviceorientation",this.update.bind(this),!1),n.domElement.removeEventListener("touchstart",u,!1),n.domElement.removeEventListener("touchmove",h,!1),n.enabled=!1},this.update=function(t){if(!1!==n.enabled){var e=n.deviceOrientation.alpha?R.l.degToRad(n.deviceOrientation.alpha)+n.alphaOffsetAngle:0,r=n.deviceOrientation.beta?R.l.degToRad(n.deviceOrientation.beta):0,o=n.deviceOrientation.gamma?R.l.degToRad(n.deviceOrientation.gamma):0,a=n.screenOrientation?R.l.degToRad(n.screenOrientation):0;d(n.camera.quaternion,e,r,o,a),n.alpha=e,!0!==t&&n.dispatchEvent(i)}},this.updateAlphaOffsetAngle=function(t){this.alphaOffsetAngle=t,this.update()},this.dispose=function(){this.disconnect()},this.connect()}function x(t){var e=new R.N(-1,1,1,-1,0,1),n=new R.P,i=new R.Q;i.aspect=.5;var r={minFilter:R.w,magFilter:R.R,format:R.s},o=new R.S(512,512,r);o.scissorTest=!0,o.texture.generateMipmaps=!1;var a=new R.c(.441,.156),s=new R.K(1,1,10,20).removeAttribute("normal").toNonIndexed(),l=s.attributes.position.array,c=s.attributes.uv.array;s.attributes.position.count*=2,s.attributes.uv.count*=2;var u=new Float32Array(2*l.length);u.set(l),u.set(l,l.length);var h=new Float32Array(2*c.length);h.set(c),h.set(c,c.length);for(var d=new R.c,p=l.length/3,f=0,m=u.length/3;f<m;f++){d.x=u[3*f+0],d.y=u[3*f+1];var v=d.dot(d),g=1.5+(a.x+a.y*v)*v,y=f<p?0:1;u[3*f+0]=d.x/g*1.5-.5+y,u[3*f+1]=d.y/g*3,h[2*f]=.5*(h[2*f]+y)}s.attributes.position.array=u,s.attributes.uv.array=h;var b=new R.k({map:o.texture}),x=new R.h(s,b);n.add(x),this.setSize=function(e,n){t.setSize(e,n);var i=t.getPixelRatio();o.setSize(e*i,n*i)},this.render=function(r,a){r.updateMatrixWorld(),null===a.parent&&a.updateMatrixWorld(),i.update(a);var s=o.width/2,l=o.height;t.autoClear&&t.clear(),o.scissor.set(0,0,s,l),o.viewport.set(0,0,s,l),t.setRenderTarget(o),t.render(r,i.cameraL),t.clearDepth(),o.scissor.set(s,0,s,l),o.viewport.set(s,0,s,l),t.setRenderTarget(o),t.render(r,i.cameraR),t.clearDepth(),t.setRenderTarget(null),t.render(n,e)}}function w(t){var e=void 0;t=t||{},t.controlBar=void 0===t.controlBar||t.controlBar,t.controlButtons=t.controlButtons||["fullscreen","setting","video"],t.autoHideControlBar=void 0!==t.autoHideControlBar&&t.autoHideControlBar,t.autoHideInfospot=void 0===t.autoHideInfospot||t.autoHideInfospot,t.horizontalView=void 0!==t.horizontalView&&t.horizontalView,t.clickTolerance=t.clickTolerance||10,t.cameraFov=t.cameraFov||60,t.reverseDragging=t.reverseDragging||!1,t.enableReticle=t.enableReticle||!1,t.dwellTime=t.dwellTime||1500,t.autoReticleSelect=void 0===t.autoReticleSelect||t.autoReticleSelect,t.viewIndicator=void 0!==t.viewIndicator&&t.viewIndicator,t.indicatorSize=t.indicatorSize||30,t.output=t.output?t.output:"none",t.autoRotate=t.autoRotate||!1,t.autoRotateSpeed=t.autoRotateSpeed||2,t.autoRotateActivationDuration=t.autoRotateActivationDuration||5e3,this.options=t,t.container?(e=t.container,e._width=e.clientWidth,e._height=e.clientHeight):(e=document.createElement("div"),e.classList.add("panolens-container"),e.style.width="100%",e.style.height="100%",e._width=window.innerWidth,e._height=window.innerHeight,document.body.appendChild(e)),this.container=e,this.camera=t.camera||new R.M(this.options.cameraFov,this.container.clientWidth/this.container.clientHeight,1,1e4),this.scene=t.scene||new R.P,this.renderer=t.renderer||new R.T({alpha:!0,antialias:!1}),this.sceneReticle=new R.P,this.viewIndicatorSize=this.options.indicatorSize,this.reticle={},this.tempEnableReticle=this.options.enableReticle,this.mode=z.NORMAL,this.panorama=null,this.widget=null,this.hoverObject=null,this.infospot=null,this.pressEntityObject=null,this.pressObject=null,this.raycaster=new R.b,this.raycasterPoint=new R.c,this.userMouse=new R.c,this.updateCallbacks=[],this.requestAnimationId=null,this.cameraFrustum=new R.U,this.cameraViewProjectionMatrix=new R.I,this.autoRotateRequestId=null,this.outputDivElement=null,this.touchSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.HANDLER_MOUSE_DOWN=this.onMouseDown.bind(this),this.HANDLER_MOUSE_UP=this.onMouseUp.bind(this),this.HANDLER_MOUSE_MOVE=this.onMouseMove.bind(this),this.HANDLER_WINDOW_RESIZE=this.onWindowResize.bind(this),this.HANDLER_KEY_DOWN=this.onKeyDown.bind(this),this.HANDLER_KEY_UP=this.onKeyUp.bind(this),this.HANDLER_TAP=this.onTap.bind(this,{clientX:this.container.clientWidth/2,clientY:this.container.clientHeight/2}),this.OUTPUT_INFOSPOT=!1,this.tweenLeftAnimation=new U.Tween,this.tweenUpAnimation=new U.Tween,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.style.backgroundColor="#000",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new y(this.camera,this.container),this.OrbitControls.id="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.OrbitControls.autoRotate=this.options.autoRotate,this.OrbitControls.autoRotateSpeed=this.options.autoRotateSpeed,this.DeviceOrientationControls=new b(this.camera,this.container),this.DeviceOrientationControls.id="device-orientation",this.DeviceOrientationControls.enabled=!1,this.camera.position.z=1,this.options.passiveRendering&&console.warn("passiveRendering is now deprecated"),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.CardboardEffect=new x(this.renderer),this.CardboardEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.StereoEffect=new G(this.renderer),this.StereoEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.effect=this.CardboardEffect,this.addReticle(),this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),!1!==this.options.controlBar&&this.addDefaultControlBar(this.options.controlButtons),this.options.viewIndicator&&this.addViewIndicator(),this.options.reverseDragging&&this.reverseDraggingDirection(),this.options.enableReticle?this.enableReticleControl():this.registerMouseAndTouchEvents(),"overlay"===this.options.output&&this.addOutputElement(),this.registerEventListeners(),this.animate.call(this)}n.d(e,"b",function(){return u}),n.d(e,"d",function(){return l}),n.d(e,"c",function(){return d}),n.d(e,"a",function(){return w});var _=n(52),M=n.n(_),E=n(55),S=n.n(E),T=n(56),A=n.n(T),C=n(54),L=n.n(C),P=n(53),O=n.n(P),R=n(15),k="0.11.0",D={three:"^0.105.2"},I=(k.split(".")[1],D.three.split(".")[1]),N=(D.three.replace(/[^0-9.]/g,""),{ORBIT:0,DEVICEORIENTATION:1}),z={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3},B={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+"},F={load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){};R.p.enabled=!0;var r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0;for(var h in B)B.hasOwnProperty(h)&&t===B[h]&&(u=h);if(void 0!==(r=R.p.get(u||t)))return e&&setTimeout(function(){n({loaded:1,total:1}),e(r)},0),r;l=window.URL||window.webkitURL,c=document.createElementNS("http://www.w3.org/1999/xhtml","img"),R.p.add(u||t,c);var d=function(){l.revokeObjectURL(c.src),e(c)};if(0===t.indexOf("data:"))return c.addEventListener("load",d,!1),c.src=t,c;c.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"",o=new window.XMLHttpRequest,o.open("GET",t,!0),o.responseType="arraybuffer",o.addEventListener("error",i),o.addEventListener("progress",function(t){if(t){var e=t.loaded,i=t.total;t.lengthComputable&&n({loaded:e,total:i})}}),o.addEventListener("loadend",function(t){if(t){var e=t.currentTarget.response;a=new Uint8Array(e),s=new window.Blob([a]),c.addEventListener("load",d,!1),c.src=l.createObjectURL(s)}}),o.send(null)}},j={load:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=arguments[2],i=arguments[3],r=new R.q;return F.load(t,function(n){r.image=n;var i=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?R.r:R.s,r.needsUpdate=!0,e(r)},n,i),r}},H={load:function(t){var e,n,i,r,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},l=arguments[3];return e=new R.t([]),n=0,i={},r={},t.map(function(t,c){F.load(t,function(t){e.images[c]=t,6===++n&&(e.needsUpdate=!0,a(e))},function(t){for(var e in i[c]={loaded:t.loaded,total:t.total},r.loaded=0,r.total=0,o=0,i)o++,r.loaded+=i[e].loaded,r.total+=i[e].total;o<6&&(r.total=r.total/o*6),s(r)},l)}),e}};i.prototype=O()(L()(R.u.prototype),{setContainer:function(t){this.container=t},setScene:function(t){this.scene=t},enumerateDevices:function(){var t=this.devices,e=new A.a(function(e){e(t)});return t.length>0?e:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){var t=this.stop.bind(this),e=this.start.bind(this),n=this.setVideDeviceIndex.bind(this),i=this.videoDeviceIndex;this.getDevices("video").then(function(r){t(),i++,i>=r.length?(n(0),i--):n(i),e(r[i])})},getDevices:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"video",e=this.devices,n=function(t){return t.map(function(t){return e.includes(t)||e.push(t),t})},i=function(e){var n=new RegExp(t,"i");return e.filter(function(t){return n.test(t.kind)})};return this.enumerateDevices().then(n).then(i)},getUserMedia:function(t){var e=this.setMediaStream.bind(this),n=this.playVideo.bind(this),i=function(t){console.warn("PANOLENS.Media: "+t)};return window.navigator.mediaDevices.getUserMedia(t).then(e).then(n).catch(i)},setVideDeviceIndex:function(t){this.videoDeviceIndex=t},start:function(t){var e=this.constraints,n=this.getUserMedia.bind(this),i=function(i){if(!i||0===i.length)throw Error("no video device found");var r=t||i[0];return e.video.deviceId=r.deviceId,n(e)};return this.element=this.createVideoElement(),this.getDevices().then(i)},stop:function(){var t=this.stream;t&&t.active&&(t.getTracks()[0].stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.element=null,this.stream=null)},setMediaStream:function(t){this.stream=t,this.element.srcObject=t,this.scene&&(this.scene.background=this.createVideoTexture()),window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){var t=this.element;t&&(t.play(),this.dispatchEvent({type:"play"}))},pauseVideo:function(){var t=this.element;t&&(t.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){var t=this.element,e=new R.v(t);return e.generateMipmaps=!1,e.minFilter=R.w,e.magFilter=R.w,e.format=R.r,e.center.set(.5,.5),t.addEventListener("canplay",this.onWindowResize.bind(this)),e},createVideoElement:function(){var t=this.dispatchEvent.bind(this),e=document.createElement("video"),n=function(){return t({type:"canplay"})};return e.setAttribute("autoplay",""),e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.objectPosition="center",e.style.objectFit="cover",e.style.display=this.scene?"none":"",e.addEventListener("canplay",n),e},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){var t=this.container,e=t.clientWidth,n=t.clientHeight,i=this.scene.background,r=this.element,o=r.videoWidth,a=r.videoHeight,s=a/o,l=this.container?e/n:1,c=s*l*this.ratioScalar;e>n?i.repeat.set(c,1):i.repeat.set(1,1/c)}}}),r.prototype=O()(L()(R.y.prototype),{constructor:r,setColor:function(t){this.material.color.copy(t instanceof R.z?t:new R.z(t))},createCanvasTexture:function(t){var e=new R.A(t);return e.minFilter=R.w,e.magFilter=R.w,e.generateMipmaps=!1,e},createCanvas:function(){var t=document.createElement("canvas"),e=t.getContext("2d"),n=this.dpr;return t.width=32*n,t.height=32*n,e.scale(n,n),e.shadowBlur=5,e.shadowColor="rgba(200,200,200,0.9)",{canvas:t,context:e}},updateCanvasArcByProgress:function(t){var e=this.context,n=this.canvasWidth,i=this.canvasHeight,r=this.material,o=this.dpr,a=t*Math.PI*2,s=this.color.getStyle(),l=.5*n/o,c=.5*i/o;e.clearRect(0,0,n,i),e.beginPath(),0===t?(e.arc(l,c,n/16,0,2*Math.PI),e.fillStyle=s,e.fill()):(e.arc(l,c,n/4-3,-Math.PI/2,-Math.PI/2+a),e.strokeStyle=s,e.lineWidth=3,e.stroke()),e.closePath(),r.map.needsUpdate=!0},ripple:function(){var t=this,e=this.context,n=this.canvasWidth,i=this.canvasHeight,r=this.material,o=this.rippleDuration,a=performance.now(),s=this.color,l=this.dpr,c=.5*n/l,u=.5*i/l;this.dispatchEvent({type:"reticle-ripple-start"}),function h(){var d=window.requestAnimationFrame(h),p=performance.now()-a,f=p/o,m=1-f>0?1-f:0,v=f*n*.5/l;e.clearRect(0,0,n,i),e.beginPath(),e.arc(c,u,v,0,2*Math.PI),e.fillStyle="rgba("+255*s.r+", "+255*s.g+", "+255*s.b+", "+m+")",e.fill(),e.closePath(),f>=1&&(window.cancelAnimationFrame(d),t.updateCanvasArcByProgress(0),t.dispatchEvent({type:"reticle-ripple-end"})),r.map.needsUpdate=!0}()},show:function(){this.visible=!0},hide:function(){this.visible=!1},start:function(t){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=t,this.update())},end:function(){this.startTimestamp&&(window.cancelAnimationFrame(this.timerId),this.updateCanvasArcByProgress(0),this.callback=null,this.timerId=null,this.startTimestamp=null,this.dispatchEvent({type:"reticle-end"}))},update:function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));var t=performance.now()-this.startTimestamp,e=t/this.dwellTime;this.updateCanvasArcByProgress(e),this.dispatchEvent({type:"reticle-update",progress:e}),e>=1&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),this.ripple())}});var U=function(t,e){return e={exports:{}},t(e,e.exports),e.exports}(function(e,n){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return S()(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=S()(this._tweens);if(0===n.length)return!1;for(t=void 0!==t?t:r.now();n.length>0;){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[n[i]])}n=S()(this._tweensAddedDuringUpdate)}return!0}};var r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"==typeof self&&void 0!==t&&t.hrtime?r.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=L()(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"==typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array==0&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,i):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[e]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),a=r.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[o],t[o+1>n?n:o+1],i-o)},Bezier:function(t,e){for(var n=0,i=t.length-1,o=Math.pow,a=r.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-e,i-s)*o(e,s)*t[s]*a(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),a=r.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),a(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=r.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r;return(2*e-2*n+o+a)*(r*s)+(-3*e+3*n-2*o-a)*s+o*r+e}}},function(t){e.exports=r}()});o.prototype=O()(L()(R.y.prototype),{constructor:o,setContainer:function(t){var e=void 0;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&this.element&&e.appendChild(this.element),this.container=e},getContainer:function(){return this.container},onClick:function(t){this.element&&this.getContainer()&&(this.onHoverStart(t),this.lockHoverElement())},onDismiss:function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())},onHover:function(){},onHoverStart:function(t){if(this.getContainer()){var e=this.cursorStyle||(this.mode===z.NORMAL?"pointer":"default"),n=this.scaleDownAnimation,i=this.scaleUpAnimation,r=this.element;if(this.isHovering=!0,this.container.style.cursor=e,this.animated&&(n.stop(),i.start()),r&&t.mouseEvent.clientX>=0&&t.mouseEvent.clientY>=0){var o=r.left,a=r.right,s=r.style;this.mode===z.CARDBOARD||this.mode===z.STEREO?(s.display="none",o.style.display="block",a.style.display="block",r._width=o.clientWidth,r._height=o.clientHeight):(s.display="block",o&&(o.style.display="none"),a&&(a.style.display="none"),r._width=r.clientWidth,r._height=r.clientHeight)}}},onHoverEnd:function(){if(this.getContainer()){var t=this.scaleDownAnimation,e=this.scaleUpAnimation,n=this.element;if(this.isHovering=!1,this.container.style.cursor="default",this.animated&&(e.stop(),t.start()),n&&!this.element.locked){var i=n.left,r=n.right;n.style.display="none",i&&(i.style.display="none"),r&&(r.style.display="none"),this.unlockHoverElement()}}},onDualEyeEffect:function(t){if(this.getContainer()){var e=void 0,n=void 0,i=void 0;this.mode=t.mode,e=this.element,n=this.container.clientWidth/2,i=this.container.clientHeight/2,e&&(e.left||e.right||(e.left=e.cloneNode(!0),e.right=e.cloneNode(!0)),this.mode===z.CARDBOARD||this.mode===z.STEREO?(e.left.style.display=e.style.display,e.right.style.display=e.style.display,e.style.display="none"):(e.style.display=e.left.style.display,e.left.style.display="none",e.right.style.display="none"),this.translateElement(n,i),this.container.appendChild(e.left),this.container.appendChild(e.right))}},translateElement:function(t,e){if(this.element._width&&this.element._height&&this.getContainer()){var n=void 0,i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0;l=this.container,r=this.element,o=r._width/2,a=r._height/2,s=void 0!==r.verticalDelta?r.verticalDelta:40,n=t-o,i=e-a-s,this.mode!==z.CARDBOARD&&this.mode!==z.STEREO||!r.left||!r.right||t===l.clientWidth/2&&e===l.clientHeight/2?this.setElementStyle("transform",r,"translate("+n+"px, "+i+"px)"):(n=l.clientWidth/4-o+(t-l.clientWidth/2),i=l.clientHeight/2-a-s+(e-l.clientHeight/2),this.setElementStyle("transform",r.left,"translate("+n+"px, "+i+"px)"),n+=l.clientWidth/2,this.setElementStyle("transform",r.right,"translate("+n+"px, "+i+"px)"))}},setElementStyle:function(t,e,n){var i=e.style;"transform"===t&&(i.webkitTransform=i.msTransform=i.transform=n)},setText:function(t){this.element&&(this.element.textContent=t)},setCursorHoverStyle:function(t){this.cursorStyle=t},addHoverText:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e),this.setText(t)},addHoverElement:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:40;this.element||(this.element=t.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e)},removeHoverElement:function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},lockHoverElement:function(){this.element&&(this.element.locked=!0)},unlockHoverElement:function(){this.element&&(this.element.locked=!1)},enableRaycast:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.raycast=t?this.originalRaycast:function(){}},show:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animated,n=this.hideAnimation,i=this.showAnimation,r=this.material;e?(n.stop(),i.delay(t).start()):(this.enableRaycast(!0),r.opacity=1)},hide:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=this.animated,n=this.hideAnimation,i=this.showAnimation,r=this.material;e?(i.stop(),n.delay(t).start()):(this.enableRaycast(!1),r.opacity=0)},setFocusMethod:function(t){t&&(this.HANDLER_FOCUS=t.method)},focus:function(t,e){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,t,e),this.onDismiss())},dispose:function(){var t=this.geometry,e=this.material,n=e.map;this.removeHoverElement(),this.parent&&this.parent.remove(this),n&&(n.dispose(),e.map=null),t&&(t.dispose(),this.geometry=null),e&&(e.dispose(),this.material=null)}}),a.prototype=O()(L()(R.u.prototype),{constructor:a,addControlBar:function(){if(this.container){var t,e,n,i,r=this;i="linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",t=document.createElement("div"),t.style.width="100%",t.style.height="44px",t.style.float="left",t.style.transform=t.style.webkitTransform=t.style.msTransform="translateY(-100%)",t.style.background="-webkit-"+i,t.style.background="-moz-"+i,t.style.background="-o-"+i,t.style.background="-ms-"+i,t.style.background=i,t.style.transition=this.DEFAULT_TRANSITION,t.style.pointerEvents="none",t.isHidden=!1,t.toggle=function(){t.isHidden=!t.isHidden,e=t.isHidden?"translateY(0)":"translateY(-100%)",n=t.isHidden?0:1,t.style.transform=t.style.webkitTransform=t.style.msTransform=e,t.style.opacity=n};var o=this.createDefaultMenu();this.mainMenu=this.createMainMenu(o),t.appendChild(this.mainMenu);var a=this.createMask();this.mask=a,this.container.appendChild(a),t.dispose=function(){r.fullscreenElement&&(t.removeChild(r.fullscreenElement),r.fullscreenElement.dispose(),r.fullscreenElement=null),r.settingElement&&(t.removeChild(r.settingElement),r.settingElement.dispose(),r.settingElement=null),r.videoElement&&(t.removeChild(r.videoElement),r.videoElement.dispose(),r.videoElement=null)},this.container.appendChild(t),this.mask.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener(r.TOUCH_ENABLED?"touchend":"click",function(t){t.preventDefault(),t.stopPropagation(),r.mask.hide(),r.settingElement.deactivate()},!1),this.addEventListener("control-bar-toggle",t.toggle),this.barElement=t}else console.warn("Widget container not set")},createDefaultMenu:function(){var t,e=this;return t=function(t,n){return function(){e.dispatchEvent({type:"panolens-viewer-handler",method:t,data:n})}},[{title:"Control",subMenu:[{title:this.TOUCH_ENABLED?"Touch":"Mouse",handler:t("enableControl",N.ORBIT)},{title:"Sensor",handler:t("enableControl",N.DEVICEORIENTATION)}]},{title:"Mode",subMenu:[{title:"Normal",handler:t("disableEffect")},{title:"Cardboard",handler:t("enableEffect",z.CARDBOARD)},{title:"Stereoscopic",handler:t("enableEffect",z.STEREO)}]}]},addControlButton:function(t){var e=void 0;switch(t){case"fullscreen":e=this.createFullscreenButton(),this.fullscreenElement=e;break;case"setting":e=this.createSettingButton(),this.settingElement=e;break;case"video":e=this.createVideoControl(),this.videoElement=e;break;default:return}e&&this.barElement.appendChild(e)},createMask:function(){var t=document.createElement("div");return t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.background="transparent",t.style.display="none",t.show=function(){this.style.display="block"},t.hide=function(){this.style.display="none"},t},createSettingButton:function(){function t(t){t.preventDefault(),t.stopPropagation(),e.mainMenu.toggle(),this.activated?this.deactivate():this.activate()}var e=this,n=void 0;return n=this.createCustomItem({style:{backgroundImage:'url("'+B.Setting+'")',webkitTransition:this.DEFAULT_TRANSITION,transition:this.DEFAULT_TRANSITION},onTap:t}),n.activate=function(){this.style.transform="rotate3d(0,0,1,90deg)",this.activated=!0,e.mask.show()},n.deactivate=function(){this.style.transform="rotate3d(0,0,0,0)",this.activated=!1,e.mask.hide(),e.mainMenu&&e.mainMenu.visible&&e.mainMenu.hide(),e.activeSubMenu&&e.activeSubMenu.visible&&e.activeSubMenu.hide(),e.mainMenu&&e.mainMenu._width&&(e.mainMenu.changeSize(e.mainMenu._width),e.mainMenu.unslideAll())},n.activated=!1,n},createFullscreenButton:function(){function t(t){t.preventDefault(),t.stopPropagation(),o=!1,r?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),r=!1):(s.requestFullscreen&&s.requestFullscreen(),s.msRequestFullscreen&&s.msRequestFullscreen(),s.mozRequestFullScreen&&s.mozRequestFullScreen(),s.webkitRequestFullscreen&&s.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),r=!0),this.style.backgroundImage=r?'url("'+B.FullscreenLeave+'")':'url("'+B.FullscreenEnter+'")'}function e(){o&&(r=!r,i.style.backgroundImage=r?'url("'+B.FullscreenLeave+'")':'url("'+B.FullscreenEnter+'")'),n.dispatchEvent({type:"panolens-viewer-handler",method:"onWindowResize"}),o=!0}var n=this,i=void 0,r=!1,o=!0,a=void 0,s=this.container;if(a="panolens-style-addon",document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){if(document.addEventListener("fullscreenchange",e,!1),document.addEventListener("webkitfullscreenchange",e,!1),document.addEventListener("mozfullscreenchange",e,!1),document.addEventListener("MSFullscreenChange",e,!1),i=this.createCustomItem({style:{backgroundImage:'url("'+B.FullscreenEnter+'")'},onTap:t}),!document.querySelector(a)){var l=document.createElement("style");l.id=a,l.innerHTML=":-webkit-full-screen { width: 100% !important; height: 100% !important }",document.body.appendChild(l)}return i}},createVideoControl:function(){var t=document.createElement("span");return t.style.display="none",t.show=function(){t.style.display=""},t.hide=function(){t.style.display="none",t.controlButton.paused=!0,t.controlButton.update()},t.controlButton=this.createVideoControlButton(),t.seekBar=this.createVideoControlSeekbar(),t.appendChild(t.controlButton),t.appendChild(t.seekBar),t.dispose=function(){t.removeChild(t.controlButton),t.removeChild(t.seekBar),t.controlButton.dispose(),t.controlButton=null,t.seekBar.dispose(),t.seekBar=null},this.addEventListener("video-control-show",t.show),this.addEventListener("video-control-hide",t.hide),t},createVideoControlButton:function(){function t(t){t.preventDefault(),t.stopPropagation(),e.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay",data:!this.paused}),this.paused=!this.paused,n.update()}var e=this,n=this.createCustomItem({style:{float:"left",backgroundImage:'url("'+B.VideoPlay+'")'},onTap:t});return n.paused=!0,n.update=function(t){this.paused=void 0!==t?t:this.paused,this.style.backgroundImage='url("'+(this.paused?B.VideoPlay:B.VideoPause)+'")'},n},createVideoControlSeekbar:function(){function t(t){t.stopPropagation(),h=!0,d=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,p=parseInt(c.style.width)/100,i()}function e(t){if(h){var e=t.clientX||t.changedTouches&&t.changedTouches[0].clientX;f=(e-d)/l.clientWidth,f=p+f,f=f>1?1:f<0?0:f,l.setProgress(f),s.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:f})}}function n(t){t.stopPropagation(),h=!1,r()}function i(){s.container.addEventListener("mousemove",e,{passive:!0}),s.container.addEventListener("mouseup",n,{passive:!0}),s.container.addEventListener("touchmove",e,{passive:!0}),s.container.addEventListener("touchend",n,{passive:!0})}function r(){s.container.removeEventListener("mousemove",e,!1),s.container.removeEventListener("mouseup",n,!1),s.container.removeEventListener("touchmove",e,!1),s.container.removeEventListener("touchend",n,!1)}function o(t){if(t.preventDefault(),t.stopPropagation(),t.target!==u){var e=t.changedTouches&&t.changedTouches.length>0?(t.changedTouches[0].pageX-t.target.getBoundingClientRect().left)/this.clientWidth:t.offsetX/this.clientWidth;s.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:e}),l.setProgress(t.offsetX/this.clientWidth)}}function a(){r(),c=null,u=null}var s=this,l=void 0,c=void 0,u=void 0,h=!1,d=void 0,p=void 0,f=void 0;return c=document.createElement("div"),c.style.width="0%",c.style.height="100%",c.style.backgroundColor="#fff",u=document.createElement("div"),u.style.float="right",u.style.width="14px",u.style.height="14px",u.style.transform="translate(7px, -5px)",u.style.borderRadius="50%",u.style.backgroundColor="#ddd",u.addEventListener("mousedown",t,{passive:!0}),u.addEventListener("touchstart",t,{passive:!0}),c.appendChild(u),l=this.createCustomItem({style:{float:"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:o,onDispose:a}),l.appendChild(c),l.setProgress=function(t){c.style.width=100*t+"%"},this.addEventListener("video-update",function(t){l.setProgress(t.percentage)}),l.progressElement=c,l.progressElementControl=u,l},createMenuItem:function(t){var e=this,n=document.createElement("a");return n.textContent=t,n.style.display="block",n.style.padding="10px",n.style.textDecoration="none",n.style.cursor="pointer",n.style.pointerEvents="auto",n.style.transition=this.DEFAULT_TRANSITION,n.slide=function(t){this.style.transform="translateX("+(t?"":"-")+"100%)"},n.unslide=function(){this.style.transform="translateX(0)"},n.setIcon=function(t){this.icon&&(this.icon.style.backgroundImage="url("+t+")")},n.setSelectionTitle=function(t){this.selection&&(this.selection.textContent=t)},n.addSelection=function(t){var e=document.createElement("span");return e.style.fontSize="13px",e.style.fontWeight="300",e.style.float="right",this.selection=e,this.setSelectionTitle(t),this.appendChild(e),this},n.addIcon=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B.ChevronRight,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=document.createElement("span");return i.style.float=e?"left":"right",i.style.width="17px",i.style.height="17px",i.style["margin"+(e?"Right":"Left")]="12px",i.style.backgroundSize="cover",n&&(i.style.transform="rotateZ(180deg)"),this.icon=i,this.setIcon(t),this.appendChild(i),this},n.addSubMenu=function(t,n){return this.subMenu=e.createSubMenu(t,n),this},n.addEventListener("mouseenter",function(){this.style.backgroundColor="#e0e0e0"},!1),n.addEventListener("mouseleave",function(){this.style.backgroundColor="#fafafa"},!1),n},createMenuItemHeader:function(t){var e=this.createMenuItem(t);return e.style.borderBottom="1px solid #333",e.style.paddingBottom="15px",e},createMainMenu:function(t){function e(t){function e(){i.changeSize(r.clientWidth),r.show(),r.unslideAll()}t.preventDefault(),t.stopPropagation();var i=n.mainMenu,r=this.subMenu;i.hide(),i.slideAll(),i.parentElement.appendChild(r),n.activeMainItem=this,n.activeSubMenu=r,window.requestAnimationFrame(e)}var n=this,i=this.createMenu();i._width=200,i.changeSize(i._width);for(var r=0;r<t.length;r++){var o=i.addItem(t[r].title);if(o.style.paddingLeft="20px",o.addIcon().addEventListener(n.TOUCH_ENABLED?"touchend":"click",e,!1),t[r].subMenu&&t[r].subMenu.length>0){var a=t[r].subMenu[0].title;o.addSelection(a).addSubMenu(t[r].title,t[r].subMenu)}}return i},createSubMenu:function(t,e){function n(t){t.preventDefault(),t.stopPropagation(),r=i.mainMenu,r.changeSize(r._width),r.unslideAll(),r.show(),o.slideAll(!0),o.hide(),"header"!==this.type&&(o.setActiveItem(this),i.activeMainItem.setSelectionTitle(this.textContent),this.handler&&this.handler())}var i=this,r=void 0,o=this.createMenu();o.items=e,o.activeItem=null,o.addHeader(t).addIcon(void 0,!0,!0).addEventListener(i.TOUCH_ENABLED?"touchend":"click",n,!1);for(var a=0;a<e.length;a++){var s=o.addItem(e[a].title);s.style.fontWeight=300,s.handler=e[a].handler,s.addIcon(" ",!0),s.addEventListener(i.TOUCH_ENABLED?"touchend":"click",n,!1),o.activeItem||o.setActiveItem(s)}return o.slideAll(!0),o},createMenu:function(){var t=this,e=document.createElement("span"),n=e.style;return n.padding="5px 0",n.position="fixed",n.bottom="100%",n.right="14px",n.backgroundColor="#fafafa",n.fontFamily="Helvetica Neue",n.fontSize="14px",n.visibility="hidden",n.opacity=0,n.boxShadow="0 0 12pt rgba(0,0,0,0.25)",n.borderRadius="2px",n.overflow="hidden",n.willChange="width, height, opacity",n.pointerEvents="auto",n.transition=this.DEFAULT_TRANSITION,e.visible=!1,e.changeSize=function(t,e){t&&(this.style.width=t+"px"),e&&(this.style.height=e+"px")},e.show=function(){this.style.opacity=1,this.style.visibility="visible",this.visible=!0},e.hide=function(){this.style.opacity=0,this.style.visibility="hidden",this.visible=!1},e.toggle=function(){this.visible?this.hide():this.show()},e.slideAll=function(t){for(var n=0;n<e.children.length;n++)e.children[n].slide&&e.children[n].slide(t)},e.unslideAll=function(){for(var t=0;t<e.children.length;t++)e.children[t].unslide&&e.children[t].unslide()},e.addHeader=function(e){var n=t.createMenuItemHeader(e);return n.type="header",this.appendChild(n),n},e.addItem=function(e){var n=t.createMenuItem(e);return n.type="item",this.appendChild(n),n},e.setActiveItem=function(t){this.activeItem&&this.activeItem.setIcon(" "),t.setIcon(B.Check),this.activeItem=t},e.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),e},createCustomItem:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,n=t.element||document.createElement("span"),i=t.onDispose;return n.style.cursor="pointer",n.style.float="right",n.style.width="44px",n.style.height="100%",n.style.backgroundSize="60%",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.webkitUserSelect=n.style.MozUserSelect=n.style.userSelect="none",n.style.position="relative",n.style.pointerEvents="auto",n.addEventListener(e.TOUCH_ENABLED?"touchstart":"mouseenter",function(){n.style.filter=n.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"},{passive:!0}),n.addEventListener(e.TOUCH_ENABLED?"touchend":"mouseleave",function(){n.style.filter=n.style.webkitFilter=""},{passive:!0}),this.mergeStyleOptions(n,t.style),t.onTap&&n.addEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),n.dispose=function(){n.removeEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),i&&t.onDispose()},n},mergeStyleOptions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(var n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t},dispose:function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)}}),s.prototype=O()(L()(R.h.prototype),{constructor:s,add:function(t){var e=void 0;if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}if(t instanceof o){if(e=t,t.dispatchEvent){var i=this.container;i&&t.dispatchEvent({type:"panolens-container",container:i}),t.dispatchEvent({type:"panolens-infospot-focus",method:function(t,e,n){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[t,e,n]})}.bind(this)})}}else e=new R.a,e.scale.x=-1,e.scalePlaceHolder=!0,e.add(t);R.a.prototype.add.call(this,e)},load:function(){this.onLoad()},onClick:function(t){t.intersects&&0===t.intersects.length&&this.traverse(function(t){t.dispatchEvent({type:"dismiss"})})},setContainer:function(t){var e=void 0;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&(this.children.forEach(function(t){t instanceof o&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:e})}),this.container=e)},onLoad:function(){this.loaded=!0,this.dispatchEvent({type:"load"})},onProgress:function(t){this.dispatchEvent({type:"progress",progress:t})},onError:function(){this.dispatchEvent({type:"error"})},getZoomLevel:function(){return window.innerWidth<=800?this.ImageQualityFair:window.innerWidth>800&&window.innerWidth<=1280?this.ImageQualityMedium:window.innerWidth>1280&&window.innerWidth<=1920?this.ImageQualityHigh:window.innerWidth>1920?this.ImageQualitySuperHigh:this.ImageQualityLow},updateTexture:function(t){this.material.map=t,this.material.needsUpdate=!0},toggleInfospotVisibility:function(t,e){e=void 0!==e?e:0;var n=void 0!==t?t:!this.isInfospotVisible;this.traverse(function(t){t instanceof o&&(n?t.show(e):t.hide(e))}),this.isInfospotVisible=n,this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:n})}.bind(this)).delay(e).start()},setLinkingImage:function(t,e){this.linkingImageURL=t,this.linkingImageScale=e},link:function(t,e,n,i){var r=void 0,a=void 0;if(this.visible=!0,e){r=void 0!==n?n:void 0!==t.linkingImageScale?t.linkingImageScale:300,a=i||(t.linkingImageURL?t.linkingImageURL:B.Arrow);var s=new o(r,a);s.position.copy(e),s.toPanorama=t,s.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:t})}.bind(this)),this.linkedSpots.push(s),this.add(s),this.visible=!1}else console.warn("Please specify infospot position for linking")},reset:function(){this.children.length=0},setupTransitions:function(){this.fadeInAnimation=new U.Tween(this.material).easing(U.Easing.Quartic.Out).onStart(function(){this.visible=!0,this.dispatchEvent({type:"enter-fade-start"})}.bind(this)),this.fadeOutAnimation=new U.Tween(this.material).easing(U.Easing.Quartic.Out).onComplete(function(){this.visible=!1,this.dispatchEvent({type:"leave-complete"})}.bind(this)),this.enterTransition=new U.Tween(this).easing(U.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start(),this.leaveTransition=new U.Tween(this).easing(U.Easing.Quartic.Out)},onFadeAnimationUpdate:function(){var t=this.material.opacity,e=this.material.uniforms;e&&e.opacity&&(e.opacity.value=t)},fadeIn:function(t){t=t>=0?t:this.animationDuration,this.fadeOutAnimation.stop(),this.fadeInAnimation.to({opacity:1},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,t/2),this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()},fadeOut:function(t){t=t>=0?t:this.animationDuration,this.fadeInAnimation.stop(),this.fadeOutAnimation.to({opacity:0},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()},onEnter:function(){var t=this.animationDuration;this.leaveTransition.stop(),this.enterTransition.to({},t).onStart(function(){this.dispatchEvent({type:"enter-start"}),this.loaded?this.fadeIn(t):this.load()}.bind(this)).start(),this.dispatchEvent({type:"enter"}),this.children.forEach(function(t){t.dispatchEvent({type:"panorama-enter"})}),this.active=!0},onLeave:function(){var t=this.animationDuration;this.enterTransition.stop(),this.leaveTransition.to({},t).onStart(function(){this.dispatchEvent({type:"leave-start"}),this.fadeOut(t),this.toggleInfospotVisibility(!1)}.bind(this)).start(),this.dispatchEvent({type:"leave"}),this.children.forEach(function(t){t.dispatchEvent({type:"panorama-leave"})}),this.active=!1},dispose:function(){function t(e){for(var n=e.geometry,i=e.material,r=e.children.length-1;r>=0;r--)t(e.children[r]),e.remove(e.children[r]);e instanceof o&&e.dispose(),n&&(n.dispose(),e.geometry=null),i&&(i.dispose(),e.material=null)}this.infospotAnimation.stop(),this.fadeInAnimation.stop(),this.fadeOutAnimation.stop(),this.enterTransition.stop(),this.leaveTransition.stop(),this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this}),t(this),this.parent&&this.parent.remove(this)}}),l.prototype=O()(L()(s.prototype),{constructor:l,load:function(t){(t=t||this.src)?"string"==typeof t?j.load(t,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):t instanceof HTMLImageElement&&this.onLoad(new R.q(t)):console.warn("Image source undefined")},onLoad:function(t){t.minFilter=t.magFilter=R.w,t.needsUpdate=!0,this.updateTexture(t),window.requestAnimationFrame(s.prototype.onLoad.bind(this))},reset:function(){s.prototype.reset.call(this)},dispose:function(){var t=this.material.map;R.p.remove(this.src),t&&t.dispose(),s.prototype.dispose.call(this)}}),c.prototype=O()(L()(s.prototype),{constructor:c}),u.prototype=O()(L()(s.prototype),{constructor:u,load:function(){H.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},onLoad:function(t){this.material.uniforms.tCube.value=t,s.prototype.onLoad.call(this)},dispose:function(){var t=this.material.uniforms.tCube.value;this.images.forEach(function(t){R.p.remove(t)}),t instanceof R.t&&t.dispose(),s.prototype.dispose.call(this)}}),h.prototype=O()(L()(u.prototype),{constructor:h}),d.prototype=O()(L()(s.prototype),{constructor:d,isMobile:function(){var t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),t},load:function(){var t=this.options,e=t.muted,n=t.loop,i=t.autoplay,r=t.playsinline,o=t.crossOrigin,a=this.videoElement,s=this.material,l=this.onProgress.bind(this),c=this.onLoad.bind(this);a.loop=n,a.autoplay=i,a.playsinline=r,a.crossOrigin=o,a.muted=e,r&&(a.setAttribute("playsinline",""),a.setAttribute("webkit-playsinline",""));var u=function(){this.setVideoTexture(a),i&&this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}),this.isMobile()&&(a.pause(),i&&e?this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}):this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}));var t=function(){s.map.needsUpdate=!0,l({loaded:1,total:1}),c()};window.requestAnimationFrame(t)};if(a.readyState>2)u.call(this);else{if(0===a.querySelectorAll("source").length){var h=document.createElement("source");h.src=this.src,a.appendChild(h)}a.load()}a.addEventListener("loadeddata",u.bind(this)),a.addEventListener("timeupdate",function(){this.videoProgress=a.duration>=0?a.currentTime/a.duration:0,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.videoProgress})}.bind(this)),a.addEventListener("ended",function(){n||(this.resetVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}))}.bind(this),!1)},setVideoTexture:function(t){if(t){var e=new R.v(t);e.minFilter=R.w,e.magFilter=R.w,e.format=R.r,this.updateTexture(e)}},reset:function(){this.videoElement=void 0,s.prototype.reset.call(this)},isVideoPaused:function(){return this.videoElement.paused},toggleVideo:function(){var t=this.videoElement;t&&t[t.paused?"play":"pause"]()},setVideoCurrentTime:function(t){var e=t.percentage,n=this.videoElement;n&&!M()(e)&&1!==e&&(n.currentTime=n.duration*e,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:e}))},playVideo:function(){var t=this.videoElement,e=this.playVideo.bind(this),n=this.dispatchEvent.bind(this),i=function(){n({type:"play"})},r=function(t){window.requestAnimationFrame(e),n({type:"play-error",error:t})};t&&t.paused&&t.play().then(i).catch(r)},pauseVideo:function(){var t=this.videoElement;t&&!t.paused&&t.pause(),this.dispatchEvent({type:"pause"})},resumeVideoProgress:function(){var t=this.videoElement;t.readyState>=4&&t.autoplay&&!this.isMobile()?(this.playVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1})):(this.pauseVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),this.setVideoCurrentTime({percentage:this.videoProgress})},resetVideo:function(){this.videoElement&&this.setVideoCurrentTime({percentage:0})},isVideoMuted:function(){return this.videoElement.muted},muteVideo:function(){var t=this.videoElement;t&&!t.muted&&(t.muted=!0),this.dispatchEvent({type:"volumechange"})},unmuteVideo:function(){var t=this.videoElement;t&&this.isVideoMuted()&&(t.muted=!1),this.dispatchEvent({type:"volumechange"})},getVideoElement:function(){return this.videoElement},dispose:function(){var t=this.material.map;this.pauseVideo(),this.removeEventListener("leave",this.pauseVideo.bind(this)),this.removeEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.removeEventListener("video-toggle",this.toggleVideo.bind(this)),this.removeEventListener("video-time",this.setVideoCurrentTime.bind(this)),t&&t.dispose(),s.prototype.dispose.call(this)}}),O()(p.prototype,{constructor:p,setProgress:function(t,e){this.onProgress&&this.onProgress({loaded:t,total:e})},adaptTextureToZoom:function(){var t=this.widths[this._zoom],e=this.heights[this._zoom],n=this.maxW,i=this.maxH;this._wc=Math.ceil(t/n),this._hc=Math.ceil(e/i);for(var r=0;r<this._hc;r++)for(var o=0;o<this._wc;o++){var a=document.createElement("canvas");o<this._wc-1?a.width=n:a.width=t-n*o,r<this._hc-1?a.height=i:a.height=e-i*r,this._canvas.push(a),this._ctx.push(a.getContext("2d"))}},composeFromTile:function(t,e,n){var i=this.maxW,r=this.maxH;t*=512,e*=512;var o=Math.floor(t/i),a=Math.floor(e/r);t-=o*i,e-=a*r,this._ctx[a*this._wc+o].drawImage(n,0,0,n.width,n.height,t,e,512,512),this.progress()},progress:function(){this._count++,this.setProgress(this._count,this._total),this._count===this._total&&(this.canvas=this._canvas,this.panoId=this._panoId,this.zoom=this._zoom,this.onPanoramaLoad&&this.onPanoramaLoad(this._canvas[0]))},composePanorama:function(){var t=this;this.setProgress(0,1);var e=this.levelsW[this._zoom],n=this.levelsH[this._zoom],i=this;this._count=0,this._total=e*n;for(var r=this._parameters.useWebGL,o=0;o<n;o++)for(var a=0;a<e;a++)!function(e){var n="https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom="+t._zoom+"&x="+e+"&y="+o+"&panoid="+t._panoId+"&nbt&fover=2";!function(t,e){if(r)var o=j.load(n,null,function(){i.composeFromTile(t,e,o)});else{var a=new Image;a.addEventListener("load",function(){i.composeFromTile(t,e,this)}),a.crossOrigin="",a.src=n}}(e,o)}(a)},load:function(t){this.loadPano(t)},loadPano:function(t){var e=this;this._panoClient.getPanoramaById(t,function(t,n){n===google.maps.StreetViewStatus.OK&&(e.result=t,e.copyright=t.copyright,e._panoId=t.location.pano,e.composePanorama())})},setZoom:function(t){this._zoom=t,this.adaptTextureToZoom()}}),f.prototype=O()(L()(l.prototype),{constructor:f,load:function(t){this.loadRequested=!0,(t=t||this.panoId||{})&&this.gsvLoader&&this.loadGSVLoader(t)},setupGoogleMapAPI:function(t){var e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?",e.src+=t?"key="+t:"",e.onreadystatechange=this.setGSVLoader.bind(this),e.onload=this.setGSVLoader.bind(this),document.querySelector("head").appendChild(e)},setGSVLoader:function(){this.gsvLoader=new p,this.loadRequested&&this.load()},getGSVLoader:function(){return this.gsvLoader},loadGSVLoader:function(t){this.loadRequested=!1,this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(t),this.gsvLoader.loaded=!0},onLoad:function(t){l.prototype.onLoad.call(this,new R.q(t))},reset:function(){this.gsvLoader=void 0,l.prototype.reset.call(this)}});var V={uniforms:{tDiffuse:{value:new R.q},resolution:{value:1},transform:{value:new R.I},zoom:{value:1},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float resolution;","uniform mat4 transform;","uniform float zoom;","uniform float opacity;","varying vec2 vUv;","const float PI = 3.141592653589793;","void main(){","vec2 position = -1.0 +  2.0 * vUv;","position *= vec2( zoom * resolution, zoom * 0.5 );","float x2y2 = position.x * position.x + position.y * position.y;","vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );","sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );","vec2 sampleUV = vec2(","(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,","(asin(sphere_pnt.z) / PI + 0.5)",");","gl_FragColor = texture2D( tDiffuse, sampleUV );","gl_FragColor.a *= opacity;","}"].join("\n")};m.prototype=O()(L()(l.prototype),{constructor:m,add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}t instanceof o&&(t.material.depthTest=!1),l.prototype.add.call(this,t)},createGeometry:function(t,e){return new R.K(t,t*e)},createMaterial:function(t){var e=O()({},V),n=e.uniforms;return n.zoom.value=t,n.opacity.value=0,new R.H({uniforms:n,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,side:R.B,transparent:!0})},registerMouseEvents:function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("touchmove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("touchend",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})},unregisterMouseEvents:function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1),this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1),this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1)},onMouseDown:function(t){switch(t.touches&&t.touches.length||1){case 1:var e=t.clientX>=0?t.clientX:t.touches[0].clientX,n=t.clientY>=0?t.clientY:t.touches[0].clientY;this.dragging=!0,this.userMouse.set(e,n);break;case 2:var i=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(i*i+r*r);this.userMouse.pinchDistance=o}this.onUpdateCallback()},onMouseMove:function(t){switch(t.touches&&t.touches.length||1){case 1:var e=t.clientX>=0?t.clientX:t.touches[0].clientX,n=t.clientY>=0?t.clientY:t.touches[0].clientY,i=.4*R.l.degToRad(e-this.userMouse.x),r=.4*R.l.degToRad(n-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,i),this.quatB.setFromAxisAngle(this.vectorX,r),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(e,n));break;case 2:var o=t.touches[0].pageX-t.touches[1].pageX,a=t.touches[0].pageY-t.touches[1].pageY,s=Math.sqrt(o*o+a*a);this.addZoomDelta(this.userMouse.pinchDistance-s)}},onMouseUp:function(){this.dragging=!1},onMouseWheel:function(t){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),this.addZoomDelta(e),this.onUpdateCallback()},addZoomDelta:function(t){var e=this.material.uniforms,n=.1*this.size,i=10*this.size;e.zoom.value+=t,e.zoom.value<=n?e.zoom.value=n:e.zoom.value>=i&&(e.zoom.value=i)},onUpdateCallback:function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this)),this.quatSlerp.slerp(this.quatCur,.1),this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp),!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)},reset:function(){this.quatCur.set(0,0,0,1),this.quatSlerp.set(0,0,0,1),this.onUpdateCallback()},onLoad:function(t){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight,this.registerMouseEvents(),this.onUpdateCallback(),this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"}),l.prototype.onLoad.call(this,t)},onLeave:function(){this.unregisterMouseEvents(),this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:N.ORBIT}),window.cancelAnimationFrame(this.frameId),l.prototype.onLeave.call(this)},onWindowResize:function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight},onContextMenu:function(){this.dragging=!1},dispose:function(){this.unregisterMouseEvents(),l.prototype.dispose.call(this)}}),v.prototype=O()(L()(m.prototype),{constructor:v,onLoad:function(t){this.updateTexture(t),m.prototype.onLoad.call(this,t)},updateTexture:function(t){t.minFilter=t.magFilter=R.w,this.material.uniforms.tDiffuse.value=t},dispose:function(){var t=this.material.uniforms.tDiffuse;t&&t.value&&t.value.dispose(),m.prototype.dispose.call(this)}}),g.prototype=O()(L()(s.prototype),{constructor:g,onPanolensContainer:function(t){var e=t.container;this.media.setContainer(e)},onPanolensScene:function(t){var e=t.scene;this.media.setScene(e)},start:function(){return this.media.start()},stop:function(){this.media.stop()}}),y.prototype=O()(L()(R.u.prototype),{constructor:y}),b.prototype=O()(L()(R.u.prototype),{constructor:b});var G=function(t){var e=new R.Q;e.aspect=.5;var n=new R.c;this.setEyeSeparation=function(t){e.eyeSep=t},this.setSize=function(e,n){t.setSize(e,n)},this.render=function(i,r){i.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),e.update(r),t.getSize(n),t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,n.width/2,n.height),t.setViewport(0,0,n.width/2,n.height),t.render(i,e.cameraL),t.setScissor(n.width/2,0,n.width/2,n.height),t.setViewport(n.width/2,0,n.width/2,n.height),t.render(i,e.cameraR),t.setScissorTest(!1)}};w.prototype=O()(L()(R.u.prototype),{constructor:w,add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}this.scene.add(t),t.addEventListener&&t.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),t instanceof s&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:this.container}),t instanceof g&&t.dispatchEvent({type:"panolens-scene",scene:this.scene}),"panorama"===t.type&&(this.addPanoramaEventListener(t),this.panorama||this.setPanorama(t))},remove:function(t){t.removeEventListener&&t.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.scene.remove(t)},addDefaultControlBar:function(t){if(this.widget)console.warn("Default control bar exists");else{var e=new a(this.container);e.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),e.addControlBar(),t.forEach(function(t){e.addControlButton(t)}),this.widget=e}},setPanorama:function(t){var e=this.panorama;if("panorama"===t.type&&e!==t){this.hideInfospot();var n=function n(){e&&e.onLeave(),t.removeEventListener("enter-fade-start",n)};t.addEventListener("enter-fade-start",n),(this.panorama=t).onEnter()}},eventHandler:function(t){t.method&&this[t.method]&&this[t.method](t.data)},dispatchEventToChildren:function(t){this.scene.traverse(function(e){e.dispatchEvent&&e.dispatchEvent(t)})},activateWidgetItem:function(t,e){var n=this.widget.mainMenu,i=n.children[0],r=n.children[1],o=void 0;if(void 0!==t){switch(t){case 0:o=i.subMenu.children[1];break;case 1:o=i.subMenu.children[2];break;default:o=i.subMenu.children[1]}i.subMenu.setActiveItem(o),i.setSelectionTitle(o.textContent)}if(void 0!==e){switch(e){case z.CARDBOARD:o=r.subMenu.children[2];break;case z.STEREO:o=r.subMenu.children[3];break;default:o=r.subMenu.children[1]}r.subMenu.setActiveItem(o),r.setSelectionTitle(o.textContent)}},enableEffect:function(t){if(this.mode!==t){if(t===z.NORMAL)return void this.disableEffect();this.mode=t;var e=this.camera.fov;switch(t){case z.CARDBOARD:this.effect=this.CardboardEffect,this.enableReticleControl();break;case z.STEREO:this.effect=this.StereoEffect,this.enableReticleControl();break;default:this.effect=null,this.disableReticleControl()}this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.camera.fov=e+.01,this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.camera.fov=e,this.dispatchEvent({type:"mode-change",mode:this.mode})}},disableEffect:function(){this.mode!==z.NORMAL&&(this.mode=z.NORMAL,this.disableReticleControl(),this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))},enableReticleControl:function(){this.reticle.visible||(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent())},disableReticleControl:function(){this.tempEnableReticle=!1,this.options.enableReticle?this.updateReticleEvent():(this.reticle.hide(),this.unregisterReticleEvent(),this.registerMouseAndTouchEvents())},enableAutoRate:function(){this.options.autoRotate=!0,this.OrbitControls.autoRotate=!0},disableAutoRate:function(){clearTimeout(this.autoRotateRequestId),this.options.autoRotate=!1,this.OrbitControls.autoRotate=!1},toggleVideoPlay:function(t){this.panorama instanceof d&&this.panorama.dispatchEvent({type:"video-toggle",pause:t})},setVideoCurrentTime:function(t){this.panorama instanceof d&&this.panorama.dispatchEvent({type:"video-time",percentage:t})},onVideoUpdate:function(t){var e=this.widget;e&&e.dispatchEvent({type:"video-update",percentage:t})},addUpdateCallback:function(t){t&&this.updateCallbacks.push(t)},removeUpdateCallback:function(t){var e=this.updateCallbacks.indexOf(t);t&&e>=0&&this.updateCallbacks.splice(e,1)},showVideoWidget:function(){var t=this.widget;t&&t.dispatchEvent({type:"video-control-show"})},hideVideoWidget:function(){var t=this.widget;t&&t.dispatchEvent({type:"video-control-hide"})},updateVideoPlayButton:function(t){var e=this.widget;e&&e.videoElement&&e.videoElement.controlButton&&e.videoElement.controlButton.update(t)},addPanoramaEventListener:function(t){t.addEventListener("enter-fade-start",this.setCameraControl.bind(this)),t instanceof d&&(t.addEventListener("enter-fade-start",this.showVideoWidget.bind(this)),t.addEventListener("leave",function(){this.panorama instanceof d||this.hideVideoWidget.call(this)}.bind(this)))},setCameraControl:function(){this.OrbitControls.target.copy(this.panorama.position)},getControl:function(){return this.control},getScene:function(){return this.scene},getCamera:function(){return this.camera},getRenderer:function(){return this.renderer},getContainer:function(){return this.container},getControlId:function(){return this.control.id},getNextControlId:function(){return this.controls[this.getNextControlIndex()].id},getNextControlIndex:function(){var t=this.controls,e=this.control,n=t.indexOf(e)+1;return n>=t.length?0:n},setCameraFov:function(t){this.camera.fov=t,this.camera.updateProjectionMatrix()},enableControl:function(t){switch(t=t>=0&&t<this.controls.length?t:0,this.control.enabled=!1,this.control=this.controls[t],this.control.enabled=!0,t){case N.ORBIT:this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case N.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position)}this.control.update(),this.activateWidgetItem(t,void 0)},disableControl:function(){this.control.enabled=!1},toggleNextControl:function(){this.enableControl(this.getNextControlIndex())},getScreenVector:function(t){var e=t.clone(),n=this.container.clientWidth/2,i=this.container.clientHeight/2;return e.project(this.camera),e.x=e.x*n+n,e.y=-e.y*i+i,e.z=0,e},checkSpriteInViewport:function(t){return this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld),this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix),t.visible&&this.cameraFrustum.intersectsSprite(t)},reverseDraggingDirection:function(){this.OrbitControls.rotateSpeed*=-1,this.OrbitControls.momentumScalingFactor*=-1},addReticle:function(){this.reticle=new r(16777215,!0,this.options.dwellTime),this.reticle.hide(),this.camera.add(this.reticle),this.sceneReticle.add(this.camera)},tweenControlCenter:function(t,e,n){if(this.control===this.OrbitControls){t instanceof Array&&(e=t[1],n=t[2],t=t[0]),e=void 0!==e?e:1e3,n=n||U.Easing.Exponential.Out;var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0,l=void 0,c=void 0,u=void 0,h=void 0,d=void 0;i=this,a=this.camera.getWorldDirection(new R.o),s=a.clone(),u=this.panorama.getWorldPosition(new R.o).sub(this.camera.getWorldPosition(new R.o)),l=t.clone(),l.x*=-1,l.add(u).normalize(),c=l.clone(),a.y=0,l.y=0,r=Math.atan2(l.z,l.x)-Math.atan2(a.z,a.x),r=r>Math.PI?r-2*Math.PI:r,r=r<-Math.PI?r+2*Math.PI:r,o=Math.abs(s.angleTo(a)+(s.y*c.y<=0?c.angleTo(l):-c.angleTo(l))),o*=c.y<s.y?1:-1,h={left:0,up:0},d={left:0,up:0},this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.tweenLeftAnimation=new U.Tween(h).to({left:r},e).easing(n).onUpdate(function(t){i.control.rotateLeft(t.left-d.left),d.left=t.left}).start(),this.tweenUpAnimation=new U.Tween(h).to({up:o},e).easing(n).onUpdate(function(t){i.control.rotateUp(t.up-d.up),d.up=t.up}).start()}},tweenControlCenterByObject:function(t,e,n){var i=!1;if(t.traverseAncestors(function(t){t.scalePlaceHolder&&(i=!0)}),i){var r=new R.o(-1,1,1);this.tweenControlCenter(t.getWorldPosition(new R.o).multiply(r),e,n)}else this.tweenControlCenter(t.getWorldPosition(new R.o),e,n)},onWindowResize:function(t,e){var n=void 0,i=void 0,r=this.container.classList.contains("panolens-container")||this.container.isFullscreen;if(void 0!==t&&void 0!==e)n=t,i=e,this.container._width=t,this.container._height=e;else{var o=/(android)/i.test(window.navigator.userAgent),a=o?Math.min(document.documentElement.clientWidth,window.innerWidth||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),s=o?Math.min(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0);n=r?a:this.container.clientWidth,i=r?s:this.container.clientHeight,this.container._width=n,this.container._height=i}this.camera.aspect=n/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,i),(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent(),this.dispatchEvent({type:"window-resize",width:n,height:i}),this.scene.traverse(function(t){t.dispatchEvent&&t.dispatchEvent({type:"window-resize",width:n,height:i})})},addOutputElement:function(){var t=document.createElement("div");t.style.position="absolute",t.style.right="10px",t.style.top="10px",t.style.color="#fff",this.container.appendChild(t),this.outputDivElement=t},outputPosition:function(){var t=this.raycaster.intersectObject(this.panorama,!0);if(t.length>0){var e=t[0].point.clone(),n=new R.o(-1,1,1),i=this.panorama.getWorldPosition(new R.o);e.sub(i).multiply(n);var r=e.x.toFixed(2)+", "+e.y.toFixed(2)+", "+e.z.toFixed(2);if(0===e.length())return;switch(this.options.output){case"console":console.info(r);break;case"overlay":this.outputDivElement.textContent=r}}},onMouseDown:function(t){t.preventDefault(),this.userMouse.x=t.clientX>=0?t.clientX:t.touches[0].clientX,this.userMouse.y=t.clientY>=0?t.clientY:t.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(t)},onMouseMove:function(t){t.preventDefault(),this.userMouse.type="mousemove",this.onTap(t)},onMouseUp:function(t){var e=!1;this.userMouse.type="mouseup";var n=this.userMouse.x>=t.clientX-this.options.clickTolerance&&this.userMouse.x<=t.clientX+this.options.clickTolerance&&this.userMouse.y>=t.clientY-this.options.clickTolerance&&this.userMouse.y<=t.clientY+this.options.clickTolerance||t.changedTouches&&this.userMouse.x>=t.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=t.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=t.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=t.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0;if((!t||!t.target||t.target.classList.contains("panolens-canvas"))&&(t.preventDefault(),e=t.changedTouches&&1===t.changedTouches.length?this.onTap({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},n):this.onTap(t,n),this.userMouse.type="none",!e&&"click"===n)){var i=this.options,r=i.autoHideInfospot,o=i.autoHideControlBar,a=this.panorama,s=this.toggleControlBar;r&&a&&a.toggleInfospotVisibility(),o&&s()}},onTap:function(t,e){var n=this.container.getBoundingClientRect(),i=n.left,r=n.top,a=this.container,s=a.clientWidth,l=a.clientHeight;if(this.raycasterPoint.x=(t.clientX-i)/s*2-1,this.raycasterPoint.y=-(t.clientY-r)/l*2+1,this.raycaster.setFromCamera(this.raycasterPoint,this.camera),this.panorama){("mousedown"!==t.type&&this.touchSupported||this.OUTPUT_INFOSPOT)&&this.outputPosition();var c=this.raycaster.intersectObjects(this.panorama.children,!0),u=this.getConvertedIntersect(c),h=c.length>0?c[0].object:void 0;if("mouseup"===this.userMouse.type&&(u&&this.pressEntityObject===u&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(h&&this.pressObject===h&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0),"click"===e?(this.panorama.dispatchEvent({type:"click",intersects:c,mouseEvent:t}),u&&u.dispatchEvent&&u.dispatchEvent({type:"click-entity",mouseEvent:t}),h&&h.dispatchEvent&&h.dispatchEvent({type:"click",mouseEvent:t})):(this.panorama.dispatchEvent({type:"hover",intersects:c,mouseEvent:t}),(this.hoverObject&&c.length>0&&this.hoverObject!==u||this.hoverObject&&0===c.length)&&(this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:t}),this.reticle.end()),this.hoverObject=void 0),u&&c.length>0&&(this.hoverObject!==u&&(this.hoverObject=u,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:t}),(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&this.reticle.start(this.onTap.bind(this,t,"click")))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=u&&(this.pressEntityObject=u,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressObject!=h&&(this.pressObject=h,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:t})),("mousemove"===this.userMouse.type||this.options.enableReticle)&&(h&&h.dispatchEvent&&h.dispatchEvent({type:"hover",mouseEvent:t}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:t}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:t}))),!u&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),!h&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0)),h&&h instanceof o){if(this.infospot=h,"click"===e)return!0}else this.infospot&&this.hideInfospot();this.options.autoRotate&&"mousemove"!==this.userMouse.type&&(clearTimeout(this.autoRotateRequestId),this.control===this.OrbitControls&&(this.OrbitControls.autoRotate=!1,this.autoRotateRequestId=window.setTimeout(this.enableAutoRate.bind(this),this.options.autoRotateActivationDuration)))}},getConvertedIntersect:function(t){for(var e=void 0,n=0;n<t.length;n++)if(t[n].distance>=0&&t[n].object&&!t[n].object.passThrough){if(t[n].object.entity&&t[n].object.entity.passThrough)continue;if(t[n].object.entity&&!t[n].object.entity.passThrough){e=t[n].object.entity;break}e=t[n].object;break}return e},hideInfospot:function(){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)},toggleControlBar:function(){var t=this.widget;t&&t.dispatchEvent({type:"control-bar-toggle"})},onKeyDown:function(t){this.options.output&&"none"!==this.options.output&&"Control"===t.key&&(this.OUTPUT_INFOSPOT=!0)},onKeyUp:function(){this.OUTPUT_INFOSPOT=!1},update:function(){U.update(),this.updateCallbacks.forEach(function(t){t()}),this.control.update(),this.scene.traverse(function(t){if(t instanceof o&&t.element&&(this.hoverObject===t||"none"!==t.element.style.display||t.element.left&&"none"!==t.element.left.style.display||t.element.right&&"none"!==t.element.right.style.display))if(this.checkSpriteInViewport(t)){var e=this.getScreenVector(t.getWorldPosition(new R.o)),n=e.x,i=e.y;t.translateElement(n,i)}else t.onDismiss()}.bind(this))},render:function(){this.mode===z.CARDBOARD||this.mode===z.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.sceneReticle,this.camera))},animate:function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this)),this.onChange()},onChange:function(){this.update(),this.render()},registerMouseAndTouchEvents:function(){var t={passive:!1};this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,t),this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,t),this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,t)},unregisterMouseAndTouchEvents:function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!1),this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!1),this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("touchend",this.HANDLER_MOUSE_UP,!1)},registerReticleEvent:function(){this.addUpdateCallback(this.HANDLER_TAP)},unregisterReticleEvent:function(){this.removeUpdateCallback(this.HANDLER_TAP)},updateReticleEvent:function(){var t=this.container.clientWidth/2+this.container.offsetLeft,e=this.container.clientHeight/2;this.removeUpdateCallback(this.HANDLER_TAP),this.HANDLER_TAP=this.onTap.bind(this,{clientX:t,clientY:e}),this.addUpdateCallback(this.HANDLER_TAP)},registerEventListeners:function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)},unregisterEventListeners:function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)},dispose:function(){function t(e){for(var n=e.children.length-1;n>=0;n--)t(e.children[n]),e.remove(e.children[n]);e instanceof s||e instanceof o?(e.dispose(),e=null):e.dispatchEvent&&e.dispatchEvent("dispose")}this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.unregisterEventListeners(),t(this.scene),this.widget&&(this.widget.dispose(),this.widget=null),R.p&&R.p.enabled&&R.p.clear()},destroy:function(){this.dispose(),this.render(),window.cancelAnimationFrame(this.requestAnimationId)},onPanoramaDispose:function(t){t instanceof d&&this.hideVideoWidget(),t===this.panorama&&(this.panorama=null)},loadAsyncRequest:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=new window.XMLHttpRequest;n.onloadend=function(t){e(t)},n.open("GET",t,!0),n.send(null)},addViewIndicator:function(){function t(t){if(0!==t.loaded){var n=t.target.responseXML.documentElement;n.style.width=e.viewIndicatorSize+"px",n.style.height=e.viewIndicatorSize+"px",n.style.position="absolute",n.style.top="10px",n.style.left="10px",n.style.opacity="0.5",n.style.cursor="pointer",n.id="panolens-view-indicator-container",e.container.appendChild(n);var i=n.querySelector("#indicator"),r=function(){e.radius=.225*e.viewIndicatorSize,e.currentPanoAngle=e.camera.rotation.y-R.l.degToRad(90),e.fovAngle=R.l.degToRad(e.camera.fov),e.leftAngle=-e.currentPanoAngle-e.fovAngle/2,e.rightAngle=-e.currentPanoAngle+e.fovAngle/2,e.leftX=e.radius*Math.cos(e.leftAngle),e.leftY=e.radius*Math.sin(e.leftAngle),e.rightX=e.radius*Math.cos(e.rightAngle),e.rightY=e.radius*Math.sin(e.rightAngle),e.indicatorD="M "+e.leftX+" "+e.leftY+" A "+e.radius+" "+e.radius+" 0 0 1 "+e.rightX+" "+e.rightY,e.leftX&&e.leftY&&e.rightX&&e.rightY&&e.radius&&i.setAttribute("d",e.indicatorD)};e.addUpdateCallback(r);var o=function(){this.style.opacity="1"},a=function(){this.style.opacity="0.5"};n.addEventListener("mouseenter",o),n.addEventListener("mouseleave",a)}}var e=this;this.loadAsyncRequest(B.ViewIndicator,t)},appendControlItem:function(t){var e=this.widget.createCustomItem(t);return"video"===t.group?this.widget.videoElement.appendChild(e):this.widget.barElement.appendChild(e),e},clearAllCache:function(){R.p.clear()}}),R.V!=I&&console.warn("three.js version is not matched. Please consider use the target revision "+I),window.TWEEN=U}).call(e,n(102))},function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},function(t,e,n){var i=n(7),r=n(1).document,o=i(r)&&i(r.createElement);t.exports=function(t){return o?r.createElement(t):{}}},function(t,e,n){"use strict";function i(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=r(e),this.reject=r(n)}var r=n(9);t.exports.f=function(t){return new i(t)}},function(t,e,n){var i=n(78),r=n(30);t.exports=Object.keys||function(t){return i(t,r)}},function(t,e,n){var i=n(14).f,r=n(13),o=n(2)("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},function(t,e,n){var i=n(39)("keys"),r=n(43);t.exports=function(t){return i[t]||(i[t]=r(t))}},function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},function(t,e,n){var i=n(32),r=n(17);t.exports=function(t){return i(r(t))}},function(t,e,n){var i=n(17);t.exports=function(t){return Object(i(t))}},function(t,e){function n(t,e){var n=t[1]||"",r=t[3];if(!r)return n;if(e&&"function"==typeof btoa){var o=i(r);return[n].concat(r.sources.map(function(t){return"/*# sourceURL="+r.sourceRoot+t+" */"})).concat([o]).join("\n")}return[n].join("\n")}function i(t){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(t))))+" */"}t.exports=function(t){var e=[];return e.toString=function(){return this.map(function(e){var i=n(e,t);return e[2]?"@media "+e[2]+"{"+i+"}":i}).join("")},e.i=function(t,n){"string"==typeof t&&(t=[[null,t,""]]);for(var i={},r=0;r<this.length;r++){var o=this[r][0];"number"==typeof o&&(i[o]=!0)}for(r=0;r<t.length;r++){var a=t[r];"number"==typeof a[0]&&i[a[0]]||(n&&!a[2]?a[2]=n:n&&(a[2]="("+a[2]+") and ("+n+")"),e.push(a))}},e}},function(t,e){t.exports=function(t,e,n,i){var r,o=t=t||{},a=typeof t.default;"object"!==a&&"function"!==a||(r=t,o=t.default);var s="function"==typeof o?o.options:o;if(e&&(s.render=e.render,s.staticRenderFns=e.staticRenderFns),n&&(s._scopeId=n),i){var l=Object.create(s.computed||null);Object.keys(i).forEach(function(t){var e=i[t];l[t]=function(){return e}}),s.computed=l}return{esModule:r,exports:o,options:s}}},function(t,e,n){function i(t){for(var e=0;e<t.length;e++){var n=t[e],i=u[n.id];if(i){i.refs++;for(var r=0;r<i.parts.length;r++)i.parts[r](n.parts[r]);for(;r<n.parts.length;r++)i.parts.push(o(n.parts[r]));i.parts.length>n.parts.length&&(i.parts.length=n.parts.length)}else{var a=[];for(r=0;r<n.parts.length;r++)a.push(o(n.parts[r]));u[n.id]={id:n.id,refs:1,parts:a}}}}function r(){var t=document.createElement("style");return t.type="text/css",h.appendChild(t),t}function o(t){var e,n,i=document.querySelector('style[data-vue-ssr-id~="'+t.id+'"]');if(i){if(f)return m;i.parentNode.removeChild(i)}if(v){var o=p++;i=d||(d=r()),e=a.bind(null,i,o,!1),n=a.bind(null,i,o,!0)}else i=r(),e=s.bind(null,i),n=function(){i.parentNode.removeChild(i)};return e(t),function(i){if(i){if(i.css===t.css&&i.media===t.media&&i.sourceMap===t.sourceMap)return;e(t=i)}else n()}}function a(t,e,n,i){var r=n?"":i.css;if(t.styleSheet)t.styleSheet.cssText=g(e,r);else{var o=document.createTextNode(r),a=t.childNodes;a[e]&&t.removeChild(a[e]),a.length?t.insertBefore(o,a[e]):t.appendChild(o)}}function s(t,e){var n=e.css,i=e.media,r=e.sourceMap;if(i&&t.setAttribute("media",i),r&&(n+="\n/*# sourceURL="+r.sources[0]+" */",n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(r))))+" */"),t.styleSheet)t.styleSheet.cssText=n;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(n))}}var l="undefined"!=typeof document;if("undefined"!=typeof DEBUG&&DEBUG&&!l)throw new Error("vue-style-loader cannot be used in a non-browser environment. Use { target: 'node' } in your Webpack config to indicate a server-rendering environment.");var c=n(109),u={},h=l&&(document.head||document.getElementsByTagName("head")[0]),d=null,p=0,f=!1,m=function(){},v="undefined"!=typeof navigator&&/msie [6-9]\b/.test(navigator.userAgent.toLowerCase());t.exports=function(t,e,n){f=n;var r=c(t,e);return i(r),function(e){for(var n=[],o=0;o<r.length;o++){var a=r[o],s=u[a.id];s.refs--,n.push(s)}e?(r=c(t,e),i(r)):r=[];for(o=0;o<n.length;o++){s=n[o];if(0===s.refs){for(var l=0;l<s.parts.length;l++)s.parts[l]();delete u[s.id]}}}};var g=function(){var t=[];return function(e,n){return t[e]=n,t.filter(Boolean).join("\n")}}()},function(t,e,n){var i=n(10),r=n(2)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(t,e){try{return t[e]}catch(t){}};t.exports=function(t){var e,n,s;return void 0===t?"Undefined":null===t?"Null":"string"==typeof(n=a(e=Object(t),r))?n:o?i(e):"Object"==(s=i(e))&&"function"==typeof e.callee?"Arguments":s}},function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(t,e,n){var i=n(1).document;t.exports=i&&i.documentElement},function(t,e,n){var i=n(10);t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},function(t,e,n){"use strict";var i=n(34),r=n(3),o=n(82),a=n(5),s=n(13),l=n(8),c=n(70),u=n(21),h=n(77),d=n(2)("iterator"),p=!([].keys&&"next"in[].keys()),f=function(){return this};t.exports=function(t,e,n,m,v,g,y){c(n,e,m);var b,x,w,_=function(t){if(!p&&t in T)return T[t];switch(t){case"keys":case"values":return function(){return new n(this,t)}}return function(){return new n(this,t)}},M=e+" Iterator",E="values"==v,S=!1,T=t.prototype,A=T[d]||T["@@iterator"]||v&&T[v],C=!p&&A||_(v),L=v?E?_("entries"):C:void 0,P="Array"==e&&T.entries||A;if(P&&(w=h(P.call(new t)))!==Object.prototype&&w.next&&(u(w,M,!0),i||s(w,d)||a(w,d,f)),E&&A&&"values"!==A.name&&(S=!0,C=function(){return A.call(this)}),i&&!y||!p&&!S&&T[d]||a(T,d,C),l[e]=C,l[M]=f,v)if(b={values:E?C:_("values"),keys:g?C:_("keys"),entries:L},y)for(x in b)x in T||o(T,x,b[x]);else r(r.P+r.F*(p||S),e,b);return b}},function(t,e){t.exports=!0},function(t,e,n){var i=n(4),r=n(75),o=n(30),a=n(22)("IE_PROTO"),s=function(){},l=function(){var t,e=n(18)("iframe"),i=o.length;for(e.style.display="none",n(31).appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write("<script>document.F=Object<\/script>"),t.close(),l=t.F;i--;)delete l.prototype[o[i]];return l()};t.exports=Object.create||function(t,e){var n;return null!==t?(s.prototype=i(t),n=new s,s.prototype=null,n[a]=t):n=l(),void 0===e?n:r(n,e)}},function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(t){return{e:!0,v:t}}}},function(t,e,n){var i=n(4),r=n(7),o=n(19);t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t);return(0,n.resolve)(e),n.promise}},function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},function(t,e,n){var i=n(1),r=i["__core-js_shared__"]||(i["__core-js_shared__"]={});t.exports=function(t){return r[t]||(r[t]={})}},function(t,e,n){var i=n(4),r=n(9),o=n(2)("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},function(t,e,n){var i,r,o,a=n(11),s=n(67),l=n(31),c=n(18),u=n(1),h=u.process,d=u.setImmediate,p=u.clearImmediate,f=u.MessageChannel,m=u.Dispatch,v=0,g={},y=function(){var t=+this;if(g.hasOwnProperty(t)){var e=g[t];delete g[t],e()}},b=function(t){y.call(t.data)};d&&p||(d=function(t){for(var e=[],n=1;arguments.length>n;)e.push(arguments[n++]);return g[++v]=function(){s("function"==typeof t?t:Function(t),e)},i(v),v},p=function(t){delete g[t]},"process"==n(10)(h)?i=function(t){h.nextTick(a(y,t,1))}:m&&m.now?i=function(t){m.now(a(y,t,1))}:f?(r=new f,o=r.port2,r.port1.onmessage=b,i=a(o.postMessage,o,1)):u.addEventListener&&"function"==typeof postMessage&&!u.importScripts?(i=function(t){u.postMessage(t+"","*")},u.addEventListener("message",b,!1)):i="onreadystatechange"in c("script")?function(t){l.appendChild(c("script")).onreadystatechange=function(){l.removeChild(this),y.call(t)}}:function(t){setTimeout(a(y,t,1),0)}),t.exports={set:d,clear:p}},function(t,e,n){var i=n(23),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},function(t,e,n){n(108);var i=n(27)(n(48),n(105),null,null);t.exports=i.exports},function(t,e,n){n(107);var i=n(27)(n(49),n(104),"data-v-66d382e3",null);t.exports=i.exports},function(t,e,n){n(106);var i=n(27)(n(50),n(103),"data-v-09ad1f51",null);t.exports=i.exports},function(e,n){e.exports=t},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(16),r=console.log.bind(console);e.default={name:"Pano",props:{source:{type:String,default:""},type:{type:String,default:"image"},width:{type:Number,default:100},height:{type:Number,default:100}},data:function(){return{size:{width:this.width,height:this.height},viewer:null,panorama:null}},created:function(){window.addEventListener("resize",this.onResize,!1)},destroyed:function(){this.panorama&&this.panorama.dispose&&this.panorama.dispose()},mounted:function(){void 0!==this.width&&void 0!==this.height||(this.size={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),this.viewer=new i.a({container:this.$el,cameraFov:100}),this.loadPano()},watch:{source:function(){this.viewer&&this.panorama&&this.loadPano()}},methods:{onResize:function(){var t=this;void 0!==this.width&&void 0!==this.height||this.$nextTick(function(){t.size={width:t.$el.offsetWidth,height:t.$el.offsetHeight}})},loadPano:function(){if(r("this.source = "+this.source),this.source){var t=void 0;switch(this.type){case"cube":var e=this.source.replace("%s","l"),n=this.source.replace("%s","f"),o=this.source.replace("%s","r"),a=this.source.replace("%s","b"),s=this.source.replace("%s","u"),l=this.source.replace("%s","d");t=new i.b([o,e,s,l,n,a]);break;case"video":t=new i.c(this.source,{autoplay:!0});break;default:t=new i.d(this.source)}this.setPano(t)}},setPano:function(t){if(t){this.panorama&&this.viewer.remove(this.panorama),this.panorama=t,this.viewer.add(this.panorama),this.viewer.setPanorama(this.panorama);var e=this;this.panorama.addEventListener("load",function(){e.$emit("on-load")})}}}}},function(t,e,n){"use strict";function i(t){var e=new u.d(8,13,100,100),n=new u.e({color:1668818,emissive:16777215,transparent:!0,opacity:1,side:u.f,polygonOffset:!0,polygonOffsetFactor:-4,polygonOffsetUnits:-4}),i=new u.g(9,32,32),r=new u.e;r.copy(n),r.opacity=.5;var o=new u.h(i),a=new u.h(e),l=new u.i;o.updateMatrix(),l.merge(o.geometry,o.matrix,0),a.updateMatrix(),l.merge(a.geometry,a.matrix,1);var c=new u.h(l,new u.j([n,r]));return c.rotation.set(s(90),0,0),c.position.set(t.position.x,t.position.y-100,t.position.z),c.type="hotspot",c.targetScene=t,c}function r(t,e){var n=o(),i=new u.k({transparent:!0,opacity:.8,color:1668818,emissive:16777215,side:u.f,polygonOffset:!0,polygonOffsetFactor:-4,polygonOffsetUnits:-4}),r=new u.h(n,i),c=e.x,h=e.z,d=t.x,p=t.z,f=l(Math.atan2(h-p,c-d));r.rotation.set(s(90),0,s(f));var m=a(f,0);return r.position.set(m.x,m.y,m.z),r.type="arrow",r.targetScene=e,r}function o(){var t=.2/3,e=.1*Math.cos(60*u.l.DEG2RAD),n=.1*Math.sin(60*u.l.DEG2RAD),i=new u.m;return i.moveTo(t,0),i.lineTo(t-e,n),i.lineTo(-e,n),i.lineTo(0,0),i.lineTo(-e,-n),i.lineTo(t-e,-n),i.lineTo(t,0),new u.n(i)}function a(t,e){t+=90;var n=-.5*Math.sin(s(e)),i=-.5*Math.cos(s(e)),r=i*Math.sin(s(-t)),o=i*Math.cos(s(-t));return new u.o(r,n,o)}function s(t){return t*Math.PI/180}function l(t){return 180*t/Math.PI}Object.defineProperty(e,"__esModule",{value:!0});var c=n(16),u=n(15),h=console.log.bind(console);e.default={name:"Scene",props:{pano:{type:Object,default:function(){return{}}},position:{type:Object,default:function(){return{x:0,y:0,z:0}}},rotation:{type:Object,default:function(){return{x:0,y:0,z:0}}},links:{type:Array,default:function(){return[]}},width:{type:Number,default:void 0},height:{type:Number,default:void 0}},data:function(){return{size:{width:this.width,height:this.height},scene_index:-1,viewer:null,panorama:null,hotspots:[]}},created:function(){window.addEventListener("resize",this.onResize,!1)},mounted:function(){void 0!==this.width&&void 0!==this.height||(this.size={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),this.viewer=new c.a({container:this.$el,cameraFov:100}),this.loadScene()},methods:{onResize:function(){var t=this;void 0!==this.width&&void 0!==this.height||this.$nextTick(function(){t.size={width:t.$el.offsetWidth,height:t.$el.offsetHeight}})},loadScene:function(){var t=this;if(h("this.pano = "+this.pano),this.pano){var e=this.pano.source;switch(this.pano.type){case"cube":var n=e.replace("%s","l"),o=e.replace("%s","f"),a=e.replace("%s","r"),s=e.replace("%s","b"),l=e.replace("%s","u"),d=e.replace("%s","d");this.panorama=new c.b([a,n,l,d,o,s]);break;case"video":this.panorama=new c.c(e,{autoplay:!0});break;default:this.panorama=new c.d(e)}this.initViewer();var p=new u.a;this.links.forEach(function(e,n){h(n);var o=i(e);t.viewer.add(o),t.hotspots.push(o);var a=r(t.position,e);a.addEventListener("mouseover",function(){h("hoverred")}),p.add(a)});var f=this,m=new u.b,v=null;this.viewer.container.addEventListener("click",function(t){v&&(h(v.targetScene),f.scene_index=f.getSceneIndexByKey(v.targetScene.key),f.viewer.remove(f.panorama),f.loadScene(),v=null)}),this.viewer.container.addEventListener("mousemove",function(t){var e=new u.c,n=f.viewer.camera;e.x=(t.clientX-f.$el.parentElement.offsetLeft)/f.viewer.container.offsetWidth*2-1,e.y=-(t.clientY-f.$el.parentElement.offsetTop)/f.viewer.container.offsetHeight*2+1,m.setFromCamera(e,n);var i=m.intersectObjects(f.viewer.scene.children,!0),r=null;i.length>=0&&i.forEach(function(t,e){"hotspot"!==t.object.type&&"arrow"!==t.object.type||(r=t.object)}),r?(v&&(v.material.color&&v.material.color.setHex(v.currentHex),v.scale.set(1,1,1)),v=i[0].object,v.material.color&&(v.currentHex=v.material.color.getHex()),v.material.color&&v.material.color.setHex(16776960),v.scale.set(1.2,1.2,1.2)):(v&&(v.material.color&&v.material.color.setHex(v.currentHex),v.scale.set(1,1,1)),v=null)}),this.viewer.addUpdateCallback(function(){this.position.copy(f.viewer.control.target),this.rotation.z=f.viewer.camera.rotation.z,this.translateZ(0),this.translateX(0),this.translateY(-1),this.translateZ(0)}.bind(p)),this.viewer.add(p),this.panorama.addEventListener("load",function(){f.$emit("on-load")})}},initViewer:function(){this.viewer.add(this.panorama),this.viewer.camera.near=.001,this.viewer.camera.target=this.panorama.position,this.viewer.panorama.rotation.set(0,Math.PI,0),this.viewer.panorama.position.copy(this.position)}}}},function(t,e,n){"use strict";function i(t,e){var n={x:e.x,y:e.y,z:e.z},i=new u.d(8,13,100,100),r=new u.e({color:1668818,emissive:16777215,transparent:!0,opacity:1,side:u.f,polygonOffset:!0,polygonOffsetFactor:-4,polygonOffsetUnits:-4}),o=new u.g(9,32,32),a=new u.e;a.copy(r),a.opacity=.5;var l=new u.h(o),c=new u.h(i),h=new u.i;l.updateMatrix(),h.merge(l.geometry,l.matrix,0),c.updateMatrix(),h.merge(c.geometry,c.matrix,1);var d=new u.h(h,new u.j([r,a]));return d.rotation.set(s(90),0,0),d.position.set(n.x,n.y-100,n.z),d.type="hotspot",d.targetScene=e,d}function r(t,e){var n=o(),i=new u.k({transparent:!0,opacity:.8,color:1668818,emissive:16777215,side:u.f,polygonOffset:!0,polygonOffsetFactor:-4,polygonOffsetUnits:-4}),r=new u.h(n,i),c=e.x,h=e.z,d=t.x,p=t.z,f=l(Math.atan2(h-p,c-d));r.rotation.set(s(90),0,s(f));var m=a(f,0);return r.position.set(m.x,m.y,m.z),r.type="arrow",r.targetScene=e,r}function o(){var t=.2/3,e=.1*Math.cos(60*u.l.DEG2RAD),n=.1*Math.sin(60*u.l.DEG2RAD),i=new u.m;return i.moveTo(t,0),i.lineTo(t-e,n),i.lineTo(-e,n),i.lineTo(0,0),i.lineTo(-e,-n),i.lineTo(t-e,-n),i.lineTo(t,0),new u.n(i)}function a(t,e){t+=90;var n=-.5*Math.sin(s(e)),i=-.5*Math.cos(s(e)),r=i*Math.sin(s(-t)),o=i*Math.cos(s(-t));return new u.o(r,n,o)}function s(t){return t*Math.PI/180}function l(t){return 180*t/Math.PI}Object.defineProperty(e,"__esModule",{value:!0});var c=n(16),u=n(15),h=console.log.bind(console);e.default={name:"Tour",props:{scenes:{type:Array,default:function(){return[]}},sceneIndex:{type:Number,default:0},width:{type:Number,default:void 0},height:{type:Number,default:void 0}},data:function(){return{size:{width:this.width,height:this.height},scene_index:-1,viewer:null,panorama:null,hotspots:[],arrowGroup:null}},created:function(){window.addEventListener("resize",this.onResize,!1)},mounted:function(){void 0!==this.width&&void 0!==this.height||(this.size={width:this.$el.offsetWidth,height:this.$el.offsetHeight}),this.viewer=new c.a({container:this.$el,cameraFov:100}),-1===this.scene_index&&this.loadScene(this.sceneIndex)},methods:{onResize:function(){var t=this;void 0!==this.width&&void 0!==this.height||this.$nextTick(function(){t.size={width:t.$el.offsetWidth,height:t.$el.offsetHeight}})},getSceneIndexByKey:function(t){for(var e=0;e<this.scenes.length;e++)if(this.scenes[e].key===t)return e;return-1},loadScene:function(t){var e=this;if(this.$emit("on-load-start"),h("this.scenes = "+this.scenes),this.scenes&&0!==this.scenes.length&&this.scene_index!==t){this.scene_index=t;var n=this.scenes[t],o=n.panorama,a=o.source;switch(o.type){case"cube":var s=a.replace("%s","l"),l=a.replace("%s","f"),d=a.replace("%s","r"),p=a.replace("%s","b"),f=a.replace("%s","u"),m=a.replace("%s","d");this.panorama=new c.b([d,s,f,m,l,p]);break;case"video":this.panorama=new c.c(a,{autoplay:!0}),h("this is video");break;default:this.panorama=new c.d(a)}this.viewer.camera.near=.001,this.viewer.camera.position.set(n.x,n.y,n.z),this.viewer.camera.translateZ(1),this.viewer.add(this.panorama),this.viewer.panorama.rotation.set(0,Math.PI,0),this.panorama.parent.rotation.set(0,Math.PI,0),this.viewer.panorama.position.set(n.x,n.y,n.z),this.viewer.control.target=this.viewer.panorama.position,h(this.viewer),h("panorama = ",this.panorama),this.arrowGroup&&this.viewer.remove(this.arrowGroup),this.hotspots&&this.hotspots.forEach(function(t){e.viewer.remove(t)}),this.arrowGroup=new u.a,n.connections.forEach(function(t){h("connections key = ",t);var o=e.getSceneIndexByKey(t);if(h("connections index = ",o),-1!==o){var a=i(n,e.scenes[o]);e.viewer.add(a),e.hotspots.push(a);var s=r(n,e.scenes[o]);s.addEventListener("mouseover",function(){h("hoverred")}),e.arrowGroup.add(s)}});var v=this;new u.b,this.viewer.container.addEventListener("click",function(t){Date.now()}),this.viewer.add(this.arrowGroup),this.panorama.addEventListener("load",function(){v.$emit("on-load")})}}}};Date.now()},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"install",function(){return h});var i=n(47),r=(n.n(i),n(44)),o=n.n(r),a=n(45),s=n.n(a),l=n(46),c=n.n(l);n.d(e,"Pano",function(){return o.a}),n.d(e,"Scene",function(){return s.a}),n.d(e,"Tour",function(){return c.a});var u=[o.a,c.a,s.a],h=function(t){u.map(function(e){t.component(e.name,e)})};"undefined"!=typeof window&&window.Vue&&h(window.Vue)},function(t,e,n){t.exports={default:n(57),__esModule:!0}},function(t,e,n){t.exports={default:n(58),__esModule:!0}},function(t,e,n){t.exports={default:n(59),__esModule:!0}},function(t,e,n){t.exports={default:n(60),__esModule:!0}},function(t,e,n){t.exports={default:n(61),__esModule:!0}},function(t,e,n){n(89),t.exports=n(0).Number.isNaN},function(t,e,n){n(90),t.exports=n(0).Object.assign},function(t,e,n){n(91);var i=n(0).Object;t.exports=function(t,e){return i.create(t,e)}},function(t,e,n){n(92),t.exports=n(0).Object.keys},function(t,e,n){n(93),n(95),n(98),n(94),n(96),n(97),t.exports=n(0).Promise},function(t,e){t.exports=function(){}},function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},function(t,e,n){var i=n(24),r=n(42),o=n(85);t.exports=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){for(;c>u;)if((s=l[u++])!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},function(t,e,n){var i=n(11),r=n(69),o=n(68),a=n(4),s=n(42),l=n(87),c={},u={};e=t.exports=function(t,e,n,h,d){var p,f,m,v,g=d?function(){return t}:l(t),y=i(n,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=s(t.length);p>b;b++)if((v=e?y(a(f=t[b])[0],f[1]):y(t[b]))===c||v===u)return v}else for(m=g.call(t);!(f=m.next()).done;)if((v=r(m,y,f.value,e))===c||v===u)return v};e.BREAK=c,e.RETURN=u},function(t,e,n){t.exports=!n(6)&&!n(12)(function(){return 7!=Object.defineProperty(n(18)("div"),"a",{get:function(){return 7}}).a})},function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},function(t,e,n){var i=n(8),r=n(2)("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},function(t,e,n){var i=n(4);t.exports=function(t,e,n,r){try{return r?e(i(n)[0],n[1]):e(n)}catch(e){var o=t.return;throw void 0!==o&&i(o.call(t)),e}}},function(t,e,n){"use strict";var i=n(35),r=n(38),o=n(21),a={};n(5)(a,n(2)("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},function(t,e,n){var i=n(2)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(t){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},t(o)}catch(t){}return n}},function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},function(t,e,n){var i=n(1),r=n(41).set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n(10)(a);t.exports=function(){var t,e,n,c=function(){var i,r;for(l&&(i=a.domain)&&i.exit();t;){r=t.fn,t=t.next;try{r()}catch(i){throw t?n():e=void 0,i}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve();n=function(){u.then(c)}}else n=function(){r.call(i,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},function(t,e,n){"use strict";var i=n(20),r=n(76),o=n(79),a=n(25),s=n(32),l=Object.assign;t.exports=!l||n(12)(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=l({},t)[n]||Object.keys(l({},e)).join("")!=i})?function(t,e){for(var n=a(t),l=arguments.length,c=1,u=r.f,h=o.f;l>c;)for(var d,p=s(arguments[c++]),f=u?i(p).concat(u(p)):i(p),m=f.length,v=0;m>v;)h.call(p,d=f[v++])&&(n[d]=p[d]);return n}:l},function(t,e,n){var i=n(14),r=n(4),o=n(20);t.exports=n(6)?Object.defineProperties:function(t,e){r(t);for(var n,a=o(e),s=a.length,l=0;s>l;)i.f(t,n=a[l++],e[n]);return t}},function(t,e){e.f=Object.getOwnPropertySymbols},function(t,e,n){var i=n(13),r=n(25),o=n(22)("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},function(t,e,n){var i=n(13),r=n(24),o=n(64)(!1),a=n(22)("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);for(;e.length>l;)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},function(t,e){e.f={}.propertyIsEnumerable},function(t,e,n){var i=n(3),r=n(0),o=n(12);t.exports=function(t,e){var n=(r.Object||{})[t]||Object[t],a={};a[t]=e(n),i(i.S+i.F*o(function(){n(1)}),"Object",a)}},function(t,e,n){var i=n(5);t.exports=function(t,e,n){for(var r in e)n&&t[r]?t[r]=e[r]:i(t,r,e[r]);return t}},function(t,e,n){t.exports=n(5)},function(t,e,n){"use strict";var i=n(1),r=n(0),o=n(14),a=n(6),s=n(2)("species");t.exports=function(t){var e="function"==typeof r[t]?r[t]:i[t];a&&e&&!e[s]&&o.f(e,s,{configurable:!0,get:function(){return this}})}},function(t,e,n){var i=n(23),r=n(17);t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),l=i(n),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},function(t,e,n){var i=n(23),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},function(t,e,n){var i=n(7);t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},function(t,e,n){var i=n(29),r=n(2)("iterator"),o=n(8);t.exports=n(0).getIteratorMethod=function(t){if(void 0!=t)return t[r]||t["@@iterator"]||o[i(t)]}},function(t,e,n){"use strict";var i=n(62),r=n(72),o=n(8),a=n(24);t.exports=n(33)(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(t,e,n){var i=n(3);i(i.S,"Number",{isNaN:function(t){return t!=t}})},function(t,e,n){var i=n(3);i(i.S+i.F,"Object",{assign:n(74)})},function(t,e,n){var i=n(3);i(i.S,"Object",{create:n(35)})},function(t,e,n){var i=n(25),r=n(20);n(80)("keys",function(){return function(t){return r(i(t))}})},function(t,e){},function(t,e,n){"use strict";var i,r,o,a,s=n(34),l=n(1),c=n(11),u=n(29),h=n(3),d=n(7),p=n(9),f=n(63),m=n(65),v=n(40),g=n(41).set,y=n(73)(),b=n(19),x=n(36),w=n(37),_=l.TypeError,M=l.process,E=l.Promise,S="process"==u(M),T=function(){},A=r=b.f,C=!!function(){try{var t=E.resolve(1),e=(t.constructor={})[n(2)("species")]=function(t){t(T,T)};return(S||"function"==typeof PromiseRejectionEvent)&&t.then(T)instanceof e}catch(t){}}(),L=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},P=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){for(var i=t._v,r=1==t._s,o=0;n.length>o;)!function(e){var n,o,a=r?e.ok:e.fail,s=e.resolve,l=e.reject,c=e.domain;try{a?(r||(2==t._h&&k(t),t._h=1),!0===a?n=i:(c&&c.enter(),n=a(i),c&&c.exit()),n===e.promise?l(_("Promise-chain cycle")):(o=L(n))?o.call(n,s,l):s(n)):l(i)}catch(t){l(t)}}(n[o++]);t._c=[],t._n=!1,e&&!t._h&&O(t)})}},O=function(t){g.call(l,function(){var e,n,i,r=t._v,o=R(t);if(o&&(e=x(function(){S?M.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=S||R(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},R=function(t){return 1!==t._h&&0===(t._a||t._c).length},k=function(t){g.call(l,function(){var e;S?M.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},D=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),P(e,!0))},I=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw _("Promise can't be resolved itself");(e=L(t))?y(function(){var i={_w:n,_d:!1};try{e.call(t,c(I,i,1),c(D,i,1))}catch(t){D.call(i,t)}}):(n._v=t,n._s=1,P(n,!1))}catch(t){D.call({_w:n,_d:!1},t)}}};C||(E=function(t){f(this,E,"Promise","_h"),p(t),i.call(this);try{t(c(I,this,1),c(D,this,1))}catch(t){D.call(this,t)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n(81)(E.prototype,{then:function(t,e){var n=A(v(this,E));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=S?M.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&P(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(I,t,1),this.reject=c(D,t,1)},b.f=A=function(t){return t===E||t===a?new o(t):r(t)}),h(h.G+h.W+h.F*!C,{Promise:E}),n(21)(E,"Promise"),n(83)("Promise"),a=n(0).Promise,h(h.S+h.F*!C,"Promise",{reject:function(t){var e=A(this);return(0,e.reject)(t),e.promise}}),h(h.S+h.F*(s||!C),"Promise",{resolve:function(t){return w(s&&this===a?E:this,t)}}),h(h.S+h.F*!(C&&n(71)(function(t){E.all(t).catch(T)})),"Promise",{all:function(t){var e=this,n=A(e),i=n.resolve,r=n.reject,o=x(function(){var n=[],o=0,a=1;m(t,!1,function(t){var s=o++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=A(e),i=n.reject,r=x(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},function(t,e,n){"use strict";var i=n(84)(!0);n(33)(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,n=this._i;return n>=e.length?{value:void 0,done:!0}:(t=i(e,n),this._i+=t.length,{value:t,done:!1})})},function(t,e,n){"use strict";var i=n(3),r=n(0),o=n(1),a=n(40),s=n(37);i(i.P+i.R,"Promise",{finally:function(t){var e=a(this,r.Promise||o.Promise),n="function"==typeof t;return this.then(n?function(n){return s(e,t()).then(function(){return n})}:t,n?function(n){return s(e,t()).then(function(){throw n})}:t)}})},function(t,e,n){"use strict";var i=n(3),r=n(19),o=n(36);i(i.S,"Promise",{try:function(t){var e=r.f(this),n=o(t);return(n.e?e.reject:e.resolve)(n.v),e.promise}})},function(t,e,n){n(88);for(var i=n(1),r=n(5),o=n(8),a=n(2)("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],h=u&&u.prototype;h&&!h[a]&&r(h,a,c),o[c]=o.Array}},function(t,e,n){e=t.exports=n(26)(!1),e.push([t.i,"div[data-v-09ad1f51]{cursor:pointer}",""])},function(t,e,n){e=t.exports=n(26)(!1),e.push([t.i,"div[data-v-66d382e3]{cursor:pointer}",""])},function(t,e,n){e=t.exports=n(26)(!1),e.push([t.i,".v-pano{width:100%;height:100%;margin:0;padding:0;border:0}",""])},function(t,e){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function r(t){if(u===setTimeout)return setTimeout(t,0);if((u===n||!u)&&setTimeout)return u=setTimeout,setTimeout(t,0);try{return u(t,0)}catch(e){try{return u.call(null,t,0)}catch(e){return u.call(this,t,0)}}}function o(t){if(h===clearTimeout)return clearTimeout(t);if((h===i||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function a(){m&&p&&(m=!1,p.length?f=p.concat(f):v=-1,f.length&&s())}function s(){if(!m){var t=r(a);m=!0;for(var e=f.length;e;){for(p=f,f=[];++v<e;)p&&p[v].run();v=-1,e=f.length}p=null,m=!1,o(t)}}function l(t,e){this.fun=t,this.array=e}function c(){}var u,h,d=t.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:n}catch(t){u=n}try{h="function"==typeof clearTimeout?clearTimeout:i}catch(t){h=i}}();var p,f=[],m=!1,v=-1;d.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];f.push(new l(t,e)),1!==f.length||m||r(s)},l.prototype.run=function(){this.fun.apply(null,this.array)},d.title="browser",d.browser=!0,d.env={},d.argv=[],d.version="",d.versions={},d.on=c,d.addListener=c,d.once=c,d.off=c,d.removeListener=c,d.removeAllListeners=c,d.emit=c,d.prependListener=c,d.prependOnceListener=c,d.listeners=function(t){return[]},d.binding=function(t){throw new Error("process.binding is not supported")},d.cwd=function(){return"/"},d.chdir=function(t){throw new Error("process.chdir is not supported")},d.umask=function(){return 0}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{width:"100%",height:"100%",margin:"0",border:"0",padding:"0"}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticStyle:{width:"100%",height:"100%",margin:"0",border:"0",padding:"0"}})},staticRenderFns:[]}},function(t,e){t.exports={render:function(){var t=this,e=t.$createElement;return(t._self._c||e)("div",{staticClass:"v-pano"})},staticRenderFns:[]}},function(t,e,n){var i=n(99);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),n(28)("4136a65b",i,!0)},function(t,e,n){var i=n(100);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),n(28)("356c544a",i,!0)},function(t,e,n){var i=n(101);"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals),n(28)("49e91b24",i,!0)},function(t,e){t.exports=function(t,e){for(var n=[],i={},r=0;r<e.length;r++){var o=e[r],a=o[0],s=o[1],l=o[2],c=o[3],u={id:t+":"+r,css:s,media:l,sourceMap:c};i[a]?i[a].parts.push(u):n.push(i[a]={id:a,parts:[u]})}return n}}])})},"30b5":function(t,e,n){"use strict";var i=n("c532");function r(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}t.exports=function(t,e,n){if(!e)return t;var o;if(n)o=n(e);else if(i.isURLSearchParams(e))o=e.toString();else{var a=[];i.forEach(e,function(t,e){null!==t&&"undefined"!==typeof t&&(i.isArray(t)?e+="[]":t=[t],i.forEach(t,function(t){i.isDate(t)?t=t.toISOString():i.isObject(t)&&(t=JSON.stringify(t)),a.push(r(e)+"="+r(t))}))}),o=a.join("&")}if(o){var s=t.indexOf("#");-1!==s&&(t=t.slice(0,s)),t+=(-1===t.indexOf("?")?"?":"&")+o}return t}},"30f1":function(t,e,n){"use strict";var i=n("b8e3"),r=n("63b6"),o=n("9138"),a=n("35e8"),s=n("481b"),l=n("8f60"),c=n("45f2"),u=n("53e2"),h=n("5168")("iterator"),d=!([].keys&&"next"in[].keys()),p="@@iterator",f="keys",m="values",v=function(){return this};t.exports=function(t,e,n,g,y,b,x){l(n,e,g);var w,_,M,E=function(t){if(!d&&t in C)return C[t];switch(t){case f:return function(){return new n(this,t)};case m:return function(){return new n(this,t)}}return function(){return new n(this,t)}},S=e+" Iterator",T=y==m,A=!1,C=t.prototype,L=C[h]||C[p]||y&&C[y],P=L||E(y),O=y?T?E("entries"):P:void 0,R="Array"==e&&C.entries||L;if(R&&(M=u(R.call(new t)),M!==Object.prototype&&M.next&&(c(M,S,!0),i||"function"==typeof M[h]||a(M,h,v))),T&&L&&L.name!==m&&(A=!0,P=function(){return L.call(this)}),i&&!x||!d&&!A&&C[h]||a(C,h,P),s[e]=P,s[S]=v,y)if(w={values:T?P:E(m),keys:b?P:E(f),entries:O},x)for(_ in w)_ in C||o(C,_,w[_]);else r(r.P+r.F*(d||A),e,w);return w}},"31f4":function(t,e){t.exports=function(t,e,n){var i=void 0===n;switch(e.length){case 0:return i?t():t.call(n);case 1:return i?t(e[0]):t.call(n,e[0]);case 2:return i?t(e[0],e[1]):t.call(n,e[0],e[1]);case 3:return i?t(e[0],e[1],e[2]):t.call(n,e[0],e[1],e[2]);case 4:return i?t(e[0],e[1],e[2],e[3]):t.call(n,e[0],e[1],e[2],e[3])}return t.apply(n,e)}},"32e9":function(t,e,n){var i=n("86cc"),r=n("4630");t.exports=n("9e1e")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},"32fc":function(t,e,n){var i=n("e53d").document;t.exports=i&&i.documentElement},"335c":function(t,e,n){var i=n("6b4c");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"33a4":function(t,e,n){var i=n("84f2"),r=n("2b4c")("iterator"),o=Array.prototype;t.exports=function(t){return void 0!==t&&(i.Array===t||o[r]===t)}},"355d":function(t,e){e.f={}.propertyIsEnumerable},"35e8":function(t,e,n){var i=n("d9f6"),r=n("aebd");t.exports=n("8e60")?function(t,e,n){return i.f(t,e,r(1,n))}:function(t,e,n){return t[e]=n,t}},"36c3":function(t,e,n){var i=n("335c"),r=n("25eb");t.exports=function(t){return i(r(t))}},"37c8":function(t,e,n){e.f=n("2b4c")},"387f":function(t,e,n){"use strict";t.exports=function(t,e,n,i,r){return t.config=e,n&&(t.code=n),t.request=i,t.response=r,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}},"38fd":function(t,e,n){var i=n("69a8"),r=n("4bf8"),o=n("613b")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},3934:function(t,e,n){"use strict";var i=n("c532");t.exports=i.isStandardBrowserEnv()?function(){var t,e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");function r(t){var i=t;return e&&(n.setAttribute("href",i),i=n.href),n.setAttribute("href",i),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:"/"===n.pathname.charAt(0)?n.pathname:"/"+n.pathname}}return t=r(window.location.href),function(e){var n=i.isString(e)?r(e):e;return n.protocol===t.protocol&&n.host===t.host}}():function(){return function(){return!0}}()},"3a38":function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},"3a72":function(t,e,n){var i=n("7726"),r=n("8378"),o=n("2d00"),a=n("37c8"),s=n("86cc").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},"3c4e":function(t,e,n){"use strict";var i=function(t){return r(t)&&!o(t)};function r(t){return!!t&&"object"===typeof t}function o(t){var e=Object.prototype.toString.call(t);return"[object RegExp]"===e||"[object Date]"===e||l(t)}var a="function"===typeof Symbol&&Symbol.for,s=a?Symbol.for("react.element"):60103;function l(t){return t.$$typeof===s}function c(t){return Array.isArray(t)?[]:{}}function u(t,e){var n=e&&!0===e.clone;return n&&i(t)?p(c(t),t,e):t}function h(t,e,n){var r=t.slice();return e.forEach(function(e,o){"undefined"===typeof r[o]?r[o]=u(e,n):i(e)?r[o]=p(t[o],e,n):-1===t.indexOf(e)&&r.push(u(e,n))}),r}function d(t,e,n){var r={};return i(t)&&Object.keys(t).forEach(function(e){r[e]=u(t[e],n)}),Object.keys(e).forEach(function(o){i(e[o])&&t[o]?r[o]=p(t[o],e[o],n):r[o]=u(e[o],n)}),r}function p(t,e,n){var i=Array.isArray(e),r=Array.isArray(t),o=n||{arrayMerge:h},a=i===r;if(a){if(i){var s=o.arrayMerge||h;return s(t,e,n)}return d(t,e,n)}return u(e,n)}p.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(function(t,n){return p(t,n,e)})};var f=p;t.exports=f},"3f6b":function(t,e,n){t.exports={default:n("51b6"),__esModule:!0}},4010:function(t,e,n){"use strict";e.__esModule=!0,e.removeResizeListener=e.addResizeListener=void 0;var i=n("6dd8"),r=o(i);function o(t){return t&&t.__esModule?t:{default:t}}var a="undefined"===typeof window,s=function(t){var e=t,n=Array.isArray(e),i=0;for(e=n?e:e[Symbol.iterator]();;){var r;if(n){if(i>=e.length)break;r=e[i++]}else{if(i=e.next(),i.done)break;r=i.value}var o=r,a=o.target.__resizeListeners__||[];a.length&&a.forEach(function(t){t()})}};e.addResizeListener=function(t,e){a||(t.__resizeListeners__||(t.__resizeListeners__=[],t.__ro__=new r.default(s),t.__ro__.observe(t)),t.__resizeListeners__.push(e))},e.removeResizeListener=function(t,e){t&&t.__resizeListeners__&&(t.__resizeListeners__.splice(t.__resizeListeners__.indexOf(e),1),t.__resizeListeners__.length||t.__ro__.disconnect())}},"417f":function(t,e,n){"use strict";e.__esModule=!0;var i=n("2b0e"),r=a(i),o=n("5924");function a(t){return t&&t.__esModule?t:{default:t}}var s=[],l="@@clickoutsideContext",c=void 0,u=0;function h(t,e,n){return function(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!(n&&n.context&&i.target&&r.target)||t.contains(i.target)||t.contains(r.target)||t===i.target||n.context.popperElm&&(n.context.popperElm.contains(i.target)||n.context.popperElm.contains(r.target))||(e.expression&&t[l].methodName&&n.context[t[l].methodName]?n.context[t[l].methodName]():t[l].bindingFn&&t[l].bindingFn())}}!r.default.prototype.$isServer&&(0,o.on)(document,"mousedown",function(t){return c=t}),!r.default.prototype.$isServer&&(0,o.on)(document,"mouseup",function(t){s.forEach(function(e){return e[l].documentHandler(t,c)})}),e.default={bind:function(t,e,n){s.push(t);var i=u++;t[l]={id:i,documentHandler:h(t,e,n),methodName:e.expression,bindingFn:e.value}},update:function(t,e,n){t[l].documentHandler=h(t,e,n),t[l].methodName=e.expression,t[l].bindingFn=e.value},unbind:function(t){for(var e=s.length,n=0;n<e;n++)if(s[n][l].id===t[l].id){s.splice(n,1);break}delete t[l]}}},"41a0":function(t,e,n){"use strict";var i=n("2aeb"),r=n("4630"),o=n("7f20"),a={};n("32e9")(a,n("2b4c")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},"41b2":function(t,e,n){"use strict";e.__esModule=!0;var i=n("3f6b"),r=o(i);function o(t){return t&&t.__esModule?t:{default:t}}e.default=r.default||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t}},"41f8":function(t,e,n){"use strict";e.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.isVNode=o;var r=n("8122");function o(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":i(t))&&(0,r.hasOwn)(t,"componentOptions")}},4588:function(t,e){var n=Math.ceil,i=Math.floor;t.exports=function(t){return isNaN(t=+t)?0:(t>0?i:n)(t)}},"45f2":function(t,e,n){var i=n("d9f6").f,r=n("07e3"),o=n("5168")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},4630:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},"467f":function(t,e,n){"use strict";var i=n("2d83");t.exports=function(t,e,n){var r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(i("Request failed with status code "+n.status,n.config,null,n.request,n)):t(n)}},4726:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=59)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},14:function(t,e){t.exports=n("14e9")},18:function(t,e){t.exports=n("dcdc")},21:function(t,e){t.exports=n("d397")},26:function(t,e){t.exports=n("92fa")},3:function(t,e){t.exports=n("8122")},31:function(t,e){t.exports=n("2a5e")},40:function(t,e){t.exports=n("e452")},51:function(t,e){t.exports=n("f494")},59:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["el-cascader-panel",t.border&&"is-bordered"],on:{keydown:t.handleKeyDown}},t._l(t.menus,function(t,e){return n("cascader-menu",{key:e,ref:"menu",refInFor:!0,attrs:{index:e,nodes:t}})}),1)},r=[];i._withStripped=!0;var o,a,s=n(26),l=n.n(s),c=n(14),u=n.n(c),h=n(18),d=n.n(h),p=n(51),f=n.n(p),m=n(3),v=function(t){return t.stopPropagation()},g={inject:["panel"],components:{ElCheckbox:d.a,ElRadio:f.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var t=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some(function(e){return t.isInPath(e)})},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var t=this,e=this.panel,n=this.node,i=this.isDisabled,r=this.config,o=r.multiple,a=r.checkStrictly;!a&&i||n.loading||(r.lazy&&!n.loaded?e.lazyLoad(n,function(){var e=t.isLeaf;if(e||t.handleExpand(),o){var i=!!e&&n.checked;t.handleMultiCheckChange(i)}}):e.handleExpand(n))},handleCheckChange:function(){var t=this.panel,e=this.value,n=this.node;t.handleCheckChange(e),t.handleExpand(n)},handleMultiCheckChange:function(t){this.node.doCheck(t),this.panel.calculateMultiCheckedValue()},isInPath:function(t){var e=this.node,n=t[e.level-1]||{};return n.uid===e.uid},renderPrefix:function(t){var e=this.isLeaf,n=this.isChecked,i=this.config,r=i.checkStrictly,o=i.multiple;return o?this.renderCheckbox(t):r?this.renderRadio(t):e&&n?this.renderCheckIcon(t):null},renderPostfix:function(t){var e=this.node,n=this.isLeaf;return e.loading?this.renderLoadingIcon(t):n?null:this.renderExpandIcon(t)},renderCheckbox:function(t){var e=this.node,n=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(r.nativeOn.click=v),t("el-checkbox",l()([{attrs:{value:e.checked,indeterminate:e.indeterminate,disabled:i}},r]))},renderRadio:function(t){var e=this.checkedValue,n=this.value,i=this.isDisabled;return Object(m["isEqual"])(n,e)&&(n=e),t("el-radio",{attrs:{value:e,label:n,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:v}},[t("span")])},renderCheckIcon:function(t){return t("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(t){return t("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(t){return t("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(t){var e=this.panel,n=this.node,i=e.renderLabelFn,r=i?i({node:n,data:n.data}):null;return t("span",{class:"el-cascader-node__label"},[r||n.label])}},render:function(t){var e=this,n=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,a=this.isDisabled,s=this.config,c=this.nodeId,u=s.expandTrigger,h=s.checkStrictly,d=s.multiple,p=!h&&a,f={on:{}};return"click"===u?f.on.click=this.handleExpand:(f.on.mouseenter=function(t){e.handleExpand(),e.$emit("expand",t)},f.on.focus=function(t){e.handleExpand(),e.$emit("expand",t)}),!o||a||h||d||(f.on.click=this.handleCheckChange),t("li",l()([{attrs:{role:"menuitem",id:c,"aria-expanded":n,tabindex:p?null:-1},class:{"el-cascader-node":!0,"is-selectable":h,"in-active-path":n,"in-checked-path":i,"is-active":r,"is-disabled":p}},f]),[this.renderPrefix(t),this.renderContent(t),this.renderPostfix(t)])}},y=g,b=n(0),x=Object(b["a"])(y,o,a,!1,null,null,null);x.options.__file="packages/cascader-panel/src/cascader-node.vue";var w,_,M=x.exports,E=n(6),S=n.n(E),T={name:"ElCascaderMenu",mixins:[S.a],inject:["panel"],components:{ElScrollbar:u.a,CascaderNode:M},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(m["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(t){this.activeNode=t.target},handleMouseMove:function(t){var e=this.activeNode,n=this.hoverTimer,i=this.$refs.hoverZone;if(e&&i)if(e.contains(t.target)){clearTimeout(n);var r=this.$el.getBoundingClientRect(),o=r.left,a=t.clientX-o,s=this.$el,l=s.offsetWidth,c=s.offsetHeight,u=e.offsetTop,h=u+e.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+a+" "+u+" L"+l+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+a+" "+h+" L"+l+" "+c+" V"+h+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var t=this.$refs.hoverZone;t&&(t.innerHTML="")},renderEmptyText:function(t){return t("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(t){var e=this.menuId,n=this.panel.isHoverMenu,i={on:{}};n&&(i.on.expand=this.handleExpand);var r=this.nodes.map(function(n,r){var o=n.hasChildren;return t("cascader-node",l()([{key:n.uid,attrs:{node:n,"node-id":e+"-"+r,"aria-haspopup":o,"aria-owns":o?e:null}},i]))});return[].concat(r,[n?t("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(t){var e=this.isEmpty,n=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),t("el-scrollbar",l()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":e}},class:"el-cascader-menu"},i]),[e?this.renderEmptyText(t):this.renderNodeList(t)])}},A=T,C=Object(b["a"])(A,w,_,!1,null,null,null);C.options.__file="packages/cascader-panel/src/cascader-menu.vue";var L=C.exports,P=n(21),O=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function R(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var k=0,D=function(){function t(e,n,i){R(this,t),this.data=e,this.config=n,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=k++,this.initState(),this.initChildren()}return t.prototype.initState=function(){var t=this.config,e=t.value,n=t.label;this.value=this.data[e],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map(function(t){return t.value}),this.pathLabels=this.pathNodes.map(function(t){return t.label}),this.loading=!1,this.loaded=!1},t.prototype.initChildren=function(){var e=this,n=this.config,i=n.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map(function(i){return new t(i,n,e)})},t.prototype.calculatePathNodes=function(){var t=[this],e=this.parent;while(e)t.unshift(e),e=e.parent;return t},t.prototype.getPath=function(){return this.path},t.prototype.getValue=function(){return this.value},t.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},t.prototype.getText=function(t,e){return t?this.pathLabels.join(e):this.label},t.prototype.isSameNode=function(t){var e=this.getValueByOption();return this.config.multiple&&Array.isArray(t)?t.some(function(t){return Object(m["isEqual"])(t,e)}):Object(m["isEqual"])(t,e)},t.prototype.broadcast=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r="onParent"+Object(m["capitalize"])(t);this.children.forEach(function(e){e&&(e.broadcast.apply(e,[t].concat(n)),e[r]&&e[r].apply(e,n))})},t.prototype.emit=function(t){var e=this.parent,n="onChild"+Object(m["capitalize"])(t);if(e){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];e[n]&&e[n].apply(e,r),e.emit.apply(e,[t].concat(r))}},t.prototype.onParentCheck=function(t){this.isDisabled||this.setCheckState(t)},t.prototype.onChildCheck=function(){var t=this.children,e=t.filter(function(t){return!t.isDisabled}),n=!!e.length&&e.every(function(t){return t.checked});this.setCheckState(n)},t.prototype.setCheckState=function(t){var e=this.children.length,n=this.children.reduce(function(t,e){var n=e.checked?1:e.indeterminate?.5:0;return t+n},0);this.checked=t,this.indeterminate=n!==e&&n>0},t.prototype.syncCheckState=function(t){var e=this.getValueByOption(),n=this.isSameNode(t,e);this.doCheck(n)},t.prototype.doCheck=function(t){this.checked!==t&&(this.config.checkStrictly?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check")))},O(t,[{key:"isDisabled",get:function(){var t=this.data,e=this.parent,n=this.config,i=n.disabled,r=n.checkStrictly;return t[i]||!r&&e&&e.isDisabled}},{key:"isLeaf",get:function(){var t=this.data,e=this.loaded,n=this.hasChildren,i=this.children,r=this.config,o=r.lazy,a=r.leaf;if(o){var s=Object(P["isDef"])(t[a])?t[a]:!!e&&!i.length;return this.hasChildren=!s,s}return!n}}]),t}(),I=D;function N(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var z=function t(e,n){return e.reduce(function(e,i){return i.isLeaf?e.push(i):(!n&&e.push(i),e=e.concat(t(i.children,n))),e},[])},B=function(){function t(e,n){N(this,t),this.config=n,this.initNodes(e)}return t.prototype.initNodes=function(t){var e=this;t=Object(m["coerceTruthyValueToArray"])(t),this.nodes=t.map(function(t){return new I(t,e.config)}),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},t.prototype.appendNode=function(t,e){var n=new I(t,this.config,e),i=e?e.children:this.nodes;i.push(n)},t.prototype.appendNodes=function(t,e){var n=this;t=Object(m["coerceTruthyValueToArray"])(t),t.forEach(function(t){return n.appendNode(t,e)})},t.prototype.getNodes=function(){return this.nodes},t.prototype.getFlattedNodes=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?this.leafNodes:this.flattedNodes;return e?n:z(this.nodes,t)},t.prototype.getNodeByValue=function(t){if(t){var e=this.getFlattedNodes(!1,!this.config.lazy).filter(function(e){return Object(m["valueEquals"])(e.path,t)||e.value===t});return e&&e.length?e[0]:null}return null},t}(),F=B,j=n(9),H=n.n(j),U=n(40),V=n.n(U),G=n(31),W=n.n(G),$=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},q=V.a.keys,Y={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:m["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},X=function(t){return!t.getAttribute("aria-owns")},Z=function(t,e){var n=t.parentNode;if(n){var i=n.querySelectorAll('.el-cascader-node[tabindex="-1"]'),r=Array.prototype.indexOf.call(i,t);return i[r+e]||null}return null},J=function(t,e){if(t){var n=t.id.split("-");return Number(n[n.length-2])}},K=function(t){t&&(t.focus(),!X(t)&&t.click())},Q=function(t){if(t){var e=t.querySelector("input");e?e.click():X(t)&&t.click()}},tt={name:"ElCascaderPanel",components:{CascaderMenu:L},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return H()($({},Y),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(t){Object(m["isEqual"])(t,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",t),this.$emit("change",t))}},mounted:function(){Object(m["isEmpty"])(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var t=this.config,e=this.options;t.lazy&&Object(m["isEmpty"])(e)?this.lazyLoad():(this.store=new F(e,t),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var t=this.value,e=this.checkedValue;Object(m["isEqual"])(t,e)||(this.checkedValue=t,this.syncMenuState())},syncMenuState:function(){var t=this.multiple,e=this.checkStrictly;this.syncActivePath(),t&&this.syncMultiCheckState(),e&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var t=this,e=this.getFlattedNodes(this.leafOnly);e.forEach(function(e){e.syncCheckState(t.checkedValue)})},syncActivePath:function(){var t=this,e=this.store,n=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(m["isEmpty"])(i))if(Object(m["isEmpty"])(r))this.activePath=[],this.menus=[e.getNodes()];else{var o=n?r[0]:r,a=this.getNodeByValue(o)||{},s=(a.pathNodes||[]).slice(0,-1);this.expandNodes(s)}else{var l=i.map(function(e){return t.getNodeByValue(e.getValue())});this.expandNodes(l)}},expandNodes:function(t){var e=this;t.forEach(function(t){return e.handleExpand(t,!0)})},calculateCheckedNodePaths:function(){var t=this,e=this.checkedValue,n=this.multiple,i=n?Object(m["coerceTruthyValueToArray"])(e):[e];this.checkedNodePaths=i.map(function(e){var n=t.getNodeByValue(e);return n?n.pathNodes:[]})},handleKeyDown:function(t){var e=t.target,n=t.keyCode;switch(n){case q.up:var i=Z(e,-1);K(i);break;case q.down:var r=Z(e,1);K(r);break;case q.left:var o=this.$refs.menu[J(e)-1];if(o){var a=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');K(a)}break;case q.right:var s=this.$refs.menu[J(e)+1];if(s){var l=s.$el.querySelector('.el-cascader-node[tabindex="-1"]');K(l)}break;case q.enter:Q(e);break;case q.esc:case q.tab:this.$emit("close");break;default:return}},handleExpand:function(t,e){var n=this.activePath,i=t.level,r=n.slice(0,i-1),o=this.menus.slice(0,i);if(t.isLeaf||(r.push(t),o.push(t.children)),this.activePath=r,this.menus=o,!e){var a=r.map(function(t){return t.getValue()}),s=n.map(function(t){return t.getValue()});Object(m["valueEquals"])(a,s)||(this.$emit("active-item-change",a),this.$emit("expand-change",a))}},handleCheckChange:function(t){this.checkedValue=t},lazyLoad:function(t,e){var n=this,i=this.config;t||(t=t||{root:!0,level:0},this.store=new F([],i),this.menus=[this.store.getNodes()]),t.loading=!0;var r=function(i){var r=t.root?null:t;if(i&&i.length&&n.store.appendNodes(i,r),t.loading=!1,t.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],a=n.config.value,s=n.config.leaf;if(Array.isArray(i)&&i.filter(function(t){return t[a]===o}).length>0){var l=n.store.getNodeByValue(o);l.data[s]||n.lazyLoad(l,function(){n.handleExpand(l)}),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}e&&e(i)};i.lazyLoad(t,r)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map(function(t){return t.getValueByOption()})},scrollIntoView:function(){if(!this.$isServer){var t=this.$refs.menu||[];t.forEach(function(t){var e=t.$el;if(e){var n=e.querySelector(".el-scrollbar__wrap"),i=e.querySelector(".el-cascader-node.is-active")||e.querySelector(".el-cascader-node.in-active-path");W()(n,i)}})}},getNodeByValue:function(t){return this.store.getNodeByValue(t)},getFlattedNodes:function(t){var e=!this.config.lazy;return this.store.getFlattedNodes(t,e)},getCheckedNodes:function(t){var e=this.checkedValue,n=this.multiple;if(n){var i=this.getFlattedNodes(t);return i.filter(function(t){return t.checked})}return Object(m["isEmpty"])(e)?[]:[this.getNodeByValue(e)]},clearCheckedNodes:function(){var t=this.config,e=this.leafOnly,n=t.multiple,i=t.emitPath;n?(this.getCheckedNodes(e).filter(function(t){return!t.isDisabled}).forEach(function(t){return t.doCheck(!1)}),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},et=tt,nt=Object(b["a"])(et,i,r,!1,null,null,null);nt.options.__file="packages/cascader-panel/src/cascader-panel.vue";var it=nt.exports;it.install=function(t){t.component(it.name,it)};e["default"]=it},6:function(t,e){t.exports=n("6b7c")},9:function(t,e){t.exports=n("7f4d")}})},"47ee":function(t,e,n){var i=n("c3a1"),r=n("9aa9"),o=n("355d");t.exports=function(t){var e=i(t),n=r.f;if(n){var a,s=n(t),l=o.f,c=0;while(s.length>c)l.call(t,a=s[c++])&&e.push(a)}return e}},"481b":function(t,e){t.exports={}},4897:function(t,e,n){"use strict";e.__esModule=!0,e.i18n=e.use=e.t=void 0;var i=n("f0d9"),r=h(i),o=n("2b0e"),a=h(o),s=n("3c4e"),l=h(s),c=n("9d7e"),u=h(c);function h(t){return t&&t.__esModule?t:{default:t}}var d=(0,u.default)(a.default),p=r.default,f=!1,m=function(){var t=Object.getPrototypeOf(this||a.default).$t;if("function"===typeof t&&a.default.locale)return f||(f=!0,a.default.locale(a.default.config.lang,(0,l.default)(p,a.default.locale(a.default.config.lang)||{},{clone:!0}))),t.apply(this,arguments)},v=e.t=function(t,e){var n=m.apply(this,arguments);if(null!==n&&void 0!==n)return n;for(var i=t.split("."),r=p,o=0,a=i.length;o<a;o++){var s=i[o];if(n=r[s],o===a-1)return d(n,e);if(!n)return"";r=n}return""},g=e.use=function(t){p=t||p},y=e.i18n=function(t){m=t||m};e.default={use:g,t:v,i18n:y}},"4a59":function(t,e,n){var i=n("9b43"),r=n("1fa8"),o=n("33a4"),a=n("cb7c"),s=n("9def"),l=n("27ee"),c={},u={};e=t.exports=function(t,e,n,h,d){var p,f,m,v,g=d?function(){return t}:l(t),y=i(n,h,e?2:1),b=0;if("function"!=typeof g)throw TypeError(t+" is not iterable!");if(o(g)){for(p=s(t.length);p>b;b++)if(v=e?y(a(f=t[b])[0],f[1]):y(t[b]),v===c||v===u)return v}else for(m=g.call(t);!(f=m.next()).done;)if(v=r(m,y,f.value,e),v===c||v===u)return v};e.BREAK=c,e.RETURN=u},"4a7b":function(t,e,n){"use strict";var i=n("c532");t.exports=function(t,e){e=e||{};var n={},r=["url","method","data"],o=["headers","auth","proxy","params"],a=["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","timeoutMessage","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","decompress","maxContentLength","maxBodyLength","maxRedirects","transport","httpAgent","httpsAgent","cancelToken","socketPath","responseEncoding"],s=["validateStatus"];function l(t,e){return i.isPlainObject(t)&&i.isPlainObject(e)?i.merge(t,e):i.isPlainObject(e)?i.merge({},e):i.isArray(e)?e.slice():e}function c(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=l(void 0,t[r])):n[r]=l(t[r],e[r])}i.forEach(r,function(t){i.isUndefined(e[t])||(n[t]=l(void 0,e[t]))}),i.forEach(o,c),i.forEach(a,function(r){i.isUndefined(e[r])?i.isUndefined(t[r])||(n[r]=l(void 0,t[r])):n[r]=l(void 0,e[r])}),i.forEach(s,function(i){i in e?n[i]=l(t[i],e[i]):i in t&&(n[i]=l(void 0,t[i]))});var u=r.concat(o).concat(a).concat(s),h=Object.keys(t).concat(Object.keys(e)).filter(function(t){return-1===u.indexOf(t)});return i.forEach(h,c),n}},"4b26":function(t,e,n){"use strict";e.__esModule=!0;var i=n("2b0e"),r=a(i),o=n("5924");function a(t){return t&&t.__esModule?t:{default:t}}var s=!1,l=!1,c=void 0,u=function(){if(!r.default.prototype.$isServer){var t=d.modalDom;return t?s=!0:(s=!1,t=document.createElement("div"),d.modalDom=t,t.addEventListener("touchmove",function(t){t.preventDefault(),t.stopPropagation()}),t.addEventListener("click",function(){d.doOnModalClick&&d.doOnModalClick()})),t}},h={},d={modalFade:!0,getInstance:function(t){return h[t]},register:function(t,e){t&&e&&(h[t]=e)},deregister:function(t){t&&(h[t]=null,delete h[t])},nextZIndex:function(){return d.zIndex++},modalStack:[],doOnModalClick:function(){var t=d.modalStack[d.modalStack.length-1];if(t){var e=d.getInstance(t.id);e&&e.closeOnClickModal&&e.close()}},openModal:function(t,e,n,i,a){if(!r.default.prototype.$isServer&&t&&void 0!==e){this.modalFade=a;for(var l=this.modalStack,c=0,h=l.length;c<h;c++){var d=l[c];if(d.id===t)return}var p=u();if((0,o.addClass)(p,"v-modal"),this.modalFade&&!s&&(0,o.addClass)(p,"v-modal-enter"),i){var f=i.trim().split(/\s+/);f.forEach(function(t){return(0,o.addClass)(p,t)})}setTimeout(function(){(0,o.removeClass)(p,"v-modal-enter")},200),n&&n.parentNode&&11!==n.parentNode.nodeType?n.parentNode.appendChild(p):document.body.appendChild(p),e&&(p.style.zIndex=e),p.tabIndex=0,p.style.display="",this.modalStack.push({id:t,zIndex:e,modalClass:i})}},closeModal:function(t){var e=this.modalStack,n=u();if(e.length>0){var i=e[e.length-1];if(i.id===t){if(i.modalClass){var r=i.modalClass.trim().split(/\s+/);r.forEach(function(t){return(0,o.removeClass)(n,t)})}e.pop(),e.length>0&&(n.style.zIndex=e[e.length-1].zIndex)}else for(var a=e.length-1;a>=0;a--)if(e[a].id===t){e.splice(a,1);break}}0===e.length&&(this.modalFade&&(0,o.addClass)(n,"v-modal-leave"),setTimeout(function(){0===e.length&&(n.parentNode&&n.parentNode.removeChild(n),n.style.display="none",d.modalDom=void 0),(0,o.removeClass)(n,"v-modal-leave")},200))}};Object.defineProperty(d,"zIndex",{configurable:!0,get:function(){return l||(c=c||(r.default.prototype.$ELEMENT||{}).zIndex||2e3,l=!0),c},set:function(t){c=t}});var p=function(){if(!r.default.prototype.$isServer&&d.modalStack.length>0){var t=d.modalStack[d.modalStack.length-1];if(!t)return;var e=d.getInstance(t.id);return e}};r.default.prototype.$isServer||window.addEventListener("keydown",function(t){if(27===t.keyCode){var e=p();e&&e.closeOnPressEscape&&(e.handleClose?e.handleClose():e.handleAction?e.handleAction("cancel"):e.close())}}),e.default=d},"4bf8":function(t,e,n){var i=n("be13");t.exports=function(t){return Object(i(t))}},"4e4b":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=61)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},10:function(t,e){t.exports=n("f3ad")},12:function(t,e){t.exports=n("417f")},14:function(t,e){t.exports=n("14e9")},16:function(t,e){t.exports=n("4010")},17:function(t,e){t.exports=n("0e15")},21:function(t,e){t.exports=n("d397")},22:function(t,e){t.exports=n("12f2")},3:function(t,e){t.exports=n("8122")},31:function(t,e){t.exports=n("2a5e")},33:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:t.itemSelected,"is-disabled":t.disabled||t.groupDisabled||t.limitReached,hover:t.hover},on:{mouseenter:t.hoverItem,click:function(e){return e.stopPropagation(),t.selectOptionClick(e)}}},[t._t("default",[n("span",[t._v(t._s(t.currentLabel))])])],2)},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s=n(3),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c={mixins:[a.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(t,e){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===("undefined"===typeof t?"undefined":l(t))&&"object"===("undefined"===typeof e?"undefined":l(e))&&t[r]===e[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(t,e){if(this.isObject){var n=this.select.valueKey;return Object(s["getValueByPath"])(t,n)===Object(s["getValueByPath"])(e,n)}return t===e},contains:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(this.isObject){var n=this.select.valueKey;return t&&t.some(function(t){return Object(s["getValueByPath"])(t,n)===Object(s["getValueByPath"])(e,n)})}return t&&t.indexOf(e)>-1},handleGroupDisabled:function(t){this.groupDisabled=t},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(t){this.visible=new RegExp(Object(s["escapeRegexpString"])(t),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var t=this.select,e=t.selected,n=t.multiple,i=n?e:[e],r=this.select.cachedOptions.indexOf(this),o=i.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=c,h=n(0),d=Object(h["a"])(u,i,r,!1,null,null,null);d.options.__file="packages/select/src/option.vue";e["a"]=d.exports},37:function(t,e){t.exports=n("8bbc")},4:function(t,e){t.exports=n("d010")},5:function(t,e){t.exports=n("e974")},6:function(t,e){t.exports=n("6b7c")},61:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[t.selectSize?"el-select--"+t.selectSize:""],on:{click:function(e){return e.stopPropagation(),t.toggleMenu(e)}}},[t.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":t.inputWidth-32+"px",width:"100%"}},[t.collapseTags&&t.selected.length?n("span",[n("el-tag",{attrs:{closable:!t.selectDisabled,size:t.collapseTagSize,hit:t.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(e){t.deleteTag(e,t.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[t._v(t._s(t.selected[0].currentLabel))])]),t.selected.length>1?n("el-tag",{attrs:{closable:!1,size:t.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[t._v("+ "+t._s(t.selected.length-1))])]):t._e()],1):t._e(),t.collapseTags?t._e():n("transition-group",{on:{"after-leave":t.resetInputHeight}},t._l(t.selected,function(e){return n("el-tag",{key:t.getValueKey(e),attrs:{closable:!t.selectDisabled,size:t.collapseTagSize,hit:e.hitState,type:"info","disable-transitions":""},on:{close:function(n){t.deleteTag(n,e)}}},[n("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e.currentLabel))])])}),1),t.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[t.selectSize?"is-"+t.selectSize:""],style:{"flex-grow":"1",width:t.inputLength/(t.inputWidth-32)+"%","max-width":t.inputWidth-42+"px"},attrs:{type:"text",disabled:t.selectDisabled,autocomplete:t.autoComplete||t.autocomplete},domProps:{value:t.query},on:{focus:t.handleFocus,blur:function(e){t.softFocus=!1},keyup:t.managePlaceholder,keydown:[t.resetInputState,function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.preventDefault(),t.navigateOptions("next")},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.preventDefault(),t.navigateOptions("prev")},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.selectOption(e)):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.stopPropagation(),e.preventDefault(),t.visible=!1},function(e){return"button"in e||!t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?t.deletePrevTag(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.visible=!1}],compositionstart:t.handleComposition,compositionupdate:t.handleComposition,compositionend:t.handleComposition,input:[function(e){e.target.composing||(t.query=e.target.value)},t.debouncedQueryChange]}}):t._e()],1):t._e(),n("el-input",{ref:"reference",class:{"is-focus":t.visible},attrs:{type:"text",placeholder:t.currentPlaceholder,name:t.name,id:t.id,autocomplete:t.autoComplete||t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,tabindex:t.multiple&&t.filterable?"-1":null},on:{focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keyup:function(e){return t.debouncedOnInputChange(e)},keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.stopPropagation(),e.preventDefault(),t.navigateOptions("next")},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.stopPropagation(),e.preventDefault(),t.navigateOptions("prev")},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.selectOption(e)):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.stopPropagation(),e.preventDefault(),t.visible=!1},function(e){if(!("button"in e)&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.visible=!1}],paste:function(e){return t.debouncedOnInputChange(e)},mouseenter:function(e){t.inputHovering=!0},mouseleave:function(e){t.inputHovering=!1}},model:{value:t.selectedLabel,callback:function(e){t.selectedLabel=e},expression:"selectedLabel"}},[t.$slots.prefix?n("template",{slot:"prefix"},[t._t("prefix")],2):t._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+t.iconClass]}),t.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:t.handleClearClick}}):t._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":t.handleMenuEnter,"after-leave":t.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:t.visible&&!1!==t.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":t.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:t.options.length>0&&!t.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!t.allowCreate&&t.query&&0===t.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[t.showNewOption?n("el-option",{attrs:{value:t.query,created:""}}):t._e(),t._t("default")],2),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&0===t.options.length)?[t.$slots.empty?t._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[t._v("\n          "+t._s(t.emptyText)+"\n        ")])]:t._e()],2)],1)],1)},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s=n(22),l=n.n(s),c=n(6),u=n.n(c),h=n(10),d=n.n(h),p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":t.$parent.multiple},t.popperClass],style:{minWidth:t.minWidth}},[t._t("default")],2)},f=[];p._withStripped=!0;var m=n(5),v=n.n(m),g={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[v.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var t=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",function(){t.$parent.visible&&t.updatePopper()}),this.$on("destroyPopper",this.destroyPopper)}},y=g,b=n(0),x=Object(b["a"])(y,p,f,!1,null,null,null);x.options.__file="packages/select/src/select-dropdown.vue";var w=x.exports,_=n(33),M=n(37),E=n.n(M),S=n(14),T=n.n(S),A=n(17),C=n.n(A),L=n(12),P=n.n(L),O=n(16),R=n(31),k=n.n(R),D=n(3),I={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter(function(t){return t.visible}).every(function(t){return t.disabled})}},watch:{hoverIndex:function(t){var e=this;"number"===typeof t&&t>-1&&(this.hoverOption=this.options[t]||{}),this.options.forEach(function(t){t.hover=e.hoverOption===t})}},methods:{navigateOptions:function(t){var e=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===t?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===t&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(t),this.$nextTick(function(){return e.scrollToOption(e.hoverOption)})}}else this.visible=!0}}},N=n(21),z={mixins:[a.a,u.a,l()("reference"),I],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(D["isIE"])()&&!Object(D["isEdge"])()&&!this.visible},showClose:function(){var t=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,e=this.clearable&&!this.selectDisabled&&this.inputHovering&&t;return e},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var t=this,e=this.options.filter(function(t){return!t.created}).some(function(e){return e.currentLabel===t.query});return this.filterable&&this.allowCreate&&""!==this.query&&!e},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:d.a,ElSelectMenu:w,ElOption:_["a"],ElTag:E.a,ElScrollbar:T.a},directives:{Clickoutside:P.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var t=this;this.$nextTick(function(){t.resetInputHeight()})},propPlaceholder:function(t){this.cachedPlaceHolder=this.currentPlaceholder=t},value:function(t,e){this.multiple&&(this.resetInputHeight(),t&&t.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(D["valueEquals"])(t,e)||this.dispatch("ElFormItem","el.form.change",t)},visible:function(t){var e=this;t?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick(function(){e.$refs.input&&""===e.$refs.input.value&&0===e.selected.length&&(e.currentPlaceholder=e.cachedPlaceHolder)}),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",t)},options:function(){var t=this;if(!this.$isServer){this.$nextTick(function(){t.broadcast("ElSelectDropdown","updatePopper")}),this.multiple&&this.resetInputHeight();var e=this.$el.querySelectorAll("input");-1===[].indexOf.call(e,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(t){var e=this,n=t.target.value;if("compositionend"===t.type)this.isOnComposition=!1,this.$nextTick(function(t){return e.handleQueryChange(n)});else{var i=n[n.length-1]||"";this.isOnComposition=!Object(N["isKorean"])(i)}},handleQueryChange:function(t){var e=this;this.previousQuery===t||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=t,this.$nextTick(function(){e.visible&&e.broadcast("ElSelectDropdown","updatePopper")}),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick(function(){var t=15*e.$refs.input.value.length+20;e.inputLength=e.collapseTags?Math.min(50,t):t,e.managePlaceholder(),e.resetInputHeight()}),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(t)):"function"===typeof this.filterMethod?(this.filterMethod(t),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",t),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=t)},scrollToOption:function(t){var e=Array.isArray(t)&&t[0]?t[0].$el:t.$el;if(this.$refs.popper&&e){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");k()(n,e)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var t=this;this.$nextTick(function(){return t.scrollToOption(t.selected)})},emitChange:function(t){Object(D["valueEquals"])(this.value,t)||this.$emit("change",t)},getOption:function(t){for(var e=void 0,n="[object object]"===Object.prototype.toString.call(t).toLowerCase(),i="[object null]"===Object.prototype.toString.call(t).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(t).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o],s=n?Object(D["getValueByPath"])(a.value,this.valueKey)===Object(D["getValueByPath"])(t,this.valueKey):a.value===t;if(s){e=a;break}}if(e)return e;var l=n||i||r?"":t,c={value:t,currentLabel:l};return this.multiple&&(c.hitState=!1),c},setSelected:function(){var t=this;if(!this.multiple){var e=this.getOption(this.value);return e.created?(this.createdLabel=e.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=e.currentLabel,this.selected=e,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach(function(e){n.push(t.getOption(e))}),this.selected=n,this.$nextTick(function(){t.resetInputHeight()})},handleFocus:function(t){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",t))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(t){var e=this;setTimeout(function(){e.isSilentBlur?e.isSilentBlur=!1:e.$emit("blur",t)},50),this.softFocus=!1},handleClearClick:function(t){this.deleteSelected(t)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(t){if(Array.isArray(this.selected)){var e=this.selected[this.selected.length-1];if(e)return!0===t||!1===t?(e.hitState=t,t):(e.hitState=!e.hitState,e.hitState)}},deletePrevTag:function(t){if(t.target.value.length<=0&&!this.toggleLastOptionHitState()){var e=this.value.slice();e.pop(),this.$emit("input",e),this.emitChange(e)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(t){8!==t.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var t=this;this.collapseTags&&!this.filterable||this.$nextTick(function(){if(t.$refs.reference){var e=t.$refs.reference.$el.childNodes,n=[].filter.call(e,function(t){return"INPUT"===t.tagName})[0],i=t.$refs.tags,r=t.initialInputHeight||40;n.style.height=0===t.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",t.visible&&!1!==t.emptyText&&t.broadcast("ElSelectDropdown","updatePopper")}})},resetHoverIndex:function(){var t=this;setTimeout(function(){t.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map(function(e){return t.options.indexOf(e)})):t.hoverIndex=-1:t.hoverIndex=t.options.indexOf(t.selected)},300)},handleOptionSelect:function(t,e){var n=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,t.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(t.value),this.$emit("input",i),this.emitChange(i),t.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",t.value),this.emitChange(t.value),this.visible=!1;this.isSilentBlur=e,this.setSoftFocus(),this.visible||this.$nextTick(function(){n.scrollToOption(t)})},setSoftFocus:function(){this.softFocus=!0;var t=this.$refs.input||this.$refs.reference;t&&t.focus()},getValueIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n="[object object]"===Object.prototype.toString.call(e).toLowerCase();if(n){var i=this.valueKey,r=-1;return t.some(function(t,n){return Object(D["getValueByPath"])(t,i)===Object(D["getValueByPath"])(e,i)&&(r=n,!0)}),r}return t.indexOf(e)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(t){t.stopPropagation();var e=this.multiple?[]:"";this.$emit("input",e),this.emitChange(e),this.visible=!1,this.$emit("clear")},deleteTag:function(t,e){var n=this.selected.indexOf(e);if(n>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(n,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",e.value)}t.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(t){t>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(t,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var t=!1,e=this.options.length-1;e>=0;e--)if(this.options[e].created){t=!0,this.hoverIndex=e;break}if(!t)for(var n=0;n!==this.options.length;++n){var i=this.options[n];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=n;break}}else if(i.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(t){return"[object object]"!==Object.prototype.toString.call(t.value).toLowerCase()?t.value:Object(D["getValueByPath"])(t.value,this.valueKey)}},created:function(){var t=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=C()(this.debounce,function(){t.onInputChange()}),this.debouncedQueryChange=C()(this.debounce,function(e){t.handleQueryChange(e.target.value)}),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var t=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(O["addResizeListener"])(this.$el,this.handleResize);var e=this.$refs.reference;if(e&&e.$el){var n={medium:36,small:32,mini:28},i=e.$el.querySelector("input");this.initialInputHeight=i.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick(function(){e&&e.$el&&(t.inputWidth=e.$el.getBoundingClientRect().width)}),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(O["removeResizeListener"])(this.$el,this.handleResize)}},B=z,F=Object(b["a"])(B,i,r,!1,null,null,null);F.options.__file="packages/select/src/select.vue";var j=F.exports;j.install=function(t){t.component(j.name,j)};e["default"]=j}})},"50ed":function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},5128:function(t,e,n){"use strict";e.__esModule=!0,e.PopupManager=void 0;var i=n("2b0e"),r=d(i),o=n("7f4d"),a=d(o),s=n("4b26"),l=d(s),c=n("e62d"),u=d(c),h=n("5924");function d(t){return t&&t.__esModule?t:{default:t}}var p=1,f=void 0;e.default={props:{visible:{type:Boolean,default:!1},openDelay:{},closeDelay:{},zIndex:{},modal:{type:Boolean,default:!1},modalFade:{type:Boolean,default:!0},modalClass:{},modalAppendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!1},closeOnClickModal:{type:Boolean,default:!1}},beforeMount:function(){this._popupId="popup-"+p++,l.default.register(this._popupId,this)},beforeDestroy:function(){l.default.deregister(this._popupId),l.default.closeModal(this._popupId),this.restoreBodyStyle()},data:function(){return{opened:!1,bodyPaddingRight:null,computedBodyPaddingRight:0,withoutHiddenClass:!0,rendered:!1}},watch:{visible:function(t){var e=this;if(t){if(this._opening)return;this.rendered?this.open():(this.rendered=!0,r.default.nextTick(function(){e.open()}))}else this.close()}},methods:{open:function(t){var e=this;this.rendered||(this.rendered=!0);var n=(0,a.default)({},this.$props||this,t);this._closeTimer&&(clearTimeout(this._closeTimer),this._closeTimer=null),clearTimeout(this._openTimer);var i=Number(n.openDelay);i>0?this._openTimer=setTimeout(function(){e._openTimer=null,e.doOpen(n)},i):this.doOpen(n)},doOpen:function(t){if(!this.$isServer&&(!this.willOpen||this.willOpen())&&!this.opened){this._opening=!0;var e=this.$el,n=t.modal,i=t.zIndex;if(i&&(l.default.zIndex=i),n&&(this._closing&&(l.default.closeModal(this._popupId),this._closing=!1),l.default.openModal(this._popupId,l.default.nextZIndex(),this.modalAppendToBody?void 0:e,t.modalClass,t.modalFade),t.lockScroll)){this.withoutHiddenClass=!(0,h.hasClass)(document.body,"el-popup-parent--hidden"),this.withoutHiddenClass&&(this.bodyPaddingRight=document.body.style.paddingRight,this.computedBodyPaddingRight=parseInt((0,h.getStyle)(document.body,"paddingRight"),10)),f=(0,u.default)();var r=document.documentElement.clientHeight<document.body.scrollHeight,o=(0,h.getStyle)(document.body,"overflowY");f>0&&(r||"scroll"===o)&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.computedBodyPaddingRight+f+"px"),(0,h.addClass)(document.body,"el-popup-parent--hidden")}"static"===getComputedStyle(e).position&&(e.style.position="absolute"),e.style.zIndex=l.default.nextZIndex(),this.opened=!0,this.onOpen&&this.onOpen(),this.doAfterOpen()}},doAfterOpen:function(){this._opening=!1},close:function(){var t=this;if(!this.willClose||this.willClose()){null!==this._openTimer&&(clearTimeout(this._openTimer),this._openTimer=null),clearTimeout(this._closeTimer);var e=Number(this.closeDelay);e>0?this._closeTimer=setTimeout(function(){t._closeTimer=null,t.doClose()},e):this.doClose()}},doClose:function(){this._closing=!0,this.onClose&&this.onClose(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose()},doAfterClose:function(){l.default.closeModal(this._popupId),this._closing=!1},restoreBodyStyle:function(){this.modal&&this.withoutHiddenClass&&(document.body.style.paddingRight=this.bodyPaddingRight,(0,h.removeClass)(document.body,"el-popup-parent--hidden")),this.withoutHiddenClass=!0}}},e.PopupManager=l.default},5168:function(t,e,n){var i=n("dbdb")("wks"),r=n("62a0"),o=n("e53d").Symbol,a="function"==typeof o,s=t.exports=function(t){return i[t]||(i[t]=a&&o[t]||(a?o:r)("Symbol."+t))};s.store=i},"51b6":function(t,e,n){n("a3c3"),t.exports=n("584a").Object.assign},5270:function(t,e,n){"use strict";var i=n("c532"),r=n("c401"),o=n("2e67"),a=n("2444");function s(t){t.cancelToken&&t.cancelToken.throwIfRequested()}t.exports=function(t){s(t),t.headers=t.headers||{},t.data=r(t.data,t.headers,t.transformRequest),t.headers=i.merge(t.headers.common||{},t.headers[t.method]||{},t.headers),i.forEach(["delete","get","head","post","put","patch","common"],function(e){delete t.headers[e]});var e=t.adapter||a.adapter;return e(t).then(function(e){return s(t),e.data=r(e.data,e.headers,t.transformResponse),e},function(e){return o(e)||(s(t),e&&e.response&&(e.response.data=r(e.response.data,e.response.headers,t.transformResponse))),Promise.reject(e)})}},"52a7":function(t,e){e.f={}.propertyIsEnumerable},"53e2":function(t,e,n){var i=n("07e3"),r=n("241e"),o=n("5559")("IE_PROTO"),a=Object.prototype;t.exports=Object.getPrototypeOf||function(t){return t=r(t),i(t,o)?t[o]:"function"==typeof t.constructor&&t instanceof t.constructor?t.constructor.prototype:t instanceof Object?a:null}},"53f9":function(t,e,n){var i=n("5a89");i.MTLLoader=function(t){this.manager=void 0!==t?t:i.DefaultLoadingManager},i.MTLLoader.prototype={constructor:i.MTLLoader,load:function(t,e,n,r){var o=this,a=new i.FileLoader(this.manager);a.setPath(this.path),a.load(t,function(t){e(o.parse(t))},n,r)},setPath:function(t){return this.path=t,this},setTexturePath:function(t){return this.texturePath=t,this},setBaseUrl:function(t){return console.warn("THREE.MTLLoader: .setBaseUrl() is deprecated. Use .setTexturePath( path ) for texture path or .setPath( path ) for general base path instead."),this.setTexturePath(t)},setCrossOrigin:function(t){return this.crossOrigin=t,this},setMaterialOptions:function(t){return this.materialOptions=t,this},parse:function(t){for(var e=t.split("\n"),n={},r=/\s+/,o={},a=0;a<e.length;a++){var s=e[a];if(s=s.trim(),0!==s.length&&"#"!==s.charAt(0)){var l=s.indexOf(" "),c=l>=0?s.substring(0,l):s;c=c.toLowerCase();var u=l>=0?s.substring(l+1):"";if(u=u.trim(),"newmtl"===c)n={name:u},o[u]=n;else if(n)if("ka"===c||"kd"===c||"ks"===c){var h=u.split(r,3);n[c]=[parseFloat(h[0]),parseFloat(h[1]),parseFloat(h[2])]}else n[c]=u}}var d=new i.MTLLoader.MaterialCreator(this.texturePath||this.path,this.materialOptions);return d.setCrossOrigin(this.crossOrigin),d.setManager(this.manager),d.setMaterials(o),d}},i.MTLLoader.MaterialCreator=function(t,e){this.baseUrl=t||"",this.options=e,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:i.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:i.RepeatWrapping},i.MTLLoader.MaterialCreator.prototype={constructor:i.MTLLoader.MaterialCreator,crossOrigin:"Anonymous",setCrossOrigin:function(t){this.crossOrigin=t},setManager:function(t){this.manager=t},setMaterials:function(t){this.materialsInfo=this.convert(t),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(t){if(!this.options)return t;var e={};for(var n in t){var i=t[n],r={};for(var o in e[n]=r,i){var a=!0,s=i[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1);break;default:break}a&&(r[l]=s)}}return e},preload:function(){for(var t in this.materialsInfo)this.create(t)},getIndex:function(t){return this.nameLookup[t]},getAsArray:function(){var t=0;for(var e in this.materialsInfo)this.materialsArray[t]=this.create(e),this.nameLookup[e]=t,t++;return this.materialsArray},create:function(t){return void 0===this.materials[t]&&this.createMaterial_(t),this.materials[t]},createMaterial_:function(t){var e=this,n=this.materialsInfo[t],r={name:t,side:this.side};function o(t,e){return"string"!==typeof e||""===e?"":/^https?:\/\//i.test(e)?e:t+e}function a(t,n){if(!r[t]){var i=e.getTextureParams(n,r),a=e.loadTexture(o(e.baseUrl,i.url));a.repeat.copy(i.scale),a.offset.copy(i.offset),a.wrapS=e.wrap,a.wrapT=e.wrap,r[t]=a}}for(var s in n){var l,c=n[s];if(""!==c)switch(s.toLowerCase()){case"kd":r.color=(new i.Color).fromArray(c);break;case"ks":r.specular=(new i.Color).fromArray(c);break;case"map_kd":a("map",c);break;case"map_ks":a("specularMap",c);break;case"norm":a("normalMap",c);break;case"map_bump":case"bump":a("bumpMap",c);break;case"ns":r.shininess=parseFloat(c);break;case"d":l=parseFloat(c),l<1&&(r.opacity=l,r.transparent=!0);break;case"tr":l=parseFloat(c),this.options&&this.options.invertTrProperty&&(l=1-l),l>0&&(r.opacity=1-l,r.transparent=!0);break;default:break}}return this.materials[t]=new i.MeshPhongMaterial(r),this.materials[t]},getTextureParams:function(t,e){var n,r={scale:new i.Vector2(1,1),offset:new i.Vector2(0,0)},o=t.split(/\s+/);return n=o.indexOf("-bm"),n>=0&&(e.bumpScale=parseFloat(o[n+1]),o.splice(n,2)),n=o.indexOf("-s"),n>=0&&(r.scale.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),n=o.indexOf("-o"),n>=0&&(r.offset.set(parseFloat(o[n+1]),parseFloat(o[n+2])),o.splice(n,4)),r.url=o.join(" ").trim(),r},loadTexture:function(t,e,n,r,o){var a,s=i.Loader.Handlers.get(t),l=void 0!==this.manager?this.manager:i.DefaultLoadingManager;return null===s&&(s=new i.TextureLoader(l)),s.setCrossOrigin&&s.setCrossOrigin(this.crossOrigin),a=s.load(t,n,r,o),void 0!==e&&(a.mapping=e),a}},i.OBJLoader=function(){var t=/^[og]\s*(.+)?/,e=/^mtllib /,n=/^usemtl /;function r(){var t={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materialLibraries:[],startObject:function(t,e){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=t,void(this.object.fromDeclaration=!1!==e);var n=this.object&&"function"===typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0),this.object={name:t||"",fromDeclaration:!1!==e,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(t,e){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var i={index:this.materials.length,name:t||"",mtllib:Array.isArray(e)&&e.length>0?e[e.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(t){var e={index:"number"===typeof t?t:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return e.clone=this.clone.bind(e),e}};return this.materials.push(i),i},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(t){var e=this.currentMaterial();if(e&&-1===e.groupEnd&&(e.groupEnd=this.geometry.vertices.length/3,e.groupCount=e.groupEnd-e.groupStart,e.inherited=!1),t&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return t&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),e}},n&&n.name&&"function"===typeof n.clone){var i=n.clone(0);i.inherited=!0,this.object.materials.push(i)}this.objects.push(this.object)},finalize:function(){this.object&&"function"===typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseNormalIndex:function(t,e){var n=parseInt(t,10);return 3*(n>=0?n-1:n+e/3)},parseUVIndex:function(t,e){var n=parseInt(t,10);return 2*(n>=0?n-1:n+e/2)},addVertex:function(t,e,n){var i=this.vertices,r=this.object.geometry.vertices;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addVertexPoint:function(t){var e=this.vertices,n=this.object.geometry.vertices;n.push(e[t+0],e[t+1],e[t+2])},addVertexLine:function(t){var e=this.vertices,n=this.object.geometry.vertices;n.push(e[t+0],e[t+1],e[t+2])},addNormal:function(t,e,n){var i=this.normals,r=this.object.geometry.normals;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addColor:function(t,e,n){var i=this.colors,r=this.object.geometry.colors;r.push(i[t+0],i[t+1],i[t+2]),r.push(i[e+0],i[e+1],i[e+2]),r.push(i[n+0],i[n+1],i[n+2])},addUV:function(t,e,n){var i=this.uvs,r=this.object.geometry.uvs;r.push(i[t+0],i[t+1]),r.push(i[e+0],i[e+1]),r.push(i[n+0],i[n+1])},addUVLine:function(t){var e=this.uvs,n=this.object.geometry.uvs;n.push(e[t+0],e[t+1])},addFace:function(t,e,n,i,r,o,a,s,l){var c=this.vertices.length,u=this.parseVertexIndex(t,c),h=this.parseVertexIndex(e,c),d=this.parseVertexIndex(n,c);if(this.addVertex(u,h,d),void 0!==i&&""!==i){var p=this.uvs.length;u=this.parseUVIndex(i,p),h=this.parseUVIndex(r,p),d=this.parseUVIndex(o,p),this.addUV(u,h,d)}if(void 0!==a&&""!==a){var f=this.normals.length;u=this.parseNormalIndex(a,f),h=a===s?u:this.parseNormalIndex(s,f),d=a===l?u:this.parseNormalIndex(l,f),this.addNormal(u,h,d)}this.colors.length>0&&this.addColor(u,h,d)},addPointGeometry:function(t){this.object.geometry.type="Points";for(var e=this.vertices.length,n=0,i=t.length;n<i;n++)this.addVertexPoint(this.parseVertexIndex(t[n],e))},addLineGeometry:function(t,e){this.object.geometry.type="Line";for(var n=this.vertices.length,i=this.uvs.length,r=0,o=t.length;r<o;r++)this.addVertexLine(this.parseVertexIndex(t[r],n));var a=0;for(o=e.length;a<o;a++)this.addUVLine(this.parseUVIndex(e[a],i))}};return t.startObject("",!1),t}function o(t){this.manager=void 0!==t?t:i.DefaultLoadingManager,this.materials=null}return o.prototype={constructor:o,load:function(t,e,n,r){var o=this,a=new i.FileLoader(o.manager);a.setPath(this.path),a.load(t,function(t){e(o.parse(t))},n,r)},setPath:function(t){return this.path=t,this},setMaterials:function(t){return this.materials=t,this},parse:function(o){console.time("OBJLoader");var a=new r;-1!==o.indexOf("\r\n")&&(o=o.replace(/\r\n/g,"\n")),-1!==o.indexOf("\\\n")&&(o=o.replace(/\\\n/g,""));for(var s=o.split("\n"),l="",c="",u=0,h=[],d="function"===typeof"".trimLeft,p=0,f=s.length;p<f;p++)if(l=s[p],l=d?l.trimLeft():l.trim(),u=l.length,0!==u&&(c=l.charAt(0),"#"!==c))if("v"===c){var m=l.split(/\s+/);switch(m[0]){case"v":a.vertices.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3])),8===m.length&&a.colors.push(parseFloat(m[4]),parseFloat(m[5]),parseFloat(m[6]));break;case"vn":a.normals.push(parseFloat(m[1]),parseFloat(m[2]),parseFloat(m[3]));break;case"vt":a.uvs.push(parseFloat(m[1]),parseFloat(m[2]));break}}else if("f"===c){for(var v=l.substr(1).trim(),g=v.split(/\s+/),y=[],b=0,x=g.length;b<x;b++){var w=g[b];if(w.length>0){var _=w.split("/");y.push(_)}}var M=y[0];for(b=1,x=y.length-1;b<x;b++){var E=y[b],S=y[b+1];a.addFace(M[0],E[0],S[0],M[1],E[1],S[1],M[2],E[2],S[2])}}else if("l"===c){var T=l.substring(1).trim().split(" "),A=[],C=[];if(-1===l.indexOf("/"))A=T;else for(var L=0,P=T.length;L<P;L++){var O=T[L].split("/");""!==O[0]&&A.push(O[0]),""!==O[1]&&C.push(O[1])}a.addLineGeometry(A,C)}else if("p"===c){v=l.substr(1).trim();var R=v.split(" ");a.addPointGeometry(R)}else if(null!==(h=t.exec(l))){var k=(" "+h[0].substr(1).trim()).substr(1);a.startObject(k)}else if(n.test(l))a.object.startMaterial(l.substring(7).trim(),a.materialLibraries);else if(e.test(l))a.materialLibraries.push(l.substring(7).trim());else{if("s"!==c){if("\0"===l)continue;throw new Error('THREE.OBJLoader: Unexpected line: "'+l+'"')}if(h=l.split(" "),h.length>1){var D=h[1].trim().toLowerCase();a.object.smooth="0"!==D&&"off"!==D}else a.object.smooth=!0;var I=a.object.currentMaterial();I&&(I.smooth=a.object.smooth)}a.finalize();var N=new i.Group;N.materialLibraries=[].concat(a.materialLibraries);for(p=0,f=a.objects.length;p<f;p++){var z=a.objects[p],B=z.geometry,F=z.materials,j="Line"===B.type,H="Points"===B.type,U=!1;if(0!==B.vertices.length){var V=new i.BufferGeometry;V.addAttribute("position",new i.Float32BufferAttribute(B.vertices,3)),B.normals.length>0?V.addAttribute("normal",new i.Float32BufferAttribute(B.normals,3)):V.computeVertexNormals(),B.colors.length>0&&(U=!0,V.addAttribute("color",new i.Float32BufferAttribute(B.colors,3))),B.uvs.length>0&&V.addAttribute("uv",new i.Float32BufferAttribute(B.uvs,2));for(var G,W=[],$=0,q=F.length;$<q;$++){var Y=F[$];I=void 0;if(null!==this.materials)if(I=this.materials.create(Y.name),!j||!I||I instanceof i.LineBasicMaterial){if(H&&I&&!(I instanceof i.PointsMaterial)){var X=new i.PointsMaterial({size:10,sizeAttenuation:!1});Z.copy(I),I=X}}else{var Z=new i.LineBasicMaterial;Z.copy(I),Z.lights=!1,I=Z}I||(I=j?new i.LineBasicMaterial:H?new i.PointsMaterial({size:1,sizeAttenuation:!1}):new i.MeshPhongMaterial,I.name=Y.name),I.flatShading=!Y.smooth,I.vertexColors=U?i.VertexColors:i.NoColors,W.push(I)}if(W.length>1){for($=0,q=F.length;$<q;$++){Y=F[$];V.addGroup(Y.groupStart,Y.groupCount,$)}G=j?new i.LineSegments(V,W):H?new i.Points(V,W):new i.Mesh(V,W)}else G=j?new i.LineSegments(V,W[0]):H?new i.Points(V,W[0]):new i.Mesh(V,W[0]);G.name=z.name,N.add(G)}}return console.timeEnd("OBJLoader"),N}},o}(),e.MTLLoader=i.MTLLoader,e.OBJLoader=i.OBJLoader},5488:function(t,e,n){"use strict";e.__esModule=!0;var i=n("5924");function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){r(this,t)}return t.prototype.beforeEnter=function(t){(0,i.addClass)(t,"collapse-transition"),t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.style.height="0",t.style.paddingTop=0,t.style.paddingBottom=0},t.prototype.enter=function(t){t.dataset.oldOverflow=t.style.overflow,0!==t.scrollHeight?(t.style.height=t.scrollHeight+"px",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom):(t.style.height="",t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom),t.style.overflow="hidden"},t.prototype.afterEnter=function(t){(0,i.removeClass)(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow},t.prototype.beforeLeave=function(t){t.dataset||(t.dataset={}),t.dataset.oldPaddingTop=t.style.paddingTop,t.dataset.oldPaddingBottom=t.style.paddingBottom,t.dataset.oldOverflow=t.style.overflow,t.style.height=t.scrollHeight+"px",t.style.overflow="hidden"},t.prototype.leave=function(t){0!==t.scrollHeight&&((0,i.addClass)(t,"collapse-transition"),t.style.height=0,t.style.paddingTop=0,t.style.paddingBottom=0)},t.prototype.afterLeave=function(t){(0,i.removeClass)(t,"collapse-transition"),t.style.height="",t.style.overflow=t.dataset.oldOverflow,t.style.paddingTop=t.dataset.oldPaddingTop,t.style.paddingBottom=t.dataset.oldPaddingBottom},t}();e.default={name:"ElCollapseTransition",functional:!0,render:function(t,e){var n=e.children,i={on:new o};return t("transition",i,n)}}},"551c":function(t,e,n){"use strict";var i,r,o,a,s=n("2d00"),l=n("7726"),c=n("9b43"),u=n("23c6"),h=n("5ca1"),d=n("d3f4"),p=n("d8e8"),f=n("f605"),m=n("4a59"),v=n("ebd6"),g=n("1991").set,y=n("8079")(),b=n("a5b8"),x=n("9c80"),w=n("a25f"),_=n("bcaa"),M="Promise",E=l.TypeError,S=l.process,T=S&&S.versions,A=T&&T.v8||"",C=l[M],L="process"==u(S),P=function(){},O=r=b.f,R=!!function(){try{var t=C.resolve(1),e=(t.constructor={})[n("2b4c")("species")]=function(t){t(P,P)};return(L||"function"==typeof PromiseRejectionEvent)&&t.then(P)instanceof e&&0!==A.indexOf("6.6")&&-1===w.indexOf("Chrome/66")}catch(i){}}(),k=function(t){var e;return!(!d(t)||"function"!=typeof(e=t.then))&&e},D=function(t,e){if(!t._n){t._n=!0;var n=t._c;y(function(){var i=t._v,r=1==t._s,o=0,a=function(e){var n,o,a,s=r?e.ok:e.fail,l=e.resolve,c=e.reject,u=e.domain;try{s?(r||(2==t._h&&z(t),t._h=1),!0===s?n=i:(u&&u.enter(),n=s(i),u&&(u.exit(),a=!0)),n===e.promise?c(E("Promise-chain cycle")):(o=k(n))?o.call(n,l,c):l(n)):c(i)}catch(h){u&&!a&&u.exit(),c(h)}};while(n.length>o)a(n[o++]);t._c=[],t._n=!1,e&&!t._h&&I(t)})}},I=function(t){g.call(l,function(){var e,n,i,r=t._v,o=N(t);if(o&&(e=x(function(){L?S.emit("unhandledRejection",r,t):(n=l.onunhandledrejection)?n({promise:t,reason:r}):(i=l.console)&&i.error&&i.error("Unhandled promise rejection",r)}),t._h=L||N(t)?2:1),t._a=void 0,o&&e.e)throw e.v})},N=function(t){return 1!==t._h&&0===(t._a||t._c).length},z=function(t){g.call(l,function(){var e;L?S.emit("rejectionHandled",t):(e=l.onrejectionhandled)&&e({promise:t,reason:t._v})})},B=function(t){var e=this;e._d||(e._d=!0,e=e._w||e,e._v=t,e._s=2,e._a||(e._a=e._c.slice()),D(e,!0))},F=function(t){var e,n=this;if(!n._d){n._d=!0,n=n._w||n;try{if(n===t)throw E("Promise can't be resolved itself");(e=k(t))?y(function(){var i={_w:n,_d:!1};try{e.call(t,c(F,i,1),c(B,i,1))}catch(r){B.call(i,r)}}):(n._v=t,n._s=1,D(n,!1))}catch(i){B.call({_w:n,_d:!1},i)}}};R||(C=function(t){f(this,C,M,"_h"),p(t),i.call(this);try{t(c(F,this,1),c(B,this,1))}catch(e){B.call(this,e)}},i=function(t){this._c=[],this._a=void 0,this._s=0,this._d=!1,this._v=void 0,this._h=0,this._n=!1},i.prototype=n("dcbc")(C.prototype,{then:function(t,e){var n=O(v(this,C));return n.ok="function"!=typeof t||t,n.fail="function"==typeof e&&e,n.domain=L?S.domain:void 0,this._c.push(n),this._a&&this._a.push(n),this._s&&D(this,!1),n.promise},catch:function(t){return this.then(void 0,t)}}),o=function(){var t=new i;this.promise=t,this.resolve=c(F,t,1),this.reject=c(B,t,1)},b.f=O=function(t){return t===C||t===a?new o(t):r(t)}),h(h.G+h.W+h.F*!R,{Promise:C}),n("7f20")(C,M),n("7a56")(M),a=n("8378")[M],h(h.S+h.F*!R,M,{reject:function(t){var e=O(this),n=e.reject;return n(t),e.promise}}),h(h.S+h.F*(s||!R),M,{resolve:function(t){return _(s&&this===a?C:this,t)}}),h(h.S+h.F*!(R&&n("5cc5")(function(t){C.all(t)["catch"](P)})),M,{all:function(t){var e=this,n=O(e),i=n.resolve,r=n.reject,o=x(function(){var n=[],o=0,a=1;m(t,!1,function(t){var s=o++,l=!1;n.push(void 0),a++,e.resolve(t).then(function(t){l||(l=!0,n[s]=t,--a||i(n))},r)}),--a||i(n)});return o.e&&r(o.v),n.promise},race:function(t){var e=this,n=O(e),i=n.reject,r=x(function(){m(t,!1,function(t){e.resolve(t).then(n.resolve,i)})});return r.e&&i(r.v),n.promise}})},5537:function(t,e,n){var i=n("8378"),r=n("7726"),o="__core-js_shared__",a=r[o]||(r[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("2d00")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},5559:function(t,e,n){var i=n("dbdb")("keys"),r=n("62a0");t.exports=function(t){return i[t]||(i[t]=r(t))}},"57e7":function(t,e,n){"use strict";var i=n("5ca1"),r=n("c366")(!1),o=[].indexOf,a=!!o&&1/[1].indexOf(1,-0)<0;i(i.P+i.F*(a||!n("2f21")(o)),"Array",{indexOf:function(t){return a?o.apply(this,arguments)||0:r(this,t,arguments[1])}})},"584a":function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},5924:function(t,e,n){"use strict";e.__esModule=!0,e.isInContainer=e.getScrollContainer=e.isScroll=e.getStyle=e.once=e.off=e.on=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.hasClass=m,e.addClass=v,e.removeClass=g,e.setStyle=b;var r=n("2b0e"),o=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var s=o.default.prototype.$isServer,l=/([\:\-\_]+(.))/g,c=/^moz([A-Z])/,u=s?0:Number(document.documentMode),h=function(t){return(t||"").replace(/^[\s\uFEFF]+|[\s\uFEFF]+$/g,"")},d=function(t){return t.replace(l,function(t,e,n,i){return i?n.toUpperCase():n}).replace(c,"Moz$1")},p=e.on=function(){return!s&&document.addEventListener?function(t,e,n){t&&e&&n&&t.addEventListener(e,n,!1)}:function(t,e,n){t&&e&&n&&t.attachEvent("on"+e,n)}}(),f=e.off=function(){return!s&&document.removeEventListener?function(t,e,n){t&&e&&t.removeEventListener(e,n,!1)}:function(t,e,n){t&&e&&t.detachEvent("on"+e,n)}}();e.once=function(t,e,n){var i=function i(){n&&n.apply(this,arguments),f(t,e,i)};p(t,e,i)};function m(t,e){if(!t||!e)return!1;if(-1!==e.indexOf(" "))throw new Error("className should not contain space.");return t.classList?t.classList.contains(e):(" "+t.className+" ").indexOf(" "+e+" ")>-1}function v(t,e){if(t){for(var n=t.className,i=(e||"").split(" "),r=0,o=i.length;r<o;r++){var a=i[r];a&&(t.classList?t.classList.add(a):m(t,a)||(n+=" "+a))}t.classList||(t.className=n)}}function g(t,e){if(t&&e){for(var n=e.split(" "),i=" "+t.className+" ",r=0,o=n.length;r<o;r++){var a=n[r];a&&(t.classList?t.classList.remove(a):m(t,a)&&(i=i.replace(" "+a+" "," ")))}t.classList||(t.className=h(i))}}var y=e.getStyle=u<9?function(t,e){if(!s){if(!t||!e)return null;e=d(e),"float"===e&&(e="styleFloat");try{switch(e){case"opacity":try{return t.filters.item("alpha").opacity/100}catch(n){return 1}default:return t.style[e]||t.currentStyle?t.currentStyle[e]:null}}catch(n){return t.style[e]}}}:function(t,e){if(!s){if(!t||!e)return null;e=d(e),"float"===e&&(e="cssFloat");try{var n=document.defaultView.getComputedStyle(t,"");return t.style[e]||n?n[e]:null}catch(i){return t.style[e]}}};function b(t,e,n){if(t&&e)if("object"===("undefined"===typeof e?"undefined":i(e)))for(var r in e)e.hasOwnProperty(r)&&b(t,r,e[r]);else e=d(e),"opacity"===e&&u<9?t.style.filter=isNaN(n)?"":"alpha(opacity="+100*n+")":t.style[e]=n}var x=e.isScroll=function(t,e){if(!s){var n=null!==e||void 0!==e,i=y(t,n?e?"overflow-y":"overflow-x":"overflow");return i.match(/(scroll|auto)/)}};e.getScrollContainer=function(t,e){if(!s){var n=t;while(n){if([window,document,document.documentElement].includes(n))return window;if(x(n,e))return n;n=n.parentNode}return n}},e.isInContainer=function(t,e){if(s||!t||!e)return!1;var n=t.getBoundingClientRect(),i=void 0;return i=[window,document,document.documentElement,null,void 0].includes(e)?{top:0,right:window.innerWidth,bottom:window.innerHeight,left:0}:e.getBoundingClientRect(),n.top<i.bottom&&n.bottom>i.top&&n.right>i.left&&n.left<i.right}},"597f":function(t,e){t.exports=function(t,e,n,i){var r,o=0;function a(){var a=this,s=Number(new Date)-o,l=arguments;function c(){o=Number(new Date),n.apply(a,l)}function u(){r=void 0}i&&!r&&c(),r&&clearTimeout(r),void 0===i&&s>t?c():!0!==e&&(r=setTimeout(i?u:c,void 0===i?t-s:t))}return"boolean"!==typeof e&&(i=n,n=e,e=void 0),a}},"5a89":function(t,e,n){"use strict";n.r(e),n.d(e,"ACESFilmicToneMapping",function(){return nt}),n.d(e,"AddEquation",function(){return S}),n.d(e,"AddOperation",function(){return J}),n.d(e,"AdditiveAnimationBlendMode",function(){return $e}),n.d(e,"AdditiveBlending",function(){return w}),n.d(e,"AlphaFormat",function(){return Nt}),n.d(e,"AlwaysDepth",function(){return U}),n.d(e,"AlwaysStencilFunc",function(){return En}),n.d(e,"AmbientLight",function(){return uf}),n.d(e,"AmbientLightProbe",function(){return kf}),n.d(e,"AnimationClip",function(){return lp}),n.d(e,"AnimationLoader",function(){return gp}),n.d(e,"AnimationMixer",function(){return dm}),n.d(e,"AnimationObjectGroup",function(){return um}),n.d(e,"AnimationUtils",function(){return Xd}),n.d(e,"ArcCurve",function(){return Sp}),n.d(e,"ArrayCamera",function(){return pu}),n.d(e,"ArrowHelper",function(){return nv}),n.d(e,"Audio",function(){return Gf}),n.d(e,"AudioAnalyser",function(){return Zf}),n.d(e,"AudioContext",function(){return Pf}),n.d(e,"AudioListener",function(){return Vf}),n.d(e,"AudioLoader",function(){return Of}),n.d(e,"AxesHelper",function(){return iv}),n.d(e,"AxisHelper",function(){return ug}),n.d(e,"BackSide",function(){return m}),n.d(e,"BasicDepthPacking",function(){return on}),n.d(e,"BasicShadowMap",function(){return u}),n.d(e,"BinaryTextureLoader",function(){return mg}),n.d(e,"Bone",function(){return Ku}),n.d(e,"BooleanKeyframeTrack",function(){return ep}),n.d(e,"BoundingBoxHelper",function(){return hg}),n.d(e,"Box2",function(){return _m}),n.d(e,"Box3",function(){return ti}),n.d(e,"Box3Helper",function(){return Jm}),n.d(e,"BoxBufferGeometry",function(){return fo}),n.d(e,"BoxGeometry",function(){return fo}),n.d(e,"BoxHelper",function(){return Zm}),n.d(e,"BufferAttribute",function(){return Sr}),n.d(e,"BufferGeometry",function(){return $r}),n.d(e,"BufferGeometryLoader",function(){return yf}),n.d(e,"ByteType",function(){return St}),n.d(e,"Cache",function(){return hp}),n.d(e,"Camera",function(){return wo}),n.d(e,"CameraHelper",function(){return qm}),n.d(e,"CanvasRenderer",function(){return yg}),n.d(e,"CanvasTexture",function(){return Ah}),n.d(e,"CatmullRomCurve3",function(){return Op}),n.d(e,"CineonToneMapping",function(){return et}),n.d(e,"CircleBufferGeometry",function(){return Lh}),n.d(e,"CircleGeometry",function(){return Lh}),n.d(e,"ClampToEdgeWrapping",function(){return dt}),n.d(e,"Clock",function(){return zf}),n.d(e,"ClosedSplineCurve3",function(){return sg}),n.d(e,"Color",function(){return yr}),n.d(e,"ColorKeyframeTrack",function(){return np}),n.d(e,"CompressedTexture",function(){return Th}),n.d(e,"CompressedTextureLoader",function(){return yp}),n.d(e,"ConeBufferGeometry",function(){return Oh}),n.d(e,"ConeGeometry",function(){return Oh}),n.d(e,"CubeCamera",function(){return So}),n.d(e,"CubeReflectionMapping",function(){return ot}),n.d(e,"CubeRefractionMapping",function(){return at}),n.d(e,"CubeTexture",function(){return To}),n.d(e,"CubeTextureLoader",function(){return xp}),n.d(e,"CubeUVReflectionMapping",function(){return ct}),n.d(e,"CubeUVRefractionMapping",function(){return ut}),n.d(e,"CubicBezierCurve",function(){return Up}),n.d(e,"CubicBezierCurve3",function(){return Vp}),n.d(e,"CubicInterpolant",function(){return Jd}),n.d(e,"CullFaceBack",function(){return s}),n.d(e,"CullFaceFront",function(){return l}),n.d(e,"CullFaceFrontBack",function(){return c}),n.d(e,"CullFaceNone",function(){return a}),n.d(e,"Curve",function(){return Mp}),n.d(e,"CurvePath",function(){return Zp}),n.d(e,"CustomBlending",function(){return E}),n.d(e,"CustomToneMapping",function(){return it}),n.d(e,"CylinderBufferGeometry",function(){return Ph}),n.d(e,"CylinderGeometry",function(){return Ph}),n.d(e,"Cylindrical",function(){return xm}),n.d(e,"DataTexture",function(){return Co}),n.d(e,"DataTexture2DArray",function(){return bl}),n.d(e,"DataTexture3D",function(){return xl}),n.d(e,"DataTextureLoader",function(){return wp}),n.d(e,"DataUtils",function(){return av}),n.d(e,"DecrementStencilOp",function(){return pn}),n.d(e,"DecrementWrapStencilOp",function(){return mn}),n.d(e,"DefaultLoadingManager",function(){return pp}),n.d(e,"DepthFormat",function(){return Ut}),n.d(e,"DepthStencilFormat",function(){return Vt}),n.d(e,"DepthTexture",function(){return Ch}),n.d(e,"DirectionalLight",function(){return cf}),n.d(e,"DirectionalLightHelper",function(){return Gm}),n.d(e,"DiscreteInterpolant",function(){return Qd}),n.d(e,"DodecahedronBufferGeometry",function(){return kh}),n.d(e,"DodecahedronGeometry",function(){return kh}),n.d(e,"DoubleSide",function(){return v}),n.d(e,"DstAlphaFactor",function(){return N}),n.d(e,"DstColorFactor",function(){return B}),n.d(e,"DynamicBufferAttribute",function(){return Jv}),n.d(e,"DynamicCopyUsage",function(){return Rn}),n.d(e,"DynamicDrawUsage",function(){return Tn}),n.d(e,"DynamicReadUsage",function(){return Ln}),n.d(e,"EdgesGeometry",function(){return Bh}),n.d(e,"EdgesHelper",function(){return dg}),n.d(e,"EllipseCurve",function(){return Ep}),n.d(e,"EqualDepth",function(){return W}),n.d(e,"EqualStencilFunc",function(){return bn}),n.d(e,"EquirectangularReflectionMapping",function(){return st}),n.d(e,"EquirectangularRefractionMapping",function(){return lt}),n.d(e,"Euler",function(){return ki}),n.d(e,"EventDispatcher",function(){return Nn}),n.d(e,"ExtrudeBufferGeometry",function(){return xd}),n.d(e,"ExtrudeGeometry",function(){return xd}),n.d(e,"Face3",function(){return br}),n.d(e,"Face4",function(){return Nv}),n.d(e,"FaceColors",function(){return jv}),n.d(e,"FileLoader",function(){return vp}),n.d(e,"FlatShading",function(){return g}),n.d(e,"Float16BufferAttribute",function(){return kr}),n.d(e,"Float32Attribute",function(){return og}),n.d(e,"Float32BufferAttribute",function(){return Dr}),n.d(e,"Float64Attribute",function(){return ag}),n.d(e,"Float64BufferAttribute",function(){return Ir}),n.d(e,"FloatType",function(){return Pt}),n.d(e,"Fog",function(){return _u}),n.d(e,"FogExp2",function(){return wu}),n.d(e,"Font",function(){return Sf}),n.d(e,"FontLoader",function(){return Cf}),n.d(e,"FrontSide",function(){return f}),n.d(e,"Frustum",function(){return Oo}),n.d(e,"GLBufferAttribute",function(){return mm}),n.d(e,"GLSL1",function(){return Dn}),n.d(e,"GLSL3",function(){return In}),n.d(e,"GammaEncoding",function(){return Ke}),n.d(e,"GeometryUtils",function(){return gg}),n.d(e,"GreaterDepth",function(){return q}),n.d(e,"GreaterEqualDepth",function(){return $}),n.d(e,"GreaterEqualStencilFunc",function(){return Mn}),n.d(e,"GreaterStencilFunc",function(){return wn}),n.d(e,"GridHelper",function(){return Fm}),n.d(e,"Group",function(){return fu}),n.d(e,"HalfFloatType",function(){return Ot}),n.d(e,"HemisphereLight",function(){return tf}),n.d(e,"HemisphereLightHelper",function(){return Bm}),n.d(e,"HemisphereLightProbe",function(){return Rf}),n.d(e,"IcosahedronBufferGeometry",function(){return Md}),n.d(e,"IcosahedronGeometry",function(){return Md}),n.d(e,"ImageBitmapLoader",function(){return Mf}),n.d(e,"ImageLoader",function(){return bp}),n.d(e,"ImageUtils",function(){return Vn}),n.d(e,"ImmediateRenderObject",function(){return Tm}),n.d(e,"IncrementStencilOp",function(){return dn}),n.d(e,"IncrementWrapStencilOp",function(){return fn}),n.d(e,"InstancedBufferAttribute",function(){return gf}),n.d(e,"InstancedBufferGeometry",function(){return vf}),n.d(e,"InstancedInterleavedBuffer",function(){return fm}),n.d(e,"InstancedMesh",function(){return ah}),n.d(e,"Int16Attribute",function(){return eg}),n.d(e,"Int16BufferAttribute",function(){return Lr}),n.d(e,"Int32Attribute",function(){return ig}),n.d(e,"Int32BufferAttribute",function(){return Or}),n.d(e,"Int8Attribute",function(){return Kv}),n.d(e,"Int8BufferAttribute",function(){return Tr}),n.d(e,"IntType",function(){return Ct}),n.d(e,"InterleavedBuffer",function(){return Eu}),n.d(e,"InterleavedBufferAttribute",function(){return Tu}),n.d(e,"Interpolant",function(){return Zd}),n.d(e,"InterpolateDiscrete",function(){return Fe}),n.d(e,"InterpolateLinear",function(){return je}),n.d(e,"InterpolateSmooth",function(){return He}),n.d(e,"InvertStencilOp",function(){return vn}),n.d(e,"JSONLoader",function(){return bg}),n.d(e,"KeepStencilOp",function(){return un}),n.d(e,"KeyframeTrack",function(){return tp}),n.d(e,"LOD",function(){return Wu}),n.d(e,"LatheBufferGeometry",function(){return Ed}),n.d(e,"LatheGeometry",function(){return Ed}),n.d(e,"Layers",function(){return Ni}),n.d(e,"LensFlare",function(){return wg}),n.d(e,"LessDepth",function(){return V}),n.d(e,"LessEqualDepth",function(){return G}),n.d(e,"LessEqualStencilFunc",function(){return xn}),n.d(e,"LessStencilFunc",function(){return yn}),n.d(e,"Light",function(){return Qp}),n.d(e,"LightProbe",function(){return pf}),n.d(e,"Line",function(){return ph}),n.d(e,"Line3",function(){return Sm}),n.d(e,"LineBasicMaterial",function(){return sh}),n.d(e,"LineCurve",function(){return Gp}),n.d(e,"LineCurve3",function(){return Wp}),n.d(e,"LineDashedMaterial",function(){return qd}),n.d(e,"LineLoop",function(){return gh}),n.d(e,"LinePieces",function(){return Bv}),n.d(e,"LineSegments",function(){return vh}),n.d(e,"LineStrip",function(){return zv}),n.d(e,"LinearEncoding",function(){return Ze}),n.d(e,"LinearFilter",function(){return bt}),n.d(e,"LinearInterpolant",function(){return Kd}),n.d(e,"LinearMipMapLinearFilter",function(){return Mt}),n.d(e,"LinearMipMapNearestFilter",function(){return wt}),n.d(e,"LinearMipmapLinearFilter",function(){return _t}),n.d(e,"LinearMipmapNearestFilter",function(){return xt}),n.d(e,"LinearToneMapping",function(){return Q}),n.d(e,"Loader",function(){return fp}),n.d(e,"LoaderUtils",function(){return mf}),n.d(e,"LoadingManager",function(){return dp}),n.d(e,"LogLuvEncoding",function(){return tn}),n.d(e,"LoopOnce",function(){return Ne}),n.d(e,"LoopPingPong",function(){return Be}),n.d(e,"LoopRepeat",function(){return ze}),n.d(e,"LuminanceAlphaFormat",function(){return jt}),n.d(e,"LuminanceFormat",function(){return Ft}),n.d(e,"MOUSE",function(){return r}),n.d(e,"Material",function(){return wr}),n.d(e,"MaterialLoader",function(){return ff}),n.d(e,"Math",function(){return Fn}),n.d(e,"MathUtils",function(){return Fn}),n.d(e,"Matrix3",function(){return Hn}),n.d(e,"Matrix4",function(){return Si}),n.d(e,"MaxEquation",function(){return L}),n.d(e,"Mesh",function(){return uo}),n.d(e,"MeshBasicMaterial",function(){return _r}),n.d(e,"MeshDepthMaterial",function(){return ou}),n.d(e,"MeshDistanceMaterial",function(){return au}),n.d(e,"MeshFaceMaterial",function(){return Uv}),n.d(e,"MeshLambertMaterial",function(){return Wd}),n.d(e,"MeshMatcapMaterial",function(){return $d}),n.d(e,"MeshNormalMaterial",function(){return Gd}),n.d(e,"MeshPhongMaterial",function(){return Ud}),n.d(e,"MeshPhysicalMaterial",function(){return Hd}),n.d(e,"MeshStandardMaterial",function(){return jd}),n.d(e,"MeshToonMaterial",function(){return Vd}),n.d(e,"MinEquation",function(){return C}),n.d(e,"MirroredRepeatWrapping",function(){return pt}),n.d(e,"MixOperation",function(){return Z}),n.d(e,"MultiMaterial",function(){return Vv}),n.d(e,"MultiplyBlending",function(){return M}),n.d(e,"MultiplyOperation",function(){return X}),n.d(e,"NearestFilter",function(){return ft}),n.d(e,"NearestMipMapLinearFilter",function(){return yt}),n.d(e,"NearestMipMapNearestFilter",function(){return vt}),n.d(e,"NearestMipmapLinearFilter",function(){return gt}),n.d(e,"NearestMipmapNearestFilter",function(){return mt}),n.d(e,"NeverDepth",function(){return H}),n.d(e,"NeverStencilFunc",function(){return gn}),n.d(e,"NoBlending",function(){return b}),n.d(e,"NoColors",function(){return Fv}),n.d(e,"NoToneMapping",function(){return K}),n.d(e,"NormalAnimationBlendMode",function(){return We}),n.d(e,"NormalBlending",function(){return x}),n.d(e,"NotEqualDepth",function(){return Y}),n.d(e,"NotEqualStencilFunc",function(){return _n}),n.d(e,"NumberKeyframeTrack",function(){return ip}),n.d(e,"Object3D",function(){return Zi}),n.d(e,"ObjectLoader",function(){return bf}),n.d(e,"ObjectSpaceNormalMap",function(){return ln}),n.d(e,"OctahedronBufferGeometry",function(){return Sd}),n.d(e,"OctahedronGeometry",function(){return Sd}),n.d(e,"OneFactor",function(){return O}),n.d(e,"OneMinusDstAlphaFactor",function(){return z}),n.d(e,"OneMinusDstColorFactor",function(){return F}),n.d(e,"OneMinusSrcAlphaFactor",function(){return I}),n.d(e,"OneMinusSrcColorFactor",function(){return k}),n.d(e,"OrthographicCamera",function(){return sf}),n.d(e,"PCFShadowMap",function(){return h}),n.d(e,"PCFSoftShadowMap",function(){return d}),n.d(e,"PMREMGenerator",function(){return Tv}),n.d(e,"ParametricBufferGeometry",function(){return Td}),n.d(e,"ParametricGeometry",function(){return Td}),n.d(e,"Particle",function(){return Wv}),n.d(e,"ParticleBasicMaterial",function(){return Yv}),n.d(e,"ParticleSystem",function(){return $v}),n.d(e,"ParticleSystemMaterial",function(){return Xv}),n.d(e,"Path",function(){return Jp}),n.d(e,"PerspectiveCamera",function(){return _o}),n.d(e,"Plane",function(){return tr}),n.d(e,"PlaneBufferGeometry",function(){return Do}),n.d(e,"PlaneGeometry",function(){return Do}),n.d(e,"PlaneHelper",function(){return Km}),n.d(e,"PointCloud",function(){return Gv}),n.d(e,"PointCloudMaterial",function(){return qv}),n.d(e,"PointLight",function(){return af}),n.d(e,"PointLightHelper",function(){return Dm}),n.d(e,"Points",function(){return Mh}),n.d(e,"PointsMaterial",function(){return yh}),n.d(e,"PolarGridHelper",function(){return jm}),n.d(e,"PolyhedronBufferGeometry",function(){return Rh}),n.d(e,"PolyhedronGeometry",function(){return Rh}),n.d(e,"PositionalAudio",function(){return Xf}),n.d(e,"PropertyBinding",function(){return cm}),n.d(e,"PropertyMixer",function(){return Jf}),n.d(e,"QuadraticBezierCurve",function(){return $p}),n.d(e,"QuadraticBezierCurve3",function(){return qp}),n.d(e,"Quaternion",function(){return Zn}),n.d(e,"QuaternionKeyframeTrack",function(){return op}),n.d(e,"QuaternionLinearInterpolant",function(){return rp}),n.d(e,"REVISION",function(){return i}),n.d(e,"RGBADepthPacking",function(){return an}),n.d(e,"RGBAFormat",function(){return Bt}),n.d(e,"RGBAIntegerFormat",function(){return Xt}),n.d(e,"RGBA_ASTC_10x10_Format",function(){return ye}),n.d(e,"RGBA_ASTC_10x5_Format",function(){return me}),n.d(e,"RGBA_ASTC_10x6_Format",function(){return ve}),n.d(e,"RGBA_ASTC_10x8_Format",function(){return ge}),n.d(e,"RGBA_ASTC_12x10_Format",function(){return be}),n.d(e,"RGBA_ASTC_12x12_Format",function(){return xe}),n.d(e,"RGBA_ASTC_4x4_Format",function(){return se}),n.d(e,"RGBA_ASTC_5x4_Format",function(){return le}),n.d(e,"RGBA_ASTC_5x5_Format",function(){return ce}),n.d(e,"RGBA_ASTC_6x5_Format",function(){return ue}),n.d(e,"RGBA_ASTC_6x6_Format",function(){return he}),n.d(e,"RGBA_ASTC_8x5_Format",function(){return de}),n.d(e,"RGBA_ASTC_8x6_Format",function(){return pe}),n.d(e,"RGBA_ASTC_8x8_Format",function(){return fe}),n.d(e,"RGBA_BPTC_Format",function(){return we}),n.d(e,"RGBA_ETC2_EAC_Format",function(){return ae}),n.d(e,"RGBA_PVRTC_2BPPV1_Format",function(){return ie}),n.d(e,"RGBA_PVRTC_4BPPV1_Format",function(){return ne}),n.d(e,"RGBA_S3TC_DXT1_Format",function(){return Jt}),n.d(e,"RGBA_S3TC_DXT3_Format",function(){return Kt}),n.d(e,"RGBA_S3TC_DXT5_Format",function(){return Qt}),n.d(e,"RGBDEncoding",function(){return rn}),n.d(e,"RGBEEncoding",function(){return Qe}),n.d(e,"RGBEFormat",function(){return Ht}),n.d(e,"RGBFormat",function(){return zt}),n.d(e,"RGBIntegerFormat",function(){return Yt}),n.d(e,"RGBM16Encoding",function(){return nn}),n.d(e,"RGBM7Encoding",function(){return en}),n.d(e,"RGB_ETC1_Format",function(){return re}),n.d(e,"RGB_ETC2_Format",function(){return oe}),n.d(e,"RGB_PVRTC_2BPPV1_Format",function(){return ee}),n.d(e,"RGB_PVRTC_4BPPV1_Format",function(){return te}),n.d(e,"RGB_S3TC_DXT1_Format",function(){return Zt}),n.d(e,"RGFormat",function(){return $t}),n.d(e,"RGIntegerFormat",function(){return qt}),n.d(e,"RawShaderMaterial",function(){return Fd}),n.d(e,"Ray",function(){return Ei}),n.d(e,"Raycaster",function(){return vm}),n.d(e,"RectAreaLight",function(){return hf}),n.d(e,"RedFormat",function(){return Gt}),n.d(e,"RedIntegerFormat",function(){return Wt}),n.d(e,"ReinhardToneMapping",function(){return tt}),n.d(e,"RepeatWrapping",function(){return ht}),n.d(e,"ReplaceStencilOp",function(){return hn}),n.d(e,"ReverseSubtractEquation",function(){return A}),n.d(e,"RingBufferGeometry",function(){return Ad}),n.d(e,"RingGeometry",function(){return Ad}),n.d(e,"SRGB8_ALPHA8_ASTC_10x10_Format",function(){return ke}),n.d(e,"SRGB8_ALPHA8_ASTC_10x5_Format",function(){return Pe}),n.d(e,"SRGB8_ALPHA8_ASTC_10x6_Format",function(){return Oe}),n.d(e,"SRGB8_ALPHA8_ASTC_10x8_Format",function(){return Re}),n.d(e,"SRGB8_ALPHA8_ASTC_12x10_Format",function(){return De}),n.d(e,"SRGB8_ALPHA8_ASTC_12x12_Format",function(){return Ie}),n.d(e,"SRGB8_ALPHA8_ASTC_4x4_Format",function(){return _e}),n.d(e,"SRGB8_ALPHA8_ASTC_5x4_Format",function(){return Me}),n.d(e,"SRGB8_ALPHA8_ASTC_5x5_Format",function(){return Ee}),n.d(e,"SRGB8_ALPHA8_ASTC_6x5_Format",function(){return Se}),n.d(e,"SRGB8_ALPHA8_ASTC_6x6_Format",function(){return Te}),n.d(e,"SRGB8_ALPHA8_ASTC_8x5_Format",function(){return Ae}),n.d(e,"SRGB8_ALPHA8_ASTC_8x6_Format",function(){return Ce}),n.d(e,"SRGB8_ALPHA8_ASTC_8x8_Format",function(){return Le}),n.d(e,"Scene",function(){return Mu}),n.d(e,"SceneUtils",function(){return xg}),n.d(e,"ShaderChunk",function(){return nl}),n.d(e,"ShaderLib",function(){return rl}),n.d(e,"ShaderMaterial",function(){return xo}),n.d(e,"ShadowMaterial",function(){return Bd}),n.d(e,"Shape",function(){return Kp}),n.d(e,"ShapeBufferGeometry",function(){return Cd}),n.d(e,"ShapeGeometry",function(){return Cd}),n.d(e,"ShapePath",function(){return Ef}),n.d(e,"ShapeUtils",function(){return gd}),n.d(e,"ShortType",function(){return Tt}),n.d(e,"Skeleton",function(){return eh}),n.d(e,"SkeletonHelper",function(){return Rm}),n.d(e,"SkinnedMesh",function(){return Ju}),n.d(e,"SmoothShading",function(){return y}),n.d(e,"Sphere",function(){return vi}),n.d(e,"SphereBufferGeometry",function(){return Pd}),n.d(e,"SphereGeometry",function(){return Pd}),n.d(e,"Spherical",function(){return bm}),n.d(e,"SphericalHarmonics3",function(){return df}),n.d(e,"Spline",function(){return cg}),n.d(e,"SplineCurve",function(){return Yp}),n.d(e,"SplineCurve3",function(){return lg}),n.d(e,"SpotLight",function(){return rf}),n.d(e,"SpotLightHelper",function(){return Cm}),n.d(e,"Sprite",function(){return Hu}),n.d(e,"SpriteMaterial",function(){return Au}),n.d(e,"SrcAlphaFactor",function(){return D}),n.d(e,"SrcAlphaSaturateFactor",function(){return j}),n.d(e,"SrcColorFactor",function(){return R}),n.d(e,"StaticCopyUsage",function(){return On}),n.d(e,"StaticDrawUsage",function(){return Sn}),n.d(e,"StaticReadUsage",function(){return Cn}),n.d(e,"StereoCamera",function(){return Nf}),n.d(e,"StreamCopyUsage",function(){return kn}),n.d(e,"StreamDrawUsage",function(){return An}),n.d(e,"StreamReadUsage",function(){return Pn}),n.d(e,"StringKeyframeTrack",function(){return ap}),n.d(e,"SubtractEquation",function(){return T}),n.d(e,"SubtractiveBlending",function(){return _}),n.d(e,"TOUCH",function(){return o}),n.d(e,"TangentSpaceNormalMap",function(){return sn}),n.d(e,"TetrahedronBufferGeometry",function(){return Od}),n.d(e,"TetrahedronGeometry",function(){return Od}),n.d(e,"TextBufferGeometry",function(){return Rd}),n.d(e,"TextGeometry",function(){return Rd}),n.d(e,"Texture",function(){return Wn}),n.d(e,"TextureLoader",function(){return _p}),n.d(e,"TorusBufferGeometry",function(){return kd}),n.d(e,"TorusGeometry",function(){return kd}),n.d(e,"TorusKnotBufferGeometry",function(){return Dd}),n.d(e,"TorusKnotGeometry",function(){return Dd}),n.d(e,"Triangle",function(){return hr}),n.d(e,"TriangleFanDrawMode",function(){return Xe}),n.d(e,"TriangleStripDrawMode",function(){return Ye}),n.d(e,"TrianglesDrawMode",function(){return qe}),n.d(e,"TubeBufferGeometry",function(){return Id}),n.d(e,"TubeGeometry",function(){return Id}),n.d(e,"UVMapping",function(){return rt}),n.d(e,"Uint16Attribute",function(){return ng}),n.d(e,"Uint16BufferAttribute",function(){return Pr}),n.d(e,"Uint32Attribute",function(){return rg}),n.d(e,"Uint32BufferAttribute",function(){return Rr}),n.d(e,"Uint8Attribute",function(){return Qv}),n.d(e,"Uint8BufferAttribute",function(){return Ar}),n.d(e,"Uint8ClampedAttribute",function(){return tg}),n.d(e,"Uint8ClampedBufferAttribute",function(){return Cr}),n.d(e,"Uniform",function(){return pm}),n.d(e,"UniformsLib",function(){return il}),n.d(e,"UniformsUtils",function(){return go}),n.d(e,"UnsignedByteType",function(){return Et}),n.d(e,"UnsignedInt248Type",function(){return It}),n.d(e,"UnsignedIntType",function(){return Lt}),n.d(e,"UnsignedShort4444Type",function(){return Rt}),n.d(e,"UnsignedShort5551Type",function(){return kt}),n.d(e,"UnsignedShort565Type",function(){return Dt}),n.d(e,"UnsignedShortType",function(){return At}),n.d(e,"VSMShadowMap",function(){return p}),n.d(e,"Vector2",function(){return jn}),n.d(e,"Vector3",function(){return Jn}),n.d(e,"Vector4",function(){return qn}),n.d(e,"VectorKeyframeTrack",function(){return sp}),n.d(e,"Vertex",function(){return Zv}),n.d(e,"VertexColors",function(){return Hv}),n.d(e,"VideoTexture",function(){return Sh}),n.d(e,"WebGL1Renderer",function(){return xu}),n.d(e,"WebGLCubeRenderTarget",function(){return Ao}),n.d(e,"WebGLMultisampleRenderTarget",function(){return Xn}),n.d(e,"WebGLRenderTarget",function(){return Yn}),n.d(e,"WebGLRenderTargetCube",function(){return vg}),n.d(e,"WebGLRenderer",function(){return bu}),n.d(e,"WebGLUtils",function(){return du}),n.d(e,"WireframeGeometry",function(){return Nd}),n.d(e,"WireframeHelper",function(){return pg}),n.d(e,"WrapAroundEnding",function(){return Ge}),n.d(e,"XHRLoader",function(){return fg}),n.d(e,"ZeroCurvatureEnding",function(){return Ue}),n.d(e,"ZeroFactor",function(){return P}),n.d(e,"ZeroSlopeEnding",function(){return Ve}),n.d(e,"ZeroStencilOp",function(){return cn}),n.d(e,"sRGBEncoding",function(){return Je});const i="125",r={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},o={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},a=0,s=1,l=2,c=3,u=0,h=1,d=2,p=3,f=0,m=1,v=2,g=1,y=2,b=0,x=1,w=2,_=3,M=4,E=5,S=100,T=101,A=102,C=103,L=104,P=200,O=201,R=202,k=203,D=204,I=205,N=206,z=207,B=208,F=209,j=210,H=0,U=1,V=2,G=3,W=4,$=5,q=6,Y=7,X=0,Z=1,J=2,K=0,Q=1,tt=2,et=3,nt=4,it=5,rt=300,ot=301,at=302,st=303,lt=304,ct=306,ut=307,ht=1e3,dt=1001,pt=1002,ft=1003,mt=1004,vt=1004,gt=1005,yt=1005,bt=1006,xt=1007,wt=1007,_t=1008,Mt=1008,Et=1009,St=1010,Tt=1011,At=1012,Ct=1013,Lt=1014,Pt=1015,Ot=1016,Rt=1017,kt=1018,Dt=1019,It=1020,Nt=1021,zt=1022,Bt=1023,Ft=1024,jt=1025,Ht=Bt,Ut=1026,Vt=1027,Gt=1028,Wt=1029,$t=1030,qt=1031,Yt=1032,Xt=1033,Zt=33776,Jt=33777,Kt=33778,Qt=33779,te=35840,ee=35841,ne=35842,ie=35843,re=36196,oe=37492,ae=37496,se=37808,le=37809,ce=37810,ue=37811,he=37812,de=37813,pe=37814,fe=37815,me=37816,ve=37817,ge=37818,ye=37819,be=37820,xe=37821,we=36492,_e=37840,Me=37841,Ee=37842,Se=37843,Te=37844,Ae=37845,Ce=37846,Le=37847,Pe=37848,Oe=37849,Re=37850,ke=37851,De=37852,Ie=37853,Ne=2200,ze=2201,Be=2202,Fe=2300,je=2301,He=2302,Ue=2400,Ve=2401,Ge=2402,We=2500,$e=2501,qe=0,Ye=1,Xe=2,Ze=3e3,Je=3001,Ke=3007,Qe=3002,tn=3003,en=3004,nn=3005,rn=3006,on=3200,an=3201,sn=0,ln=1,cn=0,un=7680,hn=7681,dn=7682,pn=7683,fn=34055,mn=34056,vn=5386,gn=512,yn=513,bn=514,xn=515,wn=516,_n=517,Mn=518,En=519,Sn=35044,Tn=35048,An=35040,Cn=35045,Ln=35049,Pn=35041,On=35046,Rn=35050,kn=35042,Dn="100",In="300 es";function Nn(){}Object.assign(Nn.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});const n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;const n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0===this._listeners)return;const n=this._listeners,i=n[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}},dispatchEvent:function(t){if(void 0===this._listeners)return;const e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;const e=n.slice(0);for(let n=0,i=e.length;n<i;n++)e[n].call(this,t)}}});const zn=[];for(let _g=0;_g<256;_g++)zn[_g]=(_g<16?"0":"")+_g.toString(16);let Bn=1234567;const Fn={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=zn[255&t]+zn[t>>8&255]+zn[t>>16&255]+zn[t>>24&255]+"-"+zn[255&e]+zn[e>>8&255]+"-"+zn[e>>16&15|64]+zn[e>>24&255]+"-"+zn[63&n|128]+zn[n>>8&255]+"-"+zn[n>>16&255]+zn[n>>24&255]+zn[255&i]+zn[i>>8&255]+zn[i>>16&255]+zn[i>>24&255];return r.toUpperCase()},clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},damp:function(t,e,n,i){return Fn.lerp(t,e,1-Math.exp(-n*i))},pingpong:function(t,e=1){return e-Math.abs(Fn.euclideanModulo(t,2*e)-e)},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},seededRandom:function(t){return void 0!==t&&(Bn=t%2147483647),Bn=16807*Bn%2147483647,(Bn-1)/2147483646},degToRad:function(t){return t*Fn.DEG2RAD},radToDeg:function(t){return t*Fn.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))},setQuaternionFromProperEuler:function(t,e,n,i,r){const o=Math.cos,a=Math.sin,s=o(n/2),l=a(n/2),c=o((e+i)/2),u=a((e+i)/2),h=o((e-i)/2),d=a((e-i)/2),p=o((i-e)/2),f=a((i-e)/2);switch(r){case"XYX":t.set(s*u,l*h,l*d,s*c);break;case"YZY":t.set(l*d,s*u,l*h,s*c);break;case"ZXZ":t.set(l*h,l*d,s*u,s*c);break;case"XZX":t.set(s*u,l*f,l*p,s*c);break;case"YXY":t.set(l*p,s*u,l*f,s*c);break;case"ZYZ":t.set(l*f,l*p,s*u,s*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}};class jn{constructor(t=0,e=0){Object.defineProperty(this,"isVector2",{value:!0}),this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){const t=Math.atan2(-this.y,-this.x)+Math.PI;return t}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y;return e*e+n*n}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}}class Hn{constructor(){Object.defineProperty(this,"isMatrix3",{value:!0}),this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l){const c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}clone(){return(new this.constructor).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this}extractBasis(t,e,n){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],b=i[7],x=i[2],w=i[5],_=i[8];return r[0]=o*f+a*g+s*x,r[3]=o*m+a*y+s*w,r[6]=o*v+a*b+s*_,r[1]=l*f+c*g+u*x,r[4]=l*m+c*y+u*w,r[7]=l*v+c*b+u*_,r[2]=h*f+d*g+p*x,r[5]=h*m+d*y+p*w,r[8]=h*v+d*b+p*_,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=c*o-a*l,h=a*s-c*r,d=l*r-o*s,p=e*u+n*h+i*d;if(0===p)return this.set(0,0,0,0,0,0,0,0,0);const f=1/p;return t[0]=u*f,t[1]=(i*l-c*n)*f,t[2]=(a*n-i*o)*f,t[3]=h*f,t[4]=(c*e-i*s)*f,t[5]=(i*r-a*e)*f,t[6]=d*f,t[7]=(n*s-l*e)*f,t[8]=(o*e-n*r)*f,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).copy(this).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,n,i,r,o,a){const s=Math.cos(r),l=Math.sin(r);return this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1),this}scale(t,e){const n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this}rotate(t){const e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this}translate(t,e){const n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<9;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}}let Un;const Vn={getDataURL:function(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===Un&&(Un=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),Un.width=t.width,Un.height=t.height;const n=Un.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=Un}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}};let Gn=0;function Wn(t=Wn.DEFAULT_IMAGE,e=Wn.DEFAULT_MAPPING,n=dt,i=dt,r=bt,o=_t,a=Bt,s=Et,l=1,c=Ze){Object.defineProperty(this,"id",{value:Gn++}),this.uuid=Fn.generateUUID(),this.name="",this.image=t,this.mipmaps=[],this.mapping=e,this.wrapS=n,this.wrapT=i,this.magFilter=r,this.minFilter=o,this.anisotropy=l,this.format=a,this.internalFormat=null,this.type=s,this.offset=new jn(0,0),this.repeat=new jn(1,1),this.center=new jn(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Hn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=c,this.version=0,this.onUpdate=null}function $n(t){return"undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap?Vn.getDataURL(t):t.data?{data:Array.prototype.slice.call(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}Wn.DEFAULT_IMAGE=void 0,Wn.DEFAULT_MAPPING=rt,Wn.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Wn,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){const e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){const i=this.image;if(void 0===i.uuid&&(i.uuid=Fn.generateUUID()),!e&&void 0===t.images[i.uuid]){let e;if(Array.isArray(i)){e=[];for(let t=0,n=i.length;t<n;t++)i[t].isDataTexture?e.push($n(i[t].image)):e.push($n(i[t]))}else e=$n(i);t.images[i.uuid]={uuid:i.uuid,url:e}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==rt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ht:t.x=t.x-Math.floor(t.x);break;case dt:t.x=t.x<0?0:1;break;case pt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case ht:t.y=t.y-Math.floor(t.y);break;case dt:t.y=t.y<0?0:1;break;case pt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(Wn.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}});class qn{constructor(t=0,e=0,n=0,i=1){Object.defineProperty(this,"isVector4",{value:!0}),this.x=t,this.y=e,this.z=n,this.w=i}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,n,i,r;const o=.01,a=.1,s=t.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;const t=(l+1)/2,s=(d+1)/2,g=(v+1)/2,y=(c+h)/4,b=(u+f)/4,x=(p+m)/4;return t>s&&t>g?t<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(t),i=y/n,r=b/n):s>g?s<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(s),n=y/i,r=x/i):g<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(g),n=b/r,i=x/r),this.set(n,i,r,e),this}let g=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(g)<.001&&(g=1),this.x=(m-p)/g,this.y=(u-f)/g,this.z=(h-c)/g,this.w=Math.acos((l+d+v-1)/2),this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this.w=Math.max(t,Math.min(e,this.w)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this.w=t.w+(e.w-t.w)*n,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}}class Yn extends Nn{constructor(t,e,n){super(),Object.defineProperty(this,"isWebGLRenderTarget",{value:!0}),this.width=t,this.height=e,this.scissor=new qn(0,0,t,e),this.scissorTest=!1,this.viewport=new qn(0,0,t,e),n=n||{},this.texture=new Wn(void 0,n.mapping,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.image={},this.texture.image.width=t,this.texture.image.height=e,this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:bt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0!==n.stencilBuffer&&n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}setSize(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.texture.image.width=t,this.texture.image.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xn extends Yn{constructor(t,e,n){super(t,e,n),Object.defineProperty(this,"isWebGLMultisampleRenderTarget",{value:!0}),this.samples=4}copy(t){return super.copy.call(this,t),this.samples=t.samples,this}}class Zn{constructor(t=0,e=0,n=0,i=1){Object.defineProperty(this,"isQuaternion",{value:!0}),this._x=t,this._y=e,this._z=n,this._w=i}static slerp(t,e,n,i){return n.copy(t).slerp(e,i)}static slerpFlat(t,e,n,i,r,o,a){let s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3];const h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||l!==d||c!==p){let t=1-a;const e=s*h+l*d+c*p+u*f,n=e>=0?1:-1,i=1-e*e;if(i>Number.EPSILON){const r=Math.sqrt(i),o=Math.atan2(r,e*n);t=Math.sin(t*o)/r,a=Math.sin(a*o)/r}const r=a*n;if(s=s*t+h*r,l=l*t+d*r,c=c*t+p*r,u=u*t+f*r,t===1-a){const t=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=t,l*=t,c*=t,u*=t}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}static multiplyQuaternionsFlat(t,e,n,i,r,o){const a=n[i],s=n[i+1],l=n[i+2],c=n[i+3],u=r[o],h=r[o+1],d=r[o+2],p=r[o+3];return t[e]=a*p+c*u+s*d-l*h,t[e+1]=s*p+c*h+l*u-a*d,t[e+2]=l*p+c*d+a*h-s*u,t[e+3]=c*p-a*u-s*h-l*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");const n=t._x,i=t._y,r=t._z,o=t._order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);switch(o){case"XYZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"YXZ":this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"ZXY":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p;break;case"ZYX":this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p;break;case"YZX":this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p;break;case"XZY":this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!1!==e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,n=e[0],i=e[4],r=e[8],o=e[1],a=e[5],s=e[9],l=e[2],c=e[6],u=e[10],h=n+a+u;if(h>0){const t=.5/Math.sqrt(h+1);this._w=.25/t,this._x=(c-s)*t,this._y=(r-l)*t,this._z=(o-i)*t}else if(n>a&&n>u){const t=2*Math.sqrt(1+n-a-u);this._w=(c-s)/t,this._x=.25*t,this._y=(i+o)/t,this._z=(r+l)/t}else if(a>u){const t=2*Math.sqrt(1+a-n-u);this._w=(r-l)/t,this._x=(i+o)/t,this._y=.25*t,this._z=(s+c)/t}else{const t=2*Math.sqrt(1+u-n-a);this._w=(o-i)/t,this._x=(r+l)/t,this._y=(s+c)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){const n=1e-6;let i=t.dot(e)+1;return i<n?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Fn.clamp(this.dot(t),-1,1)))}rotateTowards(t,e){const n=this.angleTo(t);if(0===n)return this;const i=Math.min(1,e/n);return this.slerp(t,i),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const n=this._x,i=this._y,r=this._z,o=this._w;let a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;const s=1-a*a;if(s<=Number.EPSILON){const t=1-e;return this._w=t*o+e*this._w,this._x=t*n+e*this._x,this._y=t*i+e*this._y,this._z=t*r+e*this._z,this.normalize(),this._onChangeCallback(),this}const l=Math.sqrt(s),c=Math.atan2(l,a),u=Math.sin((1-e)*c)/l,h=Math.sin(e*c)/l;return this._w=o*u+this._w*h,this._x=n*u+this._x*h,this._y=i*u+this._y*h,this._z=r*u+this._z*h,this._onChangeCallback(),this}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}class Jn{constructor(t=0,e=0,n=0){Object.defineProperty(this,"isVector3",{value:!0}),this.x=t,this.y=e,this.z=n}set(t,e,n){return void 0===n&&(n=this.z),this.x=t,this.y=e,this.z=n,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return t&&t.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(Qn.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Qn.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this}applyQuaternion(t){const e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this}clampScalar(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this}clampLength(t,e){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,n){return this.x=t.x+(e.x-t.x)*n,this.y=t.y+(e.y-t.y)*n,this.z=t.z+(e.z-t.z)*n,this}cross(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)}crossVectors(t,e){const n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const n=t.dot(this)/e;return this.copy(t).multiplyScalar(n)}projectOnPlane(t){return Kn.copy(this).projectOnVector(t),this.sub(Kn)}reflect(t){return this.sub(Kn.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const n=this.dot(t)/e;return Math.acos(Fn.clamp(n,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,n){const i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}}const Kn=new Jn,Qn=new Zn;class ti{constructor(t,e){Object.defineProperty(this,"isBox3",{value:!0}),this.min=void 0!==t?t:new Jn(1/0,1/0,1/0),this.max=void 0!==e?e:new Jn(-1/0,-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.length;s<l;s+=3){const l=t[s],c=t[s+1],u=t[s+2];l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromBufferAttribute(t){let e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0;for(let s=0,l=t.count;s<l;s++){const l=t.getX(s),c=t.getY(s),u=t.getZ(s);l<e&&(e=l),c<n&&(n=c),u<i&&(i=u),l>r&&(r=l),c>o&&(o=c),u>a&&(a=u)}return this.min.set(e,n,i),this.max.set(r,o,a),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=ii.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}setFromObject(t){return this.makeEmpty(),this.expandByObject(t)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Jn),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Jn),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t){t.updateWorldMatrix(!1,!1);const e=t.geometry;void 0!==e&&(null===e.boundingBox&&e.computeBoundingBox(),ri.copy(e.boundingBox),ri.applyMatrix4(t.matrixWorld),this.union(ri));const n=t.children;for(let i=0,r=n.length;i<r;i++)this.expandByObject(n[i]);return this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Jn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)}intersectsSphere(t){return this.clampPoint(t.center,ii),ii.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(hi),di.subVectors(this.max,hi),oi.subVectors(t.a,hi),ai.subVectors(t.b,hi),si.subVectors(t.c,hi),li.subVectors(ai,oi),ci.subVectors(si,ai),ui.subVectors(oi,si);let e=[0,-li.z,li.y,0,-ci.z,ci.y,0,-ui.z,ui.y,li.z,0,-li.x,ci.z,0,-ci.x,ui.z,0,-ui.x,-li.y,li.x,0,-ci.y,ci.x,0,-ui.y,ui.x,0];return!!ei(e,oi,ai,si,di)&&(e=[1,0,0,0,1,0,0,0,1],!!ei(e,oi,ai,si,di)&&(pi.crossVectors(li,ci),e=[pi.x,pi.y,pi.z],ei(e,oi,ai,si,di)))}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Jn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=ii.copy(t).clamp(this.min,this.max);return e.sub(t).length()}getBoundingSphere(t){return void 0===t&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(t.center),t.radius=.5*this.getSize(ii).length(),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()?this:(ni[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),ni[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),ni[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),ni[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),ni[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),ni[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),ni[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),ni[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(ni),this)}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}function ei(t,e,n,i,r){for(let o=0,a=t.length-3;o<=a;o+=3){fi.fromArray(t,o);const a=r.x*Math.abs(fi.x)+r.y*Math.abs(fi.y)+r.z*Math.abs(fi.z),s=e.dot(fi),l=n.dot(fi),c=i.dot(fi);if(Math.max(-Math.max(s,l,c),Math.min(s,l,c))>a)return!1}return!0}const ni=[new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn,new Jn],ii=new Jn,ri=new ti,oi=new Jn,ai=new Jn,si=new Jn,li=new Jn,ci=new Jn,ui=new Jn,hi=new Jn,di=new Jn,pi=new Jn,fi=new Jn,mi=new ti;class vi{constructor(t,e){this.center=void 0!==t?t:new Jn,this.radius=void 0!==e?e:-1}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const n=this.center;void 0!==e?n.copy(e):mi.setFromPoints(t).getCenter(n);let i=0;for(let r=0,o=t.length;r<o;r++)i=Math.max(i,n.distanceToSquared(t[r]));return this.radius=Math.sqrt(i),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Jn),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new ti),this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}}const gi=new Jn,yi=new Jn,bi=new Jn,xi=new Jn,wi=new Jn,_i=new Jn,Mi=new Jn;class Ei{constructor(t,e){this.origin=void 0!==t?t:new Jn,this.direction=void 0!==e?e:new Jn(0,0,-1)}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Jn),e.copy(this.direction).multiplyScalar(t).add(this.origin)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,gi)),this}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Jn),e.subVectors(t,this.origin);const n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=gi.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):(gi.copy(this.direction).multiplyScalar(e).add(this.origin),gi.distanceToSquared(t))}distanceSqToSegment(t,e,n,i){yi.copy(t).add(e).multiplyScalar(.5),bi.copy(e).sub(t).normalize(),xi.copy(this.origin).sub(yi);const r=.5*t.distanceTo(e),o=-this.direction.dot(bi),a=xi.dot(this.direction),s=-xi.dot(bi),l=xi.lengthSq(),c=Math.abs(1-o*o);let u,h,d,p;if(c>0)if(u=o*s-a,h=o*a-s,p=r*c,u>=0)if(h>=-p)if(h<=p){const t=1/c;u*=t,h*=t,d=u*(u+o*h+2*a)+h*(o*u+h+2*s)+l}else h=r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h=-r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;else h<=-p?(u=Math.max(0,-(-o*r+a)),h=u>0?-r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l):h<=p?(u=0,h=Math.min(Math.max(-r,-s),r),d=h*(h+2*s)+l):(u=Math.max(0,-(o*r+a)),h=u>0?r:Math.min(Math.max(-r,-s),r),d=-u*u+h*(h+2*s)+l);else h=o>0?-r:r,u=Math.max(0,-(o*h+a)),d=-u*u+h*(h+2*s)+l;return n&&n.copy(this.direction).multiplyScalar(u).add(this.origin),i&&i.copy(bi).multiplyScalar(h).add(yi),d}intersectSphere(t,e){gi.subVectors(t.center,this.origin);const n=gi.dot(this.direction),i=gi.dot(gi)-n*n,r=t.radius*t.radius;if(i>r)return null;const o=Math.sqrt(r-i),a=n-o,s=n+o;return a<0&&s<0?null:a<0?this.at(s,e):this.at(a,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null}intersectPlane(t,e){const n=this.distanceToPlane(t);return null===n?null:this.at(n,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);if(0===e)return!0;const n=t.normal.dot(this.direction);return n*e<0}intersectBox(t,e){let n,i,r,o,a,s;const l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))}intersectsBox(t){return null!==this.intersectBox(t,gi)}intersectTriangle(t,e,n,i,r){wi.subVectors(e,t),_i.subVectors(n,t),Mi.crossVectors(wi,_i);let o,a=this.direction.dot(Mi);if(a>0){if(i)return null;o=1}else{if(!(a<0))return null;o=-1,a=-a}xi.subVectors(this.origin,t);const s=o*this.direction.dot(_i.crossVectors(xi,_i));if(s<0)return null;const l=o*this.direction.dot(wi.cross(xi));if(l<0)return null;if(s+l>a)return null;const c=-o*xi.dot(Mi);return c<0?null:this.at(c/a,r)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}class Si{constructor(){Object.defineProperty(this,"isMatrix4",{value:!0}),this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}set(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){const v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new Si).fromArray(this.elements)}copy(t){const e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this}copyPosition(t){const e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,n=t.elements,i=1/Ti.setFromMatrixColumn(t,0).length(),r=1/Ti.setFromMatrixColumn(t,1).length(),o=1/Ti.setFromMatrixColumn(t,2).length();return e[0]=n[0]*i,e[1]=n[1]*i,e[2]=n[2]*i,e[3]=0,e[4]=n[4]*r,e[5]=n[5]*r,e[6]=n[6]*r,e[7]=0,e[8]=n[8]*o,e[9]=n[9]*o,e[10]=n[10]*o,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");const e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=n+i*l,e[5]=t-r*l,e[9]=-a*s,e[2]=r-t*l,e[6]=i+n*l,e[10]=o*s}else if("YXZ"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t+r*a,e[4]=i*a-n,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=n*a-i,e[6]=r+t*a,e[10]=o*s}else if("ZXY"===t.order){const t=s*c,n=s*u,i=l*c,r=l*u;e[0]=t-r*a,e[4]=-o*u,e[8]=i+n*a,e[1]=n+i*a,e[5]=o*c,e[9]=r-t*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){const t=o*c,n=o*u,i=a*c,r=a*u;e[0]=s*c,e[4]=i*l-n,e[8]=t*l+r,e[1]=s*u,e[5]=r*l+t,e[9]=n*l-i,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=r-t*u,e[8]=i*u+n,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=n*u+i,e[10]=t-r*u}else if("XZY"===t.order){const t=o*s,n=o*l,i=a*s,r=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=t*u+r,e[5]=o*c,e[9]=n*u-i,e[2]=i*u-n,e[6]=a*c,e[10]=r*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(Ci,t,Li)}lookAt(t,e,n){const i=this.elements;return Ri.subVectors(t,e),0===Ri.lengthSq()&&(Ri.z=1),Ri.normalize(),Pi.crossVectors(n,Ri),0===Pi.lengthSq()&&(1===Math.abs(n.z)?Ri.x+=1e-4:Ri.z+=1e-4,Ri.normalize(),Pi.crossVectors(n,Ri)),Pi.normalize(),Oi.crossVectors(Ri,Pi),i[0]=Pi.x,i[4]=Oi.x,i[8]=Ri.x,i[1]=Pi.y,i[5]=Oi.y,i[9]=Ri.y,i[2]=Pi.z,i[6]=Oi.z,i[10]=Ri.z,this}multiply(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=i[0],_=i[4],M=i[8],E=i[12],S=i[1],T=i[5],A=i[9],C=i[13],L=i[2],P=i[6],O=i[10],R=i[14],k=i[3],D=i[7],I=i[11],N=i[15];return r[0]=o*w+a*S+s*L+l*k,r[4]=o*_+a*T+s*P+l*D,r[8]=o*M+a*A+s*O+l*I,r[12]=o*E+a*C+s*R+l*N,r[1]=c*w+u*S+h*L+d*k,r[5]=c*_+u*T+h*P+d*D,r[9]=c*M+u*A+h*O+d*I,r[13]=c*E+u*C+h*R+d*N,r[2]=p*w+f*S+m*L+v*k,r[6]=p*_+f*T+m*P+v*D,r[10]=p*M+f*A+m*O+v*I,r[14]=p*E+f*C+m*R+v*N,r[3]=g*w+y*S+b*L+x*k,r[7]=g*_+y*T+b*P+x*D,r[11]=g*M+y*A+b*O+x*I,r[15]=g*E+y*C+b*R+x*N,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14],p=t[3],f=t[7],m=t[11],v=t[15];return p*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+f*(+e*s*d-e*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+m*(+e*l*u-e*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+v*(-i*a*c-e*s*u+e*a*h+i*o*u-n*o*h+n*s*c)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,n){const i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this}invert(){const t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8],u=t[9],h=t[10],d=t[11],p=t[12],f=t[13],m=t[14],v=t[15],g=u*m*l-f*h*l+f*s*d-a*m*d-u*s*v+a*h*v,y=p*h*l-c*m*l-p*s*d+o*m*d+c*s*v-o*h*v,b=c*f*l-p*u*l+p*a*d-o*f*d-c*a*v+o*u*v,x=p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m,w=e*g+n*y+i*b+r*x;if(0===w)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const _=1/w;return t[0]=g*_,t[1]=(f*h*r-u*m*r-f*i*d+n*m*d+u*i*v-n*h*v)*_,t[2]=(a*m*r-f*s*r+f*i*l-n*m*l-a*i*v+n*s*v)*_,t[3]=(u*s*r-a*h*r-u*i*l+n*h*l+a*i*d-n*s*d)*_,t[4]=y*_,t[5]=(c*m*r-p*h*r+p*i*d-e*m*d-c*i*v+e*h*v)*_,t[6]=(p*s*r-o*m*r-p*i*l+e*m*l+o*i*v-e*s*v)*_,t[7]=(o*h*r-c*s*r+c*i*l-e*h*l-o*i*d+e*s*d)*_,t[8]=b*_,t[9]=(p*u*r-c*f*r-p*n*d+e*f*d+c*n*v-e*u*v)*_,t[10]=(o*f*r-p*a*r+p*n*l-e*f*l-o*n*v+e*a*v)*_,t[11]=(c*a*r-o*u*r-c*n*l+e*u*l+o*n*d-e*a*d)*_,t[12]=x*_,t[13]=(c*f*i-p*u*i+p*n*h-e*f*h-c*n*m+e*u*m)*_,t[14]=(p*a*i-o*f*i-p*n*s+e*f*s+o*n*m-e*a*m)*_,t[15]=(o*u*i-c*a*i+c*n*s-e*u*s-o*n*h+e*a*h)*_,this}scale(t){const e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))}makeTranslation(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this}makeScale(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this}makeShear(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this}compose(t,e,n){const i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,v=a*u,g=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return i[0]=(1-(f+v))*x,i[1]=(d+b)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(p+y)*_,i[9]=(m-g)*_,i[10]=(1-(h+f))*_,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this}decompose(t,e,n){const i=this.elements;let r=Ti.set(i[0],i[1],i[2]).length();const o=Ti.set(i[4],i[5],i[6]).length(),a=Ti.set(i[8],i[9],i[10]).length(),s=this.determinant();s<0&&(r=-r),t.x=i[12],t.y=i[13],t.z=i[14],Ai.copy(this);const l=1/r,c=1/o,u=1/a;return Ai.elements[0]*=l,Ai.elements[1]*=l,Ai.elements[2]*=l,Ai.elements[4]*=c,Ai.elements[5]*=c,Ai.elements[6]*=c,Ai.elements[8]*=u,Ai.elements[9]*=u,Ai.elements[10]*=u,e.setFromRotationMatrix(Ai),n.x=r,n.y=o,n.z=a,this}makePerspective(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");const a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,n,i,r,o){const a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,h=(n+i)*l,d=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,n=t.elements;for(let i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0}fromArray(t,e=0){for(let n=0;n<16;n++)this.elements[n]=t[n+e];return this}toArray(t=[],e=0){const n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}}const Ti=new Jn,Ai=new Si,Ci=new Jn(0,0,0),Li=new Jn(1,1,1),Pi=new Jn,Oi=new Jn,Ri=new Jn;class ki{constructor(t=0,e=0,n=0,i=ki.DefaultOrder){Object.defineProperty(this,"isEuler",{value:!0}),this._x=t,this._y=e,this._z=n,this._order=i}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e,n){const i=Fn.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];switch(e=e||this._order,e){case"XYZ":this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.9999999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0);break;case"YXZ":this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0);break;case"ZXY":this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o));break;case"ZYX":this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c));break;case"YZX":this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p));break;case"XZY":this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!1!==n&&this._onChangeCallback(),this}setFromQuaternion(t,e,n){return Di.makeRotationFromQuaternion(t),this.setFromRotationMatrix(Di,e,n)}setFromVector3(t,e){return this.set(t.x,t.y,t.z,e||this._order)}reorder(t){return Ii.setFromEuler(this),this.setFromQuaternion(Ii,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}toVector3(t){return t?t.set(this._x,this._y,this._z):new Jn(this._x,this._y,this._z)}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}}ki.DefaultOrder="XYZ",ki.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"];const Di=new Si,Ii=new Zn;class Ni{constructor(){this.mask=1}set(t){this.mask=1<<t|0}enable(t){this.mask|=1<<t|0}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t|0}disable(t){this.mask&=~(1<<t|0)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}}let zi=0;const Bi=new Jn,Fi=new Zn,ji=new Si,Hi=new Jn,Ui=new Jn,Vi=new Jn,Gi=new Zn,Wi=new Jn(1,0,0),$i=new Jn(0,1,0),qi=new Jn(0,0,1),Yi={type:"added"},Xi={type:"removed"};function Zi(){Object.defineProperty(this,"id",{value:zi++}),this.uuid=Fn.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Zi.DefaultUp.clone();const t=new Jn,e=new ki,n=new Zn,i=new Jn(1,1,1);function r(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e._onChange(r),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Si},normalMatrix:{value:new Hn}}),this.matrix=new Si,this.matrixWorld=new Si,this.matrixAutoUpdate=Zi.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new Ni,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}Zi.DefaultUp=new Jn(0,1,0),Zi.DefaultMatrixAutoUpdate=!0,Zi.prototype=Object.assign(Object.create(Nn.prototype),{constructor:Zi,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix4:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(t,e){return Fi.setFromAxisAngle(t,e),this.quaternion.multiply(Fi),this},rotateOnWorldAxis:function(t,e){return Fi.setFromAxisAngle(t,e),this.quaternion.premultiply(Fi),this},rotateX:function(t){return this.rotateOnAxis(Wi,t)},rotateY:function(t){return this.rotateOnAxis($i,t)},rotateZ:function(t){return this.rotateOnAxis(qi,t)},translateOnAxis:function(t,e){return Bi.copy(t).applyQuaternion(this.quaternion),this.position.add(Bi.multiplyScalar(e)),this},translateX:function(t){return this.translateOnAxis(Wi,t)},translateY:function(t){return this.translateOnAxis($i,t)},translateZ:function(t){return this.translateOnAxis(qi,t)},localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(t){return t.applyMatrix4(ji.copy(this.matrixWorld).invert())},lookAt:function(t,e,n){t.isVector3?Hi.copy(t):Hi.set(t,e,n);const i=this.parent;this.updateWorldMatrix(!0,!1),Ui.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?ji.lookAt(Ui,Hi,this.up):ji.lookAt(Hi,Ui,this.up),this.quaternion.setFromRotationMatrix(ji),i&&(ji.extractRotation(i.matrixWorld),Fi.setFromRotationMatrix(ji),this.quaternion.premultiply(Fi.invert()))},add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,this.children.push(t),t.dispatchEvent(Yi)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Xi)),this},clear:function(){for(let t=0;t<this.children.length;t++){const e=this.children[t];e.parent=null,e.dispatchEvent(Xi)}return this.children.length=0,this},attach:function(t){return this.updateWorldMatrix(!0,!1),ji.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),ji.multiply(t.parent.matrixWorld)),t.applyMatrix4(ji),t.updateWorldMatrix(!1,!1),this.add(t),this},getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(let n=0,i=this.children.length;n<i;n++){const i=this.children[n],r=i.getObjectByProperty(t,e);if(void 0!==r)return r}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),t=new Zn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ui,t,Vi),t},getWorldScale:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ui,Gi,t),t},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1===this.visible)return;t(this);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)},traverseAncestors:function(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){const n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e){const t=this.children;for(let e=0,n=t.length;e<n;e++)t[e].updateWorldMatrix(!1,!0)}},toJSON:function(t){const e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});const i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isInstancedMesh&&(i.type="InstancedMesh",i.count=this.count,i.instanceMatrix=this.instanceMatrix.toJSON()),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const n=e.shapes;if(Array.isArray(n))for(let e=0,i=n.length;e<i;e++){const i=n[e];r(t.shapes,i)}else r(t.shapes,n)}}if(this.isSkinnedMesh&&(i.bindMode=this.bindMode,i.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(r(t.skeletons,this.skeleton),i.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let n=0,i=this.material.length;n<i;n++)e.push(r(t.materials,this.material[n]));i.material=e}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(let e=0;e<this.children.length;e++)i.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){i.animations=[];for(let e=0;e<this.animations.length;e++){const n=this.animations[e];i.animations.push(r(t.animations,n))}}if(e){const e=o(t.geometries),i=o(t.materials),r=o(t.textures),a=o(t.images),s=o(t.shapes),l=o(t.skeletons),c=o(t.animations);e.length>0&&(n.geometries=e),i.length>0&&(n.materials=i),r.length>0&&(n.textures=r),a.length>0&&(n.images=a),s.length>0&&(n.shapes=s),l.length>0&&(n.skeletons=l),c.length>0&&(n.animations=c)}return n.object=i,n;function o(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let n=0;n<t.children.length;n++){const e=t.children[n];this.add(e.clone())}return this}});const Ji=new Jn,Ki=new Jn,Qi=new Hn;class tr{constructor(t,e){Object.defineProperty(this,"isPlane",{value:!0}),this.normal=void 0!==t?t:new Jn(1,0,0),this.constant=void 0!==e?e:0}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,n){const i=Ji.subVectors(n,e).cross(Ki.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(i,t),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Jn),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)}intersectLine(t,e){void 0===e&&(console.warn("THREE.Plane: .intersectLine() target is now required"),e=new Jn);const n=t.delta(Ji),i=this.normal.dot(n);if(0===i)return 0===this.distanceToPoint(t.start)?e.copy(t.start):void 0;const r=-(t.start.dot(this.normal)+this.constant)/i;return r<0||r>1?void 0:e.copy(n).multiplyScalar(r).add(t.start)}intersectsLine(t){const e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Jn),t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const n=e||Qi.getNormalMatrix(t),i=this.coplanarPoint(Ji).applyMatrix4(t),r=this.normal.applyMatrix3(n).normalize();return this.constant=-i.dot(r),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}const er=new Jn,nr=new Jn,ir=new Jn,rr=new Jn,or=new Jn,ar=new Jn,sr=new Jn,lr=new Jn,cr=new Jn,ur=new Jn;class hr{constructor(t,e,n){this.a=void 0!==t?t:new Jn,this.b=void 0!==e?e:new Jn,this.c=void 0!==n?n:new Jn}static getNormal(t,e,n,i){void 0===i&&(console.warn("THREE.Triangle: .getNormal() target is now required"),i=new Jn),i.subVectors(n,e),er.subVectors(t,e),i.cross(er);const r=i.lengthSq();return r>0?i.multiplyScalar(1/Math.sqrt(r)):i.set(0,0,0)}static getBarycoord(t,e,n,i,r){er.subVectors(i,e),nr.subVectors(n,e),ir.subVectors(t,e);const o=er.dot(er),a=er.dot(nr),s=er.dot(ir),l=nr.dot(nr),c=nr.dot(ir),u=o*l-a*a;if(void 0===r&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),r=new Jn),0===u)return r.set(-2,-1,-1);const h=1/u,d=(l*s-a*c)*h,p=(o*c-a*s)*h;return r.set(1-d-p,p,d)}static containsPoint(t,e,n,i){return this.getBarycoord(t,e,n,i,rr),rr.x>=0&&rr.y>=0&&rr.x+rr.y<=1}static getUV(t,e,n,i,r,o,a,s){return this.getBarycoord(t,e,n,i,rr),s.set(0,0),s.addScaledVector(r,rr.x),s.addScaledVector(o,rr.y),s.addScaledVector(a,rr.z),s}static isFrontFacing(t,e,n,i){return er.subVectors(n,e),nr.subVectors(t,e),er.cross(nr).dot(i)<0}set(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this}setFromPointsAndIndices(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return er.subVectors(this.c,this.b),nr.subVectors(this.a,this.b),.5*er.cross(nr).length()}getMidpoint(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Jn),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return hr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new tr),t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return hr.getBarycoord(t,this.a,this.b,this.c,e)}getUV(t,e,n,i,r){return hr.getUV(t,this.a,this.b,this.c,e,n,i,r)}containsPoint(t){return hr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return hr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){void 0===e&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),e=new Jn);const n=this.a,i=this.b,r=this.c;let o,a;or.subVectors(i,n),ar.subVectors(r,n),lr.subVectors(t,n);const s=or.dot(lr),l=ar.dot(lr);if(s<=0&&l<=0)return e.copy(n);cr.subVectors(t,i);const c=or.dot(cr),u=ar.dot(cr);if(c>=0&&u<=c)return e.copy(i);const h=s*u-c*l;if(h<=0&&s>=0&&c<=0)return o=s/(s-c),e.copy(n).addScaledVector(or,o);ur.subVectors(t,r);const d=or.dot(ur),p=ar.dot(ur);if(p>=0&&d<=p)return e.copy(r);const f=d*l-s*p;if(f<=0&&l>=0&&p<=0)return a=l/(l-p),e.copy(n).addScaledVector(ar,a);const m=c*p-d*u;if(m<=0&&u-c>=0&&d-p>=0)return sr.subVectors(r,i),a=(u-c)/(u-c+(d-p)),e.copy(i).addScaledVector(sr,a);const v=1/(m+f+h);return o=f*v,a=h*v,e.copy(n).addScaledVector(or,o).addScaledVector(ar,a)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},pr={h:0,s:0,l:0},fr={h:0,s:0,l:0};function mr(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}function vr(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function gr(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}class yr{constructor(t,e,n){return Object.defineProperty(this,"isColor",{value:!0}),void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}set(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this}setRGB(t,e,n){return this.r=t,this.g=e,this.b=n,this}setHSL(t,e,n){if(t=Fn.euclideanModulo(t,1),e=Fn.clamp(e,0,1),n=Fn.clamp(n,0,1),0===e)this.r=this.g=this.b=n;else{const i=n<=.5?n*(1+e):n+e-n*e,r=2*n-i;this.r=mr(r,i,t+1/3),this.g=mr(r,i,t),this.b=mr(r,i,t-1/3)}return this}setStyle(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^((?:rgb|hsl)a?)\(([^\)]*)\)/.exec(t)){let t;const i=n[1],r=n[2];switch(i){case"rgb":case"rgba":if(t=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(255,parseInt(t[1],10))/255,this.g=Math.min(255,parseInt(t[2],10))/255,this.b=Math.min(255,parseInt(t[3],10))/255,e(t[4]),this;if(t=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r))return this.r=Math.min(100,parseInt(t[1],10))/100,this.g=Math.min(100,parseInt(t[2],10))/100,this.b=Math.min(100,parseInt(t[3],10))/100,e(t[4]),this;break;case"hsl":case"hsla":if(t=/^\s*(\d*\.?\d+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(r)){const n=parseFloat(t[1])/360,i=parseInt(t[2],10)/100,r=parseInt(t[3],10)/100;return e(t[4]),this.setHSL(n,i,r)}break}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const t=n[1],e=t.length;if(3===e)return this.r=parseInt(t.charAt(0)+t.charAt(0),16)/255,this.g=parseInt(t.charAt(1)+t.charAt(1),16)/255,this.b=parseInt(t.charAt(2)+t.charAt(2),16)/255,this;if(6===e)return this.r=parseInt(t.charAt(0)+t.charAt(1),16)/255,this.g=parseInt(t.charAt(2)+t.charAt(3),16)/255,this.b=parseInt(t.charAt(4)+t.charAt(5),16)/255,this}return t&&t.length>0?this.setColorName(t):this}setColorName(t){const e=dr[t];return void 0!==e?this.setHex(e):console.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copyGammaToLinear(t,e=2){return this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this}copyLinearToGamma(t,e=2){const n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this}convertGammaToLinear(t){return this.copyGammaToLinear(this,t),this}convertLinearToGamma(t){return this.copyLinearToGamma(this,t),this}copySRGBToLinear(t){return this.r=vr(t.r),this.g=vr(t.g),this.b=vr(t.b),this}copyLinearToSRGB(t){return this.r=gr(t.r),this.g=gr(t.g),this.b=gr(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0}getHexString(){return("000000"+this.getHex().toString(16)).slice(-6)}getHSL(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});const e=this.r,n=this.g,i=this.b,r=Math.max(e,n,i),o=Math.min(e,n,i);let a,s;const l=(o+r)/2;if(o===r)a=0,s=0;else{const t=r-o;switch(s=l<=.5?t/(r+o):t/(2-r-o),r){case e:a=(n-i)/t+(n<i?6:0);break;case n:a=(i-e)/t+2;break;case i:a=(e-n)/t+4;break}a/=6}return t.h=a,t.s=s,t.l=l,t}getStyle(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"}offsetHSL(t,e,n){return this.getHSL(pr),pr.h+=t,pr.s+=e,pr.l+=n,this.setHSL(pr.h,pr.s,pr.l),this}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,n){return this.r=t.r+(e.r-t.r)*n,this.g=t.g+(e.g-t.g)*n,this.b=t.b+(e.b-t.b)*n,this}lerpHSL(t,e){this.getHSL(pr),t.getHSL(fr);const n=Fn.lerp(pr.h,fr.h,e),i=Fn.lerp(pr.s,fr.s,e),r=Fn.lerp(pr.l,fr.l,e);return this.setHSL(n,i,r),this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),!0===t.normalized&&(this.r/=255,this.g/=255,this.b/=255),this}toJSON(){return this.getHex()}}yr.NAMES=dr,yr.prototype.r=1,yr.prototype.g=1,yr.prototype.b=1;class br{constructor(t,e,n,i,r,o=0){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new Jn,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new yr,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=o}clone(){return(new this.constructor).copy(this)}copy(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(let e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(let e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}let xr=0;function wr(){Object.defineProperty(this,"id",{value:xr++}),this.uuid=Fn.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.blending=x,this.side=f,this.flatShading=!1,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.blendSrc=D,this.blendDst=I,this.blendEquation=S,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=G,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=En,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=un,this.stencilZFail=un,this.stencilZPass=un,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0}function _r(t){wr.call(this),this.type="MeshBasicMaterial",this.color=new yr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.setValues(t)}wr.prototype=Object.assign(Object.create(Nn.prototype),{constructor:wr,isMaterial:!0,onBeforeCompile:function(){},customProgramCacheKey:function(){return this.onBeforeCompile.toString()},setValues:function(t){if(void 0!==t)for(const e in t){const n=t[e];if(void 0===n){console.warn("THREE.Material: '"+e+"' parameter is undefined.");continue}if("shading"===e){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===g;continue}const i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}},toJSON:function(t){const e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});const n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){const e=[];for(const n in t){const i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.sheen&&this.sheen.isColor&&(n.sheen=this.sheen.getHex()),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity&&1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearcoat&&(n.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,n.refractionRatio=this.refractionRatio,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==f&&(n.side=this.side),this.vertexColors&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,n.stencilWrite=this.stencilWrite,n.stencilWriteMask=this.stencilWriteMask,n.stencilFunc=this.stencilFunc,n.stencilRef=this.stencilRef,n.stencilFuncMask=this.stencilFuncMask,n.stencilFail=this.stencilFail,n.stencilZFail=this.stencilZFail,n.stencilZPass=this.stencilZPass,this.rotation&&0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth&&1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.morphNormals&&(n.morphNormals=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),!1===this.toneMapped&&(n.toneMapped=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){const e=i(t.textures),r=i(t.images);e.length>0&&(n.textures=e),r.length>0&&(n.images=r)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let n=null;if(null!==e){const t=e.length;n=new Array(t);for(let i=0;i!==t;++i)n[i]=e[i].clone()}return this.clippingPlanes=n,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(wr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),_r.prototype=Object.create(wr.prototype),_r.prototype.constructor=_r,_r.prototype.isMeshBasicMaterial=!0,_r.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this};const Mr=new Jn,Er=new jn;function Sr(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.usage=Sn,this.updateRange={offset:0,count:-1},this.version=0}function Tr(t,e,n){Sr.call(this,new Int8Array(t),e,n)}function Ar(t,e,n){Sr.call(this,new Uint8Array(t),e,n)}function Cr(t,e,n){Sr.call(this,new Uint8ClampedArray(t),e,n)}function Lr(t,e,n){Sr.call(this,new Int16Array(t),e,n)}function Pr(t,e,n){Sr.call(this,new Uint16Array(t),e,n)}function Or(t,e,n){Sr.call(this,new Int32Array(t),e,n)}function Rr(t,e,n){Sr.call(this,new Uint32Array(t),e,n)}function kr(t,e,n){Sr.call(this,new Uint16Array(t),e,n)}function Dr(t,e,n){Sr.call(this,new Float32Array(t),e,n)}function Ir(t,e,n){Sr.call(this,new Float64Array(t),e,n)}function Nr(t){if(0===t.length)return-1/0;let e=t[0];for(let n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Object.defineProperty(Sr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Sr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(let i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),r=new yr),e[n++]=r.r,e[n++]=r.g,e[n++]=r.b}return this},copyVector2sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),r=new jn),e[n++]=r.x,e[n++]=r.y}return this},copyVector3sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),r=new Jn),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z}return this},copyVector4sArray:function(t){const e=this.array;let n=0;for(let i=0,r=t.length;i<r;i++){let r=t[i];void 0===r&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),r=new qn),e[n++]=r.x,e[n++]=r.y,e[n++]=r.z,e[n++]=r.w}return this},applyMatrix3:function(t){if(2===this.itemSize)for(let e=0,n=this.count;e<n;e++)Er.fromBufferAttribute(this,e),Er.applyMatrix3(t),this.setXY(e,Er.x,Er.y);else if(3===this.itemSize)for(let e=0,n=this.count;e<n;e++)Mr.fromBufferAttribute(this,e),Mr.applyMatrix3(t),this.setXYZ(e,Mr.x,Mr.y,Mr.z);return this},applyMatrix4:function(t){for(let e=0,n=this.count;e<n;e++)Mr.x=this.getX(e),Mr.y=this.getY(e),Mr.z=this.getZ(e),Mr.applyMatrix4(t),this.setXYZ(e,Mr.x,Mr.y,Mr.z);return this},applyNormalMatrix:function(t){for(let e=0,n=this.count;e<n;e++)Mr.x=this.getX(e),Mr.y=this.getY(e),Mr.z=this.getZ(e),Mr.applyNormalMatrix(t),this.setXYZ(e,Mr.x,Mr.y,Mr.z);return this},transformDirection:function(t){for(let e=0,n=this.count;e<n;e++)Mr.x=this.getX(e),Mr.y=this.getY(e),Mr.z=this.getZ(e),Mr.transformDirection(t),this.setXYZ(e,Mr.x,Mr.y,Mr.z);return this},set:function(t,e=0){return this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Tr.prototype=Object.create(Sr.prototype),Tr.prototype.constructor=Tr,Ar.prototype=Object.create(Sr.prototype),Ar.prototype.constructor=Ar,Cr.prototype=Object.create(Sr.prototype),Cr.prototype.constructor=Cr,Lr.prototype=Object.create(Sr.prototype),Lr.prototype.constructor=Lr,Pr.prototype=Object.create(Sr.prototype),Pr.prototype.constructor=Pr,Or.prototype=Object.create(Sr.prototype),Or.prototype.constructor=Or,Rr.prototype=Object.create(Sr.prototype),Rr.prototype.constructor=Rr,kr.prototype=Object.create(Sr.prototype),kr.prototype.constructor=kr,kr.prototype.isFloat16BufferAttribute=!0,Dr.prototype=Object.create(Sr.prototype),Dr.prototype.constructor=Dr,Ir.prototype=Object.create(Sr.prototype),Ir.prototype.constructor=Ir;const zr={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function Br(t,e){return new zr[t](e)}let Fr=0;const jr=new Si,Hr=new Zi,Ur=new Jn,Vr=new ti,Gr=new ti,Wr=new Jn;function $r(){Object.defineProperty(this,"id",{value:Fr++}),this.uuid=Fn.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}$r.prototype=Object.assign(Object.create(Nn.prototype),{constructor:$r,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){return Array.isArray(t)?this.index=new(Nr(t)>65535?Rr:Pr)(t,1):this.index=t,this},getAttribute:function(t){return this.attributes[t]},setAttribute:function(t,e){return this.attributes[t]=e,this},deleteAttribute:function(t){return delete this.attributes[t],this},hasAttribute:function(t){return void 0!==this.attributes[t]},addGroup:function(t,e,n=0){this.groups.push({start:t,count:e,materialIndex:n})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix4:function(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const n=this.attributes.normal;if(void 0!==n){const e=(new Hn).getNormalMatrix(t);n.applyNormalMatrix(e),n.needsUpdate=!0}const i=this.attributes.tangent;return void 0!==i&&(i.transformDirection(t),i.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(t){return jr.makeRotationX(t),this.applyMatrix4(jr),this},rotateY:function(t){return jr.makeRotationY(t),this.applyMatrix4(jr),this},rotateZ:function(t){return jr.makeRotationZ(t),this.applyMatrix4(jr),this},translate:function(t,e,n){return jr.makeTranslation(t,e,n),this.applyMatrix4(jr),this},scale:function(t,e,n){return jr.makeScale(t,e,n),this.applyMatrix4(jr),this},lookAt:function(t){return Hr.lookAt(t),Hr.updateMatrix(),this.applyMatrix4(Hr.matrix),this},center:function(){return this.computeBoundingBox(),this.boundingBox.getCenter(Ur).negate(),this.translate(Ur.x,Ur.y,Ur.z),this},setFromPoints:function(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n];e.push(i.x,i.y,i.z||0)}return this.setAttribute("position",new Dr(e,3)),this},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new ti);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingBox.set(new Jn(-1/0,-1/0,-1/0),new Jn(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let n=0,i=e.length;n<i;n++){const t=e[n];Vr.setFromBufferAttribute(t),this.morphTargetsRelative?(Wr.addVectors(this.boundingBox.min,Vr.min),this.boundingBox.expandByPoint(Wr),Wr.addVectors(this.boundingBox.max,Vr.max),this.boundingBox.expandByPoint(Wr)):(this.boundingBox.expandByPoint(Vr.min),this.boundingBox.expandByPoint(Vr.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new vi);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),void this.boundingSphere.set(new Jn,1/0);if(t){const n=this.boundingSphere.center;if(Vr.setFromBufferAttribute(t),e)for(let t=0,r=e.length;t<r;t++){const n=e[t];Gr.setFromBufferAttribute(n),this.morphTargetsRelative?(Wr.addVectors(Vr.min,Gr.min),Vr.expandByPoint(Wr),Wr.addVectors(Vr.max,Gr.max),Vr.expandByPoint(Wr)):(Vr.expandByPoint(Gr.min),Vr.expandByPoint(Gr.max))}Vr.getCenter(n);let i=0;for(let e=0,r=t.count;e<r;e++)Wr.fromBufferAttribute(t,e),i=Math.max(i,n.distanceToSquared(Wr));if(e)for(let r=0,o=e.length;r<o;r++){const o=e[r],a=this.morphTargetsRelative;for(let e=0,r=o.count;e<r;e++)Wr.fromBufferAttribute(o,e),a&&(Ur.fromBufferAttribute(t,e),Wr.add(Ur)),i=Math.max(i,n.distanceToSquared(Wr))}this.boundingSphere.radius=Math.sqrt(i),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}},computeFaceNormals:function(){},computeTangents:function(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const n=t.array,i=e.position.array,r=e.normal.array,o=e.uv.array,a=i.length/3;void 0===e.tangent&&this.setAttribute("tangent",new Sr(new Float32Array(4*a),4));const s=e.tangent.array,l=[],c=[];for(let S=0;S<a;S++)l[S]=new Jn,c[S]=new Jn;const u=new Jn,h=new Jn,d=new Jn,p=new jn,f=new jn,m=new jn,v=new Jn,g=new Jn;function y(t,e,n){u.fromArray(i,3*t),h.fromArray(i,3*e),d.fromArray(i,3*n),p.fromArray(o,2*t),f.fromArray(o,2*e),m.fromArray(o,2*n),h.sub(u),d.sub(u),f.sub(p),m.sub(p);const r=1/(f.x*m.y-m.x*f.y);isFinite(r)&&(v.copy(h).multiplyScalar(m.y).addScaledVector(d,-f.y).multiplyScalar(r),g.copy(d).multiplyScalar(f.x).addScaledVector(h,-m.x).multiplyScalar(r),l[t].add(v),l[e].add(v),l[n].add(v),c[t].add(g),c[e].add(g),c[n].add(g))}let b=this.groups;0===b.length&&(b=[{start:0,count:n.length}]);for(let S=0,T=b.length;S<T;++S){const t=b[S],e=t.start,i=t.count;for(let r=e,o=e+i;r<o;r+=3)y(n[r+0],n[r+1],n[r+2])}const x=new Jn,w=new Jn,_=new Jn,M=new Jn;function E(t){_.fromArray(r,3*t),M.copy(_);const e=l[t];x.copy(e),x.sub(_.multiplyScalar(_.dot(e))).normalize(),w.crossVectors(M,e);const n=w.dot(c[t]),i=n<0?-1:1;s[4*t]=x.x,s[4*t+1]=x.y,s[4*t+2]=x.z,s[4*t+3]=i}for(let S=0,T=b.length;S<T;++S){const t=b[S],e=t.start,i=t.count;for(let r=e,o=e+i;r<o;r+=3)E(n[r+0]),E(n[r+1]),E(n[r+2])}},computeVertexNormals:function(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let n=this.getAttribute("normal");if(void 0===n)n=new Sr(new Float32Array(3*e.count),3),this.setAttribute("normal",n);else for(let t=0,e=n.count;t<e;t++)n.setXYZ(t,0,0,0);const i=new Jn,r=new Jn,o=new Jn,a=new Jn,s=new Jn,l=new Jn,c=new Jn,u=new Jn;if(t)for(let h=0,d=t.count;h<d;h+=3){const d=t.getX(h+0),p=t.getX(h+1),f=t.getX(h+2);i.fromBufferAttribute(e,d),r.fromBufferAttribute(e,p),o.fromBufferAttribute(e,f),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),a.fromBufferAttribute(n,d),s.fromBufferAttribute(n,p),l.fromBufferAttribute(n,f),a.add(c),s.add(c),l.add(c),n.setXYZ(d,a.x,a.y,a.z),n.setXYZ(p,s.x,s.y,s.z),n.setXYZ(f,l.x,l.y,l.z)}else for(let t=0,h=e.count;t<h;t+=3)i.fromBufferAttribute(e,t+0),r.fromBufferAttribute(e,t+1),o.fromBufferAttribute(e,t+2),c.subVectors(o,r),u.subVectors(i,r),c.cross(u),n.setXYZ(t+0,c.x,c.y,c.z),n.setXYZ(t+1,c.x,c.y,c.z),n.setXYZ(t+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}},merge:function(t,e){if(!t||!t.isBufferGeometry)return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t);void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));const n=this.attributes;for(const i in n){if(void 0===t.attributes[i])continue;const r=n[i],o=r.array,a=t.attributes[i],s=a.array,l=a.itemSize*e,c=Math.min(s.length,o.length-l);for(let t=0,e=l;t<c;t++,e++)o[e]=s[t]}return this},normalizeNormals:function(){const t=this.attributes.normal;for(let e=0,n=t.count;e<n;e++)Wr.fromBufferAttribute(t,e),Wr.normalize(),t.setXYZ(e,Wr.x,Wr.y,Wr.z)},toNonIndexed:function(){function t(t,e){const n=t.array,i=t.itemSize,r=t.normalized,o=new n.constructor(e.length*i);let a=0,s=0;for(let l=0,c=e.length;l<c;l++){a=e[l]*i;for(let t=0;t<i;t++)o[s++]=n[a++]}return new Sr(o,i,r)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new $r,n=this.index.array,i=this.attributes;for(const a in i){const r=i[a],o=t(r,n);e.setAttribute(a,o)}const r=this.morphAttributes;for(const a in r){const i=[],o=r[a];for(let e=0,r=o.length;e<r;e++){const r=o[e],a=t(r,n);i.push(a)}e.morphAttributes[a]=i}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,s=o.length;a<s;a++){const t=o[a];e.addGroup(t.start,t.count,t.materialIndex)}return e},toJSON:function(){const t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const n=this.attributes;for(const s in n){const e=n[s],i=e.toJSON(t.data);""!==e.name&&(i.name=e.name),t.data.attributes[s]=i}const i={};let r=!1;for(const s in this.morphAttributes){const e=this.morphAttributes[s],n=[];for(let i=0,r=e.length;i<r;i++){const r=e[i],o=r.toJSON(t.data);""!==r.name&&(o.name=r.name),n.push(o)}n.length>0&&(i[s]=n,r=!0)}r&&(t.data.morphAttributes=i,t.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(t.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return null!==a&&(t.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),t},clone:function(){return(new $r).copy(this)},copy:function(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const n=t.index;null!==n&&this.setIndex(n.clone(e));const i=t.attributes;for(const l in i){const t=i[l];this.setAttribute(l,t.clone(e))}const r=t.morphAttributes;for(const l in r){const t=[],n=r[l];for(let i=0,r=n.length;i<r;i++)t.push(n[i].clone(e));this.morphAttributes[l]=t}this.morphTargetsRelative=t.morphTargetsRelative;const o=t.groups;for(let l=0,c=o.length;l<c;l++){const t=o[l];this.addGroup(t.start,t.count,t.materialIndex)}const a=t.boundingBox;null!==a&&(this.boundingBox=a.clone());const s=t.boundingSphere;return null!==s&&(this.boundingSphere=s.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});const qr=new Si,Yr=new Ei,Xr=new vi,Zr=new Jn,Jr=new Jn,Kr=new Jn,Qr=new Jn,to=new Jn,eo=new Jn,no=new Jn,io=new Jn,ro=new Jn,oo=new jn,ao=new jn,so=new jn,lo=new Jn,co=new Jn;function uo(t=new $r,e=new _r){Zi.call(this),this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}function ho(t,e,n,i,r,o,a,s){let l;if(l=e.side===m?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side!==v,s),null===l)return null;co.copy(s),co.applyMatrix4(t.matrixWorld);const c=n.ray.origin.distanceTo(co);return c<n.near||c>n.far?null:{distance:c,point:co.clone(),object:t}}function po(t,e,n,i,r,o,a,s,l,c,u,h){Zr.fromBufferAttribute(r,c),Jr.fromBufferAttribute(r,u),Kr.fromBufferAttribute(r,h);const d=t.morphTargetInfluences;if(e.morphTargets&&o&&d){no.set(0,0,0),io.set(0,0,0),ro.set(0,0,0);for(let t=0,e=o.length;t<e;t++){const e=d[t],n=o[t];0!==e&&(Qr.fromBufferAttribute(n,c),to.fromBufferAttribute(n,u),eo.fromBufferAttribute(n,h),a?(no.addScaledVector(Qr,e),io.addScaledVector(to,e),ro.addScaledVector(eo,e)):(no.addScaledVector(Qr.sub(Zr),e),io.addScaledVector(to.sub(Jr),e),ro.addScaledVector(eo.sub(Kr),e)))}Zr.add(no),Jr.add(io),Kr.add(ro)}t.isSkinnedMesh&&(t.boneTransform(c,Zr),t.boneTransform(u,Jr),t.boneTransform(h,Kr));const p=ho(t,e,n,i,Zr,Jr,Kr,lo);if(p){s&&(oo.fromBufferAttribute(s,c),ao.fromBufferAttribute(s,u),so.fromBufferAttribute(s,h),p.uv=hr.getUV(lo,Zr,Jr,Kr,oo,ao,so,new jn)),l&&(oo.fromBufferAttribute(l,c),ao.fromBufferAttribute(l,u),so.fromBufferAttribute(l,h),p.uv2=hr.getUV(lo,Zr,Jr,Kr,oo,ao,so,new jn));const t=new br(c,u,h);hr.getNormal(Zr,Jr,Kr,t.normal),p.face=t}return p}uo.prototype=Object.assign(Object.create(Zi.prototype),{constructor:uo,isMesh:!0,copy:function(t){return Zi.prototype.copy.call(this,t),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=t.material,this.geometry=t.geometry,this},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(t,e){const n=this.geometry,i=this.material,r=this.matrixWorld;if(void 0===i)return;if(null===n.boundingSphere&&n.computeBoundingSphere(),Xr.copy(n.boundingSphere),Xr.applyMatrix4(r),!1===t.ray.intersectsSphere(Xr))return;if(qr.copy(r).invert(),Yr.copy(t.ray).applyMatrix4(qr),null!==n.boundingBox&&!1===Yr.intersectsBox(n.boundingBox))return;let o;if(n.isBufferGeometry){const r=n.index,a=n.attributes.position,s=n.morphAttributes.position,l=n.morphTargetsRelative,c=n.attributes.uv,u=n.attributes.uv2,h=n.groups,d=n.drawRange;if(null!==r)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const p=h[n],f=i[p.materialIndex],m=Math.max(p.start,d.start),v=Math.min(p.start+p.count,d.start+d.count);for(let n=m,i=v;n<i;n+=3){const i=r.getX(n),h=r.getX(n+1),d=r.getX(n+2);o=po(this,f,t,Yr,a,s,l,c,u,i,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=p.materialIndex,e.push(o))}}else{const n=Math.max(0,d.start),h=Math.min(r.count,d.start+d.count);for(let d=n,p=h;d<p;d+=3){const n=r.getX(d),h=r.getX(d+1),p=r.getX(d+2);o=po(this,i,t,Yr,a,s,l,c,u,n,h,p),o&&(o.faceIndex=Math.floor(d/3),e.push(o))}}else if(void 0!==a)if(Array.isArray(i))for(let n=0,p=h.length;n<p;n++){const r=h[n],p=i[r.materialIndex],f=Math.max(r.start,d.start),m=Math.min(r.start+r.count,d.start+d.count);for(let n=f,i=m;n<i;n+=3){const i=n,h=n+1,d=n+2;o=po(this,p,t,Yr,a,s,l,c,u,i,h,d),o&&(o.faceIndex=Math.floor(n/3),o.face.materialIndex=r.materialIndex,e.push(o))}}else{const n=Math.max(0,d.start),r=Math.min(a.count,d.start+d.count);for(let h=n,d=r;h<d;h+=3){const n=h,r=h+1,d=h+2;o=po(this,i,t,Yr,a,s,l,c,u,n,r,d),o&&(o.faceIndex=Math.floor(h/3),e.push(o))}}}else n.isGeometry&&console.error("THREE.Mesh.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}});class fo extends $r{constructor(t=1,e=1,n=1,i=1,r=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};const a=this;i=Math.floor(i),r=Math.floor(r),o=Math.floor(o);const s=[],l=[],c=[],u=[];let h=0,d=0;function p(t,e,n,i,r,o,p,f,m,v,g){const y=o/m,b=p/v,x=o/2,w=p/2,_=f/2,M=m+1,E=v+1;let S=0,T=0;const A=new Jn;for(let a=0;a<E;a++){const o=a*b-w;for(let s=0;s<M;s++){const h=s*y-x;A[t]=h*i,A[e]=o*r,A[n]=_,l.push(A.x,A.y,A.z),A[t]=0,A[e]=0,A[n]=f>0?1:-1,c.push(A.x,A.y,A.z),u.push(s/m),u.push(1-a/v),S+=1}}for(let a=0;a<v;a++)for(let t=0;t<m;t++){const e=h+t+M*a,n=h+t+M*(a+1),i=h+(t+1)+M*(a+1),r=h+(t+1)+M*a;s.push(e,n,r),s.push(n,i,r),T+=6}a.addGroup(d,T,g),d+=T,h+=S}p("z","y","x",-1,-1,n,e,t,o,r,0),p("z","y","x",1,-1,n,e,-t,o,r,1),p("x","z","y",1,1,t,n,e,i,o,2),p("x","z","y",1,-1,t,n,-e,i,o,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.setAttribute("position",new Dr(l,3)),this.setAttribute("normal",new Dr(c,3)),this.setAttribute("uv",new Dr(u,2))}}function mo(t){const e={};for(const n in t){e[n]={};for(const i in t[n]){const r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}}return e}function vo(t){const e={};for(let n=0;n<t.length;n++){const i=mo(t[n]);for(const t in i)e[t]=i[t]}return e}const go={clone:mo,merge:vo};var yo="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",bo="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function xo(t){wr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=yo,this.fragmentShader=bo,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function wo(){Zi.call(this),this.type="Camera",this.matrixWorldInverse=new Si,this.projectionMatrix=new Si,this.projectionMatrixInverse=new Si}function _o(t=50,e=1,n=.1,i=2e3){wo.call(this),this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=n,this.far=i,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}xo.prototype=Object.create(wr.prototype),xo.prototype.constructor=xo,xo.prototype.isShaderMaterial=!0,xo.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=mo(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this},xo.prototype.toJSON=function(t){const e=wr.prototype.toJSON.call(this,t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const n=this.uniforms[i],r=n.value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;const n={};for(const i in this.extensions)!0===this.extensions[i]&&(n[i]=!0);return Object.keys(n).length>0&&(e.extensions=n),e},wo.prototype=Object.assign(Object.create(Zi.prototype),{constructor:wo,isCamera:!0,copy:function(t,e){return Zi.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Jn),this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){Zi.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()},updateWorldMatrix:function(t,e){Zi.prototype.updateWorldMatrix.call(this,t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()},clone:function(){return(new this.constructor).copy(this)}}),_o.prototype=Object.assign(Object.create(wo.prototype),{constructor:_o,isPerspectiveCamera:!0,copy:function(t,e){return wo.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){const e=.5*this.getFilmHeight()/t;this.fov=2*Fn.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){const t=Math.tan(.5*Fn.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*Fn.RAD2DEG*Math.atan(Math.tan(.5*Fn.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=this.near;let e=t*Math.tan(.5*Fn.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i;const o=this.view;if(null!==this.view&&this.view.enabled){const t=o.fullWidth,a=o.fullHeight;r+=o.offsetX*i/t,e-=o.offsetY*n/a,i*=o.width/t,n*=o.height/a}const a=this.filmOffset;0!==a&&(r+=t*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Zi.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}});const Mo=90,Eo=1;function So(t,e,n){if(Zi.call(this),this.type="CubeCamera",!0!==n.isWebGLCubeRenderTarget)return void console.error("THREE.CubeCamera: The constructor now expects an instance of WebGLCubeRenderTarget as third parameter.");this.renderTarget=n;const i=new _o(Mo,Eo,t,e);i.layers=this.layers,i.up.set(0,-1,0),i.lookAt(new Jn(1,0,0)),this.add(i);const r=new _o(Mo,Eo,t,e);r.layers=this.layers,r.up.set(0,-1,0),r.lookAt(new Jn(-1,0,0)),this.add(r);const o=new _o(Mo,Eo,t,e);o.layers=this.layers,o.up.set(0,0,1),o.lookAt(new Jn(0,1,0)),this.add(o);const a=new _o(Mo,Eo,t,e);a.layers=this.layers,a.up.set(0,0,-1),a.lookAt(new Jn(0,-1,0)),this.add(a);const s=new _o(Mo,Eo,t,e);s.layers=this.layers,s.up.set(0,-1,0),s.lookAt(new Jn(0,0,1)),this.add(s);const l=new _o(Mo,Eo,t,e);l.layers=this.layers,l.up.set(0,-1,0),l.lookAt(new Jn(0,0,-1)),this.add(l),this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();const c=t.xr.enabled,u=t.getRenderTarget();t.xr.enabled=!1;const h=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,t.setRenderTarget(n,0),t.render(e,i),t.setRenderTarget(n,1),t.render(e,r),t.setRenderTarget(n,2),t.render(e,o),t.setRenderTarget(n,3),t.render(e,a),t.setRenderTarget(n,4),t.render(e,s),n.texture.generateMipmaps=h,t.setRenderTarget(n,5),t.render(e,l),t.setRenderTarget(u),t.xr.enabled=c}}function To(t,e,n,i,r,o,a,s,l,c){t=void 0!==t?t:[],e=void 0!==e?e:ot,a=void 0!==a?a:zt,Wn.call(this,t,e,n,i,r,o,a,s,l,c),this.flipY=!1,this._needsFlipEnvMap=!0}So.prototype=Object.create(Zi.prototype),So.prototype.constructor=So,To.prototype=Object.create(Wn.prototype),To.prototype.constructor=To,To.prototype.isCubeTexture=!0,Object.defineProperty(To.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}});class Ao extends Yn{constructor(t,e,n){Number.isInteger(e)&&(console.warn("THREE.WebGLCubeRenderTarget: constructor signature is now WebGLCubeRenderTarget( size, options )"),e=n),super(t,t,e),Object.defineProperty(this,"isWebGLCubeRenderTarget",{value:!0}),e=e||{},this.texture=new To(void 0,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.encoding),this.texture._needsFlipEnvMap=!1}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.format=Bt,this.texture.encoding=e.encoding,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:"\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",fragmentShader:"\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t"},i=new fo(5,5,5),r=new xo({name:"CubemapFromEquirect",uniforms:mo(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:m,blending:b});r.uniforms.tEquirect.value=e;const o=new uo(i,r),a=e.minFilter;e.minFilter===_t&&(e.minFilter=bt);const s=new So(1,10,this);return s.update(t,o),e.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(t,e,n,i){const r=t.getRenderTarget();for(let o=0;o<6;o++)t.setRenderTarget(this,o),t.clear(e,n,i);t.setRenderTarget(r)}}function Co(t,e,n,i,r,o,a,s,l,c,u,h){Wn.call(this,null,o,a,s,l,c,i,r,u,h),this.image={data:t||null,width:e||1,height:n||1},this.magFilter=void 0!==l?l:ft,this.minFilter=void 0!==c?c:ft,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.needsUpdate=!0}Co.prototype=Object.create(Wn.prototype),Co.prototype.constructor=Co,Co.prototype.isDataTexture=!0;const Lo=new vi,Po=new Jn;class Oo{constructor(t,e,n,i,r,o){this.planes=[void 0!==t?t:new tr,void 0!==e?e:new tr,void 0!==n?n:new tr,void 0!==i?i:new tr,void 0!==r?r:new tr,void 0!==o?o:new tr]}set(t,e,n,i,r,o){const a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this}clone(){return(new this.constructor).copy(this)}copy(t){const e=this.planes;for(let n=0;n<6;n++)e[n].copy(t.planes[n]);return this}setFromProjectionMatrix(t){const e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-i,u-s,f-h,y-m).normalize(),e[1].setComponents(a+i,u+s,f+h,y+m).normalize(),e[2].setComponents(a+r,u+l,f+d,y+v).normalize(),e[3].setComponents(a-r,u-l,f-d,y-v).normalize(),e[4].setComponents(a-o,u-c,f-p,y-g).normalize(),e[5].setComponents(a+o,u+c,f+p,y+g).normalize(),this}intersectsObject(t){const e=t.geometry;return null===e.boundingSphere&&e.computeBoundingSphere(),Lo.copy(e.boundingSphere).applyMatrix4(t.matrixWorld),this.intersectsSphere(Lo)}intersectsSprite(t){return Lo.center.set(0,0,0),Lo.radius=.7071067811865476,Lo.applyMatrix4(t.matrixWorld),this.intersectsSphere(Lo)}intersectsSphere(t){const e=this.planes,n=t.center,i=-t.radius;for(let r=0;r<6;r++){const t=e[r].distanceToPoint(n);if(t<i)return!1}return!0}intersectsBox(t){const e=this.planes;for(let n=0;n<6;n++){const i=e[n];if(Po.x=i.normal.x>0?t.max.x:t.min.x,Po.y=i.normal.y>0?t.max.y:t.min.y,Po.z=i.normal.z>0?t.max.z:t.min.z,i.distanceToPoint(Po)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}function Ro(){let t=null,e=!1,n=null,i=null;function r(e,o){n(e,o),i=t.requestAnimationFrame(r)}return{start:function(){!0!==e&&null!==n&&(i=t.requestAnimationFrame(r),e=!0)},stop:function(){t.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function ko(t,e){const n=e.isWebGL2,i=new WeakMap;function r(e,i){const r=e.array,o=e.usage,a=t.createBuffer();t.bindBuffer(i,a),t.bufferData(i,r,o),e.onUploadCallback();let s=5126;return r instanceof Float32Array?s=5126:r instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):r instanceof Uint16Array?e.isFloat16BufferAttribute?n?s=5131:console.warn("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2."):s=5123:r instanceof Int16Array?s=5122:r instanceof Uint32Array?s=5125:r instanceof Int32Array?s=5124:r instanceof Int8Array?s=5120:r instanceof Uint8Array&&(s=5121),{buffer:a,type:s,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version}}function o(e,i,r){const o=i.array,a=i.updateRange;t.bindBuffer(r,e),-1===a.count?t.bufferSubData(r,0,o):(n?t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o,a.offset,a.count):t.bufferSubData(r,a.offset*o.BYTES_PER_ELEMENT,o.subarray(a.offset,a.offset+a.count)),a.count=-1)}function a(t){return t.isInterleavedBufferAttribute&&(t=t.data),i.get(t)}function s(e){e.isInterleavedBufferAttribute&&(e=e.data);const n=i.get(e);n&&(t.deleteBuffer(n.buffer),i.delete(e))}function l(t,e){if(t.isGLBufferAttribute){const e=i.get(t);return void((!e||e.version<t.version)&&i.set(t,{buffer:t.buffer,type:t.type,bytesPerElement:t.elementSize,version:t.version}))}t.isInterleavedBufferAttribute&&(t=t.data);const n=i.get(t);void 0===n?i.set(t,r(t,e)):n.version<t.version&&(o(n.buffer,t,e),n.version=t.version)}return{get:a,remove:s,update:l}}class Do extends $r{constructor(t=1,e=1,n=1,i=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i};const r=t/2,o=e/2,a=Math.floor(n),s=Math.floor(i),l=a+1,c=s+1,u=t/a,h=e/s,d=[],p=[],f=[],m=[];for(let v=0;v<c;v++){const t=v*h-o;for(let e=0;e<l;e++){const n=e*u-r;p.push(n,-t,0),f.push(0,0,1),m.push(e/a),m.push(1-v/s)}}for(let v=0;v<s;v++)for(let t=0;t<a;t++){const e=t+l*v,n=t+l*(v+1),i=t+1+l*(v+1),r=t+1+l*v;d.push(e,n,r),d.push(n,i,r)}this.setIndex(d),this.setAttribute("position",new Dr(p,3)),this.setAttribute("normal",new Dr(f,3)),this.setAttribute("uv",new Dr(m,2))}}var Io="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",No="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",zo="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",Bo="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",Fo="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",jo="vec3 transformed = vec3( position );",Ho="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",Uo="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie(float roughness, float NoH) {\n\tfloat invAlpha = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125);\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\nfloat V_Neubelt(float NoV, float NoL) {\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n}\n#endif",Vo="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",Go="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#pragma unroll_loop_end\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",Wo="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",$o="#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",qo="#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",Yo="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",Xo="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",Zo="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvarying vec3 vColor;\n#endif",Jo="#if defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor.xyz *= color.xyz;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif",Ko="#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}",Qo="#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_maxMipLevel 8.0\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_maxTileSize 256.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\tfloat texelSize = 1.0 / ( 3.0 * cubeUV_maxTileSize );\n\t\tvec2 uv = getUV( direction, face ) * ( faceSize - 1.0 );\n\t\tvec2 f = fract( uv );\n\t\tuv += 0.5 - f;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tif ( mipInt < cubeUV_maxMipLevel ) {\n\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t}\n\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\tuv.x += 3.0 * max( 0.0, cubeUV_maxTileSize - 2.0 * faceSize );\n\t\tuv *= texelSize;\n\t\tvec3 tl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x += texelSize;\n\t\tvec3 tr = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.y += texelSize;\n\t\tvec3 br = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tuv.x -= texelSize;\n\t\tvec3 bl = envMapTexelToLinear( texture2D( envMap, uv ) ).rgb;\n\t\tvec3 tm = mix( tl, tr, f.x );\n\t\tvec3 bm = mix( bl, br, f.x );\n\t\treturn mix( tm, bm, f.y );\n\t}\n\t#define r0 1.0\n\t#define v0 0.339\n\t#define m0 - 2.0\n\t#define r1 0.8\n\t#define v1 0.276\n\t#define m1 - 1.0\n\t#define r4 0.4\n\t#define v4 0.046\n\t#define m4 2.0\n\t#define r5 0.305\n\t#define v5 0.016\n\t#define m5 3.0\n\t#define r6 0.21\n\t#define v6 0.0038\n\t#define m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= r1 ) {\n\t\t\tmip = ( r0 - roughness ) * ( m1 - m0 ) / ( r0 - r1 ) + m0;\n\t\t} else if ( roughness >= r4 ) {\n\t\t\tmip = ( r1 - roughness ) * ( m4 - m1 ) / ( r1 - r4 ) + m1;\n\t\t} else if ( roughness >= r5 ) {\n\t\t\tmip = ( r4 - roughness ) * ( m5 - m4 ) / ( r4 - r5 ) + m4;\n\t\t} else if ( roughness >= r6 ) {\n\t\t\tmip = ( r5 - roughness ) * ( m6 - m5 ) / ( r5 - r6 ) + m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), m0, cubeUV_maxMipLevel );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",ta="vec3 transformedNormal = objectNormal;\n#ifdef USE_INSTANCING\n\tmat3 m = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\ttransformedNormal = m * transformedNormal;\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",ea="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",na="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n#endif",ia="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",ra="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",oa="gl_FragColor = linearToOutputTexel( gl_FragColor );",aa="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value ) {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",sa="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\tenvColor = envMapTexelToLinear( envColor );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",la="#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",ca="#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",ua="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",ha="#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",da="#ifdef USE_FOG\n\tfogDepth = - mvPosition.z;\n#endif",pa="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",fa="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",ma="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",va="#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\t#else\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t#endif\n}",ga="#ifdef USE_LIGHTMAP\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n#endif",ya="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",ba="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\nvIndirectFront += getAmbientLightIrradiance( ambientLightColor );\nvIndirectFront += getLightProbeIrradiance( lightProbe, geometry );\n#ifdef DOUBLE_SIDED\n\tvIndirectBack += getAmbientLightIrradiance( ambientLightColor );\n\tvIndirectBack += getLightProbeIrradiance( lightProbe, backGeometry );\n#endif\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n#endif",xa="uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",wa="#if defined( USE_ENVMAP )\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",_a="ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",Ma="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n#define Material_LightProbeLOD( material )\t(0)",Ea="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Sa="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",Ta="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );material.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n#ifdef REFLECTIVITY\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#endif\n#ifdef CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheen;\n#endif",Aa="struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat specularRoughness;\n\tvec3 specularColor;\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tccIrradiance *= PI;\n\t\t#endif\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef CLEARCOAT\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\t#else\n\t\tfloat clearcoatDHR = 0.0;\n\t#endif\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Ca="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n#ifdef CLEARCOAT\n\tgeometry.clearcoatNormal = clearcoatNormal;\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",La="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\t#ifdef CLEARCOAT\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\t#endif\n#endif",Pa="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n#endif",Oa="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",Ra="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",ka="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Da="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\t#else\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\t\tgl_Position.z *= gl_Position.w;\n\t\t}\n\t#endif\n#endif",Ia="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",Na="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",za="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n#endif\n#ifdef USE_MAP\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",Ba="#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\tuniform mat3 uvTransform;\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Fa="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ja="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",Ha="#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n#endif",Ua="#ifdef USE_MORPHTARGETS\n\tuniform float morphTargetBaseInfluence;\n\t#ifndef USE_MORPHNORMALS\n\t\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\t\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",Va="#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\t\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\t\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\t\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\t\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",Ga="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t#endif\n\t#endif\n#endif\nvec3 geometryNormal = normal;",Wa="#ifdef OBJECTSPACE_NORMALMAP\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( TANGENTSPACE_NORMALMAP )\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\t#ifdef USE_TANGENT\n\t\tnormal = normalize( vTBN * mapN );\n\t#else\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",$a="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef OBJECTSPACE_NORMALMAP\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\t\tmat3 tsn = mat3( S, T, N );\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\treturn normalize( tsn * mapN );\n\t}\n#endif",qa="#ifdef CLEARCOAT\n\tvec3 clearcoatNormal = geometryNormal;\n#endif",Ya="#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\t#ifdef USE_TANGENT\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\t#else\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\t#endif\n#endif",Xa="#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif",Za="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",Ja="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",Ka="vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",Qa="#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",ts="#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",es="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",ns="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",is="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",rs="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",os="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0 || NUM_SPOT_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0\n\t\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\tvec4 shadowWorldPosition;\n\t#endif\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n#endif",as="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",ss="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",ls="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",cs="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",us="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",hs="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",ds="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",ps="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",fs="#ifndef saturate\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",ms="#ifdef USE_TRANSMISSIONMAP\n\ttotalTransmission *= texture2D( transmissionMap, vUv ).r;\n#endif",vs="#ifdef USE_TRANSMISSIONMAP\n\tuniform sampler2D transmissionMap;\n#endif",gs="#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\tvarying vec2 vUv;\n#endif",ys="#ifdef USE_UV\n\t#ifdef UVS_VERTEX_ONLY\n\t\tvec2 vUv;\n\t#else\n\t\tvarying vec2 vUv;\n\t#endif\n\tuniform mat3 uvTransform;\n#endif",bs="#ifdef USE_UV\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",xs="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",ws="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\tuniform mat3 uv2Transform;\n#endif",_s="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n#endif",Ms="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",Es="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ss="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ts="#include <envmap_common_pars_fragment>\nuniform float opacity;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",As="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",Cs="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#endif\n}",Ls="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",Ps="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",Os="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Rs="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",ks="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Ds="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Is="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Ns="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",zs="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",Bs="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Fs="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",js="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Hs="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Us="#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Vs="#define TOON\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Gs="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ws="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",$s="#define STANDARD\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSMISSION\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef TRANSMISSION\n\tuniform float transmission;\n#endif\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <transmissionmap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#ifdef TRANSMISSION\n\t\tfloat totalTransmission = transmission;\n\t#endif\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <transmissionmap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#ifdef TRANSMISSION\n\t\tdiffuseColor.a *= mix( saturate( 1. - totalTransmission + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) ), 1.0, metalness );\n\t#endif\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",qs="#define STANDARD\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Ys="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",Xs="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",Zs="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",Js="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",Ks="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Qs="#include <common>\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",tl="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",el="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}";const nl={alphamap_fragment:Io,alphamap_pars_fragment:No,alphatest_fragment:zo,aomap_fragment:Bo,aomap_pars_fragment:Fo,begin_vertex:jo,beginnormal_vertex:Ho,bsdfs:Uo,bumpmap_pars_fragment:Vo,clipping_planes_fragment:Go,clipping_planes_pars_fragment:Wo,clipping_planes_pars_vertex:$o,clipping_planes_vertex:qo,color_fragment:Yo,color_pars_fragment:Xo,color_pars_vertex:Zo,color_vertex:Jo,common:Ko,cube_uv_reflection_fragment:Qo,defaultnormal_vertex:ta,displacementmap_pars_vertex:ea,displacementmap_vertex:na,emissivemap_fragment:ia,emissivemap_pars_fragment:ra,encodings_fragment:oa,encodings_pars_fragment:aa,envmap_fragment:sa,envmap_common_pars_fragment:la,envmap_pars_fragment:ca,envmap_pars_vertex:ua,envmap_physical_pars_fragment:wa,envmap_vertex:ha,fog_vertex:da,fog_pars_vertex:pa,fog_fragment:fa,fog_pars_fragment:ma,gradientmap_pars_fragment:va,lightmap_fragment:ga,lightmap_pars_fragment:ya,lights_lambert_vertex:ba,lights_pars_begin:xa,lights_toon_fragment:_a,lights_toon_pars_fragment:Ma,lights_phong_fragment:Ea,lights_phong_pars_fragment:Sa,lights_physical_fragment:Ta,lights_physical_pars_fragment:Aa,lights_fragment_begin:Ca,lights_fragment_maps:La,lights_fragment_end:Pa,logdepthbuf_fragment:Oa,logdepthbuf_pars_fragment:Ra,logdepthbuf_pars_vertex:ka,logdepthbuf_vertex:Da,map_fragment:Ia,map_pars_fragment:Na,map_particle_fragment:za,map_particle_pars_fragment:Ba,metalnessmap_fragment:Fa,metalnessmap_pars_fragment:ja,morphnormal_vertex:Ha,morphtarget_pars_vertex:Ua,morphtarget_vertex:Va,normal_fragment_begin:Ga,normal_fragment_maps:Wa,normalmap_pars_fragment:$a,clearcoat_normal_fragment_begin:qa,clearcoat_normal_fragment_maps:Ya,clearcoat_pars_fragment:Xa,packing:Za,premultiplied_alpha_fragment:Ja,project_vertex:Ka,dithering_fragment:Qa,dithering_pars_fragment:ts,roughnessmap_fragment:es,roughnessmap_pars_fragment:ns,shadowmap_pars_fragment:is,shadowmap_pars_vertex:rs,shadowmap_vertex:os,shadowmask_pars_fragment:as,skinbase_vertex:ss,skinning_pars_vertex:ls,skinning_vertex:cs,skinnormal_vertex:us,specularmap_fragment:hs,specularmap_pars_fragment:ds,tonemapping_fragment:ps,tonemapping_pars_fragment:fs,transmissionmap_fragment:ms,transmissionmap_pars_fragment:vs,uv_pars_fragment:gs,uv_pars_vertex:ys,uv_vertex:bs,uv2_pars_fragment:xs,uv2_pars_vertex:ws,uv2_vertex:_s,worldpos_vertex:Ms,background_frag:Es,background_vert:Ss,cube_frag:Ts,cube_vert:As,depth_frag:Cs,depth_vert:Ls,distanceRGBA_frag:Ps,distanceRGBA_vert:Os,equirect_frag:Rs,equirect_vert:ks,linedashed_frag:Ds,linedashed_vert:Is,meshbasic_frag:Ns,meshbasic_vert:zs,meshlambert_frag:Bs,meshlambert_vert:Fs,meshmatcap_frag:js,meshmatcap_vert:Hs,meshtoon_frag:Us,meshtoon_vert:Vs,meshphong_frag:Gs,meshphong_vert:Ws,meshphysical_frag:$s,meshphysical_vert:qs,normal_frag:Ys,normal_vert:Xs,points_frag:Zs,points_vert:Js,shadow_frag:Ks,shadow_vert:Qs,sprite_frag:tl,sprite_vert:el},il={common:{diffuse:{value:new yr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new Hn},uv2Transform:{value:new Hn},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new jn(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new yr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new yr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}},sprite:{diffuse:{value:new yr(15658734)},opacity:{value:1},center:{value:new jn(.5,.5)},rotation:{value:0},map:{value:null},alphaMap:{value:null},uvTransform:{value:new Hn}}},rl={basic:{uniforms:vo([il.common,il.specularmap,il.envmap,il.aomap,il.lightmap,il.fog]),vertexShader:nl.meshbasic_vert,fragmentShader:nl.meshbasic_frag},lambert:{uniforms:vo([il.common,il.specularmap,il.envmap,il.aomap,il.lightmap,il.emissivemap,il.fog,il.lights,{emissive:{value:new yr(0)}}]),vertexShader:nl.meshlambert_vert,fragmentShader:nl.meshlambert_frag},phong:{uniforms:vo([il.common,il.specularmap,il.envmap,il.aomap,il.lightmap,il.emissivemap,il.bumpmap,il.normalmap,il.displacementmap,il.fog,il.lights,{emissive:{value:new yr(0)},specular:{value:new yr(1118481)},shininess:{value:30}}]),vertexShader:nl.meshphong_vert,fragmentShader:nl.meshphong_frag},standard:{uniforms:vo([il.common,il.envmap,il.aomap,il.lightmap,il.emissivemap,il.bumpmap,il.normalmap,il.displacementmap,il.roughnessmap,il.metalnessmap,il.fog,il.lights,{emissive:{value:new yr(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:nl.meshphysical_vert,fragmentShader:nl.meshphysical_frag},toon:{uniforms:vo([il.common,il.aomap,il.lightmap,il.emissivemap,il.bumpmap,il.normalmap,il.displacementmap,il.gradientmap,il.fog,il.lights,{emissive:{value:new yr(0)}}]),vertexShader:nl.meshtoon_vert,fragmentShader:nl.meshtoon_frag},matcap:{uniforms:vo([il.common,il.bumpmap,il.normalmap,il.displacementmap,il.fog,{matcap:{value:null}}]),vertexShader:nl.meshmatcap_vert,fragmentShader:nl.meshmatcap_frag},points:{uniforms:vo([il.points,il.fog]),vertexShader:nl.points_vert,fragmentShader:nl.points_frag},dashed:{uniforms:vo([il.common,il.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:nl.linedashed_vert,fragmentShader:nl.linedashed_frag},depth:{uniforms:vo([il.common,il.displacementmap]),vertexShader:nl.depth_vert,fragmentShader:nl.depth_frag},normal:{uniforms:vo([il.common,il.bumpmap,il.normalmap,il.displacementmap,{opacity:{value:1}}]),vertexShader:nl.normal_vert,fragmentShader:nl.normal_frag},sprite:{uniforms:vo([il.sprite,il.fog]),vertexShader:nl.sprite_vert,fragmentShader:nl.sprite_frag},background:{uniforms:{uvTransform:{value:new Hn},t2D:{value:null}},vertexShader:nl.background_vert,fragmentShader:nl.background_frag},cube:{uniforms:vo([il.envmap,{opacity:{value:1}}]),vertexShader:nl.cube_vert,fragmentShader:nl.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:nl.equirect_vert,fragmentShader:nl.equirect_frag},distanceRGBA:{uniforms:vo([il.common,il.displacementmap,{referencePosition:{value:new Jn},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:nl.distanceRGBA_vert,fragmentShader:nl.distanceRGBA_frag},shadow:{uniforms:vo([il.lights,il.fog,{color:{value:new yr(0)},opacity:{value:1}}]),vertexShader:nl.shadow_vert,fragmentShader:nl.shadow_frag}};function ol(t,e,n,i,r){const o=new yr(0);let a,s,l=0,c=null,u=0,h=null;function d(n,r,d,v){let g=!0===r.isScene?r.background:null;g&&g.isTexture&&(g=e.get(g));const y=t.xr,b=y.getSession&&y.getSession();b&&"additive"===b.environmentBlendMode&&(g=null),null===g?p(o,l):g&&g.isColor&&(p(g,1),v=!0),(t.autoClear||v)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),g&&(g.isCubeTexture||g.isWebGLCubeRenderTarget||g.mapping===ct)?(void 0===s&&(s=new uo(new fo(1,1,1),new xo({name:"BackgroundCubeMaterial",uniforms:mo(rl.cube.uniforms),vertexShader:rl.cube.vertexShader,fragmentShader:rl.cube.fragmentShader,side:m,depthTest:!1,depthWrite:!1,fog:!1})),s.geometry.deleteAttribute("normal"),s.geometry.deleteAttribute("uv"),s.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(s.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),i.update(s)),g.isWebGLCubeRenderTarget&&(g=g.texture),s.material.uniforms.envMap.value=g,s.material.uniforms.flipEnvMap.value=g.isCubeTexture&&g._needsFlipEnvMap?-1:1,c===g&&u===g.version&&h===t.toneMapping||(s.material.needsUpdate=!0,c=g,u=g.version,h=t.toneMapping),n.unshift(s,s.geometry,s.material,0,0,null)):g&&g.isTexture&&(void 0===a&&(a=new uo(new Do(2,2),new xo({name:"BackgroundMaterial",uniforms:mo(rl.background.uniforms),vertexShader:rl.background.vertexShader,fragmentShader:rl.background.fragmentShader,side:f,depthTest:!1,depthWrite:!1,fog:!1})),a.geometry.deleteAttribute("normal"),Object.defineProperty(a.material,"map",{get:function(){return this.uniforms.t2D.value}}),i.update(a)),a.material.uniforms.t2D.value=g,!0===g.matrixAutoUpdate&&g.updateMatrix(),a.material.uniforms.uvTransform.value.copy(g.matrix),c===g&&u===g.version&&h===t.toneMapping||(a.material.needsUpdate=!0,c=g,u=g.version,h=t.toneMapping),n.unshift(a,a.geometry,a.material,0,0,null))}function p(t,e){n.buffers.color.setClear(t.r,t.g,t.b,e,r)}return{getClearColor:function(){return o},setClearColor:function(t,e=1){o.set(t),l=e,p(o,l)},getClearAlpha:function(){return l},setClearAlpha:function(t){l=t,p(o,l)},render:d}}function al(t,e,n,i){const r=t.getParameter(34921),o=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||null!==o,s={},l=m(null);let c=l;function u(e,i,r,o,s){let l=!1;if(a){const t=f(o,r,i);c!==t&&(c=t,d(c.object)),l=v(o,s),l&&g(o,s)}else{const t=!0===i.wireframe;c.geometry===o.id&&c.program===r.id&&c.wireframe===t||(c.geometry=o.id,c.program=r.id,c.wireframe=t,l=!0)}!0===e.isInstancedMesh&&(l=!0),null!==s&&n.update(s,34963),l&&(M(e,i,r,o),null!==s&&t.bindBuffer(34963,n.get(s).buffer))}function h(){return i.isWebGL2?t.createVertexArray():o.createVertexArrayOES()}function d(e){return i.isWebGL2?t.bindVertexArray(e):o.bindVertexArrayOES(e)}function p(e){return i.isWebGL2?t.deleteVertexArray(e):o.deleteVertexArrayOES(e)}function f(t,e,n){const i=!0===n.wireframe;let r=s[t.id];void 0===r&&(r={},s[t.id]=r);let o=r[e.id];void 0===o&&(o={},r[e.id]=o);let a=o[i];return void 0===a&&(a=m(h()),o[i]=a),a}function m(t){const e=[],n=[],i=[];for(let o=0;o<r;o++)e[o]=0,n[o]=0,i[o]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:n,attributeDivisors:i,object:t,attributes:{},index:null}}function v(t,e){const n=c.attributes,i=t.attributes;let r=0;for(const o in i){const t=n[o],e=i[o];if(void 0===t)return!0;if(t.attribute!==e)return!0;if(t.data!==e.data)return!0;r++}return c.attributesNum!==r||c.index!==e}function g(t,e){const n={},i=t.attributes;let r=0;for(const o in i){const t=i[o],e={};e.attribute=t,t.data&&(e.data=t.data),n[o]=e,r++}c.attributes=n,c.attributesNum=r,c.index=e}function y(){const t=c.newAttributes;for(let e=0,n=t.length;e<n;e++)t[e]=0}function b(t){x(t,0)}function x(n,r){const o=c.newAttributes,a=c.enabledAttributes,s=c.attributeDivisors;if(o[n]=1,0===a[n]&&(t.enableVertexAttribArray(n),a[n]=1),s[n]!==r){const o=i.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),s[n]=r}}function w(){const e=c.newAttributes,n=c.enabledAttributes;for(let i=0,r=n.length;i<r;i++)n[i]!==e[i]&&(t.disableVertexAttribArray(i),n[i]=0)}function _(e,n,r,o,a,s){!0!==i.isWebGL2||5124!==r&&5125!==r?t.vertexAttribPointer(e,n,r,o,a,s):t.vertexAttribIPointer(e,n,r,a,s)}function M(r,o,a,s){if(!1===i.isWebGL2&&(r.isInstancedMesh||s.isInstancedBufferGeometry)&&null===e.get("ANGLE_instanced_arrays"))return;y();const l=s.attributes,c=a.getAttributes(),u=o.defaultAttributeValues;for(const e in c){const i=c[e];if(i>=0){const o=l[e];if(void 0!==o){const e=o.normalized,r=o.itemSize,a=n.get(o);if(void 0===a)continue;const l=a.buffer,c=a.type,u=a.bytesPerElement;if(o.isInterleavedBufferAttribute){const n=o.data,a=n.stride,h=o.offset;n&&n.isInstancedInterleavedBuffer?(x(i,n.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=n.meshPerAttribute*n.count)):b(i),t.bindBuffer(34962,l),_(i,r,c,e,a*u,h*u)}else o.isInstancedBufferAttribute?(x(i,o.meshPerAttribute),void 0===s._maxInstanceCount&&(s._maxInstanceCount=o.meshPerAttribute*o.count)):b(i),t.bindBuffer(34962,l),_(i,r,c,e,0,0)}else if("instanceMatrix"===e){const e=n.get(r.instanceMatrix);if(void 0===e)continue;const o=e.buffer,a=e.type;x(i+0,1),x(i+1,1),x(i+2,1),x(i+3,1),t.bindBuffer(34962,o),t.vertexAttribPointer(i+0,4,a,!1,64,0),t.vertexAttribPointer(i+1,4,a,!1,64,16),t.vertexAttribPointer(i+2,4,a,!1,64,32),t.vertexAttribPointer(i+3,4,a,!1,64,48)}else if("instanceColor"===e){const e=n.get(r.instanceColor);if(void 0===e)continue;const o=e.buffer,a=e.type;x(i,1),t.bindBuffer(34962,o),t.vertexAttribPointer(i,3,a,!1,12,0)}else if(void 0!==u){const n=u[e];if(void 0!==n)switch(n.length){case 2:t.vertexAttrib2fv(i,n);break;case 3:t.vertexAttrib3fv(i,n);break;case 4:t.vertexAttrib4fv(i,n);break;default:t.vertexAttrib1fv(i,n)}}}}w()}function E(){A();for(const t in s){const e=s[t];for(const t in e){const n=e[t];for(const t in n)p(n[t].object),delete n[t];delete e[t]}delete s[t]}}function S(t){if(void 0===s[t.id])return;const e=s[t.id];for(const n in e){const t=e[n];for(const e in t)p(t[e].object),delete t[e];delete e[n]}delete s[t.id]}function T(t){for(const e in s){const n=s[e];if(void 0===n[t.id])continue;const i=n[t.id];for(const t in i)p(i[t].object),delete i[t];delete n[t.id]}}function A(){C(),c!==l&&(c=l,d(c.object))}function C(){l.geometry=null,l.program=null,l.wireframe=!1}return{setup:u,reset:A,resetDefaultState:C,dispose:E,releaseStatesOfGeometry:S,releaseStatesOfProgram:T,initAttributes:y,enableAttribute:b,disableUnusedAttributes:w}}function sl(t,e,n,i){const r=i.isWebGL2;let o;function a(t){o=t}function s(e,i){t.drawArrays(o,e,i),n.update(i,o,1)}function l(i,a,s){if(0===s)return;let l,c;if(r)l=t,c="drawArraysInstanced";else if(l=e.get("ANGLE_instanced_arrays"),c="drawArraysInstancedANGLE",null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[c](o,i,a,s),n.update(a,o,s)}this.setMode=a,this.render=s,this.renderInstances=l}function ll(t,e,n){let i;function r(){if(void 0!==i)return i;const n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}const a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext||"undefined"!==typeof WebGL2ComputeRenderingContext&&t instanceof WebGL2ComputeRenderingContext;let s=void 0!==n.precision?n.precision:"highp";const l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);const c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),v=t.getParameter(36348),g=t.getParameter(36349),y=h>0,b=a||!!e.get("OES_texture_float"),x=y&&b,w=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:r,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}function cl(t){const e=this;let n=null,i=0,r=!1,o=!1;const a=new tr,s=new Hn,l={value:null,needsUpdate:!1};function c(){l.value!==n&&(l.value=n,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(t,n,i,r){const o=null!==t?t.length:0;let c=null;if(0!==o){if(c=l.value,!0!==r||null===c){const e=i+4*o,r=n.matrixWorldInverse;s.getNormalMatrix(r),(null===c||c.length<e)&&(c=new Float32Array(e));for(let n=0,l=i;n!==o;++n,l+=4)a.copy(t[n]).applyMatrix4(r,s),a.normal.toArray(c,l),c[l+3]=a.constant}l.value=c,l.needsUpdate=!0}return e.numPlanes=o,e.numIntersection=0,c}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e,o){const a=0!==t.length||e||0!==i||r;return r=e,n=u(t,o,0),i=t.length,a},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1,c()},this.setState=function(e,a,s){const h=e.clippingPlanes,d=e.clipIntersection,p=e.clipShadows,f=t.get(e);if(!r||null===h||0===h.length||o&&!p)o?u(null):c();else{const t=o?0:i,e=4*t;let r=f.clippingState||null;l.value=r,r=u(h,a,e,s);for(let i=0;i!==e;++i)r[i]=n[i];f.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function ul(t){let e=new WeakMap;function n(t,e){return e===st?t.mapping=ot:e===lt&&(t.mapping=at),t}function i(i){if(i&&i.isTexture){const o=i.mapping;if(o===st||o===lt){if(e.has(i)){const t=e.get(i).texture;return n(t,i.mapping)}{const o=i.image;if(o&&o.height>0){const a=t.getRenderList(),s=t.getRenderTarget(),l=new Ao(o.height/2);return l.fromEquirectangularTexture(t,i),e.set(i,l),t.setRenderTarget(s),t.setRenderList(a),i.addEventListener("dispose",r),n(l.texture,i.mapping)}return null}}}return i}function r(t){const n=t.target;n.removeEventListener("dispose",r);const i=e.get(n);void 0!==i&&(e.delete(n),i.dispose())}function o(){e=new WeakMap}return{get:i,dispose:o}}function hl(t){const e={};function n(n){if(void 0!==e[n])return e[n];let i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return e[n]=i,i}return{has:function(t){return null!==n(t)},init:function(t){t.isWebGL2?n("EXT_color_buffer_float"):(n("WEBGL_depth_texture"),n("OES_texture_float"),n("OES_texture_half_float"),n("OES_texture_half_float_linear"),n("OES_standard_derivatives"),n("OES_element_index_uint"),n("OES_vertex_array_object"),n("ANGLE_instanced_arrays")),n("OES_texture_float_linear"),n("EXT_color_buffer_half_float")},get:function(t){const e=n(t);return null===e&&console.warn("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function dl(t,e,n,i){const r={},o=new WeakMap;function a(t){const s=t.target;null!==s.index&&e.remove(s.index);for(const n in s.attributes)e.remove(s.attributes[n]);s.removeEventListener("dispose",a),delete r[s.id];const l=o.get(s);l&&(e.remove(l),o.delete(s)),i.releaseStatesOfGeometry(s),!0===s.isInstancedBufferGeometry&&delete s._maxInstanceCount,n.memory.geometries--}function s(t,e){return!0===r[e.id]?e:(e.addEventListener("dispose",a),r[e.id]=!0,n.memory.geometries++,e)}function l(t){const n=t.attributes;for(const r in n)e.update(n[r],34962);const i=t.morphAttributes;for(const r in i){const t=i[r];for(let n=0,i=t.length;n<i;n++)e.update(t[n],34962)}}function c(t){const n=[],i=t.index,r=t.attributes.position;let a=0;if(null!==i){const t=i.array;a=i.version;for(let e=0,i=t.length;e<i;e+=3){const i=t[e+0],r=t[e+1],o=t[e+2];n.push(i,r,r,o,o,i)}}else{const t=r.array;a=r.version;for(let e=0,i=t.length/3-1;e<i;e+=3){const t=e+0,i=e+1,r=e+2;n.push(t,i,i,r,r,t)}}const s=new(Nr(n)>65535?Rr:Pr)(n,1);s.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,s)}function u(t){const e=o.get(t);if(e){const n=t.index;null!==n&&e.version<n.version&&c(t)}else c(t);return o.get(t)}return{get:s,update:l,getWireframeAttribute:u}}function pl(t,e,n,i){const r=i.isWebGL2;let o,a,s;function l(t){o=t}function c(t){a=t.type,s=t.bytesPerElement}function u(e,i){t.drawElements(o,i,a,e*s),n.update(i,o,1)}function h(i,l,c){if(0===c)return;let u,h;if(r)u=t,h="drawElementsInstanced";else if(u=e.get("ANGLE_instanced_arrays"),h="drawElementsInstancedANGLE",null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");u[h](o,l,a,i*s,c),n.update(l,o,c)}this.setMode=l,this.setIndex=c,this.render=u,this.renderInstances=h}function fl(t){const e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,e,i){switch(n.calls++,e){case 4:n.triangles+=i*(t/3);break;case 1:n.lines+=i*(t/2);break;case 3:n.lines+=i*(t-1);break;case 2:n.lines+=i*t;break;case 0:n.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function ml(t,e){return t[0]-e[0]}function vl(t,e){return Math.abs(e[1])-Math.abs(t[1])}function gl(t){const e={},n=new Float32Array(8),i=[];for(let o=0;o<8;o++)i[o]=[o,0];function r(r,o,a,s){const l=r.morphTargetInfluences,c=void 0===l?0:l.length;let u=e[o.id];if(void 0===u){u=[];for(let t=0;t<c;t++)u[t]=[t,0];e[o.id]=u}for(let t=0;t<c;t++){const e=u[t];e[0]=t,e[1]=l[t]}u.sort(vl);for(let t=0;t<8;t++)t<c&&u[t][1]?(i[t][0]=u[t][0],i[t][1]=u[t][1]):(i[t][0]=Number.MAX_SAFE_INTEGER,i[t][1]=0);i.sort(ml);const h=a.morphTargets&&o.morphAttributes.position,d=a.morphNormals&&o.morphAttributes.normal;let p=0;for(let t=0;t<8;t++){const e=i[t],r=e[0],a=e[1];r!==Number.MAX_SAFE_INTEGER&&a?(h&&o.getAttribute("morphTarget"+t)!==h[r]&&o.setAttribute("morphTarget"+t,h[r]),d&&o.getAttribute("morphNormal"+t)!==d[r]&&o.setAttribute("morphNormal"+t,d[r]),n[t]=a,p+=a):(h&&!0===o.hasAttribute("morphTarget"+t)&&o.deleteAttribute("morphTarget"+t),d&&!0===o.hasAttribute("morphNormal"+t)&&o.deleteAttribute("morphNormal"+t),n[t]=0)}const f=o.morphTargetsRelative?1:1-p;s.getUniforms().setValue(t,"morphTargetBaseInfluence",f),s.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:r}}function yl(t,e,n,i){let r=new WeakMap;function o(t){const o=i.render.frame,a=t.geometry,l=e.get(t,a);return r.get(l)!==o&&(e.update(l),r.set(l,o)),t.isInstancedMesh&&(!1===t.hasEventListener("dispose",s)&&t.addEventListener("dispose",s),n.update(t.instanceMatrix,34962),null!==t.instanceColor&&n.update(t.instanceColor,34962)),l}function a(){r=new WeakMap}function s(t){const e=t.target;e.removeEventListener("dispose",s),n.remove(e.instanceMatrix),null!==e.instanceColor&&n.remove(e.instanceColor)}return{update:o,dispose:a}}function bl(t=null,e=1,n=1,i=1){Wn.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=ft,this.minFilter=ft,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}function xl(t=null,e=1,n=1,i=1){Wn.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=ft,this.minFilter=ft,this.wrapR=dt,this.generateMipmaps=!1,this.flipY=!1,this.needsUpdate=!0}rl.physical={uniforms:vo([rl.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatNormalScale:{value:new jn(1,1)},clearcoatNormalMap:{value:null},sheen:{value:new yr(0)},transmission:{value:0},transmissionMap:{value:null}}]),vertexShader:nl.meshphysical_vert,fragmentShader:nl.meshphysical_frag},bl.prototype=Object.create(Wn.prototype),bl.prototype.constructor=bl,bl.prototype.isDataTexture2DArray=!0,xl.prototype=Object.create(Wn.prototype),xl.prototype.constructor=xl,xl.prototype.isDataTexture3D=!0;const wl=new Wn,_l=new bl,Ml=new xl,El=new To,Sl=[],Tl=[],Al=new Float32Array(16),Cl=new Float32Array(9),Ll=new Float32Array(4);function Pl(t,e,n){const i=t[0];if(i<=0||i>0)return t;const r=e*n;let o=Sl[r];if(void 0===o&&(o=new Float32Array(r),Sl[r]=o),0!==e){i.toArray(o,0);for(let i=1,r=0;i!==e;++i)r+=n,t[i].toArray(o,r)}return o}function Ol(t,e){if(t.length!==e.length)return!1;for(let n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Rl(t,e){for(let n=0,i=e.length;n<i;n++)t[n]=e[n]}function kl(t,e){let n=Tl[e];void 0===n&&(n=new Int32Array(e),Tl[e]=n);for(let i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function Dl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Il(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Ol(n,e))return;t.uniform2fv(this.addr,e),Rl(n,e)}}function Nl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Ol(n,e))return;t.uniform3fv(this.addr,e),Rl(n,e)}}function zl(t,e){const n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Ol(n,e))return;t.uniform4fv(this.addr,e),Rl(n,e)}}function Bl(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Ol(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Rl(n,e)}else{if(Ol(n,i))return;Ll.set(i),t.uniformMatrix2fv(this.addr,!1,Ll),Rl(n,i)}}function Fl(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Ol(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Rl(n,e)}else{if(Ol(n,i))return;Cl.set(i),t.uniformMatrix3fv(this.addr,!1,Cl),Rl(n,i)}}function jl(t,e){const n=this.cache,i=e.elements;if(void 0===i){if(Ol(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Rl(n,e)}else{if(Ol(n,i))return;Al.set(i),t.uniformMatrix4fv(this.addr,!1,Al),Rl(n,i)}}function Hl(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||wl,r)}function Ul(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||_l,r)}function Vl(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||Ml,r)}function Gl(t,e,n){const i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||El,r)}function Wl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function $l(t,e){const n=this.cache;Ol(n,e)||(t.uniform2iv(this.addr,e),Rl(n,e))}function ql(t,e){const n=this.cache;Ol(n,e)||(t.uniform3iv(this.addr,e),Rl(n,e))}function Yl(t,e){const n=this.cache;Ol(n,e)||(t.uniform4iv(this.addr,e),Rl(n,e))}function Xl(t,e){const n=this.cache;n[0]!==e&&(t.uniform1ui(this.addr,e),n[0]=e)}function Zl(t){switch(t){case 5126:return Dl;case 35664:return Il;case 35665:return Nl;case 35666:return zl;case 35674:return Bl;case 35675:return Fl;case 35676:return jl;case 5124:case 35670:return Wl;case 35667:case 35671:return $l;case 35668:case 35672:return ql;case 35669:case 35673:return Yl;case 5125:return Xl;case 35678:case 36198:case 36298:case 36306:case 35682:return Hl;case 35679:case 36299:case 36307:return Vl;case 35680:case 36300:case 36308:case 36293:return Gl;case 36289:case 36303:case 36311:case 36292:return Ul}}function Jl(t,e){t.uniform1fv(this.addr,e)}function Kl(t,e){t.uniform1iv(this.addr,e)}function Ql(t,e){t.uniform2iv(this.addr,e)}function tc(t,e){t.uniform3iv(this.addr,e)}function ec(t,e){t.uniform4iv(this.addr,e)}function nc(t,e){const n=Pl(e,this.size,2);t.uniform2fv(this.addr,n)}function ic(t,e){const n=Pl(e,this.size,3);t.uniform3fv(this.addr,n)}function rc(t,e){const n=Pl(e,this.size,4);t.uniform4fv(this.addr,n)}function oc(t,e){const n=Pl(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function ac(t,e){const n=Pl(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function sc(t,e){const n=Pl(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function lc(t,e,n){const i=e.length,r=kl(n,i);t.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)n.safeSetTexture2D(e[o]||wl,r[o])}function cc(t,e,n){const i=e.length,r=kl(n,i);t.uniform1iv(this.addr,r);for(let o=0;o!==i;++o)n.safeSetTextureCube(e[o]||El,r[o])}function uc(t){switch(t){case 5126:return Jl;case 35664:return nc;case 35665:return ic;case 35666:return rc;case 35674:return oc;case 35675:return ac;case 35676:return sc;case 5124:case 35670:return Kl;case 35667:case 35671:return Ql;case 35668:case 35672:return tc;case 35669:case 35673:return ec;case 35678:case 36198:case 36298:case 36306:case 35682:return lc;case 35680:case 36300:case 36308:case 36293:return cc}}function hc(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Zl(e.type)}function dc(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=uc(e.type)}function pc(t){this.id=t,this.seq=[],this.map={}}dc.prototype.updateCache=function(t){const e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Rl(e,t)},pc.prototype.setValue=function(t,e,n){const i=this.seq;for(let r=0,o=i.length;r!==o;++r){const o=i[r];o.setValue(t,e[o.id],n)}};const fc=/(\w+)(\])?(\[|\.)?/g;function mc(t,e){t.seq.push(e),t.map[e.id]=e}function vc(t,e,n){const i=t.name,r=i.length;fc.lastIndex=0;while(1){const o=fc.exec(i),a=fc.lastIndex;let s=o[1];const l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){mc(n,void 0===c?new hc(s,t,e):new dc(s,t,e));break}{const t=n.map;let e=t[s];void 0===e&&(e=new pc(s),mc(n,e)),n=e}}}function gc(t,e){this.seq=[],this.map={};const n=t.getProgramParameter(e,35718);for(let i=0;i<n;++i){const n=t.getActiveUniform(e,i),r=t.getUniformLocation(e,n.name);vc(n,r,this)}}function yc(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}gc.prototype.setValue=function(t,e,n,i){const r=this.map[e];void 0!==r&&r.setValue(t,n,i)},gc.prototype.setOptional=function(t,e,n){const i=e[n];void 0!==i&&this.setValue(t,n,i)},gc.upload=function(t,e,n,i){for(let r=0,o=e.length;r!==o;++r){const o=e[r],a=n[o.id];!1!==a.needsUpdate&&o.setValue(t,a.value,i)}},gc.seqWithValue=function(t,e){const n=[];for(let i=0,r=t.length;i!==r;++i){const r=t[i];r.id in e&&n.push(r)}return n};let bc=0;function xc(t){const e=t.split("\n");for(let n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function wc(t){switch(t){case Ze:return["Linear","( value )"];case Je:return["sRGB","( value )"];case Qe:return["RGBE","( value )"];case en:return["RGBM","( value, 7.0 )"];case nn:return["RGBM","( value, 16.0 )"];case rn:return["RGBD","( value, 256.0 )"];case Ke:return["Gamma","( value, float( GAMMA_FACTOR ) )"];case tn:return["LogLuv","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported encoding:",t),["Linear","( value )"]}}function _c(t,e,n){const i=t.getShaderParameter(e,35713),r=t.getShaderInfoLog(e).trim();if(i&&""===r)return"";const o=t.getShaderSource(e);return"THREE.WebGLShader: gl.getShaderInfoLog() "+n+"\n"+r+xc(o)}function Mc(t,e){const n=wc(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function Ec(t,e){const n=wc(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function Sc(t,e){let n;switch(e){case Q:n="Linear";break;case tt:n="Reinhard";break;case et:n="OptimizedCineon";break;case nt:n="ACESFilmic";break;case it:n="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),n="Linear"}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function Tc(t){const e=[t.extensionDerivatives||t.envMapCubeUV||t.bumpMap||t.tangentSpaceNormalMap||t.clearcoatNormalMap||t.flatShading||"physical"===t.shaderID?"#extension GL_OES_standard_derivatives : enable":"",(t.extensionFragDepth||t.logarithmicDepthBuffer)&&t.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",t.extensionDrawBuffers&&t.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(t.extensionShaderTextureLOD||t.envMap)&&t.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""];return e.filter(Lc).join("\n")}function Ac(t){const e=[];for(const n in t){const i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}function Cc(t,e){const n={},i=t.getProgramParameter(e,35721);for(let r=0;r<i;r++){const i=t.getActiveAttrib(e,r),o=i.name;n[o]=t.getAttribLocation(e,o)}return n}function Lc(t){return""!==t}function Pc(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function Oc(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Rc=/^[ \t]*#include +<([\w\d./]+)>/gm;function kc(t){return t.replace(Rc,Dc)}function Dc(t,e){const n=nl[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return kc(n)}const Ic=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g,Nc=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function zc(t){return t.replace(Nc,Fc).replace(Ic,Bc)}function Bc(t,e,n,i){return console.warn("WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead."),Fc(t,e,n,i)}function Fc(t,e,n,i){let r="";for(let o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+o+" ]").replace(/UNROLLED_LOOP_INDEX/g,o);return r}function jc(t){let e="precision "+t.precision+" float;\nprecision "+t.precision+" int;";return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function Hc(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===h?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===d?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===p&&(e="SHADOWMAP_TYPE_VSM"),e}function Uc(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case ot:case at:e="ENVMAP_TYPE_CUBE";break;case ct:case ut:e="ENVMAP_TYPE_CUBE_UV";break}return e}function Vc(t){let e="ENVMAP_MODE_REFLECTION";if(t.envMap)switch(t.envMapMode){case at:case ut:e="ENVMAP_MODE_REFRACTION";break}return e}function Gc(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case X:e="ENVMAP_BLENDING_MULTIPLY";break;case Z:e="ENVMAP_BLENDING_MIX";break;case J:e="ENVMAP_BLENDING_ADD";break}return e}function Wc(t,e,n,i){const r=t.getContext(),o=n.defines;let a=n.vertexShader,s=n.fragmentShader;const l=Hc(n),c=Uc(n),u=Vc(n),h=Gc(n),d=t.gammaFactor>0?t.gammaFactor:1,p=n.isWebGL2?"":Tc(n),f=Ac(o),m=r.createProgram();let v,g,y=n.glslVersion?"#version "+n.glslVersion+"\n":"";n.isRawShaderMaterial?(v=[f].filter(Lc).join("\n"),v.length>0&&(v+="\n"),g=[p,f].filter(Lc).join("\n"),g.length>0&&(g+="\n")):(v=[jc(n),"#define SHADER_NAME "+n.shaderName,f,n.instancing?"#define USE_INSTANCING":"",n.instancingColor?"#define USE_INSTANCING_COLOR":"",n.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+d,"#define MAX_BONES "+n.maxBones,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+u:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.displacementMap&&n.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.flatShading?"#define FLAT_SHADED":"",n.skinning?"#define USE_SKINNING":"",n.useVertexTexture?"#define BONE_TEXTURE":"",n.morphTargets?"#define USE_MORPHTARGETS":"",n.morphNormals&&!1===n.flatShading?"#define USE_MORPHNORMALS":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.sizeAttenuation?"#define USE_SIZEATTENUATION":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Lc).join("\n"),g=[p,jc(n),"#define SHADER_NAME "+n.shaderName,f,n.alphaTest?"#define ALPHATEST "+n.alphaTest+(n.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+d,n.useFog&&n.fog?"#define USE_FOG":"",n.useFog&&n.fogExp2?"#define FOG_EXP2":"",n.map?"#define USE_MAP":"",n.matcap?"#define USE_MATCAP":"",n.envMap?"#define USE_ENVMAP":"",n.envMap?"#define "+c:"",n.envMap?"#define "+u:"",n.envMap?"#define "+h:"",n.lightMap?"#define USE_LIGHTMAP":"",n.aoMap?"#define USE_AOMAP":"",n.emissiveMap?"#define USE_EMISSIVEMAP":"",n.bumpMap?"#define USE_BUMPMAP":"",n.normalMap?"#define USE_NORMALMAP":"",n.normalMap&&n.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",n.normalMap&&n.tangentSpaceNormalMap?"#define TANGENTSPACE_NORMALMAP":"",n.clearcoatMap?"#define USE_CLEARCOATMAP":"",n.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",n.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",n.specularMap?"#define USE_SPECULARMAP":"",n.roughnessMap?"#define USE_ROUGHNESSMAP":"",n.metalnessMap?"#define USE_METALNESSMAP":"",n.alphaMap?"#define USE_ALPHAMAP":"",n.sheen?"#define USE_SHEEN":"",n.transmissionMap?"#define USE_TRANSMISSIONMAP":"",n.vertexTangents?"#define USE_TANGENT":"",n.vertexColors||n.instancingColor?"#define USE_COLOR":"",n.vertexUvs?"#define USE_UV":"",n.uvsVertexOnly?"#define UVS_VERTEX_ONLY":"",n.gradientMap?"#define USE_GRADIENTMAP":"",n.flatShading?"#define FLAT_SHADED":"",n.doubleSided?"#define DOUBLE_SIDED":"",n.flipSided?"#define FLIP_SIDED":"",n.shadowMapEnabled?"#define USE_SHADOWMAP":"",n.shadowMapEnabled?"#define "+l:"",n.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",n.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",n.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",n.logarithmicDepthBuffer&&n.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"",(n.extensionShaderTextureLOD||n.envMap)&&n.rendererExtensionShaderTextureLod?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",n.toneMapping!==K?"#define TONE_MAPPING":"",n.toneMapping!==K?nl["tonemapping_pars_fragment"]:"",n.toneMapping!==K?Sc("toneMapping",n.toneMapping):"",n.dithering?"#define DITHERING":"",nl["encodings_pars_fragment"],n.map?Mc("mapTexelToLinear",n.mapEncoding):"",n.matcap?Mc("matcapTexelToLinear",n.matcapEncoding):"",n.envMap?Mc("envMapTexelToLinear",n.envMapEncoding):"",n.emissiveMap?Mc("emissiveMapTexelToLinear",n.emissiveMapEncoding):"",n.lightMap?Mc("lightMapTexelToLinear",n.lightMapEncoding):"",Ec("linearToOutputTexel",n.outputEncoding),n.depthPacking?"#define DEPTH_PACKING "+n.depthPacking:"","\n"].filter(Lc).join("\n")),a=kc(a),a=Pc(a,n),a=Oc(a,n),s=kc(s),s=Pc(s,n),s=Oc(s,n),a=zc(a),s=zc(s),n.isWebGL2&&!0!==n.isRawShaderMaterial&&(y="#version 300 es\n",v=["#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+v,g=["#define varying in",n.glslVersion===In?"":"out highp vec4 pc_fragColor;",n.glslVersion===In?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+g);const b=y+v+a,x=y+g+s,w=yc(r,35633,b),_=yc(r,35632,x);if(r.attachShader(m,w),r.attachShader(m,_),void 0!==n.index0AttributeName?r.bindAttribLocation(m,0,n.index0AttributeName):!0===n.morphTargets&&r.bindAttribLocation(m,0,"position"),r.linkProgram(m),t.debug.checkShaderErrors){const t=r.getProgramInfoLog(m).trim(),e=r.getShaderInfoLog(w).trim(),n=r.getShaderInfoLog(_).trim();let i=!0,o=!0;if(!1===r.getProgramParameter(m,35714)){i=!1;const e=_c(r,w,"vertex"),n=_c(r,_,"fragment");console.error("THREE.WebGLProgram: shader error: ",r.getError(),"35715",r.getProgramParameter(m,35715),"gl.getProgramInfoLog",t,e,n)}else""!==t?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",t):""!==e&&""!==n||(o=!1);o&&(this.diagnostics={runnable:i,programLog:t,vertexShader:{log:e,prefix:v},fragmentShader:{log:n,prefix:g}})}let M,E;return r.deleteShader(w),r.deleteShader(_),this.getUniforms=function(){return void 0===M&&(M=new gc(r,m)),M},this.getAttributes=function(){return void 0===E&&(E=Cc(r,m)),E},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(m),this.program=void 0},this.name=n.shaderName,this.id=bc++,this.cacheKey=e,this.usedTimes=1,this.program=m,this.vertexShader=w,this.fragmentShader=_,this}function $c(t,e,n,i,r,o){const a=[],s=i.isWebGL2,l=i.logarithmicDepthBuffer,c=i.floatVertexTextures,u=i.maxVertexUniforms,h=i.vertexTextures;let d=i.precision;const p={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},f=["precision","isWebGL2","supportsVertexTextures","outputEncoding","instancing","instancingColor","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","envMapCubeUV","lightMap","lightMapEncoding","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","tangentSpaceNormalMap","clearcoatMap","clearcoatRoughnessMap","clearcoatNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","vertexUvs","uvsVertexOnly","fog","useFog","fogExp2","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","numDirLightShadows","numPointLightShadows","numSpotLightShadows","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering","sheen","transmissionMap"];function g(t){const e=t.skeleton,n=e.bones;if(c)return 1024;{const t=u,e=Math.floor((t-20)/4),i=Math.min(e,n.length);return i<n.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+n.length+" bones. This GPU supports "+i+"."),0):i}}function y(t){let e;return t&&t.isTexture?e=t.encoding:t&&t.isWebGLRenderTarget?(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),e=t.texture.encoding):e=Ze,e}function b(r,a,u,f,b){const x=f.fog,w=r.isMeshStandardMaterial?f.environment:null,_=e.get(r.envMap||w),M=p[r.type],E=b.isSkinnedMesh?g(b):0;let S,T;if(null!==r.precision&&(d=i.getMaxPrecision(r.precision),d!==r.precision&&console.warn("THREE.WebGLProgram.getParameters:",r.precision,"not supported, using",d,"instead.")),M){const t=rl[M];S=t.vertexShader,T=t.fragmentShader}else S=r.vertexShader,T=r.fragmentShader;const A=t.getRenderTarget(),C={isWebGL2:s,shaderID:M,shaderName:r.type,vertexShader:S,fragmentShader:T,defines:r.defines,isRawShaderMaterial:!0===r.isRawShaderMaterial,glslVersion:r.glslVersion,precision:d,instancing:!0===b.isInstancedMesh,instancingColor:!0===b.isInstancedMesh&&null!==b.instanceColor,supportsVertexTextures:h,outputEncoding:null!==A?y(A.texture):t.outputEncoding,map:!!r.map,mapEncoding:y(r.map),matcap:!!r.matcap,matcapEncoding:y(r.matcap),envMap:!!_,envMapMode:_&&_.mapping,envMapEncoding:y(_),envMapCubeUV:!!_&&(_.mapping===ct||_.mapping===ut),lightMap:!!r.lightMap,lightMapEncoding:y(r.lightMap),aoMap:!!r.aoMap,emissiveMap:!!r.emissiveMap,emissiveMapEncoding:y(r.emissiveMap),bumpMap:!!r.bumpMap,normalMap:!!r.normalMap,objectSpaceNormalMap:r.normalMapType===ln,tangentSpaceNormalMap:r.normalMapType===sn,clearcoatMap:!!r.clearcoatMap,clearcoatRoughnessMap:!!r.clearcoatRoughnessMap,clearcoatNormalMap:!!r.clearcoatNormalMap,displacementMap:!!r.displacementMap,roughnessMap:!!r.roughnessMap,metalnessMap:!!r.metalnessMap,specularMap:!!r.specularMap,alphaMap:!!r.alphaMap,gradientMap:!!r.gradientMap,sheen:!!r.sheen,transmissionMap:!!r.transmissionMap,combine:r.combine,vertexTangents:r.normalMap&&r.vertexTangents,vertexColors:r.vertexColors,vertexUvs:!!r.map||!!r.bumpMap||!!r.normalMap||!!r.specularMap||!!r.alphaMap||!!r.emissiveMap||!!r.roughnessMap||!!r.metalnessMap||!!r.clearcoatMap||!!r.clearcoatRoughnessMap||!!r.clearcoatNormalMap||!!r.displacementMap||!!r.transmissionMap,uvsVertexOnly:!(r.map||r.bumpMap||r.normalMap||r.specularMap||r.alphaMap||r.emissiveMap||r.roughnessMap||r.metalnessMap||r.clearcoatNormalMap||r.transmissionMap)&&!!r.displacementMap,fog:!!x,useFog:r.fog,fogExp2:x&&x.isFogExp2,flatShading:r.flatShading,sizeAttenuation:r.sizeAttenuation,logarithmicDepthBuffer:l,skinning:r.skinning&&E>0,maxBones:E,useVertexTexture:c,morphTargets:r.morphTargets,morphNormals:r.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:a.directional.length,numPointLights:a.point.length,numSpotLights:a.spot.length,numRectAreaLights:a.rectArea.length,numHemiLights:a.hemi.length,numDirLightShadows:a.directionalShadowMap.length,numPointLightShadows:a.pointShadowMap.length,numSpotLightShadows:a.spotShadowMap.length,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:r.dithering,shadowMapEnabled:t.shadowMap.enabled&&u.length>0,shadowMapType:t.shadowMap.type,toneMapping:r.toneMapped?t.toneMapping:K,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:r.premultipliedAlpha,alphaTest:r.alphaTest,doubleSided:r.side===v,flipSided:r.side===m,depthPacking:void 0!==r.depthPacking&&r.depthPacking,index0AttributeName:r.index0AttributeName,extensionDerivatives:r.extensions&&r.extensions.derivatives,extensionFragDepth:r.extensions&&r.extensions.fragDepth,extensionDrawBuffers:r.extensions&&r.extensions.drawBuffers,extensionShaderTextureLOD:r.extensions&&r.extensions.shaderTextureLOD,rendererExtensionFragDepth:s||n.has("EXT_frag_depth"),rendererExtensionDrawBuffers:s||n.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:s||n.has("EXT_shader_texture_lod"),customProgramCacheKey:r.customProgramCacheKey()};return C}function x(e){const n=[];if(e.shaderID?n.push(e.shaderID):(n.push(e.fragmentShader),n.push(e.vertexShader)),void 0!==e.defines)for(const t in e.defines)n.push(t),n.push(e.defines[t]);if(!1===e.isRawShaderMaterial){for(let t=0;t<f.length;t++)n.push(e[f[t]]);n.push(t.outputEncoding),n.push(t.gammaFactor)}return n.push(e.customProgramCacheKey),n.join()}function w(t){const e=p[t.type];let n;if(e){const t=rl[e];n=go.clone(t.uniforms)}else n=t.uniforms;return n}function _(e,n){let i;for(let t=0,r=a.length;t<r;t++){const e=a[t];if(e.cacheKey===n){i=e,++i.usedTimes;break}}return void 0===i&&(i=new Wc(t,n,e,r),a.push(i)),i}function M(t){if(0===--t.usedTimes){const e=a.indexOf(t);a[e]=a[a.length-1],a.pop(),t.destroy()}}return{getParameters:b,getProgramCacheKey:x,getUniforms:w,acquireProgram:_,releaseProgram:M,programs:a}}function qc(){let t=new WeakMap;function e(e){let n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function i(e,n,i){t.get(e)[n]=i}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Yc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Xc(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function Zc(t){const e=[];let n=0;const i=[],r=[],o={id:-1};function a(){n=0,i.length=0,r.length=0}function s(i,r,a,s,l,c){let u=e[n];const h=t.get(a);return void 0===u?(u={id:i.id,object:i,geometry:r,material:a,program:h.program||o,groupOrder:s,renderOrder:i.renderOrder,z:l,group:c},e[n]=u):(u.id=i.id,u.object=i,u.geometry=r,u.material=a,u.program=h.program||o,u.groupOrder=s,u.renderOrder=i.renderOrder,u.z=l,u.group=c),n++,u}function l(t,e,n,o,a,l){const c=s(t,e,n,o,a,l);(!0===n.transparent?r:i).push(c)}function c(t,e,n,o,a,l){const c=s(t,e,n,o,a,l);(!0===n.transparent?r:i).unshift(c)}function u(t,e){i.length>1&&i.sort(t||Yc),r.length>1&&r.sort(e||Xc)}function h(){for(let t=n,i=e.length;t<i;t++){const n=e[t];if(null===n.id)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.program=null,n.group=null}}return{opaque:i,transparent:r,init:a,push:l,unshift:c,finish:h,sort:u}}function Jc(t){let e=new WeakMap;function n(n,i){const r=e.get(n);let o;return void 0===r?(o=new Zc(t),e.set(n,new WeakMap),e.get(n).set(i,o)):(o=r.get(i),void 0===o&&(o=new Zc(t),r.set(i,o))),o}function i(){e=new WeakMap}return{get:n,dispose:i}}function Kc(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={direction:new Jn,color:new yr};break;case"SpotLight":n={position:new Jn,direction:new Jn,color:new yr,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":n={position:new Jn,color:new yr,distance:0,decay:0};break;case"HemisphereLight":n={direction:new Jn,skyColor:new yr,groundColor:new yr};break;case"RectAreaLight":n={color:new yr,position:new Jn,halfWidth:new Jn,halfHeight:new Jn};break}return t[e.id]=n,n}}}function Qc(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let n;switch(e.type){case"DirectionalLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn};break;case"SpotLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn};break;case"PointLight":n={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new jn,shadowCameraNear:1,shadowCameraFar:1e3};break}return t[e.id]=n,n}}}let tu=0;function eu(t,e){return(e.castShadow?1:0)-(t.castShadow?1:0)}function nu(t,e){const n=new Kc,i=Qc(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadow:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]};for(let u=0;u<9;u++)r.probe.push(new Jn);const o=new Jn,a=new Si,s=new Si;function l(o){let a=0,s=0,l=0;for(let t=0;t<9;t++)r.probe[t].set(0,0,0);let c=0,u=0,h=0,d=0,p=0,f=0,m=0,v=0;o.sort(eu);for(let t=0,e=o.length;t<e;t++){const e=o[t],g=e.color,y=e.intensity,b=e.distance,x=e.shadow&&e.shadow.map?e.shadow.map.texture:null;if(e.isAmbientLight)a+=g.r*y,s+=g.g*y,l+=g.b*y;else if(e.isLightProbe)for(let t=0;t<9;t++)r.probe[t].addScaledVector(e.sh.coefficients[t],y);else if(e.isDirectionalLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.directionalShadow[c]=n,r.directionalShadowMap[c]=x,r.directionalShadowMatrix[c]=e.shadow.matrix,f++}r.directional[c]=t,c++}else if(e.isSpotLight){const t=n.get(e);if(t.position.setFromMatrixPosition(e.matrixWorld),t.color.copy(g).multiplyScalar(y),t.distance=b,t.coneCos=Math.cos(e.angle),t.penumbraCos=Math.cos(e.angle*(1-e.penumbra)),t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,r.spotShadow[h]=n,r.spotShadowMap[h]=x,r.spotShadowMatrix[h]=e.shadow.matrix,v++}r.spot[h]=t,h++}else if(e.isRectAreaLight){const t=n.get(e);t.color.copy(g).multiplyScalar(y),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),r.rectArea[d]=t,d++}else if(e.isPointLight){const t=n.get(e);if(t.color.copy(e.color).multiplyScalar(e.intensity),t.distance=e.distance,t.decay=e.decay,e.castShadow){const t=e.shadow,n=i.get(e);n.shadowBias=t.bias,n.shadowNormalBias=t.normalBias,n.shadowRadius=t.radius,n.shadowMapSize=t.mapSize,n.shadowCameraNear=t.camera.near,n.shadowCameraFar=t.camera.far,r.pointShadow[u]=n,r.pointShadowMap[u]=x,r.pointShadowMatrix[u]=e.shadow.matrix,m++}r.point[u]=t,u++}else if(e.isHemisphereLight){const t=n.get(e);t.skyColor.copy(e.color).multiplyScalar(y),t.groundColor.copy(e.groundColor).multiplyScalar(y),r.hemi[p]=t,p++}}d>0&&(e.isWebGL2?(r.rectAreaLTC1=il.LTC_FLOAT_1,r.rectAreaLTC2=il.LTC_FLOAT_2):!0===t.has("OES_texture_float_linear")?(r.rectAreaLTC1=il.LTC_FLOAT_1,r.rectAreaLTC2=il.LTC_FLOAT_2):!0===t.has("OES_texture_half_float_linear")?(r.rectAreaLTC1=il.LTC_HALF_1,r.rectAreaLTC2=il.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=a,r.ambient[1]=s,r.ambient[2]=l;const g=r.hash;g.directionalLength===c&&g.pointLength===u&&g.spotLength===h&&g.rectAreaLength===d&&g.hemiLength===p&&g.numDirectionalShadows===f&&g.numPointShadows===m&&g.numSpotShadows===v||(r.directional.length=c,r.spot.length=h,r.rectArea.length=d,r.point.length=u,r.hemi.length=p,r.directionalShadow.length=f,r.directionalShadowMap.length=f,r.pointShadow.length=m,r.pointShadowMap.length=m,r.spotShadow.length=v,r.spotShadowMap.length=v,r.directionalShadowMatrix.length=f,r.pointShadowMatrix.length=m,r.spotShadowMatrix.length=v,g.directionalLength=c,g.pointLength=u,g.spotLength=h,g.rectAreaLength=d,g.hemiLength=p,g.numDirectionalShadows=f,g.numPointShadows=m,g.numSpotShadows=v,r.version=tu++)}function c(t,e){let n=0,i=0,l=0,c=0,u=0;const h=e.matrixWorldInverse;for(let d=0,p=t.length;d<p;d++){const e=t[d];if(e.isDirectionalLight){const t=r.directional[n];t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),n++}else if(e.isSpotLight){const t=r.spot[l];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),t.direction.setFromMatrixPosition(e.matrixWorld),o.setFromMatrixPosition(e.target.matrixWorld),t.direction.sub(o),t.direction.transformDirection(h),l++}else if(e.isRectAreaLight){const t=r.rectArea[c];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),s.identity(),a.copy(e.matrixWorld),a.premultiply(h),s.extractRotation(a),t.halfWidth.set(.5*e.width,0,0),t.halfHeight.set(0,.5*e.height,0),t.halfWidth.applyMatrix4(s),t.halfHeight.applyMatrix4(s),c++}else if(e.isPointLight){const t=r.point[i];t.position.setFromMatrixPosition(e.matrixWorld),t.position.applyMatrix4(h),i++}else if(e.isHemisphereLight){const t=r.hemi[u];t.direction.setFromMatrixPosition(e.matrixWorld),t.direction.transformDirection(h),t.direction.normalize(),u++}}}return{setup:l,setupView:c,state:r}}function iu(t,e){const n=new nu(t,e),i=[],r=[];function o(){i.length=0,r.length=0}function a(t){i.push(t)}function s(t){r.push(t)}function l(){n.setup(i)}function c(t){n.setupView(i,t)}const u={lightsArray:i,shadowsArray:r,lights:n};return{init:o,state:u,setupLights:l,setupLightsView:c,pushLight:a,pushShadow:s}}function ru(t,e){let n=new WeakMap;function i(i,r=0){let o;return!1===n.has(i)?(o=new iu(t,e),n.set(i,[]),n.get(i).push(o)):r>=n.get(i).length?(o=new iu(t,e),n.get(i).push(o)):o=n.get(i)[r],o}function r(){n=new WeakMap}return{get:i,dispose:r}}function ou(t){wr.call(this),this.type="MeshDepthMaterial",this.depthPacking=on,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.setValues(t)}function au(t){wr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Jn,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.setValues(t)}ou.prototype=Object.create(wr.prototype),ou.prototype.constructor=ou,ou.prototype.isMeshDepthMaterial=!0,ou.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},au.prototype=Object.create(wr.prototype),au.prototype.constructor=au,au.prototype.isMeshDistanceMaterial=!0,au.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this};var su="uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy ) / resolution ) );\n\tfor ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, i ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean * HALF_SAMPLE_RATE;\n\tsquared_mean = squared_mean * HALF_SAMPLE_RATE;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}",lu="void main() {\n\tgl_Position = vec4( position, 1.0 );\n}";function cu(t,e,n){let i=new Oo;const r=new jn,o=new jn,a=new qn,s=[],l=[],c={},u={0:m,1:f,2:v},d=new xo({defines:{SAMPLE_RATE:.25,HALF_SAMPLE_RATE:1/8},uniforms:{shadow_pass:{value:null},resolution:{value:new jn},radius:{value:4}},vertexShader:lu,fragmentShader:su}),g=d.clone();g.defines.HORIZONTAL_PASS=1;const y=new $r;y.setAttribute("position",new Sr(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const x=new uo(y,d),w=this;function _(n,i){const r=e.update(x);d.uniforms.shadow_pass.value=n.map.texture,d.uniforms.resolution.value=n.mapSize,d.uniforms.radius.value=n.radius,t.setRenderTarget(n.mapPass),t.clear(),t.renderBufferDirect(i,null,r,d,x,null),g.uniforms.shadow_pass.value=n.mapPass.texture,g.uniforms.resolution.value=n.mapSize,g.uniforms.radius.value=n.radius,t.setRenderTarget(n.map),t.clear(),t.renderBufferDirect(i,null,r,g,x,null)}function M(t,e,n){const i=t<<0|e<<1|n<<2;let r=s[i];return void 0===r&&(r=new ou({depthPacking:an,morphTargets:t,skinning:e}),s[i]=r),r}function E(t,e,n){const i=t<<0|e<<1|n<<2;let r=l[i];return void 0===r&&(r=new au({morphTargets:t,skinning:e}),l[i]=r),r}function S(e,n,i,r,o,a,s){let l=null,h=M,d=e.customDepthMaterial;if(!0===r.isPointLight&&(h=E,d=e.customDistanceMaterial),void 0===d){let t=!1;!0===i.morphTargets&&(t=n.morphAttributes&&n.morphAttributes.position&&n.morphAttributes.position.length>0);let r=!1;!0===e.isSkinnedMesh&&(!0===i.skinning?r=!0:console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e));const o=!0===e.isInstancedMesh;l=h(t,r,o)}else l=d;if(t.localClippingEnabled&&!0===i.clipShadows&&0!==i.clippingPlanes.length){const t=l.uuid,e=i.uuid;let n=c[t];void 0===n&&(n={},c[t]=n);let r=n[e];void 0===r&&(r=l.clone(),n[e]=r),l=r}return l.visible=i.visible,l.wireframe=i.wireframe,l.side=s===p?null!==i.shadowSide?i.shadowSide:i.side:null!==i.shadowSide?i.shadowSide:u[i.side],l.clipShadows=i.clipShadows,l.clippingPlanes=i.clippingPlanes,l.clipIntersection=i.clipIntersection,l.wireframeLinewidth=i.wireframeLinewidth,l.linewidth=i.linewidth,!0===r.isPointLight&&!0===l.isMeshDistanceMaterial&&(l.referencePosition.setFromMatrixPosition(r.matrixWorld),l.nearDistance=o,l.farDistance=a),l}function T(n,r,o,a,s){if(!1===n.visible)return;const l=n.layers.test(r.layers);if(l&&(n.isMesh||n.isLine||n.isPoints)&&(n.castShadow||n.receiveShadow&&s===p)&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);const i=e.update(n),r=n.material;if(Array.isArray(r)){const e=i.groups;for(let l=0,c=e.length;l<c;l++){const c=e[l],u=r[c.materialIndex];if(u&&u.visible){const e=S(n,i,u,a,o.near,o.far,s);t.renderBufferDirect(o,null,i,e,n,c)}}}else if(r.visible){const e=S(n,i,r,a,o.near,o.far,s);t.renderBufferDirect(o,null,i,e,n,null)}}const c=n.children;for(let t=0,e=c.length;t<e;t++)T(c[t],r,o,a,s)}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=h,this.render=function(e,s,l){if(!1===w.enabled)return;if(!1===w.autoUpdate&&!1===w.needsUpdate)return;if(0===e.length)return;const c=t.getRenderTarget(),u=t.getActiveCubeFace(),h=t.getActiveMipmapLevel(),d=t.state;d.setBlending(b),d.buffers.color.setClear(1,1,1,1),d.buffers.depth.setTest(!0),d.setScissorTest(!1);for(let f=0,m=e.length;f<m;f++){const c=e[f],u=c.shadow;if(void 0===u){console.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===u.autoUpdate&&!1===u.needsUpdate)continue;r.copy(u.mapSize);const h=u.getFrameExtents();if(r.multiply(h),o.copy(u.mapSize),(r.x>n||r.y>n)&&(r.x>n&&(o.x=Math.floor(n/h.x),r.x=o.x*h.x,u.mapSize.x=o.x),r.y>n&&(o.y=Math.floor(n/h.y),r.y=o.y*h.y,u.mapSize.y=o.y)),null===u.map&&!u.isPointLightShadow&&this.type===p){const t={minFilter:bt,magFilter:bt,format:Bt};u.map=new Yn(r.x,r.y,t),u.map.texture.name=c.name+".shadowMap",u.mapPass=new Yn(r.x,r.y,t),u.camera.updateProjectionMatrix()}if(null===u.map){const t={minFilter:ft,magFilter:ft,format:Bt};u.map=new Yn(r.x,r.y,t),u.map.texture.name=c.name+".shadowMap",u.camera.updateProjectionMatrix()}t.setRenderTarget(u.map),t.clear();const m=u.getViewportCount();for(let t=0;t<m;t++){const e=u.getViewport(t);a.set(o.x*e.x,o.y*e.y,o.x*e.z,o.y*e.w),d.viewport(a),u.updateMatrices(c,t),i=u.getFrustum(),T(s,l,u.camera,c,this.type)}u.isPointLightShadow||this.type!==p||_(u,l),u.needsUpdate=!1}w.needsUpdate=!1,t.setRenderTarget(c,u,h)}}function uu(t,e,n){const i=n.isWebGL2;function r(){let e=!1;const n=new qn;let i=null;const r=new qn(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}}function o(){let e=!1,n=null,i=null,r=null;return{setTest:function(t){t?gt(2929):yt(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case H:t.depthFunc(512);break;case U:t.depthFunc(519);break;case V:t.depthFunc(513);break;case G:t.depthFunc(515);break;case W:t.depthFunc(514);break;case $:t.depthFunc(518);break;case q:t.depthFunc(516);break;case Y:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function c(){let e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){e||(t?gt(2960):yt(2960))},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}}const u=new r,h=new o,d=new c;let p={},f=null,g=null,y=null,X=null,Z=null,J=null,K=null,Q=null,tt=null,et=!1,nt=null,it=null,rt=null,ot=null,at=null;const st=t.getParameter(35661);let lt=!1,ct=0;const ut=t.getParameter(7938);-1!==ut.indexOf("WebGL")?(ct=parseFloat(/^WebGL (\d)/.exec(ut)[1]),lt=ct>=1):-1!==ut.indexOf("OpenGL ES")&&(ct=parseFloat(/^OpenGL ES (\d)/.exec(ut)[1]),lt=ct>=2);let ht=null,dt={};const pt=new qn,ft=new qn;function mt(e,n,i){const r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(let a=0;a<i;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return o}const vt={};function gt(e){!0!==p[e]&&(t.enable(e),p[e]=!0)}function yt(e){!1!==p[e]&&(t.disable(e),p[e]=!1)}function bt(e){return f!==e&&(t.useProgram(e),f=e,!0)}vt[3553]=mt(3553,3553,1),vt[34067]=mt(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),gt(2929),h.setFunc(G),Et(!1),St(s),gt(2884),_t(b);const xt={[S]:32774,[T]:32778,[A]:32779};if(i)xt[C]=32775,xt[L]=32776;else{const t=e.get("EXT_blend_minmax");null!==t&&(xt[C]=t.MIN_EXT,xt[L]=t.MAX_EXT)}const wt={[P]:0,[O]:1,[R]:768,[D]:770,[j]:776,[B]:774,[N]:772,[k]:769,[I]:771,[F]:775,[z]:773};function _t(e,n,i,r,o,a,s,l){if(e!==b){if(g||(gt(3042),g=!0),e===E)o=o||n,a=a||i,s=s||r,n===X&&o===K||(t.blendEquationSeparate(xt[n],xt[o]),X=n,K=o),i===Z&&r===J&&a===Q&&s===tt||(t.blendFuncSeparate(wt[i],wt[r],wt[a],wt[s]),Z=i,J=r,Q=a,tt=s),y=e,et=null;else if(e!==y||l!==et){if(X===S&&K===S||(t.blendEquation(32774),X=S,K=S),l)switch(e){case x:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case _:t.blendFuncSeparate(0,0,769,771);break;case M:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case x:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case _:t.blendFunc(0,769);break;case M:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}Z=null,J=null,Q=null,tt=null,y=e,et=l}}else g&&(yt(3042),g=!1)}function Mt(t,e){t.side===v?yt(2884):gt(2884);let n=t.side===m;e&&(n=!n),Et(n),t.blending===x&&!1===t.transparent?_t(b):_t(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),h.setFunc(t.depthFunc),h.setTest(t.depthTest),h.setMask(t.depthWrite),u.setMask(t.colorWrite);const i=t.stencilWrite;d.setTest(i),i&&(d.setMask(t.stencilWriteMask),d.setFunc(t.stencilFunc,t.stencilRef,t.stencilFuncMask),d.setOp(t.stencilFail,t.stencilZFail,t.stencilZPass)),At(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function Et(e){nt!==e&&(e?t.frontFace(2304):t.frontFace(2305),nt=e)}function St(e){e!==a?(gt(2884),e!==it&&(e===s?t.cullFace(1029):e===l?t.cullFace(1028):t.cullFace(1032))):yt(2884),it=e}function Tt(e){e!==rt&&(lt&&t.lineWidth(e),rt=e)}function At(e,n,i){e?(gt(32823),ot===n&&at===i||(t.polygonOffset(n,i),ot=n,at=i)):yt(32823)}function Ct(t){t?gt(3089):yt(3089)}function Lt(e){void 0===e&&(e=33984+st-1),ht!==e&&(t.activeTexture(e),ht=e)}function Pt(e,n){null===ht&&Lt();let i=dt[ht];void 0===i&&(i={type:void 0,texture:void 0},dt[ht]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||vt[e]),i.type=e,i.texture=n)}function Ot(){const e=dt[ht];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)}function Rt(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function kt(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Dt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function It(e){!1===pt.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),pt.copy(e))}function Nt(e){!1===ft.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),ft.copy(e))}function zt(){p={},ht=null,dt={},f=null,g=null,y=null,X=null,Z=null,J=null,K=null,Q=null,tt=null,et=!1,nt=null,it=null,rt=null,ot=null,at=null,u.reset(),h.reset(),d.reset()}return{buffers:{color:u,depth:h,stencil:d},enable:gt,disable:yt,useProgram:bt,setBlending:_t,setMaterial:Mt,setFlipSided:Et,setCullFace:St,setLineWidth:Tt,setPolygonOffset:At,setScissorTest:Ct,activeTexture:Lt,bindTexture:Pt,unbindTexture:Ot,compressedTexImage2D:Rt,texImage2D:kt,texImage3D:Dt,scissor:It,viewport:Nt,reset:zt}}function hu(t,e,n,i,r,o,a){const s=r.isWebGL2,l=r.maxTextures,c=r.maxCubemapSize,u=r.maxTextureSize,h=r.maxSamples,d=new WeakMap;let p,f=!1;try{f="undefined"!==typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(Q){}function m(t,e){return f?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function v(t,e,n,i){let r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){const i=e?Fn.floorPowerOfTwo:Math.floor,o=i(r*t.width),a=i(r*t.height);void 0===p&&(p=m(o,a));const s=n?m(o,a):p;s.width=o,s.height=a;const l=s.getContext("2d");return l.drawImage(t,0,0,o,a),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+o+"x"+a+")."),s}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function g(t){return Fn.isPowerOfTwo(t.width)&&Fn.isPowerOfTwo(t.height)}function y(t){return!s&&(t.wrapS!==dt||t.wrapT!==dt||t.minFilter!==ft&&t.minFilter!==bt)}function b(t,e){return t.generateMipmaps&&e&&t.minFilter!==ft&&t.minFilter!==bt}function x(e,n,r,o){t.generateMipmap(e);const a=i.get(n);a.__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function w(n,i,r){if(!1===s)return i;if(null!==n){if(void 0!==t[n])return t[n];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+n+"'")}let o=i;return 6403===i&&(5126===r&&(o=33326),5131===r&&(o=33325),5121===r&&(o=33321)),6407===i&&(5126===r&&(o=34837),5131===r&&(o=34843),5121===r&&(o=32849)),6408===i&&(5126===r&&(o=34836),5131===r&&(o=34842),5121===r&&(o=32856)),33325!==o&&33326!==o&&34842!==o&&34836!==o||e.get("EXT_color_buffer_float"),o}function _(t){return t===ft||t===mt||t===gt?9728:9729}function M(t){const e=t.target;e.removeEventListener("dispose",M),S(e),e.isVideoTexture&&d.delete(e),a.memory.textures--}function E(t){const e=t.target;e.removeEventListener("dispose",E),T(e),a.memory.textures--}function S(e){const n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}function T(e){const n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++)t.deleteFramebuffer(n.__webglFramebuffer[e]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[e]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer),n.__webglMultisampledFramebuffer&&t.deleteFramebuffer(n.__webglMultisampledFramebuffer),n.__webglColorRenderbuffer&&t.deleteRenderbuffer(n.__webglColorRenderbuffer),n.__webglDepthRenderbuffer&&t.deleteRenderbuffer(n.__webglDepthRenderbuffer);i.remove(e.texture),i.remove(e)}}let A=0;function C(){A=0}function L(){const t=A;return t>=l&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+l),A+=1,t}function P(t,e){const r=i.get(t);if(t.isVideoTexture&&Y(t),t.version>0&&r.__version!==t.version){const n=t.image;if(void 0===n)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==n.complete)return void B(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function O(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?B(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))}function R(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?B(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))}function k(t,e){const r=i.get(t);t.version>0&&r.__version!==t.version?F(r,t,e):(n.activeTexture(33984+e),n.bindTexture(34067,r.__webglTexture))}const D={[ht]:10497,[dt]:33071,[pt]:33648},I={[ft]:9728,[mt]:9984,[gt]:9986,[bt]:9729,[xt]:9985,[_t]:9987};function N(n,o,a){a?(t.texParameteri(n,10242,D[o.wrapS]),t.texParameteri(n,10243,D[o.wrapT]),32879!==n&&35866!==n||t.texParameteri(n,32882,D[o.wrapR]),t.texParameteri(n,10240,I[o.magFilter]),t.texParameteri(n,10241,I[o.minFilter])):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),o.wrapS===dt&&o.wrapT===dt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,_(o.magFilter)),t.texParameteri(n,10241,_(o.minFilter)),o.minFilter!==ft&&o.minFilter!==bt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter."));const l=e.get("EXT_texture_filter_anisotropic");if(l){if(o.type===Pt&&null===e.get("OES_texture_float_linear"))return;if(o.type===Ot&&null===(s||e.get("OES_texture_half_float_linear")))return;(o.anisotropy>1||i.get(o).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(o.anisotropy,r.getMaxAnisotropy())),i.get(o).__currentAnisotropy=o.anisotropy)}}function z(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",M),e.__webglTexture=t.createTexture(),a.memory.textures++)}function B(e,i,r){let a=3553;i.isDataTexture2DArray&&(a=35866),i.isDataTexture3D&&(a=32879),z(e,i),n.activeTexture(33984+r),n.bindTexture(a,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);const l=y(i)&&!1===g(i.image),c=v(i.image,l,!1,u),h=g(c)||s,d=o.convert(i.format);let p,f=o.convert(i.type),m=w(i.internalFormat,d,f);N(a,i,h);const _=i.mipmaps;if(i.isDepthTexture)m=6402,s?m=i.type===Pt?36012:i.type===Lt?33190:i.type===It?35056:33189:i.type===Pt&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),i.format===Ut&&6402===m&&i.type!==At&&i.type!==Lt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=At,f=o.convert(i.type)),i.format===Vt&&6402===m&&(m=34041,i.type!==It&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=It,f=o.convert(i.type))),n.texImage2D(3553,0,m,c.width,c.height,0,d,f,null);else if(i.isDataTexture)if(_.length>0&&h){for(let t=0,e=_.length;t<e;t++)p=_[t],n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);i.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,m,c.width,c.height,0,d,f,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(let t=0,e=_.length;t<e;t++)p=_[t],i.format!==Bt&&i.format!==zt?null!==d?n.compressedTexImage2D(3553,t,m,p.width,p.height,0,p.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,t,m,p.width,p.height,0,d,f,p.data);e.__maxMipLevel=_.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,m,c.width,c.height,c.depth,0,d,f,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,m,c.width,c.height,c.depth,0,d,f,c.data),e.__maxMipLevel=0;else if(_.length>0&&h){for(let t=0,e=_.length;t<e;t++)p=_[t],n.texImage2D(3553,t,m,d,f,p);i.generateMipmaps=!1,e.__maxMipLevel=_.length-1}else n.texImage2D(3553,0,m,d,f,c),e.__maxMipLevel=0;b(i,h)&&x(a,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function F(e,i,r){if(6!==i.image.length)return;z(e,i),n.activeTexture(33984+r),n.bindTexture(34067,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);const a=i&&(i.isCompressedTexture||i.image[0].isCompressedTexture),l=i.image[0]&&i.image[0].isDataTexture,u=[];for(let t=0;t<6;t++)u[t]=a||l?l?i.image[t].image:i.image[t]:v(i.image[t],!1,!0,c);const h=u[0],d=g(h)||s,p=o.convert(i.format),f=o.convert(i.type),m=w(i.internalFormat,p,f);let y;if(N(34067,i,d),a){for(let t=0;t<6;t++){y=u[t].mipmaps;for(let e=0;e<y.length;e++){const r=y[e];i.format!==Bt&&i.format!==zt?null!==p?n.compressedTexImage2D(34069+t,e,m,r.width,r.height,0,r.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+t,e,m,r.width,r.height,0,p,f,r.data)}}e.__maxMipLevel=y.length-1}else{y=i.mipmaps;for(let t=0;t<6;t++)if(l){n.texImage2D(34069+t,0,m,u[t].width,u[t].height,0,p,f,u[t].data);for(let e=0;e<y.length;e++){const i=y[e],r=i.image[t].image;n.texImage2D(34069+t,e+1,m,r.width,r.height,0,p,f,r.data)}}else{n.texImage2D(34069+t,0,m,p,f,u[t]);for(let e=0;e<y.length;e++){const i=y[e];n.texImage2D(34069+t,e+1,m,p,f,i.image[t])}}e.__maxMipLevel=y.length}b(i,d)&&x(34067,i,h.width,h.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function j(e,r,a,s){const l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=w(r.texture.internalFormat,l,c);n.texImage2D(s,0,u,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function H(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){let r=33189;if(i){const e=n.depthTexture;e&&e.isDepthTexture&&(e.type===Pt?r=36012:e.type===Lt&&(r=33190));const i=q(n);t.renderbufferStorageMultisample(36161,i,r,n.width,n.height)}else t.renderbufferStorage(36161,r,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){const e=q(n);t.renderbufferStorageMultisample(36161,e,35056,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{const e=o.convert(n.texture.format),r=o.convert(n.texture.type),a=w(n.texture.internalFormat,e,r);if(i){const e=q(n);t.renderbufferStorageMultisample(36161,e,a,n.width,n.height)}else t.renderbufferStorage(36161,a,n.width,n.height)}t.bindRenderbuffer(36161,null)}function U(e,n){const r=n&&n.isWebGLCubeRenderTarget;if(r)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),P(n.depthTexture,0);const o=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Ut)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(n.depthTexture.format!==Vt)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}function V(e){const n=i.get(e),r=!0===e.isWebGLCubeRenderTarget;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");U(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(let i=0;i<6;i++)t.bindFramebuffer(36160,n.__webglFramebuffer[i]),n.__webglDepthbuffer[i]=t.createRenderbuffer(),H(n.__webglDepthbuffer[i],e,!1)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),H(n.__webglDepthbuffer,e,!1);t.bindFramebuffer(36160,null)}function G(e){const r=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",E),l.__webglTexture=t.createTexture(),a.memory.textures++;const c=!0===e.isWebGLCubeRenderTarget,u=!0===e.isWebGLMultisampleRenderTarget,h=g(e)||s;if(!s||e.texture.format!==zt||e.texture.type!==Pt&&e.texture.type!==Ot||(e.texture.format=Bt,console.warn("THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.")),c){r.__webglFramebuffer=[];for(let e=0;e<6;e++)r.__webglFramebuffer[e]=t.createFramebuffer()}else if(r.__webglFramebuffer=t.createFramebuffer(),u)if(s){r.__webglMultisampledFramebuffer=t.createFramebuffer(),r.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,r.__webglColorRenderbuffer);const n=o.convert(e.texture.format),i=o.convert(e.texture.type),a=w(e.texture.internalFormat,n,i),s=q(e);t.renderbufferStorageMultisample(36161,s,a,e.width,e.height),t.bindFramebuffer(36160,r.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,r.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(r.__webglDepthRenderbuffer=t.createRenderbuffer(),H(r.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),N(34067,e.texture,h);for(let t=0;t<6;t++)j(r.__webglFramebuffer[t],e,36064,34069+t);b(e.texture,h)&&x(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),N(3553,e.texture,h),j(r.__webglFramebuffer,e,36064,3553),b(e.texture,h)&&x(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&V(e)}function W(t){const e=t.texture,r=g(t)||s;if(b(e,r)){const r=t.isWebGLCubeRenderTarget?34067:3553,o=i.get(e).__webglTexture;n.bindTexture(r,o),x(r,e,t.width,t.height),n.bindTexture(r,null)}}function $(e){if(e.isWebGLMultisampleRenderTarget)if(s){const n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);const r=e.width,o=e.height;let a=16384;e.depthBuffer&&(a|=256),e.stencilBuffer&&(a|=1024),t.blitFramebuffer(0,0,r,o,0,0,r,o,a,9728),t.bindFramebuffer(36160,n.__webglMultisampledFramebuffer)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function q(t){return s&&t.isWebGLMultisampleRenderTarget?Math.min(h,t.samples):0}function Y(t){const e=a.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}let X=!1,Z=!1;function J(t,e){t&&t.isWebGLRenderTarget&&(!1===X&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),X=!0),t=t.texture),P(t,e)}function K(t,e){t&&t.isWebGLCubeRenderTarget&&(!1===Z&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),Z=!0),t=t.texture),k(t,e)}this.allocateTextureUnit=L,this.resetTextureUnits=C,this.setTexture2D=P,this.setTexture2DArray=O,this.setTexture3D=R,this.setTextureCube=k,this.setupRenderTarget=G,this.updateRenderTargetMipmap=W,this.updateMultisampleRenderTarget=$,this.safeSetTexture2D=J,this.safeSetTextureCube=K}function du(t,e,n){const i=n.isWebGL2;function r(t){let n;if(t===Et)return 5121;if(t===Rt)return 32819;if(t===kt)return 32820;if(t===Dt)return 33635;if(t===St)return 5120;if(t===Tt)return 5122;if(t===At)return 5123;if(t===Ct)return 5124;if(t===Lt)return 5125;if(t===Pt)return 5126;if(t===Ot)return i?5131:(n=e.get("OES_texture_half_float"),null!==n?n.HALF_FLOAT_OES:null);if(t===Nt)return 6406;if(t===zt)return 6407;if(t===Bt)return 6408;if(t===Ft)return 6409;if(t===jt)return 6410;if(t===Ut)return 6402;if(t===Vt)return 34041;if(t===Gt)return 6403;if(t===Wt)return 36244;if(t===$t)return 33319;if(t===qt)return 33320;if(t===Yt)return 36248;if(t===Xt)return 36249;if(t===Zt||t===Jt||t===Kt||t===Qt){if(n=e.get("WEBGL_compressed_texture_s3tc"),null===n)return null;if(t===Zt)return n.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Jt)return n.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Kt)return n.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Qt)return n.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(t===te||t===ee||t===ne||t===ie){if(n=e.get("WEBGL_compressed_texture_pvrtc"),null===n)return null;if(t===te)return n.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===ee)return n.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===ne)return n.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===ie)return n.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===re)return n=e.get("WEBGL_compressed_texture_etc1"),null!==n?n.COMPRESSED_RGB_ETC1_WEBGL:null;if((t===oe||t===ae)&&(n=e.get("WEBGL_compressed_texture_etc"),null!==n)){if(t===oe)return n.COMPRESSED_RGB8_ETC2;if(t===ae)return n.COMPRESSED_RGBA8_ETC2_EAC}return t===se||t===le||t===ce||t===ue||t===he||t===de||t===pe||t===fe||t===me||t===ve||t===ge||t===ye||t===be||t===xe||t===_e||t===Me||t===Ee||t===Se||t===Te||t===Ae||t===Ce||t===Le||t===Pe||t===Oe||t===Re||t===ke||t===De||t===Ie?(n=e.get("WEBGL_compressed_texture_astc"),null!==n?t:null):t===we?(n=e.get("EXT_texture_compression_bptc"),null!==n?t:null):t===It?i?34042:(n=e.get("WEBGL_depth_texture"),null!==n?n.UNSIGNED_INT_24_8_WEBGL:null):void 0}return{convert:r}}function pu(t=[]){_o.call(this),this.cameras=t}function fu(){Zi.call(this),this.type="Group"}function mu(){this._targetRay=null,this._grip=null,this._hand=null}function vu(t,e){const n=this;let i=null,r=1,o=null,a="local-floor",s=null;const l=[],c=new Map,u=new _o;u.layers.enable(1),u.viewport=new qn;const h=new _o;h.layers.enable(2),h.viewport=new qn;const d=[u,h],p=new pu;p.layers.enable(1),p.layers.enable(2);let f=null,m=null;function v(t){const e=c.get(t.inputSource);e&&e.dispatchEvent({type:t.type,data:t.inputSource})}function g(){c.forEach(function(t,e){t.disconnect(e)}),c.clear(),f=null,m=null,t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),S.stop(),n.isPresenting=!1,n.dispatchEvent({type:"sessionend"})}function y(t){const e=i.inputSources;for(let n=0;n<l.length;n++)c.set(e[n],l[n]);for(let n=0;n<t.removed.length;n++){const e=t.removed[n],i=c.get(e);i&&(i.dispatchEvent({type:"disconnected",data:e}),c.delete(e))}for(let n=0;n<t.added.length;n++){const e=t.added[n],i=c.get(e);i&&i.dispatchEvent({type:"connected",data:e})}}this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=l[t];return void 0===e&&(e=new mu,l[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=l[t];return void 0===e&&(e=new mu,l[t]=e),e.getGripSpace()},this.getHand=function(t){let e=l[t];return void 0===e&&(e=new mu,l[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){r=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){a=t,!0===n.isPresenting&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return o},this.getSession=function(){return i},this.setSession=async function(t){if(i=t,null!==i){i.addEventListener("select",v),i.addEventListener("selectstart",v),i.addEventListener("selectend",v),i.addEventListener("squeeze",v),i.addEventListener("squeezestart",v),i.addEventListener("squeezeend",v),i.addEventListener("end",g),i.addEventListener("inputsourceschange",y);const t=e.getContextAttributes();!0!==t.xrCompatible&&await e.makeXRCompatible();const s={antialias:t.antialias,alpha:t.alpha,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:r},l=new XRWebGLLayer(i,e,s);i.updateRenderState({baseLayer:l}),o=await i.requestReferenceSpace(a),S.setContext(i),S.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}};const b=new Jn,x=new Jn;function w(t,e,n){b.setFromMatrixPosition(e.matrixWorld),x.setFromMatrixPosition(n.matrixWorld);const i=b.distanceTo(x),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert();const v=a+f,g=s+f,y=d-m,w=p+(i-m),_=l*s/g*v,M=c*s/g*v;t.projectionMatrix.makePerspective(y,w,_,M,v,g)}function _(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.getCamera=function(t){p.near=h.near=u.near=t.near,p.far=h.far=u.far=t.far,f===p.near&&m===p.far||(i.updateRenderState({depthNear:p.near,depthFar:p.far}),f=p.near,m=p.far);const e=t.parent,n=p.cameras;_(p,e);for(let i=0;i<n.length;i++)_(n[i],e);t.matrixWorld.copy(p.matrixWorld),t.matrix.copy(p.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale);const r=t.children;for(let i=0,o=r.length;i<o;i++)r[i].updateMatrixWorld(!0);return 2===n.length?w(p,u,h):p.projectionMatrix.copy(u.projectionMatrix),p};let M=null;function E(e,n){if(s=n.getViewerPose(o),null!==s){const e=s.views,n=i.renderState.baseLayer;t.setFramebuffer(n.framebuffer);let r=!1;e.length!==p.cameras.length&&(p.cameras.length=0,r=!0);for(let t=0;t<e.length;t++){const i=e[t],o=n.getViewport(i),a=d[t];a.matrix.fromArray(i.transform.matrix),a.projectionMatrix.fromArray(i.projectionMatrix),a.viewport.set(o.x,o.y,o.width,o.height),0===t&&p.matrix.copy(a.matrix),!0===r&&p.cameras.push(a)}}const r=i.inputSources;for(let t=0;t<l.length;t++){const e=l[t],i=r[t];e.update(i,n,o)}M&&M(e,n)}const S=new Ro;S.setAnimationLoop(E),this.setAnimationLoop=function(t){M=t},this.dispose=function(){}}function gu(t){function e(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function n(t,e,n,m){e.isMeshBasicMaterial?i(t,e):e.isMeshLambertMaterial?(i(t,e),l(t,e)):e.isMeshToonMaterial?(i(t,e),u(t,e)):e.isMeshPhongMaterial?(i(t,e),c(t,e)):e.isMeshStandardMaterial?(i(t,e),e.isMeshPhysicalMaterial?d(t,e):h(t,e)):e.isMeshMatcapMaterial?(i(t,e),p(t,e)):e.isMeshDepthMaterial?(i(t,e),f(t,e)):e.isMeshDistanceMaterial?(i(t,e),v(t,e)):e.isMeshNormalMaterial?(i(t,e),g(t,e)):e.isLineBasicMaterial?(r(t,e),e.isLineDashedMaterial&&o(t,e)):e.isPointsMaterial?a(t,e,n,m):e.isSpriteMaterial?s(t,e):e.isShadowMaterial?(t.color.value.copy(e.color),t.opacity.value=e.opacity):e.isShaderMaterial&&(e.uniformsNeedUpdate=!1)}function i(e,n){e.opacity.value=n.opacity,n.color&&e.diffuse.value.copy(n.color),n.emissive&&e.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(e.map.value=n.map),n.alphaMap&&(e.alphaMap.value=n.alphaMap),n.specularMap&&(e.specularMap.value=n.specularMap);const i=t.get(n).envMap;if(i){e.envMap.value=i,e.flipEnvMap.value=i.isCubeTexture&&i._needsFlipEnvMap?-1:1,e.reflectivity.value=n.reflectivity,e.refractionRatio.value=n.refractionRatio;const r=t.get(i).__maxMipLevel;void 0!==r&&(e.maxMipLevel.value=r)}let r,o;n.lightMap&&(e.lightMap.value=n.lightMap,e.lightMapIntensity.value=n.lightMapIntensity),n.aoMap&&(e.aoMap.value=n.aoMap,e.aoMapIntensity.value=n.aoMapIntensity),n.map?r=n.map:n.specularMap?r=n.specularMap:n.displacementMap?r=n.displacementMap:n.normalMap?r=n.normalMap:n.bumpMap?r=n.bumpMap:n.roughnessMap?r=n.roughnessMap:n.metalnessMap?r=n.metalnessMap:n.alphaMap?r=n.alphaMap:n.emissiveMap?r=n.emissiveMap:n.clearcoatMap?r=n.clearcoatMap:n.clearcoatNormalMap?r=n.clearcoatNormalMap:n.clearcoatRoughnessMap&&(r=n.clearcoatRoughnessMap),void 0!==r&&(r.isWebGLRenderTarget&&(r=r.texture),!0===r.matrixAutoUpdate&&r.updateMatrix(),e.uvTransform.value.copy(r.matrix)),n.aoMap?o=n.aoMap:n.lightMap&&(o=n.lightMap),void 0!==o&&(o.isWebGLRenderTarget&&(o=o.texture),!0===o.matrixAutoUpdate&&o.updateMatrix(),e.uv2Transform.value.copy(o.matrix))}function r(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function o(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function a(t,e,n,i){let r;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*n,t.scale.value=.5*i,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?r=e.map:e.alphaMap&&(r=e.alphaMap),void 0!==r&&(!0===r.matrixAutoUpdate&&r.updateMatrix(),t.uvTransform.value.copy(r.matrix))}function s(t,e){let n;t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.map?n=e.map:e.alphaMap&&(n=e.alphaMap),void 0!==n&&(!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function l(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function c(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function u(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function h(e,n){e.roughness.value=n.roughness,e.metalness.value=n.metalness,n.roughnessMap&&(e.roughnessMap.value=n.roughnessMap),n.metalnessMap&&(e.metalnessMap.value=n.metalnessMap),n.emissiveMap&&(e.emissiveMap.value=n.emissiveMap),n.bumpMap&&(e.bumpMap.value=n.bumpMap,e.bumpScale.value=n.bumpScale,n.side===m&&(e.bumpScale.value*=-1)),n.normalMap&&(e.normalMap.value=n.normalMap,e.normalScale.value.copy(n.normalScale),n.side===m&&e.normalScale.value.negate()),n.displacementMap&&(e.displacementMap.value=n.displacementMap,e.displacementScale.value=n.displacementScale,e.displacementBias.value=n.displacementBias);const i=t.get(n).envMap;i&&(e.envMapIntensity.value=n.envMapIntensity)}function d(t,e){h(t,e),t.reflectivity.value=e.reflectivity,t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.sheen&&t.sheen.value.copy(e.sheen),e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap),e.clearcoatNormalMap&&(t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),t.clearcoatNormalMap.value=e.clearcoatNormalMap,e.side===m&&t.clearcoatNormalScale.value.negate()),t.transmission.value=e.transmission,e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap)}function p(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function f(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function v(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function g(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===m&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===m&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}return{refreshFogUniforms:e,refreshMaterialUniforms:n}}function yu(){const t=document.createElementNS("http://www.w3.org/1999/xhtml","canvas");return t.style.display="block",t}function bu(t){t=t||{};const e=void 0!==t.canvas?t.canvas:yu(),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,o=void 0===t.stencil||t.stencil,a=void 0!==t.antialias&&t.antialias,s=void 0===t.premultipliedAlpha||t.premultipliedAlpha,l=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,c=void 0!==t.powerPreference?t.powerPreference:"default",u=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat;let h=null,d=null;const p=[];this.domElement=e,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.outputEncoding=Ze,this.physicallyCorrectLights=!1,this.toneMapping=K,this.toneMappingExposure=1,this.maxMorphTargets=8,this.maxMorphNormals=4;const f=this;let m=!1,v=null,g=0,y=0,b=null,x=null,w=-1,_=null;const M=new qn,E=new qn;let S=null,T=e.width,A=e.height,C=1,L=null,P=null;const O=new qn(0,0,T,A),R=new qn(0,0,T,A);let k=!1;const D=new Oo;let I=!1,N=!1;const z=new Si,B=new Jn,F={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function j(){return null===b?C:1}let H,U,V,G,W,$,q,Y,X,Z,J,Q,tt,et,nt,it,rt,ot,at,st,lt,ct=n;function ut(t,n){for(let i=0;i<t.length;i++){const r=t[i],o=e.getContext(r,n);if(null!==o)return o}return null}try{const t={alpha:i,depth:r,stencil:o,antialias:a,premultipliedAlpha:s,preserveDrawingBuffer:l,powerPreference:c,failIfMajorPerformanceCaveat:u};if(e.addEventListener("webglcontextlost",ft,!1),e.addEventListener("webglcontextrestored",mt,!1),null===ct){const e=["webgl2","webgl","experimental-webgl"];if(!0===f.isWebGL1Renderer&&e.shift(),ct=ut(e,t),null===ct)throw ut(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}void 0===ct.getShaderPrecisionFormat&&(ct.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(kt){throw console.error("THREE.WebGLRenderer: "+kt.message),kt}function ht(){H=new hl(ct),U=new ll(ct,H,t),H.init(U),st=new du(ct,H,U),V=new uu(ct,H,U),V.scissor(E.copy(R).multiplyScalar(C).floor()),V.viewport(M.copy(O).multiplyScalar(C).floor()),G=new fl(ct),W=new qc,$=new hu(ct,H,V,W,U,st,G),q=new ul(f),Y=new ko(ct,U),lt=new al(ct,H,Y,U),X=new dl(ct,Y,G,lt),Z=new yl(ct,X,Y,G),rt=new gl(ct),nt=new cl(W),J=new $c(f,q,H,U,lt,nt),Q=new gu(W),tt=new Jc(W),et=new ru(H,U),it=new ol(f,q,V,Z,s),ot=new sl(ct,H,G,U),at=new pl(ct,H,G,U),G.programs=J.programs,f.capabilities=U,f.extensions=H,f.properties=W,f.renderLists=tt,f.state=V,f.info=G}ht();const dt=new vu(f,ct);this.xr=dt;const pt=new cu(f,Z,U.maxTextureSize);function ft(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),m=!0}function mt(){console.log("THREE.WebGLRenderer: Context Restored."),m=!1,ht()}function vt(t){const e=t.target;e.removeEventListener("dispose",vt),gt(e)}function gt(t){yt(t),W.remove(t)}function yt(t){const e=W.get(t).program;void 0!==e&&J.releaseProgram(e)}function bt(t,e){t.render(function(t){f.renderBufferImmediate(t,e)})}this.shadowMap=pt,this.getContext=function(){return ct},this.getContextAttributes=function(){return ct.getContextAttributes()},this.forceContextLoss=function(){const t=H.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=H.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return C},this.setPixelRatio=function(t){void 0!==t&&(C=t,this.setSize(T,A,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new jn),t.set(T,A)},this.setSize=function(t,n,i){dt.isPresenting?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(T=t,A=n,e.width=Math.floor(t*C),e.height=Math.floor(n*C),!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new jn),t.set(T*C,A*C).floor()},this.setDrawingBufferSize=function(t,n,i){T=t,A=n,C=i,e.width=Math.floor(t*i),e.height=Math.floor(n*i),this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new qn),t.copy(M)},this.getViewport=function(t){return t.copy(O)},this.setViewport=function(t,e,n,i){t.isVector4?O.set(t.x,t.y,t.z,t.w):O.set(t,e,n,i),V.viewport(M.copy(O).multiplyScalar(C).floor())},this.getScissor=function(t){return t.copy(R)},this.setScissor=function(t,e,n,i){t.isVector4?R.set(t.x,t.y,t.z,t.w):R.set(t,e,n,i),V.scissor(E.copy(R).multiplyScalar(C).floor())},this.getScissorTest=function(){return k},this.setScissorTest=function(t){V.setScissorTest(k=t)},this.setOpaqueSort=function(t){L=t},this.setTransparentSort=function(t){P=t},this.getClearColor=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getClearColor() now requires a Color as an argument"),t=new yr),t.copy(it.getClearColor())},this.setClearColor=function(){it.setClearColor.apply(it,arguments)},this.getClearAlpha=function(){return it.getClearAlpha()},this.setClearAlpha=function(){it.setClearAlpha.apply(it,arguments)},this.clear=function(t,e,n){let i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),ct.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ft,!1),e.removeEventListener("webglcontextrestored",mt,!1),tt.dispose(),et.dispose(),W.dispose(),q.dispose(),Z.dispose(),lt.dispose(),dt.dispose(),_t.stop()},this.renderBufferImmediate=function(t,e){lt.initAttributes();const n=W.get(t);t.hasPositions&&!n.position&&(n.position=ct.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=ct.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=ct.createBuffer()),t.hasColors&&!n.color&&(n.color=ct.createBuffer());const i=e.getAttributes();t.hasPositions&&(ct.bindBuffer(34962,n.position),ct.bufferData(34962,t.positionArray,35048),lt.enableAttribute(i.position),ct.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(ct.bindBuffer(34962,n.normal),ct.bufferData(34962,t.normalArray,35048),lt.enableAttribute(i.normal),ct.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(ct.bindBuffer(34962,n.uv),ct.bufferData(34962,t.uvArray,35048),lt.enableAttribute(i.uv),ct.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(ct.bindBuffer(34962,n.color),ct.bufferData(34962,t.colorArray,35048),lt.enableAttribute(i.color),ct.vertexAttribPointer(i.color,3,5126,!1,0,0)),lt.disableUnusedAttributes(),ct.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,o){null===e&&(e=F);const a=r.isMesh&&r.matrixWorld.determinant()<0,s=Ct(t,e,i,r);V.setMaterial(i,a);let l=n.index;const c=n.attributes.position;if(null===l){if(void 0===c||0===c.count)return}else if(0===l.count)return;let u,h=1;!0===i.wireframe&&(l=X.getWireframeAttribute(n),h=2),(i.morphTargets||i.morphNormals)&&rt.update(r,n,i,s),lt.setup(r,i,s,n,l);let d=ot;null!==l&&(u=Y.get(l),d=at,d.setIndex(u));const p=null!==l?l.count:c.count,f=n.drawRange.start*h,m=n.drawRange.count*h,v=null!==o?o.start*h:0,g=null!==o?o.count*h:1/0,y=Math.max(f,v),b=Math.min(p,f+m,v+g)-1,x=Math.max(0,b-y+1);if(0!==x){if(r.isMesh)!0===i.wireframe?(V.setLineWidth(i.wireframeLinewidth*j()),d.setMode(1)):d.setMode(4);else if(r.isLine){let t=i.linewidth;void 0===t&&(t=1),V.setLineWidth(t*j()),r.isLineSegments?d.setMode(1):r.isLineLoop?d.setMode(2):d.setMode(3)}else r.isPoints?d.setMode(0):r.isSprite&&d.setMode(4);if(r.isInstancedMesh)d.renderInstances(y,x,r.count);else if(n.isInstancedBufferGeometry){const t=Math.min(n.instanceCount,n._maxInstanceCount);d.renderInstances(y,x,t)}else d.render(y,x)}},this.compile=function(t,e){d=et.get(t),d.init(),t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(d.pushLight(t),t.castShadow&&d.pushShadow(t))}),d.setupLights();const n=new WeakMap;t.traverse(function(e){const i=e.material;if(i)if(Array.isArray(i))for(let r=0;r<i.length;r++){const o=i[r];!1===n.has(o)&&(At(o,t,e),n.set(o))}else!1===n.has(i)&&(At(i,t,e),n.set(i))})};let xt=null;function wt(t){dt.isPresenting||xt&&xt(t)}const _t=new Ro;function Mt(t,e,n,i){if(!1===t.visible)return;const r=t.layers.test(e.layers);if(r)if(t.isGroup)n=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)d.pushLight(t),t.castShadow&&d.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||D.intersectsSprite(t)){i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=Z.update(t),r=t.material;r.visible&&h.push(t,e,r,n,B.z,null)}}else if(t.isImmediateRenderObject)i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z),h.push(t,null,t.material,n,B.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.frame!==G.render.frame&&(t.skeleton.update(),t.skeleton.frame=G.render.frame),!t.frustumCulled||D.intersectsObject(t))){i&&B.setFromMatrixPosition(t.matrixWorld).applyMatrix4(z);const e=Z.update(t),r=t.material;if(Array.isArray(r)){const i=e.groups;for(let o=0,a=i.length;o<a;o++){const a=i[o],s=r[a.materialIndex];s&&s.visible&&h.push(t,e,s,n,B.z,a)}}else r.visible&&h.push(t,e,r,n,B.z,null)}const o=t.children;for(let a=0,s=o.length;a<s;a++)Mt(o[a],e,n,i)}function St(t,e,n){const i=!0===e.isScene?e.overrideMaterial:null;for(let r=0,o=t.length;r<o;r++){const o=t[r],a=o.object,s=o.geometry,l=null===i?o.material:i,c=o.group;if(n.isArrayCamera){const t=n.cameras;for(let n=0,i=t.length;n<i;n++){const i=t[n];a.layers.test(i.layers)&&(V.viewport(M.copy(i.viewport)),d.setupLightsView(i),Tt(a,e,i,s,l,c))}}else Tt(a,e,n,s,l,c)}}function Tt(t,e,n,i,r,o){if(t.onBeforeRender(f,e,n,i,r,o),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){const i=Ct(n,e,r,t);V.setMaterial(r),lt.reset(),bt(t,i)}else f.renderBufferDirect(n,e,i,r,t,o);t.onAfterRender(f,e,n,i,r,o)}function At(t,e,n){!0!==e.isScene&&(e=F);const i=W.get(t),r=d.state.lights,o=d.state.shadowsArray,a=r.state.version,s=J.getParameters(t,r.state,o,e,n),l=J.getProgramCacheKey(s);let c=i.program,u=!0;if(i.environment=t.isMeshStandardMaterial?e.environment:null,i.fog=e.fog,i.envMap=q.get(t.envMap||i.environment),void 0===c)t.addEventListener("dispose",vt);else if(c.cacheKey!==l)yt(t);else if(i.lightsStateVersion!==a)u=!1;else{if(void 0!==s.shaderID)return;u=!1}u&&(s.uniforms=J.getUniforms(t),t.onBeforeCompile(s,f),c=J.acquireProgram(s,l),i.program=c,i.uniforms=s.uniforms,i.outputEncoding=s.outputEncoding);const h=i.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=nt.numPlanes,i.numIntersection=nt.numIntersection,h.clippingPlanes=nt.uniform),i.needsLights=Rt(t),i.lightsStateVersion=a,i.needsLights&&(h.ambientLightColor.value=r.state.ambient,h.lightProbe.value=r.state.probe,h.directionalLights.value=r.state.directional,h.directionalLightShadows.value=r.state.directionalShadow,h.spotLights.value=r.state.spot,h.spotLightShadows.value=r.state.spotShadow,h.rectAreaLights.value=r.state.rectArea,h.ltc_1.value=r.state.rectAreaLTC1,h.ltc_2.value=r.state.rectAreaLTC2,h.pointLights.value=r.state.point,h.pointLightShadows.value=r.state.pointShadow,h.hemisphereLights.value=r.state.hemi,h.directionalShadowMap.value=r.state.directionalShadowMap,h.directionalShadowMatrix.value=r.state.directionalShadowMatrix,h.spotShadowMap.value=r.state.spotShadowMap,h.spotShadowMatrix.value=r.state.spotShadowMatrix,h.pointShadowMap.value=r.state.pointShadowMap,h.pointShadowMatrix.value=r.state.pointShadowMatrix);const p=i.program.getUniforms(),m=gc.seqWithValue(p.seq,h);i.uniformsList=m}function Ct(t,e,n,i){!0!==e.isScene&&(e=F),$.resetTextureUnits();const r=e.fog,o=n.isMeshStandardMaterial?e.environment:null,a=null===b?f.outputEncoding:b.texture.encoding,s=q.get(n.envMap||o),l=W.get(n),c=d.state.lights;if(!0===I&&(!0===N||t!==_)){const e=t===_&&n.id===w;nt.setState(n,t,e)}n.version===l.__version?n.fog&&l.fog!==r?At(n,e,i):l.environment!==o?At(n,e,i):l.needsLights&&l.lightsStateVersion!==c.state.version?At(n,e,i):void 0===l.numClippingPlanes||l.numClippingPlanes===nt.numPlanes&&l.numIntersection===nt.numIntersection?l.outputEncoding!==a?At(n,e,i):l.envMap!==s&&At(n,e,i):At(n,e,i):(At(n,e,i),l.__version=n.version);let u=!1,h=!1,p=!1;const m=l.program,v=m.getUniforms(),g=l.uniforms;if(V.useProgram(m.program)&&(u=!0,h=!0,p=!0),n.id!==w&&(w=n.id,h=!0),u||_!==t){if(v.setValue(ct,"projectionMatrix",t.projectionMatrix),U.logarithmicDepthBuffer&&v.setValue(ct,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),_!==t&&(_=t,h=!0,p=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshStandardMaterial||n.envMap){const e=v.map.cameraPosition;void 0!==e&&e.setValue(ct,B.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&v.setValue(ct,"isOrthographic",!0===t.isOrthographicCamera),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.isShadowMaterial||n.skinning)&&v.setValue(ct,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){v.setOptional(ct,i,"bindMatrix"),v.setOptional(ct,i,"bindMatrixInverse");const t=i.skeleton;if(t){const e=t.bones;if(U.floatVertexTextures){if(null===t.boneTexture){let n=Math.sqrt(4*e.length);n=Fn.ceilPowerOfTwo(n),n=Math.max(n,4);const i=new Float32Array(n*n*4);i.set(t.boneMatrices);const r=new Co(i,n,n,Bt,Pt);t.boneMatrices=i,t.boneTexture=r,t.boneTextureSize=n}v.setValue(ct,"boneTexture",t.boneTexture,$),v.setValue(ct,"boneTextureSize",t.boneTextureSize)}else v.setOptional(ct,t,"boneMatrices")}}return(h||l.receiveShadow!==i.receiveShadow)&&(l.receiveShadow=i.receiveShadow,v.setValue(ct,"receiveShadow",i.receiveShadow)),h&&(v.setValue(ct,"toneMappingExposure",f.toneMappingExposure),l.needsLights&&Lt(g,p),r&&n.fog&&Q.refreshFogUniforms(g,r),Q.refreshMaterialUniforms(g,n,C,A),gc.upload(ct,l.uniformsList,g,$)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(gc.upload(ct,l.uniformsList,g,$),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&v.setValue(ct,"center",i.center),v.setValue(ct,"modelViewMatrix",i.modelViewMatrix),v.setValue(ct,"normalMatrix",i.normalMatrix),v.setValue(ct,"modelMatrix",i.matrixWorld),m}function Lt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.directionalLightShadows.needsUpdate=e,t.pointLights.needsUpdate=e,t.pointLightShadows.needsUpdate=e,t.spotLights.needsUpdate=e,t.spotLightShadows.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}function Rt(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}_t.setAnimationLoop(wt),"undefined"!==typeof window&&_t.setContext(window),this.setAnimationLoop=function(t){xt=t,dt.setAnimationLoop(t),null===t?_t.stop():_t.start()},this.render=function(t,e){let n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==e&&!0!==e.isCamera)return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===m)return;lt.resetDefaultState(),w=-1,_=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),!0===dt.enabled&&!0===dt.isPresenting&&(e=dt.getCamera(e)),!0===t.isScene&&t.onBeforeRender(f,t,e,n||b),d=et.get(t,p.length),d.init(),p.push(d),z.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),D.setFromProjectionMatrix(z),N=this.localClippingEnabled,I=nt.init(this.clippingPlanes,N,e),h=tt.get(t,e),h.init(),Mt(t,e,0,f.sortObjects),h.finish(),!0===f.sortObjects&&h.sort(L,P),!0===I&&nt.beginShadows();const r=d.state.shadowsArray;pt.render(r,t,e),d.setupLights(),d.setupLightsView(e),!0===I&&nt.endShadows(),!0===this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),it.render(h,t,e,i);const o=h.opaque,a=h.transparent;o.length>0&&St(o,t,e),a.length>0&&St(a,t,e),!0===t.isScene&&t.onAfterRender(f,t,e),null!==b&&($.updateRenderTargetMipmap(b),$.updateMultisampleRenderTarget(b)),V.buffers.depth.setTest(!0),V.buffers.depth.setMask(!0),V.buffers.color.setMask(!0),V.setPolygonOffset(!1),p.pop(),d=p.length>0?p[p.length-1]:null,h=null},this.setFramebuffer=function(t){v!==t&&null===b&&ct.bindFramebuffer(36160,t),v=t},this.getActiveCubeFace=function(){return g},this.getActiveMipmapLevel=function(){return y},this.getRenderList=function(){return h},this.setRenderList=function(t){h=t},this.getRenderTarget=function(){return b},this.setRenderTarget=function(t,e=0,n=0){b=t,g=e,y=n,t&&void 0===W.get(t).__webglFramebuffer&&$.setupRenderTarget(t);let i=v,r=!1;if(t){const n=W.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(i=n[e],r=!0):i=t.isWebGLMultisampleRenderTarget?W.get(t).__webglMultisampledFramebuffer:n,M.copy(t.viewport),E.copy(t.scissor),S=t.scissorTest}else M.copy(O).multiplyScalar(C).floor(),E.copy(R).multiplyScalar(C).floor(),S=k;if(x!==i&&(ct.bindFramebuffer(36160,i),x=i),V.viewport(M),V.scissor(E),V.setScissorTest(S),r){const i=W.get(t.texture);ct.framebufferTexture2D(36160,36064,34069+e,i.__webglTexture,n)}},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(!t||!t.isWebGLRenderTarget)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let s=W.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(s=s[a]),s){let a=!1;s!==x&&(ct.bindFramebuffer(36160,s),a=!0);try{const s=t.texture,l=s.format,c=s.type;if(l!==Bt&&st.convert(l)!==ct.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");const u=c===Ot&&(H.has("EXT_color_buffer_half_float")||U.isWebGL2&&H.has("EXT_color_buffer_float"));if(c!==Et&&st.convert(c)!==ct.getParameter(35738)&&(c!==Pt||!(U.isWebGL2||H.has("OES_texture_float")||H.has("WEBGL_color_buffer_float")))&&!u)return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===ct.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&ct.readPixels(e,n,i,r,st.convert(l),st.convert(c),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{a&&ct.bindFramebuffer(36160,x)}}},this.copyFramebufferToTexture=function(t,e,n=0){const i=Math.pow(2,-n),r=Math.floor(e.image.width*i),o=Math.floor(e.image.height*i),a=st.convert(e.format);$.setTexture2D(e,0),ct.copyTexImage2D(3553,n,a,t.x,t.y,r,o,0),V.unbindTexture()},this.copyTextureToTexture=function(t,e,n,i=0){const r=e.image.width,o=e.image.height,a=st.convert(n.format),s=st.convert(n.type);$.setTexture2D(n,0),ct.pixelStorei(37440,n.flipY),ct.pixelStorei(37441,n.premultiplyAlpha),ct.pixelStorei(3317,n.unpackAlignment),e.isDataTexture?ct.texSubImage2D(3553,i,t.x,t.y,r,o,a,s,e.image.data):e.isCompressedTexture?ct.compressedTexSubImage2D(3553,i,t.x,t.y,e.mipmaps[0].width,e.mipmaps[0].height,a,e.mipmaps[0].data):ct.texSubImage2D(3553,i,t.x,t.y,a,s,e.image),0===i&&n.generateMipmaps&&ct.generateMipmap(3553),V.unbindTexture()},this.initTexture=function(t){$.setTexture2D(t,0),V.unbindTexture()},this.resetState=function(){V.reset(),lt.reset()},"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}function xu(t){bu.call(this,t)}pu.prototype=Object.assign(Object.create(_o.prototype),{constructor:pu,isArrayCamera:!0}),fu.prototype=Object.assign(Object.create(Zi.prototype),{constructor:fu,isGroup:!0}),Object.assign(mu.prototype,{constructor:mu,getHandSpace:function(){return null===this._hand&&(this._hand=new fu,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand},getTargetRaySpace:function(){return null===this._targetRay&&(this._targetRay=new fu,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1),this._targetRay},getGripSpace:function(){return null===this._grip&&(this._grip=new fu,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1),this._grip},dispatchEvent:function(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this},disconnect:function(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this},update:function(t,e,n){let i=null,r=null,o=null;const a=this._targetRay,s=this._grip,l=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState)if(l&&t.hand){o=!0;for(const o of t.hand.values()){const t=e.getJointPose(o,n);if(void 0===l.joints[o.jointName]){const t=new fu;t.matrixAutoUpdate=!1,t.visible=!1,l.joints[o.jointName]=t,l.add(t)}const i=l.joints[o.jointName];null!==t&&(i.matrix.fromArray(t.transform.matrix),i.matrix.decompose(i.position,i.rotation,i.scale),i.jointRadius=t.radius),i.visible=null!==t}const i=l.joints["index-finger-tip"],r=l.joints["thumb-tip"],a=i.position.distanceTo(r.position),s=.02,c=.005;l.inputState.pinching&&a>s+c?(l.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!l.inputState.pinching&&a<=s-c&&(l.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&(i=e.getPose(t.targetRaySpace,n),null!==i&&(a.matrix.fromArray(i.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale))),null!==s&&t.gripSpace&&(r=e.getPose(t.gripSpace,n),null!==r&&(s.matrix.fromArray(r.transform.matrix),s.matrix.decompose(s.position,s.rotation,s.scale)));return null!==a&&(a.visible=null!==i),null!==s&&(s.visible=null!==r),null!==l&&(l.visible=null!==o),this}}),Object.assign(vu.prototype,Nn.prototype),xu.prototype=Object.assign(Object.create(bu.prototype),{constructor:xu,isWebGL1Renderer:!0});class wu{constructor(t,e){Object.defineProperty(this,"isFogExp2",{value:!0}),this.name="",this.color=new yr(t),this.density=void 0!==e?e:25e-5}clone(){return new wu(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class _u{constructor(t,e,n){Object.defineProperty(this,"isFog",{value:!0}),this.name="",this.color=new yr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}clone(){return new _u(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class Mu extends Zi{constructor(){super(),Object.defineProperty(this,"isScene",{value:!0}),this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0,"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.environment&&(e.object.environment=this.environment.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e}}function Eu(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.usage=Sn,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=Fn.generateUUID()}Object.defineProperty(Eu.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Eu.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setUsage:function(t){return this.usage=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.usage=t.usage,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(let i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e=0){return this.array.set(t,e),this},clone:function(t){void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const e=new this.array.constructor(t.arrayBuffers[this.array.buffer._uuid]),n=new Eu(e,this.stride);return n.setUsage(this.usage),n},onUpload:function(t){return this.onUploadCallback=t,this},toJSON:function(t){return void 0===t.arrayBuffers&&(t.arrayBuffers={}),void 0===this.array.buffer._uuid&&(this.array.buffer._uuid=Fn.generateUUID()),void 0===t.arrayBuffers[this.array.buffer._uuid]&&(t.arrayBuffers[this.array.buffer._uuid]=Array.prototype.slice.call(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}});const Su=new Jn;function Tu(t,e,n,i){this.name="",this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function Au(t){wr.call(this),this.type="SpriteMaterial",this.color=new yr(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.setValues(t)}let Cu;Object.defineProperties(Tu.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}},needsUpdate:{set:function(t){this.data.needsUpdate=t}}}),Object.assign(Tu.prototype,{isInterleavedBufferAttribute:!0,applyMatrix4:function(t){for(let e=0,n=this.data.count;e<n;e++)Su.x=this.getX(e),Su.y=this.getY(e),Su.z=this.getZ(e),Su.applyMatrix4(t),this.setXYZ(e,Su.x,Su.y,Su.z);return this},setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this},clone:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return new Sr(new this.array.constructor(t),this.itemSize,this.normalized)}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.clone(t)),new Tu(t.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)},toJSON:function(t){if(void 0===t){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interlaved buffer attribute will deinterleave buffer data.");const t=[];for(let e=0;e<this.count;e++){const n=e*this.data.stride+this.offset;for(let e=0;e<this.itemSize;e++)t.push(this.data.array[n+e])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}return void 0===t.interleavedBuffers&&(t.interleavedBuffers={}),void 0===t.interleavedBuffers[this.data.uuid]&&(t.interleavedBuffers[this.data.uuid]=this.data.toJSON(t)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}),Au.prototype=Object.create(wr.prototype),Au.prototype.constructor=Au,Au.prototype.isSpriteMaterial=!0,Au.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this};const Lu=new Jn,Pu=new Jn,Ou=new Jn,Ru=new jn,ku=new jn,Du=new Si,Iu=new Jn,Nu=new Jn,zu=new Jn,Bu=new jn,Fu=new jn,ju=new jn;function Hu(t){if(Zi.call(this),this.type="Sprite",void 0===Cu){Cu=new $r;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),e=new Eu(t,5);Cu.setIndex([0,1,2,0,2,3]),Cu.setAttribute("position",new Tu(e,3,0,!1)),Cu.setAttribute("uv",new Tu(e,2,3,!1))}this.geometry=Cu,this.material=void 0!==t?t:new Au,this.center=new jn(.5,.5)}function Uu(t,e,n,i,r,o){Ru.subVectors(t,n).addScalar(.5).multiply(i),void 0!==r?(ku.x=o*Ru.x-r*Ru.y,ku.y=r*Ru.x+o*Ru.y):ku.copy(Ru),t.copy(e),t.x+=ku.x,t.y+=ku.y,t.applyMatrix4(Du)}Hu.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Hu,isSprite:!0,raycast:function(t,e){null===t.camera&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Pu.setFromMatrixScale(this.matrixWorld),Du.copy(t.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(t.camera.matrixWorldInverse,this.matrixWorld),Ou.setFromMatrixPosition(this.modelViewMatrix),t.camera.isPerspectiveCamera&&!1===this.material.sizeAttenuation&&Pu.multiplyScalar(-Ou.z);const n=this.material.rotation;let i,r;0!==n&&(r=Math.cos(n),i=Math.sin(n));const o=this.center;Uu(Iu.set(-.5,-.5,0),Ou,o,Pu,i,r),Uu(Nu.set(.5,-.5,0),Ou,o,Pu,i,r),Uu(zu.set(.5,.5,0),Ou,o,Pu,i,r),Bu.set(0,0),Fu.set(1,0),ju.set(1,1);let a=t.ray.intersectTriangle(Iu,Nu,zu,!1,Lu);if(null===a&&(Uu(Nu.set(-.5,.5,0),Ou,o,Pu,i,r),Fu.set(0,1),a=t.ray.intersectTriangle(Iu,zu,Nu,!1,Lu),null===a))return;const s=t.ray.origin.distanceTo(Lu);s<t.near||s>t.far||e.push({distance:s,point:Lu.clone(),uv:hr.getUV(Lu,Iu,Nu,zu,Bu,Fu,ju,new jn),face:null,object:this})},copy:function(t){return Zi.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this.material=t.material,this}});const Vu=new Jn,Gu=new Jn;function Wu(){Zi.call(this),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}Wu.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Wu,isLOD:!0,copy:function(t){Zi.prototype.copy.call(this,t,!1);const e=t.levels;for(let n=0,i=e.length;n<i;n++){const t=e[n];this.addLevel(t.object.clone(),t.distance)}return this.autoUpdate=t.autoUpdate,this},addLevel:function(t,e=0){e=Math.abs(e);const n=this.levels;let i;for(i=0;i<n.length;i++)if(e<n[i].distance)break;return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getCurrentLevel:function(){return this._currentLevel},getObjectForDistance:function(t){const e=this.levels;if(e.length>0){let n,i;for(n=1,i=e.length;n<i;n++)if(t<e[n].distance)break;return e[n-1].object}return null},raycast:function(t,e){const n=this.levels;if(n.length>0){Vu.setFromMatrixPosition(this.matrixWorld);const n=t.ray.origin.distanceTo(Vu);this.getObjectForDistance(n).raycast(t,e)}},update:function(t){const e=this.levels;if(e.length>1){Vu.setFromMatrixPosition(t.matrixWorld),Gu.setFromMatrixPosition(this.matrixWorld);const n=Vu.distanceTo(Gu)/t.zoom;let i,r;for(e[0].object.visible=!0,i=1,r=e.length;i<r;i++){if(!(n>=e[i].distance))break;e[i-1].object.visible=!1,e[i].object.visible=!0}for(this._currentLevel=i-1;i<r;i++)e[i].object.visible=!1}},toJSON:function(t){const e=Zi.prototype.toJSON.call(this,t);!1===this.autoUpdate&&(e.object.autoUpdate=!1),e.object.levels=[];const n=this.levels;for(let i=0,r=n.length;i<r;i++){const t=n[i];e.object.levels.push({object:t.object.uuid,distance:t.distance})}return e}});const $u=new Jn,qu=new qn,Yu=new qn,Xu=new Jn,Zu=new Si;function Ju(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),uo.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Si,this.bindMatrixInverse=new Si}function Ku(){Zi.call(this),this.type="Bone"}Ju.prototype=Object.assign(Object.create(uo.prototype),{constructor:Ju,isSkinnedMesh:!0,copy:function(t){return uo.prototype.copy.call(this,t),this.bindMode=t.bindMode,this.bindMatrix.copy(t.bindMatrix),this.bindMatrixInverse.copy(t.bindMatrixInverse),this.skeleton=t.skeleton,this},bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.copy(e).invert()},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){const t=new qn,e=this.geometry.attributes.skinWeight;for(let n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);const i=1/t.manhattanLength();i!==1/0?t.multiplyScalar(i):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){uo.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.copy(this.matrixWorld).invert():"detached"===this.bindMode?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},boneTransform:function(t,e){const n=this.skeleton,i=this.geometry;qu.fromBufferAttribute(i.attributes.skinIndex,t),Yu.fromBufferAttribute(i.attributes.skinWeight,t),$u.fromBufferAttribute(i.attributes.position,t).applyMatrix4(this.bindMatrix),e.set(0,0,0);for(let r=0;r<4;r++){const t=Yu.getComponent(r);if(0!==t){const i=qu.getComponent(r);Zu.multiplyMatrices(n.bones[i].matrixWorld,n.boneInverses[i]),e.addScaledVector(Xu.copy($u).applyMatrix4(Zu),t)}}return e.applyMatrix4(this.bindMatrixInverse)}}),Ku.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Ku,isBone:!0});const Qu=new Si,th=new Si;function eh(t=[],e=[]){this.uuid=Fn.generateUUID(),this.bones=t.slice(0),this.boneInverses=e,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.frame=-1,this.init()}Object.assign(eh.prototype,{init:function(){const t=this.bones,e=this.boneInverses;if(this.boneMatrices=new Float32Array(16*t.length),0===e.length)this.calculateInverses();else if(t.length!==e.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let t=0,e=this.bones.length;t<e;t++)this.boneInverses.push(new Si)}},calculateInverses:function(){this.boneInverses.length=0;for(let t=0,e=this.bones.length;t<e;t++){const e=new Si;this.bones[t]&&e.copy(this.bones[t].matrixWorld).invert(),this.boneInverses.push(e)}},pose:function(){for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&e.matrixWorld.copy(this.boneInverses[t]).invert()}for(let t=0,e=this.bones.length;t<e;t++){const e=this.bones[t];e&&(e.parent&&e.parent.isBone?(e.matrix.copy(e.parent.matrixWorld).invert(),e.matrix.multiply(e.matrixWorld)):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale))}},update:function(){const t=this.bones,e=this.boneInverses,n=this.boneMatrices,i=this.boneTexture;for(let r=0,o=t.length;r<o;r++){const i=t[r]?t[r].matrixWorld:th;Qu.multiplyMatrices(i,e[r]),Qu.toArray(n,16*r)}null!==i&&(i.needsUpdate=!0)},clone:function(){return new eh(this.bones,this.boneInverses)},getBoneByName:function(t){for(let e=0,n=this.bones.length;e<n;e++){const n=this.bones[e];if(n.name===t)return n}},dispose:function(){null!==this.boneTexture&&(this.boneTexture.dispose(),this.boneTexture=null)},fromJSON:function(t,e){this.uuid=t.uuid;for(let n=0,i=t.bones.length;n<i;n++){const i=t.bones[n];let r=e[i];void 0===r&&(console.warn("THREE.Skeleton: No bone found with UUID:",i),r=new Ku),this.bones.push(r),this.boneInverses.push((new Si).fromArray(t.boneInverses[n]))}return this.init(),this},toJSON:function(){const t={metadata:{version:4.5,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};t.uuid=this.uuid;const e=this.bones,n=this.boneInverses;for(let i=0,r=e.length;i<r;i++){const r=e[i];t.bones.push(r.uuid);const o=n[i];t.boneInverses.push(o.toArray())}return t}});const nh=new Si,ih=new Si,rh=[],oh=new uo;function ah(t,e,n){uo.call(this,t,e),this.instanceMatrix=new Sr(new Float32Array(16*n),16),this.instanceColor=null,this.count=n,this.frustumCulled=!1}function sh(t){wr.call(this),this.type="LineBasicMaterial",this.color=new yr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.morphTargets=!1,this.setValues(t)}ah.prototype=Object.assign(Object.create(uo.prototype),{constructor:ah,isInstancedMesh:!0,copy:function(t){return uo.prototype.copy.call(this,t),this.instanceMatrix.copy(t.instanceMatrix),null!==t.instanceColor&&(this.instanceColor=t.instanceColor.clone()),this.count=t.count,this},getColorAt:function(t,e){e.fromArray(this.instanceColor.array,3*t)},getMatrixAt:function(t,e){e.fromArray(this.instanceMatrix.array,16*t)},raycast:function(t,e){const n=this.matrixWorld,i=this.count;if(oh.geometry=this.geometry,oh.material=this.material,void 0!==oh.material)for(let r=0;r<i;r++){this.getMatrixAt(r,nh),ih.multiplyMatrices(n,nh),oh.matrixWorld=ih,oh.raycast(t,rh);for(let t=0,n=rh.length;t<n;t++){const n=rh[t];n.instanceId=r,n.object=this,e.push(n)}rh.length=0}},setColorAt:function(t,e){null===this.instanceColor&&(this.instanceColor=new Sr(new Float32Array(3*this.count),3)),e.toArray(this.instanceColor.array,3*t)},setMatrixAt:function(t,e){e.toArray(this.instanceMatrix.array,16*t)},updateMorphTargets:function(){},dispose:function(){this.dispatchEvent({type:"dispose"})}}),sh.prototype=Object.create(wr.prototype),sh.prototype.constructor=sh,sh.prototype.isLineBasicMaterial=!0,sh.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.morphTargets=t.morphTargets,this};const lh=new Jn,ch=new Jn,uh=new Si,hh=new Ei,dh=new vi;function ph(t=new $r,e=new sh){Zi.call(this),this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}ph.prototype=Object.assign(Object.create(Zi.prototype),{constructor:ph,isLine:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[0];for(let t=1,i=e.count;t<i;t++)lh.fromBufferAttribute(e,t-1),ch.fromBufferAttribute(e,t),n[t]=n[t-1],n[t]+=lh.distanceTo(ch);t.setAttribute("lineDistance",new Dr(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.Line.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Line.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),dh.copy(n.boundingSphere),dh.applyMatrix4(i),dh.radius+=r,!1===t.ray.intersectsSphere(dh))return;uh.copy(i).invert(),hh.copy(t.ray).applyMatrix4(uh);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,s=new Jn,l=new Jn,c=new Jn,u=new Jn,h=this.isLineSegments?2:1;if(n.isBufferGeometry){const i=n.index,r=n.attributes,o=r.position;if(null!==i){const n=i.array;for(let i=0,r=n.length-1;i<r;i+=h){const r=n[i],h=n[i+1];s.fromBufferAttribute(o,r),l.fromBufferAttribute(o,h);const d=hh.distanceSqToSegment(s,l,u,c);if(d>a)continue;u.applyMatrix4(this.matrixWorld);const p=t.ray.origin.distanceTo(u);p<t.near||p>t.far||e.push({distance:p,point:c.clone().applyMatrix4(this.matrixWorld),index:i,face:null,faceIndex:null,object:this})}}else for(let n=0,d=o.count-1;n<d;n+=h){s.fromBufferAttribute(o,n),l.fromBufferAttribute(o,n+1);const i=hh.distanceSqToSegment(s,l,u,c);if(i>a)continue;u.applyMatrix4(this.matrixWorld);const r=t.ray.origin.distanceTo(u);r<t.near||r>t.far||e.push({distance:r,point:c.clone().applyMatrix4(this.matrixWorld),index:n,face:null,faceIndex:null,object:this})}}else n.isGeometry&&console.error("THREE.Line.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Line.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}});const fh=new Jn,mh=new Jn;function vh(t,e){ph.call(this,t,e),this.type="LineSegments"}function gh(t,e){ph.call(this,t,e),this.type="LineLoop"}function yh(t){wr.call(this),this.type="PointsMaterial",this.color=new yr(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.setValues(t)}vh.prototype=Object.assign(Object.create(ph.prototype),{constructor:vh,isLineSegments:!0,computeLineDistances:function(){const t=this.geometry;if(t.isBufferGeometry)if(null===t.index){const e=t.attributes.position,n=[];for(let t=0,i=e.count;t<i;t+=2)fh.fromBufferAttribute(e,t),mh.fromBufferAttribute(e,t+1),n[t]=0===t?0:n[t-1],n[t+1]=n[t]+fh.distanceTo(mh);t.setAttribute("lineDistance",new Dr(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else t.isGeometry&&console.error("THREE.LineSegments.computeLineDistances() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");return this}}),gh.prototype=Object.assign(Object.create(ph.prototype),{constructor:gh,isLineLoop:!0}),yh.prototype=Object.create(wr.prototype),yh.prototype.constructor=yh,yh.prototype.isPointsMaterial=!0,yh.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.alphaMap=t.alphaMap,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this};const bh=new Si,xh=new Ei,wh=new vi,_h=new Jn;function Mh(t=new $r,e=new yh){Zi.call(this),this.type="Points",this.geometry=t,this.material=e,this.updateMorphTargets()}function Eh(t,e,n,i,r,o,a){const s=xh.distanceSqToPoint(t);if(s<n){const n=new Jn;xh.closestPointToPoint(t,n),n.applyMatrix4(i);const l=r.ray.origin.distanceTo(n);if(l<r.near||l>r.far)return;o.push({distance:l,distanceToRay:Math.sqrt(s),point:n,index:e,face:null,object:a})}}function Sh(t,e,n,i,r,o,a,s,l){Wn.call(this,t,e,n,i,r,o,a,s,l),this.format=void 0!==a?a:zt,this.minFilter=void 0!==o?o:bt,this.magFilter=void 0!==r?r:bt,this.generateMipmaps=!1;const c=this;function u(){c.needsUpdate=!0,t.requestVideoFrameCallback(u)}"requestVideoFrameCallback"in t&&t.requestVideoFrameCallback(u)}function Th(t,e,n,i,r,o,a,s,l,c,u,h){Wn.call(this,null,o,a,s,l,c,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function Ah(t,e,n,i,r,o,a,s,l){Wn.call(this,t,e,n,i,r,o,a,s,l),this.needsUpdate=!0}function Ch(t,e,n,i,r,o,a,s,l,c){if(c=void 0!==c?c:Ut,c!==Ut&&c!==Vt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Ut&&(n=At),void 0===n&&c===Vt&&(n=It),Wn.call(this,null,i,r,o,a,s,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:ft,this.minFilter=void 0!==s?s:ft,this.flipY=!1,this.generateMipmaps=!1}Mh.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Mh,isPoints:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.material=t.material,this.geometry=t.geometry,this},raycast:function(t,e){const n=this.geometry,i=this.matrixWorld,r=t.params.Points.threshold;if(null===n.boundingSphere&&n.computeBoundingSphere(),wh.copy(n.boundingSphere),wh.applyMatrix4(i),wh.radius+=r,!1===t.ray.intersectsSphere(wh))return;bh.copy(i).invert(),xh.copy(t.ray).applyMatrix4(bh);const o=r/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o;if(n.isBufferGeometry){const r=n.index,o=n.attributes,s=o.position;if(null!==r){const n=r.array;for(let r=0,o=n.length;r<o;r++){const o=n[r];_h.fromBufferAttribute(s,o),Eh(_h,o,a,i,t,e,this)}}else for(let n=0,l=s.count;n<l;n++)_h.fromBufferAttribute(s,n),Eh(_h,n,a,i,t,e,this)}else console.error("THREE.Points.raycast() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")},updateMorphTargets:function(){const t=this.geometry;if(t.isBufferGeometry){const e=t.morphAttributes,n=Object.keys(e);if(n.length>0){const t=e[n[0]];if(void 0!==t){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let e=0,n=t.length;e<n;e++){const n=t[e].name||String(e);this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=e}}}}else{const e=t.morphTargets;void 0!==e&&e.length>0&&console.error("THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.")}}}),Sh.prototype=Object.assign(Object.create(Wn.prototype),{constructor:Sh,clone:function(){return new this.constructor(this.image).copy(this)},isVideoTexture:!0,update:function(){const t=this.image,e="requestVideoFrameCallback"in t;!1===e&&t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),Th.prototype=Object.create(Wn.prototype),Th.prototype.constructor=Th,Th.prototype.isCompressedTexture=!0,Ah.prototype=Object.create(Wn.prototype),Ah.prototype.constructor=Ah,Ah.prototype.isCanvasTexture=!0,Ch.prototype=Object.create(Wn.prototype),Ch.prototype.constructor=Ch,Ch.prototype.isDepthTexture=!0;class Lh extends $r{constructor(t=1,e=8,n=0,i=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},e=Math.max(3,e);const r=[],o=[],a=[],s=[],l=new Jn,c=new jn;o.push(0,0,0),a.push(0,0,1),s.push(.5,.5);for(let u=0,h=3;u<=e;u++,h+=3){const r=n+u/e*i;l.x=t*Math.cos(r),l.y=t*Math.sin(r),o.push(l.x,l.y,l.z),a.push(0,0,1),c.x=(o[h]/t+1)/2,c.y=(o[h+1]/t+1)/2,s.push(c.x,c.y)}for(let u=1;u<=e;u++)r.push(u,u+1,0);this.setIndex(r),this.setAttribute("position",new Dr(o,3)),this.setAttribute("normal",new Dr(a,3)),this.setAttribute("uv",new Dr(s,2))}}class Ph extends $r{constructor(t=1,e=1,n=1,i=8,r=1,o=!1,a=0,s=2*Math.PI){super(),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};const l=this;i=Math.floor(i),r=Math.floor(r);const c=[],u=[],h=[],d=[];let p=0;const f=[],m=n/2;let v=0;function g(){const o=new Jn,g=new Jn;let y=0;const b=(e-t)/n;for(let l=0;l<=r;l++){const c=[],v=l/r,y=v*(e-t)+t;for(let t=0;t<=i;t++){const e=t/i,r=e*s+a,l=Math.sin(r),f=Math.cos(r);g.x=y*l,g.y=-v*n+m,g.z=y*f,u.push(g.x,g.y,g.z),o.set(l,b,f).normalize(),h.push(o.x,o.y,o.z),d.push(e,1-v),c.push(p++)}f.push(c)}for(let t=0;t<i;t++)for(let e=0;e<r;e++){const n=f[e][t],i=f[e+1][t],r=f[e+1][t+1],o=f[e][t+1];c.push(n,i,o),c.push(i,r,o),y+=6}l.addGroup(v,y,0),v+=y}function y(n){const r=p,o=new jn,f=new Jn;let g=0;const y=!0===n?t:e,b=!0===n?1:-1;for(let t=1;t<=i;t++)u.push(0,m*b,0),h.push(0,b,0),d.push(.5,.5),p++;const x=p;for(let t=0;t<=i;t++){const e=t/i,n=e*s+a,r=Math.cos(n),l=Math.sin(n);f.x=y*l,f.y=m*b,f.z=y*r,u.push(f.x,f.y,f.z),h.push(0,b,0),o.x=.5*r+.5,o.y=.5*l*b+.5,d.push(o.x,o.y),p++}for(let t=0;t<i;t++){const e=r+t,i=x+t;!0===n?c.push(i,i+1,e):c.push(i+1,i,e),g+=3}l.addGroup(v,g,!0===n?1:2),v+=g}g(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.setAttribute("position",new Dr(u,3)),this.setAttribute("normal",new Dr(h,3)),this.setAttribute("uv",new Dr(d,2))}}class Oh extends Ph{constructor(t=1,e=1,n=8,i=1,r=!1,o=0,a=2*Math.PI){super(0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}}class Rh extends $r{constructor(t,e,n=1,i=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i};const r=[],o=[];function a(t){const n=new Jn,i=new Jn,r=new Jn;for(let o=0;o<e.length;o+=3)d(e[o+0],n),d(e[o+1],i),d(e[o+2],r),s(n,i,r,t)}function s(t,e,n,i){const r=i+1,o=[];for(let a=0;a<=r;a++){o[a]=[];const i=t.clone().lerp(n,a/r),s=e.clone().lerp(n,a/r),l=r-a;for(let t=0;t<=l;t++)o[a][t]=0===t&&a===r?i:i.clone().lerp(s,t/l)}for(let a=0;a<r;a++)for(let t=0;t<2*(r-a)-1;t++){const e=Math.floor(t/2);t%2===0?(h(o[a][e+1]),h(o[a+1][e]),h(o[a][e])):(h(o[a][e+1]),h(o[a+1][e+1]),h(o[a+1][e]))}}function l(t){const e=new Jn;for(let n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}function c(){const t=new Jn;for(let e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];const n=m(t)/2/Math.PI+.5,i=v(t)/Math.PI+.5;o.push(n,1-i)}p(),u()}function u(){for(let t=0;t<o.length;t+=6){const e=o[t+0],n=o[t+2],i=o[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}function h(t){r.push(t.x,t.y,t.z)}function d(e,n){const i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function p(){const t=new Jn,e=new Jn,n=new Jn,i=new Jn,a=new jn,s=new jn,l=new jn;for(let c=0,u=0;c<r.length;c+=9,u+=6){t.set(r[c+0],r[c+1],r[c+2]),e.set(r[c+3],r[c+4],r[c+5]),n.set(r[c+6],r[c+7],r[c+8]),a.set(o[u+0],o[u+1]),s.set(o[u+2],o[u+3]),l.set(o[u+4],o[u+5]),i.copy(t).add(e).add(n).divideScalar(3);const h=m(i);f(a,u+0,t,h),f(s,u+2,e,h),f(l,u+4,n,h)}}function f(t,e,n,i){i<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=i/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function v(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}a(i),l(n),c(),this.setAttribute("position",new Dr(r,3)),this.setAttribute("normal",new Dr(r.slice(),3)),this.setAttribute("uv",new Dr(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}}class kh extends Rh{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(r,o,t,e),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e}}}const Dh=new Jn,Ih=new Jn,Nh=new Jn,zh=new hr;class Bh extends $r{constructor(t,e){if(super(),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1,!0===t.isGeometry)return void console.error("THREE.EdgesGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const n=4,i=Math.pow(10,n),r=Math.cos(Fn.DEG2RAD*e),o=t.getIndex(),a=t.getAttribute("position"),s=o?o.count:a.count,l=[0,0,0],c=["a","b","c"],u=new Array(3),h={},d=[];for(let p=0;p<s;p+=3){o?(l[0]=o.getX(p),l[1]=o.getX(p+1),l[2]=o.getX(p+2)):(l[0]=p,l[1]=p+1,l[2]=p+2);const{a:t,b:e,c:n}=zh;if(t.fromBufferAttribute(a,l[0]),e.fromBufferAttribute(a,l[1]),n.fromBufferAttribute(a,l[2]),zh.getNormal(Nh),u[0]=`${Math.round(t.x*i)},${Math.round(t.y*i)},${Math.round(t.z*i)}`,u[1]=`${Math.round(e.x*i)},${Math.round(e.y*i)},${Math.round(e.z*i)}`,u[2]=`${Math.round(n.x*i)},${Math.round(n.y*i)},${Math.round(n.z*i)}`,u[0]!==u[1]&&u[1]!==u[2]&&u[2]!==u[0])for(let i=0;i<3;i++){const t=(i+1)%3,e=u[i],n=u[t],o=zh[c[i]],a=zh[c[t]],s=`${e}_${n}`,p=`${n}_${e}`;p in h&&h[p]?(Nh.dot(h[p].normal)<=r&&(d.push(o.x,o.y,o.z),d.push(a.x,a.y,a.z)),h[p]=null):s in h||(h[s]={index0:l[i],index1:l[t],normal:Nh.clone()})}}for(const p in h)if(h[p]){const{index0:t,index1:e}=h[p];Dh.fromBufferAttribute(a,t),Ih.fromBufferAttribute(a,e),d.push(Dh.x,Dh.y,Dh.z),d.push(Ih.x,Ih.y,Ih.z)}this.setAttribute("position",new Dr(d,3))}}const Fh={triangulate:function(t,e,n){n=n||2;const i=e&&e.length,r=i?e[0]*n:t.length;let o=jh(t,0,r,n,!0);const a=[];if(!o||o.next===o.prev)return a;let s,l,c,u,h,d,p;if(i&&(o=qh(t,e,o,n)),t.length>80*n){s=c=t[0],l=u=t[1];for(let e=n;e<r;e+=n)h=t[e],d=t[e+1],h<s&&(s=h),d<l&&(l=d),h>c&&(c=h),d>u&&(u=d);p=Math.max(c-s,u-l),p=0!==p?1/p:0}return Uh(o,a,n,s,l,p),a}};function jh(t,e,n,i,r){let o,a;if(r===vd(t,e,n,i)>0)for(o=e;o<n;o+=i)a=pd(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=pd(o,t[o],t[o+1],a);return a&&od(a,a.next)&&(fd(a),a=a.next),a}function Hh(t,e){if(!t)return t;e||(e=t);let n,i=t;do{if(n=!1,i.steiner||!od(i,i.next)&&0!==rd(i.prev,i,i.next))i=i.next;else{if(fd(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Uh(t,e,n,i,r,o,a){if(!t)return;!a&&o&&Kh(t,i,r,o);let s,l,c=t;while(t.prev!==t.next)if(s=t.prev,l=t.next,o?Gh(t,i,r,o):Vh(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),fd(t),t=l.next,c=l.next;else if(t=l,t===c){a?1===a?(t=Wh(Hh(t),e,n),Uh(t,e,n,i,r,o,2)):2===a&&$h(t,e,n,i,r,o):Uh(Hh(t),e,n,i,r,o,1);break}}function Vh(t){const e=t.prev,n=t,i=t.next;if(rd(e,n,i)>=0)return!1;let r=t.next.next;while(r!==t.prev){if(nd(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&rd(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Gh(t,e,n,i){const r=t.prev,o=t,a=t.next;if(rd(r,o,a)>=0)return!1;const s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=td(s,l,e,n,i),d=td(c,u,e,n,i);let p=t.prevZ,f=t.nextZ;while(p&&p.z>=h&&f&&f.z<=d){if(p!==t.prev&&p!==t.next&&nd(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&rd(p.prev,p,p.next)>=0)return!1;if(p=p.prevZ,f!==t.prev&&f!==t.next&&nd(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&rd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}while(p&&p.z>=h){if(p!==t.prev&&p!==t.next&&nd(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&rd(p.prev,p,p.next)>=0)return!1;p=p.prevZ}while(f&&f.z<=d){if(f!==t.prev&&f!==t.next&&nd(r.x,r.y,o.x,o.y,a.x,a.y,f.x,f.y)&&rd(f.prev,f,f.next)>=0)return!1;f=f.nextZ}return!0}function Wh(t,e,n){let i=t;do{const r=i.prev,o=i.next.next;!od(r,o)&&ad(r,i,i.next,o)&&ud(r,o)&&ud(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),fd(i),fd(i.next),i=t=o),i=i.next}while(i!==t);return Hh(i)}function $h(t,e,n,i,r,o){let a=t;do{let t=a.next.next;while(t!==a.prev){if(a.i!==t.i&&id(a,t)){let s=dd(a,t);return a=Hh(a,a.next),s=Hh(s,s.next),Uh(a,e,n,i,r,o),void Uh(s,e,n,i,r,o)}t=t.next}a=a.next}while(a!==t)}function qh(t,e,n,i){const r=[];let o,a,s,l,c;for(o=0,a=e.length;o<a;o++)s=e[o]*i,l=o<a-1?e[o+1]*i:t.length,c=jh(t,s,l,i,!1),c===c.next&&(c.steiner=!0),r.push(ed(c));for(r.sort(Yh),o=0;o<r.length;o++)Xh(r[o],n),n=Hh(n,n.next);return n}function Yh(t,e){return t.x-e.x}function Xh(t,e){if(e=Zh(t,e),e){const n=dd(e,t);Hh(e,e.next),Hh(n,n.next)}}function Zh(t,e){let n=e;const i=t.x,r=t.y;let o,a=-1/0;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){const t=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(t<=i&&t>a){if(a=t,t===i){if(r===n.y)return n;if(r===n.next.y)return n.next}o=n.x<n.next.x?n:n.next}}n=n.next}while(n!==e);if(!o)return null;if(i===a)return o;const s=o,l=o.x,c=o.y;let u,h=1/0;n=o;do{i>=n.x&&n.x>=l&&i!==n.x&&nd(r<c?i:a,r,l,c,r<c?a:i,r,n.x,n.y)&&(u=Math.abs(r-n.y)/(i-n.x),ud(n,t)&&(u<h||u===h&&(n.x>o.x||n.x===o.x&&Jh(o,n)))&&(o=n,h=u)),n=n.next}while(n!==s);return o}function Jh(t,e){return rd(t.prev,t,e.prev)<0&&rd(e.next,t,t.next)<0}function Kh(t,e,n,i){let r=t;do{null===r.z&&(r.z=td(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Qh(r)}function Qh(t){let e,n,i,r,o,a,s,l,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,i=n,s=0,e=0;e<c;e++)if(s++,i=i.nextZ,!i)break;l=c;while(s>0||l>0&&i)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1);return t}function td(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function ed(t){let e=t,n=t;do{(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next}while(e!==t);return n}function nd(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function id(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!cd(t,e)&&(ud(t,e)&&ud(e,t)&&hd(t,e)&&(rd(t.prev,t,e.prev)||rd(t,e.prev,e))||od(t,e)&&rd(t.prev,t,t.next)>0&&rd(e.prev,e,e.next)>0)}function rd(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function od(t,e){return t.x===e.x&&t.y===e.y}function ad(t,e,n,i){const r=ld(rd(t,e,n)),o=ld(rd(t,e,i)),a=ld(rd(n,i,t)),s=ld(rd(n,i,e));return r!==o&&a!==s||(!(0!==r||!sd(t,n,e))||(!(0!==o||!sd(t,i,e))||(!(0!==a||!sd(n,t,i))||!(0!==s||!sd(n,e,i)))))}function sd(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function ld(t){return t>0?1:t<0?-1:0}function cd(t,e){let n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ad(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function ud(t,e){return rd(t.prev,t,t.next)<0?rd(t,e,t.next)>=0&&rd(t,t.prev,e)>=0:rd(t,e,t.prev)<0||rd(t,t.next,e)<0}function hd(t,e){let n=t,i=!1;const r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function dd(t,e){const n=new md(t.i,t.x,t.y),i=new md(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function pd(t,e,n,i){const r=new md(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function fd(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function md(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function vd(t,e,n,i){let r=0;for(let o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}const gd={area:function(t){const e=t.length;let n=0;for(let i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return gd.area(t)<0},triangulateShape:function(t,e){const n=[],i=[],r=[];yd(t),bd(n,t);let o=t.length;e.forEach(yd);for(let s=0;s<e.length;s++)i.push(o),o+=e[s].length,bd(n,e[s]);const a=Fh.triangulate(n,i);for(let s=0;s<a.length;s+=3)r.push(a.slice(s,s+3));return r}};function yd(t){const e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function bd(t,e){for(let n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}class xd extends $r{constructor(t,e){super(),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];const n=this,i=[],r=[];for(let a=0,s=t.length;a<s;a++){const e=t[a];o(e)}function o(t){const o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1;let l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:u-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3;const f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:wd;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);let v,g,y,b,x,w=!1;f&&(v=f.getSpacedPoints(s),w=!0,c=!1,g=f.computeFrenetFrames(s,!1),y=new Jn,b=new Jn,x=new Jn),c||(p=0,u=0,h=0,d=0);const _=t.extractPoints(a);let M=_.shape;const E=_.holes,S=!gd.isClockWise(M);if(S){M=M.reverse();for(let t=0,e=E.length;t<e;t++){const e=E[t];gd.isClockWise(e)&&(E[t]=e.reverse())}}const T=gd.triangulateShape(M,E),A=M;for(let e=0,n=E.length;e<n;e++){const t=E[e];M=M.concat(t)}function C(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}const L=M.length,P=T.length;function O(t,e,n){let i,r,o;const a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){const h=Math.sqrt(u),d=Math.sqrt(l*l+c*c),p=e.x-s/h,f=e.y+a/h,m=n.x-c/d,v=n.y+l/d,g=((m-p)*c-(v-f)*l)/(a*c-s*l);i=p+a*g-t.x,r=f+s*g-t.y;const y=i*i+r*r;if(y<=2)return new jn(i,r);o=Math.sqrt(y/2)}else{let t=!1;a>Number.EPSILON?l>Number.EPSILON&&(t=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(t=!0):Math.sign(s)===Math.sign(c)&&(t=!0),t?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new jn(i/o,r/o)}const R=[];for(let e=0,n=A.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),R[e]=O(A[e],A[i],A[r]);const k=[];let D,I=R.concat();for(let e=0,n=E.length;e<n;e++){const t=E[e];D=[];for(let e=0,n=t.length,i=n-1,r=e+1;e<n;e++,i++,r++)i===n&&(i=0),r===n&&(r=0),D[e]=O(t[e],t[i],t[r]);k.push(D),I=I.concat(D)}for(let e=0;e<p;e++){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,r=A.length;e<r;e++){const t=C(A[e],R[e],i);j(t.x,t.y,-n)}for(let e=0,r=E.length;e<r;e++){const t=E[e];D=k[e];for(let e=0,r=t.length;e<r;e++){const r=C(t[e],D[e],i);j(r.x,r.y,-n)}}}const N=h+d;for(let e=0;e<L;e++){const t=c?C(M[e],I[e],N):M[e];w?(b.copy(g.normals[0]).multiplyScalar(t.x),y.copy(g.binormals[0]).multiplyScalar(t.y),x.copy(v[0]).add(b).add(y),j(x.x,x.y,x.z)):j(t.x,t.y,0)}for(let e=1;e<=s;e++)for(let t=0;t<L;t++){const n=c?C(M[t],I[t],N):M[t];w?(b.copy(g.normals[e]).multiplyScalar(n.x),y.copy(g.binormals[e]).multiplyScalar(n.y),x.copy(v[e]).add(b).add(y),j(x.x,x.y,x.z)):j(n.x,n.y,l/s*e)}for(let e=p-1;e>=0;e--){const t=e/p,n=u*Math.cos(t*Math.PI/2),i=h*Math.sin(t*Math.PI/2)+d;for(let e=0,r=A.length;e<r;e++){const t=C(A[e],R[e],i);j(t.x,t.y,l+n)}for(let e=0,r=E.length;e<r;e++){const t=E[e];D=k[e];for(let e=0,r=t.length;e<r;e++){const r=C(t[e],D[e],i);w?j(r.x,r.y+v[s-1].y,v[s-1].x+n):j(r.x,r.y,l+n)}}}function z(){const t=i.length/3;if(c){let t=0,e=L*t;for(let n=0;n<P;n++){const t=T[n];H(t[2]+e,t[1]+e,t[0]+e)}t=s+2*p,e=L*t;for(let n=0;n<P;n++){const t=T[n];H(t[0]+e,t[1]+e,t[2]+e)}}else{for(let t=0;t<P;t++){const e=T[t];H(e[2],e[1],e[0])}for(let t=0;t<P;t++){const e=T[t];H(e[0]+L*s,e[1]+L*s,e[2]+L*s)}}n.addGroup(t,i.length/3-t,0)}function B(){const t=i.length/3;let e=0;F(A,e),e+=A.length;for(let n=0,i=E.length;n<i;n++){const t=E[n];F(t,e),e+=t.length}n.addGroup(t,i.length/3-t,1)}function F(t,e){let n=t.length;while(--n>=0){const i=n;let r=n-1;r<0&&(r=t.length-1);for(let t=0,n=s+2*p;t<n;t++){const n=L*t,o=L*(t+1),a=e+i+n,s=e+r+n,l=e+r+o,c=e+i+o;U(a,s,l,c)}}}function j(t,e,n){o.push(t),o.push(e),o.push(n)}function H(t,e,r){V(t),V(e),V(r);const o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);G(a[0]),G(a[1]),G(a[2])}function U(t,e,r,o){V(t),V(e),V(o),V(e),V(r),V(o);const a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);G(s[0]),G(s[1]),G(s[3]),G(s[1]),G(s[2]),G(s[3])}function V(t){i.push(o[3*t+0]),i.push(o[3*t+1]),i.push(o[3*t+2])}function G(t){r.push(t.x),r.push(t.y)}z(),B()}this.setAttribute("position",new Dr(i,3)),this.setAttribute("uv",new Dr(r,2)),this.computeVertexNormals()}toJSON(){const t=$r.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return _d(e,n,t)}}const wd={generateTopUV:function(t,e,n,i,r){const o=e[3*n],a=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new jn(o,a),new jn(s,l),new jn(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){const a=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-u)<.01?[new jn(a,1-l),new jn(c,1-h),new jn(d,1-f),new jn(m,1-g)]:[new jn(s,1-l),new jn(u,1-h),new jn(p,1-f),new jn(v,1-g)]}};function _d(t,e,n){if(n.shapes=[],Array.isArray(t))for(let i=0,r=t.length;i<r;i++){const e=t[i];n.shapes.push(e.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}class Md extends Rh{constructor(t=1,e=0){const n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(i,r,t,e),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e}}}class Ed extends $r{constructor(t,e=12,n=0,i=2*Math.PI){super(),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e),i=Fn.clamp(i,0,2*Math.PI);const r=[],o=[],a=[],s=1/e,l=new Jn,c=new jn;for(let u=0;u<=e;u++){const r=n+u*s*i,h=Math.sin(r),d=Math.cos(r);for(let n=0;n<=t.length-1;n++)l.x=t[n].x*h,l.y=t[n].y,l.z=t[n].x*d,o.push(l.x,l.y,l.z),c.x=u/e,c.y=n/(t.length-1),a.push(c.x,c.y)}for(let u=0;u<e;u++)for(let e=0;e<t.length-1;e++){const n=e+u*t.length,i=n,o=n+t.length,a=n+t.length+1,s=n+1;r.push(i,o,s),r.push(o,a,s)}if(this.setIndex(r),this.setAttribute("position",new Dr(o,3)),this.setAttribute("uv",new Dr(a,2)),this.computeVertexNormals(),i===2*Math.PI){const n=this.attributes.normal.array,i=new Jn,r=new Jn,o=new Jn,a=e*t.length*3;for(let e=0,s=0;e<t.length;e++,s+=3)i.x=n[s+0],i.y=n[s+1],i.z=n[s+2],r.x=n[a+s+0],r.y=n[a+s+1],r.z=n[a+s+2],o.addVectors(i,r).normalize(),n[s+0]=n[a+s+0]=o.x,n[s+1]=n[a+s+1]=o.y,n[s+2]=n[a+s+2]=o.z}}}class Sd extends Rh{constructor(t=1,e=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,i,t,e),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e}}}function Td(t,e,n){$r.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n};const i=[],r=[],o=[],a=[],s=1e-5,l=new Jn,c=new Jn,u=new Jn,h=new Jn,d=new Jn;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");const p=e+1;for(let f=0;f<=n;f++){const i=f/n;for(let n=0;n<=e;n++){const p=n/e;t(p,i,c),r.push(c.x,c.y,c.z),p-s>=0?(t(p-s,i,u),h.subVectors(c,u)):(t(p+s,i,u),h.subVectors(u,c)),i-s>=0?(t(p,i-s,u),d.subVectors(c,u)):(t(p,i+s,u),d.subVectors(u,c)),l.crossVectors(h,d).normalize(),o.push(l.x,l.y,l.z),a.push(p,i)}}for(let f=0;f<n;f++)for(let t=0;t<e;t++){const e=f*p+t,n=f*p+t+1,r=(f+1)*p+t+1,o=(f+1)*p+t;i.push(e,n,o),i.push(n,r,o)}this.setIndex(i),this.setAttribute("position",new Dr(r,3)),this.setAttribute("normal",new Dr(o,3)),this.setAttribute("uv",new Dr(a,2))}Td.prototype=Object.create($r.prototype),Td.prototype.constructor=Td;class Ad extends $r{constructor(t=.5,e=1,n=8,i=1,r=0,o=2*Math.PI){super(),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},n=Math.max(3,n),i=Math.max(1,i);const a=[],s=[],l=[],c=[];let u=t;const h=(e-t)/i,d=new Jn,p=new jn;for(let f=0;f<=i;f++){for(let t=0;t<=n;t++){const i=r+t/n*o;d.x=u*Math.cos(i),d.y=u*Math.sin(i),s.push(d.x,d.y,d.z),l.push(0,0,1),p.x=(d.x/e+1)/2,p.y=(d.y/e+1)/2,c.push(p.x,p.y)}u+=h}for(let f=0;f<i;f++){const t=f*(n+1);for(let e=0;e<n;e++){const i=e+t,r=i,o=i+n+1,s=i+n+2,l=i+1;a.push(r,o,l),a.push(o,s,l)}}this.setIndex(a),this.setAttribute("position",new Dr(s,3)),this.setAttribute("normal",new Dr(l,3)),this.setAttribute("uv",new Dr(c,2))}}class Cd extends $r{constructor(t,e=12){super(),this.type="ShapeGeometry",this.parameters={shapes:t,curveSegments:e};const n=[],i=[],r=[],o=[];let a=0,s=0;if(!1===Array.isArray(t))l(t);else for(let c=0;c<t.length;c++)l(t[c]),this.addGroup(a,s,c),a+=s,s=0;function l(t){const a=i.length/3,l=t.extractPoints(e);let c=l.shape;const u=l.holes;!1===gd.isClockWise(c)&&(c=c.reverse());for(let e=0,n=u.length;e<n;e++){const t=u[e];!0===gd.isClockWise(t)&&(u[e]=t.reverse())}const h=gd.triangulateShape(c,u);for(let e=0,n=u.length;e<n;e++){const t=u[e];c=c.concat(t)}for(let e=0,n=c.length;e<n;e++){const t=c[e];i.push(t.x,t.y,0),r.push(0,0,1),o.push(t.x,t.y)}for(let e=0,i=h.length;e<i;e++){const t=h[e],i=t[0]+a,r=t[1]+a,o=t[2]+a;n.push(i,r,o),s+=3}}this.setIndex(n),this.setAttribute("position",new Dr(i,3)),this.setAttribute("normal",new Dr(r,3)),this.setAttribute("uv",new Dr(o,2))}toJSON(){const t=$r.prototype.toJSON.call(this),e=this.parameters.shapes;return Ld(e,t)}}function Ld(t,e){if(e.shapes=[],Array.isArray(t))for(let n=0,i=t.length;n<i;n++){const i=t[n];e.shapes.push(i.uuid)}else e.shapes.push(t.uuid);return e}class Pd extends $r{constructor(t=1,e=8,n=6,i=0,r=2*Math.PI,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},e=Math.max(3,Math.floor(e)),n=Math.max(2,Math.floor(n));const s=Math.min(o+a,Math.PI);let l=0;const c=[],u=new Jn,h=new Jn,d=[],p=[],f=[],m=[];for(let v=0;v<=n;v++){const d=[],g=v/n;let y=0;0==v&&0==o?y=.5/e:v==n&&s==Math.PI&&(y=-.5/e);for(let n=0;n<=e;n++){const s=n/e;u.x=-t*Math.cos(i+s*r)*Math.sin(o+g*a),u.y=t*Math.cos(o+g*a),u.z=t*Math.sin(i+s*r)*Math.sin(o+g*a),p.push(u.x,u.y,u.z),h.copy(u).normalize(),f.push(h.x,h.y,h.z),m.push(s+y,1-g),d.push(l++)}c.push(d)}for(let v=0;v<n;v++)for(let t=0;t<e;t++){const e=c[v][t+1],i=c[v][t],r=c[v+1][t],a=c[v+1][t+1];(0!==v||o>0)&&d.push(e,i,a),(v!==n-1||s<Math.PI)&&d.push(i,r,a)}this.setIndex(d),this.setAttribute("position",new Dr(p,3)),this.setAttribute("normal",new Dr(f,3)),this.setAttribute("uv",new Dr(m,2))}}class Od extends Rh{constructor(t=1,e=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,i,t,e),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e}}}class Rd extends xd{constructor(t,e={}){const n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new $r;const i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),super(i,e),this.type="TextGeometry"}}class kd extends $r{constructor(t=1,e=.4,n=8,i=6,r=2*Math.PI){super(),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},n=Math.floor(n),i=Math.floor(i);const o=[],a=[],s=[],l=[],c=new Jn,u=new Jn,h=new Jn;for(let d=0;d<=n;d++)for(let o=0;o<=i;o++){const p=o/i*r,f=d/n*Math.PI*2;u.x=(t+e*Math.cos(f))*Math.cos(p),u.y=(t+e*Math.cos(f))*Math.sin(p),u.z=e*Math.sin(f),a.push(u.x,u.y,u.z),c.x=t*Math.cos(p),c.y=t*Math.sin(p),h.subVectors(u,c).normalize(),s.push(h.x,h.y,h.z),l.push(o/i),l.push(d/n)}for(let d=1;d<=n;d++)for(let t=1;t<=i;t++){const e=(i+1)*d+t-1,n=(i+1)*(d-1)+t-1,r=(i+1)*(d-1)+t,a=(i+1)*d+t;o.push(e,n,a),o.push(n,r,a)}this.setIndex(o),this.setAttribute("position",new Dr(a,3)),this.setAttribute("normal",new Dr(s,3)),this.setAttribute("uv",new Dr(l,2))}}class Dd extends $r{constructor(t=1,e=.4,n=64,i=8,r=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},n=Math.floor(n),i=Math.floor(i);const a=[],s=[],l=[],c=[],u=new Jn,h=new Jn,d=new Jn,p=new Jn,f=new Jn,m=new Jn,v=new Jn;for(let y=0;y<=n;++y){const a=y/n*r*Math.PI*2;g(a,r,o,t,d),g(a+.01,r,o,t,p),m.subVectors(p,d),v.addVectors(p,d),f.crossVectors(m,v),v.crossVectors(f,m),f.normalize(),v.normalize();for(let t=0;t<=i;++t){const r=t/i*Math.PI*2,o=-e*Math.cos(r),a=e*Math.sin(r);u.x=d.x+(o*v.x+a*f.x),u.y=d.y+(o*v.y+a*f.y),u.z=d.z+(o*v.z+a*f.z),s.push(u.x,u.y,u.z),h.subVectors(u,d).normalize(),l.push(h.x,h.y,h.z),c.push(y/n),c.push(t/i)}}for(let y=1;y<=n;y++)for(let t=1;t<=i;t++){const e=(i+1)*(y-1)+(t-1),n=(i+1)*y+(t-1),r=(i+1)*y+t,o=(i+1)*(y-1)+t;a.push(e,n,o),a.push(n,r,o)}function g(t,e,n,i,r){const o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(a),this.setAttribute("position",new Dr(s,3)),this.setAttribute("normal",new Dr(l,3)),this.setAttribute("uv",new Dr(c,2))}}class Id extends $r{constructor(t,e=64,n=1,i=8,r=!1){super(),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r};const o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new Jn,s=new Jn,l=new jn;let c=new Jn;const u=[],h=[],d=[],p=[];function f(){for(let t=0;t<e;t++)m(t);m(!1===r?e:0),g(),v()}function m(r){c=t.getPointAt(r/e,c);const l=o.normals[r],d=o.binormals[r];for(let t=0;t<=i;t++){const e=t/i*Math.PI*2,r=Math.sin(e),o=-Math.cos(e);s.x=o*l.x+r*d.x,s.y=o*l.y+r*d.y,s.z=o*l.z+r*d.z,s.normalize(),h.push(s.x,s.y,s.z),a.x=c.x+n*s.x,a.y=c.y+n*s.y,a.z=c.z+n*s.z,u.push(a.x,a.y,a.z)}}function v(){for(let t=1;t<=e;t++)for(let e=1;e<=i;e++){const n=(i+1)*(t-1)+(e-1),r=(i+1)*t+(e-1),o=(i+1)*t+e,a=(i+1)*(t-1)+e;p.push(n,r,a),p.push(r,o,a)}}function g(){for(let t=0;t<=e;t++)for(let n=0;n<=i;n++)l.x=t/e,l.y=n/i,d.push(l.x,l.y)}f(),this.setIndex(p),this.setAttribute("position",new Dr(u,3)),this.setAttribute("normal",new Dr(h,3)),this.setAttribute("uv",new Dr(d,2))}toJSON(){const t=$r.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t}}class Nd extends $r{constructor(t){if(super(),this.type="WireframeGeometry",!0===t.isGeometry)return void console.error("THREE.WireframeGeometry no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.");const e=[],n=[0,0],i={},r=new Jn;if(null!==t.index){const o=t.attributes.position,a=t.index;let s=t.groups;0===s.length&&(s=[{start:0,count:a.count,materialIndex:0}]);for(let t=0,e=s.length;t<e;++t){const e=s[t],r=e.start,o=e.count;for(let t=r,s=r+o;t<s;t+=3)for(let e=0;e<3;e++){const r=a.getX(t+e),o=a.getX(t+(e+1)%3);n[0]=Math.min(r,o),n[1]=Math.max(r,o);const s=n[0]+","+n[1];void 0===i[s]&&(i[s]={index1:n[0],index2:n[1]})}}for(const t in i){const n=i[t];r.fromBufferAttribute(o,n.index1),e.push(r.x,r.y,r.z),r.fromBufferAttribute(o,n.index2),e.push(r.x,r.y,r.z)}}else{const n=t.attributes.position;for(let t=0,i=n.count/3;t<i;t++)for(let o=0;o<3;o++){const i=3*t+o;r.fromBufferAttribute(n,i),e.push(r.x,r.y,r.z);const a=3*t+(o+1)%3;r.fromBufferAttribute(n,a),e.push(r.x,r.y,r.z)}}this.setAttribute("position",new Dr(e,3))}}var zd=Object.freeze({__proto__:null,BoxGeometry:fo,BoxBufferGeometry:fo,CircleGeometry:Lh,CircleBufferGeometry:Lh,ConeGeometry:Oh,ConeBufferGeometry:Oh,CylinderGeometry:Ph,CylinderBufferGeometry:Ph,DodecahedronGeometry:kh,DodecahedronBufferGeometry:kh,EdgesGeometry:Bh,ExtrudeGeometry:xd,ExtrudeBufferGeometry:xd,IcosahedronGeometry:Md,IcosahedronBufferGeometry:Md,LatheGeometry:Ed,LatheBufferGeometry:Ed,OctahedronGeometry:Sd,OctahedronBufferGeometry:Sd,ParametricGeometry:Td,ParametricBufferGeometry:Td,PlaneGeometry:Do,PlaneBufferGeometry:Do,PolyhedronGeometry:Rh,PolyhedronBufferGeometry:Rh,RingGeometry:Ad,RingBufferGeometry:Ad,ShapeGeometry:Cd,ShapeBufferGeometry:Cd,SphereGeometry:Pd,SphereBufferGeometry:Pd,TetrahedronGeometry:Od,TetrahedronBufferGeometry:Od,TextGeometry:Rd,TextBufferGeometry:Rd,TorusGeometry:kd,TorusBufferGeometry:kd,TorusKnotGeometry:Dd,TorusKnotBufferGeometry:Dd,TubeGeometry:Id,TubeBufferGeometry:Id,WireframeGeometry:Nd});function Bd(t){wr.call(this),this.type="ShadowMaterial",this.color=new yr(0),this.transparent=!0,this.setValues(t)}function Fd(t){xo.call(this,t),this.type="RawShaderMaterial"}function jd(t){wr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new yr(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.vertexTangents=!1,this.setValues(t)}function Hd(t){jd.call(this),this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.clearcoat=0,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new jn(1,1),this.clearcoatNormalMap=null,this.reflectivity=.5,Object.defineProperty(this,"ior",{get:function(){return(1+.4*this.reflectivity)/(1-.4*this.reflectivity)},set:function(t){this.reflectivity=Fn.clamp(2.5*(t-1)/(t+1),0,1)}}),this.sheen=null,this.transmission=0,this.transmissionMap=null,this.setValues(t)}function Ud(t){wr.call(this),this.type="MeshPhongMaterial",this.color=new yr(16777215),this.specular=new yr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Vd(t){wr.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new yr(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Gd(t){wr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Wd(t){wr.call(this),this.type="MeshLambertMaterial",this.color=new yr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new yr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function $d(t){wr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new yr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=sn,this.normalScale=new jn(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function qd(t){sh.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}Bd.prototype=Object.create(wr.prototype),Bd.prototype.constructor=Bd,Bd.prototype.isShadowMaterial=!0,Bd.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this},Fd.prototype=Object.create(xo.prototype),Fd.prototype.constructor=Fd,Fd.prototype.isRawShaderMaterial=!0,jd.prototype=Object.create(wr.prototype),jd.prototype.constructor=jd,jd.prototype.isMeshStandardMaterial=!0,jd.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.vertexTangents=t.vertexTangents,this},Hd.prototype=Object.create(jd.prototype),Hd.prototype.constructor=Hd,Hd.prototype.isMeshPhysicalMaterial=!0,Hd.prototype.copy=function(t){return jd.prototype.copy.call(this,t),this.defines={STANDARD:"",PHYSICAL:""},this.clearcoat=t.clearcoat,this.clearcoatMap=t.clearcoatMap,this.clearcoatRoughness=t.clearcoatRoughness,this.clearcoatRoughnessMap=t.clearcoatRoughnessMap,this.clearcoatNormalMap=t.clearcoatNormalMap,this.clearcoatNormalScale.copy(t.clearcoatNormalScale),this.reflectivity=t.reflectivity,t.sheen?this.sheen=(this.sheen||new yr).copy(t.sheen):this.sheen=null,this.transmission=t.transmission,this.transmissionMap=t.transmissionMap,this},Ud.prototype=Object.create(wr.prototype),Ud.prototype.constructor=Ud,Ud.prototype.isMeshPhongMaterial=!0,Ud.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Vd.prototype=Object.create(wr.prototype),Vd.prototype.constructor=Vd,Vd.prototype.isMeshToonMaterial=!0,Vd.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.gradientMap=t.gradientMap,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Gd.prototype=Object.create(wr.prototype),Gd.prototype.constructor=Gd,Gd.prototype.isMeshNormalMaterial=!0,Gd.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Wd.prototype=Object.create(wr.prototype),Wd.prototype.constructor=Wd,Wd.prototype.isMeshLambertMaterial=!0,Wd.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},$d.prototype=Object.create(wr.prototype),$d.prototype.constructor=$d,$d.prototype.isMeshMatcapMaterial=!0,$d.prototype.copy=function(t){return wr.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},qd.prototype=Object.create(sh.prototype),qd.prototype.constructor=qd,qd.prototype.isLineDashedMaterial=!0,qd.prototype.copy=function(t){return sh.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Yd=Object.freeze({__proto__:null,ShadowMaterial:Bd,SpriteMaterial:Au,RawShaderMaterial:Fd,ShaderMaterial:xo,PointsMaterial:yh,MeshPhysicalMaterial:Hd,MeshStandardMaterial:jd,MeshPhongMaterial:Ud,MeshToonMaterial:Vd,MeshNormalMaterial:Gd,MeshLambertMaterial:Wd,MeshDepthMaterial:ou,MeshDistanceMaterial:au,MeshBasicMaterial:_r,MeshMatcapMaterial:$d,LineDashedMaterial:qd,LineBasicMaterial:sh,Material:wr});const Xd={arraySlice:function(t,e,n){return Xd.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}const n=t.length,i=new Array(n);for(let r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){const i=t.length,r=new t.constructor(i);for(let o=0,a=0;a!==i;++o){const i=n[o]*e;for(let n=0;n!==e;++n)r[a++]=t[i+n]}return r},flattenJSON:function(t,e,n,i){let r=1,o=t[0];while(void 0!==o&&void 0===o[i])o=t[r++];if(void 0===o)return;let a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)},subclip:function(t,e,n,i,r=30){const o=t.clone();o.name=e;const a=[];for(let l=0;l<o.tracks.length;++l){const t=o.tracks[l],e=t.getValueSize(),s=[],c=[];for(let o=0;o<t.times.length;++o){const a=t.times[o]*r;if(!(a<n||a>=i)){s.push(t.times[o]);for(let n=0;n<e;++n)c.push(t.values[o*e+n])}}0!==s.length&&(t.times=Xd.convertArray(s,t.times.constructor),t.values=Xd.convertArray(c,t.values.constructor),a.push(t))}o.tracks=a;let s=1/0;for(let l=0;l<o.tracks.length;++l)s>o.tracks[l].times[0]&&(s=o.tracks[l].times[0]);for(let l=0;l<o.tracks.length;++l)o.tracks[l].shift(-1*s);return o.resetDuration(),o},makeClipAdditive:function(t,e=0,n=t,i=30){i<=0&&(i=30);const r=n.tracks.length,o=e/i;for(let a=0;a<r;++a){const e=n.tracks[a],i=e.ValueTypeName;if("bool"===i||"string"===i)continue;const r=t.tracks.find(function(t){return t.name===e.name&&t.ValueTypeName===i});if(void 0===r)continue;let s=0;const l=e.getValueSize();e.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(s=l/3);let c=0;const u=r.getValueSize();r.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=u/3);const h=e.times.length-1;let d;if(o<=e.times[0]){const t=s,n=l-s;d=Xd.arraySlice(e.values,t,n)}else if(o>=e.times[h]){const t=h*l+s,n=t+l-s;d=Xd.arraySlice(e.values,t,n)}else{const t=e.createInterpolant(),n=s,i=l-s;t.evaluate(o),d=Xd.arraySlice(t.resultBuffer,n,i)}if("quaternion"===i){const t=(new Zn).fromArray(d).normalize().conjugate();t.toArray(d)}const p=r.times.length;for(let t=0;t<p;++t){const e=t*u+c;if("quaternion"===i)Zn.multiplyQuaternionsFlat(r.values,e,d,0,r.values,e);else{const t=u-2*c;for(let n=0;n<t;++n)r.values[e+n]-=d[n]}}}return t.blendMode=$e,t}};function Zd(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Jd(t,e,n,i){Zd.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function Kd(t,e,n,i){Zd.call(this,t,e,n,i)}function Qd(t,e,n,i){Zd.call(this,t,e,n,i)}function tp(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Xd.convertArray(e,this.TimeBufferType),this.values=Xd.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function ep(t,e,n){tp.call(this,t,e,n)}function np(t,e,n,i){tp.call(this,t,e,n,i)}function ip(t,e,n,i){tp.call(this,t,e,n,i)}function rp(t,e,n,i){Zd.call(this,t,e,n,i)}function op(t,e,n,i){tp.call(this,t,e,n,i)}function ap(t,e,n,i){tp.call(this,t,e,n,i)}function sp(t,e,n,i){tp.call(this,t,e,n,i)}function lp(t,e=-1,n,i=We){this.name=t,this.tracks=n,this.duration=e,this.blendMode=i,this.uuid=Fn.generateUUID(),this.duration<0&&this.resetDuration()}function cp(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return ip;case"vector":case"vector2":case"vector3":case"vector4":return sp;case"color":return np;case"quaternion":return op;case"bool":case"boolean":return ep;case"string":return ap}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function up(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=cp(t.type);if(void 0===t.times){const e=[],n=[];Xd.flattenJSON(t.keys,e,n,"value"),t.times=e,t.values=n}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Zd.prototype,{evaluate:function(t){const e=this.parameterPositions;let n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{let o;n:{i:if(!(t<i)){for(let o=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===o)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}if(t>=r)break t;{const a=e[1];t<a&&(n=2,r=a);for(let o=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===o)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}}while(n<o){const i=n+o>>>1;t<e[i]?o=i:n=i+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){const e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i;for(let o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),Object.assign(Zd.prototype,{beforeStart_:Zd.prototype.copySampleValue_,afterEnd_:Zd.prototype.copySampleValue_}),Jd.prototype=Object.assign(Object.create(Zd.prototype),{constructor:Jd,DefaultSettings_:{endingStart:Ue,endingEnd:Ue},intervalChanged_:function(t,e,n){const i=this.parameterPositions;let r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case Ve:r=t,a=2*e-n;break;case Ge:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case Ve:o=t,s=2*n-e;break;case Ge:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}const l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f;for(let x=0;x!==a;++x)r[x]=v*o[c+x]+g*o[l+x]+y*o[s+x]+b*o[u+x];return r}}),Kd.prototype=Object.assign(Object.create(Zd.prototype),{constructor:Kd,interpolate_:function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c;for(let h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}),Qd.prototype=Object.assign(Object.create(Zd.prototype),{constructor:Qd,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(tp,{toJSON:function(t){const e=t.constructor;let n;if(void 0!==e.toJSON)n=e.toJSON(t);else{n={name:t.name,times:Xd.convertArray(t.times,Array),values:Xd.convertArray(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(n.interpolation=e)}return n.type=t.ValueTypeName,n}}),Object.assign(tp.prototype,{constructor:tp,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:je,InterpolantFactoryMethodDiscrete:function(t){return new Qd(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new Kd(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Jd(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){let e;switch(t){case Fe:e=this.InterpolantFactoryMethodDiscrete;break;case je:e=this.InterpolantFactoryMethodLinear;break;case He:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Fe;case this.InterpolantFactoryMethodLinear:return je;case this.InterpolantFactoryMethodSmooth:return He}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]+=t}return this},scale:function(t){if(1!==t){const e=this.times;for(let n=0,i=e.length;n!==i;++n)e[n]*=t}return this},trim:function(t,e){const n=this.times,i=n.length;let r=0,o=i-1;while(r!==i&&n[r]<t)++r;while(-1!==o&&n[o]>e)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);const t=this.getValueSize();this.times=Xd.arraySlice(n,r,o),this.values=Xd.arraySlice(this.values,r*t,o*t)}return this},validate:function(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let a=0;a!==r;a++){const e=n[a];if("number"===typeof e&&isNaN(e)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,e),t=!1;break}if(null!==o&&o>e){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,e,o),t=!1;break}o=e}if(void 0!==i&&Xd.isTypedArray(i))for(let a=0,s=i.length;a!==s;++a){const e=i[a];if(isNaN(e)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,e),t=!1;break}}return t},optimize:function(){const t=Xd.arraySlice(this.times),e=Xd.arraySlice(this.values),n=this.getValueSize(),i=this.getInterpolation()===He,r=t.length-1;let o=1;for(let a=1;a<r;++a){let r=!1;const s=t[a],l=t[a+1];if(s!==l&&(1!==a||s!==t[0]))if(i)r=!0;else{const t=a*n,i=t-n,o=t+n;for(let a=0;a!==n;++a){const n=e[t+a];if(n!==e[i+a]||n!==e[o+a]){r=!0;break}}}if(r){if(a!==o){t[o]=t[a];const i=a*n,r=o*n;for(let t=0;t!==n;++t)e[r+t]=e[i+t]}++o}}if(r>0){t[o]=t[r];for(let t=r*n,i=o*n,a=0;a!==n;++a)e[i+a]=e[t+a];++o}return o!==t.length?(this.times=Xd.arraySlice(t,0,o),this.values=Xd.arraySlice(e,0,o*n)):(this.times=t,this.values=e),this},clone:function(){const t=Xd.arraySlice(this.times,0),e=Xd.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}),ep.prototype=Object.assign(Object.create(tp.prototype),{constructor:ep,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:Fe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),np.prototype=Object.assign(Object.create(tp.prototype),{constructor:np,ValueTypeName:"color"}),ip.prototype=Object.assign(Object.create(tp.prototype),{constructor:ip,ValueTypeName:"number"}),rp.prototype=Object.assign(Object.create(Zd.prototype),{constructor:rp,interpolate_:function(t,e,n,i){const r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=(n-e)/(i-e);let l=t*a;for(let c=l+a;l!==c;l+=4)Zn.slerpFlat(r,0,o,l-a,o,l,s);return r}}),op.prototype=Object.assign(Object.create(tp.prototype),{constructor:op,ValueTypeName:"quaternion",DefaultInterpolation:je,InterpolantFactoryMethodLinear:function(t){return new rp(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),ap.prototype=Object.assign(Object.create(tp.prototype),{constructor:ap,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:Fe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),sp.prototype=Object.assign(Object.create(tp.prototype),{constructor:sp,ValueTypeName:"vector"}),Object.assign(lp,{parse:function(t){const e=[],n=t.tracks,i=1/(t.fps||1);for(let o=0,a=n.length;o!==a;++o)e.push(up(n[o]).scale(i));const r=new lp(t.name,t.duration,e,t.blendMode);return r.uuid=t.uuid,r},toJSON:function(t){const e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid,blendMode:t.blendMode};for(let r=0,o=n.length;r!==o;++r)e.push(tp.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){const r=e.length,o=[];for(let a=0;a<r;a++){let t=[],s=[];t.push((a+r-1)%r,a,(a+1)%r),s.push(0,1,0);const l=Xd.getKeyframeOrder(t);t=Xd.sortedArray(t,1,l),s=Xd.sortedArray(s,1,l),i||0!==t[0]||(t.push(r),s.push(s[0])),o.push(new ip(".morphTargetInfluences["+e[a].name+"]",t,s).scale(1/n))}return new lp(t,-1,o)},findByName:function(t,e){let n=t;if(!Array.isArray(t)){const e=t;n=e.geometry&&e.geometry.animations||e.animations}for(let i=0;i<n.length;i++)if(n[i].name===e)return n[i];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){const i={},r=/^([\w-]*?)([\d]+)$/;for(let a=0,s=t.length;a<s;a++){const e=t[a],n=e.name.match(r);if(n&&n.length>1){const t=n[1];let r=i[t];r||(i[t]=r=[]),r.push(e)}}const o=[];for(const a in i)o.push(lp.CreateFromMorphTargetSequence(a,i[a],e,n));return o},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(t,e,n,i,r){if(0!==n.length){const o=[],a=[];Xd.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.fps||30,a=t.blendMode;let s=t.length||-1;const l=t.hierarchy||[];for(let u=0;u<l.length;u++){const t=l[u].keys;if(t&&0!==t.length)if(t[0].morphTargets){const e={};let n;for(n=0;n<t.length;n++)if(t[n].morphTargets)for(let i=0;i<t[n].morphTargets.length;i++)e[t[n].morphTargets[i]]=-1;for(const r in e){const e=[],o=[];for(let i=0;i!==t[n].morphTargets.length;++i){const i=t[n];e.push(i.time),o.push(i.morphTarget===r?1:0)}i.push(new ip(".morphTargetInfluence["+r+"]",e,o))}s=e.length*(o||1)}else{const r=".bones["+e[u].name+"]";n(sp,r+".position",t,"pos",i),n(op,r+".quaternion",t,"rot",i),n(sp,r+".scale",t,"scl",i)}}if(0===i.length)return null;const c=new lp(r,s,i,a);return c}}),Object.assign(lp.prototype,{resetDuration:function(){const t=this.tracks;let e=0;for(let n=0,i=t.length;n!==i;++n){const t=this.tracks[n];e=Math.max(e,t.times[t.times.length-1])}return this.duration=e,this},trim:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){let t=!0;for(let e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(let t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){const t=[];for(let e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new lp(this.name,this.duration,t,this.blendMode)},toJSON:function(){return lp.toJSON(this)}});const hp={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function dp(t,e,n){const i=this;let r=!1,o=0,a=0,s=void 0;const l=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this},this.addHandler=function(t,e){return l.push(t,e),this},this.removeHandler=function(t){const e=l.indexOf(t);return-1!==e&&l.splice(e,2),this},this.getHandler=function(t){for(let e=0,n=l.length;e<n;e+=2){const n=l[e],i=l[e+1];if(n.global&&(n.lastIndex=0),n.test(t))return i}return null}}const pp=new dp;function fp(t){this.manager=void 0!==t?t:pp,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}Object.assign(fp.prototype,{load:function(){},loadAsync:function(t,e){const n=this;return new Promise(function(i,r){n.load(t,i,e,r)})},parse:function(){},setCrossOrigin:function(t){return this.crossOrigin=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}});const mp={};function vp(t){fp.call(this,t)}function gp(t){fp.call(this,t)}function yp(t){fp.call(this,t)}function bp(t){fp.call(this,t)}function xp(t){fp.call(this,t)}function wp(t){fp.call(this,t)}function _p(t){fp.call(this,t)}function Mp(){this.type="Curve",this.arcLengthDivisions=200}function Ep(t,e,n,i,r,o,a,s){Mp.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Sp(t,e,n,i,r,o){Ep.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function Tp(){let t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){let l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+s)+(i-n)/s;l*=a,c*=a,r(e,n,l,c)},calc:function(r){const o=r*r,a=o*r;return t+e*r+n*o+i*a}}}vp.prototype=Object.assign(Object.create(fp.prototype),{constructor:vp,load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=hp.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0!==mp[t])return void mp[t].push({onLoad:e,onProgress:n,onError:i});const a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);let l;if(s){const n=s[1],o=!!s[2];let a=s[3];a=decodeURIComponent(a),o&&(a=atob(a));try{let o;const s=(this.responseType||"").toLowerCase();switch(s){case"arraybuffer":case"blob":const t=new Uint8Array(a.length);for(let n=0;n<a.length;n++)t[n]=a.charCodeAt(n);o="blob"===s?new Blob([t.buffer],{type:n}):t.buffer;break;case"document":const e=new DOMParser;o=e.parseFromString(a,n);break;case"json":o=JSON.parse(a);break;default:o=a;break}setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0)}catch(c){setTimeout(function(){i&&i(c),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{mp[t]=[],mp[t].push({onLoad:e,onProgress:n,onError:i}),l=new XMLHttpRequest,l.open("GET",t,!0),l.addEventListener("load",function(e){const n=this.response,i=mp[t];if(delete mp[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),hp.add(t,n);for(let t=0,e=i.length;t<e;t++){const e=i[t];e.onLoad&&e.onLoad(n)}r.manager.itemEnd(t)}else{for(let t=0,n=i.length;t<n;t++){const n=i[t];n.onError&&n.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),l.addEventListener("progress",function(e){const n=mp[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onProgress&&i.onProgress(e)}},!1),l.addEventListener("error",function(e){const n=mp[t];delete mp[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),l.addEventListener("abort",function(e){const n=mp[t];delete mp[t];for(let t=0,i=n.length;t<i;t++){const i=n[t];i.onError&&i.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(l.responseType=this.responseType),void 0!==this.withCredentials&&(l.withCredentials=this.withCredentials),l.overrideMimeType&&l.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain");for(const t in this.requestHeader)l.setRequestHeader(t,this.requestHeader[t]);l.send(null)}return r.manager.itemStart(t),l},setResponseType:function(t){return this.responseType=t,this},setMimeType:function(t){return this.mimeType=t,this}}),gp.prototype=Object.assign(Object.create(fp.prototype),{constructor:gp,load:function(t,e,n,i){const r=this,o=new vp(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}},n,i)},parse:function(t){const e=[];for(let n=0;n<t.length;n++){const i=lp.parse(t[n]);e.push(i)}return e}}),yp.prototype=Object.assign(Object.create(fp.prototype),{constructor:yp,load:function(t,e,n,i){const r=this,o=[],a=new Th,s=new vp(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),s.setRequestHeader(this.requestHeader),s.setWithCredentials(r.withCredentials);let l=0;function c(c){s.load(t[c],function(t){const n=r.parse(t,!0);o[c]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},l+=1,6===l&&(1===n.mipmapCount&&(a.minFilter=bt),a.image=o,a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}if(Array.isArray(t))for(let u=0,h=t.length;u<h;++u)c(u);else s.load(t,function(t){const n=r.parse(t,!0);if(n.isCubemap){const t=n.mipmaps.length/n.mipmapCount;for(let e=0;e<t;e++){o[e]={mipmaps:[]};for(let t=0;t<n.mipmapCount;t++)o[e].mipmaps.push(n.mipmaps[e*n.mipmapCount+t]),o[e].format=n.format,o[e].width=n.width,o[e].height=n.height}a.image=o}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=bt),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a}}),bp.prototype=Object.assign(Object.create(fp.prototype),{constructor:bp,load:function(t,e,n,i){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=hp.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),hp.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a}}),xp.prototype=Object.assign(Object.create(fp.prototype),{constructor:xp,load:function(t,e,n,i){const r=new To,o=new bp(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function s(n){o.load(t[n],function(t){r.images[n]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(let l=0;l<t.length;++l)s(l);return r}}),wp.prototype=Object.assign(Object.create(fp.prototype),{constructor:wp,load:function(t,e,n,i){const r=this,o=new Co,a=new vp(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(r.withCredentials),a.load(t,function(t){const n=r.parse(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:dt,o.wrapT=void 0!==n.wrapT?n.wrapT:dt,o.magFilter=void 0!==n.magFilter?n.magFilter:bt,o.minFilter=void 0!==n.minFilter?n.minFilter:bt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.encoding&&(o.encoding=n.encoding),void 0!==n.flipY&&(o.flipY=n.flipY),void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps,o.minFilter=_t),1===n.mipmapCount&&(o.minFilter=bt),o.needsUpdate=!0,e&&e(o,n))},n,i),o}}),_p.prototype=Object.assign(Object.create(fp.prototype),{constructor:_p,load:function(t,e,n,i){const r=new Wn,o=new bp(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;const i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?zt:Bt,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r}}),Object.assign(Mp.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){const n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t=5){const e=[];for(let n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){const t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const e=[];let n,i=this.getPoint(0),r=0;e.push(0);for(let o=1;o<=t;o++)n=this.getPoint(o/t),r+=n.distanceTo(i),e.push(r),i=n;return this.cacheArcLengths=e,e},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){const n=this.getLengths();let i=0;const r=n.length;let o;o=e||t*n[r-1];let a,s=0,l=r-1;while(s<=l)if(i=Math.floor(s+(l-s)/2),a=n[i]-o,a<0)s=i+1;else{if(!(a>0)){l=i;break}l=i-1}if(i=l,n[i]===o)return i/(r-1);const c=n[i],u=n[i+1],h=u-c,d=(o-c)/h,p=(i+d)/(r-1);return p},getTangent:function(t,e){const n=1e-4;let i=t-n,r=t+n;i<0&&(i=0),r>1&&(r=1);const o=this.getPoint(i),a=this.getPoint(r),s=e||(o.isVector2?new jn:new Jn);return s.copy(a).sub(o).normalize(),s},getTangentAt:function(t,e){const n=this.getUtoTmapping(t);return this.getTangent(n,e)},computeFrenetFrames:function(t,e){const n=new Jn,i=[],r=[],o=[],a=new Jn,s=new Si;for(let d=0;d<=t;d++){const e=d/t;i[d]=this.getTangentAt(e,new Jn),i[d].normalize()}r[0]=new Jn,o[0]=new Jn;let l=Number.MAX_VALUE;const c=Math.abs(i[0].x),u=Math.abs(i[0].y),h=Math.abs(i[0].z);c<=l&&(l=c,n.set(1,0,0)),u<=l&&(l=u,n.set(0,1,0)),h<=l&&n.set(0,0,1),a.crossVectors(i[0],n).normalize(),r[0].crossVectors(i[0],a),o[0].crossVectors(i[0],r[0]);for(let d=1;d<=t;d++){if(r[d]=r[d-1].clone(),o[d]=o[d-1].clone(),a.crossVectors(i[d-1],i[d]),a.length()>Number.EPSILON){a.normalize();const t=Math.acos(Fn.clamp(i[d-1].dot(i[d]),-1,1));r[d].applyMatrix4(s.makeRotationAxis(a,t))}o[d].crossVectors(i[d],r[d])}if(!0===e){let e=Math.acos(Fn.clamp(r[0].dot(r[t]),-1,1));e/=t,i[0].dot(a.crossVectors(r[0],r[t]))>0&&(e=-e);for(let n=1;n<=t;n++)r[n].applyMatrix4(s.makeRotationAxis(i[n],e*n)),o[n].crossVectors(i[n],r[n])}return{tangents:i,normals:r,binormals:o}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){const t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Ep.prototype=Object.create(Mp.prototype),Ep.prototype.constructor=Ep,Ep.prototype.isEllipseCurve=!0,Ep.prototype.getPoint=function(t,e){const n=e||new jn,i=2*Math.PI;let r=this.aEndAngle-this.aStartAngle;const o=Math.abs(r)<Number.EPSILON;while(r<0)r+=i;while(r>i)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);const a=this.aStartAngle+t*r;let s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){const t=Math.cos(this.aRotation),e=Math.sin(this.aRotation),n=s-this.aX,i=l-this.aY;s=n*t-i*e+this.aX,l=n*e+i*t+this.aY}return n.set(s,l)},Ep.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Ep.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Ep.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Sp.prototype=Object.create(Ep.prototype),Sp.prototype.constructor=Sp,Sp.prototype.isArcCurve=!0;const Ap=new Jn,Cp=new Tp,Lp=new Tp,Pp=new Tp;function Op(t=[],e=!1,n="centripetal",i=.5){Mp.call(this),this.type="CatmullRomCurve3",this.points=t,this.closed=e,this.curveType=n,this.tension=i}function Rp(t,e,n,i,r){const o=.5*(i-e),a=.5*(r-n),s=t*t,l=t*s;return(2*n-2*i+o+a)*l+(-3*n+3*i-2*o-a)*s+o*t+n}function kp(t,e){const n=1-t;return n*n*e}function Dp(t,e){return 2*(1-t)*t*e}function Ip(t,e){return t*t*e}function Np(t,e,n,i){return kp(t,e)+Dp(t,n)+Ip(t,i)}function zp(t,e){const n=1-t;return n*n*n*e}function Bp(t,e){const n=1-t;return 3*n*n*t*e}function Fp(t,e){return 3*(1-t)*t*t*e}function jp(t,e){return t*t*t*e}function Hp(t,e,n,i,r){return zp(t,e)+Bp(t,n)+Fp(t,i)+jp(t,r)}function Up(t=new jn,e=new jn,n=new jn,i=new jn){Mp.call(this),this.type="CubicBezierCurve",this.v0=t,this.v1=e,this.v2=n,this.v3=i}function Vp(t=new Jn,e=new Jn,n=new Jn,i=new Jn){Mp.call(this),this.type="CubicBezierCurve3",this.v0=t,this.v1=e,this.v2=n,this.v3=i}function Gp(t=new jn,e=new jn){Mp.call(this),this.type="LineCurve",this.v1=t,this.v2=e}function Wp(t=new Jn,e=new Jn){Mp.call(this),this.type="LineCurve3",this.v1=t,this.v2=e}function $p(t=new jn,e=new jn,n=new jn){Mp.call(this),this.type="QuadraticBezierCurve",this.v0=t,this.v1=e,this.v2=n}function qp(t=new Jn,e=new Jn,n=new Jn){Mp.call(this),this.type="QuadraticBezierCurve3",this.v0=t,this.v1=e,this.v2=n}function Yp(t=[]){Mp.call(this),this.type="SplineCurve",this.points=t}Op.prototype=Object.create(Mp.prototype),Op.prototype.constructor=Op,Op.prototype.isCatmullRomCurve3=!0,Op.prototype.getPoint=function(t,e=new Jn){const n=e,i=this.points,r=i.length,o=(r-(this.closed?0:1))*t;let a,s,l=Math.floor(o),c=o-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/r)+1)*r:0===c&&l===r-1&&(l=r-2,c=1),this.closed||l>0?a=i[(l-1)%r]:(Ap.subVectors(i[0],i[1]).add(i[0]),a=Ap);const u=i[l%r],h=i[(l+1)%r];if(this.closed||l+2<r?s=i[(l+2)%r]:(Ap.subVectors(i[r-1],i[r-2]).add(i[r-1]),s=Ap),"centripetal"===this.curveType||"chordal"===this.curveType){const t="chordal"===this.curveType?.5:.25;let e=Math.pow(a.distanceToSquared(u),t),n=Math.pow(u.distanceToSquared(h),t),i=Math.pow(h.distanceToSquared(s),t);n<1e-4&&(n=1),e<1e-4&&(e=n),i<1e-4&&(i=n),Cp.initNonuniformCatmullRom(a.x,u.x,h.x,s.x,e,n,i),Lp.initNonuniformCatmullRom(a.y,u.y,h.y,s.y,e,n,i),Pp.initNonuniformCatmullRom(a.z,u.z,h.z,s.z,e,n,i)}else"catmullrom"===this.curveType&&(Cp.initCatmullRom(a.x,u.x,h.x,s.x,this.tension),Lp.initCatmullRom(a.y,u.y,h.y,s.y,this.tension),Pp.initCatmullRom(a.z,u.z,h.z,s.z,this.tension));return n.set(Cp.calc(c),Lp.calc(c),Pp.calc(c)),n},Op.prototype.copy=function(t){Mp.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Op.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Op.prototype.fromJSON=function(t){Mp.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new Jn).fromArray(n))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Up.prototype=Object.create(Mp.prototype),Up.prototype.constructor=Up,Up.prototype.isCubicBezierCurve=!0,Up.prototype.getPoint=function(t,e=new jn){const n=e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Hp(t,i.x,r.x,o.x,a.x),Hp(t,i.y,r.y,o.y,a.y)),n},Up.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Up.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Up.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Vp.prototype=Object.create(Mp.prototype),Vp.prototype.constructor=Vp,Vp.prototype.isCubicBezierCurve3=!0,Vp.prototype.getPoint=function(t,e=new Jn){const n=e,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Hp(t,i.x,r.x,o.x,a.x),Hp(t,i.y,r.y,o.y,a.y),Hp(t,i.z,r.z,o.z,a.z)),n},Vp.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Vp.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Vp.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Gp.prototype=Object.create(Mp.prototype),Gp.prototype.constructor=Gp,Gp.prototype.isLineCurve=!0,Gp.prototype.getPoint=function(t,e=new jn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Gp.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Gp.prototype.getTangent=function(t,e){const n=e||new jn;return n.copy(this.v2).sub(this.v1).normalize(),n},Gp.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Gp.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Gp.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Wp.prototype=Object.create(Mp.prototype),Wp.prototype.constructor=Wp,Wp.prototype.isLineCurve3=!0,Wp.prototype.getPoint=function(t,e=new Jn){const n=e;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Wp.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Wp.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wp.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wp.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},$p.prototype=Object.create(Mp.prototype),$p.prototype.constructor=$p,$p.prototype.isQuadraticBezierCurve=!0,$p.prototype.getPoint=function(t,e=new jn){const n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Np(t,i.x,r.x,o.x),Np(t,i.y,r.y,o.y)),n},$p.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},$p.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},$p.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},qp.prototype=Object.create(Mp.prototype),qp.prototype.constructor=qp,qp.prototype.isQuadraticBezierCurve3=!0,qp.prototype.getPoint=function(t,e=new Jn){const n=e,i=this.v0,r=this.v1,o=this.v2;return n.set(Np(t,i.x,r.x,o.x),Np(t,i.y,r.y,o.y),Np(t,i.z,r.z,o.z)),n},qp.prototype.copy=function(t){return Mp.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},qp.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},qp.prototype.fromJSON=function(t){return Mp.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Yp.prototype=Object.create(Mp.prototype),Yp.prototype.constructor=Yp,Yp.prototype.isSplineCurve=!0,Yp.prototype.getPoint=function(t,e=new jn){const n=e,i=this.points,r=(i.length-1)*t,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(Rp(a,s.x,l.x,c.x,u.x),Rp(a,s.y,l.y,c.y,u.y)),n},Yp.prototype.copy=function(t){Mp.prototype.copy.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push(n.clone())}return this},Yp.prototype.toJSON=function(){const t=Mp.prototype.toJSON.call(this);t.points=[];for(let e=0,n=this.points.length;e<n;e++){const n=this.points[e];t.points.push(n.toArray())}return t},Yp.prototype.fromJSON=function(t){Mp.prototype.fromJSON.call(this,t),this.points=[];for(let e=0,n=t.points.length;e<n;e++){const n=t.points[e];this.points.push((new jn).fromArray(n))}return this};var Xp=Object.freeze({__proto__:null,ArcCurve:Sp,CatmullRomCurve3:Op,CubicBezierCurve:Up,CubicBezierCurve3:Vp,EllipseCurve:Ep,LineCurve:Gp,LineCurve3:Wp,QuadraticBezierCurve:$p,QuadraticBezierCurve3:qp,SplineCurve:Yp});function Zp(){Mp.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Jp(t){Zp.call(this),this.type="Path",this.currentPoint=new jn,t&&this.setFromPoints(t)}function Kp(t){Jp.call(this,t),this.uuid=Fn.generateUUID(),this.type="Shape",this.holes=[]}function Qp(t,e=1){Zi.call(this),this.type="Light",this.color=new yr(t),this.intensity=e}function tf(t,e,n){Qp.call(this,t,n),this.type="HemisphereLight",this.position.copy(Zi.DefaultUp),this.updateMatrix(),this.groundColor=new yr(e)}function ef(t){this.camera=t,this.bias=0,this.normalBias=0,this.radius=1,this.mapSize=new jn(512,512),this.map=null,this.mapPass=null,this.matrix=new Si,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Oo,this._frameExtents=new jn(1,1),this._viewportCount=1,this._viewports=[new qn(0,0,1,1)]}function nf(){ef.call(this,new _o(50,1,.5,500)),this.focus=1}function rf(t,e,n,i,r,o){Qp.call(this,t,e),this.type="SpotLight",this.position.copy(Zi.DefaultUp),this.updateMatrix(),this.target=new Zi,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new nf}function of(){ef.call(this,new _o(90,1,.5,500)),this._frameExtents=new jn(4,2),this._viewportCount=6,this._viewports=[new qn(2,1,1,1),new qn(0,1,1,1),new qn(3,1,1,1),new qn(1,1,1,1),new qn(3,0,1,1),new qn(1,0,1,1)],this._cubeDirections=[new Jn(1,0,0),new Jn(-1,0,0),new Jn(0,0,1),new Jn(0,0,-1),new Jn(0,1,0),new Jn(0,-1,0)],this._cubeUps=[new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,1,0),new Jn(0,0,1),new Jn(0,0,-1)]}function af(t,e,n,i){Qp.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new of}function sf(t=-1,e=1,n=1,i=-1,r=.1,o=2e3){wo.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=n,this.bottom=i,this.near=r,this.far=o,this.updateProjectionMatrix()}function lf(){ef.call(this,new sf(-5,5,5,-5,.5,500))}function cf(t,e){Qp.call(this,t,e),this.type="DirectionalLight",this.position.copy(Zi.DefaultUp),this.updateMatrix(),this.target=new Zi,this.shadow=new lf}function uf(t,e){Qp.call(this,t,e),this.type="AmbientLight"}function hf(t,e,n,i){Qp.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}Zp.prototype=Object.assign(Object.create(Mp.prototype),{constructor:Zp,add:function(t){this.curves.push(t)},closePath:function(){const t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Gp(e,t))},getPoint:function(t){const e=t*this.getLength(),n=this.getCurveLengths();let i=0;while(i<n.length){if(n[i]>=e){const t=n[i]-e,r=this.curves[i],o=r.getLength(),a=0===o?0:1-t/o;return r.getPointAt(a)}i++}return null},getLength:function(){const t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const t=[];let e=0;for(let n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t=40){const e=[];for(let n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t=12){const e=[];let n;for(let i=0,r=this.curves;i<r.length;i++){const o=r[i],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a);for(let t=0;t<s.length;t++){const i=s[t];n&&n.equals(i)||(e.push(i),n=i)}}return this.autoClose&&e.length>1&&!e[e.length-1].equals(e[0])&&e.push(e[0]),e},copy:function(t){Mp.prototype.copy.call(this,t),this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push(n.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){const t=Mp.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(let e=0,n=this.curves.length;e<n;e++){const n=this.curves[e];t.curves.push(n.toJSON())}return t},fromJSON:function(t){Mp.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(let e=0,n=t.curves.length;e<n;e++){const n=t.curves[e];this.curves.push((new Xp[n.type]).fromJSON(n))}return this}}),Jp.prototype=Object.assign(Object.create(Zp.prototype),{constructor:Jp,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(let e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y);return this},moveTo:function(t,e){return this.currentPoint.set(t,e),this},lineTo:function(t,e){const n=new Gp(this.currentPoint.clone(),new jn(t,e));return this.curves.push(n),this.currentPoint.set(t,e),this},quadraticCurveTo:function(t,e,n,i){const r=new $p(this.currentPoint.clone(),new jn(t,e),new jn(n,i));return this.curves.push(r),this.currentPoint.set(n,i),this},bezierCurveTo:function(t,e,n,i,r,o){const a=new Up(this.currentPoint.clone(),new jn(t,e),new jn(n,i),new jn(r,o));return this.curves.push(a),this.currentPoint.set(r,o),this},splineThru:function(t){const e=[this.currentPoint.clone()].concat(t),n=new Yp(e);return this.curves.push(n),this.currentPoint.copy(t[t.length-1]),this},arc:function(t,e,n,i,r,o){const a=this.currentPoint.x,s=this.currentPoint.y;return this.absarc(t+a,e+s,n,i,r,o),this},absarc:function(t,e,n,i,r,o){return this.absellipse(t,e,n,n,i,r,o),this},ellipse:function(t,e,n,i,r,o,a,s){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(t+l,e+c,n,i,r,o,a,s),this},absellipse:function(t,e,n,i,r,o,a,s){const l=new Ep(t,e,n,i,r,o,a,s);if(this.curves.length>0){const t=l.getPoint(0);t.equals(this.currentPoint)||this.lineTo(t.x,t.y)}this.curves.push(l);const c=l.getPoint(1);return this.currentPoint.copy(c),this},copy:function(t){return Zp.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){const t=Zp.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Zp.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Kp.prototype=Object.assign(Object.create(Jp.prototype),{constructor:Kp,getPointsHoles:function(t){const e=[];for(let n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Jp.prototype.copy.call(this,t),this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push(n.clone())}return this},toJSON:function(){const t=Jp.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(let e=0,n=this.holes.length;e<n;e++){const n=this.holes[e];t.holes.push(n.toJSON())}return t},fromJSON:function(t){Jp.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(let e=0,n=t.holes.length;e<n;e++){const n=t.holes[e];this.holes.push((new Jp).fromJSON(n))}return this}}),Qp.prototype=Object.assign(Object.create(Zi.prototype),{constructor:Qp,isLight:!0,copy:function(t){return Zi.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){const e=Zi.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),tf.prototype=Object.assign(Object.create(Qp.prototype),{constructor:tf,isHemisphereLight:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(ef.prototype,{_projScreenMatrix:new Si,_lightPositionWorld:new Jn,_lookTarget:new Jn,getViewportCount:function(){return this._viewportCount},getFrustum:function(){return this._frustum},updateMatrices:function(t){const e=this.camera,n=this.matrix,i=this._projScreenMatrix,r=this._lookTarget,o=this._lightPositionWorld;o.setFromMatrixPosition(t.matrixWorld),e.position.copy(o),r.setFromMatrixPosition(t.target.matrixWorld),e.lookAt(r),e.updateMatrixWorld(),i.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),this._frustum.setFromProjectionMatrix(i),n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(e.projectionMatrix),n.multiply(e.matrixWorldInverse)},getViewport:function(t){return this._viewports[t]},getFrameExtents:function(){return this._frameExtents},copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t={};return 0!==this.bias&&(t.bias=this.bias),0!==this.normalBias&&(t.normalBias=this.normalBias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),nf.prototype=Object.assign(Object.create(ef.prototype),{constructor:nf,isSpotLightShadow:!0,updateMatrices:function(t){const e=this.camera,n=2*Fn.RAD2DEG*t.angle*this.focus,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix()),ef.prototype.updateMatrices.call(this,t)}}),rf.prototype=Object.assign(Object.create(Qp.prototype),{constructor:rf,isSpotLight:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),of.prototype=Object.assign(Object.create(ef.prototype),{constructor:of,isPointLightShadow:!0,updateMatrices:function(t,e=0){const n=this.camera,i=this.matrix,r=this._lightPositionWorld,o=this._lookTarget,a=this._projScreenMatrix;r.setFromMatrixPosition(t.matrixWorld),n.position.copy(r),o.copy(n.position),o.add(this._cubeDirections[e]),n.up.copy(this._cubeUps[e]),n.lookAt(o),n.updateMatrixWorld(),i.makeTranslation(-r.x,-r.y,-r.z),a.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(a)}}),af.prototype=Object.assign(Object.create(Qp.prototype),{constructor:af,isPointLight:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),sf.prototype=Object.assign(Object.create(wo.prototype),{constructor:sf,isOrthographicCamera:!0,copy:function(t,e){return wo.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2;let r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;r+=t*this.view.offsetX,o=r+t*this.view.width,a-=e*this.view.offsetY,s=a-e*this.view.height}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()},toJSON:function(t){const e=Zi.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),lf.prototype=Object.assign(Object.create(ef.prototype),{constructor:lf,isDirectionalLightShadow:!0,updateMatrices:function(t){ef.prototype.updateMatrices.call(this,t)}}),cf.prototype=Object.assign(Object.create(Qp.prototype),{constructor:cf,isDirectionalLight:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),uf.prototype=Object.assign(Object.create(Qp.prototype),{constructor:uf,isAmbientLight:!0}),hf.prototype=Object.assign(Object.create(Qp.prototype),{constructor:hf,isRectAreaLight:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){const e=Qp.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}});class df{constructor(){Object.defineProperty(this,"isSphericalHarmonics3",{value:!0}),this.coefficients=[];for(let t=0;t<9;t++)this.coefficients.push(new Jn)}set(t){for(let e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this}zero(){for(let t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this}getAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.282095),e.addScaledVector(o[1],.488603*i),e.addScaledVector(o[2],.488603*r),e.addScaledVector(o[3],.488603*n),e.addScaledVector(o[4],n*i*1.092548),e.addScaledVector(o[5],i*r*1.092548),e.addScaledVector(o[6],.315392*(3*r*r-1)),e.addScaledVector(o[7],n*r*1.092548),e.addScaledVector(o[8],.546274*(n*n-i*i)),e}getIrradianceAt(t,e){const n=t.x,i=t.y,r=t.z,o=this.coefficients;return e.copy(o[0]).multiplyScalar(.886227),e.addScaledVector(o[1],1.023328*i),e.addScaledVector(o[2],1.023328*r),e.addScaledVector(o[3],1.023328*n),e.addScaledVector(o[4],.858086*n*i),e.addScaledVector(o[5],.858086*i*r),e.addScaledVector(o[6],.743125*r*r-.247708),e.addScaledVector(o[7],.858086*n*r),e.addScaledVector(o[8],.429043*(n*n-i*i)),e}add(t){for(let e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this}addScaledSH(t,e){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(t.coefficients[n],e);return this}scale(t){for(let e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this}lerp(t,e){for(let n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this}equals(t){for(let e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0}copy(t){return this.set(t.coefficients)}clone(){return(new this.constructor).copy(this)}fromArray(t,e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].fromArray(t,e+3*i);return this}toArray(t=[],e=0){const n=this.coefficients;for(let i=0;i<9;i++)n[i].toArray(t,e+3*i);return t}static getBasisAt(t,e){const n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}function pf(t,e){Qp.call(this,void 0,e),this.type="LightProbe",this.sh=void 0!==t?t:new df}function ff(t){fp.call(this,t),this.textures={}}pf.prototype=Object.assign(Object.create(Qp.prototype),{constructor:pf,isLightProbe:!0,copy:function(t){return Qp.prototype.copy.call(this,t),this.sh.copy(t.sh),this},fromJSON:function(t){return this.intensity=t.intensity,this.sh.fromArray(t.sh),this},toJSON:function(t){const e=Qp.prototype.toJSON.call(this,t);return e.object.sh=this.sh.toArray(),e}}),ff.prototype=Object.assign(Object.create(fp.prototype),{constructor:ff,load:function(t,e,n,i){const r=this,o=new vp(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}},n,i)},parse:function(t){const e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}const i=new Yd[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&void 0!==i.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.sheen&&(i.sheen=(new yr).setHex(t.sheen)),void 0!==t.emissive&&void 0!==i.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&void 0!==i.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearcoat&&(i.clearcoat=t.clearcoat),void 0!==t.clearcoatRoughness&&(i.clearcoatRoughness=t.clearcoatRoughness),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.stencilWrite&&(i.stencilWrite=t.stencilWrite),void 0!==t.stencilWriteMask&&(i.stencilWriteMask=t.stencilWriteMask),void 0!==t.stencilFunc&&(i.stencilFunc=t.stencilFunc),void 0!==t.stencilRef&&(i.stencilRef=t.stencilRef),void 0!==t.stencilFuncMask&&(i.stencilFuncMask=t.stencilFuncMask),void 0!==t.stencilFail&&(i.stencilFail=t.stencilFail),void 0!==t.stencilZFail&&(i.stencilZFail=t.stencilZFail),void 0!==t.stencilZPass&&(i.stencilZPass=t.stencilZPass),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.morphNormals&&(i.morphNormals=t.morphNormals),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.vertexTangents&&(i.vertexTangents=t.vertexTangents),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.toneMapped&&(i.toneMapped=t.toneMapped),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.vertexColors&&("number"===typeof t.vertexColors?i.vertexColors=t.vertexColors>0:i.vertexColors=t.vertexColors),void 0!==t.uniforms)for(const r in t.uniforms){const e=t.uniforms[r];switch(i.uniforms[r]={},e.type){case"t":i.uniforms[r].value=n(e.value);break;case"c":i.uniforms[r].value=(new yr).setHex(e.value);break;case"v2":i.uniforms[r].value=(new jn).fromArray(e.value);break;case"v3":i.uniforms[r].value=(new Jn).fromArray(e.value);break;case"v4":i.uniforms[r].value=(new qn).fromArray(e.value);break;case"m3":i.uniforms[r].value=(new Hn).fromArray(e.value);break;case"m4":i.uniforms[r].value=(new Si).fromArray(e.value);break;default:i.uniforms[r].value=e.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(const r in t.extensions)i.extensions[r]=t.extensions[r];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap)),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){let e=t.normalScale;!1===Array.isArray(e)&&(e=[e,e]),i.normalScale=(new jn).fromArray(e)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.refractionRatio&&(i.refractionRatio=t.refractionRatio),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),void 0!==t.clearcoatMap&&(i.clearcoatMap=n(t.clearcoatMap)),void 0!==t.clearcoatRoughnessMap&&(i.clearcoatRoughnessMap=n(t.clearcoatRoughnessMap)),void 0!==t.clearcoatNormalMap&&(i.clearcoatNormalMap=n(t.clearcoatNormalMap)),void 0!==t.clearcoatNormalScale&&(i.clearcoatNormalScale=(new jn).fromArray(t.clearcoatNormalScale)),void 0!==t.transmission&&(i.transmission=t.transmission),void 0!==t.transmissionMap&&(i.transmissionMap=n(t.transmissionMap)),i},setTextures:function(t){return this.textures=t,this}});const mf={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);let e="";for(let i=0,r=t.length;i<r;i++)e+=String.fromCharCode(t[i]);try{return decodeURIComponent(escape(e))}catch(n){return e}},extractUrlBase:function(t){const e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function vf(){$r.call(this),this.type="InstancedBufferGeometry",this.instanceCount=1/0}function gf(t,e,n,i){"number"===typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Sr.call(this,t,e,n),this.meshPerAttribute=i||1}function yf(t){fp.call(this,t)}vf.prototype=Object.assign(Object.create($r.prototype),{constructor:vf,isInstancedBufferGeometry:!0,copy:function(t){return $r.prototype.copy.call(this,t),this.instanceCount=t.instanceCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){const t=$r.prototype.toJSON.call(this);return t.instanceCount=this.instanceCount,t.isInstancedBufferGeometry=!0,t}}),gf.prototype=Object.assign(Object.create(Sr.prototype),{constructor:gf,isInstancedBufferAttribute:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){const t=Sr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),yf.prototype=Object.assign(Object.create(fp.prototype),{constructor:yf,load:function(t,e,n,i){const r=this,o=new vp(r.manager);o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{e(r.parse(JSON.parse(n)))}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}},n,i)},parse:function(t){const e={},n={};function i(t,n){if(void 0!==e[n])return e[n];const i=t.interleavedBuffers,o=i[n],a=r(t,o.buffer),s=Br(o.type,a),l=new Eu(s,o.stride);return l.uuid=o.uuid,e[n]=l,l}function r(t,e){if(void 0!==n[e])return n[e];const i=t.arrayBuffers,r=i[e],o=new Uint32Array(r).buffer;return n[e]=o,o}const o=t.isInstancedBufferGeometry?new vf:new $r,a=t.data.index;if(void 0!==a){const t=Br(a.type,a.array);o.setIndex(new Sr(t,1))}const s=t.data.attributes;for(const d in s){const e=s[d];let n;if(e.isInterleavedBufferAttribute){const r=i(t.data,e.data);n=new Tu(r,e.itemSize,e.offset,e.normalized)}else{const t=Br(e.type,e.array),i=e.isInstancedBufferAttribute?gf:Sr;n=new i(t,e.itemSize,e.normalized)}void 0!==e.name&&(n.name=e.name),o.setAttribute(d,n)}const l=t.data.morphAttributes;if(l)for(const d in l){const e=l[d],n=[];for(let r=0,o=e.length;r<o;r++){const o=e[r];let a;if(o.isInterleavedBufferAttribute){const e=i(t.data,o.data);a=new Tu(e,o.itemSize,o.offset,o.normalized)}else{const t=Br(o.type,o.array);a=new Sr(t,o.itemSize,o.normalized)}void 0!==o.name&&(a.name=o.name),n.push(a)}o.morphAttributes[d]=n}const c=t.data.morphTargetsRelative;c&&(o.morphTargetsRelative=!0);const u=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==u)for(let d=0,p=u.length;d!==p;++d){const t=u[d];o.addGroup(t.start,t.count,t.materialIndex)}const h=t.data.boundingSphere;if(void 0!==h){const t=new Jn;void 0!==h.center&&t.fromArray(h.center),o.boundingSphere=new vi(t,h.radius)}return t.name&&(o.name=t.name),t.userData&&(o.userData=t.userData),o}});class bf extends fp{constructor(t){super(t)}load(t,e,n,i){const r=this,o=""===this.path?mf.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;const a=new vp(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(t,function(n){let o=null;try{o=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+t+".",s.message)}const a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,i)}parse(t,e){const n=this.parseAnimations(t.animations),i=this.parseShapes(t.shapes),r=this.parseGeometries(t.geometries,i),o=this.parseImages(t.images,function(){void 0!==e&&e(l)}),a=this.parseTextures(t.textures,o),s=this.parseMaterials(t.materials,a),l=this.parseObject(t.object,r,s,n),c=this.parseSkeletons(t.skeletons,l);if(this.bindSkeletons(l,c),void 0!==e){let t=!1;for(const e in o)if(o[e]instanceof HTMLImageElement){t=!0;break}!1===t&&e(l)}return l}parseShapes(t){const e={};if(void 0!==t)for(let n=0,i=t.length;n<i;n++){const i=(new Kp).fromJSON(t[n]);e[i.uuid]=i}return e}parseSkeletons(t,e){const n={},i={};if(e.traverse(function(t){t.isBone&&(i[t.uuid]=t)}),void 0!==t)for(let r=0,o=t.length;r<o;r++){const e=(new eh).fromJSON(t[r],i);n[e.uuid]=e}return n}parseGeometries(t,e){const n={};let i;if(void 0!==t){const r=new yf;for(let o=0,a=t.length;o<a;o++){let a;const s=t[o];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new zd[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":a=new zd[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new zd[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new zd[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new zd[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new zd[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new zd[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new zd[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new zd[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new zd[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new zd[s.type]((new Xp[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new zd[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new zd[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":i=[];for(let n=0,r=s.shapes.length;n<r;n++){const t=e[s.shapes[n]];i.push(t)}a=new zd[s.type](i,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":i=[];for(let n=0,r=s.shapes.length;n<r;n++){const t=e[s.shapes[n]];i.push(t)}const t=s.options.extrudePath;void 0!==t&&(s.options.extrudePath=(new Xp[t.type]).fromJSON(t)),a=new zd[s.type](i,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(s);break;case"Geometry":console.error('THREE.ObjectLoader: Loading "Geometry" is not supported anymore.');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}}return n}parseMaterials(t,e){const n={},i={};if(void 0!==t){const r=new ff;r.setTextures(e);for(let e=0,o=t.length;e<o;e++){const o=t[e];if("MultiMaterial"===o.type){const t=[];for(let e=0;e<o.materials.length;e++){const i=o.materials[e];void 0===n[i.uuid]&&(n[i.uuid]=r.parse(i)),t.push(n[i.uuid])}i[o.uuid]=t}else void 0===n[o.uuid]&&(n[o.uuid]=r.parse(o)),i[o.uuid]=n[o.uuid]}}return i}parseAnimations(t){const e={};if(void 0!==t)for(let n=0;n<t.length;n++){const i=t[n],r=lp.parse(i);e[r.uuid]=r}return e}parseImages(t,e){const n=this,i={};let r;function o(t){return n.manager.itemStart(t),r.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}function a(t){if("string"===typeof t){const e=t,i=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(e)?e:n.resourcePath+e;return o(i)}return t.data?{data:Br(t.type,t.data),width:t.width,height:t.height}:null}if(void 0!==t&&t.length>0){const n=new dp(e);r=new bp(n),r.setCrossOrigin(this.crossOrigin);for(let e=0,r=t.length;e<r;e++){const n=t[e],r=n.url;if(Array.isArray(r)){i[n.uuid]=[];for(let t=0,e=r.length;t<e;t++){const e=r[t],o=a(e);null!==o&&(o instanceof HTMLImageElement?i[n.uuid].push(o):i[n.uuid].push(new Co(o.data,o.width,o.height)))}}else{const t=a(n.url);null!==t&&(i[n.uuid]=t)}}}return i}parseTextures(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}const i={};if(void 0!==t)for(let r=0,o=t.length;r<o;r++){const o=t[r];let a;void 0===o.image&&console.warn('THREE.ObjectLoader: No "image" specified for',o.uuid),void 0===e[o.image]&&console.warn("THREE.ObjectLoader: Undefined image",o.image);const s=e[o.image];Array.isArray(s)?(a=new To(s),6===s.length&&(a.needsUpdate=!0)):(a=s&&s.data?new Co(s.data,s.width,s.height):new Wn(s),s&&(a.needsUpdate=!0)),a.uuid=o.uuid,void 0!==o.name&&(a.name=o.name),void 0!==o.mapping&&(a.mapping=n(o.mapping,xf)),void 0!==o.offset&&a.offset.fromArray(o.offset),void 0!==o.repeat&&a.repeat.fromArray(o.repeat),void 0!==o.center&&a.center.fromArray(o.center),void 0!==o.rotation&&(a.rotation=o.rotation),void 0!==o.wrap&&(a.wrapS=n(o.wrap[0],wf),a.wrapT=n(o.wrap[1],wf)),void 0!==o.format&&(a.format=o.format),void 0!==o.type&&(a.type=o.type),void 0!==o.encoding&&(a.encoding=o.encoding),void 0!==o.minFilter&&(a.minFilter=n(o.minFilter,_f)),void 0!==o.magFilter&&(a.magFilter=n(o.magFilter,_f)),void 0!==o.anisotropy&&(a.anisotropy=o.anisotropy),void 0!==o.flipY&&(a.flipY=o.flipY),void 0!==o.premultiplyAlpha&&(a.premultiplyAlpha=o.premultiplyAlpha),void 0!==o.unpackAlignment&&(a.unpackAlignment=o.unpackAlignment),i[o.uuid]=a}return i}parseObject(t,e,n,i){let r,o,a;function s(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function l(t){if(void 0!==t){if(Array.isArray(t)){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];void 0===n[r]&&console.warn("THREE.ObjectLoader: Undefined material",r),e.push(n[r])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":r=new Mu,void 0!==t.background&&Number.isInteger(t.background)&&(r.background=new yr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?r.fog=new _u(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(r.fog=new wu(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":r=new _o(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(r.focus=t.focus),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.filmGauge&&(r.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(r.filmOffset=t.filmOffset),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"OrthographicCamera":r=new sf(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(r.zoom=t.zoom),void 0!==t.view&&(r.view=Object.assign({},t.view));break;case"AmbientLight":r=new uf(t.color,t.intensity);break;case"DirectionalLight":r=new cf(t.color,t.intensity);break;case"PointLight":r=new af(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":r=new hf(t.color,t.intensity,t.width,t.height);break;case"SpotLight":r=new rf(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":r=new tf(t.color,t.groundColor,t.intensity);break;case"LightProbe":r=(new pf).fromJSON(t);break;case"SkinnedMesh":o=s(t.geometry),a=l(t.material),r=new Ju(o,a),void 0!==t.bindMode&&(r.bindMode=t.bindMode),void 0!==t.bindMatrix&&r.bindMatrix.fromArray(t.bindMatrix),void 0!==t.skeleton&&(r.skeleton=t.skeleton);break;case"Mesh":o=s(t.geometry),a=l(t.material),r=new uo(o,a);break;case"InstancedMesh":o=s(t.geometry),a=l(t.material);const e=t.count,n=t.instanceMatrix;r=new ah(o,a,e),r.instanceMatrix=new Sr(new Float32Array(n.array),16);break;case"LOD":r=new Wu;break;case"Line":r=new ph(s(t.geometry),l(t.material));break;case"LineLoop":r=new gh(s(t.geometry),l(t.material));break;case"LineSegments":r=new vh(s(t.geometry),l(t.material));break;case"PointCloud":case"Points":r=new Mh(s(t.geometry),l(t.material));break;case"Sprite":r=new Hu(l(t.material));break;case"Group":r=new fu;break;case"Bone":r=new Ku;break;default:r=new Zi}if(r.uuid=t.uuid,void 0!==t.name&&(r.name=t.name),void 0!==t.matrix?(r.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(r.matrixAutoUpdate=t.matrixAutoUpdate),r.matrixAutoUpdate&&r.matrix.decompose(r.position,r.quaternion,r.scale)):(void 0!==t.position&&r.position.fromArray(t.position),void 0!==t.rotation&&r.rotation.fromArray(t.rotation),void 0!==t.quaternion&&r.quaternion.fromArray(t.quaternion),void 0!==t.scale&&r.scale.fromArray(t.scale)),void 0!==t.castShadow&&(r.castShadow=t.castShadow),void 0!==t.receiveShadow&&(r.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(r.shadow.bias=t.shadow.bias),void 0!==t.shadow.normalBias&&(r.shadow.normalBias=t.shadow.normalBias),void 0!==t.shadow.radius&&(r.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&r.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(r.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(r.visible=t.visible),void 0!==t.frustumCulled&&(r.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(r.renderOrder=t.renderOrder),void 0!==t.userData&&(r.userData=t.userData),void 0!==t.layers&&(r.layers.mask=t.layers),void 0!==t.children){const o=t.children;for(let t=0;t<o.length;t++)r.add(this.parseObject(o[t],e,n,i))}if(void 0!==t.animations){const e=t.animations;for(let t=0;t<e.length;t++){const n=e[t];r.animations.push(i[n])}}if("LOD"===t.type){void 0!==t.autoUpdate&&(r.autoUpdate=t.autoUpdate);const e=t.levels;for(let t=0;t<e.length;t++){const n=e[t],i=r.getObjectByProperty("uuid",n.object);void 0!==i&&r.addLevel(i,n.distance)}}return r}bindSkeletons(t,e){0!==Object.keys(e).length&&t.traverse(function(t){if(!0===t.isSkinnedMesh&&void 0!==t.skeleton){const n=e[t.skeleton];void 0===n?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",t.skeleton):t.bind(n,t.bindMatrix)}})}setTexturePath(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}const xf={UVMapping:rt,CubeReflectionMapping:ot,CubeRefractionMapping:at,EquirectangularReflectionMapping:st,EquirectangularRefractionMapping:lt,CubeUVReflectionMapping:ct,CubeUVRefractionMapping:ut},wf={RepeatWrapping:ht,ClampToEdgeWrapping:dt,MirroredRepeatWrapping:pt},_f={NearestFilter:ft,NearestMipmapNearestFilter:mt,NearestMipmapLinearFilter:gt,LinearFilter:bt,LinearMipmapNearestFilter:xt,LinearMipmapLinearFilter:_t};function Mf(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),fp.call(this,t),this.options={premultiplyAlpha:"none"}}function Ef(){this.type="ShapePath",this.color=new yr,this.subPaths=[],this.currentPath=null}Mf.prototype=Object.assign(Object.create(fp.prototype),{constructor:Mf,isImageBitmapLoader:!0,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const r=this,o=hp.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;const a={};a.credentials="anonymous"===this.crossOrigin?"same-origin":"include",fetch(t,a).then(function(t){return t.blob()}).then(function(t){return createImageBitmap(t,r.options)}).then(function(n){hp.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)}}),Object.assign(Ef.prototype,{moveTo:function(t,e){return this.currentPath=new Jp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e),this},lineTo:function(t,e){return this.currentPath.lineTo(t,e),this},quadraticCurveTo:function(t,e,n,i){return this.currentPath.quadraticCurveTo(t,e,n,i),this},bezierCurveTo:function(t,e,n,i,r,o){return this.currentPath.bezierCurveTo(t,e,n,i,r,o),this},splineThru:function(t){return this.currentPath.splineThru(t),this},toShapes:function(t,e){function n(t){const e=[];for(let n=0,i=t.length;n<i;n++){const i=t[n],r=new Kp;r.curves=i.curves,e.push(r)}return e}function i(t,e){const n=e.length;let i=!1;for(let r=n-1,o=0;o<n;r=o++){let n=e[r],a=e[o],s=a.x-n.x,l=a.y-n.y;if(Math.abs(l)>Number.EPSILON){if(l<0&&(n=e[o],s=-s,a=e[r],l=-l),t.y<n.y||t.y>a.y)continue;if(t.y===n.y){if(t.x===n.x)return!0}else{const e=l*(t.x-n.x)-s*(t.y-n.y);if(0===e)return!0;if(e<0)continue;i=!i}}else{if(t.y!==n.y)continue;if(a.x<=t.x&&t.x<=n.x||n.x<=t.x&&t.x<=a.x)return!0}}return i}const r=gd.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);let a,s,l;const c=[];if(1===o.length)return s=o[0],l=new Kp,l.curves=s.curves,c.push(l),c;let u=!r(o[0].getPoints());u=t?!u:u;const h=[],d=[];let p,f,m=[],v=0;d[v]=void 0,m[v]=[];for(let g=0,y=o.length;g<y;g++)s=o[g],p=s.getPoints(),a=r(p),a=t?!a:a,a?(!u&&d[v]&&v++,d[v]={s:new Kp,p:p},d[v].s.curves=s.curves,u&&v++,m[v]=[]):m[v].push({h:s,p:p[0]});if(!d[0])return n(o);if(d.length>1){let t=!1;const e=[];for(let n=0,i=d.length;n<i;n++)h[n]=[];for(let n=0,r=d.length;n<r;n++){const r=m[n];for(let o=0;o<r.length;o++){const a=r[o];let s=!0;for(let r=0;r<d.length;r++)i(a.p,d[r].p)&&(n!==r&&e.push({froms:n,tos:r,hole:o}),s?(s=!1,h[r].push(a)):t=!0);s&&h[n].push(a)}}e.length>0&&(t||(m=h))}for(let g=0,y=d.length;g<y;g++){l=d[g].s,c.push(l),f=m[g];for(let t=0,e=f.length;t<e;t++)l.holes.push(f[t].h)}return c}});class Sf{constructor(t){Object.defineProperty(this,"isFont",{value:!0}),this.type="Font",this.data=t}generateShapes(t,e=100){const n=[],i=Tf(t,e,this.data);for(let r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}function Tf(t,e,n){const i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[];let s=0,l=0;for(let c=0;c<i.length;c++){const t=i[c];if("\n"===t)s=0,l-=o;else{const e=Af(t,r,s,l,n);s+=e.offsetX,a.push(e.path)}}return a}function Af(t,e,n,i,r){const o=r.glyphs[t]||r.glyphs["?"];if(!o)return void console.error('THREE.Font: character "'+t+'" does not exists in font family '+r.familyName+".");const a=new Ef;let s,l,c,u,h,d,p,f;if(o.o){const t=o._cachedOutline||(o._cachedOutline=o.o.split(" "));for(let r=0,o=t.length;r<o;){const o=t[r++];switch(o){case"m":s=t[r++]*e+n,l=t[r++]*e+i,a.moveTo(s,l);break;case"l":s=t[r++]*e+n,l=t[r++]*e+i,a.lineTo(s,l);break;case"q":c=t[r++]*e+n,u=t[r++]*e+i,h=t[r++]*e+n,d=t[r++]*e+i,a.quadraticCurveTo(h,d,c,u);break;case"b":c=t[r++]*e+n,u=t[r++]*e+i,h=t[r++]*e+n,d=t[r++]*e+i,p=t[r++]*e+n,f=t[r++]*e+i,a.bezierCurveTo(h,d,p,f,c,u);break}}}return{offsetX:o.ha*e,path:a}}function Cf(t){fp.call(this,t)}let Lf;Cf.prototype=Object.assign(Object.create(fp.prototype),{constructor:Cf,load:function(t,e,n,i){const r=this,o=new vp(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(t){let n;try{n=JSON.parse(t)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}const i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new Sf(t)}});const Pf={getContext:function(){return void 0===Lf&&(Lf=new(window.AudioContext||window.webkitAudioContext)),Lf},setContext:function(t){Lf=t}};function Of(t){fp.call(this,t)}function Rf(t,e,n){pf.call(this,void 0,n);const i=(new yr).set(t),r=(new yr).set(e),o=new Jn(i.r,i.g,i.b),a=new Jn(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function kf(t,e){pf.call(this,void 0,e);const n=(new yr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}Of.prototype=Object.assign(Object.create(fp.prototype),{constructor:Of,load:function(t,e,n,i){const r=this,o=new vp(r.manager);o.setResponseType("arraybuffer"),o.setPath(r.path),o.setRequestHeader(r.requestHeader),o.setWithCredentials(r.withCredentials),o.load(t,function(n){try{const a=n.slice(0),s=Pf.getContext();s.decodeAudioData(a,function(t){e(t)})}catch(o){i?i(o):console.error(o),r.manager.itemError(t)}},n,i)}}),Rf.prototype=Object.assign(Object.create(pf.prototype),{constructor:Rf,isHemisphereLightProbe:!0,copy:function(t){return pf.prototype.copy.call(this,t),this},toJSON:function(t){const e=pf.prototype.toJSON.call(this,t);return e}}),kf.prototype=Object.assign(Object.create(pf.prototype),{constructor:kf,isAmbientLightProbe:!0,copy:function(t){return pf.prototype.copy.call(this,t),this},toJSON:function(t){const e=pf.prototype.toJSON.call(this,t);return e}});const Df=new Si,If=new Si;function Nf(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new _o,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new _o,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}Object.assign(Nf.prototype,{update:function(t){const e=this._cache,n=e.focus!==t.focus||e.fov!==t.fov||e.aspect!==t.aspect*this.aspect||e.near!==t.near||e.far!==t.far||e.zoom!==t.zoom||e.eyeSep!==this.eyeSep;if(n){e.focus=t.focus,e.fov=t.fov,e.aspect=t.aspect*this.aspect,e.near=t.near,e.far=t.far,e.zoom=t.zoom,e.eyeSep=this.eyeSep;const n=t.projectionMatrix.clone(),i=e.eyeSep/2,r=i*e.near/e.focus,o=e.near*Math.tan(Fn.DEG2RAD*e.fov*.5)/e.zoom;let a,s;If.elements[12]=-i,Df.elements[12]=i,a=-o*e.aspect+r,s=o*e.aspect+r,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraL.projectionMatrix.copy(n),a=-o*e.aspect-r,s=o*e.aspect-r,n.elements[0]=2*e.near/(s-a),n.elements[8]=(s+a)/(s-a),this.cameraR.projectionMatrix.copy(n)}this.cameraL.matrixWorld.copy(t.matrixWorld).multiply(If),this.cameraR.matrixWorld.copy(t.matrixWorld).multiply(Df)}});class zf{constructor(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Bf(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Bf();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Bf(){return("undefined"===typeof performance?Date:performance).now()}const Ff=new Jn,jf=new Zn,Hf=new Jn,Uf=new Jn;class Vf extends Zi{constructor(){super(),this.type="AudioListener",this.context=Pf.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new zf}getInput(){return this.gain}removeFilter(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}updateMatrixWorld(t){super.updateMatrixWorld(t);const e=this.context.listener,n=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Ff,jf,Hf),Uf.set(0,0,-1).applyQuaternion(jf),e.positionX){const t=this.context.currentTime+this.timeDelta;e.positionX.linearRampToValueAtTime(Ff.x,t),e.positionY.linearRampToValueAtTime(Ff.y,t),e.positionZ.linearRampToValueAtTime(Ff.z,t),e.forwardX.linearRampToValueAtTime(Uf.x,t),e.forwardY.linearRampToValueAtTime(Uf.y,t),e.forwardZ.linearRampToValueAtTime(Uf.z,t),e.upX.linearRampToValueAtTime(n.x,t),e.upY.linearRampToValueAtTime(n.y,t),e.upZ.linearRampToValueAtTime(n.z,t)}else e.setPosition(Ff.x,Ff.y,Ff.z),e.setOrientation(Uf.x,Uf.y,Uf.z,n.x,n.y,n.z)}}class Gf extends Zi{constructor(t){super(),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this}setMediaElementSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this}setMediaStreamSource(t){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(t),this.connect(),this}setBuffer(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this}play(t=0){if(!0===this.isPlaying)return void console.warn("THREE.Audio: Audio is already playing.");if(!1===this.hasPlaybackControl)return void console.warn("THREE.Audio: this Audio has no playback control.");this._startedAt=this.context.currentTime+t;const e=this.context.createBufferSource();return e.buffer=this.buffer,e.loop=this.loop,e.loopStart=this.loopStart,e.loopEnd=this.loopEnd,e.onended=this.onEnded.bind(this),e.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=e,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,!0===this.loop&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")}stop(){if(!1!==this.hasPlaybackControl)return this._progress=0,this.source.stop(),this.source.onended=null,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(t){return t||(t=[]),!0===this._connected?(this.disconnect(),this.filters=t.slice(),this.connect()):this.filters=t.slice(),this}setDetune(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(t){return this.setFilters(t?[t]:[])}setPlaybackRate(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")}setLoopStart(t){return this.loopStart=t,this}setLoopEnd(t){return this.loopEnd=t,this}getVolume(){return this.gain.gain.value}setVolume(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}const Wf=new Jn,$f=new Zn,qf=new Jn,Yf=new Jn;class Xf extends Gf{constructor(t){super(t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(t){return this.panner.refDistance=t,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(t){return this.panner.rolloffFactor=t,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(t){return this.panner.distanceModel=t,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(t){return this.panner.maxDistance=t,this}setDirectionalCone(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this}updateMatrixWorld(t){if(super.updateMatrixWorld(t),!0===this.hasPlaybackControl&&!1===this.isPlaying)return;this.matrixWorld.decompose(Wf,$f,qf),Yf.set(0,0,1).applyQuaternion($f);const e=this.panner;if(e.positionX){const t=this.context.currentTime+this.listener.timeDelta;e.positionX.linearRampToValueAtTime(Wf.x,t),e.positionY.linearRampToValueAtTime(Wf.y,t),e.positionZ.linearRampToValueAtTime(Wf.z,t),e.orientationX.linearRampToValueAtTime(Yf.x,t),e.orientationY.linearRampToValueAtTime(Yf.y,t),e.orientationZ.linearRampToValueAtTime(Yf.z,t)}else e.setPosition(Wf.x,Wf.y,Wf.z),e.setOrientation(Yf.x,Yf.y,Yf.z)}}class Zf{constructor(t,e=2048){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=e,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let t=0;const e=this.getFrequencyData();for(let n=0;n<e.length;n++)t+=e[n];return t/e.length}}function Jf(t,e,n){let i,r,o;switch(this.binding=t,this.valueSize=n,e){case"quaternion":i=this._slerp,r=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(6*n),this._workIndex=5;break;case"string":case"bool":i=this._select,r=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(5*n);break;default:i=this._lerp,r=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(5*n)}this._mixBufferRegion=i,this._mixBufferRegionAdditive=r,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}Object.assign(Jf.prototype,{accumulate:function(t,e){const n=this.buffer,i=this.valueSize,r=t*i+i;let o=this.cumulativeWeight;if(0===o){for(let t=0;t!==i;++t)n[r+t]=n[t];o=e}else{o+=e;const t=e/o;this._mixBufferRegion(n,r,0,t,i)}this.cumulativeWeight=o},accumulateAdditive:function(t){const e=this.buffer,n=this.valueSize,i=n*this._addIndex;0===this.cumulativeWeightAdditive&&this._setIdentity(),this._mixBufferRegionAdditive(e,i,0,t,n),this.cumulativeWeightAdditive+=t},apply:function(t){const e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,r<1){const t=e*this._origIndex;this._mixBufferRegion(n,i,t,1-r,e)}o>0&&this._mixBufferRegionAdditive(n,i,this._addIndex*e,1,e);for(let s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){a.setValue(n,i);break}},saveOriginalState:function(){const t=this.binding,e=this.buffer,n=this.valueSize,i=n*this._origIndex;t.getValue(e,i);for(let r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0},restoreOriginalState:function(){const t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_setAdditiveIdentityNumeric:function(){const t=this._addIndex*this.valueSize,e=t+this.valueSize;for(let n=t;n<e;n++)this.buffer[n]=0},_setAdditiveIdentityQuaternion:function(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1},_setAdditiveIdentityOther:function(){const t=this._origIndex*this.valueSize,e=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[e+n]=this.buffer[t+n]},_select:function(t,e,n,i,r){if(i>=.5)for(let o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){Zn.slerpFlat(t,e,t,e,t,n,i)},_slerpAdditive:function(t,e,n,i,r){const o=this._workIndex*r;Zn.multiplyQuaternionsFlat(t,o,t,e,t,n),Zn.slerpFlat(t,e,t,e,t,o,i)},_lerp:function(t,e,n,i,r){const o=1-i;for(let a=0;a!==r;++a){const r=e+a;t[r]=t[r]*o+t[n+a]*i}},_lerpAdditive:function(t,e,n,i,r){for(let o=0;o!==r;++o){const r=e+o;t[r]=t[r]+t[n+o]*i}}});const Kf="\\[\\]\\.:\\/",Qf=new RegExp("["+Kf+"]","g"),tm="[^"+Kf+"]",em="[^"+Kf.replace("\\.","")+"]",nm=/((?:WC+[\/:])*)/.source.replace("WC",tm),im=/(WCOD+)?/.source.replace("WCOD",em),rm=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",tm),om=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",tm),am=new RegExp("^"+nm+im+rm+om+"$"),sm=["material","materials","bones"];function lm(t,e,n){const i=n||cm.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function cm(t,e,n){this.path=e,this.parsedPath=n||cm.parseTrackName(e),this.node=cm.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function um(){this.uuid=Fn.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const t={};this._indicesByUUID=t;for(let n=0,i=arguments.length;n!==i;++n)t[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const e=this;this.stats={objects:{get total(){return e._objects.length},get inUse(){return this.total-e.nCachedObjects_}},get bindingsPerObject(){return e._bindings.length}}}Object.assign(lm.prototype,{getValue:function(t,e){this.bind();const n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){const n=this._bindings;for(let i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(cm,{Composite:lm,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new cm.Composite(t,e,n):new cm(t,e,n)},sanitizeNodeName:function(t){return t.replace(/\s/g,"_").replace(Qf,"")},parseTrackName:function(t){const e=am.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){const t=n.nodeName.substring(i+1);-1!==sm.indexOf(t)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=t)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n},findNode:function(t,e){if(!e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){const n=function(t){for(let i=0;i<t.length;i++){const r=t[i];if(r.name===e||r.uuid===e)return r;const o=n(r.children);if(o)return o}return null},i=n(t.children);if(i)return i}return null}}),Object.assign(cm.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){const n=this.resolvedProperty;for(let i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){let t=this.node;const e=this.parsedPath,n=e.objectName,i=e.propertyName;let r=e.propertyIndex;if(t||(t=cm.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.");if(n){let i=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===i){i=e;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==i){if(void 0===t[i])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[i]}}const o=t[i];if(void 0===o){const n=e.nodeName;return void console.error("THREE.PropertyBinding: Trying to update property for track: "+n+"."+i+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?a=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(a=this.Versioning.MatrixWorldNeedsUpdate);let s=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.isBufferGeometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences on THREE.Geometry. Use THREE.BufferGeometry instead.",this);if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[r]&&(r=t.morphTargetDictionary[r])}s=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=r}else void 0!==o.fromArray&&void 0!==o.toArray?(s=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(s=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=i;this.getValue=this.GetterByBindingType[s],this.setValue=this.SetterByBindingTypeAndVersioning[s][a]},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),Object.assign(cm.prototype,{_getValue_unbound:cm.prototype.getValue,_setValue_unbound:cm.prototype.setValue}),Object.assign(um.prototype,{isAnimationObjectGroup:!0,add:function(){const t=this._objects,e=this._indicesByUUID,n=this._paths,i=this._parsedPaths,r=this._bindings,o=r.length;let a=void 0,s=t.length,l=this.nCachedObjects_;for(let c=0,u=arguments.length;c!==u;++c){const u=arguments[c],h=u.uuid;let d=e[h];if(void 0===d){d=s++,e[h]=d,t.push(u);for(let t=0,e=o;t!==e;++t)r[t].push(new cm(u,n[t],i[t]))}else if(d<l){a=t[d];const s=--l,c=t[s];e[c.uuid]=d,t[d]=c,e[h]=s,t[s]=u;for(let t=0,e=o;t!==e;++t){const e=r[t],o=e[s];let a=e[d];e[d]=o,void 0===a&&(a=new cm(u,n[t],i[t])),e[s]=a}}else t[d]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=l},remove:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const a=arguments[o],s=a.uuid,l=e[s];if(void 0!==l&&l>=r){const o=r++,c=t[o];e[c.uuid]=l,t[l]=c,e[s]=o,t[o]=a;for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[o],r=e[l];e[l]=i,e[o]=r}}}this.nCachedObjects_=r},uncache:function(){const t=this._objects,e=this._indicesByUUID,n=this._bindings,i=n.length;let r=this.nCachedObjects_,o=t.length;for(let a=0,s=arguments.length;a!==s;++a){const s=arguments[a],l=s.uuid,c=e[l];if(void 0!==c)if(delete e[l],c<r){const a=--r,s=t[a],l=--o,u=t[l];e[s.uuid]=c,t[c]=s,e[u.uuid]=a,t[a]=u,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t],i=e[a],r=e[l];e[c]=i,e[a]=r,e.pop()}}else{const r=--o,a=t[r];r>0&&(e[a.uuid]=c),t[c]=a,t.pop();for(let t=0,e=i;t!==e;++t){const e=n[t];e[c]=e[r],e.pop()}}}this.nCachedObjects_=r},subscribe_:function(t,e){const n=this._bindingsIndicesByPath;let i=n[t];const r=this._bindings;if(void 0!==i)return r[i];const o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(let h=c,d=s.length;h!==d;++h){const n=s[h];u[h]=new cm(n,t,e)}return u},unsubscribe_:function(t){const e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){const i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],l=t[a];e[l]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}});class hm{constructor(t,e,n=null,i=e.blendMode){this._mixer=t,this._clip=e,this._localRoot=n,this.blendMode=i;const r=e.tracks,o=r.length,a=new Array(o),s={endingStart:Ue,endingEnd:Ue};for(let l=0;l!==o;++l){const t=r[l].createInterpolant(null);a[l]=t,t.settings=s}this._interpolantSettings=s,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=ze,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(t){return this._startTime=t,this}setLoop(t,e){return this.loop=t,this.repetitions=e,this}setEffectiveWeight(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(t){return this._scheduleFading(t,0,1)}fadeOut(t){return this._scheduleFading(t,1,0)}crossFadeFrom(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){const n=this._clip.duration,i=t._clip.duration,r=i/n,o=n/i;t.warp(1,r,e),this.warp(o,1,e)}return this}crossFadeTo(t,e,n){return t.crossFadeFrom(this,e,n)}stopFading(){const t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}setEffectiveTimeScale(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(t){return this.timeScale=this._clip.duration/t,this.stopWarping()}syncWith(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()}halt(t){return this.warp(this._effectiveTimeScale,0,t)}warp(t,e,n){const i=this._mixer,r=i.time,o=this.timeScale;let a=this._timeScaleInterpolant;null===a&&(a=i._lendControlInterpolant(),this._timeScaleInterpolant=a);const s=a.parameterPositions,l=a.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/o,l[1]=e/o,this}stopWarping(){const t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(t,e,n,i){if(!this.enabled)return void this._updateWeight(t);const r=this._startTime;if(null!==r){const i=(t-r)*n;if(i<0||0===n)return;this._startTime=null,e=n*i}e*=this._updateTimeScale(t);const o=this._updateTime(e),a=this._updateWeight(t);if(a>0){const t=this._interpolants,e=this._propertyBindings;switch(this.blendMode){case $e:for(let n=0,i=t.length;n!==i;++n)t[n].evaluate(o),e[n].accumulateAdditive(a);break;case We:default:for(let n=0,r=t.length;n!==r;++n)t[n].evaluate(o),e[n].accumulate(i,a)}}}_updateWeight(t){let e=0;if(this.enabled){e=this.weight;const n=this._weightInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e}_updateTimeScale(t){let e=0;if(!this.paused){e=this.timeScale;const n=this._timeScaleInterpolant;if(null!==n){const i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e}_updateTime(t){const e=this._clip.duration,n=this.loop;let i=this.time+t,r=this._loopCount;const o=n===Be;if(0===t)return-1===r?i:o&&1===(1&r)?e-i:i;if(n===Ne){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(i>=e)i=e;else{if(!(i<0)){this.time=i;break t}i=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),i>=e||i<0){const n=Math.floor(i/e);i-=e*n,r+=Math.abs(n);const a=this.repetitions-r;if(a<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,i=t>0?e:0,this.time=i,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===a){const e=t<0;this._setEndings(e,!e,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=i,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:n})}}else this.time=i;if(o&&1===(1&r))return e-i}return i}_setEndings(t,e,n){const i=this._interpolantSettings;n?(i.endingStart=Ve,i.endingEnd=Ve):(i.endingStart=t?this.zeroSlopeAtStart?Ve:Ue:Ge,i.endingEnd=e?this.zeroSlopeAtEnd?Ve:Ue:Ge)}_scheduleFading(t,e,n){const i=this._mixer,r=i.time;let o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}function dm(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}dm.prototype=Object.assign(Object.create(Nn.prototype),{constructor:dm,_bindAction:function(t,e){const n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName;let c=l[s];void 0===c&&(c={},l[s]=c);for(let u=0;u!==r;++u){const t=i[u],r=t.name;let l=c[r];if(void 0!==l)o[u]=l;else{if(l=o[u],void 0!==l){null===l._cacheIndex&&(++l.referenceCount,this._addInactiveBinding(l,s,r));continue}const i=e&&e._propertyBindings[u].binding.parsedPath;l=new Jf(cm.create(n,r,i),t.ValueTypeName,t.getValueSize()),++l.referenceCount,this._addInactiveBinding(l,s,r),o[u]=l}a[u].resultBuffer=l.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){const e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===n.useCount++&&(this._lendBinding(n),n.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){const e=t._propertyBindings;for(let t=0,n=e.length;t!==n;++t){const n=e[t];0===--n.useCount&&(n.restoreOriginalState(),this._takeBackBinding(n))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){const e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){const i=this._actions,r=this._actionsByClip;let o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{const e=o.knownActions;t._byClipCacheIndex=e.length,e.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){const e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;const r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null;const u=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete u[h],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){const e=t._propertyBindings;for(let n=0,i=e.length;n!==i;++n){const t=e[n];0===--t.referenceCount&&this._removeInactiveBinding(t)}},_lendAction:function(t){const e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){const e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){const i=this._bindingsByRootAndName,r=this._bindings;let o=i[e];void 0===o&&(o={},i[e]=o),o[n]=t,t._cacheIndex=r.length,r.push(t)},_removeInactiveBinding:function(t){const e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r],0===Object.keys(a).length&&delete o[i]},_lendBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){const e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){const t=this._controlInterpolants,e=this._nActiveControlInterpolants++;let n=t[e];return void 0===n&&(n=new Kd(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){const e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e,n){const i=e||this._root,r=i.uuid;let o="string"===typeof t?lp.findByName(i,t):t;const a=null!==o?o.uuid:t,s=this._actionsByClip[a];let l=null;if(void 0===n&&(n=null!==o?o.blendMode:We),void 0!==s){const t=s.actionByRoot[r];if(void 0!==t&&t.blendMode===n)return t;l=s.knownActions[0],null===o&&(o=l._clip)}if(null===o)return null;const c=new hm(this,o,e,n);return this._bindAction(c,l),this._addInactiveAction(c,a,r),c},existingAction:function(t,e){const n=e||this._root,i=n.uuid,r="string"===typeof t?lp.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){const t=this._actions,e=this._nActiveActions;for(let n=e-1;n>=0;--n)t[n].stop();return this},update:function(t){t*=this.timeScale;const e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1;for(let l=0;l!==n;++l){const n=e[l];n._update(i,t,r,o)}const a=this._bindings,s=this._nActiveBindings;for(let l=0;l!==s;++l)a[l].apply(o);return this},setTime:function(t){this.time=0;for(let e=0;e<this._actions.length;e++)this._actions[e].time=0;return this.update(t)},getRoot:function(){return this._root},uncacheClip:function(t){const e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){const t=r.knownActions;for(let n=0,i=t.length;n!==i;++n){const i=t[n];this._deactivateAction(i);const r=i._cacheIndex,o=e[e.length-1];i._cacheIndex=null,i._byClipCacheIndex=null,o._cacheIndex=r,e[r]=o,e.pop(),this._removeInactiveBindingsForAction(i)}delete i[n]}},uncacheRoot:function(t){const e=t.uuid,n=this._actionsByClip;for(const o in n){const t=n[o].actionByRoot,i=t[e];void 0!==i&&(this._deactivateAction(i),this._removeInactiveAction(i))}const i=this._bindingsByRootAndName,r=i[e];if(void 0!==r)for(const o in r){const t=r[o];t.restoreOriginalState(),this._removeInactiveBinding(t)}},uncacheAction:function(t,e){const n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}});class pm{constructor(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}clone(){return new pm(void 0===this.value.clone?this.value:this.value.clone())}}function fm(t,e,n){Eu.call(this,t,e),this.meshPerAttribute=n||1}function mm(t,e,n,i,r){this.buffer=t,this.type=e,this.itemSize=n,this.elementSize=i,this.count=r,this.version=0}function vm(t,e,n,i){this.ray=new Ei(t,e),this.near=n||0,this.far=i||1/0,this.camera=null,this.layers=new Ni,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function gm(t,e){return t.distance-e.distance}function ym(t,e,n,i){if(t.layers.test(e.layers)&&t.raycast(e,n),!0===i){const i=t.children;for(let t=0,r=i.length;t<r;t++)ym(i[t],e,n,!0)}}fm.prototype=Object.assign(Object.create(Eu.prototype),{constructor:fm,isInstancedInterleavedBuffer:!0,copy:function(t){return Eu.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},clone:function(t){const e=Eu.prototype.clone.call(this,t);return e.meshPerAttribute=this.meshPerAttribute,e},toJSON:function(t){const e=Eu.prototype.toJSON.call(this,t);return e.isInstancedInterleavedBuffer=!0,e.meshPerAttribute=this.meshPerAttribute,e}}),Object.defineProperty(mm.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(mm.prototype,{isGLBufferAttribute:!0,setBuffer:function(t){return this.buffer=t,this},setType:function(t,e){return this.type=t,this.elementSize=e,this},setItemSize:function(t){return this.itemSize=t,this},setCount:function(t){return this.count=t,this}}),Object.assign(vm.prototype,{set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):console.error("THREE.Raycaster: Unsupported camera type: "+e.type)},intersectObject:function(t,e,n){const i=n||[];return ym(t,this,i,e),i.sort(gm),i},intersectObjects:function(t,e,n){const i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(let r=0,o=t.length;r<o;r++)ym(t[r],this,i,e);return i.sort(gm),i}});class bm{constructor(t=1,e=0,n=0){return this.radius=t,this.phi=e,this.theta=n,this}set(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this}makeSafe(){const t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(Fn.clamp(e/this.radius,-1,1))),this}}class xm{constructor(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}set(t,e,n){return this.radius=t,this.theta=e,this.y=n,this}clone(){return(new this.constructor).copy(this)}copy(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this}setFromVector3(t){return this.setFromCartesianCoords(t.x,t.y,t.z)}setFromCartesianCoords(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}const wm=new jn;class _m{constructor(t,e){Object.defineProperty(this,"isBox2",{value:!0}),this.min=void 0!==t?t:new jn(1/0,1/0),this.max=void 0!==e?e:new jn(-1/0,-1/0)}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromPoints(t){this.makeEmpty();for(let e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const n=wm.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(n),this.max.copy(t).add(n),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new jn),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new jn),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}containsPoint(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y}getParameter(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new jn),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)}clampPoint(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new jn),e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){const e=wm.copy(t).clamp(this.min,this.max);return e.sub(t).length()}intersect(t){return this.min.max(t.min),this.max.min(t.max),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Mm=new Jn,Em=new Jn;class Sm{constructor(t,e){this.start=void 0!==t?t:new Jn,this.end=void 0!==e?e:new Jn}set(t,e){return this.start.copy(t),this.end.copy(e),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.start.copy(t.start),this.end.copy(t.end),this}getCenter(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Jn),t.addVectors(this.start,this.end).multiplyScalar(.5)}delta(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Jn),t.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Jn),this.delta(e).multiplyScalar(t).add(this.start)}closestPointToPointParameter(t,e){Mm.subVectors(t,this.start),Em.subVectors(this.end,this.start);const n=Em.dot(Em),i=Em.dot(Mm);let r=i/n;return e&&(r=Fn.clamp(r,0,1)),r}closestPointToPoint(t,e,n){const i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Jn),this.delta(n).multiplyScalar(i).add(this.start)}applyMatrix4(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this}equals(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}function Tm(t){Zi.call(this),this.material=t,this.render=function(){},this.hasPositions=!1,this.hasNormals=!1,this.hasColors=!1,this.hasUvs=!1,this.positionArray=null,this.normalArray=null,this.colorArray=null,this.uvArray=null,this.count=0}Tm.prototype=Object.create(Zi.prototype),Tm.prototype.constructor=Tm,Tm.prototype.isImmediateRenderObject=!0;const Am=new Jn;class Cm extends Zi{constructor(t,e){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;const n=new $r,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,s=32;o<s;o++,a++){const t=o/s*Math.PI*2,e=a/s*Math.PI*2;i.push(Math.cos(t),Math.sin(t),1,Math.cos(e),Math.sin(e),1)}n.setAttribute("position",new Dr(i,3));const r=new sh({fog:!1,toneMapped:!1});this.cone=new vh(n,r),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateMatrixWorld();const t=this.light.distance?this.light.distance:1e3,e=t*Math.tan(this.light.angle);this.cone.scale.set(e,e,t),Am.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Am),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Lm=new Jn,Pm=new Si,Om=new Si;class Rm extends vh{constructor(t){const e=km(t),n=new $r,i=[],r=[],o=new yr(0,0,1),a=new yr(0,1,0);for(let l=0;l<e.length;l++){const t=e[l];t.parent&&t.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.setAttribute("position",new Dr(i,3)),n.setAttribute("color",new Dr(r,3));const s=new sh({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,s),this.type="SkeletonHelper",this.isSkeletonHelper=!0,this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(t){const e=this.bones,n=this.geometry,i=n.getAttribute("position");Om.copy(this.root.matrixWorld).invert();for(let r=0,o=0;r<e.length;r++){const t=e[r];t.parent&&t.parent.isBone&&(Pm.multiplyMatrices(Om,t.matrixWorld),Lm.setFromMatrixPosition(Pm),i.setXYZ(o,Lm.x,Lm.y,Lm.z),Pm.multiplyMatrices(Om,t.parent.matrixWorld),Lm.setFromMatrixPosition(Pm),i.setXYZ(o+1,Lm.x,Lm.y,Lm.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(t)}}function km(t){const e=[];t&&t.isBone&&e.push(t);for(let n=0;n<t.children.length;n++)e.push.apply(e,km(t.children[n]));return e}class Dm extends uo{constructor(t,e,n){const i=new Pd(e,4,2),r=new _r({wireframe:!0,fog:!1,toneMapped:!1});super(i,r),this.light=t,this.light.updateMatrixWorld(),this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const Im=new Jn,Nm=new yr,zm=new yr;class Bm extends Zi{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;const i=new Sd(e);i.rotateY(.5*Math.PI),this.material=new _r({wireframe:!0,fog:!1,toneMapped:!1}),void 0===this.color&&(this.material.vertexColors=!0);const r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.setAttribute("color",new Sr(o,3)),this.add(new uo(i,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const t=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{const e=t.geometry.getAttribute("color");Nm.copy(this.light.color),zm.copy(this.light.groundColor);for(let t=0,n=e.count;t<n;t++){const i=t<n/2?Nm:zm;e.setXYZ(t,i.r,i.g,i.b)}e.needsUpdate=!0}t.lookAt(Im.setFromMatrixPosition(this.light.matrixWorld).negate())}}class Fm extends vh{constructor(t=10,e=10,n=4473924,i=8947848){n=new yr(n),i=new yr(i);const r=e/2,o=t/e,a=t/2,s=[],l=[];for(let h=0,d=0,p=-a;h<=e;h++,p+=o){s.push(-a,0,p,a,0,p),s.push(p,0,-a,p,0,a);const t=h===r?n:i;t.toArray(l,d),d+=3,t.toArray(l,d),d+=3,t.toArray(l,d),d+=3,t.toArray(l,d),d+=3}const c=new $r;c.setAttribute("position",new Dr(s,3)),c.setAttribute("color",new Dr(l,3));const u=new sh({vertexColors:!0,toneMapped:!1});super(c,u),this.type="GridHelper"}}class jm extends vh{constructor(t=10,e=16,n=8,i=64,r=4473924,o=8947848){r=new yr(r),o=new yr(o);const a=[],s=[];for(let u=0;u<=e;u++){const n=u/e*(2*Math.PI),i=Math.sin(n)*t,l=Math.cos(n)*t;a.push(0,0,0),a.push(i,0,l);const c=1&u?r:o;s.push(c.r,c.g,c.b),s.push(c.r,c.g,c.b)}for(let u=0;u<=n;u++){const e=1&u?r:o,l=t-t/n*u;for(let t=0;t<i;t++){let n=t/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l;a.push(r,0,o),s.push(e.r,e.g,e.b),n=(t+1)/i*(2*Math.PI),r=Math.sin(n)*l,o=Math.cos(n)*l,a.push(r,0,o),s.push(e.r,e.g,e.b)}}const l=new $r;l.setAttribute("position",new Dr(a,3)),l.setAttribute("color",new Dr(s,3));const c=new sh({vertexColors:!0,toneMapped:!1});super(l,c),this.type="PolarGridHelper"}}const Hm=new Jn,Um=new Jn,Vm=new Jn;class Gm extends Zi{constructor(t,e,n){super(),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);let i=new $r;i.setAttribute("position",new Dr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));const r=new sh({fog:!1,toneMapped:!1});this.lightPlane=new ph(i,r),this.add(this.lightPlane),i=new $r,i.setAttribute("position",new Dr([0,0,0,0,0,1],3)),this.targetLine=new ph(i,r),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){Hm.setFromMatrixPosition(this.light.matrixWorld),Um.setFromMatrixPosition(this.light.target.matrixWorld),Vm.subVectors(Um,Hm),this.lightPlane.lookAt(Um),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Um),this.targetLine.scale.z=Vm.length()}}const Wm=new Jn,$m=new wo;class qm extends vh{constructor(t){const e=new $r,n=new sh({color:16777215,vertexColors:!0,toneMapped:!1}),i=[],r=[],o={},a=new yr(16755200),s=new yr(16711680),l=new yr(43775),c=new yr(16777215),u=new yr(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),e.setAttribute("position",new Dr(i,3)),e.setAttribute("color",new Dr(r,3)),super(e,n),this.type="CameraHelper",this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}update(){const t=this.geometry,e=this.pointMap,n=1,i=1;$m.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),Ym("c",e,t,$m,0,0,-1),Ym("t",e,t,$m,0,0,1),Ym("n1",e,t,$m,-n,-i,-1),Ym("n2",e,t,$m,n,-i,-1),Ym("n3",e,t,$m,-n,i,-1),Ym("n4",e,t,$m,n,i,-1),Ym("f1",e,t,$m,-n,-i,1),Ym("f2",e,t,$m,n,-i,1),Ym("f3",e,t,$m,-n,i,1),Ym("f4",e,t,$m,n,i,1),Ym("u1",e,t,$m,.7*n,1.1*i,-1),Ym("u2",e,t,$m,.7*-n,1.1*i,-1),Ym("u3",e,t,$m,0,2*i,-1),Ym("cf1",e,t,$m,-n,0,1),Ym("cf2",e,t,$m,n,0,1),Ym("cf3",e,t,$m,0,-i,1),Ym("cf4",e,t,$m,0,i,1),Ym("cn1",e,t,$m,-n,0,-1),Ym("cn2",e,t,$m,n,0,-1),Ym("cn3",e,t,$m,0,-i,-1),Ym("cn4",e,t,$m,0,i,-1),t.getAttribute("position").needsUpdate=!0}}function Ym(t,e,n,i,r,o,a){Wm.set(r,o,a).unproject(i);const s=e[t];if(void 0!==s){const t=n.getAttribute("position");for(let e=0,n=s.length;e<n;e++)t.setXYZ(s[e],Wm.x,Wm.y,Wm.z)}}const Xm=new ti;class Zm extends vh{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new $r;r.setIndex(new Sr(n,1)),r.setAttribute("position",new Sr(i,3)),super(r,new sh({color:e,toneMapped:!1})),this.object=t,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(t){if(void 0!==t&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&Xm.setFromObject(this.object),Xm.isEmpty())return;const e=Xm.min,n=Xm.max,i=this.geometry.attributes.position,r=i.array;r[0]=n.x,r[1]=n.y,r[2]=n.z,r[3]=e.x,r[4]=n.y,r[5]=n.z,r[6]=e.x,r[7]=e.y,r[8]=n.z,r[9]=n.x,r[10]=e.y,r[11]=n.z,r[12]=n.x,r[13]=n.y,r[14]=e.z,r[15]=e.x,r[16]=n.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=n.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(t){return this.object=t,this.update(),this}copy(t){return vh.prototype.copy.call(this,t),this.object=t.object,this}}class Jm extends vh{constructor(t,e=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],r=new $r;r.setIndex(new Sr(n,1)),r.setAttribute("position",new Dr(i,3)),super(r,new sh({color:e,toneMapped:!1})),this.box=t,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(t){const e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(t))}}class Km extends ph{constructor(t,e=1,n=16776960){const i=n,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new $r;o.setAttribute("position",new Dr(r,3)),o.computeBoundingSphere(),super(o,new sh({color:i,toneMapped:!1})),this.type="PlaneHelper",this.plane=t,this.size=e;const a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new $r;s.setAttribute("position",new Dr(a,3)),s.computeBoundingSphere(),this.add(new uo(s,new _r({color:i,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(t){let e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?m:f,this.lookAt(this.plane.normal),super.updateMatrixWorld(t)}}const Qm=new Jn;let tv,ev;class nv extends Zi{constructor(t,e,n,i,r,o){super(),this.type="ArrowHelper",void 0===t&&(t=new Jn(0,0,1)),void 0===e&&(e=new Jn(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===tv&&(tv=new $r,tv.setAttribute("position",new Dr([0,0,0,0,1,0],3)),ev=new Ph(0,.5,1,5,1),ev.translate(0,-.5,0)),this.position.copy(e),this.line=new ph(tv,new sh({color:i,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new uo(ev,new _r({color:i,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}setDirection(t){if(t.y>.99999)this.quaternion.set(0,0,0,1);else if(t.y<-.99999)this.quaternion.set(1,0,0,0);else{Qm.set(t.z,0,-t.x).normalize();const e=Math.acos(t.y);this.quaternion.setFromAxisAngle(Qm,e)}}setLength(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(1e-4,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()}setColor(t){this.line.material.color.set(t),this.cone.material.color.set(t)}copy(t){return super.copy(t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this}}class iv extends vh{constructor(t=1){const e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new $r;i.setAttribute("position",new Dr(e,3)),i.setAttribute("color",new Dr(n,3));const r=new sh({vertexColors:!0,toneMapped:!1});super(i,r),this.type="AxesHelper"}}const rv=new Float32Array(1),ov=new Int32Array(rv.buffer),av={toHalfFloat:function(t){rv[0]=t;const e=ov[0];let n=e>>16&32768,i=e>>12&2047;const r=e>>23&255;return r<103?n:r>142?(n|=31744,n|=(255==r?0:1)&&8388607&e,n):r<113?(i|=2048,n|=(i>>114-r)+(i>>113-r&1),n):(n|=r-112<<10|i>>1,n+=1&i,n)}},sv=4,lv=8,cv=Math.pow(2,lv),uv=[.125,.215,.35,.446,.526,.582],hv=lv-sv+1+uv.length,dv=20,pv={[Ze]:0,[Je]:1,[Qe]:2,[en]:3,[nn]:4,[rn]:5,[Ke]:6},fv=new _r({side:m,depthWrite:!1,depthTest:!1}),mv=new uo(new fo,fv),vv=new sf,{_lodPlanes:gv,_sizeLods:yv,_sigmas:bv}=Cv(),xv=new yr;let wv=null;const _v=(1+Math.sqrt(5))/2,Mv=1/_v,Ev=[new Jn(1,1,1),new Jn(-1,1,1),new Jn(1,1,-1),new Jn(-1,1,-1),new Jn(0,_v,Mv),new Jn(0,_v,-Mv),new Jn(Mv,0,_v),new Jn(-Mv,0,_v),new Jn(_v,Mv,0),new Jn(-_v,Mv,0)];function Sv(t){const e=Math.max(t.r,t.g,t.b),n=Math.min(Math.max(Math.ceil(Math.log2(e)),-128),127);t.multiplyScalar(Math.pow(2,-n));const i=(n+128)/255;return i}class Tv{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._blurMaterial=Ov(dv),this._equirectShader=null,this._cubemapShader=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,n=.1,i=100){wv=this._renderer.getRenderTarget();const r=this._allocateTargets();return this._sceneToCubeUV(t,n,i,r),e>0&&this._blur(r,0,0,e),this._applyPMREM(r),this._cleanup(r),r}fromEquirectangular(t){return this._fromTexture(t)}fromCubemap(t){return this._fromTexture(t)}compileCubemapShader(){null===this._cubemapShader&&(this._cubemapShader=kv(),this._compileMaterial(this._cubemapShader))}compileEquirectangularShader(){null===this._equirectShader&&(this._equirectShader=Rv(),this._compileMaterial(this._equirectShader))}dispose(){this._blurMaterial.dispose(),null!==this._cubemapShader&&this._cubemapShader.dispose(),null!==this._equirectShader&&this._equirectShader.dispose();for(let t=0;t<gv.length;t++)gv[t].dispose()}_cleanup(t){this._pingPongRenderTarget.dispose(),this._renderer.setRenderTarget(wv),t.scissorTest=!1,Pv(t,0,0,t.width,t.height)}_fromTexture(t){wv=this._renderer.getRenderTarget();const e=this._allocateTargets(t);return this._textureToCubeUV(t,e),this._applyPMREM(e),this._cleanup(e),e}_allocateTargets(t){const e={magFilter:ft,minFilter:ft,generateMipmaps:!1,type:Et,format:Ht,encoding:Av(t)?t.encoding:Qe,depthBuffer:!1},n=Lv(e);return n.depthBuffer=!t,this._pingPongRenderTarget=Lv(e),n}_compileMaterial(t){const e=new uo(gv[0],t);this._renderer.compile(e,vv)}_sceneToCubeUV(t,e,n,i){const r=90,o=1,a=new _o(r,o,e,n),s=[1,-1,1,1,1,1],l=[1,1,1,-1,-1,-1],c=this._renderer,u=c.autoClear,h=c.outputEncoding,d=c.toneMapping;c.getClearColor(xv),c.toneMapping=K,c.outputEncoding=Ze,c.autoClear=!1;let p=!1;const f=t.background;if(f){if(f.isColor){fv.color.copy(f).convertSRGBToLinear(),t.background=null;const e=Sv(fv.color);fv.opacity=e,p=!0}}else{fv.color.copy(xv).convertSRGBToLinear();const t=Sv(fv.color);fv.opacity=t,p=!0}for(let m=0;m<6;m++){const e=m%3;0==e?(a.up.set(0,s[m],0),a.lookAt(l[m],0,0)):1==e?(a.up.set(0,0,s[m]),a.lookAt(0,l[m],0)):(a.up.set(0,s[m],0),a.lookAt(0,0,l[m])),Pv(i,e*cv,m>2?cv:0,cv,cv),c.setRenderTarget(i),p&&c.render(mv,a),c.render(t,a)}c.toneMapping=d,c.outputEncoding=h,c.autoClear=u}_textureToCubeUV(t,e){const n=this._renderer;t.isCubeTexture?null==this._cubemapShader&&(this._cubemapShader=kv()):null==this._equirectShader&&(this._equirectShader=Rv());const i=t.isCubeTexture?this._cubemapShader:this._equirectShader,r=new uo(gv[0],i),o=i.uniforms;o["envMap"].value=t,t.isCubeTexture||o["texelSize"].value.set(1/t.image.width,1/t.image.height),o["inputEncoding"].value=pv[t.encoding],o["outputEncoding"].value=pv[e.texture.encoding],Pv(e,0,0,3*cv,2*cv),n.setRenderTarget(e),n.render(r,vv)}_applyPMREM(t){const e=this._renderer,n=e.autoClear;e.autoClear=!1;for(let i=1;i<hv;i++){const e=Math.sqrt(bv[i]*bv[i]-bv[i-1]*bv[i-1]),n=Ev[(i-1)%Ev.length];this._blur(t,i-1,i,e,n)}e.autoClear=n}_blur(t,e,n,i,r){const o=this._pingPongRenderTarget;this._halfBlur(t,o,e,n,i,"latitudinal",r),this._halfBlur(o,t,n,n,i,"longitudinal",r)}_halfBlur(t,e,n,i,r,o,a){const s=this._renderer,l=this._blurMaterial;"latitudinal"!==o&&"longitudinal"!==o&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,u=new uo(gv[i],l),h=l.uniforms,d=yv[n]-1,p=isFinite(r)?Math.PI/(2*d):2*Math.PI/(2*dv-1),f=r/p,m=isFinite(r)?1+Math.floor(c*f):dv;m>dv&&console.warn(`sigmaRadians, ${r}, is too large and will clip, as it requested ${m} samples when the maximum is set to ${dv}`);const v=[];let g=0;for(let w=0;w<dv;++w){const t=w/f,e=Math.exp(-t*t/2);v.push(e),0==w?g+=e:w<m&&(g+=2*e)}for(let w=0;w<v.length;w++)v[w]=v[w]/g;h["envMap"].value=t.texture,h["samples"].value=m,h["weights"].value=v,h["latitudinal"].value="latitudinal"===o,a&&(h["poleAxis"].value=a),h["dTheta"].value=p,h["mipInt"].value=lv-n,h["inputEncoding"].value=pv[t.texture.encoding],h["outputEncoding"].value=pv[t.texture.encoding];const y=yv[i],b=3*Math.max(0,cv-2*y),x=(0===i?0:2*cv)+2*y*(i>lv-sv?i-lv+sv:0);Pv(e,b,x,3*y,2*y),s.setRenderTarget(e),s.render(u,vv)}}function Av(t){return void 0!==t&&t.type===Et&&(t.encoding===Ze||t.encoding===Je||t.encoding===Ke)}function Cv(){const t=[],e=[],n=[];let i=lv;for(let r=0;r<hv;r++){const o=Math.pow(2,i);e.push(o);let a=1/o;r>lv-sv?a=uv[r-lv+sv-1]:0==r&&(a=0),n.push(a);const s=1/(o-1),l=-s/2,c=1+s/2,u=[l,l,c,l,c,c,l,l,c,c,l,c],h=6,d=6,p=3,f=2,m=1,v=new Float32Array(p*d*h),g=new Float32Array(f*d*h),y=new Float32Array(m*d*h);for(let t=0;t<h;t++){const e=t%3*2/3-1,n=t>2?0:-1,i=[e,n,0,e+2/3,n,0,e+2/3,n+1,0,e,n,0,e+2/3,n+1,0,e,n+1,0];v.set(i,p*d*t),g.set(u,f*d*t);const r=[t,t,t,t,t,t];y.set(r,m*d*t)}const b=new $r;b.setAttribute("position",new Sr(v,p)),b.setAttribute("uv",new Sr(g,f)),b.setAttribute("faceIndex",new Sr(y,m)),t.push(b),i>sv&&i--}return{_lodPlanes:t,_sizeLods:e,_sigmas:n}}function Lv(t){const e=new Yn(3*cv,3*cv,t);return e.texture.mapping=ct,e.texture.name="PMREM.cubeUv",e.scissorTest=!0,e}function Pv(t,e,n,i,r){t.viewport.set(e,n,i,r),t.scissor.set(e,n,i,r)}function Ov(t){const e=new Float32Array(t),n=new Jn(0,1,0),i=new Fd({name:"SphericalGaussianBlur",defines:{n:t},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:e},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:n},inputEncoding:{value:pv[Ze]},outputEncoding:{value:pv[Ze]}},vertexShader:Dv(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t${Iv()}\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1});return i}function Rv(){const t=new jn(1,1),e=new Fd({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null},texelSize:{value:t},inputEncoding:{value:pv[Ze]},outputEncoding:{value:pv[Ze]}},vertexShader:Dv(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t${Iv()}\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tvec2 f = fract( uv / texelSize - 0.5 );\n\t\t\t\tuv -= f * texelSize;\n\t\t\t\tvec3 tl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x += texelSize.x;\n\t\t\t\tvec3 tr = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.y += texelSize.y;\n\t\t\t\tvec3 br = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\t\t\t\tuv.x -= texelSize.x;\n\t\t\t\tvec3 bl = envMapTexelToLinear( texture2D ( envMap, uv ) ).rgb;\n\n\t\t\t\tvec3 tm = mix( tl, tr, f.x );\n\t\t\t\tvec3 bm = mix( bl, br, f.x );\n\t\t\t\tgl_FragColor.rgb = mix( tm, bm, f.y );\n\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1});return e}function kv(){const t=new Fd({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},inputEncoding:{value:pv[Ze]},outputEncoding:{value:pv[Ze]}},vertexShader:Dv(),fragmentShader:`\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\t${Iv()}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb = envMapTexelToLinear( textureCube( envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ) ) ).rgb;\n\t\t\t\tgl_FragColor = linearToOutputTexel( gl_FragColor );\n\n\t\t\t}\n\t\t`,blending:b,depthTest:!1,depthWrite:!1});return t}function Dv(){return"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute vec3 position;\n\t\tattribute vec2 uv;\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t"}function Iv(){return"\n\n\t\tuniform int inputEncoding;\n\t\tuniform int outputEncoding;\n\n\t\t#include <encodings_pars_fragment>\n\n\t\tvec4 inputTexelToLinear( vec4 value ) {\n\n\t\t\tif ( inputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( inputEncoding == 1 ) {\n\n\t\t\t\treturn sRGBToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 2 ) {\n\n\t\t\t\treturn RGBEToLinear( value );\n\n\t\t\t} else if ( inputEncoding == 3 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 7.0 );\n\n\t\t\t} else if ( inputEncoding == 4 ) {\n\n\t\t\t\treturn RGBMToLinear( value, 16.0 );\n\n\t\t\t} else if ( inputEncoding == 5 ) {\n\n\t\t\t\treturn RGBDToLinear( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn GammaToLinear( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 linearToOutputTexel( vec4 value ) {\n\n\t\t\tif ( outputEncoding == 0 ) {\n\n\t\t\t\treturn value;\n\n\t\t\t} else if ( outputEncoding == 1 ) {\n\n\t\t\t\treturn LinearTosRGB( value );\n\n\t\t\t} else if ( outputEncoding == 2 ) {\n\n\t\t\t\treturn LinearToRGBE( value );\n\n\t\t\t} else if ( outputEncoding == 3 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 7.0 );\n\n\t\t\t} else if ( outputEncoding == 4 ) {\n\n\t\t\t\treturn LinearToRGBM( value, 16.0 );\n\n\t\t\t} else if ( outputEncoding == 5 ) {\n\n\t\t\t\treturn LinearToRGBD( value, 256.0 );\n\n\t\t\t} else {\n\n\t\t\t\treturn LinearToGamma( value, 2.2 );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvec4 envMapTexelToLinear( vec4 color ) {\n\n\t\t\treturn inputTexelToLinear( color );\n\n\t\t}\n\t"}function Nv(t,e,n,i,r,o,a){return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."),new br(t,e,n,r,o,a)}const zv=0,Bv=1,Fv=0,jv=1,Hv=2;function Uv(t){return console.warn("THREE.MeshFaceMaterial has been removed. Use an Array instead."),t}function Vv(t=[]){return console.warn("THREE.MultiMaterial has been removed. Use an Array instead."),t.isMultiMaterial=!0,t.materials=t,t.clone=function(){return t.slice()},t}function Gv(t,e){return console.warn("THREE.PointCloud has been renamed to THREE.Points."),new Mh(t,e)}function Wv(t){return console.warn("THREE.Particle has been renamed to THREE.Sprite."),new Hu(t)}function $v(t,e){return console.warn("THREE.ParticleSystem has been renamed to THREE.Points."),new Mh(t,e)}function qv(t){return console.warn("THREE.PointCloudMaterial has been renamed to THREE.PointsMaterial."),new yh(t)}function Yv(t){return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointsMaterial."),new yh(t)}function Xv(t){return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointsMaterial."),new yh(t)}function Zv(t,e,n){return console.warn("THREE.Vertex has been removed. Use THREE.Vector3 instead."),new Jn(t,e,n)}function Jv(t,e){return console.warn("THREE.DynamicBufferAttribute has been removed. Use new THREE.BufferAttribute().setUsage( THREE.DynamicDrawUsage ) instead."),new Sr(t,e).setUsage(Tn)}function Kv(t,e){return console.warn("THREE.Int8Attribute has been removed. Use new THREE.Int8BufferAttribute() instead."),new Tr(t,e)}function Qv(t,e){return console.warn("THREE.Uint8Attribute has been removed. Use new THREE.Uint8BufferAttribute() instead."),new Ar(t,e)}function tg(t,e){return console.warn("THREE.Uint8ClampedAttribute has been removed. Use new THREE.Uint8ClampedBufferAttribute() instead."),new Cr(t,e)}function eg(t,e){return console.warn("THREE.Int16Attribute has been removed. Use new THREE.Int16BufferAttribute() instead."),new Lr(t,e)}function ng(t,e){return console.warn("THREE.Uint16Attribute has been removed. Use new THREE.Uint16BufferAttribute() instead."),new Pr(t,e)}function ig(t,e){return console.warn("THREE.Int32Attribute has been removed. Use new THREE.Int32BufferAttribute() instead."),new Or(t,e)}function rg(t,e){return console.warn("THREE.Uint32Attribute has been removed. Use new THREE.Uint32BufferAttribute() instead."),new Rr(t,e)}function og(t,e){return console.warn("THREE.Float32Attribute has been removed. Use new THREE.Float32BufferAttribute() instead."),new Dr(t,e)}function ag(t,e){return console.warn("THREE.Float64Attribute has been removed. Use new THREE.Float64BufferAttribute() instead."),new Ir(t,e)}function sg(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Op.call(this,t),this.type="catmullrom",this.closed=!0}function lg(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Op.call(this,t),this.type="catmullrom"}function cg(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Op.call(this,t),this.type="catmullrom"}function ug(t){return console.warn("THREE.AxisHelper has been renamed to THREE.AxesHelper."),new iv(t)}function hg(t,e){return console.warn("THREE.BoundingBoxHelper has been deprecated. Creating a THREE.BoxHelper instead."),new Zm(t,e)}function dg(t,e){return console.warn("THREE.EdgesHelper has been removed. Use THREE.EdgesGeometry instead."),new vh(new Bh(t.geometry),new sh({color:void 0!==e?e:16777215}))}function pg(t,e){return console.warn("THREE.WireframeHelper has been removed. Use THREE.WireframeGeometry instead."),new vh(new Nd(t.geometry),new sh({color:void 0!==e?e:16777215}))}function fg(t){return console.warn("THREE.XHRLoader has been renamed to THREE.FileLoader."),new vp(t)}function mg(t){return console.warn("THREE.BinaryTextureLoader has been renamed to THREE.DataTextureLoader."),new wp(t)}function vg(t,e,n){return console.warn("THREE.WebGLRenderTargetCube( width, height, options ) is now WebGLCubeRenderTarget( size, options )."),new Ao(t,n)}Mp.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Mp.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Jp.prototype,{fromPoints:function(t){return console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),sg.prototype=Object.create(Op.prototype),lg.prototype=Object.create(Op.prototype),cg.prototype=Object.create(Op.prototype),Object.assign(cg.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),Fm.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},Rm.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(fp.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),mf.extractUrlBase(t)}}),fp.Handlers={add:function(){console.error("THREE.Loader: Handlers.add() has been removed. Use LoadingManager.addHandler() instead.")},get:function(){console.error("THREE.Loader: Handlers.get() has been removed. Use LoadingManager.getHandler() instead.")}},Object.assign(_m.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(ti.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign(vi.prototype,{empty:function(){return console.warn("THREE.Sphere: .empty() has been renamed to .isEmpty()."),this.isEmpty()}}),Oo.prototype.setFromMatrix=function(t){return console.warn("THREE.Frustum: .setFromMatrix() has been renamed to .setFromProjectionMatrix()."),this.setFromProjectionMatrix(t)},Sm.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(Fn,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),Fn.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),Fn.ceilPowerOfTwo(t)}}),Object.assign(Hn.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix3: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")},getInverse:function(t){return console.warn("THREE.Matrix3: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),Object.assign(Si.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){return console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),(new Jn).setFromMatrixColumn(this,3)},setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBufferAttribute:function(t){return console.warn("THREE.Matrix4: .applyToBufferAttribute() has been removed. Use attribute.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)},getInverse:function(t){return console.warn("THREE.Matrix4: .getInverse() has been removed. Use matrixInv.copy( matrix ).invert(); instead."),this.copy(t).invert()}}),tr.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Object.assign(Zn.prototype,{multiplyVector3:function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},inverse:function(){return console.warn("THREE.Quaternion: .inverse() has been renamed to invert()."),this.invert()}}),Object.assign(Ei.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(hr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(hr,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),hr.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),hr.getNormal(t,e,n,i)}}),Object.assign(Kp.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new xd(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Cd(this,t)}}),Object.assign(jn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Jn.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(qn.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Zi.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")},applyMatrix:function(t){return console.warn("THREE.Object3D: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties(Zi.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.assign(uo.prototype,{setDrawMode:function(){console.error("THREE.Mesh: .setDrawMode() has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}),Object.defineProperties(uo.prototype,{drawMode:{get:function(){return console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode."),qe},set:function(){console.error("THREE.Mesh: .drawMode has been removed. The renderer now always assumes THREE.TrianglesDrawMode. Transform your geometry via BufferGeometryUtils.toTrianglesDrawMode() if necessary.")}}}),Object.defineProperties(Wu.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(eh.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),Ju.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Mp.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),_o.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(Qp.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Sr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},dynamic:{get:function(){return console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.usage===Tn},set:function(){console.warn("THREE.BufferAttribute: .dynamic has been deprecated. Use .usage instead."),this.setUsage(Tn)}}}),Object.assign(Sr.prototype,{setDynamic:function(t){return console.warn("THREE.BufferAttribute: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Tn:Sn),this},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")},setArray:function(){console.error("THREE.BufferAttribute: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign($r.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addAttribute:function(t,e){return console.warn("THREE.BufferGeometry: .addAttribute() has been renamed to .setAttribute()."),e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):this.setAttribute(t,e):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.setAttribute(t,new Sr(arguments[1],arguments[2])))},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")},removeAttribute:function(t){return console.warn("THREE.BufferGeometry: .removeAttribute() has been renamed to .deleteAttribute()."),this.deleteAttribute(t)},applyMatrix:function(t){return console.warn("THREE.BufferGeometry: .applyMatrix() has been renamed to .applyMatrix4()."),this.applyMatrix4(t)}}),Object.defineProperties($r.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.defineProperties(vf.prototype,{maxInstancedCount:{get:function(){return console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount},set:function(t){console.warn("THREE.InstancedBufferGeometry: .maxInstancedCount has been renamed to .instanceCount."),this.instanceCount=t}}}),Object.defineProperties(vm.prototype,{linePrecision:{get:function(){return console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold},set:function(t){console.warn("THREE.Raycaster: .linePrecision has been deprecated. Use .params.Line.threshold instead."),this.params.Line.threshold=t}}}),Object.defineProperties(Eu.prototype,{dynamic:{get:function(){return console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.usage===Tn},set:function(t){console.warn("THREE.InterleavedBuffer: .length has been deprecated. Use .usage instead."),this.setUsage(t)}}}),Object.assign(Eu.prototype,{setDynamic:function(t){return console.warn("THREE.InterleavedBuffer: .setDynamic() has been deprecated. Use .setUsage() instead."),this.setUsage(!0===t?Tn:Sn),this},setArray:function(){console.error("THREE.InterleavedBuffer: .setArray has been removed. Use BufferGeometry .setAttribute to replace/resize attribute buffers")}}),Object.assign(xd.prototype,{getArrays:function(){console.error("THREE.ExtrudeGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeGeometry: .addShape() has been removed.")}}),Object.assign(Mu.prototype,{dispose:function(){console.error("THREE.Scene: .dispose() has been removed.")}}),Object.defineProperties(pm.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(wr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new yr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===g}},stencilMask:{get:function(){return console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask},set:function(t){console.warn("THREE."+this.type+": .stencilMask has been removed. Use .stencilFuncMask instead."),this.stencilFuncMask=t}}}),Object.defineProperties(Ud.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(Hd.prototype,{transparency:{get:function(){return console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission},set:function(t){console.warn("THREE.MeshPhysicalMaterial: .transparency has been renamed to .transmission."),this.transmission=t}}}),Object.defineProperties(xo.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(bu.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")},getActiveMipMapLevel:function(){return console.warn("THREE.WebGLRenderer: .getActiveMipMapLevel() is now .getActiveMipmapLevel()."),this.getActiveMipmapLevel()}}),Object.defineProperties(bu.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}},context:{get:function(){return console.warn("THREE.WebGLRenderer: .context has been removed. Use .getContext() instead."),this.getContext()}},vr:{get:function(){return console.warn("THREE.WebGLRenderer: .vr has been renamed to .xr"),this.xr}},gammaInput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead."),!1},set:function(){console.warn("THREE.WebGLRenderer: .gammaInput has been removed. Set the encoding for textures via Texture.encoding instead.")}},gammaOutput:{get:function(){return console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),!1},set:function(t){console.warn("THREE.WebGLRenderer: .gammaOutput has been removed. Set WebGLRenderer.outputEncoding instead."),this.outputEncoding=!0===t?Je:Ze}},toneMappingWhitePoint:{get:function(){return console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed."),1},set:function(){console.warn("THREE.WebGLRenderer: .toneMappingWhitePoint has been removed.")}}}),Object.defineProperties(cu.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Yn.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Gf.prototype,{load:{value:function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");const e=this,n=new Of;return n.load(t,function(t){e.setBuffer(t)}),this}},startTime:{set:function(){console.warn("THREE.Audio: .startTime is now .play( delay ).")}}}),Zf.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},So.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)},So.prototype.clear=function(t,e,n,i){return console.warn("THREE.CubeCamera: .clear() is now .renderTarget.clear()."),this.renderTarget.clear(t,e,n,i)};const gg={merge:function(t,e,n){let i;console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead."),e.isMesh&&(e.matrixAutoUpdate&&e.updateMatrix(),i=e.matrix,e=e.geometry),t.merge(e,i,n)},center:function(t){return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."),t.center()}};function yg(){console.error("THREE.CanvasRenderer has been removed")}function bg(){console.error("THREE.JSONLoader has been removed.")}Vn.crossOrigin=void 0,Vn.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");const r=new _p;r.setCrossOrigin(this.crossOrigin);const o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},Vn.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");const r=new xp;r.setCrossOrigin(this.crossOrigin);const o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},Vn.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Vn.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")};const xg={createMultiMaterialObject:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},detach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")},attach:function(){console.error("THREE.SceneUtils has been moved to /examples/jsm/utils/SceneUtils.js")}};function wg(){console.error("THREE.LensFlare has been moved to /examples/jsm/objects/Lensflare.js")}"undefined"!==typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:i}})),"undefined"!==typeof window&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=i)},"5b4e":function(t,e,n){var i=n("36c3"),r=n("b447"),o=n("0fc9");t.exports=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){while(c>u)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},"5c96":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=45)}([function(t,e){t.exports=n("d940")},function(t,e){t.exports=n("5924")},function(t,e){t.exports=n("8122")},function(t,e){t.exports=n("d010")},function(t,e){t.exports=n("6b7c")},function(t,e){t.exports=n("e974")},function(t,e){t.exports=n("2b0e")},function(t,e){t.exports=n("7f4d")},function(t,e){t.exports=n("f3ad")},function(t,e){t.exports=n("2bb5")},function(t,e){t.exports=n("417f")},function(t,e){t.exports=n("eedf")},function(t,e){t.exports=n("4010")},function(t,e){t.exports=n("5128")},function(t,e){t.exports=n("0e15")},function(t,e){t.exports=n("4897")},function(t,e){t.exports=n("dcdc")},function(t,e){t.exports=n("14e9")},function(t,e){t.exports=n("a742")},function(t,e){t.exports=n("d397")},function(t,e){t.exports=n("d7d1")},function(t,e){t.exports=n("5488")},function(t,e){t.exports=n("12f2")},function(t,e){t.exports=n("41f8")},function(t,e){t.exports=n("92fa")},function(t,e){t.exports=n("597f")},function(t,e){t.exports=n("299c")},function(t,e){t.exports=n("2a5e")},function(t,e){t.exports=n("845f")},function(t,e){t.exports=n("8bbc")},function(t,e){t.exports=n("e62d")},function(t,e){t.exports=n("7fc1")},function(t,e){t.exports=n("c56a")},function(t,e){t.exports=n("c284")},function(t,e){t.exports=n("e452")},function(t,e){t.exports=n("9619")},function(t,e){t.exports=n("4e4b")},function(t,e){t.exports=n("e772")},function(t,e){t.exports=n("c098")},function(t,e){t.exports=n("722f")},function(t,e){t.exports=n("a15e")},function(t,e){t.exports=n("e450")},function(t,e){t.exports=n("4726")},function(t,e){t.exports=n("f494")},function(t,e){t.exports=n("6ac9")},function(t,e,n){t.exports=n(46)},function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{staticClass:"el-pager",on:{click:t.onPagerClick}},[t.pageCount>0?n("li",{staticClass:"number",class:{active:1===t.currentPage,disabled:t.disabled}},[t._v("1")]):t._e(),t.showPrevMore?n("li",{staticClass:"el-icon more btn-quickprev",class:[t.quickprevIconClass,{disabled:t.disabled}],on:{mouseenter:function(e){t.onMouseenter("left")},mouseleave:function(e){t.quickprevIconClass="el-icon-more"}}}):t._e(),t._l(t.pagers,function(e){return n("li",{key:e,staticClass:"number",class:{active:t.currentPage===e,disabled:t.disabled}},[t._v(t._s(e))])}),t.showNextMore?n("li",{staticClass:"el-icon more btn-quicknext",class:[t.quicknextIconClass,{disabled:t.disabled}],on:{mouseenter:function(e){t.onMouseenter("right")},mouseleave:function(e){t.quicknextIconClass="el-icon-more"}}}):t._e(),t.pageCount>1?n("li",{staticClass:"number",class:{active:t.currentPage===t.pageCount,disabled:t.disabled}},[t._v(t._s(t.pageCount))]):t._e()],2)},r=[];i._withStripped=!0;var o={name:"ElPager",props:{currentPage:Number,pageCount:Number,pagerCount:Number,disabled:Boolean},watch:{showPrevMore:function(t){t||(this.quickprevIconClass="el-icon-more")},showNextMore:function(t){t||(this.quicknextIconClass="el-icon-more")}},methods:{onPagerClick:function(t){var e=t.target;if("UL"!==e.tagName&&!this.disabled){var n=Number(t.target.textContent),i=this.pageCount,r=this.currentPage,o=this.pagerCount-2;-1!==e.className.indexOf("more")&&(-1!==e.className.indexOf("quickprev")?n=r-o:-1!==e.className.indexOf("quicknext")&&(n=r+o)),isNaN(n)||(n<1&&(n=1),n>i&&(n=i)),n!==r&&this.$emit("change",n)}},onMouseenter:function(t){this.disabled||("left"===t?this.quickprevIconClass="el-icon-d-arrow-left":this.quicknextIconClass="el-icon-d-arrow-right")}},computed:{pagers:function(){var t=this.pagerCount,e=(t-1)/2,n=Number(this.currentPage),i=Number(this.pageCount),r=!1,o=!1;i>t&&(n>t-e&&(r=!0),n<i-e&&(o=!0));var a=[];if(r&&!o)for(var s=i-(t-2),l=s;l<i;l++)a.push(l);else if(!r&&o)for(var c=2;c<t;c++)a.push(c);else if(r&&o)for(var u=Math.floor(t/2)-1,h=n-u;h<=n+u;h++)a.push(h);else for(var d=2;d<i;d++)a.push(d);return this.showPrevMore=r,this.showNextMore=o,a}},data:function(){return{current:null,showPrevMore:!1,showNextMore:!1,quicknextIconClass:"el-icon-more",quickprevIconClass:"el-icon-more"}}},a=o;function s(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}var l=s(a,i,r,!1,null,null,null);l.options.__file="packages/pagination/src/pager.vue";var c=l.exports,u=n(36),h=n.n(u),d=n(37),p=n.n(d),f=n(8),m=n.n(f),v=n(4),g=n.n(v),y=n(2),b={name:"ElPagination",props:{pageSize:{type:Number,default:10},small:Boolean,total:Number,pageCount:Number,pagerCount:{type:Number,validator:function(t){return(0|t)===t&&t>4&&t<22&&t%2===1},default:7},currentPage:{type:Number,default:1},layout:{default:"prev, pager, next, jumper, ->, total"},pageSizes:{type:Array,default:function(){return[10,20,30,40,50,100]}},popperClass:String,prevText:String,nextText:String,background:Boolean,disabled:Boolean,hideOnSinglePage:Boolean},data:function(){return{internalCurrentPage:1,internalPageSize:0,lastEmittedPage:-1,userChangePageSize:!1}},render:function(t){var e=this.layout;if(!e)return null;if(this.hideOnSinglePage&&(!this.internalPageCount||1===this.internalPageCount))return null;var n=t("div",{class:["el-pagination",{"is-background":this.background,"el-pagination--small":this.small}]}),i={prev:t("prev"),jumper:t("jumper"),pager:t("pager",{attrs:{currentPage:this.internalCurrentPage,pageCount:this.internalPageCount,pagerCount:this.pagerCount,disabled:this.disabled},on:{change:this.handleCurrentChange}}),next:t("next"),sizes:t("sizes",{attrs:{pageSizes:this.pageSizes}}),slot:t("slot",[this.$slots.default?this.$slots.default:""]),total:t("total")},r=e.split(",").map(function(t){return t.trim()}),o=t("div",{class:"el-pagination__rightwrapper"}),a=!1;return n.children=n.children||[],o.children=o.children||[],r.forEach(function(t){"->"!==t?a?o.children.push(i[t]):n.children.push(i[t]):a=!0}),a&&n.children.unshift(o),n},components:{Prev:{render:function(t){return t("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage<=1},class:"btn-prev",on:{click:this.$parent.prev}},[this.$parent.prevText?t("span",[this.$parent.prevText]):t("i",{class:"el-icon el-icon-arrow-left"})])}},Next:{render:function(t){return t("button",{attrs:{type:"button",disabled:this.$parent.disabled||this.$parent.internalCurrentPage===this.$parent.internalPageCount||0===this.$parent.internalPageCount},class:"btn-next",on:{click:this.$parent.next}},[this.$parent.nextText?t("span",[this.$parent.nextText]):t("i",{class:"el-icon el-icon-arrow-right"})])}},Sizes:{mixins:[g.a],props:{pageSizes:Array},watch:{pageSizes:{immediate:!0,handler:function(t,e){Object(y["valueEquals"])(t,e)||Array.isArray(t)&&(this.$parent.internalPageSize=t.indexOf(this.$parent.pageSize)>-1?this.$parent.pageSize:this.pageSizes[0])}}},render:function(t){var e=this;return t("span",{class:"el-pagination__sizes"},[t("el-select",{attrs:{value:this.$parent.internalPageSize,popperClass:this.$parent.popperClass||"",size:"mini",disabled:this.$parent.disabled},on:{input:this.handleChange}},[this.pageSizes.map(function(n){return t("el-option",{attrs:{value:n,label:n+e.t("el.pagination.pagesize")}})})])])},components:{ElSelect:h.a,ElOption:p.a},methods:{handleChange:function(t){t!==this.$parent.internalPageSize&&(this.$parent.internalPageSize=t=parseInt(t,10),this.$parent.userChangePageSize=!0,this.$parent.$emit("update:pageSize",t),this.$parent.$emit("size-change",t))}}},Jumper:{mixins:[g.a],components:{ElInput:m.a},data:function(){return{userInput:null}},watch:{"$parent.internalCurrentPage":function(){this.userInput=null}},methods:{handleKeyup:function(t){var e=t.keyCode,n=t.target;13===e&&this.handleChange(n.value)},handleInput:function(t){this.userInput=t},handleChange:function(t){this.$parent.internalCurrentPage=this.$parent.getValidCurrentPage(t),this.$parent.emitChange(),this.userInput=null}},render:function(t){return t("span",{class:"el-pagination__jump"},[this.t("el.pagination.goto"),t("el-input",{class:"el-pagination__editor is-in-pagination",attrs:{min:1,max:this.$parent.internalPageCount,value:null!==this.userInput?this.userInput:this.$parent.internalCurrentPage,type:"number",disabled:this.$parent.disabled},nativeOn:{keyup:this.handleKeyup},on:{input:this.handleInput,change:this.handleChange}}),this.t("el.pagination.pageClassifier")])}},Total:{mixins:[g.a],render:function(t){return"number"===typeof this.$parent.total?t("span",{class:"el-pagination__total"},[this.t("el.pagination.total",{total:this.$parent.total})]):""}},Pager:c},methods:{handleCurrentChange:function(t){this.internalCurrentPage=this.getValidCurrentPage(t),this.userChangePageSize=!0,this.emitChange()},prev:function(){if(!this.disabled){var t=this.internalCurrentPage-1;this.internalCurrentPage=this.getValidCurrentPage(t),this.$emit("prev-click",this.internalCurrentPage),this.emitChange()}},next:function(){if(!this.disabled){var t=this.internalCurrentPage+1;this.internalCurrentPage=this.getValidCurrentPage(t),this.$emit("next-click",this.internalCurrentPage),this.emitChange()}},getValidCurrentPage:function(t){t=parseInt(t,10);var e="number"===typeof this.internalPageCount,n=void 0;return e?t<1?n=1:t>this.internalPageCount&&(n=this.internalPageCount):(isNaN(t)||t<1)&&(n=1),void 0===n&&isNaN(t)?n=1:0===n&&(n=1),void 0===n?t:n},emitChange:function(){var t=this;this.$nextTick(function(){(t.internalCurrentPage!==t.lastEmittedPage||t.userChangePageSize)&&(t.$emit("current-change",t.internalCurrentPage),t.lastEmittedPage=t.internalCurrentPage,t.userChangePageSize=!1)})}},computed:{internalPageCount:function(){return"number"===typeof this.total?Math.max(1,Math.ceil(this.total/this.internalPageSize)):"number"===typeof this.pageCount?Math.max(1,this.pageCount):null}},watch:{currentPage:{immediate:!0,handler:function(t){this.internalCurrentPage=this.getValidCurrentPage(t)}},pageSize:{immediate:!0,handler:function(t){this.internalPageSize=isNaN(t)?10:t}},internalCurrentPage:{immediate:!0,handler:function(t){this.$emit("update:currentPage",t),this.lastEmittedPage=-1}},internalPageCount:function(t){var e=this.internalCurrentPage;t>0&&0===e?this.internalCurrentPage=1:e>t&&(this.internalCurrentPage=0===t?1:t,this.userChangePageSize&&this.emitChange()),this.userChangePageSize=!1}},install:function(t){t.component(b.name,b)}},x=b,w=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"dialog-fade"},on:{"after-enter":t.afterEnter,"after-leave":t.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-dialog__wrapper",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{key:t.key,ref:"dialog",class:["el-dialog",{"is-fullscreen":t.fullscreen,"el-dialog--center":t.center},t.customClass],style:t.style,attrs:{role:"dialog","aria-modal":"true","aria-label":t.title||"dialog"}},[n("div",{staticClass:"el-dialog__header"},[t._t("title",[n("span",{staticClass:"el-dialog__title"},[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-dialog__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:t.handleClose}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):t._e()],2),t.rendered?n("div",{staticClass:"el-dialog__body"},[t._t("default")],2):t._e(),t.$slots.footer?n("div",{staticClass:"el-dialog__footer"},[t._t("footer")],2):t._e()])])])},_=[];w._withStripped=!0;var M=n(13),E=n.n(M),S=n(9),T=n.n(S),A=n(3),C=n.n(A),L={name:"ElDialog",mixins:[E.a,C.a,T.a],props:{title:{type:String,default:""},modal:{type:Boolean,default:!0},modalAppendToBody:{type:Boolean,default:!0},appendToBody:{type:Boolean,default:!1},lockScroll:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},width:String,fullscreen:Boolean,customClass:{type:String,default:""},top:{type:String,default:"15vh"},beforeClose:Function,center:{type:Boolean,default:!1},destroyOnClose:Boolean},data:function(){return{closed:!1,key:0}},watch:{visible:function(t){var e=this;t?(this.closed=!1,this.$emit("open"),this.$el.addEventListener("scroll",this.updatePopper),this.$nextTick(function(){e.$refs.dialog.scrollTop=0}),this.appendToBody&&document.body.appendChild(this.$el)):(this.$el.removeEventListener("scroll",this.updatePopper),this.closed||this.$emit("close"),this.destroyOnClose&&this.$nextTick(function(){e.key++}))}},computed:{style:function(){var t={};return this.fullscreen||(t.marginTop=this.top,this.width&&(t.width=this.width)),t}},methods:{getMigratingConfig:function(){return{props:{size:"size is removed."}}},handleWrapperClick:function(){this.closeOnClickModal&&this.handleClose()},handleClose:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},hide:function(t){!1!==t&&(this.$emit("update:visible",!1),this.$emit("close"),this.closed=!0)},updatePopper:function(){this.broadcast("ElSelectDropdown","updatePopper"),this.broadcast("ElDropdownMenu","updatePopper")},afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")}},mounted:function(){this.visible&&(this.rendered=!0,this.open(),this.appendToBody&&document.body.appendChild(this.$el))},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},P=L,O=s(P,w,_,!1,null,null,null);O.options.__file="packages/dialog/src/component.vue";var R=O.exports;R.install=function(t){t.component(R.name,R)};var k=R,D=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.close,expression:"close"}],staticClass:"el-autocomplete",attrs:{"aria-haspopup":"listbox",role:"combobox","aria-expanded":t.suggestionVisible,"aria-owns":t.id}},[n("el-input",t._b({ref:"input",on:{input:t.handleInput,change:t.handleChange,focus:t.handleFocus,blur:t.handleBlur,clear:t.handleClear},nativeOn:{keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.preventDefault(),t.highlight(t.highlightedIndex-1)},function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.preventDefault(),t.highlight(t.highlightedIndex+1)},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleKeyEnter(e):null},function(e){return"button"in e||!t._k(e.keyCode,"tab",9,e.key,"Tab")?t.close(e):null}]}},"el-input",[t.$props,t.$attrs],!1),[t.$slots.prepend?n("template",{slot:"prepend"},[t._t("prepend")],2):t._e(),t.$slots.append?n("template",{slot:"append"},[t._t("append")],2):t._e(),t.$slots.prefix?n("template",{slot:"prefix"},[t._t("prefix")],2):t._e(),t.$slots.suffix?n("template",{slot:"suffix"},[t._t("suffix")],2):t._e()],2),n("el-autocomplete-suggestions",{ref:"suggestions",class:[t.popperClass?t.popperClass:""],attrs:{"visible-arrow":"","popper-options":t.popperOptions,"append-to-body":t.popperAppendToBody,placement:t.placement,id:t.id}},t._l(t.suggestions,function(e,i){return n("li",{key:i,class:{highlighted:t.highlightedIndex===i},attrs:{id:t.id+"-item-"+i,role:"option","aria-selected":t.highlightedIndex===i},on:{click:function(n){t.select(e)}}},[t._t("default",[t._v("\n        "+t._s(e[t.valueKey])+"\n      ")],{item:e})],2)}),0)],1)},I=[];D._withStripped=!0;var N=n(14),z=n.n(N),B=n(10),F=n.n(B),j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-autocomplete-suggestion el-popper",class:{"is-loading":!t.parent.hideLoading&&t.parent.loading},style:{width:t.dropdownWidth},attrs:{role:"region"}},[n("el-scrollbar",{attrs:{tag:"ul","wrap-class":"el-autocomplete-suggestion__wrap","view-class":"el-autocomplete-suggestion__list"}},[!t.parent.hideLoading&&t.parent.loading?n("li",[n("i",{staticClass:"el-icon-loading"})]):t._t("default")],2)],1)])},H=[];j._withStripped=!0;var U=n(5),V=n.n(U),G=n(17),W=n.n(G),$={components:{ElScrollbar:W.a},mixins:[V.a,C.a],componentName:"ElAutocompleteSuggestions",data:function(){return{parent:this.$parent,dropdownWidth:""}},props:{options:{default:function(){return{gpuAcceleration:!1}}},id:String},methods:{select:function(t){this.dispatch("ElAutocomplete","item-click",t)}},updated:function(){var t=this;this.$nextTick(function(e){t.popperJS&&t.updatePopper()})},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$refs.input.$refs.input||this.$parent.$refs.input.$refs.textarea,this.referenceList=this.$el.querySelector(".el-autocomplete-suggestion__list"),this.referenceList.setAttribute("role","listbox"),this.referenceList.setAttribute("id",this.id)},created:function(){var t=this;this.$on("visible",function(e,n){t.dropdownWidth=n+"px",t.showPopper=e})}},q=$,Y=s(q,j,H,!1,null,null,null);Y.options.__file="packages/autocomplete/src/autocomplete-suggestions.vue";var X=Y.exports,Z=n(22),J=n.n(Z),K={name:"ElAutocomplete",mixins:[C.a,J()("input"),T.a],inheritAttrs:!1,componentName:"ElAutocomplete",components:{ElInput:m.a,ElAutocompleteSuggestions:X},directives:{Clickoutside:F.a},props:{valueKey:{type:String,default:"value"},popperClass:String,popperOptions:Object,placeholder:String,clearable:{type:Boolean,default:!1},disabled:Boolean,name:String,size:String,value:String,maxlength:Number,minlength:Number,autofocus:Boolean,fetchSuggestions:Function,triggerOnFocus:{type:Boolean,default:!0},customItem:String,selectWhenUnmatched:{type:Boolean,default:!1},prefixIcon:String,suffixIcon:String,label:String,debounce:{type:Number,default:300},placement:{type:String,default:"bottom-start"},hideLoading:Boolean,popperAppendToBody:{type:Boolean,default:!0},highlightFirstItem:{type:Boolean,default:!1}},data:function(){return{activated:!1,suggestions:[],loading:!1,highlightedIndex:-1,suggestionDisabled:!1}},computed:{suggestionVisible:function(){var t=this.suggestions,e=Array.isArray(t)&&t.length>0;return(e||this.loading)&&this.activated},id:function(){return"el-autocomplete-"+Object(y["generateId"])()}},watch:{suggestionVisible:function(t){var e=this.getInput();e&&this.broadcast("ElAutocompleteSuggestions","visible",[t,e.offsetWidth])}},methods:{getMigratingConfig:function(){return{props:{"custom-item":"custom-item is removed, use scoped slot instead.",props:"props is removed, use value-key instead."}}},getData:function(t){var e=this;this.suggestionDisabled||(this.loading=!0,this.fetchSuggestions(t,function(t){e.loading=!1,e.suggestionDisabled||(Array.isArray(t)?(e.suggestions=t,e.highlightedIndex=e.highlightFirstItem?0:-1):console.error("[Element Error][Autocomplete]autocomplete suggestions must be an array"))}))},handleInput:function(t){if(this.$emit("input",t),this.suggestionDisabled=!1,!this.triggerOnFocus&&!t)return this.suggestionDisabled=!0,void(this.suggestions=[]);this.debouncedGetData(t)},handleChange:function(t){this.$emit("change",t)},handleFocus:function(t){this.activated=!0,this.$emit("focus",t),this.triggerOnFocus&&this.debouncedGetData(this.value)},handleBlur:function(t){this.$emit("blur",t)},handleClear:function(){this.activated=!1,this.$emit("clear")},close:function(t){this.activated=!1},handleKeyEnter:function(t){var e=this;this.suggestionVisible&&this.highlightedIndex>=0&&this.highlightedIndex<this.suggestions.length?(t.preventDefault(),this.select(this.suggestions[this.highlightedIndex])):this.selectWhenUnmatched&&(this.$emit("select",{value:this.value}),this.$nextTick(function(t){e.suggestions=[],e.highlightedIndex=-1}))},select:function(t){var e=this;this.$emit("input",t[this.valueKey]),this.$emit("select",t),this.$nextTick(function(t){e.suggestions=[],e.highlightedIndex=-1})},highlight:function(t){if(this.suggestionVisible&&!this.loading)if(t<0)this.highlightedIndex=-1;else{t>=this.suggestions.length&&(t=this.suggestions.length-1);var e=this.$refs.suggestions.$el.querySelector(".el-autocomplete-suggestion__wrap"),n=e.querySelectorAll(".el-autocomplete-suggestion__list li"),i=n[t],r=e.scrollTop,o=i.offsetTop;o+i.scrollHeight>r+e.clientHeight&&(e.scrollTop+=i.scrollHeight),o<r&&(e.scrollTop-=i.scrollHeight),this.highlightedIndex=t;var a=this.getInput();a.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)}},getInput:function(){return this.$refs.input.getInput()}},mounted:function(){var t=this;this.debouncedGetData=z()(this.debounce,this.getData),this.$on("item-click",function(e){t.select(e)});var e=this.getInput();e.setAttribute("role","textbox"),e.setAttribute("aria-autocomplete","list"),e.setAttribute("aria-controls","id"),e.setAttribute("aria-activedescendant",this.id+"-item-"+this.highlightedIndex)},beforeDestroy:function(){this.$refs.suggestions.$destroy()}},Q=K,tt=s(Q,D,I,!1,null,null,null);tt.options.__file="packages/autocomplete/src/autocomplete.vue";var et=tt.exports;et.install=function(t){t.component(et.name,et)};var nt,it,rt=et,ot=n(11),at=n.n(ot),st=n(28),lt=n.n(st),ct={name:"ElDropdown",componentName:"ElDropdown",mixins:[C.a,T.a],directives:{Clickoutside:F.a},components:{ElButton:at.a,ElButtonGroup:lt.a},provide:function(){return{dropdown:this}},props:{trigger:{type:String,default:"hover"},type:String,size:{type:String,default:""},splitButton:Boolean,hideOnClick:{type:Boolean,default:!0},placement:{type:String,default:"bottom-end"},visibleArrow:{default:!0},showTimeout:{type:Number,default:250},hideTimeout:{type:Number,default:150},tabindex:{type:Number,default:0}},data:function(){return{timeout:null,visible:!1,triggerElm:null,menuItems:null,menuItemsArray:null,dropdownElm:null,focusing:!1,listId:"dropdown-menu-"+Object(y["generateId"])()}},computed:{dropdownSize:function(){return this.size||(this.$ELEMENT||{}).size}},mounted:function(){this.$on("menu-item-click",this.handleMenuItemClick)},watch:{visible:function(t){this.broadcast("ElDropdownMenu","visible",t),this.$emit("visible-change",t)},focusing:function(t){var e=this.$el.querySelector(".el-dropdown-selfdefine");e&&(t?e.className+=" focusing":e.className=e.className.replace("focusing",""))}},methods:{getMigratingConfig:function(){return{props:{"menu-align":"menu-align is renamed to placement."}}},show:function(){var t=this;this.triggerElm.disabled||(clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.visible=!0},"click"===this.trigger?0:this.showTimeout))},hide:function(){var t=this;this.triggerElm.disabled||(this.removeTabindex(),this.tabindex>=0&&this.resetTabindex(this.triggerElm),clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.visible=!1},"click"===this.trigger?0:this.hideTimeout))},handleClick:function(){this.triggerElm.disabled||(this.visible?this.hide():this.show())},handleTriggerKeyDown:function(t){var e=t.keyCode;[38,40].indexOf(e)>-1?(this.removeTabindex(),this.resetTabindex(this.menuItems[0]),this.menuItems[0].focus(),t.preventDefault(),t.stopPropagation()):13===e?this.handleClick():[9,27].indexOf(e)>-1&&this.hide()},handleItemKeyDown:function(t){var e=t.keyCode,n=t.target,i=this.menuItemsArray.indexOf(n),r=this.menuItemsArray.length-1,o=void 0;[38,40].indexOf(e)>-1?(o=38===e?0!==i?i-1:0:i<r?i+1:r,this.removeTabindex(),this.resetTabindex(this.menuItems[o]),this.menuItems[o].focus(),t.preventDefault(),t.stopPropagation()):13===e?(this.triggerElmFocus(),n.click(),this.hideOnClick&&(this.visible=!1)):[9,27].indexOf(e)>-1&&(this.hide(),this.triggerElmFocus())},resetTabindex:function(t){this.removeTabindex(),t.setAttribute("tabindex","0")},removeTabindex:function(){this.triggerElm.setAttribute("tabindex","-1"),this.menuItemsArray.forEach(function(t){t.setAttribute("tabindex","-1")})},initAria:function(){this.dropdownElm.setAttribute("id",this.listId),this.triggerElm.setAttribute("aria-haspopup","list"),this.triggerElm.setAttribute("aria-controls",this.listId),this.splitButton||(this.triggerElm.setAttribute("role","button"),this.triggerElm.setAttribute("tabindex",this.tabindex),this.triggerElm.setAttribute("class",(this.triggerElm.getAttribute("class")||"")+" el-dropdown-selfdefine"))},initEvent:function(){var t=this,e=this.trigger,n=this.show,i=this.hide,r=this.handleClick,o=this.splitButton,a=this.handleTriggerKeyDown,s=this.handleItemKeyDown;this.triggerElm=o?this.$refs.trigger.$el:this.$slots.default[0].elm;var l=this.dropdownElm;this.triggerElm.addEventListener("keydown",a),l.addEventListener("keydown",s,!0),o||(this.triggerElm.addEventListener("focus",function(){t.focusing=!0}),this.triggerElm.addEventListener("blur",function(){t.focusing=!1}),this.triggerElm.addEventListener("click",function(){t.focusing=!1})),"hover"===e?(this.triggerElm.addEventListener("mouseenter",n),this.triggerElm.addEventListener("mouseleave",i),l.addEventListener("mouseenter",n),l.addEventListener("mouseleave",i)):"click"===e&&this.triggerElm.addEventListener("click",r)},handleMenuItemClick:function(t,e){this.hideOnClick&&(this.visible=!1),this.$emit("command",t,e)},triggerElmFocus:function(){this.triggerElm.focus&&this.triggerElm.focus()},initDomOperation:function(){this.dropdownElm=this.popperElm,this.menuItems=this.dropdownElm.querySelectorAll("[tabindex='-1']"),this.menuItemsArray=[].slice.call(this.menuItems),this.initEvent(),this.initAria()}},render:function(t){var e=this,n=this.hide,i=this.splitButton,r=this.type,o=this.dropdownSize,a=function(t){e.$emit("click",t),n()},s=i?t("el-button-group",[t("el-button",{attrs:{type:r,size:o},nativeOn:{click:a}},[this.$slots.default]),t("el-button",{ref:"trigger",attrs:{type:r,size:o},class:"el-dropdown__caret-button"},[t("i",{class:"el-dropdown__icon el-icon-arrow-down"})])]):this.$slots.default;return t("div",{class:"el-dropdown",directives:[{name:"clickoutside",value:n}]},[s,this.$slots.dropdown])}},ut=ct,ht=s(ut,nt,it,!1,null,null,null);ht.options.__file="packages/dropdown/src/dropdown.vue";var dt=ht.exports;dt.install=function(t){t.component(dt.name,dt)};var pt=dt,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[n("ul",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-dropdown-menu el-popper",class:[t.size&&"el-dropdown-menu--"+t.size]},[t._t("default")],2)])},mt=[];ft._withStripped=!0;var vt={name:"ElDropdownMenu",componentName:"ElDropdownMenu",mixins:[V.a],props:{visibleArrow:{type:Boolean,default:!0},arrowOffset:{type:Number,default:0}},data:function(){return{size:this.dropdown.dropdownSize}},inject:["dropdown"],created:function(){var t=this;this.$on("updatePopper",function(){t.showPopper&&t.updatePopper()}),this.$on("visible",function(e){t.showPopper=e})},mounted:function(){this.dropdown.popperElm=this.popperElm=this.$el,this.referenceElm=this.dropdown.$el,this.dropdown.initDomOperation()},watch:{"dropdown.placement":{immediate:!0,handler:function(t){this.currentPlacement=t}}}},gt=vt,yt=s(gt,ft,mt,!1,null,null,null);yt.options.__file="packages/dropdown/src/dropdown-menu.vue";var bt=yt.exports;bt.install=function(t){t.component(bt.name,bt)};var xt=bt,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"el-dropdown-menu__item",class:{"is-disabled":t.disabled,"el-dropdown-menu__item--divided":t.divided},attrs:{"aria-disabled":t.disabled,tabindex:t.disabled?null:-1},on:{click:t.handleClick}},[t.icon?n("i",{class:t.icon}):t._e(),t._t("default")],2)},_t=[];wt._withStripped=!0;var Mt={name:"ElDropdownItem",mixins:[C.a],props:{command:{},disabled:Boolean,divided:Boolean,icon:String},methods:{handleClick:function(t){this.dispatch("ElDropdown","menu-item-click",[this.command,this])}}},Et=Mt,St=s(Et,wt,_t,!1,null,null,null);St.options.__file="packages/dropdown/src/dropdown-item.vue";var Tt=St.exports;Tt.install=function(t){t.component(Tt.name,Tt)};var At=Tt,Ct=Ct||{};Ct.Utils=Ct.Utils||{},Ct.Utils.focusFirstDescendant=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(Ct.Utils.attemptFocus(n)||Ct.Utils.focusFirstDescendant(n))return!0}return!1},Ct.Utils.focusLastDescendant=function(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(Ct.Utils.attemptFocus(n)||Ct.Utils.focusLastDescendant(n))return!0}return!1},Ct.Utils.attemptFocus=function(t){if(!Ct.Utils.isFocusable(t))return!1;Ct.Utils.IgnoreUtilFocusChanges=!0;try{t.focus()}catch(e){}return Ct.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===t},Ct.Utils.isFocusable=function(t){if(t.tabIndex>0||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return"hidden"!==t.type&&"file"!==t.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},Ct.Utils.triggerEvent=function(t,e){var n=void 0;n=/^mouse|click/.test(e)?"MouseEvents":/^key/.test(e)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(n),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return i.initEvent.apply(i,[e].concat(o)),t.dispatchEvent?t.dispatchEvent(i):t.fireEvent("on"+e,i),t},Ct.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27};var Lt=Ct.Utils,Pt=function(t,e){this.domNode=e,this.parent=t,this.subMenuItems=[],this.subIndex=0,this.init()};Pt.prototype.init=function(){this.subMenuItems=this.domNode.querySelectorAll("li"),this.addListeners()},Pt.prototype.gotoSubIndex=function(t){t===this.subMenuItems.length?t=0:t<0&&(t=this.subMenuItems.length-1),this.subMenuItems[t].focus(),this.subIndex=t},Pt.prototype.addListeners=function(){var t=this,e=Lt.keys,n=this.parent.domNode;Array.prototype.forEach.call(this.subMenuItems,function(i){i.addEventListener("keydown",function(i){var r=!1;switch(i.keyCode){case e.down:t.gotoSubIndex(t.subIndex+1),r=!0;break;case e.up:t.gotoSubIndex(t.subIndex-1),r=!0;break;case e.tab:Lt.triggerEvent(n,"mouseleave");break;case e.enter:case e.space:r=!0,i.currentTarget.click();break}return r&&(i.preventDefault(),i.stopPropagation()),!1})})};var Ot=Pt,Rt=function(t){this.domNode=t,this.submenu=null,this.init()};Rt.prototype.init=function(){this.domNode.setAttribute("tabindex","0");var t=this.domNode.querySelector(".el-menu");t&&(this.submenu=new Ot(this,t)),this.addListeners()},Rt.prototype.addListeners=function(){var t=this,e=Lt.keys;this.domNode.addEventListener("keydown",function(n){var i=!1;switch(n.keyCode){case e.down:Lt.triggerEvent(n.currentTarget,"mouseenter"),t.submenu&&t.submenu.gotoSubIndex(0),i=!0;break;case e.up:Lt.triggerEvent(n.currentTarget,"mouseenter"),t.submenu&&t.submenu.gotoSubIndex(t.submenu.subMenuItems.length-1),i=!0;break;case e.tab:Lt.triggerEvent(n.currentTarget,"mouseleave");break;case e.enter:case e.space:i=!0,n.currentTarget.click();break}i&&n.preventDefault()})};var kt=Rt,Dt=function(t){this.domNode=t,this.init()};Dt.prototype.init=function(){var t=this.domNode.childNodes;[].filter.call(t,function(t){return 1===t.nodeType}).forEach(function(t){new kt(t)})};var It,Nt,zt=Dt,Bt=n(1),Ft={name:"ElMenu",render:function(t){var e=t("ul",{attrs:{role:"menubar"},key:+this.collapse,style:{backgroundColor:this.backgroundColor||""},class:{"el-menu--horizontal":"horizontal"===this.mode,"el-menu--collapse":this.collapse,"el-menu":!0}},[this.$slots.default]);return this.collapseTransition?t("el-menu-collapse-transition",[e]):e},componentName:"ElMenu",mixins:[C.a,T.a],provide:function(){return{rootMenu:this}},components:{"el-menu-collapse-transition":{functional:!0,render:function(t,e){var n={props:{mode:"out-in"},on:{beforeEnter:function(t){t.style.opacity=.2},enter:function(t){Object(Bt["addClass"])(t,"el-opacity-transition"),t.style.opacity=1},afterEnter:function(t){Object(Bt["removeClass"])(t,"el-opacity-transition"),t.style.opacity=""},beforeLeave:function(t){t.dataset||(t.dataset={}),Object(Bt["hasClass"])(t,"el-menu--collapse")?(Object(Bt["removeClass"])(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth,Object(Bt["addClass"])(t,"el-menu--collapse")):(Object(Bt["addClass"])(t,"el-menu--collapse"),t.dataset.oldOverflow=t.style.overflow,t.dataset.scrollWidth=t.clientWidth,Object(Bt["removeClass"])(t,"el-menu--collapse")),t.style.width=t.scrollWidth+"px",t.style.overflow="hidden"},leave:function(t){Object(Bt["addClass"])(t,"horizontal-collapse-transition"),t.style.width=t.dataset.scrollWidth+"px"}}};return t("transition",n,e.children)}}},props:{mode:{type:String,default:"vertical"},defaultActive:{type:String,default:""},defaultOpeneds:Array,uniqueOpened:Boolean,router:Boolean,menuTrigger:{type:String,default:"hover"},collapse:Boolean,backgroundColor:String,textColor:String,activeTextColor:String,collapseTransition:{type:Boolean,default:!0}},data:function(){return{activeIndex:this.defaultActive,openedMenus:this.defaultOpeneds&&!this.collapse?this.defaultOpeneds.slice(0):[],items:{},submenus:{}}},computed:{hoverBackground:function(){return this.backgroundColor?this.mixColor(this.backgroundColor,.2):""},isMenuPopup:function(){return"horizontal"===this.mode||"vertical"===this.mode&&this.collapse}},watch:{defaultActive:function(t){this.items[t]||(this.activeIndex=null),this.updateActiveIndex(t)},defaultOpeneds:function(t){this.collapse||(this.openedMenus=t)},collapse:function(t){t&&(this.openedMenus=[]),this.broadcast("ElSubmenu","toggle-collapse",t)}},methods:{updateActiveIndex:function(t){var e=this.items[t]||this.items[this.activeIndex]||this.items[this.defaultActive];e?(this.activeIndex=e.index,this.initOpenedMenu()):this.activeIndex=null},getMigratingConfig:function(){return{props:{theme:"theme is removed."}}},getColorChannels:function(t){if(t=t.replace("#",""),/^[0-9a-fA-F]{3}$/.test(t)){t=t.split("");for(var e=2;e>=0;e--)t.splice(e,0,t[e]);t=t.join("")}return/^[0-9a-fA-F]{6}$/.test(t)?{red:parseInt(t.slice(0,2),16),green:parseInt(t.slice(2,4),16),blue:parseInt(t.slice(4,6),16)}:{red:255,green:255,blue:255}},mixColor:function(t,e){var n=this.getColorChannels(t),i=n.red,r=n.green,o=n.blue;return e>0?(i*=1-e,r*=1-e,o*=1-e):(i+=(255-i)*e,r+=(255-r)*e,o+=(255-o)*e),"rgb("+Math.round(i)+", "+Math.round(r)+", "+Math.round(o)+")"},addItem:function(t){this.$set(this.items,t.index,t)},removeItem:function(t){delete this.items[t.index]},addSubmenu:function(t){this.$set(this.submenus,t.index,t)},removeSubmenu:function(t){delete this.submenus[t.index]},openMenu:function(t,e){var n=this.openedMenus;-1===n.indexOf(t)&&(this.uniqueOpened&&(this.openedMenus=n.filter(function(t){return-1!==e.indexOf(t)})),this.openedMenus.push(t))},closeMenu:function(t){var e=this.openedMenus.indexOf(t);-1!==e&&this.openedMenus.splice(e,1)},handleSubmenuClick:function(t){var e=t.index,n=t.indexPath,i=-1!==this.openedMenus.indexOf(e);i?(this.closeMenu(e),this.$emit("close",e,n)):(this.openMenu(e,n),this.$emit("open",e,n))},handleItemClick:function(t){var e=this,n=t.index,i=t.indexPath,r=this.activeIndex,o=null!==t.index;o&&(this.activeIndex=t.index),this.$emit("select",n,i,t),("horizontal"===this.mode||this.collapse)&&(this.openedMenus=[]),this.router&&o&&this.routeToItem(t,function(t){if(e.activeIndex=r,t){if("NavigationDuplicated"===t.name)return;console.error(t)}})},initOpenedMenu:function(){var t=this,e=this.activeIndex,n=this.items[e];if(n&&"horizontal"!==this.mode&&!this.collapse){var i=n.indexPath;i.forEach(function(e){var n=t.submenus[e];n&&t.openMenu(e,n.indexPath)})}},routeToItem:function(t,e){var n=t.route||t.index;try{this.$router.push(n,function(){},e)}catch(i){console.error(i)}},open:function(t){var e=this,n=this.submenus[t.toString()].indexPath;n.forEach(function(t){return e.openMenu(t,n)})},close:function(t){this.closeMenu(t)}},mounted:function(){this.initOpenedMenu(),this.$on("item-click",this.handleItemClick),this.$on("submenu-click",this.handleSubmenuClick),"horizontal"===this.mode&&new zt(this.$el),this.$watch("items",this.updateActiveIndex)}},jt=Ft,Ht=s(jt,It,Nt,!1,null,null,null);Ht.options.__file="packages/menu/src/menu.vue";var Ut=Ht.exports;Ut.install=function(t){t.component(Ut.name,Ut)};var Vt,Gt,Wt=Ut,$t=n(21),qt=n.n($t),Yt={inject:["rootMenu"],computed:{indexPath:function(){var t=[this.index],e=this.$parent;while("ElMenu"!==e.$options.componentName)e.index&&t.unshift(e.index),e=e.$parent;return t},parentMenu:function(){var t=this.$parent;while(t&&-1===["ElMenu","ElSubmenu"].indexOf(t.$options.componentName))t=t.$parent;return t},paddingStyle:function(){if("vertical"!==this.rootMenu.mode)return{};var t=20,e=this.$parent;if(this.rootMenu.collapse)t=20;else while(e&&"ElMenu"!==e.$options.componentName)"ElSubmenu"===e.$options.componentName&&(t+=20),e=e.$parent;return{paddingLeft:t+"px"}}}},Xt={props:{transformOrigin:{type:[Boolean,String],default:!1},offset:V.a.props.offset,boundariesPadding:V.a.props.boundariesPadding,popperOptions:V.a.props.popperOptions},data:V.a.data,methods:V.a.methods,beforeDestroy:V.a.beforeDestroy,deactivated:V.a.deactivated},Zt={name:"ElSubmenu",componentName:"ElSubmenu",mixins:[Yt,C.a,Xt],components:{ElCollapseTransition:qt.a},props:{index:{type:String,required:!0},showTimeout:{type:Number,default:300},hideTimeout:{type:Number,default:300},popperClass:String,disabled:Boolean,popperAppendToBody:{type:Boolean,default:void 0}},data:function(){return{popperJS:null,timeout:null,items:{},submenus:{},mouseInChild:!1}},watch:{opened:function(t){var e=this;this.isMenuPopup&&this.$nextTick(function(t){e.updatePopper()})}},computed:{appendToBody:function(){return void 0===this.popperAppendToBody?this.isFirstLevel:this.popperAppendToBody},menuTransitionName:function(){return this.rootMenu.collapse?"el-zoom-in-left":"el-zoom-in-top"},opened:function(){return this.rootMenu.openedMenus.indexOf(this.index)>-1},active:function(){var t=!1,e=this.submenus,n=this.items;return Object.keys(n).forEach(function(e){n[e].active&&(t=!0)}),Object.keys(e).forEach(function(n){e[n].active&&(t=!0)}),t},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},isMenuPopup:function(){return this.rootMenu.isMenuPopup},titleStyle:function(){return"horizontal"!==this.mode?{color:this.textColor}:{borderBottomColor:this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent",color:this.active?this.activeTextColor:this.textColor}},isFirstLevel:function(){var t=!0,e=this.$parent;while(e&&e!==this.rootMenu){if(["ElSubmenu","ElMenuItemGroup"].indexOf(e.$options.componentName)>-1){t=!1;break}e=e.$parent}return t}},methods:{handleCollapseToggle:function(t){t?this.initPopper():this.doDestroy()},addItem:function(t){this.$set(this.items,t.index,t)},removeItem:function(t){delete this.items[t.index]},addSubmenu:function(t){this.$set(this.submenus,t.index,t)},removeSubmenu:function(t){delete this.submenus[t.index]},handleClick:function(){var t=this.rootMenu,e=this.disabled;"hover"===t.menuTrigger&&"horizontal"===t.mode||t.collapse&&"vertical"===t.mode||e||this.dispatch("ElMenu","submenu-click",this)},handleMouseenter:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.showTimeout;if("ActiveXObject"in window||"focus"!==t.type||t.relatedTarget){var i=this.rootMenu,r=this.disabled;"click"===i.menuTrigger&&"horizontal"===i.mode||!i.collapse&&"vertical"===i.mode||r||(this.dispatch("ElSubmenu","mouse-enter-child"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){e.rootMenu.openMenu(e.index,e.indexPath)},n),this.appendToBody&&this.$parent.$el.dispatchEvent(new MouseEvent("mouseenter")))}},handleMouseleave:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=this.rootMenu;"click"===n.menuTrigger&&"horizontal"===n.mode||!n.collapse&&"vertical"===n.mode||(this.dispatch("ElSubmenu","mouse-leave-child"),clearTimeout(this.timeout),this.timeout=setTimeout(function(){!t.mouseInChild&&t.rootMenu.closeMenu(t.index)},this.hideTimeout),this.appendToBody&&e&&"ElSubmenu"===this.$parent.$options.name&&this.$parent.handleMouseleave(!0))},handleTitleMouseenter:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var t=this.$refs["submenu-title"];t&&(t.style.backgroundColor=this.rootMenu.hoverBackground)}},handleTitleMouseleave:function(){if("horizontal"!==this.mode||this.rootMenu.backgroundColor){var t=this.$refs["submenu-title"];t&&(t.style.backgroundColor=this.rootMenu.backgroundColor||"")}},updatePlacement:function(){this.currentPlacement="horizontal"===this.mode&&this.isFirstLevel?"bottom-start":"right-start"},initPopper:function(){this.referenceElm=this.$el,this.popperElm=this.$refs.menu,this.updatePlacement()}},created:function(){var t=this;this.$on("toggle-collapse",this.handleCollapseToggle),this.$on("mouse-enter-child",function(){t.mouseInChild=!0,clearTimeout(t.timeout)}),this.$on("mouse-leave-child",function(){t.mouseInChild=!1,clearTimeout(t.timeout)})},mounted:function(){this.parentMenu.addSubmenu(this),this.rootMenu.addSubmenu(this),this.initPopper()},beforeDestroy:function(){this.parentMenu.removeSubmenu(this),this.rootMenu.removeSubmenu(this)},render:function(t){var e=this,n=this.active,i=this.opened,r=this.paddingStyle,o=this.titleStyle,a=this.backgroundColor,s=this.rootMenu,l=this.currentPlacement,c=this.menuTransitionName,u=this.mode,h=this.disabled,d=this.popperClass,p=this.$slots,f=this.isFirstLevel,m=t("transition",{attrs:{name:c}},[t("div",{ref:"menu",directives:[{name:"show",value:i}],class:["el-menu--"+u,d],on:{mouseenter:function(t){return e.handleMouseenter(t,100)},mouseleave:function(){return e.handleMouseleave(!0)},focus:function(t){return e.handleMouseenter(t,100)}}},[t("ul",{attrs:{role:"menu"},class:["el-menu el-menu--popup","el-menu--popup-"+l],style:{backgroundColor:s.backgroundColor||""}},[p.default])])]),v=t("el-collapse-transition",[t("ul",{attrs:{role:"menu"},class:"el-menu el-menu--inline",directives:[{name:"show",value:i}],style:{backgroundColor:s.backgroundColor||""}},[p.default])]),g="horizontal"===s.mode&&f||"vertical"===s.mode&&!s.collapse?"el-icon-arrow-down":"el-icon-arrow-right";return t("li",{class:{"el-submenu":!0,"is-active":n,"is-opened":i,"is-disabled":h},attrs:{role:"menuitem","aria-haspopup":"true","aria-expanded":i},on:{mouseenter:this.handleMouseenter,mouseleave:function(){return e.handleMouseleave(!1)},focus:this.handleMouseenter}},[t("div",{class:"el-submenu__title",ref:"submenu-title",on:{click:this.handleClick,mouseenter:this.handleTitleMouseenter,mouseleave:this.handleTitleMouseleave},style:[r,o,{backgroundColor:a}]},[p.title,t("i",{class:["el-submenu__icon-arrow",g]})]),this.isMenuPopup?m:v])}},Jt=Zt,Kt=s(Jt,Vt,Gt,!1,null,null,null);Kt.options.__file="packages/menu/src/submenu.vue";var Qt=Kt.exports;Qt.install=function(t){t.component(Qt.name,Qt)};var te=Qt,ee=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"el-menu-item",class:{"is-active":t.active,"is-disabled":t.disabled},style:[t.paddingStyle,t.itemStyle,{backgroundColor:t.backgroundColor}],attrs:{role:"menuitem",tabindex:"-1"},on:{click:t.handleClick,mouseenter:t.onMouseEnter,focus:t.onMouseEnter,blur:t.onMouseLeave,mouseleave:t.onMouseLeave}},["ElMenu"===t.parentMenu.$options.componentName&&t.rootMenu.collapse&&t.$slots.title?n("el-tooltip",{attrs:{effect:"dark",placement:"right"}},[n("div",{attrs:{slot:"content"},slot:"content"},[t._t("title")],2),n("div",{staticStyle:{position:"absolute",left:"0",top:"0",height:"100%",width:"100%",display:"inline-block","box-sizing":"border-box",padding:"0 20px"}},[t._t("default")],2)]):[t._t("default"),t._t("title")]],2)},ne=[];ee._withStripped=!0;var ie=n(26),re=n.n(ie),oe={name:"ElMenuItem",componentName:"ElMenuItem",mixins:[Yt,C.a],components:{ElTooltip:re.a},props:{index:{default:null,validator:function(t){return"string"===typeof t||null===t}},route:[String,Object],disabled:Boolean},computed:{active:function(){return this.index===this.rootMenu.activeIndex},hoverBackground:function(){return this.rootMenu.hoverBackground},backgroundColor:function(){return this.rootMenu.backgroundColor||""},activeTextColor:function(){return this.rootMenu.activeTextColor||""},textColor:function(){return this.rootMenu.textColor||""},mode:function(){return this.rootMenu.mode},itemStyle:function(){var t={color:this.active?this.activeTextColor:this.textColor};return"horizontal"!==this.mode||this.isNested||(t.borderBottomColor=this.active?this.rootMenu.activeTextColor?this.activeTextColor:"":"transparent"),t},isNested:function(){return this.parentMenu!==this.rootMenu}},methods:{onMouseEnter:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.hoverBackground)},onMouseLeave:function(){("horizontal"!==this.mode||this.rootMenu.backgroundColor)&&(this.$el.style.backgroundColor=this.backgroundColor)},handleClick:function(){this.disabled||(this.dispatch("ElMenu","item-click",this),this.$emit("click",this))}},mounted:function(){this.parentMenu.addItem(this),this.rootMenu.addItem(this)},beforeDestroy:function(){this.parentMenu.removeItem(this),this.rootMenu.removeItem(this)}},ae=oe,se=s(ae,ee,ne,!1,null,null,null);se.options.__file="packages/menu/src/menu-item.vue";var le=se.exports;le.install=function(t){t.component(le.name,le)};var ce=le,ue=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"el-menu-item-group"},[n("div",{staticClass:"el-menu-item-group__title",style:{paddingLeft:t.levelPadding+"px"}},[t.$slots.title?t._t("title"):[t._v(t._s(t.title))]],2),n("ul",[t._t("default")],2)])},he=[];ue._withStripped=!0;var de={name:"ElMenuItemGroup",componentName:"ElMenuItemGroup",inject:["rootMenu"],props:{title:{type:String}},data:function(){return{paddingLeft:20}},computed:{levelPadding:function(){var t=20,e=this.$parent;if(this.rootMenu.collapse)return 20;while(e&&"ElMenu"!==e.$options.componentName)"ElSubmenu"===e.$options.componentName&&(t+=20),e=e.$parent;return t}}},pe=de,fe=s(pe,ue,he,!1,null,null,null);fe.options.__file="packages/menu/src/menu-item-group.vue";var me=fe.exports;me.install=function(t){t.component(me.name,me)};var ve=me,ge=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["textarea"===t.type?"el-textarea":"el-input",t.inputSize?"el-input--"+t.inputSize:"",{"is-disabled":t.inputDisabled,"is-exceed":t.inputExceed,"el-input-group":t.$slots.prepend||t.$slots.append,"el-input-group--append":t.$slots.append,"el-input-group--prepend":t.$slots.prepend,"el-input--prefix":t.$slots.prefix||t.prefixIcon,"el-input--suffix":t.$slots.suffix||t.suffixIcon||t.clearable||t.showPassword}],on:{mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},["textarea"!==t.type?[t.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[t._t("prepend")],2):t._e(),"textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:t.tabindex,type:t.showPassword?t.passwordVisible?"text":"password":t.type,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"input",t.$attrs,!1)):t._e(),t.$slots.prefix||t.prefixIcon?n("span",{staticClass:"el-input__prefix"},[t._t("prefix"),t.prefixIcon?n("i",{staticClass:"el-input__icon",class:t.prefixIcon}):t._e()],2):t._e(),t.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[t.showClear&&t.showPwdVisible&&t.isWordLimitVisible?t._e():[t._t("suffix"),t.suffixIcon?n("i",{staticClass:"el-input__icon",class:t.suffixIcon}):t._e()],t.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(t){t.preventDefault()},click:t.clear}}):t._e(),t.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:t.handlePasswordVisible}}):t._e(),t.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[t._v("\n            "+t._s(t.textLength)+"/"+t._s(t.upperLimit)+"\n          ")])]):t._e()],2),t.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",t.validateIcon]}):t._e()]):t._e(),t.$slots.append?n("div",{staticClass:"el-input-group__append"},[t._t("append")],2):t._e()]:n("textarea",t._b({ref:"textarea",staticClass:"el-textarea__inner",style:t.textareaStyle,attrs:{tabindex:t.tabindex,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"textarea",t.$attrs,!1)),t.isWordLimitVisible&&"textarea"===t.type?n("span",{staticClass:"el-input__count"},[t._v(t._s(t.textLength)+"/"+t._s(t.upperLimit))]):t._e()],2)},ye=[];ge._withStripped=!0;var be=void 0,xe="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",we=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function _e(t){var e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),i=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),r=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),o=we.map(function(t){return t+":"+e.getPropertyValue(t)}).join(";");return{contextStyle:o,paddingSize:i,borderSize:r,boxSizing:n}}function Me(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;be||(be=document.createElement("textarea"),document.body.appendChild(be));var i=_e(t),r=i.paddingSize,o=i.borderSize,a=i.boxSizing,s=i.contextStyle;be.setAttribute("style",s+";"+xe),be.value=t.value||t.placeholder||"";var l=be.scrollHeight,c={};"border-box"===a?l+=o:"content-box"===a&&(l-=r),be.value="";var u=be.scrollHeight-r;if(null!==e){var h=u*e;"border-box"===a&&(h=h+r+o),l=Math.max(h,l),c.minHeight=h+"px"}if(null!==n){var d=u*n;"border-box"===a&&(d=d+r+o),l=Math.min(d,l)}return c.height=l+"px",be.parentNode&&be.parentNode.removeChild(be),be=null,c}var Ee=n(7),Se=n.n(Ee),Te=n(19),Ae={name:"ElInput",componentName:"ElInput",mixins:[C.a,T.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return Se()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(t){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var t=this;this.$nextTick(function(){t.setNativeInputValue(),t.resizeTextarea(),t.updateIconOffset()})}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize,e=this.type;if("textarea"===e)if(t){var n=t.minRows,i=t.maxRows;this.textareaCalcStyle=Me(this.$refs.textarea,n,i)}else this.textareaCalcStyle={minHeight:Me(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var t=this.getInput();t&&t.value!==this.nativeInputValue&&(t.value=this.nativeInputValue)},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(t){var e=t.target.value,n=e[e.length-1]||"";this.isComposing=!Object(Te["isKorean"])(n)},handleCompositionEnd:function(t){this.isComposing&&(this.isComposing=!1,this.handleInput(t))},handleInput:function(t){this.isComposing||t.target.value!==this.nativeInputValue&&(this.$emit("input",t.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(t){this.$emit("change",t.target.value)},calcIconOffset:function(t){var e=[].slice.call(this.$el.querySelectorAll(".el-input__"+t)||[]);if(e.length){for(var n=null,i=0;i<e.length;i++)if(e[i].parentNode===this.$el){n=e[i];break}if(n){var r={suffix:"append",prefix:"prepend"},o=r[t];this.$slots[o]?n.style.transform="translateX("+("suffix"===t?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},Ce=Ae,Le=s(Ce,ge,ye,!1,null,null,null);Le.options.__file="packages/input/src/input.vue";var Pe=Le.exports;Pe.install=function(t){t.component(Pe.name,Pe)};var Oe=Pe,Re=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["el-input-number",t.inputNumberSize?"el-input-number--"+t.inputNumberSize:"",{"is-disabled":t.inputNumberDisabled},{"is-without-controls":!t.controls},{"is-controls-right":t.controlsAtRight}],on:{dragstart:function(t){t.preventDefault()}}},[t.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":t.minDisabled},attrs:{role:"button"},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.decrease(e):null}}},[n("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-down":"minus")})]):t._e(),t.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":t.maxDisabled},attrs:{role:"button"},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.increase(e):null}}},[n("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-up":"plus")})]):t._e(),n("el-input",{ref:"input",attrs:{value:t.displayValue,placeholder:t.placeholder,disabled:t.inputNumberDisabled,size:t.inputNumberSize,max:t.max,min:t.min,name:t.name,label:t.label},on:{blur:t.handleBlur,focus:t.handleFocus,input:t.handleInput,change:t.handleInputChange},nativeOn:{keydown:[function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t.increase(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?(e.preventDefault(),t.decrease(e)):null}]}})],1)},ke=[];Re._withStripped=!0;var De={bind:function(t,e,n){var i=null,r=void 0,o=function(){return n.context[e.expression].apply()},a=function(){Date.now()-r<100&&o(),clearInterval(i),i=null};Object(Bt["on"])(t,"mousedown",function(t){0===t.button&&(r=Date.now(),Object(Bt["once"])(document,"mouseup",a),clearInterval(i),i=setInterval(o,100))})}},Ie={name:"ElInputNumber",mixins:[J()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:De},components:{ElInput:m.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(t){return t>=0&&t===parseInt(t,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(t){var e=void 0===t?t:Number(t);if(void 0!==e){if(isNaN(e))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);e=Math.round(e/this.step)*i*this.step/i}void 0!==this.precision&&(e=this.toPrecision(e,this.precision))}e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),this.currentValue=e,this.userInput=null,this.$emit("input",e)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var t=this.value,e=this.step,n=this.getPrecision,i=this.precision,r=n(e);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(t),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var t=this.currentValue;if("number"===typeof t){if(this.stepStrictly){var e=this.getPrecision(this.step),n=Math.pow(10,e);t=Math.round(t/this.step)*n*this.step/n}void 0!==this.precision&&(t=t.toFixed(this.precision))}return t}},methods:{toPrecision:function(t,e){return void 0===e&&(e=this.numPrecision),parseFloat(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},getPrecision:function(t){if(void 0===t)return 0;var e=t.toString(),n=e.indexOf("."),i=0;return-1!==n&&(i=e.length-n-1),i},_increase:function(t,e){if("number"!==typeof t&&void 0!==t)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*t+n*e)/n)},_decrease:function(t,e){if("number"!==typeof t&&void 0!==t)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*t-n*e)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var t=this.value||0,e=this._increase(t,this.step);this.setCurrentValue(e)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var t=this.value||0,e=this._decrease(t,this.step);this.setCurrentValue(e)}},handleBlur:function(t){this.$emit("blur",t)},handleFocus:function(t){this.$emit("focus",t)},setCurrentValue:function(t){var e=this.currentValue;"number"===typeof t&&void 0!==this.precision&&(t=this.toPrecision(t,this.precision)),t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),e!==t&&(this.userInput=null,this.$emit("input",t),this.$emit("change",t,e),this.currentValue=t)},handleInput:function(t){this.userInput=t},handleInputChange:function(t){var e=""===t?void 0:Number(t);isNaN(e)&&""!==t||this.setCurrentValue(e),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var t=this.$refs.input.$refs.input;t.setAttribute("role","spinbutton"),t.setAttribute("aria-valuemax",this.max),t.setAttribute("aria-valuemin",this.min),t.setAttribute("aria-valuenow",this.currentValue),t.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var t=this.$refs.input.$refs.input;t.setAttribute("aria-valuenow",this.currentValue)}}},Ne=Ie,ze=s(Ne,Re,ke,!1,null,null,null);ze.options.__file="packages/input-number/src/input-number.vue";var Be=ze.exports;Be.install=function(t){t.component(Be.name,Be)};var Fe=Be,je=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-radio",class:[t.border&&t.radioSize?"el-radio--"+t.radioSize:"",{"is-disabled":t.isDisabled},{"is-focus":t.focus},{"is-bordered":t.border},{"is-checked":t.model===t.label}],attrs:{role:"radio","aria-checked":t.model===t.label,"aria-disabled":t.isDisabled,tabindex:t.tabIndex},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.stopPropagation(),e.preventDefault(),t.model=t.isDisabled?t.model:t.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":t.isDisabled,"is-checked":t.model===t.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:t.name,disabled:t.isDisabled,tabindex:"-1"},domProps:{value:t.label,checked:t._q(t.model,t.label)},on:{focus:function(e){t.focus=!0},blur:function(e){t.focus=!1},change:[function(e){t.model=t.label},t.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(t){t.stopPropagation()}}},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.label))]],2)])},He=[];je._withStripped=!0;var Ue={name:"ElRadio",mixins:[C.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var t=this.$parent;while(t){if("ElRadioGroup"===t.$options.componentName)return this._radioGroup=t,!0;t=t.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(t){this.isGroup?this.dispatch("ElRadioGroup","input",[t]):this.$emit("input",t),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var t=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||t},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var t=this;this.$nextTick(function(){t.$emit("change",t.model),t.isGroup&&t.dispatch("ElRadioGroup","handleChange",t.model)})}}},Ve=Ue,Ge=s(Ve,je,He,!1,null,null,null);Ge.options.__file="packages/radio/src/radio.vue";var We=Ge.exports;We.install=function(t){t.component(We.name,We)};var $e=We,qe=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n(t._elTag,{tag:"component",staticClass:"el-radio-group",attrs:{role:"radiogroup"},on:{keydown:t.handleKeydown}},[t._t("default")],2)},Ye=[];qe._withStripped=!0;var Xe=Object.freeze({LEFT:37,UP:38,RIGHT:39,DOWN:40}),Ze={name:"ElRadioGroup",componentName:"ElRadioGroup",inject:{elFormItem:{default:""}},mixins:[C.a],props:{value:{},size:String,fill:String,textColor:String,disabled:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},_elTag:function(){return(this.$vnode.data||{}).tag||"div"},radioGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},created:function(){var t=this;this.$on("handleChange",function(e){t.$emit("change",e)})},mounted:function(){var t=this.$el.querySelectorAll("[type=radio]"),e=this.$el.querySelectorAll("[role=radio]")[0];![].some.call(t,function(t){return t.checked})&&e&&(e.tabIndex=0)},methods:{handleKeydown:function(t){var e=t.target,n="INPUT"===e.nodeName?"[type=radio]":"[role=radio]",i=this.$el.querySelectorAll(n),r=i.length,o=[].indexOf.call(i,e),a=this.$el.querySelectorAll("[role=radio]");switch(t.keyCode){case Xe.LEFT:case Xe.UP:t.stopPropagation(),t.preventDefault(),0===o?(a[r-1].click(),a[r-1].focus()):(a[o-1].click(),a[o-1].focus());break;case Xe.RIGHT:case Xe.DOWN:o===r-1?(t.stopPropagation(),t.preventDefault(),a[0].click(),a[0].focus()):(a[o+1].click(),a[o+1].focus());break;default:break}}},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",[this.value])}}},Je=Ze,Ke=s(Je,qe,Ye,!1,null,null,null);Ke.options.__file="packages/radio/src/radio-group.vue";var Qe=Ke.exports;Qe.install=function(t){t.component(Qe.name,Qe)};var tn=Qe,en=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-radio-button",class:[t.size?"el-radio-button--"+t.size:"",{"is-active":t.value===t.label},{"is-disabled":t.isDisabled},{"is-focus":t.focus}],attrs:{role:"radio","aria-checked":t.value===t.label,"aria-disabled":t.isDisabled,tabindex:t.tabIndex},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.stopPropagation(),e.preventDefault(),t.value=t.isDisabled?t.value:t.label}}},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"el-radio-button__orig-radio",attrs:{type:"radio",name:t.name,disabled:t.isDisabled,tabindex:"-1"},domProps:{value:t.label,checked:t._q(t.value,t.label)},on:{change:[function(e){t.value=t.label},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}),n("span",{staticClass:"el-radio-button__inner",style:t.value===t.label?t.activeStyle:null,on:{keydown:function(t){t.stopPropagation()}}},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.label))]],2)])},nn=[];en._withStripped=!0;var rn={name:"ElRadioButton",mixins:[C.a],inject:{elForm:{default:""},elFormItem:{default:""}},props:{label:{},disabled:Boolean,name:String},data:function(){return{focus:!1}},computed:{value:{get:function(){return this._radioGroup.value},set:function(t){this._radioGroup.$emit("input",t)}},_radioGroup:function(){var t=this.$parent;while(t){if("ElRadioGroup"===t.$options.componentName)return t;t=t.$parent}return!1},activeStyle:function(){return{backgroundColor:this._radioGroup.fill||"",borderColor:this._radioGroup.fill||"",boxShadow:this._radioGroup.fill?"-1px 0 0 0 "+this._radioGroup.fill:"",color:this._radioGroup.textColor||""}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._radioGroup.radioGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isDisabled:function(){return this.disabled||this._radioGroup.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this._radioGroup&&this.value!==this.label?-1:0}},methods:{handleChange:function(){var t=this;this.$nextTick(function(){t.dispatch("ElRadioGroup","handleChange",t.value)})}}},on=rn,an=s(on,en,nn,!1,null,null,null);an.options.__file="packages/radio/src/radio-button.vue";var sn=an.exports;sn.install=function(t){t.component(sn.name,sn)};var ln=sn,cn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-checkbox",class:[t.border&&t.checkboxSize?"el-checkbox--"+t.checkboxSize:"",{"is-disabled":t.isDisabled},{"is-bordered":t.border},{"is-checked":t.isChecked}],attrs:{id:t.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":t.isDisabled,"is-checked":t.isChecked,"is-indeterminate":t.indeterminate,"is-focus":t.focus},attrs:{tabindex:!!t.indeterminate&&0,role:!!t.indeterminate&&"checkbox","aria-checked":!!t.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),t.trueLabel||t.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":t.indeterminate?"true":"false",name:t.name,disabled:t.isDisabled,"true-value":t.trueLabel,"false-value":t.falseLabel},domProps:{checked:Array.isArray(t.model)?t._i(t.model,null)>-1:t._q(t.model,t.trueLabel)},on:{change:[function(e){var n=t.model,i=e.target,r=i.checked?t.trueLabel:t.falseLabel;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.model=n.concat([o])):a>-1&&(t.model=n.slice(0,a).concat(n.slice(a+1)))}else t.model=r},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":t.indeterminate?"true":"false",disabled:t.isDisabled,name:t.name},domProps:{value:t.label,checked:Array.isArray(t.model)?t._i(t.model,t.label)>-1:t.model},on:{change:[function(e){var n=t.model,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=t.label,a=t._i(n,o);i.checked?a<0&&(t.model=n.concat([o])):a>-1&&(t.model=n.slice(0,a).concat(n.slice(a+1)))}else t.model=r},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})]),t.$slots.default||t.label?n("span",{staticClass:"el-checkbox__label"},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.label))]],2):t._e()])},un=[];cn._withStripped=!0;var hn={name:"ElCheckbox",mixins:[C.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(t){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&t.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&t.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[t])):(this.$emit("input",t),this.selfModel=t)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var t=this.$parent;while(t){if("ElCheckboxGroup"===t.$options.componentName)return this._checkboxGroup=t,!0;t=t.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var t=this._checkboxGroup,e=t.max,n=t.min;return!(!e&&!n)&&this.model.length>=e&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var t=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||t}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(t){var e=this;if(!this.isLimitExceeded){var n=void 0;n=t.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,t),this.$nextTick(function(){e.isGroup&&e.dispatch("ElCheckboxGroup","change",[e._checkboxGroup.value])})}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",t)}}},dn=hn,pn=s(dn,cn,un,!1,null,null,null);pn.options.__file="packages/checkbox/src/checkbox.vue";var fn=pn.exports;fn.install=function(t){t.component(fn.name,fn)};var mn=fn,vn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-checkbox-button",class:[t.size?"el-checkbox-button--"+t.size:"",{"is-disabled":t.isDisabled},{"is-checked":t.isChecked},{"is-focus":t.focus}],attrs:{role:"checkbox","aria-checked":t.isChecked,"aria-disabled":t.isDisabled}},[t.trueLabel||t.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:t.name,disabled:t.isDisabled,"true-value":t.trueLabel,"false-value":t.falseLabel},domProps:{checked:Array.isArray(t.model)?t._i(t.model,null)>-1:t._q(t.model,t.trueLabel)},on:{change:[function(e){var n=t.model,i=e.target,r=i.checked?t.trueLabel:t.falseLabel;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.model=n.concat([o])):a>-1&&(t.model=n.slice(0,a).concat(n.slice(a+1)))}else t.model=r},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox-button__original",attrs:{type:"checkbox",name:t.name,disabled:t.isDisabled},domProps:{value:t.label,checked:Array.isArray(t.model)?t._i(t.model,t.label)>-1:t.model},on:{change:[function(e){var n=t.model,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=t.label,a=t._i(n,o);i.checked?a<0&&(t.model=n.concat([o])):a>-1&&(t.model=n.slice(0,a).concat(n.slice(a+1)))}else t.model=r},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}),t.$slots.default||t.label?n("span",{staticClass:"el-checkbox-button__inner",style:t.isChecked?t.activeStyle:null},[t._t("default",[t._v(t._s(t.label))])],2):t._e()])},gn=[];vn._withStripped=!0;var yn={name:"ElCheckboxButton",mixins:[C.a],inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},props:{value:{},label:{},disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number]},computed:{model:{get:function(){return this._checkboxGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(t){this._checkboxGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&t.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&t.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[t])):void 0!==this.value?this.$emit("input",t):this.selfModel=t}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},_checkboxGroup:function(){var t=this.$parent;while(t){if("ElCheckboxGroup"===t.$options.componentName)return t;t=t.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},activeStyle:function(){return{backgroundColor:this._checkboxGroup.fill||"",borderColor:this._checkboxGroup.fill||"",color:this._checkboxGroup.textColor||"","box-shadow":"-1px 0 0 0 "+this._checkboxGroup.fill}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},size:function(){return this._checkboxGroup.checkboxGroupSize||this._elFormItemSize||(this.$ELEMENT||{}).size},isLimitDisabled:function(){var t=this._checkboxGroup,e=t.max,n=t.min;return!(!e&&!n)&&this.model.length>=e&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this._checkboxGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled}},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(t){var e=this;if(!this.isLimitExceeded){var n=void 0;n=t.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,t),this.$nextTick(function(){e._checkboxGroup&&e.dispatch("ElCheckboxGroup","change",[e._checkboxGroup.value])})}}},created:function(){this.checked&&this.addToStore()}},bn=yn,xn=s(bn,vn,gn,!1,null,null,null);xn.options.__file="packages/checkbox/src/checkbox-button.vue";var wn=xn.exports;wn.install=function(t){t.component(wn.name,wn)};var _n=wn,Mn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[t._t("default")],2)},En=[];Mn._withStripped=!0;var Sn={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[C.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",[t])}}},Tn=Sn,An=s(Tn,Mn,En,!1,null,null,null);An.options.__file="packages/checkbox/src/checkbox-group.vue";var Cn=An.exports;Cn.install=function(t){t.component(Cn.name,Cn)};var Ln=Cn,Pn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-switch",class:{"is-disabled":t.switchDisabled,"is-checked":t.checked},attrs:{role:"switch","aria-checked":t.checked,"aria-disabled":t.switchDisabled},on:{click:function(e){return e.preventDefault(),t.switchValue(e)}}},[n("input",{ref:"input",staticClass:"el-switch__input",attrs:{type:"checkbox",id:t.id,name:t.name,"true-value":t.activeValue,"false-value":t.inactiveValue,disabled:t.switchDisabled},on:{change:t.handleChange,keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.switchValue(e):null}}}),t.inactiveIconClass||t.inactiveText?n("span",{class:["el-switch__label","el-switch__label--left",t.checked?"":"is-active"]},[t.inactiveIconClass?n("i",{class:[t.inactiveIconClass]}):t._e(),!t.inactiveIconClass&&t.inactiveText?n("span",{attrs:{"aria-hidden":t.checked}},[t._v(t._s(t.inactiveText))]):t._e()]):t._e(),n("span",{ref:"core",staticClass:"el-switch__core",style:{width:t.coreWidth+"px"}}),t.activeIconClass||t.activeText?n("span",{class:["el-switch__label","el-switch__label--right",t.checked?"is-active":""]},[t.activeIconClass?n("i",{class:[t.activeIconClass]}):t._e(),!t.activeIconClass&&t.activeText?n("span",{attrs:{"aria-hidden":!t.checked}},[t._v(t._s(t.activeText))]):t._e()]):t._e()])},On=[];Pn._withStripped=!0;var Rn={name:"ElSwitch",mixins:[J()("input"),T.a,C.a],inject:{elForm:{default:""}},props:{value:{type:[Boolean,String,Number],default:!1},disabled:{type:Boolean,default:!1},width:{type:Number,default:40},activeIconClass:{type:String,default:""},inactiveIconClass:{type:String,default:""},activeText:String,inactiveText:String,activeColor:{type:String,default:""},inactiveColor:{type:String,default:""},activeValue:{type:[Boolean,String,Number],default:!0},inactiveValue:{type:[Boolean,String,Number],default:!1},name:{type:String,default:""},validateEvent:{type:Boolean,default:!0},id:String},data:function(){return{coreWidth:this.width}},created:function(){~[this.activeValue,this.inactiveValue].indexOf(this.value)||this.$emit("input",this.inactiveValue)},computed:{checked:function(){return this.value===this.activeValue},switchDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{checked:function(){this.$refs.input.checked=this.checked,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[this.value])}},methods:{handleChange:function(t){var e=this,n=this.checked?this.inactiveValue:this.activeValue;this.$emit("input",n),this.$emit("change",n),this.$nextTick(function(){e.$refs.input.checked=e.checked})},setBackgroundColor:function(){var t=this.checked?this.activeColor:this.inactiveColor;this.$refs.core.style.borderColor=t,this.$refs.core.style.backgroundColor=t},switchValue:function(){!this.switchDisabled&&this.handleChange()},getMigratingConfig:function(){return{props:{"on-color":"on-color is renamed to active-color.","off-color":"off-color is renamed to inactive-color.","on-text":"on-text is renamed to active-text.","off-text":"off-text is renamed to inactive-text.","on-value":"on-value is renamed to active-value.","off-value":"off-value is renamed to inactive-value.","on-icon-class":"on-icon-class is renamed to active-icon-class.","off-icon-class":"off-icon-class is renamed to inactive-icon-class."}}}},mounted:function(){this.coreWidth=this.width||40,(this.activeColor||this.inactiveColor)&&this.setBackgroundColor(),this.$refs.input.checked=this.checked}},kn=Rn,Dn=s(kn,Pn,On,!1,null,null,null);Dn.options.__file="packages/switch/src/component.vue";var In=Dn.exports;In.install=function(t){t.component(In.name,In)};var Nn=In,zn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],staticClass:"el-select",class:[t.selectSize?"el-select--"+t.selectSize:""],on:{click:function(e){return e.stopPropagation(),t.toggleMenu(e)}}},[t.multiple?n("div",{ref:"tags",staticClass:"el-select__tags",style:{"max-width":t.inputWidth-32+"px",width:"100%"}},[t.collapseTags&&t.selected.length?n("span",[n("el-tag",{attrs:{closable:!t.selectDisabled,size:t.collapseTagSize,hit:t.selected[0].hitState,type:"info","disable-transitions":""},on:{close:function(e){t.deleteTag(e,t.selected[0])}}},[n("span",{staticClass:"el-select__tags-text"},[t._v(t._s(t.selected[0].currentLabel))])]),t.selected.length>1?n("el-tag",{attrs:{closable:!1,size:t.collapseTagSize,type:"info","disable-transitions":""}},[n("span",{staticClass:"el-select__tags-text"},[t._v("+ "+t._s(t.selected.length-1))])]):t._e()],1):t._e(),t.collapseTags?t._e():n("transition-group",{on:{"after-leave":t.resetInputHeight}},t._l(t.selected,function(e){return n("el-tag",{key:t.getValueKey(e),attrs:{closable:!t.selectDisabled,size:t.collapseTagSize,hit:e.hitState,type:"info","disable-transitions":""},on:{close:function(n){t.deleteTag(n,e)}}},[n("span",{staticClass:"el-select__tags-text"},[t._v(t._s(e.currentLabel))])])}),1),t.filterable?n("input",{directives:[{name:"model",rawName:"v-model",value:t.query,expression:"query"}],ref:"input",staticClass:"el-select__input",class:[t.selectSize?"is-"+t.selectSize:""],style:{"flex-grow":"1",width:t.inputLength/(t.inputWidth-32)+"%","max-width":t.inputWidth-42+"px"},attrs:{type:"text",disabled:t.selectDisabled,autocomplete:t.autoComplete||t.autocomplete},domProps:{value:t.query},on:{focus:t.handleFocus,blur:function(e){t.softFocus=!1},keyup:t.managePlaceholder,keydown:[t.resetInputState,function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.preventDefault(),t.navigateOptions("next")},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.preventDefault(),t.navigateOptions("prev")},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.selectOption(e)):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.stopPropagation(),e.preventDefault(),t.visible=!1},function(e){return"button"in e||!t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?t.deletePrevTag(e):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.visible=!1}],compositionstart:t.handleComposition,compositionupdate:t.handleComposition,compositionend:t.handleComposition,input:[function(e){e.target.composing||(t.query=e.target.value)},t.debouncedQueryChange]}}):t._e()],1):t._e(),n("el-input",{ref:"reference",class:{"is-focus":t.visible},attrs:{type:"text",placeholder:t.currentPlaceholder,name:t.name,id:t.id,autocomplete:t.autoComplete||t.autocomplete,size:t.selectSize,disabled:t.selectDisabled,readonly:t.readonly,"validate-event":!1,tabindex:t.multiple&&t.filterable?"-1":null},on:{focus:t.handleFocus,blur:t.handleBlur},nativeOn:{keyup:function(e){return t.debouncedOnInputChange(e)},keydown:[function(e){if(!("button"in e)&&t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"]))return null;e.stopPropagation(),e.preventDefault(),t.navigateOptions("next")},function(e){if(!("button"in e)&&t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"]))return null;e.stopPropagation(),e.preventDefault(),t.navigateOptions("prev")},function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.preventDefault(),t.selectOption(e)):null},function(e){if(!("button"in e)&&t._k(e.keyCode,"esc",27,e.key,["Esc","Escape"]))return null;e.stopPropagation(),e.preventDefault(),t.visible=!1},function(e){if(!("button"in e)&&t._k(e.keyCode,"tab",9,e.key,"Tab"))return null;t.visible=!1}],paste:function(e){return t.debouncedOnInputChange(e)},mouseenter:function(e){t.inputHovering=!0},mouseleave:function(e){t.inputHovering=!1}},model:{value:t.selectedLabel,callback:function(e){t.selectedLabel=e},expression:"selectedLabel"}},[t.$slots.prefix?n("template",{slot:"prefix"},[t._t("prefix")],2):t._e(),n("template",{slot:"suffix"},[n("i",{directives:[{name:"show",rawName:"v-show",value:!t.showClose,expression:"!showClose"}],class:["el-select__caret","el-input__icon","el-icon-"+t.iconClass]}),t.showClose?n("i",{staticClass:"el-select__caret el-input__icon el-icon-circle-close",on:{click:t.handleClearClick}}):t._e()])],2),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":t.handleMenuEnter,"after-leave":t.doDestroy}},[n("el-select-menu",{directives:[{name:"show",rawName:"v-show",value:t.visible&&!1!==t.emptyText,expression:"visible && emptyText !== false"}],ref:"popper",attrs:{"append-to-body":t.popperAppendToBody}},[n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:t.options.length>0&&!t.loading,expression:"options.length > 0 && !loading"}],ref:"scrollbar",class:{"is-empty":!t.allowCreate&&t.query&&0===t.filteredOptionsCount},attrs:{tag:"ul","wrap-class":"el-select-dropdown__wrap","view-class":"el-select-dropdown__list"}},[t.showNewOption?n("el-option",{attrs:{value:t.query,created:""}}):t._e(),t._t("default")],2),t.emptyText&&(!t.allowCreate||t.loading||t.allowCreate&&0===t.options.length)?[t.$slots.empty?t._t("empty"):n("p",{staticClass:"el-select-dropdown__empty"},[t._v("\n          "+t._s(t.emptyText)+"\n        ")])]:t._e()],2)],1)],1)},Bn=[];zn._withStripped=!0;var Fn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-select-dropdown el-popper",class:[{"is-multiple":t.$parent.multiple},t.popperClass],style:{minWidth:t.minWidth}},[t._t("default")],2)},jn=[];Fn._withStripped=!0;var Hn={name:"ElSelectDropdown",componentName:"ElSelectDropdown",mixins:[V.a],props:{placement:{default:"bottom-start"},boundariesPadding:{default:0},popperOptions:{default:function(){return{gpuAcceleration:!1}}},visibleArrow:{default:!0},appendToBody:{type:Boolean,default:!0}},data:function(){return{minWidth:""}},computed:{popperClass:function(){return this.$parent.popperClass}},watch:{"$parent.inputWidth":function(){this.minWidth=this.$parent.$el.getBoundingClientRect().width+"px"}},mounted:function(){var t=this;this.referenceElm=this.$parent.$refs.reference.$el,this.$parent.popperElm=this.popperElm=this.$el,this.$on("updatePopper",function(){t.$parent.visible&&t.updatePopper()}),this.$on("destroyPopper",this.destroyPopper)}},Un=Hn,Vn=s(Un,Fn,jn,!1,null,null,null);Vn.options.__file="packages/select/src/select-dropdown.vue";var Gn=Vn.exports,Wn=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:t.itemSelected,"is-disabled":t.disabled||t.groupDisabled||t.limitReached,hover:t.hover},on:{mouseenter:t.hoverItem,click:function(e){return e.stopPropagation(),t.selectOptionClick(e)}}},[t._t("default",[n("span",[t._v(t._s(t.currentLabel))])])],2)},$n=[];Wn._withStripped=!0;var qn="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yn={mixins:[C.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(t,e){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===("undefined"===typeof t?"undefined":qn(t))&&"object"===("undefined"===typeof e?"undefined":qn(e))&&t[r]===e[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(t,e){if(this.isObject){var n=this.select.valueKey;return Object(y["getValueByPath"])(t,n)===Object(y["getValueByPath"])(e,n)}return t===e},contains:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(this.isObject){var n=this.select.valueKey;return t&&t.some(function(t){return Object(y["getValueByPath"])(t,n)===Object(y["getValueByPath"])(e,n)})}return t&&t.indexOf(e)>-1},handleGroupDisabled:function(t){this.groupDisabled=t},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(t){this.visible=new RegExp(Object(y["escapeRegexpString"])(t),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var t=this.select,e=t.selected,n=t.multiple,i=n?e:[e],r=this.select.cachedOptions.indexOf(this),o=i.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},Xn=Yn,Zn=s(Xn,Wn,$n,!1,null,null,null);Zn.options.__file="packages/select/src/option.vue";var Jn=Zn.exports,Kn=n(29),Qn=n.n(Kn),ti=n(12),ei=n(27),ni=n.n(ei),ii={data:function(){return{hoverOption:-1}},computed:{optionsAllDisabled:function(){return this.options.filter(function(t){return t.visible}).every(function(t){return t.disabled})}},watch:{hoverIndex:function(t){var e=this;"number"===typeof t&&t>-1&&(this.hoverOption=this.options[t]||{}),this.options.forEach(function(t){t.hover=e.hoverOption===t})}},methods:{navigateOptions:function(t){var e=this;if(this.visible){if(0!==this.options.length&&0!==this.filteredOptionsCount&&!this.optionsAllDisabled){"next"===t?(this.hoverIndex++,this.hoverIndex===this.options.length&&(this.hoverIndex=0)):"prev"===t&&(this.hoverIndex--,this.hoverIndex<0&&(this.hoverIndex=this.options.length-1));var n=this.options[this.hoverIndex];!0!==n.disabled&&!0!==n.groupDisabled&&n.visible||this.navigateOptions(t),this.$nextTick(function(){return e.scrollToOption(e.hoverOption)})}}else this.visible=!0}}},ri={mixins:[C.a,g.a,J()("reference"),ii],name:"ElSelect",componentName:"ElSelect",inject:{elForm:{default:""},elFormItem:{default:""}},provide:function(){return{select:this}},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},readonly:function(){return!this.filterable||this.multiple||!Object(y["isIE"])()&&!Object(y["isEdge"])()&&!this.visible},showClose:function(){var t=this.multiple?Array.isArray(this.value)&&this.value.length>0:void 0!==this.value&&null!==this.value&&""!==this.value,e=this.clearable&&!this.selectDisabled&&this.inputHovering&&t;return e},iconClass:function(){return this.remote&&this.filterable?"":this.visible?"arrow-up is-reverse":"arrow-up"},debounce:function(){return this.remote?300:0},emptyText:function(){return this.loading?this.loadingText||this.t("el.select.loading"):(!this.remote||""!==this.query||0!==this.options.length)&&(this.filterable&&this.query&&this.options.length>0&&0===this.filteredOptionsCount?this.noMatchText||this.t("el.select.noMatch"):0===this.options.length?this.noDataText||this.t("el.select.noData"):null)},showNewOption:function(){var t=this,e=this.options.filter(function(t){return!t.created}).some(function(e){return e.currentLabel===t.query});return this.filterable&&this.allowCreate&&""!==this.query&&!e},selectSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},selectDisabled:function(){return this.disabled||(this.elForm||{}).disabled},collapseTagSize:function(){return["small","mini"].indexOf(this.selectSize)>-1?"mini":"small"},propPlaceholder:function(){return"undefined"!==typeof this.placeholder?this.placeholder:this.t("el.select.placeholder")}},components:{ElInput:m.a,ElSelectMenu:Gn,ElOption:Jn,ElTag:Qn.a,ElScrollbar:W.a},directives:{Clickoutside:F.a},props:{name:String,id:String,value:{required:!0},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},automaticDropdown:Boolean,size:String,disabled:Boolean,clearable:Boolean,filterable:Boolean,allowCreate:Boolean,loading:Boolean,popperClass:String,remote:Boolean,loadingText:String,noMatchText:String,noDataText:String,remoteMethod:Function,filterMethod:Function,multiple:Boolean,multipleLimit:{type:Number,default:0},placeholder:{type:String,required:!1},defaultFirstOption:Boolean,reserveKeyword:Boolean,valueKey:{type:String,default:"value"},collapseTags:Boolean,popperAppendToBody:{type:Boolean,default:!0}},data:function(){return{options:[],cachedOptions:[],createdLabel:null,createdSelected:!1,selected:this.multiple?[]:{},inputLength:20,inputWidth:0,initialInputHeight:0,cachedPlaceHolder:"",optionsCount:0,filteredOptionsCount:0,visible:!1,softFocus:!1,selectedLabel:"",hoverIndex:-1,query:"",previousQuery:null,inputHovering:!1,currentPlaceholder:"",menuVisibleOnFocus:!1,isOnComposition:!1,isSilentBlur:!1}},watch:{selectDisabled:function(){var t=this;this.$nextTick(function(){t.resetInputHeight()})},propPlaceholder:function(t){this.cachedPlaceHolder=this.currentPlaceholder=t},value:function(t,e){this.multiple&&(this.resetInputHeight(),t&&t.length>0||this.$refs.input&&""!==this.query?this.currentPlaceholder="":this.currentPlaceholder=this.cachedPlaceHolder,this.filterable&&!this.reserveKeyword&&(this.query="",this.handleQueryChange(this.query))),this.setSelected(),this.filterable&&!this.multiple&&(this.inputLength=20),Object(y["valueEquals"])(t,e)||this.dispatch("ElFormItem","el.form.change",t)},visible:function(t){var e=this;t?(this.broadcast("ElSelectDropdown","updatePopper"),this.filterable&&(this.query=this.remote?"":this.selectedLabel,this.handleQueryChange(this.query),this.multiple?this.$refs.input.focus():(this.remote||(this.broadcast("ElOption","queryChange",""),this.broadcast("ElOptionGroup","queryChange")),this.selectedLabel&&(this.currentPlaceholder=this.selectedLabel,this.selectedLabel="")))):(this.broadcast("ElSelectDropdown","destroyPopper"),this.$refs.input&&this.$refs.input.blur(),this.query="",this.previousQuery=null,this.selectedLabel="",this.inputLength=20,this.menuVisibleOnFocus=!1,this.resetHoverIndex(),this.$nextTick(function(){e.$refs.input&&""===e.$refs.input.value&&0===e.selected.length&&(e.currentPlaceholder=e.cachedPlaceHolder)}),this.multiple||(this.selected&&(this.filterable&&this.allowCreate&&this.createdSelected&&this.createdLabel?this.selectedLabel=this.createdLabel:this.selectedLabel=this.selected.currentLabel,this.filterable&&(this.query=this.selectedLabel)),this.filterable&&(this.currentPlaceholder=this.cachedPlaceHolder))),this.$emit("visible-change",t)},options:function(){var t=this;if(!this.$isServer){this.$nextTick(function(){t.broadcast("ElSelectDropdown","updatePopper")}),this.multiple&&this.resetInputHeight();var e=this.$el.querySelectorAll("input");-1===[].indexOf.call(e,document.activeElement)&&this.setSelected(),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()}}},methods:{handleComposition:function(t){var e=this,n=t.target.value;if("compositionend"===t.type)this.isOnComposition=!1,this.$nextTick(function(t){return e.handleQueryChange(n)});else{var i=n[n.length-1]||"";this.isOnComposition=!Object(Te["isKorean"])(i)}},handleQueryChange:function(t){var e=this;this.previousQuery===t||this.isOnComposition||(null!==this.previousQuery||"function"!==typeof this.filterMethod&&"function"!==typeof this.remoteMethod?(this.previousQuery=t,this.$nextTick(function(){e.visible&&e.broadcast("ElSelectDropdown","updatePopper")}),this.hoverIndex=-1,this.multiple&&this.filterable&&this.$nextTick(function(){var t=15*e.$refs.input.value.length+20;e.inputLength=e.collapseTags?Math.min(50,t):t,e.managePlaceholder(),e.resetInputHeight()}),this.remote&&"function"===typeof this.remoteMethod?(this.hoverIndex=-1,this.remoteMethod(t)):"function"===typeof this.filterMethod?(this.filterMethod(t),this.broadcast("ElOptionGroup","queryChange")):(this.filteredOptionsCount=this.optionsCount,this.broadcast("ElOption","queryChange",t),this.broadcast("ElOptionGroup","queryChange")),this.defaultFirstOption&&(this.filterable||this.remote)&&this.filteredOptionsCount&&this.checkDefaultFirstOption()):this.previousQuery=t)},scrollToOption:function(t){var e=Array.isArray(t)&&t[0]?t[0].$el:t.$el;if(this.$refs.popper&&e){var n=this.$refs.popper.$el.querySelector(".el-select-dropdown__wrap");ni()(n,e)}this.$refs.scrollbar&&this.$refs.scrollbar.handleScroll()},handleMenuEnter:function(){var t=this;this.$nextTick(function(){return t.scrollToOption(t.selected)})},emitChange:function(t){Object(y["valueEquals"])(this.value,t)||this.$emit("change",t)},getOption:function(t){for(var e=void 0,n="[object object]"===Object.prototype.toString.call(t).toLowerCase(),i="[object null]"===Object.prototype.toString.call(t).toLowerCase(),r="[object undefined]"===Object.prototype.toString.call(t).toLowerCase(),o=this.cachedOptions.length-1;o>=0;o--){var a=this.cachedOptions[o],s=n?Object(y["getValueByPath"])(a.value,this.valueKey)===Object(y["getValueByPath"])(t,this.valueKey):a.value===t;if(s){e=a;break}}if(e)return e;var l=n||i||r?"":t,c={value:t,currentLabel:l};return this.multiple&&(c.hitState=!1),c},setSelected:function(){var t=this;if(!this.multiple){var e=this.getOption(this.value);return e.created?(this.createdLabel=e.currentLabel,this.createdSelected=!0):this.createdSelected=!1,this.selectedLabel=e.currentLabel,this.selected=e,void(this.filterable&&(this.query=this.selectedLabel))}var n=[];Array.isArray(this.value)&&this.value.forEach(function(e){n.push(t.getOption(e))}),this.selected=n,this.$nextTick(function(){t.resetInputHeight()})},handleFocus:function(t){this.softFocus?this.softFocus=!1:((this.automaticDropdown||this.filterable)&&(this.visible=!0,this.filterable&&(this.menuVisibleOnFocus=!0)),this.$emit("focus",t))},blur:function(){this.visible=!1,this.$refs.reference.blur()},handleBlur:function(t){var e=this;setTimeout(function(){e.isSilentBlur?e.isSilentBlur=!1:e.$emit("blur",t)},50),this.softFocus=!1},handleClearClick:function(t){this.deleteSelected(t)},doDestroy:function(){this.$refs.popper&&this.$refs.popper.doDestroy()},handleClose:function(){this.visible=!1},toggleLastOptionHitState:function(t){if(Array.isArray(this.selected)){var e=this.selected[this.selected.length-1];if(e)return!0===t||!1===t?(e.hitState=t,t):(e.hitState=!e.hitState,e.hitState)}},deletePrevTag:function(t){if(t.target.value.length<=0&&!this.toggleLastOptionHitState()){var e=this.value.slice();e.pop(),this.$emit("input",e),this.emitChange(e)}},managePlaceholder:function(){""!==this.currentPlaceholder&&(this.currentPlaceholder=this.$refs.input.value?"":this.cachedPlaceHolder)},resetInputState:function(t){8!==t.keyCode&&this.toggleLastOptionHitState(!1),this.inputLength=15*this.$refs.input.value.length+20,this.resetInputHeight()},resetInputHeight:function(){var t=this;this.collapseTags&&!this.filterable||this.$nextTick(function(){if(t.$refs.reference){var e=t.$refs.reference.$el.childNodes,n=[].filter.call(e,function(t){return"INPUT"===t.tagName})[0],i=t.$refs.tags,r=t.initialInputHeight||40;n.style.height=0===t.selected.length?r+"px":Math.max(i?i.clientHeight+(i.clientHeight>r?6:0):0,r)+"px",t.visible&&!1!==t.emptyText&&t.broadcast("ElSelectDropdown","updatePopper")}})},resetHoverIndex:function(){var t=this;setTimeout(function(){t.multiple?t.selected.length>0?t.hoverIndex=Math.min.apply(null,t.selected.map(function(e){return t.options.indexOf(e)})):t.hoverIndex=-1:t.hoverIndex=t.options.indexOf(t.selected)},300)},handleOptionSelect:function(t,e){var n=this;if(this.multiple){var i=(this.value||[]).slice(),r=this.getValueIndex(i,t.value);r>-1?i.splice(r,1):(this.multipleLimit<=0||i.length<this.multipleLimit)&&i.push(t.value),this.$emit("input",i),this.emitChange(i),t.created&&(this.query="",this.handleQueryChange(""),this.inputLength=20),this.filterable&&this.$refs.input.focus()}else this.$emit("input",t.value),this.emitChange(t.value),this.visible=!1;this.isSilentBlur=e,this.setSoftFocus(),this.visible||this.$nextTick(function(){n.scrollToOption(t)})},setSoftFocus:function(){this.softFocus=!0;var t=this.$refs.input||this.$refs.reference;t&&t.focus()},getValueIndex:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1],n="[object object]"===Object.prototype.toString.call(e).toLowerCase();if(n){var i=this.valueKey,r=-1;return t.some(function(t,n){return Object(y["getValueByPath"])(t,i)===Object(y["getValueByPath"])(e,i)&&(r=n,!0)}),r}return t.indexOf(e)},toggleMenu:function(){this.selectDisabled||(this.menuVisibleOnFocus?this.menuVisibleOnFocus=!1:this.visible=!this.visible,this.visible&&(this.$refs.input||this.$refs.reference).focus())},selectOption:function(){this.visible?this.options[this.hoverIndex]&&this.handleOptionSelect(this.options[this.hoverIndex]):this.toggleMenu()},deleteSelected:function(t){t.stopPropagation();var e=this.multiple?[]:"";this.$emit("input",e),this.emitChange(e),this.visible=!1,this.$emit("clear")},deleteTag:function(t,e){var n=this.selected.indexOf(e);if(n>-1&&!this.selectDisabled){var i=this.value.slice();i.splice(n,1),this.$emit("input",i),this.emitChange(i),this.$emit("remove-tag",e.value)}t.stopPropagation()},onInputChange:function(){this.filterable&&this.query!==this.selectedLabel&&(this.query=this.selectedLabel,this.handleQueryChange(this.query))},onOptionDestroy:function(t){t>-1&&(this.optionsCount--,this.filteredOptionsCount--,this.options.splice(t,1))},resetInputWidth:function(){this.inputWidth=this.$refs.reference.$el.getBoundingClientRect().width},handleResize:function(){this.resetInputWidth(),this.multiple&&this.resetInputHeight()},checkDefaultFirstOption:function(){this.hoverIndex=-1;for(var t=!1,e=this.options.length-1;e>=0;e--)if(this.options[e].created){t=!0,this.hoverIndex=e;break}if(!t)for(var n=0;n!==this.options.length;++n){var i=this.options[n];if(this.query){if(!i.disabled&&!i.groupDisabled&&i.visible){this.hoverIndex=n;break}}else if(i.itemSelected){this.hoverIndex=n;break}}},getValueKey:function(t){return"[object object]"!==Object.prototype.toString.call(t.value).toLowerCase()?t.value:Object(y["getValueByPath"])(t.value,this.valueKey)}},created:function(){var t=this;this.cachedPlaceHolder=this.currentPlaceholder=this.propPlaceholder,this.multiple&&!Array.isArray(this.value)&&this.$emit("input",[]),!this.multiple&&Array.isArray(this.value)&&this.$emit("input",""),this.debouncedOnInputChange=z()(this.debounce,function(){t.onInputChange()}),this.debouncedQueryChange=z()(this.debounce,function(e){t.handleQueryChange(e.target.value)}),this.$on("handleOptionClick",this.handleOptionSelect),this.$on("setSelected",this.setSelected)},mounted:function(){var t=this;this.multiple&&Array.isArray(this.value)&&this.value.length>0&&(this.currentPlaceholder=""),Object(ti["addResizeListener"])(this.$el,this.handleResize);var e=this.$refs.reference;if(e&&e.$el){var n={medium:36,small:32,mini:28},i=e.$el.querySelector("input");this.initialInputHeight=i.getBoundingClientRect().height||n[this.selectSize]}this.remote&&this.multiple&&this.resetInputHeight(),this.$nextTick(function(){e&&e.$el&&(t.inputWidth=e.$el.getBoundingClientRect().width)}),this.setSelected()},beforeDestroy:function(){this.$el&&this.handleResize&&Object(ti["removeResizeListener"])(this.$el,this.handleResize)}},oi=ri,ai=s(oi,zn,Bn,!1,null,null,null);ai.options.__file="packages/select/src/select.vue";var si=ai.exports;si.install=function(t){t.component(si.name,si)};var li=si;Jn.install=function(t){t.component(Jn.name,Jn)};var ci=Jn,ui=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ul",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-select-group__wrap"},[n("li",{staticClass:"el-select-group__title"},[t._v(t._s(t.label))]),n("li",[n("ul",{staticClass:"el-select-group"},[t._t("default")],2)])])},hi=[];ui._withStripped=!0;var di={mixins:[C.a],name:"ElOptionGroup",componentName:"ElOptionGroup",props:{label:String,disabled:{type:Boolean,default:!1}},data:function(){return{visible:!0}},watch:{disabled:function(t){this.broadcast("ElOption","handleGroupDisabled",t)}},methods:{queryChange:function(){this.visible=this.$children&&Array.isArray(this.$children)&&this.$children.some(function(t){return!0===t.visible})}},created:function(){this.$on("queryChange",this.queryChange)},mounted:function(){this.disabled&&this.broadcast("ElOption","handleGroupDisabled",this.disabled)}},pi=di,fi=s(pi,ui,hi,!1,null,null,null);fi.options.__file="packages/select/src/option-group.vue";var mi=fi.exports;mi.install=function(t){t.component(mi.name,mi)};var vi=mi,gi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?n("i",{staticClass:"el-icon-loading"}):t._e(),t.icon&&!t.loading?n("i",{class:t.icon}):t._e(),t.$slots.default?n("span",[t._t("default")],2):t._e()])},yi=[];gi._withStripped=!0;var bi={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},xi=bi,wi=s(xi,gi,yi,!1,null,null,null);wi.options.__file="packages/button/src/button.vue";var _i=wi.exports;_i.install=function(t){t.component(_i.name,_i)};var Mi=_i,Ei=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-button-group"},[t._t("default")],2)},Si=[];Ei._withStripped=!0;var Ti={name:"ElButtonGroup"},Ai=Ti,Ci=s(Ai,Ei,Si,!1,null,null,null);Ci.options.__file="packages/button/src/button-group.vue";var Li=Ci.exports;Li.install=function(t){t.component(Li.name,Li)};var Pi=Li,Oi=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-table",class:[{"el-table--fit":t.fit,"el-table--striped":t.stripe,"el-table--border":t.border||t.isGroup,"el-table--hidden":t.isHidden,"el-table--group":t.isGroup,"el-table--fluid-height":t.maxHeight,"el-table--scrollable-x":t.layout.scrollX,"el-table--scrollable-y":t.layout.scrollY,"el-table--enable-row-hover":!t.store.states.isComplex,"el-table--enable-row-transition":0!==(t.store.states.data||[]).length&&(t.store.states.data||[]).length<100},t.tableSize?"el-table--"+t.tableSize:""],on:{mouseleave:function(e){t.handleMouseLeave(e)}}},[n("div",{ref:"hiddenColumns",staticClass:"hidden-columns"},[t._t("default")],2),t.showHeader?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:t.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"headerWrapper",staticClass:"el-table__header-wrapper"},[n("table-header",{ref:"tableHeader",style:{width:t.layout.bodyWidth?t.layout.bodyWidth+"px":""},attrs:{store:t.store,border:t.border,"default-sort":t.defaultSort}})],1):t._e(),n("div",{ref:"bodyWrapper",staticClass:"el-table__body-wrapper",class:[t.layout.scrollX?"is-scrolling-"+t.scrollPosition:"is-scrolling-none"],style:[t.bodyHeight]},[n("table-body",{style:{width:t.bodyWidth},attrs:{context:t.context,store:t.store,stripe:t.stripe,"row-class-name":t.rowClassName,"row-style":t.rowStyle,highlight:t.highlightCurrentRow}}),t.data&&0!==t.data.length?t._e():n("div",{ref:"emptyBlock",staticClass:"el-table__empty-block",style:t.emptyBlockStyle},[n("span",{staticClass:"el-table__empty-text"},[t._t("empty",[t._v(t._s(t.emptyText||t.t("el.table.emptyText")))])],2)]),t.$slots.append?n("div",{ref:"appendWrapper",staticClass:"el-table__append-wrapper"},[t._t("append")],2):t._e()],1),t.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:t.data&&t.data.length>0,expression:"data && data.length > 0"},{name:"mousewheel",rawName:"v-mousewheel",value:t.handleHeaderFooterMousewheel,expression:"handleHeaderFooterMousewheel"}],ref:"footerWrapper",staticClass:"el-table__footer-wrapper"},[n("table-footer",{style:{width:t.layout.bodyWidth?t.layout.bodyWidth+"px":""},attrs:{store:t.store,border:t.border,"sum-text":t.sumText||t.t("el.table.sumText"),"summary-method":t.summaryMethod,"default-sort":t.defaultSort}})],1):t._e(),t.fixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:t.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"fixedWrapper",staticClass:"el-table__fixed",style:[{width:t.layout.fixedWidth?t.layout.fixedWidth+"px":""},t.fixedHeight]},[t.showHeader?n("div",{ref:"fixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"fixedTableHeader",style:{width:t.bodyWidth},attrs:{fixed:"left",border:t.border,store:t.store}})],1):t._e(),n("div",{ref:"fixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:t.layout.headerHeight+"px"},t.fixedBodyHeight]},[n("table-body",{style:{width:t.bodyWidth},attrs:{fixed:"left",store:t.store,stripe:t.stripe,highlight:t.highlightCurrentRow,"row-class-name":t.rowClassName,"row-style":t.rowStyle}}),t.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:t.layout.appendHeight+"px"}}):t._e()],1),t.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:t.data&&t.data.length>0,expression:"data && data.length > 0"}],ref:"fixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:t.bodyWidth},attrs:{fixed:"left",border:t.border,"sum-text":t.sumText||t.t("el.table.sumText"),"summary-method":t.summaryMethod,store:t.store}})],1):t._e()]):t._e(),t.rightFixedColumns.length>0?n("div",{directives:[{name:"mousewheel",rawName:"v-mousewheel",value:t.handleFixedMousewheel,expression:"handleFixedMousewheel"}],ref:"rightFixedWrapper",staticClass:"el-table__fixed-right",style:[{width:t.layout.rightFixedWidth?t.layout.rightFixedWidth+"px":"",right:t.layout.scrollY?(t.border?t.layout.gutterWidth:t.layout.gutterWidth||0)+"px":""},t.fixedHeight]},[t.showHeader?n("div",{ref:"rightFixedHeaderWrapper",staticClass:"el-table__fixed-header-wrapper"},[n("table-header",{ref:"rightFixedTableHeader",style:{width:t.bodyWidth},attrs:{fixed:"right",border:t.border,store:t.store}})],1):t._e(),n("div",{ref:"rightFixedBodyWrapper",staticClass:"el-table__fixed-body-wrapper",style:[{top:t.layout.headerHeight+"px"},t.fixedBodyHeight]},[n("table-body",{style:{width:t.bodyWidth},attrs:{fixed:"right",store:t.store,stripe:t.stripe,"row-class-name":t.rowClassName,"row-style":t.rowStyle,highlight:t.highlightCurrentRow}}),t.$slots.append?n("div",{staticClass:"el-table__append-gutter",style:{height:t.layout.appendHeight+"px"}}):t._e()],1),t.showSummary?n("div",{directives:[{name:"show",rawName:"v-show",value:t.data&&t.data.length>0,expression:"data && data.length > 0"}],ref:"rightFixedFooterWrapper",staticClass:"el-table__fixed-footer-wrapper"},[n("table-footer",{style:{width:t.bodyWidth},attrs:{fixed:"right",border:t.border,"sum-text":t.sumText||t.t("el.table.sumText"),"summary-method":t.summaryMethod,store:t.store}})],1):t._e()]):t._e(),t.rightFixedColumns.length>0?n("div",{ref:"rightFixedPatch",staticClass:"el-table__fixed-right-patch",style:{width:t.layout.scrollY?t.layout.gutterWidth+"px":"0",height:t.layout.headerHeight+"px"}}):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.resizeProxyVisible,expression:"resizeProxyVisible"}],ref:"resizeProxy",staticClass:"el-table__column-resize-proxy"})])},Ri=[];Oi._withStripped=!0;var ki=n(16),Di=n.n(ki),Ii=n(35),Ni=n(38),zi=n.n(Ni),Bi="undefined"!==typeof navigator&&navigator.userAgent.toLowerCase().indexOf("firefox")>-1,Fi=function(t,e){t&&t.addEventListener&&t.addEventListener(Bi?"DOMMouseScroll":"mousewheel",function(t){var n=zi()(t);e&&e.apply(this,[t,n])})},ji={bind:function(t,e){Fi(t,e.value)}},Hi=n(6),Ui=n.n(Hi),Vi="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gi=function(t){var e=t.target;while(e&&"HTML"!==e.tagName.toUpperCase()){if("TD"===e.tagName.toUpperCase())return e;e=e.parentNode}return null},Wi=function(t){return null!==t&&"object"===("undefined"===typeof t?"undefined":Vi(t))},$i=function(t,e,n,i,r){if(!e&&!i&&(!r||Array.isArray(r)&&!r.length))return t;n="string"===typeof n?"descending"===n?-1:1:n&&n<0?-1:1;var o=i?null:function(n,i){return r?(Array.isArray(r)||(r=[r]),r.map(function(e){return"string"===typeof e?Object(y["getValueByPath"])(n,e):e(n,i,t)})):("$key"!==e&&Wi(n)&&"$value"in n&&(n=n.$value),[Wi(n)?Object(y["getValueByPath"])(n,e):n])},a=function(t,e){if(i)return i(t.value,e.value);for(var n=0,r=t.key.length;n<r;n++){if(t.key[n]<e.key[n])return-1;if(t.key[n]>e.key[n])return 1}return 0};return t.map(function(t,e){return{value:t,index:e,key:o?o(t,e):null}}).sort(function(t,e){var i=a(t,e);return i||(i=t.index-e.index),i*n}).map(function(t){return t.value})},qi=function(t,e){var n=null;return t.columns.forEach(function(t){t.id===e&&(n=t)}),n},Yi=function(t,e){for(var n=null,i=0;i<t.columns.length;i++){var r=t.columns[i];if(r.columnKey===e){n=r;break}}return n},Xi=function(t,e){var n=(e.className||"").match(/el-table_[^\s]+/gm);return n?qi(t,n[0]):null},Zi=function(t,e){if(!t)throw new Error("row is required when get row identity");if("string"===typeof e){if(e.indexOf(".")<0)return t[e];for(var n=e.split("."),i=t,r=0;r<n.length;r++)i=i[n[r]];return i}if("function"===typeof e)return e.call(null,t)},Ji=function(t,e){var n={};return(t||[]).forEach(function(t,i){n[Zi(t,e)]={row:t,index:i}}),n};function Ki(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Qi(t,e){var n={},i=void 0;for(i in t)n[i]=t[i];for(i in e)if(Ki(e,i)){var r=e[i];"undefined"!==typeof r&&(n[i]=r)}return n}function tr(t){return void 0!==t&&(t=parseInt(t,10),isNaN(t)&&(t=null)),t}function er(t){return"undefined"!==typeof t&&(t=tr(t),isNaN(t)&&(t=80)),t}function nr(t){return"number"===typeof t?t:"string"===typeof t?/^\d+(?:px)?$/.test(t)?parseInt(t,10):t:null}function ir(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return 0===e.length?function(t){return t}:1===e.length?e[0]:e.reduce(function(t,e){return function(){return t(e.apply(void 0,arguments))}})}function rr(t,e,n){var i=!1,r=t.indexOf(e),o=-1!==r,a=function(){t.push(e),i=!0},s=function(){t.splice(r,1),i=!0};return"boolean"===typeof n?n&&!o?a():!n&&o&&s():o?s():a(),i}function or(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"children",i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"hasChildren",r=function(t){return!(Array.isArray(t)&&t.length)};function o(t,a,s){e(t,a,s),a.forEach(function(t){if(t[i])e(t,null,s+1);else{var a=t[n];r(a)||o(t,a,s+1)}})}t.forEach(function(t){if(t[i])e(t,null,0);else{var a=t[n];r(a)||o(t,a,0)}})}var ar={data:function(){return{states:{defaultExpandAll:!1,expandRows:[]}}},methods:{updateExpandRows:function(){var t=this.states,e=t.data,n=void 0===e?[]:e,i=t.rowKey,r=t.defaultExpandAll,o=t.expandRows;if(r)this.states.expandRows=n.slice();else if(i){var a=Ji(o,i);this.states.expandRows=n.reduce(function(t,e){var n=Zi(e,i),r=a[n];return r&&t.push(e),t},[])}else this.states.expandRows=[]},toggleRowExpansion:function(t,e){var n=rr(this.states.expandRows,t,e);n&&(this.table.$emit("expand-change",t,this.states.expandRows.slice()),this.scheduleLayout())},setExpandRowKeys:function(t){this.assertRowKey();var e=this.states,n=e.data,i=e.rowKey,r=Ji(n,i);this.states.expandRows=t.reduce(function(t,e){var n=r[e];return n&&t.push(n.row),t},[])},isRowExpanded:function(t){var e=this.states,n=e.expandRows,i=void 0===n?[]:n,r=e.rowKey;if(r){var o=Ji(i,r);return!!o[Zi(t,r)]}return-1!==i.indexOf(t)}}},sr={data:function(){return{states:{_currentRowKey:null,currentRow:null}}},methods:{setCurrentRowKey:function(t){this.assertRowKey(),this.states._currentRowKey=t,this.setCurrentRowByKey(t)},restoreCurrentRowKey:function(){this.states._currentRowKey=null},setCurrentRowByKey:function(t){var e=this.states,n=e.data,i=void 0===n?[]:n,r=e.rowKey,o=null;r&&(o=Object(y["arrayFind"])(i,function(e){return Zi(e,r)===t})),e.currentRow=o},updateCurrentRow:function(t){var e=this.states,n=this.table,i=e.currentRow;if(t&&t!==i)return e.currentRow=t,void n.$emit("current-change",t,i);!t&&i&&(e.currentRow=null,n.$emit("current-change",null,i))},updateCurrentRowData:function(){var t=this.states,e=this.table,n=t.rowKey,i=t._currentRowKey,r=t.data||[],o=t.currentRow;if(-1===r.indexOf(o)&&o){if(n){var a=Zi(o,n);this.setCurrentRowByKey(a)}else t.currentRow=null;null===t.currentRow&&e.$emit("current-change",null,o)}else i&&(this.setCurrentRowByKey(i),this.restoreCurrentRowKey())}}},lr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},cr={data:function(){return{states:{expandRowKeys:[],treeData:{},indent:16,lazy:!1,lazyTreeNodeMap:{},lazyColumnIdentifier:"hasChildren",childrenColumnName:"children"}}},computed:{normalizedData:function(){if(!this.states.rowKey)return{};var t=this.states.data||[];return this.normalize(t)},normalizedLazyNode:function(){var t=this.states,e=t.rowKey,n=t.lazyTreeNodeMap,i=t.lazyColumnIdentifier,r=Object.keys(n),o={};return r.length?(r.forEach(function(t){if(n[t].length){var r={children:[]};n[t].forEach(function(t){var n=Zi(t,e);r.children.push(n),t[i]&&!o[n]&&(o[n]={children:[]})}),o[t]=r}}),o):o}},watch:{normalizedData:"updateTreeData",normalizedLazyNode:"updateTreeData"},methods:{normalize:function(t){var e=this.states,n=e.childrenColumnName,i=e.lazyColumnIdentifier,r=e.rowKey,o=e.lazy,a={};return or(t,function(t,e,n){var i=Zi(t,r);Array.isArray(e)?a[i]={children:e.map(function(t){return Zi(t,r)}),level:n}:o&&(a[i]={children:[],lazy:!0,level:n})},n,i),a},updateTreeData:function(){var t=this.normalizedData,e=this.normalizedLazyNode,n=Object.keys(t),i={};if(n.length){var r=this.states,o=r.treeData,a=r.defaultExpandAll,s=r.expandRowKeys,l=r.lazy,c=[],u=function(t,e){var n=a||s&&-1!==s.indexOf(e);return!!(t&&t.expanded||n)};n.forEach(function(e){var n=o[e],r=lr({},t[e]);if(r.expanded=u(n,e),r.lazy){var a=n||{},s=a.loaded,l=void 0!==s&&s,h=a.loading,d=void 0!==h&&h;r.loaded=!!l,r.loading=!!d,c.push(e)}i[e]=r});var h=Object.keys(e);l&&h.length&&c.length&&h.forEach(function(t){var n=o[t],r=e[t].children;if(-1!==c.indexOf(t)){if(0!==i[t].children.length)throw new Error("[ElTable]children must be an empty array.");i[t].children=r}else{var a=n||{},s=a.loaded,l=void 0!==s&&s,h=a.loading,d=void 0!==h&&h;i[t]={lazy:!0,loaded:!!l,loading:!!d,expanded:u(n,t),children:r,level:""}}})}this.states.treeData=i,this.updateTableScrollY()},updateTreeExpandKeys:function(t){this.states.expandRowKeys=t,this.updateTreeData()},toggleTreeExpansion:function(t,e){this.assertRowKey();var n=this.states,i=n.rowKey,r=n.treeData,o=Zi(t,i),a=o&&r[o];if(o&&a&&"expanded"in a){var s=a.expanded;e="undefined"===typeof e?!a.expanded:e,r[o].expanded=e,s!==e&&this.table.$emit("expand-change",t,e),this.updateTableScrollY()}},loadOrToggle:function(t){this.assertRowKey();var e=this.states,n=e.lazy,i=e.treeData,r=e.rowKey,o=Zi(t,r),a=i[o];n&&a&&"loaded"in a&&!a.loaded?this.loadData(t,o,a):this.toggleTreeExpansion(t)},loadData:function(t,e,n){var i=this,r=this.table.load,o=this.states,a=o.lazyTreeNodeMap,s=o.treeData;r&&!s[e].loaded&&(s[e].loading=!0,r(t,n,function(n){if(!Array.isArray(n))throw new Error("[ElTable] data must be an array");s[e].loading=!1,s[e].loaded=!0,s[e].expanded=!0,n.length&&i.$set(a,e,n),i.table.$emit("expand-change",t,!0)}))}}},ur=function(t,e){var n=e.sortingColumn;return n&&"string"!==typeof n.sortable?$i(t,e.sortProp,e.sortOrder,n.sortMethod,n.sortBy):t},hr=function t(e){var n=[];return e.forEach(function(e){e.children?n.push.apply(n,t(e.children)):n.push(e)}),n},dr=Ui.a.extend({data:function(){return{states:{rowKey:null,data:[],isComplex:!1,_columns:[],originColumns:[],columns:[],fixedColumns:[],rightFixedColumns:[],leafColumns:[],fixedLeafColumns:[],rightFixedLeafColumns:[],leafColumnsLength:0,fixedLeafColumnsLength:0,rightFixedLeafColumnsLength:0,isAllSelected:!1,selection:[],reserveSelection:!1,selectOnIndeterminate:!1,selectable:null,filters:{},filteredData:null,sortingColumn:null,sortProp:null,sortOrder:null,hoverRow:null}}},mixins:[ar,sr,cr],methods:{assertRowKey:function(){var t=this.states.rowKey;if(!t)throw new Error("[ElTable] prop row-key is required")},updateColumns:function(){var t=this.states,e=t._columns||[];t.fixedColumns=e.filter(function(t){return!0===t.fixed||"left"===t.fixed}),t.rightFixedColumns=e.filter(function(t){return"right"===t.fixed}),t.fixedColumns.length>0&&e[0]&&"selection"===e[0].type&&!e[0].fixed&&(e[0].fixed=!0,t.fixedColumns.unshift(e[0]));var n=e.filter(function(t){return!t.fixed});t.originColumns=[].concat(t.fixedColumns).concat(n).concat(t.rightFixedColumns);var i=hr(n),r=hr(t.fixedColumns),o=hr(t.rightFixedColumns);t.leafColumnsLength=i.length,t.fixedLeafColumnsLength=r.length,t.rightFixedLeafColumnsLength=o.length,t.columns=[].concat(r).concat(i).concat(o),t.isComplex=t.fixedColumns.length>0||t.rightFixedColumns.length>0},scheduleLayout:function(t){t&&this.updateColumns(),this.table.debouncedUpdateLayout()},isSelected:function(t){var e=this.states.selection,n=void 0===e?[]:e;return n.indexOf(t)>-1},clearSelection:function(){var t=this.states;t.isAllSelected=!1;var e=t.selection;e.length&&(t.selection=[],this.table.$emit("selection-change",[]))},cleanSelection:function(){var t=this.states,e=t.data,n=t.rowKey,i=t.selection,r=void 0;if(n){r=[];var o=Ji(i,n),a=Ji(e,n);for(var s in o)o.hasOwnProperty(s)&&!a[s]&&r.push(o[s].row)}else r=i.filter(function(t){return-1===e.indexOf(t)});if(r.length){var l=i.filter(function(t){return-1===r.indexOf(t)});t.selection=l,this.table.$emit("selection-change",l.slice())}},toggleRowSelection:function(t,e){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=rr(this.states.selection,t,e);if(i){var r=(this.states.selection||[]).slice();n&&this.table.$emit("select",r,t),this.table.$emit("selection-change",r)}},_toggleAllSelection:function(){var t=this.states,e=t.data,n=void 0===e?[]:e,i=t.selection,r=t.selectOnIndeterminate?!t.isAllSelected:!(t.isAllSelected||i.length);t.isAllSelected=r;var o=!1;n.forEach(function(e,n){t.selectable?t.selectable.call(null,e,n)&&rr(i,e,r)&&(o=!0):rr(i,e,r)&&(o=!0)}),o&&this.table.$emit("selection-change",i?i.slice():[]),this.table.$emit("select-all",i)},updateSelectionByRowKey:function(){var t=this.states,e=t.selection,n=t.rowKey,i=t.data,r=Ji(e,n);i.forEach(function(t){var i=Zi(t,n),o=r[i];o&&(e[o.index]=t)})},updateAllSelected:function(){var t=this.states,e=t.selection,n=t.rowKey,i=t.selectable,r=t.data||[];if(0!==r.length){var o=void 0;n&&(o=Ji(e,n));for(var a=function(t){return o?!!o[Zi(t,n)]:-1!==e.indexOf(t)},s=!0,l=0,c=0,u=r.length;c<u;c++){var h=r[c],d=i&&i.call(null,h,c);if(a(h))l++;else if(!i||d){s=!1;break}}0===l&&(s=!1),t.isAllSelected=s}else t.isAllSelected=!1},updateFilters:function(t,e){Array.isArray(t)||(t=[t]);var n=this.states,i={};return t.forEach(function(t){n.filters[t.id]=e,i[t.columnKey||t.id]=e}),i},updateSort:function(t,e,n){this.states.sortingColumn&&this.states.sortingColumn!==t&&(this.states.sortingColumn.order=null),this.states.sortingColumn=t,this.states.sortProp=e,this.states.sortOrder=n},execFilter:function(){var t=this,e=this.states,n=e._data,i=e.filters,r=n;Object.keys(i).forEach(function(n){var i=e.filters[n];if(i&&0!==i.length){var o=qi(t.states,n);o&&o.filterMethod&&(r=r.filter(function(t){return i.some(function(e){return o.filterMethod.call(null,e,t,o)})}))}}),e.filteredData=r},execSort:function(){var t=this.states;t.data=ur(t.filteredData,t)},execQuery:function(t){t&&t.filter||this.execFilter(),this.execSort()},clearFilter:function(t){var e=this.states,n=this.table.$refs,i=n.tableHeader,r=n.fixedTableHeader,o=n.rightFixedTableHeader,a={};i&&(a=Se()(a,i.filterPanels)),r&&(a=Se()(a,r.filterPanels)),o&&(a=Se()(a,o.filterPanels));var s=Object.keys(a);if(s.length)if("string"===typeof t&&(t=[t]),Array.isArray(t)){var l=t.map(function(t){return Yi(e,t)});s.forEach(function(t){var e=l.find(function(e){return e.id===t});e&&(a[t].filteredValue=[])}),this.commit("filterChange",{column:l,values:[],silent:!0,multi:!0})}else s.forEach(function(t){a[t].filteredValue=[]}),e.filters={},this.commit("filterChange",{column:{},values:[],silent:!0})},clearSort:function(){var t=this.states;t.sortingColumn&&(this.updateSort(null,null,null),this.commit("changeSortCondition",{silent:!0}))},setExpandRowKeysAdapter:function(t){this.setExpandRowKeys(t),this.updateTreeExpandKeys(t)},toggleRowExpansionAdapter:function(t,e){var n=this.states.columns.some(function(t){var e=t.type;return"expand"===e});n?this.toggleRowExpansion(t,e):this.toggleTreeExpansion(t,e)}}});dr.prototype.mutations={setData:function(t,e){var n=t._data!==e;t._data=e,this.execQuery(),this.updateCurrentRowData(),this.updateExpandRows(),t.reserveSelection?(this.assertRowKey(),this.updateSelectionByRowKey()):n?this.clearSelection():this.cleanSelection(),this.updateAllSelected(),this.updateTableScrollY()},insertColumn:function(t,e,n,i){var r=t._columns;i&&(r=i.children,r||(r=i.children=[])),"undefined"!==typeof n?r.splice(n,0,e):r.push(e),"selection"===e.type&&(t.selectable=e.selectable,t.reserveSelection=e.reserveSelection),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},removeColumn:function(t,e,n){var i=t._columns;n&&(i=n.children,i||(i=n.children=[])),i&&i.splice(i.indexOf(e),1),this.table.$ready&&(this.updateColumns(),this.scheduleLayout())},sort:function(t,e){var n=e.prop,i=e.order,r=e.init;if(n){var o=Object(y["arrayFind"])(t.columns,function(t){return t.property===n});o&&(o.order=i,this.updateSort(o,n,i),this.commit("changeSortCondition",{init:r}))}},changeSortCondition:function(t,e){var n=t.sortingColumn,i=t.sortProp,r=t.sortOrder;null===r&&(t.sortingColumn=null,t.sortProp=null);var o={filter:!0};this.execQuery(o),e&&(e.silent||e.init)||this.table.$emit("sort-change",{column:n,prop:i,order:r}),this.updateTableScrollY()},filterChange:function(t,e){var n=e.column,i=e.values,r=e.silent,o=this.updateFilters(n,i);this.execQuery(),r||this.table.$emit("filter-change",o),this.updateTableScrollY()},toggleAllSelection:function(){this.toggleAllSelection()},rowSelectedChanged:function(t,e){this.toggleRowSelection(e),this.updateAllSelected()},setHoverRow:function(t,e){t.hoverRow=e},setCurrentRow:function(t,e){this.updateCurrentRow(e)}},dr.prototype.commit=function(t){var e=this.mutations;if(!e[t])throw new Error("Action not found: "+t);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];e[t].apply(this,[this.states].concat(i))},dr.prototype.updateTableScrollY=function(){Ui.a.nextTick(this.table.updateScrollY)};var pr=dr;function fr(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!t)throw new Error("Table is required.");var n=new pr;return n.table=t,n.toggleAllSelection=z()(10,n._toggleAllSelection),Object.keys(e).forEach(function(t){n.states[t]=e[t]}),n}function mr(t){var e={};return Object.keys(t).forEach(function(n){var i=t[n],r=void 0;"string"===typeof i?r=function(){return this.store.states[i]}:"function"===typeof i?r=function(){return i.call(this,this.store.states)}:console.error("invalid value type"),r&&(e[n]=r)}),e}var vr=n(30),gr=n.n(vr);function yr(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var br=function(){function t(e){for(var n in yr(this,t),this.observers=[],this.table=null,this.store=null,this.columns=null,this.fit=!0,this.showHeader=!0,this.height=null,this.scrollX=!1,this.scrollY=!1,this.bodyWidth=null,this.fixedWidth=null,this.rightFixedWidth=null,this.tableHeight=null,this.headerHeight=44,this.appendHeight=0,this.footerHeight=44,this.viewportHeight=null,this.bodyHeight=null,this.fixedBodyHeight=null,this.gutterWidth=gr()(),e)e.hasOwnProperty(n)&&(this[n]=e[n]);if(!this.table)throw new Error("table is required for Table Layout");if(!this.store)throw new Error("store is required for Table Layout")}return t.prototype.updateScrollY=function(){var t=this.height;if(null===t)return!1;var e=this.table.bodyWrapper;if(this.table.$el&&e){var n=e.querySelector(".el-table__body"),i=this.scrollY,r=n.offsetHeight>this.bodyHeight;return this.scrollY=r,i!==r}return!1},t.prototype.setHeight=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"height";if(!Ui.a.prototype.$isServer){var i=this.table.$el;if(t=nr(t),this.height=t,!i&&(t||0===t))return Ui.a.nextTick(function(){return e.setHeight(t,n)});"number"===typeof t?(i.style[n]=t+"px",this.updateElsHeight()):"string"===typeof t&&(i.style[n]=t,this.updateElsHeight())}},t.prototype.setMaxHeight=function(t){this.setHeight(t,"max-height")},t.prototype.getFlattenColumns=function(){var t=[],e=this.table.columns;return e.forEach(function(e){e.isColumnGroup?t.push.apply(t,e.columns):t.push(e)}),t},t.prototype.updateElsHeight=function(){var t=this;if(!this.table.$ready)return Ui.a.nextTick(function(){return t.updateElsHeight()});var e=this.table.$refs,n=e.headerWrapper,i=e.appendWrapper,r=e.footerWrapper;if(this.appendHeight=i?i.offsetHeight:0,!this.showHeader||n){var o=n?n.querySelector(".el-table__header tr"):null,a=this.headerDisplayNone(o),s=this.headerHeight=this.showHeader?n.offsetHeight:0;if(this.showHeader&&!a&&n.offsetWidth>0&&(this.table.columns||[]).length>0&&s<2)return Ui.a.nextTick(function(){return t.updateElsHeight()});var l=this.tableHeight=this.table.$el.clientHeight,c=this.footerHeight=r?r.offsetHeight:0;null!==this.height&&(this.bodyHeight=l-s-c+(r?1:0)),this.fixedBodyHeight=this.scrollX?this.bodyHeight-this.gutterWidth:this.bodyHeight;var u=!(this.store.states.data&&this.store.states.data.length);this.viewportHeight=this.scrollX?l-(u?0:this.gutterWidth):l,this.updateScrollY(),this.notifyObservers("scrollable")}},t.prototype.headerDisplayNone=function(t){if(!t)return!0;var e=t;while("DIV"!==e.tagName){if("none"===getComputedStyle(e).display)return!0;e=e.parentElement}return!1},t.prototype.updateColumnsWidth=function(){if(!Ui.a.prototype.$isServer){var t=this.fit,e=this.table.$el.clientWidth,n=0,i=this.getFlattenColumns(),r=i.filter(function(t){return"number"!==typeof t.width});if(i.forEach(function(t){"number"===typeof t.width&&t.realWidth&&(t.realWidth=null)}),r.length>0&&t){i.forEach(function(t){n+=t.width||t.minWidth||80});var o=this.scrollY?this.gutterWidth:0;if(n<=e-o){this.scrollX=!1;var a=e-o-n;if(1===r.length)r[0].realWidth=(r[0].minWidth||80)+a;else{var s=r.reduce(function(t,e){return t+(e.minWidth||80)},0),l=a/s,c=0;r.forEach(function(t,e){if(0!==e){var n=Math.floor((t.minWidth||80)*l);c+=n,t.realWidth=(t.minWidth||80)+n}}),r[0].realWidth=(r[0].minWidth||80)+a-c}}else this.scrollX=!0,r.forEach(function(t){t.realWidth=t.minWidth});this.bodyWidth=Math.max(n,e),this.table.resizeState.width=this.bodyWidth}else i.forEach(function(t){t.width||t.minWidth?t.realWidth=t.width||t.minWidth:t.realWidth=80,n+=t.realWidth}),this.scrollX=n>e,this.bodyWidth=n;var u=this.store.states.fixedColumns;if(u.length>0){var h=0;u.forEach(function(t){h+=t.realWidth||t.width}),this.fixedWidth=h}var d=this.store.states.rightFixedColumns;if(d.length>0){var p=0;d.forEach(function(t){p+=t.realWidth||t.width}),this.rightFixedWidth=p}this.notifyObservers("columns")}},t.prototype.addObserver=function(t){this.observers.push(t)},t.prototype.removeObserver=function(t){var e=this.observers.indexOf(t);-1!==e&&this.observers.splice(e,1)},t.prototype.notifyObservers=function(t){var e=this,n=this.observers;n.forEach(function(n){switch(t){case"columns":n.onColumnsChange(e);break;case"scrollable":n.onScrollableChange(e);break;default:throw new Error("Table Layout don't have event "+t+".")}})},t}(),xr=br,wr={created:function(){this.tableLayout.addObserver(this)},destroyed:function(){this.tableLayout.removeObserver(this)},computed:{tableLayout:function(){var t=this.layout;if(!t&&this.table&&(t=this.table.layout),!t)throw new Error("Can not find table layout.");return t}},mounted:function(){this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout)},updated:function(){this.__updated__||(this.onColumnsChange(this.tableLayout),this.onScrollableChange(this.tableLayout),this.__updated__=!0)},methods:{onColumnsChange:function(t){var e=this.$el.querySelectorAll("colgroup > col");if(e.length){var n=t.getFlattenColumns(),i={};n.forEach(function(t){i[t.id]=t});for(var r=0,o=e.length;r<o;r++){var a=e[r],s=a.getAttribute("name"),l=i[s];l&&a.setAttribute("width",l.realWidth||l.width)}}},onScrollableChange:function(t){for(var e=this.$el.querySelectorAll("colgroup > col[name=gutter]"),n=0,i=e.length;n<i;n++){var r=e[n];r.setAttribute("width",t.scrollY?t.gutterWidth:"0")}for(var o=this.$el.querySelectorAll("th.gutter"),a=0,s=o.length;a<s;a++){var l=o[a];l.style.width=t.scrollY?t.gutterWidth+"px":"0",l.style.display=t.scrollY?"":"none"}}}},_r="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Er={name:"ElTableBody",mixins:[wr],components:{ElCheckbox:Di.a,ElTooltip:re.a},props:{store:{required:!0},stripe:Boolean,context:{},rowClassName:[String,Function],rowStyle:[Object,Function],fixed:String,highlight:Boolean},render:function(t){var e=this,n=this.data||[];return t("table",{class:"el-table__body",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t("colgroup",[this.columns.map(function(e){return t("col",{attrs:{name:e.id},key:e.id})})]),t("tbody",[n.reduce(function(t,n){return t.concat(e.wrappedRowRender(n,t.length))},[]),t("el-tooltip",{attrs:{effect:this.table.tooltipEffect,placement:"top",content:this.tooltipContent},ref:"tooltip"})])])},computed:Mr({table:function(){return this.$parent}},mr({data:"data",columns:"columns",treeIndent:"indent",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(t){return t.columns.length},leftFixedCount:function(t){return t.fixedColumns.length},rightFixedCount:function(t){return t.rightFixedColumns.length},hasExpandColumn:function(t){return t.columns.some(function(t){var e=t.type;return"expand"===e})}}),{firstDefaultColumnIndex:function(){return Object(y["arrayFindIndex"])(this.columns,function(t){var e=t.type;return"default"===e})}}),watch:{"store.states.hoverRow":function(t,e){var n=this;if(this.store.states.isComplex&&!this.$isServer){var i=window.requestAnimationFrame;i||(i=function(t){return setTimeout(t,16)}),i(function(){var i=n.$el.querySelectorAll(".el-table__row"),r=i[e],o=i[t];r&&Object(Bt["removeClass"])(r,"hover-row"),o&&Object(Bt["addClass"])(o,"hover-row")})}}},data:function(){return{tooltipContent:""}},created:function(){this.activateTooltip=z()(50,function(t){return t.handleShowPopper()})},methods:{getKeyOfRow:function(t,e){var n=this.table.rowKey;return n?Zi(t,n):e},isColumnHidden:function(t){return!0===this.fixed||"left"===this.fixed?t>=this.leftFixedLeafCount:"right"===this.fixed?t<this.columnsCount-this.rightFixedLeafCount:t<this.leftFixedLeafCount||t>=this.columnsCount-this.rightFixedLeafCount},getSpan:function(t,e,n,i){var r=1,o=1,a=this.table.spanMethod;if("function"===typeof a){var s=a({row:t,column:e,rowIndex:n,columnIndex:i});Array.isArray(s)?(r=s[0],o=s[1]):"object"===("undefined"===typeof s?"undefined":_r(s))&&(r=s.rowspan,o=s.colspan)}return{rowspan:r,colspan:o}},getRowStyle:function(t,e){var n=this.table.rowStyle;return"function"===typeof n?n.call(null,{row:t,rowIndex:e}):n||null},getRowClass:function(t,e){var n=["el-table__row"];this.table.highlightCurrentRow&&t===this.store.states.currentRow&&n.push("current-row"),this.stripe&&e%2===1&&n.push("el-table__row--striped");var i=this.table.rowClassName;return"string"===typeof i?n.push(i):"function"===typeof i&&n.push(i.call(null,{row:t,rowIndex:e})),this.store.states.expandRows.indexOf(t)>-1&&n.push("expanded"),n},getCellStyle:function(t,e,n,i){var r=this.table.cellStyle;return"function"===typeof r?r.call(null,{rowIndex:t,columnIndex:e,row:n,column:i}):r},getCellClass:function(t,e,n,i){var r=[i.id,i.align,i.className];this.isColumnHidden(e)&&r.push("is-hidden");var o=this.table.cellClassName;return"string"===typeof o?r.push(o):"function"===typeof o&&r.push(o.call(null,{rowIndex:t,columnIndex:e,row:n,column:i})),r.join(" ")},getColspanRealWidth:function(t,e,n){if(e<1)return t[n].realWidth;var i=t.map(function(t){var e=t.realWidth;return e}).slice(n,n+e);return i.reduce(function(t,e){return t+e},-1)},handleCellMouseEnter:function(t,e){var n=this.table,i=Gi(t);if(i){var r=Xi(n,i),o=n.hoverState={cell:i,column:r,row:e};n.$emit("cell-mouse-enter",o.row,o.column,o.cell,t)}var a=t.target.querySelector(".cell");if(Object(Bt["hasClass"])(a,"el-tooltip")&&a.childNodes.length){var s=document.createRange();s.setStart(a,0),s.setEnd(a,a.childNodes.length);var l=s.getBoundingClientRect().width,c=(parseInt(Object(Bt["getStyle"])(a,"paddingLeft"),10)||0)+(parseInt(Object(Bt["getStyle"])(a,"paddingRight"),10)||0);if((l+c>a.offsetWidth||a.scrollWidth>a.offsetWidth)&&this.$refs.tooltip){var u=this.$refs.tooltip;this.tooltipContent=i.innerText||i.textContent,u.referenceElm=i,u.$refs.popper&&(u.$refs.popper.style.display="none"),u.doDestroy(),u.setExpectedState(!0),this.activateTooltip(u)}}},handleCellMouseLeave:function(t){var e=this.$refs.tooltip;e&&(e.setExpectedState(!1),e.handleClosePopper());var n=Gi(t);if(n){var i=this.table.hoverState||{};this.table.$emit("cell-mouse-leave",i.row,i.column,i.cell,t)}},handleMouseEnter:z()(30,function(t){this.store.commit("setHoverRow",t)}),handleMouseLeave:z()(30,function(){this.store.commit("setHoverRow",null)}),handleContextMenu:function(t,e){this.handleEvent(t,e,"contextmenu")},handleDoubleClick:function(t,e){this.handleEvent(t,e,"dblclick")},handleClick:function(t,e){this.store.commit("setCurrentRow",e),this.handleEvent(t,e,"click")},handleEvent:function(t,e,n){var i=this.table,r=Gi(t),o=void 0;r&&(o=Xi(i,r),o&&i.$emit("cell-"+n,e,o,r,t)),i.$emit("row-"+n,e,o,t)},rowRender:function(t,e,n){var i=this,r=this.$createElement,o=this.treeIndent,a=this.columns,s=this.firstDefaultColumnIndex,l=a.map(function(t,e){return i.isColumnHidden(e)}),c=this.getRowClass(t,e),u=!0;n&&(c.push("el-table__row--level-"+n.level),u=n.display);var h=u?null:{display:"none"};return r("tr",{style:[h,this.getRowStyle(t,e)],class:c,key:this.getKeyOfRow(t,e),on:{dblclick:function(e){return i.handleDoubleClick(e,t)},click:function(e){return i.handleClick(e,t)},contextmenu:function(e){return i.handleContextMenu(e,t)},mouseenter:function(t){return i.handleMouseEnter(e)},mouseleave:this.handleMouseLeave}},[a.map(function(c,u){var h=i.getSpan(t,c,e,u),d=h.rowspan,p=h.colspan;if(!d||!p)return null;var f=Mr({},c);f.realWidth=i.getColspanRealWidth(a,p,u);var m={store:i.store,_self:i.context||i.table.$vnode.context,column:f,row:t,$index:e};return u===s&&n&&(m.treeNode={indent:n.level*o,level:n.level},"boolean"===typeof n.expanded&&(m.treeNode.expanded=n.expanded,"loading"in n&&(m.treeNode.loading=n.loading),"noLazyChildren"in n&&(m.treeNode.noLazyChildren=n.noLazyChildren))),r("td",{style:i.getCellStyle(e,u,t,c),class:i.getCellClass(e,u,t,c),attrs:{rowspan:d,colspan:p},on:{mouseenter:function(e){return i.handleCellMouseEnter(e,t)},mouseleave:i.handleCellMouseLeave}},[c.renderCell.call(i._renderProxy,i.$createElement,m,l[u])])})])},wrappedRowRender:function(t,e){var n=this,i=this.$createElement,r=this.store,o=r.isRowExpanded,a=r.assertRowKey,s=r.states,l=s.treeData,c=s.lazyTreeNodeMap,u=s.childrenColumnName,h=s.rowKey;if(this.hasExpandColumn&&o(t)){var d=this.table.renderExpanded,p=this.rowRender(t,e);return d?[[p,i("tr",{key:"expanded-row__"+p.key},[i("td",{attrs:{colspan:this.columnsCount},class:"el-table__expanded-cell"},[d(this.$createElement,{row:t,$index:e,store:this.store})])])]]:(console.error("[Element Error]renderExpanded is required."),p)}if(Object.keys(l).length){a();var f=Zi(t,h),m=l[f],v=null;m&&(v={expanded:m.expanded,level:m.level,display:!0},"boolean"===typeof m.lazy&&("boolean"===typeof m.loaded&&m.loaded&&(v.noLazyChildren=!(m.children&&m.children.length)),v.loading=m.loading));var g=[this.rowRender(t,e,v)];if(m){var y=0,b=function t(i,r){i&&i.length&&r&&i.forEach(function(i){var o={display:r.display&&r.expanded,level:r.level+1},a=Zi(i,h);if(void 0===a||null===a)throw new Error("for nested data item, row-key is required.");if(m=Mr({},l[a]),m&&(o.expanded=m.expanded,m.level=m.level||o.level,m.display=!(!m.expanded||!o.display),"boolean"===typeof m.lazy&&("boolean"===typeof m.loaded&&m.loaded&&(o.noLazyChildren=!(m.children&&m.children.length)),o.loading=m.loading)),y++,g.push(n.rowRender(i,e+y,o)),m){var s=c[a]||i[u];t(s,m)}})};m.display=!0;var x=c[f]||t[u];b(x,m)}return g}return this.rowRender(t,e)}}},Sr=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"}},[t.multiple?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("div",{staticClass:"el-table-filter__content"},[n("el-scrollbar",{attrs:{"wrap-class":"el-table-filter__wrap"}},[n("el-checkbox-group",{staticClass:"el-table-filter__checkbox-group",model:{value:t.filteredValue,callback:function(e){t.filteredValue=e},expression:"filteredValue"}},t._l(t.filters,function(e){return n("el-checkbox",{key:e.value,attrs:{label:e.value}},[t._v(t._s(e.text))])}),1)],1)],1),n("div",{staticClass:"el-table-filter__bottom"},[n("button",{class:{"is-disabled":0===t.filteredValue.length},attrs:{disabled:0===t.filteredValue.length},on:{click:t.handleConfirm}},[t._v(t._s(t.t("el.table.confirmFilter")))]),n("button",{on:{click:t.handleReset}},[t._v(t._s(t.t("el.table.resetFilter")))])])]):n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleOutsideClick,expression:"handleOutsideClick"},{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-table-filter"},[n("ul",{staticClass:"el-table-filter__list"},[n("li",{staticClass:"el-table-filter__list-item",class:{"is-active":void 0===t.filterValue||null===t.filterValue},on:{click:function(e){t.handleSelect(null)}}},[t._v(t._s(t.t("el.table.clearFilter")))]),t._l(t.filters,function(e){return n("li",{key:e.value,staticClass:"el-table-filter__list-item",class:{"is-active":t.isActive(e)},attrs:{label:e.value},on:{click:function(n){t.handleSelect(e.value)}}},[t._v(t._s(e.text))])})],2)])])},Tr=[];Sr._withStripped=!0;var Ar=[];!Ui.a.prototype.$isServer&&document.addEventListener("click",function(t){Ar.forEach(function(e){var n=t.target;e&&e.$el&&(n===e.$el||e.$el.contains(n)||e.handleOutsideClick&&e.handleOutsideClick(t))})});var Cr={open:function(t){t&&Ar.push(t)},close:function(t){var e=Ar.indexOf(t);-1!==e&&Ar.splice(t,1)}},Lr=n(31),Pr=n.n(Lr),Or={name:"ElTableFilterPanel",mixins:[V.a,g.a],directives:{Clickoutside:F.a},components:{ElCheckbox:Di.a,ElCheckboxGroup:Pr.a,ElScrollbar:W.a},props:{placement:{type:String,default:"bottom-end"}},methods:{isActive:function(t){return t.value===this.filterValue},handleOutsideClick:function(){var t=this;setTimeout(function(){t.showPopper=!1},16)},handleConfirm:function(){this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleReset:function(){this.filteredValue=[],this.confirmFilter(this.filteredValue),this.handleOutsideClick()},handleSelect:function(t){this.filterValue=t,"undefined"!==typeof t&&null!==t?this.confirmFilter(this.filteredValue):this.confirmFilter([]),this.handleOutsideClick()},confirmFilter:function(t){this.table.store.commit("filterChange",{column:this.column,values:t}),this.table.store.updateAllSelected()}},data:function(){return{table:null,cell:null,column:null}},computed:{filters:function(){return this.column&&this.column.filters},filterValue:{get:function(){return(this.column.filteredValue||[])[0]},set:function(t){this.filteredValue&&("undefined"!==typeof t&&null!==t?this.filteredValue.splice(0,1,t):this.filteredValue.splice(0,1))}},filteredValue:{get:function(){return this.column&&this.column.filteredValue||[]},set:function(t){this.column&&(this.column.filteredValue=t)}},multiple:function(){return!this.column||this.column.filterMultiple}},mounted:function(){var t=this;this.popperElm=this.$el,this.referenceElm=this.cell,this.table.bodyWrapper.addEventListener("scroll",function(){t.updatePopper()}),this.$watch("showPopper",function(e){t.column&&(t.column.filterOpened=e),e?Cr.open(t):Cr.close(t)})},watch:{showPopper:function(t){!0===t&&parseInt(this.popperJS._popper.style.zIndex,10)<M["PopupManager"].zIndex&&(this.popperJS._popper.style.zIndex=M["PopupManager"].nextZIndex())}}},Rr=Or,kr=s(Rr,Sr,Tr,!1,null,null,null);kr.options.__file="packages/table/src/filter-panel.vue";var Dr=kr.exports,Ir=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nr=function t(e){var n=[];return e.forEach(function(e){e.children?(n.push(e),n.push.apply(n,t(e.children))):n.push(e)}),n},zr=function(t){var e=1,n=function t(n,i){if(i&&(n.level=i.level+1,e<n.level&&(e=n.level)),n.children){var r=0;n.children.forEach(function(e){t(e,n),r+=e.colSpan}),n.colSpan=r}else n.colSpan=1};t.forEach(function(t){t.level=1,n(t)});for(var i=[],r=0;r<e;r++)i.push([]);var o=Nr(t);return o.forEach(function(t){t.children?t.rowSpan=1:t.rowSpan=e-t.level+1,i[t.level-1].push(t)}),i},Br={name:"ElTableHeader",mixins:[wr],render:function(t){var e=this,n=this.store.states.originColumns,i=zr(n,this.columns),r=i.length>1;return r&&(this.$parent.isGroup=!0),t("table",{class:"el-table__header",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t("colgroup",[this.columns.map(function(e){return t("col",{attrs:{name:e.id},key:e.id})}),this.hasGutter?t("col",{attrs:{name:"gutter"}}):""]),t("thead",{class:[{"is-group":r,"has-gutter":this.hasGutter}]},[this._l(i,function(n,i){return t("tr",{style:e.getHeaderRowStyle(i),class:e.getHeaderRowClass(i)},[n.map(function(r,o){return t("th",{attrs:{colspan:r.colSpan,rowspan:r.rowSpan},on:{mousemove:function(t){return e.handleMouseMove(t,r)},mouseout:e.handleMouseOut,mousedown:function(t){return e.handleMouseDown(t,r)},click:function(t){return e.handleHeaderClick(t,r)},contextmenu:function(t){return e.handleHeaderContextMenu(t,r)}},style:e.getHeaderCellStyle(i,o,n,r),class:e.getHeaderCellClass(i,o,n,r),key:r.id},[t("div",{class:["cell",r.filteredValue&&r.filteredValue.length>0?"highlight":"",r.labelClassName]},[r.renderHeader?r.renderHeader.call(e._renderProxy,t,{column:r,$index:o,store:e.store,_self:e.$parent.$vnode.context}):r.label,r.sortable?t("span",{class:"caret-wrapper",on:{click:function(t){return e.handleSortClick(t,r)}}},[t("i",{class:"sort-caret ascending",on:{click:function(t){return e.handleSortClick(t,r,"ascending")}}}),t("i",{class:"sort-caret descending",on:{click:function(t){return e.handleSortClick(t,r,"descending")}}})]):"",r.filterable?t("span",{class:"el-table__column-filter-trigger",on:{click:function(t){return e.handleFilterClick(t,r)}}},[t("i",{class:["el-icon-arrow-down",r.filterOpened?"el-icon-arrow-up":""]})]):""])])}),e.hasGutter?t("th",{class:"gutter"}):""])})])])},props:{fixed:String,store:{required:!0},border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},components:{ElCheckbox:Di.a},computed:Ir({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},mr({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(t){return t.columns.length},leftFixedCount:function(t){return t.fixedColumns.length},rightFixedCount:function(t){return t.rightFixedColumns.length}})),created:function(){this.filterPanels={}},mounted:function(){var t=this;this.$nextTick(function(){var e=t.defaultSort,n=e.prop,i=e.order,r=!0;t.store.commit("sort",{prop:n,order:i,init:r})})},beforeDestroy:function(){var t=this.filterPanels;for(var e in t)t.hasOwnProperty(e)&&t[e]&&t[e].$destroy(!0)},methods:{isCellHidden:function(t,e){for(var n=0,i=0;i<t;i++)n+=e[i].colSpan;var r=n+e[t].colSpan-1;return!0===this.fixed||"left"===this.fixed?r>=this.leftFixedLeafCount:"right"===this.fixed?n<this.columnsCount-this.rightFixedLeafCount:r<this.leftFixedLeafCount||n>=this.columnsCount-this.rightFixedLeafCount},getHeaderRowStyle:function(t){var e=this.table.headerRowStyle;return"function"===typeof e?e.call(null,{rowIndex:t}):e},getHeaderRowClass:function(t){var e=[],n=this.table.headerRowClassName;return"string"===typeof n?e.push(n):"function"===typeof n&&e.push(n.call(null,{rowIndex:t})),e.join(" ")},getHeaderCellStyle:function(t,e,n,i){var r=this.table.headerCellStyle;return"function"===typeof r?r.call(null,{rowIndex:t,columnIndex:e,row:n,column:i}):r},getHeaderCellClass:function(t,e,n,i){var r=[i.id,i.order,i.headerAlign,i.className,i.labelClassName];0===t&&this.isCellHidden(e,n)&&r.push("is-hidden"),i.children||r.push("is-leaf"),i.sortable&&r.push("is-sortable");var o=this.table.headerCellClassName;return"string"===typeof o?r.push(o):"function"===typeof o&&r.push(o.call(null,{rowIndex:t,columnIndex:e,row:n,column:i})),r.join(" ")},toggleAllSelection:function(t){t.stopPropagation(),this.store.commit("toggleAllSelection")},handleFilterClick:function(t,e){t.stopPropagation();var n=t.target,i="TH"===n.tagName?n:n.parentNode;if(!Object(Bt["hasClass"])(i,"noclick")){i=i.querySelector(".el-table__column-filter-trigger")||i;var r=this.$parent,o=this.filterPanels[e.id];o&&e.filterOpened?o.showPopper=!1:(o||(o=new Ui.a(Dr),this.filterPanels[e.id]=o,e.filterPlacement&&(o.placement=e.filterPlacement),o.table=r,o.cell=i,o.column=e,!this.$isServer&&o.$mount(document.createElement("div"))),setTimeout(function(){o.showPopper=!0},16))}},handleHeaderClick:function(t,e){!e.filters&&e.sortable?this.handleSortClick(t,e):e.filterable&&!e.sortable&&this.handleFilterClick(t,e),this.$parent.$emit("header-click",e,t)},handleHeaderContextMenu:function(t,e){this.$parent.$emit("header-contextmenu",e,t)},handleMouseDown:function(t,e){var n=this;if(!this.$isServer&&!(e.children&&e.children.length>0)&&this.draggingColumn&&this.border){this.dragging=!0,this.$parent.resizeProxyVisible=!0;var i=this.$parent,r=i.$el,o=r.getBoundingClientRect().left,a=this.$el.querySelector("th."+e.id),s=a.getBoundingClientRect(),l=s.left-o+30;Object(Bt["addClass"])(a,"noclick"),this.dragState={startMouseLeft:t.clientX,startLeft:s.right-o,startColumnLeft:s.left-o,tableLeft:o};var c=i.$refs.resizeProxy;c.style.left=this.dragState.startLeft+"px",document.onselectstart=function(){return!1},document.ondragstart=function(){return!1};var u=function(t){var e=t.clientX-n.dragState.startMouseLeft,i=n.dragState.startLeft+e;c.style.left=Math.max(l,i)+"px"},h=function r(){if(n.dragging){var o=n.dragState,s=o.startColumnLeft,l=o.startLeft,h=parseInt(c.style.left,10),d=h-s;e.width=e.realWidth=d,i.$emit("header-dragend",e.width,l-s,e,t),n.store.scheduleLayout(),document.body.style.cursor="",n.dragging=!1,n.draggingColumn=null,n.dragState={},i.resizeProxyVisible=!1}document.removeEventListener("mousemove",u),document.removeEventListener("mouseup",r),document.onselectstart=null,document.ondragstart=null,setTimeout(function(){Object(Bt["removeClass"])(a,"noclick")},0)};document.addEventListener("mousemove",u),document.addEventListener("mouseup",h)}},handleMouseMove:function(t,e){if(!(e.children&&e.children.length>0)){var n=t.target;while(n&&"TH"!==n.tagName)n=n.parentNode;if(e&&e.resizable&&!this.dragging&&this.border){var i=n.getBoundingClientRect(),r=document.body.style;i.width>12&&i.right-t.pageX<8?(r.cursor="col-resize",Object(Bt["hasClass"])(n,"is-sortable")&&(n.style.cursor="col-resize"),this.draggingColumn=e):this.dragging||(r.cursor="",Object(Bt["hasClass"])(n,"is-sortable")&&(n.style.cursor="pointer"),this.draggingColumn=null)}}},handleMouseOut:function(){this.$isServer||(document.body.style.cursor="")},toggleOrder:function(t){var e=t.order,n=t.sortOrders;if(""===e)return n[0];var i=n.indexOf(e||null);return n[i>n.length-2?0:i+1]},handleSortClick:function(t,e,n){t.stopPropagation();var i=e.order===n?null:n||this.toggleOrder(e),r=t.target;while(r&&"TH"!==r.tagName)r=r.parentNode;if(r&&"TH"===r.tagName&&Object(Bt["hasClass"])(r,"noclick"))Object(Bt["removeClass"])(r,"noclick");else if(e.sortable){var o=this.store.states,a=o.sortProp,s=void 0,l=o.sortingColumn;(l!==e||l===e&&null===l.order)&&(l&&(l.order=null),o.sortingColumn=e,a=e.property),s=e.order=i||null,o.sortProp=a,o.sortOrder=s,this.store.commit("changeSortCondition")}}},data:function(){return{draggingColumn:null,dragging:!1,dragState:{}}}},Fr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jr={name:"ElTableFooter",mixins:[wr],render:function(t){var e=this,n=[];return this.summaryMethod?n=this.summaryMethod({columns:this.columns,data:this.store.states.data}):this.columns.forEach(function(t,i){if(0!==i){var r=e.store.states.data.map(function(e){return Number(e[t.property])}),o=[],a=!0;r.forEach(function(t){if(!isNaN(t)){a=!1;var e=(""+t).split(".")[1];o.push(e?e.length:0)}});var s=Math.max.apply(null,o);n[i]=a?"":r.reduce(function(t,e){var n=Number(e);return isNaN(n)?t:parseFloat((t+e).toFixed(Math.min(s,20)))},0)}else n[i]=e.sumText}),t("table",{class:"el-table__footer",attrs:{cellspacing:"0",cellpadding:"0",border:"0"}},[t("colgroup",[this.columns.map(function(e){return t("col",{attrs:{name:e.id},key:e.id})}),this.hasGutter?t("col",{attrs:{name:"gutter"}}):""]),t("tbody",{class:[{"has-gutter":this.hasGutter}]},[t("tr",[this.columns.map(function(i,r){return t("td",{key:r,attrs:{colspan:i.colSpan,rowspan:i.rowSpan},class:e.getRowClasses(i,r)},[t("div",{class:["cell",i.labelClassName]},[n[r]])])}),this.hasGutter?t("th",{class:"gutter"}):""])])])},props:{fixed:String,store:{required:!0},summaryMethod:Function,sumText:String,border:Boolean,defaultSort:{type:Object,default:function(){return{prop:"",order:""}}}},computed:Fr({table:function(){return this.$parent},hasGutter:function(){return!this.fixed&&this.tableLayout.gutterWidth}},mr({columns:"columns",isAllSelected:"isAllSelected",leftFixedLeafCount:"fixedLeafColumnsLength",rightFixedLeafCount:"rightFixedLeafColumnsLength",columnsCount:function(t){return t.columns.length},leftFixedCount:function(t){return t.fixedColumns.length},rightFixedCount:function(t){return t.rightFixedColumns.length}})),methods:{isCellHidden:function(t,e,n){if(!0===this.fixed||"left"===this.fixed)return t>=this.leftFixedLeafCount;if("right"===this.fixed){for(var i=0,r=0;r<t;r++)i+=e[r].colSpan;return i<this.columnsCount-this.rightFixedLeafCount}return!(this.fixed||!n.fixed)||(t<this.leftFixedCount||t>=this.columnsCount-this.rightFixedCount)},getRowClasses:function(t,e){var n=[t.id,t.align,t.labelClassName];return t.className&&n.push(t.className),this.isCellHidden(e,this.columns,t)&&n.push("is-hidden"),t.children||n.push("is-leaf"),n}}},Hr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ur=1,Vr={name:"ElTable",mixins:[g.a,T.a],directives:{Mousewheel:ji},props:{data:{type:Array,default:function(){return[]}},size:String,width:[String,Number],height:[String,Number],maxHeight:[String,Number],fit:{type:Boolean,default:!0},stripe:Boolean,border:Boolean,rowKey:[String,Function],context:{},showHeader:{type:Boolean,default:!0},showSummary:Boolean,sumText:String,summaryMethod:Function,rowClassName:[String,Function],rowStyle:[Object,Function],cellClassName:[String,Function],cellStyle:[Object,Function],headerRowClassName:[String,Function],headerRowStyle:[Object,Function],headerCellClassName:[String,Function],headerCellStyle:[Object,Function],highlightCurrentRow:Boolean,currentRowKey:[String,Number],emptyText:String,expandRowKeys:Array,defaultExpandAll:Boolean,defaultSort:Object,tooltipEffect:String,spanMethod:Function,selectOnIndeterminate:{type:Boolean,default:!0},indent:{type:Number,default:16},treeProps:{type:Object,default:function(){return{hasChildren:"hasChildren",children:"children"}}},lazy:Boolean,load:Function},components:{TableHeader:Br,TableFooter:jr,TableBody:Er,ElCheckbox:Di.a},methods:{getMigratingConfig:function(){return{events:{expand:"expand is renamed to expand-change"}}},setCurrentRow:function(t){this.store.commit("setCurrentRow",t)},toggleRowSelection:function(t,e){this.store.toggleRowSelection(t,e,!1),this.store.updateAllSelected()},toggleRowExpansion:function(t,e){this.store.toggleRowExpansionAdapter(t,e)},clearSelection:function(){this.store.clearSelection()},clearFilter:function(t){this.store.clearFilter(t)},clearSort:function(){this.store.clearSort()},handleMouseLeave:function(){this.store.commit("setHoverRow",null),this.hoverState&&(this.hoverState=null)},updateScrollY:function(){var t=this.layout.updateScrollY();t&&(this.layout.notifyObservers("scrollable"),this.layout.updateColumnsWidth())},handleFixedMousewheel:function(t,e){var n=this.bodyWrapper;if(Math.abs(e.spinY)>0){var i=n.scrollTop;e.pixelY<0&&0!==i&&t.preventDefault(),e.pixelY>0&&n.scrollHeight-n.clientHeight>i&&t.preventDefault(),n.scrollTop+=Math.ceil(e.pixelY/5)}else n.scrollLeft+=Math.ceil(e.pixelX/5)},handleHeaderFooterMousewheel:function(t,e){var n=e.pixelX,i=e.pixelY;Math.abs(n)>=Math.abs(i)&&(this.bodyWrapper.scrollLeft+=e.pixelX/5)},syncPostion:Object(Ii["throttle"])(20,function(){var t=this.bodyWrapper,e=t.scrollLeft,n=t.scrollTop,i=t.offsetWidth,r=t.scrollWidth,o=this.$refs,a=o.headerWrapper,s=o.footerWrapper,l=o.fixedBodyWrapper,c=o.rightFixedBodyWrapper;a&&(a.scrollLeft=e),s&&(s.scrollLeft=e),l&&(l.scrollTop=n),c&&(c.scrollTop=n);var u=r-i-1;this.scrollPosition=e>=u?"right":0===e?"left":"middle"}),bindEvents:function(){this.bodyWrapper.addEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(ti["addResizeListener"])(this.$el,this.resizeListener)},unbindEvents:function(){this.bodyWrapper.removeEventListener("scroll",this.syncPostion,{passive:!0}),this.fit&&Object(ti["removeResizeListener"])(this.$el,this.resizeListener)},resizeListener:function(){if(this.$ready){var t=!1,e=this.$el,n=this.resizeState,i=n.width,r=n.height,o=e.offsetWidth;i!==o&&(t=!0);var a=e.offsetHeight;(this.height||this.shouldUpdateHeight)&&r!==a&&(t=!0),t&&(this.resizeState.width=o,this.resizeState.height=a,this.doLayout())}},doLayout:function(){this.shouldUpdateHeight&&this.layout.updateElsHeight(),this.layout.updateColumnsWidth()},sort:function(t,e){this.store.commit("sort",{prop:t,order:e})},toggleAllSelection:function(){this.store.commit("toggleAllSelection")}},computed:Hr({tableSize:function(){return this.size||(this.$ELEMENT||{}).size},bodyWrapper:function(){return this.$refs.bodyWrapper},shouldUpdateHeight:function(){return this.height||this.maxHeight||this.fixedColumns.length>0||this.rightFixedColumns.length>0},bodyWidth:function(){var t=this.layout,e=t.bodyWidth,n=t.scrollY,i=t.gutterWidth;return e?e-(n?i:0)+"px":""},bodyHeight:function(){var t=this.layout,e=t.headerHeight,n=void 0===e?0:e,i=t.bodyHeight,r=t.footerHeight,o=void 0===r?0:r;if(this.height)return{height:i?i+"px":""};if(this.maxHeight){var a=nr(this.maxHeight);if("number"===typeof a)return{"max-height":a-o-(this.showHeader?n:0)+"px"}}return{}},fixedBodyHeight:function(){if(this.height)return{height:this.layout.fixedBodyHeight?this.layout.fixedBodyHeight+"px":""};if(this.maxHeight){var t=nr(this.maxHeight);if("number"===typeof t)return t=this.layout.scrollX?t-this.layout.gutterWidth:t,this.showHeader&&(t-=this.layout.headerHeight),t-=this.layout.footerHeight,{"max-height":t+"px"}}return{}},fixedHeight:function(){return this.maxHeight?this.showSummary?{bottom:0}:{bottom:this.layout.scrollX&&this.data.length?this.layout.gutterWidth+"px":""}:this.showSummary?{height:this.layout.tableHeight?this.layout.tableHeight+"px":""}:{height:this.layout.viewportHeight?this.layout.viewportHeight+"px":""}},emptyBlockStyle:function(){if(this.data&&this.data.length)return null;var t="100%";return this.layout.appendHeight&&(t="calc(100% - "+this.layout.appendHeight+"px)"),{width:this.bodyWidth,height:t}}},mr({selection:"selection",columns:"columns",tableData:"data",fixedColumns:"fixedColumns",rightFixedColumns:"rightFixedColumns"})),watch:{height:{immediate:!0,handler:function(t){this.layout.setHeight(t)}},maxHeight:{immediate:!0,handler:function(t){this.layout.setMaxHeight(t)}},currentRowKey:{immediate:!0,handler:function(t){this.rowKey&&this.store.setCurrentRowKey(t)}},data:{immediate:!0,handler:function(t){this.store.commit("setData",t)}},expandRowKeys:{immediate:!0,handler:function(t){t&&this.store.setExpandRowKeysAdapter(t)}}},created:function(){var t=this;this.tableId="el-table_"+Ur++,this.debouncedUpdateLayout=Object(Ii["debounce"])(50,function(){return t.doLayout()})},mounted:function(){var t=this;this.bindEvents(),this.store.updateColumns(),this.doLayout(),this.resizeState={width:this.$el.offsetWidth,height:this.$el.offsetHeight},this.store.states.columns.forEach(function(e){e.filteredValue&&e.filteredValue.length&&t.store.commit("filterChange",{column:e,values:e.filteredValue,silent:!0})}),this.$ready=!0},destroyed:function(){this.unbindEvents()},data:function(){var t=this.treeProps,e=t.hasChildren,n=void 0===e?"hasChildren":e,i=t.children,r=void 0===i?"children":i;this.store=fr(this,{rowKey:this.rowKey,defaultExpandAll:this.defaultExpandAll,selectOnIndeterminate:this.selectOnIndeterminate,indent:this.indent,lazy:this.lazy,lazyColumnIdentifier:n,childrenColumnName:r});var o=new xr({store:this.store,table:this,fit:this.fit,showHeader:this.showHeader});return{layout:o,isHidden:!1,renderExpanded:null,resizeProxyVisible:!1,resizeState:{width:null,height:null},isGroup:!1,scrollPosition:"left"}}},Gr=Vr,Wr=s(Gr,Oi,Ri,!1,null,null,null);Wr.options.__file="packages/table/src/table.vue";var $r=Wr.exports;$r.install=function(t){t.component($r.name,$r)};var qr=$r,Yr={default:{order:""},selection:{width:48,minWidth:48,realWidth:48,order:"",className:"el-table-column--selection"},expand:{width:48,minWidth:48,realWidth:48,order:""},index:{width:48,minWidth:48,realWidth:48,order:""}},Xr={selection:{renderHeader:function(t,e){var n=e.store;return t("el-checkbox",{attrs:{disabled:n.states.data&&0===n.states.data.length,indeterminate:n.states.selection.length>0&&!this.isAllSelected,value:this.isAllSelected},nativeOn:{click:this.toggleAllSelection}})},renderCell:function(t,e){var n=e.row,i=e.column,r=e.store,o=e.$index;return t("el-checkbox",{nativeOn:{click:function(t){return t.stopPropagation()}},attrs:{value:r.isSelected(n),disabled:!!i.selectable&&!i.selectable.call(null,n,o)},on:{input:function(){r.commit("rowSelectedChanged",n)}}})},sortable:!1,resizable:!1},index:{renderHeader:function(t,e){var n=e.column;return n.label||"#"},renderCell:function(t,e){var n=e.$index,i=e.column,r=n+1,o=i.index;return"number"===typeof o?r=n+o:"function"===typeof o&&(r=o(n)),t("div",[r])},sortable:!1},expand:{renderHeader:function(t,e){var n=e.column;return n.label||""},renderCell:function(t,e){var n=e.row,i=e.store,r=["el-table__expand-icon"];i.states.expandRows.indexOf(n)>-1&&r.push("el-table__expand-icon--expanded");var o=function(t){t.stopPropagation(),i.toggleRowExpansion(n)};return t("div",{class:r,on:{click:o}},[t("i",{class:"el-icon el-icon-arrow-right"})])},sortable:!1,resizable:!1,className:"el-table__expand-column"}};function Zr(t,e){var n=e.row,i=e.column,r=e.$index,o=i.property,a=o&&Object(y["getPropByPath"])(n,o).v;return i&&i.formatter?i.formatter(n,i,a,r):a}function Jr(t,e){var n=e.row,i=e.treeNode,r=e.store;if(!i)return null;var o=[],a=function(t){t.stopPropagation(),r.loadOrToggle(n)};if(i.indent&&o.push(t("span",{class:"el-table__indent",style:{"padding-left":i.indent+"px"}})),"boolean"!==typeof i.expanded||i.noLazyChildren)o.push(t("span",{class:"el-table__placeholder"}));else{var s=["el-table__expand-icon",i.expanded?"el-table__expand-icon--expanded":""],l=["el-icon-arrow-right"];i.loading&&(l=["el-icon-loading"]),o.push(t("div",{class:s,on:{click:a}},[t("i",{class:l})]))}return o}var Kr=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qr=1,to={name:"ElTableColumn",props:{type:{type:String,default:"default"},label:String,className:String,labelClassName:String,property:String,prop:String,width:{},minWidth:{},renderHeader:Function,sortable:{type:[Boolean,String],default:!1},sortMethod:Function,sortBy:[String,Function,Array],resizable:{type:Boolean,default:!0},columnKey:String,align:String,headerAlign:String,showTooltipWhenOverflow:Boolean,showOverflowTooltip:Boolean,fixed:[Boolean,String],formatter:Function,selectable:Function,reserveSelection:Boolean,filterMethod:Function,filteredValue:Array,filters:Array,filterPlacement:String,filterMultiple:{type:Boolean,default:!0},index:[Number,Function],sortOrders:{type:Array,default:function(){return["ascending","descending",null]},validator:function(t){return t.every(function(t){return["ascending","descending",null].indexOf(t)>-1})}}},data:function(){return{isSubColumn:!1,columns:[]}},computed:{owner:function(){var t=this.$parent;while(t&&!t.tableId)t=t.$parent;return t},columnOrTableParent:function(){var t=this.$parent;while(t&&!t.tableId&&!t.columnId)t=t.$parent;return t},realWidth:function(){return tr(this.width)},realMinWidth:function(){return er(this.minWidth)},realAlign:function(){return this.align?"is-"+this.align:null},realHeaderAlign:function(){return this.headerAlign?"is-"+this.headerAlign:this.realAlign}},methods:{getPropsData:function(){for(var t=this,e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.reduce(function(e,n){return Array.isArray(n)&&n.forEach(function(n){e[n]=t[n]}),e},{})},getColumnElIndex:function(t,e){return[].indexOf.call(t,e)},setColumnWidth:function(t){return this.realWidth&&(t.width=this.realWidth),this.realMinWidth&&(t.minWidth=this.realMinWidth),t.minWidth||(t.minWidth=80),t.realWidth=void 0===t.width?t.minWidth:t.width,t},setColumnForcedProps:function(t){var e=t.type,n=Xr[e]||{};return Object.keys(n).forEach(function(e){var i=n[e];void 0!==i&&(t[e]="className"===e?t[e]+" "+i:i)}),t},setColumnRenders:function(t){var e=this;this.$createElement;this.renderHeader?console.warn("[Element Warn][TableColumn]Comparing to render-header, scoped-slot header is easier to use. We recommend users to use scoped-slot header."):"selection"!==t.type&&(t.renderHeader=function(n,i){var r=e.$scopedSlots.header;return r?r(i):t.label});var n=t.renderCell;return"expand"===t.type?(t.renderCell=function(t,e){return t("div",{class:"cell"},[n(t,e)])},this.owner.renderExpanded=function(t,n){return e.$scopedSlots.default?e.$scopedSlots.default(n):e.$slots.default}):(n=n||Zr,t.renderCell=function(i,r){var o=null;o=e.$scopedSlots.default?e.$scopedSlots.default(r):n(i,r);var a=Jr(i,r),s={class:"cell",style:{}};return t.showOverflowTooltip&&(s.class+=" el-tooltip",s.style={width:(r.column.realWidth||r.column.width)-1+"px"}),i("div",s,[a,o])}),t},registerNormalWatchers:function(){var t=this,e=["label","property","filters","filterMultiple","sortable","index","formatter","className","labelClassName","showOverflowTooltip"],n={prop:"property",realAlign:"align",realHeaderAlign:"headerAlign",realWidth:"width"},i=e.reduce(function(t,e){return t[e]=e,t},n);Object.keys(i).forEach(function(e){var i=n[e];t.$watch(e,function(e){t.columnConfig[i]=e})})},registerComplexWatchers:function(){var t=this,e=["fixed"],n={realWidth:"width",realMinWidth:"minWidth"},i=e.reduce(function(t,e){return t[e]=e,t},n);Object.keys(i).forEach(function(e){var i=n[e];t.$watch(e,function(e){t.columnConfig[i]=e;var n="fixed"===i;t.owner.store.scheduleLayout(n)})})}},components:{ElCheckbox:Di.a},beforeCreate:function(){this.row={},this.column={},this.$index=0,this.columnId=""},created:function(){var t=this.columnOrTableParent;this.isSubColumn=this.owner!==t,this.columnId=(t.tableId||t.columnId)+"_column_"+Qr++;var e=this.type||"default",n=""===this.sortable||this.sortable,i=Kr({},Yr[e],{id:this.columnId,type:e,property:this.prop||this.property,align:this.realAlign,headerAlign:this.realHeaderAlign,showOverflowTooltip:this.showOverflowTooltip||this.showTooltipWhenOverflow,filterable:this.filters||this.filterMethod,filteredValue:[],filterPlacement:"",isColumnGroup:!1,filterOpened:!1,sortable:n,index:this.index}),r=["columnKey","label","className","labelClassName","type","renderHeader","formatter","fixed","resizable"],o=["sortMethod","sortBy","sortOrders"],a=["selectable","reserveSelection"],s=["filterMethod","filters","filterMultiple","filterOpened","filteredValue","filterPlacement"],l=this.getPropsData(r,o,a,s);l=Qi(i,l);var c=ir(this.setColumnRenders,this.setColumnWidth,this.setColumnForcedProps);l=c(l),this.columnConfig=l,this.registerNormalWatchers(),this.registerComplexWatchers()},mounted:function(){var t=this.owner,e=this.columnOrTableParent,n=this.isSubColumn?e.$el.children:e.$refs.hiddenColumns.children,i=this.getColumnElIndex(n,this.$el);t.store.commit("insertColumn",this.columnConfig,i,this.isSubColumn?e.columnConfig:null)},destroyed:function(){if(this.$parent){var t=this.$parent;this.owner.store.commit("removeColumn",this.columnConfig,this.isSubColumn?t.columnConfig:null)}},render:function(t){return t("div",this.$slots.default)},install:function(t){t.component(to.name,to)}},eo=to,no=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.ranged?n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor el-range-editor el-input__inner",class:["el-date-editor--"+t.type,t.pickerSize?"el-range-editor--"+t.pickerSize:"",t.pickerDisabled?"is-disabled":"",t.pickerVisible?"is-active":""],on:{click:t.handleRangeClick,mouseenter:t.handleMouseEnter,mouseleave:function(e){t.showClose=!1},keydown:t.handleKeydown}},[n("i",{class:["el-input__icon","el-range__icon",t.triggerClass]}),n("input",t._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:t.startPlaceholder,disabled:t.pickerDisabled,readonly:!t.editable||t.readonly,name:t.name&&t.name[0]},domProps:{value:t.displayValue&&t.displayValue[0]},on:{input:t.handleStartInput,change:t.handleStartChange,focus:t.handleFocus}},"input",t.firstInputId,!1)),t._t("range-separator",[n("span",{staticClass:"el-range-separator"},[t._v(t._s(t.rangeSeparator))])]),n("input",t._b({staticClass:"el-range-input",attrs:{autocomplete:"off",placeholder:t.endPlaceholder,disabled:t.pickerDisabled,readonly:!t.editable||t.readonly,name:t.name&&t.name[1]},domProps:{value:t.displayValue&&t.displayValue[1]},on:{input:t.handleEndInput,change:t.handleEndChange,focus:t.handleFocus}},"input",t.secondInputId,!1)),t.haveTrigger?n("i",{staticClass:"el-input__icon el-range__close-icon",class:[t.showClose?""+t.clearIcon:""],on:{click:t.handleClickIcon}}):t._e()],2):n("el-input",t._b({directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleClose,expression:"handleClose"}],ref:"reference",staticClass:"el-date-editor",class:"el-date-editor--"+t.type,attrs:{readonly:!t.editable||t.readonly||"dates"===t.type||"week"===t.type,disabled:t.pickerDisabled,size:t.pickerSize,name:t.name,placeholder:t.placeholder,value:t.displayValue,validateEvent:!1},on:{focus:t.handleFocus,input:function(e){return t.userInput=e},change:t.handleChange},nativeOn:{keydown:function(e){return t.handleKeydown(e)},mouseenter:function(e){return t.handleMouseEnter(e)},mouseleave:function(e){t.showClose=!1}}},"el-input",t.firstInputId,!1),[n("i",{staticClass:"el-input__icon",class:t.triggerClass,attrs:{slot:"prefix"},on:{click:t.handleFocus},slot:"prefix"}),t.haveTrigger?n("i",{staticClass:"el-input__icon",class:[t.showClose?""+t.clearIcon:""],attrs:{slot:"suffix"},on:{click:t.handleClickIcon},slot:"suffix"}):t._e()])},io=[];no._withStripped=!0;var ro=n(0),oo={props:{appendToBody:V.a.props.appendToBody,offset:V.a.props.offset,boundariesPadding:V.a.props.boundariesPadding,arrowOffset:V.a.props.arrowOffset},methods:V.a.methods,data:function(){return Se()({visibleArrow:!0},V.a.data)},beforeDestroy:V.a.beforeDestroy},ao={date:"yyyy-MM-dd",month:"yyyy-MM",datetime:"yyyy-MM-dd HH:mm:ss",time:"HH:mm:ss",week:"yyyywWW",timerange:"HH:mm:ss",daterange:"yyyy-MM-dd",monthrange:"yyyy-MM",datetimerange:"yyyy-MM-dd HH:mm:ss",year:"yyyy"},so=["date","datetime","time","time-select","week","month","year","daterange","monthrange","timerange","datetimerange","dates"],lo=function(t,e){return"timestamp"===e?t.getTime():Object(ro["formatDate"])(t,e)},co=function(t,e){return"timestamp"===e?new Date(Number(t)):Object(ro["parseDate"])(t,e)},uo=function(t,e){if(Array.isArray(t)&&2===t.length){var n=t[0],i=t[1];if(n&&i)return[lo(n,e),lo(i,e)]}return""},ho=function(t,e,n){if(Array.isArray(t)||(t=t.split(n)),2===t.length){var i=t[0],r=t[1];return[co(i,e),co(r,e)]}return[]},po={default:{formatter:function(t){return t?""+t:""},parser:function(t){return void 0===t||""===t?null:t}},week:{formatter:function(t,e){var n=Object(ro["getWeekNumber"])(t),i=t.getMonth(),r=new Date(t);1===n&&11===i&&(r.setHours(0,0,0,0),r.setDate(r.getDate()+3-(r.getDay()+6)%7));var o=Object(ro["formatDate"])(r,e);return o=/WW/.test(o)?o.replace(/WW/,n<10?"0"+n:n):o.replace(/W/,n),o},parser:function(t,e){return po.date.parser(t,e)}},date:{formatter:lo,parser:co},datetime:{formatter:lo,parser:co},daterange:{formatter:uo,parser:ho},monthrange:{formatter:uo,parser:ho},datetimerange:{formatter:uo,parser:ho},timerange:{formatter:uo,parser:ho},time:{formatter:lo,parser:co},month:{formatter:lo,parser:co},year:{formatter:lo,parser:co},number:{formatter:function(t){return t?""+t:""},parser:function(t){var e=Number(t);return isNaN(t)?null:e}},dates:{formatter:function(t,e){return t.map(function(t){return lo(t,e)})},parser:function(t,e){return("string"===typeof t?t.split(", "):t).map(function(t){return t instanceof Date?t:co(t,e)})}}},fo={left:"bottom-start",center:"bottom",right:"bottom-end"},mo=function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"-";if(!t)return null;var r=(po[n]||po["default"]).parser,o=e||ao[n];return r(t,o,i)},vo=function(t,e,n){if(!t)return null;var i=(po[n]||po["default"]).formatter,r=e||ao[n];return i(t,r)},go=function(t,e){var n=function(t,e){var n=t instanceof Date,i=e instanceof Date;return n&&i?t.getTime()===e.getTime():!n&&!i&&t===e},i=t instanceof Array,r=e instanceof Array;return i&&r?t.length===e.length&&t.every(function(t,i){return n(t,e[i])}):!i&&!r&&n(t,e)},yo=function(t){return"string"===typeof t||t instanceof String},bo=function(t){return null===t||void 0===t||yo(t)||Array.isArray(t)&&2===t.length&&t.every(yo)},xo={mixins:[C.a,oo],inject:{elForm:{default:""},elFormItem:{default:""}},props:{size:String,format:String,valueFormat:String,readonly:Boolean,placeholder:String,startPlaceholder:String,endPlaceholder:String,prefixIcon:String,clearIcon:{type:String,default:"el-icon-circle-close"},name:{default:"",validator:bo},disabled:Boolean,clearable:{type:Boolean,default:!0},id:{default:"",validator:bo},popperClass:String,editable:{type:Boolean,default:!0},align:{type:String,default:"left"},value:{},defaultValue:{},defaultTime:{},rangeSeparator:{default:"-"},pickerOptions:{},unlinkPanels:Boolean,validateEvent:{type:Boolean,default:!0}},components:{ElInput:m.a},directives:{Clickoutside:F.a},data:function(){return{pickerVisible:!1,showClose:!1,userInput:null,valueOnOpen:null,unwatchPickerOptions:null}},watch:{pickerVisible:function(t){this.readonly||this.pickerDisabled||(t?(this.showPicker(),this.valueOnOpen=Array.isArray(this.value)?[].concat(this.value):this.value):(this.hidePicker(),this.emitChange(this.value),this.userInput=null,this.validateEvent&&this.dispatch("ElFormItem","el.form.blur"),this.$emit("blur",this),this.blur()))},parsedValue:{immediate:!0,handler:function(t){this.picker&&(this.picker.value=t)}},defaultValue:function(t){this.picker&&(this.picker.defaultValue=t)},value:function(t,e){go(t,e)||this.pickerVisible||!this.validateEvent||this.dispatch("ElFormItem","el.form.change",t)}},computed:{ranged:function(){return this.type.indexOf("range")>-1},reference:function(){var t=this.$refs.reference;return t.$el||t},refInput:function(){return this.reference?[].slice.call(this.reference.querySelectorAll("input")):[]},valueIsEmpty:function(){var t=this.value;if(Array.isArray(t)){for(var e=0,n=t.length;e<n;e++)if(t[e])return!1}else if(t)return!1;return!0},triggerClass:function(){return this.prefixIcon||(-1!==this.type.indexOf("time")?"el-icon-time":"el-icon-date")},selectionMode:function(){return"week"===this.type?"week":"month"===this.type?"month":"year"===this.type?"year":"dates"===this.type?"dates":"day"},haveTrigger:function(){return"undefined"!==typeof this.showTrigger?this.showTrigger:-1!==so.indexOf(this.type)},displayValue:function(){var t=vo(this.parsedValue,this.format,this.type,this.rangeSeparator);return Array.isArray(this.userInput)?[this.userInput[0]||t&&t[0]||"",this.userInput[1]||t&&t[1]||""]:null!==this.userInput?this.userInput:t?"dates"===this.type?t.join(", "):t:""},parsedValue:function(){if(!this.value)return this.value;if("time-select"===this.type)return this.value;var t=Object(ro["isDateObject"])(this.value)||Array.isArray(this.value)&&this.value.every(ro["isDateObject"]);return t?this.value:this.valueFormat?mo(this.value,this.valueFormat,this.type,this.rangeSeparator)||this.value:Array.isArray(this.value)?this.value.map(function(t){return new Date(t)}):new Date(this.value)},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},pickerSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},pickerDisabled:function(){return this.disabled||(this.elForm||{}).disabled},firstInputId:function(){var t={},e=void 0;return e=this.ranged?this.id&&this.id[0]:this.id,e&&(t.id=e),t},secondInputId:function(){var t={},e=void 0;return this.ranged&&(e=this.id&&this.id[1]),e&&(t.id=e),t}},created:function(){this.popperOptions={boundariesPadding:0,gpuAcceleration:!1},this.placement=fo[this.align]||fo.left,this.$on("fieldReset",this.handleFieldReset)},methods:{focus:function(){this.ranged?this.handleFocus():this.$refs.reference.focus()},blur:function(){this.refInput.forEach(function(t){return t.blur()})},parseValue:function(t){var e=Object(ro["isDateObject"])(t)||Array.isArray(t)&&t.every(ro["isDateObject"]);return this.valueFormat&&!e&&mo(t,this.valueFormat,this.type,this.rangeSeparator)||t},formatToValue:function(t){var e=Object(ro["isDateObject"])(t)||Array.isArray(t)&&t.every(ro["isDateObject"]);return this.valueFormat&&e?vo(t,this.valueFormat,this.type,this.rangeSeparator):t},parseString:function(t){var e=Array.isArray(t)?this.type:this.type.replace("range","");return mo(t,this.format,e)},formatToString:function(t){var e=Array.isArray(t)?this.type:this.type.replace("range","");return vo(t,this.format,e)},handleMouseEnter:function(){this.readonly||this.pickerDisabled||!this.valueIsEmpty&&this.clearable&&(this.showClose=!0)},handleChange:function(){if(this.userInput){var t=this.parseString(this.displayValue);t&&(this.picker.value=t,this.isValidValue(t)&&(this.emitInput(t),this.userInput=null))}""===this.userInput&&(this.emitInput(null),this.emitChange(null),this.userInput=null)},handleStartInput:function(t){this.userInput?this.userInput=[t.target.value,this.userInput[1]]:this.userInput=[t.target.value,null]},handleEndInput:function(t){this.userInput?this.userInput=[this.userInput[0],t.target.value]:this.userInput=[null,t.target.value]},handleStartChange:function(t){var e=this.parseString(this.userInput&&this.userInput[0]);if(e){this.userInput=[this.formatToString(e),this.displayValue[1]];var n=[e,this.picker.value&&this.picker.value[1]];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleEndChange:function(t){var e=this.parseString(this.userInput&&this.userInput[1]);if(e){this.userInput=[this.displayValue[0],this.formatToString(e)];var n=[this.picker.value&&this.picker.value[0],e];this.picker.value=n,this.isValidValue(n)&&(this.emitInput(n),this.userInput=null)}},handleClickIcon:function(t){this.readonly||this.pickerDisabled||(this.showClose?(this.valueOnOpen=this.value,t.stopPropagation(),this.emitInput(null),this.emitChange(null),this.showClose=!1,this.picker&&"function"===typeof this.picker.handleClear&&this.picker.handleClear()):this.pickerVisible=!this.pickerVisible)},handleClose:function(){if(this.pickerVisible&&(this.pickerVisible=!1,"dates"===this.type)){var t=mo(this.valueOnOpen,this.valueFormat,this.type,this.rangeSeparator)||this.valueOnOpen;this.emitInput(t)}},handleFieldReset:function(t){this.userInput=""===t?null:t},handleFocus:function(){var t=this.type;-1===so.indexOf(t)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},handleKeydown:function(t){var e=this,n=t.keyCode;return 27===n?(this.pickerVisible=!1,void t.stopPropagation()):9!==n?13===n?((""===this.userInput||this.isValidValue(this.parseString(this.displayValue)))&&(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur()),void t.stopPropagation()):void(this.userInput?t.stopPropagation():this.picker&&this.picker.handleKeydown&&this.picker.handleKeydown(t)):void(this.ranged?setTimeout(function(){-1===e.refInput.indexOf(document.activeElement)&&(e.pickerVisible=!1,e.blur(),t.stopPropagation())},0):(this.handleChange(),this.pickerVisible=this.picker.visible=!1,this.blur(),t.stopPropagation()))},handleRangeClick:function(){var t=this.type;-1===so.indexOf(t)||this.pickerVisible||(this.pickerVisible=!0),this.$emit("focus",this)},hidePicker:function(){this.picker&&(this.picker.resetView&&this.picker.resetView(),this.pickerVisible=this.picker.visible=!1,this.destroyPopper())},showPicker:function(){var t=this;this.$isServer||(this.picker||this.mountPicker(),this.pickerVisible=this.picker.visible=!0,this.updatePopper(),this.picker.value=this.parsedValue,this.picker.resetView&&this.picker.resetView(),this.$nextTick(function(){t.picker.adjustSpinners&&t.picker.adjustSpinners()}))},mountPicker:function(){var t=this;this.picker=new Ui.a(this.panel).$mount(),this.picker.defaultValue=this.defaultValue,this.picker.defaultTime=this.defaultTime,this.picker.popperClass=this.popperClass,this.popperElm=this.picker.$el,this.picker.width=this.reference.getBoundingClientRect().width,this.picker.showTime="datetime"===this.type||"datetimerange"===this.type,this.picker.selectionMode=this.selectionMode,this.picker.unlinkPanels=this.unlinkPanels,this.picker.arrowControl=this.arrowControl||this.timeArrowControl||!1,this.$watch("format",function(e){t.picker.format=e});var e=function(){var e=t.pickerOptions;if(e&&e.selectableRange){var n=e.selectableRange,i=po.datetimerange.parser,r=ao.timerange;n=Array.isArray(n)?n:[n],t.picker.selectableRange=n.map(function(e){return i(e,r,t.rangeSeparator)})}for(var o in e)e.hasOwnProperty(o)&&"selectableRange"!==o&&(t.picker[o]=e[o]);t.format&&(t.picker.format=t.format)};e(),this.unwatchPickerOptions=this.$watch("pickerOptions",function(){return e()},{deep:!0}),this.$el.appendChild(this.picker.$el),this.picker.resetView&&this.picker.resetView(),this.picker.$on("dodestroy",this.doDestroy),this.picker.$on("pick",function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.userInput=null,t.pickerVisible=t.picker.visible=n,t.emitInput(e),t.picker.resetView&&t.picker.resetView()}),this.picker.$on("select-range",function(e,n,i){0!==t.refInput.length&&(i&&"min"!==i?"max"===i&&(t.refInput[1].setSelectionRange(e,n),t.refInput[1].focus()):(t.refInput[0].setSelectionRange(e,n),t.refInput[0].focus()))})},unmountPicker:function(){this.picker&&(this.picker.$destroy(),this.picker.$off(),"function"===typeof this.unwatchPickerOptions&&this.unwatchPickerOptions(),this.picker.$el.parentNode.removeChild(this.picker.$el))},emitChange:function(t){go(t,this.valueOnOpen)||(this.$emit("change",t),this.valueOnOpen=t,this.validateEvent&&this.dispatch("ElFormItem","el.form.change",t))},emitInput:function(t){var e=this.formatToValue(t);go(this.value,e)||this.$emit("input",e)},isValidValue:function(t){return this.picker||this.mountPicker(),!this.picker.isValidValue||t&&this.picker.isValidValue(t)}}},wo=xo,_o=s(wo,no,io,!1,null,null,null);_o.options.__file="packages/date-picker/src/picker.vue";var Mo=_o.exports,Eo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-enter":t.handleEnter,"after-leave":t.handleLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-picker el-popper",class:[{"has-sidebar":t.$slots.sidebar||t.shortcuts,"has-time":t.showTime},t.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[t._t("sidebar"),t.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},t._l(t.shortcuts,function(e,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){t.handleShortcutClick(e)}}},[t._v(t._s(e.text))])}),0):t._e(),n("div",{staticClass:"el-picker-panel__body"},[t.showTime?n("div",{staticClass:"el-date-picker__time-header"},[n("span",{staticClass:"el-date-picker__editor-wrap"},[n("el-input",{attrs:{placeholder:t.t("el.datepicker.selectDate"),value:t.visibleDate,size:"small"},on:{input:function(e){return t.userInputDate=e},change:t.handleVisibleDateChange}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleTimePickClose,expression:"handleTimePickClose"}],staticClass:"el-date-picker__editor-wrap"},[n("el-input",{ref:"input",attrs:{placeholder:t.t("el.datepicker.selectTime"),value:t.visibleTime,size:"small"},on:{focus:function(e){t.timePickerVisible=!0},input:function(e){return t.userInputTime=e},change:t.handleVisibleTimeChange}}),n("time-picker",{ref:"timepicker",attrs:{"time-arrow-control":t.arrowControl,visible:t.timePickerVisible},on:{pick:t.handleTimePick,mounted:t.proxyTimePickerDataProperties}})],1)]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:"time"!==t.currentView,expression:"currentView !== 'time'"}],staticClass:"el-date-picker__header",class:{"el-date-picker__header--bordered":"year"===t.currentView||"month"===t.currentView}},[n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-d-arrow-left",attrs:{type:"button","aria-label":t.t("el.datepicker.prevYear")},on:{click:t.prevYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===t.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__prev-btn el-icon-arrow-left",attrs:{type:"button","aria-label":t.t("el.datepicker.prevMonth")},on:{click:t.prevMonth}}),n("span",{staticClass:"el-date-picker__header-label",attrs:{role:"button"},on:{click:t.showYearPicker}},[t._v(t._s(t.yearLabel))]),n("span",{directives:[{name:"show",rawName:"v-show",value:"date"===t.currentView,expression:"currentView === 'date'"}],staticClass:"el-date-picker__header-label",class:{active:"month"===t.currentView},attrs:{role:"button"},on:{click:t.showMonthPicker}},[t._v(t._s(t.t("el.datepicker.month"+(t.month+1))))]),n("button",{staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-d-arrow-right",attrs:{type:"button","aria-label":t.t("el.datepicker.nextYear")},on:{click:t.nextYear}}),n("button",{directives:[{name:"show",rawName:"v-show",value:"date"===t.currentView,expression:"currentView === 'date'"}],staticClass:"el-picker-panel__icon-btn el-date-picker__next-btn el-icon-arrow-right",attrs:{type:"button","aria-label":t.t("el.datepicker.nextMonth")},on:{click:t.nextMonth}})]),n("div",{staticClass:"el-picker-panel__content"},[n("date-table",{directives:[{name:"show",rawName:"v-show",value:"date"===t.currentView,expression:"currentView === 'date'"}],attrs:{"selection-mode":t.selectionMode,"first-day-of-week":t.firstDayOfWeek,value:t.value,"default-value":t.defaultValue?new Date(t.defaultValue):null,date:t.date,"cell-class-name":t.cellClassName,"disabled-date":t.disabledDate},on:{pick:t.handleDatePick}}),n("year-table",{directives:[{name:"show",rawName:"v-show",value:"year"===t.currentView,expression:"currentView === 'year'"}],attrs:{value:t.value,"default-value":t.defaultValue?new Date(t.defaultValue):null,date:t.date,"disabled-date":t.disabledDate},on:{pick:t.handleYearPick}}),n("month-table",{directives:[{name:"show",rawName:"v-show",value:"month"===t.currentView,expression:"currentView === 'month'"}],attrs:{value:t.value,"default-value":t.defaultValue?new Date(t.defaultValue):null,date:t.date,"disabled-date":t.disabledDate},on:{pick:t.handleMonthPick}})],1)])],2),n("div",{directives:[{name:"show",rawName:"v-show",value:t.footerVisible&&"date"===t.currentView,expression:"footerVisible && currentView === 'date'"}],staticClass:"el-picker-panel__footer"},[n("el-button",{directives:[{name:"show",rawName:"v-show",value:"dates"!==t.selectionMode,expression:"selectionMode !== 'dates'"}],staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:t.changeToNow}},[t._v("\n        "+t._s(t.t("el.datepicker.now"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini"},on:{click:t.confirm}},[t._v("\n        "+t._s(t.t("el.datepicker.confirm"))+"\n      ")])],1)])])},So=[];Eo._withStripped=!0;var To=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(e){t.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-time-panel el-popper",class:t.popperClass},[n("div",{staticClass:"el-time-panel__content",class:{"has-seconds":t.showSeconds}},[n("time-spinner",{ref:"spinner",attrs:{"arrow-control":t.useArrow,"show-seconds":t.showSeconds,"am-pm-mode":t.amPmMode,date:t.date},on:{change:t.handleChange,"select-range":t.setSelectionRange}})],1),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:t.handleCancel}},[t._v(t._s(t.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn",class:{confirm:!t.disabled},attrs:{type:"button"},on:{click:function(e){t.handleConfirm()}}},[t._v(t._s(t.t("el.datepicker.confirm")))])])])])},Ao=[];To._withStripped=!0;var Co=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-time-spinner",class:{"has-seconds":t.showSeconds}},[t.arrowControl?t._e():[n("el-scrollbar",{ref:"hours",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(e){t.emitSelectRange("hours")},mousemove:function(e){t.adjustCurrentSpinner("hours")}}},t._l(t.hoursList,function(e,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===t.hours,disabled:e},on:{click:function(n){t.handleClick("hours",{value:i,disabled:e})}}},[t._v(t._s(("0"+(t.amPmMode?i%12||12:i)).slice(-2))+t._s(t.amPm(i)))])}),0),n("el-scrollbar",{ref:"minutes",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(e){t.emitSelectRange("minutes")},mousemove:function(e){t.adjustCurrentSpinner("minutes")}}},t._l(t.minutesList,function(e,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===t.minutes,disabled:!e},on:{click:function(e){t.handleClick("minutes",{value:i,disabled:!1})}}},[t._v(t._s(("0"+i).slice(-2)))])}),0),n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:t.showSeconds,expression:"showSeconds"}],ref:"seconds",staticClass:"el-time-spinner__wrapper",attrs:{"wrap-style":"max-height: inherit;","view-class":"el-time-spinner__list",noresize:"",tag:"ul"},nativeOn:{mouseenter:function(e){t.emitSelectRange("seconds")},mousemove:function(e){t.adjustCurrentSpinner("seconds")}}},t._l(60,function(e,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:i===t.seconds},on:{click:function(e){t.handleClick("seconds",{value:i,disabled:!1})}}},[t._v(t._s(("0"+i).slice(-2)))])}),0)],t.arrowControl?[n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(e){t.emitSelectRange("hours")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"hours",staticClass:"el-time-spinner__list"},t._l(t.arrowHourList,function(e,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:e===t.hours,disabled:t.hoursList[e]}},[t._v(t._s(void 0===e?"":("0"+(t.amPmMode?e%12||12:e)).slice(-2)+t.amPm(e)))])}),0)]),n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(e){t.emitSelectRange("minutes")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"minutes",staticClass:"el-time-spinner__list"},t._l(t.arrowMinuteList,function(e,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:e===t.minutes}},[t._v("\n          "+t._s(void 0===e?"":("0"+e).slice(-2))+"\n        ")])}),0)]),t.showSeconds?n("div",{staticClass:"el-time-spinner__wrapper is-arrow",on:{mouseenter:function(e){t.emitSelectRange("seconds")}}},[n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-time-spinner__arrow el-icon-arrow-up"}),n("i",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-time-spinner__arrow el-icon-arrow-down"}),n("ul",{ref:"seconds",staticClass:"el-time-spinner__list"},t._l(t.arrowSecondList,function(e,i){return n("li",{key:i,staticClass:"el-time-spinner__item",class:{active:e===t.seconds}},[t._v("\n          "+t._s(void 0===e?"":("0"+e).slice(-2))+"\n        ")])}),0)]):t._e()]:t._e()],2)},Lo=[];Co._withStripped=!0;var Po={components:{ElScrollbar:W.a},directives:{repeatClick:De},props:{date:{},defaultValue:{},showSeconds:{type:Boolean,default:!0},arrowControl:Boolean,amPmMode:{type:String,default:""}},computed:{hours:function(){return this.date.getHours()},minutes:function(){return this.date.getMinutes()},seconds:function(){return this.date.getSeconds()},hoursList:function(){return Object(ro["getRangeHours"])(this.selectableRange)},minutesList:function(){return Object(ro["getRangeMinutes"])(this.selectableRange,this.hours)},arrowHourList:function(){var t=this.hours;return[t>0?t-1:void 0,t,t<23?t+1:void 0]},arrowMinuteList:function(){var t=this.minutes;return[t>0?t-1:void 0,t,t<59?t+1:void 0]},arrowSecondList:function(){var t=this.seconds;return[t>0?t-1:void 0,t,t<59?t+1:void 0]}},data:function(){return{selectableRange:[],currentScrollbar:null}},mounted:function(){var t=this;this.$nextTick(function(){!t.arrowControl&&t.bindScrollEvent()})},methods:{increase:function(){this.scrollDown(1)},decrease:function(){this.scrollDown(-1)},modifyDateField:function(t,e){switch(t){case"hours":this.$emit("change",Object(ro["modifyTime"])(this.date,e,this.minutes,this.seconds));break;case"minutes":this.$emit("change",Object(ro["modifyTime"])(this.date,this.hours,e,this.seconds));break;case"seconds":this.$emit("change",Object(ro["modifyTime"])(this.date,this.hours,this.minutes,e));break}},handleClick:function(t,e){var n=e.value,i=e.disabled;i||(this.modifyDateField(t,n),this.emitSelectRange(t),this.adjustSpinner(t,n))},emitSelectRange:function(t){"hours"===t?this.$emit("select-range",0,2):"minutes"===t?this.$emit("select-range",3,5):"seconds"===t&&this.$emit("select-range",6,8),this.currentScrollbar=t},bindScrollEvent:function(){var t=this,e=function(e){t.$refs[e].wrap.onscroll=function(n){t.handleScroll(e,n)}};e("hours"),e("minutes"),e("seconds")},handleScroll:function(t){var e=Math.min(Math.round((this.$refs[t].wrap.scrollTop-(.5*this.scrollBarHeight(t)-10)/this.typeItemHeight(t)+3)/this.typeItemHeight(t)),"hours"===t?23:59);this.modifyDateField(t,e)},adjustSpinners:function(){this.adjustSpinner("hours",this.hours),this.adjustSpinner("minutes",this.minutes),this.adjustSpinner("seconds",this.seconds)},adjustCurrentSpinner:function(t){this.adjustSpinner(t,this[t])},adjustSpinner:function(t,e){if(!this.arrowControl){var n=this.$refs[t].wrap;n&&(n.scrollTop=Math.max(0,e*this.typeItemHeight(t)))}},scrollDown:function(t){var e=this;this.currentScrollbar||this.emitSelectRange("hours");var n=this.currentScrollbar,i=this.hoursList,r=this[n];if("hours"===this.currentScrollbar){var o=Math.abs(t);t=t>0?1:-1;var a=i.length;while(a--&&o)r=(r+t+i.length)%i.length,i[r]||o--;if(i[r])return}else r=(r+t+60)%60;this.modifyDateField(n,r),this.adjustSpinner(n,r),this.$nextTick(function(){return e.emitSelectRange(e.currentScrollbar)})},amPm:function(t){var e="a"===this.amPmMode.toLowerCase();if(!e)return"";var n="A"===this.amPmMode,i=t<12?" am":" pm";return n&&(i=i.toUpperCase()),i},typeItemHeight:function(t){return this.$refs[t].$el.querySelector("li").offsetHeight},scrollBarHeight:function(t){return this.$refs[t].$el.offsetHeight}}},Oo=Po,Ro=s(Oo,Co,Lo,!1,null,null,null);Ro.options.__file="packages/date-picker/src/basic/time-spinner.vue";var ko=Ro.exports,Do={mixins:[g.a],components:{TimeSpinner:ko},props:{visible:Boolean,timeArrowControl:Boolean},watch:{visible:function(t){var e=this;t?(this.oldValue=this.value,this.$nextTick(function(){return e.$refs.spinner.emitSelectRange("hours")})):this.needInitAdjust=!0},value:function(t){var e=this,n=void 0;t instanceof Date?n=Object(ro["limitTimeRange"])(t,this.selectableRange,this.format):t||(n=this.defaultValue?new Date(this.defaultValue):new Date),this.date=n,this.visible&&this.needInitAdjust&&(this.$nextTick(function(t){return e.adjustSpinners()}),this.needInitAdjust=!1)},selectableRange:function(t){this.$refs.spinner.selectableRange=t},defaultValue:function(t){Object(ro["isDate"])(this.value)||(this.date=t?new Date(t):new Date)}},data:function(){return{popperClass:"",format:"HH:mm:ss",value:"",defaultValue:null,date:new Date,oldValue:new Date,selectableRange:[],selectionRange:[0,2],disabled:!1,arrowControl:!1,needInitAdjust:!0}},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},useArrow:function(){return this.arrowControl||this.timeArrowControl||!1},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},methods:{handleCancel:function(){this.$emit("pick",this.oldValue,!1)},handleChange:function(t){this.visible&&(this.date=Object(ro["clearMilliseconds"])(t),this.isValidValue(this.date)&&this.$emit("pick",this.date,!0))},setSelectionRange:function(t,e){this.$emit("select-range",t,e),this.selectionRange=[t,e]},handleConfirm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments[1];if(!e){var n=Object(ro["clearMilliseconds"])(Object(ro["limitTimeRange"])(this.date,this.selectableRange,this.format));this.$emit("pick",n,t,e)}},handleKeydown:function(t){var e=t.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===e||39===e){var i=n[e];return this.changeSelectionRange(i),void t.preventDefault()}if(38===e||40===e){var r=n[e];return this.$refs.spinner.scrollDown(r),void t.preventDefault()}},isValidValue:function(t){return Object(ro["timeWithinRange"])(t,this.selectableRange,this.format)},adjustSpinners:function(){return this.$refs.spinner.adjustSpinners()},changeSelectionRange:function(t){var e=[0,3].concat(this.showSeconds?[6]:[]),n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=e.indexOf(this.selectionRange[0]),r=(i+t+e.length)%e.length;this.$refs.spinner.emitSelectRange(n[r])}},mounted:function(){var t=this;this.$nextTick(function(){return t.handleConfirm(!0,!0)}),this.$emit("mounted")}},Io=Do,No=s(Io,To,Ao,!1,null,null,null);No.options.__file="packages/date-picker/src/panel/time.vue";var zo=No.exports,Bo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"el-year-table",on:{click:t.handleYearTableClick}},[n("tbody",[n("tr",[n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+0)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+1)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+1))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+2)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+2))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+3)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+3))])])]),n("tr",[n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+4)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+4))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+5)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+5))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+6)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+6))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+7)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+7))])])]),n("tr",[n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+8)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+8))])]),n("td",{staticClass:"available",class:t.getCellStyle(t.startYear+9)},[n("a",{staticClass:"cell"},[t._v(t._s(t.startYear+9))])]),n("td"),n("td")])])])},Fo=[];Bo._withStripped=!0;var jo=function(t){var e=Object(ro["getDayCountOfYear"])(t),n=new Date(t,0,1);return Object(ro["range"])(e).map(function(t){return Object(ro["nextDate"])(n,t)})},Ho={props:{disabledDate:{},value:{},defaultValue:{validator:function(t){return null===t||t instanceof Date&&Object(ro["isDate"])(t)}},date:{}},computed:{startYear:function(){return 10*Math.floor(this.date.getFullYear()/10)}},methods:{getCellStyle:function(t){var e={},n=new Date;return e.disabled="function"===typeof this.disabledDate&&jo(t).every(this.disabledDate),e.current=Object(y["arrayFindIndex"])(Object(y["coerceTruthyValueToArray"])(this.value),function(e){return e.getFullYear()===t})>=0,e.today=n.getFullYear()===t,e.default=this.defaultValue&&this.defaultValue.getFullYear()===t,e},handleYearTableClick:function(t){var e=t.target;if("A"===e.tagName){if(Object(Bt["hasClass"])(e.parentNode,"disabled"))return;var n=e.textContent||e.innerText;this.$emit("pick",Number(n))}}}},Uo=Ho,Vo=s(Uo,Bo,Fo,!1,null,null,null);Vo.options.__file="packages/date-picker/src/basic/year-table.vue";var Go=Vo.exports,Wo=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"el-month-table",on:{click:t.handleMonthTableClick,mousemove:t.handleMouseMove}},[n("tbody",t._l(t.rows,function(e,i){return n("tr",{key:i},t._l(e,function(e,i){return n("td",{key:i,class:t.getCellStyle(e)},[n("div",[n("a",{staticClass:"cell"},[t._v(t._s(t.t("el.datepicker.months."+t.months[e.text])))])])])}),0)}),0)])},$o=[];Wo._withStripped=!0;var qo=function(t,e){var n=Object(ro["getDayCountOfMonth"])(t,e),i=new Date(t,e,1);return Object(ro["range"])(n).map(function(t){return Object(ro["nextDate"])(i,t)})},Yo=function(t){return new Date(t.getFullYear(),t.getMonth())},Xo=function(t){return"number"===typeof t||"string"===typeof t?Yo(new Date(t)).getTime():t instanceof Date?Yo(t).getTime():NaN},Zo={props:{disabledDate:{},value:{},selectionMode:{default:"month"},minDate:{},maxDate:{},defaultValue:{validator:function(t){return null===t||Object(ro["isDate"])(t)||Array.isArray(t)&&t.every(ro["isDate"])}},date:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},mixins:[g.a],watch:{"rangeState.endDate":function(t){this.markRange(this.minDate,t)},minDate:function(t,e){Xo(t)!==Xo(e)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(t,e){Xo(t)!==Xo(e)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{months:["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],tableRows:[[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(t,e){var n=new Date(e);return this.date.getFullYear()===n.getFullYear()&&Number(t.text)===n.getMonth()},getCellStyle:function(t){var e=this,n={},i=this.date.getFullYear(),r=new Date,o=t.text,a=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[];return n.disabled="function"===typeof this.disabledDate&&qo(i,o).every(this.disabledDate),n.current=Object(y["arrayFindIndex"])(Object(y["coerceTruthyValueToArray"])(this.value),function(t){return t.getFullYear()===i&&t.getMonth()===o})>=0,n.today=r.getFullYear()===i&&r.getMonth()===o,n.default=a.some(function(n){return e.cellMatchesDate(t,n)}),t.inRange&&(n["in-range"]=!0,t.start&&(n["start-date"]=!0),t.end&&(n["end-date"]=!0)),n},getMonthOfCell:function(t){var e=this.date.getFullYear();return new Date(e,t,1)},markRange:function(t,e){t=Xo(t),e=Xo(e)||t;var n=[Math.min(t,e),Math.max(t,e)];t=n[0],e=n[1];for(var i=this.rows,r=0,o=i.length;r<o;r++)for(var a=i[r],s=0,l=a.length;s<l;s++){var c=a[s],u=4*r+s,h=new Date(this.date.getFullYear(),u).getTime();c.inRange=t&&h>=t&&h<=e,c.start=t&&h===t,c.end=e&&h===e}},handleMouseMove:function(t){if(this.rangeState.selecting){var e=t.target;if("A"===e.tagName&&(e=e.parentNode.parentNode),"DIV"===e.tagName&&(e=e.parentNode),"TD"===e.tagName){var n=e.parentNode.rowIndex,i=e.cellIndex;this.rows[n][i].disabled||n===this.lastRow&&i===this.lastColumn||(this.lastRow=n,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getMonthOfCell(4*n+i)}}))}}},handleMonthTableClick:function(t){var e=t.target;if("A"===e.tagName&&(e=e.parentNode.parentNode),"DIV"===e.tagName&&(e=e.parentNode),"TD"===e.tagName&&!Object(Bt["hasClass"])(e,"disabled")){var n=e.cellIndex,i=e.parentNode.rowIndex,r=4*i+n,o=this.getMonthOfCell(r);"range"===this.selectionMode?this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0):this.$emit("pick",r)}}},computed:{rows:function(){for(var t=this,e=this.tableRows,n=this.disabledDate,i=[],r=Xo(new Date),o=0;o<3;o++)for(var a=e[o],s=function(e){var s=a[e];s||(s={row:o,column:e,type:"normal",inRange:!1,start:!1,end:!1}),s.type="normal";var l=4*o+e,c=new Date(t.date.getFullYear(),l).getTime();s.inRange=c>=Xo(t.minDate)&&c<=Xo(t.maxDate),s.start=t.minDate&&c===Xo(t.minDate),s.end=t.maxDate&&c===Xo(t.maxDate);var u=c===r;u&&(s.type="today"),s.text=l;var h=new Date(c);s.disabled="function"===typeof n&&n(h),s.selected=Object(y["arrayFind"])(i,function(t){return t.getTime()===h.getTime()}),t.$set(a,e,s)},l=0;l<4;l++)s(l);return e}}},Jo=Zo,Ko=s(Jo,Wo,$o,!1,null,null,null);Ko.options.__file="packages/date-picker/src/basic/month-table.vue";var Qo=Ko.exports,ta=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("table",{staticClass:"el-date-table",class:{"is-week-mode":"week"===t.selectionMode},attrs:{cellspacing:"0",cellpadding:"0"},on:{click:t.handleClick,mousemove:t.handleMouseMove}},[n("tbody",[n("tr",[t.showWeekNumber?n("th",[t._v(t._s(t.t("el.datepicker.week")))]):t._e(),t._l(t.WEEKS,function(e,i){return n("th",{key:i},[t._v(t._s(t.t("el.datepicker.weeks."+e)))])})],2),t._l(t.rows,function(e,i){return n("tr",{key:i,staticClass:"el-date-table__row",class:{current:t.isWeekActive(e[1])}},t._l(e,function(e,i){return n("td",{key:i,class:t.getCellClasses(e)},[n("div",[n("span",[t._v("\n          "+t._s(e.text)+"\n        ")])])])}),0)})],2)])},ea=[];ta._withStripped=!0;var na=["sun","mon","tue","wed","thu","fri","sat"],ia=function(t){return"number"===typeof t||"string"===typeof t?Object(ro["clearTime"])(new Date(t)).getTime():t instanceof Date?Object(ro["clearTime"])(t).getTime():NaN},ra=function(t,e){var n="function"===typeof e?Object(y["arrayFindIndex"])(t,e):t.indexOf(e);return n>=0?[].concat(t.slice(0,n),t.slice(n+1)):t},oa={mixins:[g.a],props:{firstDayOfWeek:{default:7,type:Number,validator:function(t){return t>=1&&t<=7}},value:{},defaultValue:{validator:function(t){return null===t||Object(ro["isDate"])(t)||Array.isArray(t)&&t.every(ro["isDate"])}},date:{},selectionMode:{default:"day"},showWeekNumber:{type:Boolean,default:!1},disabledDate:{},cellClassName:{},minDate:{},maxDate:{},rangeState:{default:function(){return{endDate:null,selecting:!1}}}},computed:{offsetDay:function(){var t=this.firstDayOfWeek;return t>3?7-t:-t},WEEKS:function(){var t=this.firstDayOfWeek;return na.concat(na).slice(t,t+7)},year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},startDate:function(){return Object(ro["getStartDateOfMonth"])(this.year,this.month)},rows:function(){var t=this,e=new Date(this.year,this.month,1),n=Object(ro["getFirstDayOfMonth"])(e),i=Object(ro["getDayCountOfMonth"])(e.getFullYear(),e.getMonth()),r=Object(ro["getDayCountOfMonth"])(e.getFullYear(),0===e.getMonth()?11:e.getMonth()-1);n=0===n?7:n;for(var o=this.offsetDay,a=this.tableRows,s=1,l=this.startDate,c=this.disabledDate,u=this.cellClassName,h="dates"===this.selectionMode?Object(y["coerceTruthyValueToArray"])(this.value):[],d=ia(new Date),p=0;p<6;p++){var f=a[p];this.showWeekNumber&&(f[0]||(f[0]={type:"week",text:Object(ro["getWeekNumber"])(Object(ro["nextDate"])(l,7*p+1))}));for(var m=function(e){var a=f[t.showWeekNumber?e+1:e];a||(a={row:p,column:e,type:"normal",inRange:!1,start:!1,end:!1}),a.type="normal";var m=7*p+e,v=Object(ro["nextDate"])(l,m-o).getTime();a.inRange=v>=ia(t.minDate)&&v<=ia(t.maxDate),a.start=t.minDate&&v===ia(t.minDate),a.end=t.maxDate&&v===ia(t.maxDate);var g=v===d;if(g&&(a.type="today"),p>=0&&p<=1){var b=n+o<0?7+n+o:n+o;e+7*p>=b?a.text=s++:(a.text=r-(b-e%7)+1+7*p,a.type="prev-month")}else s<=i?a.text=s++:(a.text=s++-i,a.type="next-month");var x=new Date(v);a.disabled="function"===typeof c&&c(x),a.selected=Object(y["arrayFind"])(h,function(t){return t.getTime()===x.getTime()}),a.customClass="function"===typeof u&&u(x),t.$set(f,t.showWeekNumber?e+1:e,a)},v=0;v<7;v++)m(v);if("week"===this.selectionMode){var g=this.showWeekNumber?1:0,b=this.showWeekNumber?7:6,x=this.isWeekActive(f[g+1]);f[g].inRange=x,f[g].start=x,f[b].inRange=x,f[b].end=x}}return a}},watch:{"rangeState.endDate":function(t){this.markRange(this.minDate,t)},minDate:function(t,e){ia(t)!==ia(e)&&this.markRange(this.minDate,this.maxDate)},maxDate:function(t,e){ia(t)!==ia(e)&&this.markRange(this.minDate,this.maxDate)}},data:function(){return{tableRows:[[],[],[],[],[],[]],lastRow:null,lastColumn:null}},methods:{cellMatchesDate:function(t,e){var n=new Date(e);return this.year===n.getFullYear()&&this.month===n.getMonth()&&Number(t.text)===n.getDate()},getCellClasses:function(t){var e=this,n=this.selectionMode,i=this.defaultValue?Array.isArray(this.defaultValue)?this.defaultValue:[this.defaultValue]:[],r=[];return"normal"!==t.type&&"today"!==t.type||t.disabled?r.push(t.type):(r.push("available"),"today"===t.type&&r.push("today")),"normal"===t.type&&i.some(function(n){return e.cellMatchesDate(t,n)})&&r.push("default"),"day"!==n||"normal"!==t.type&&"today"!==t.type||!this.cellMatchesDate(t,this.value)||r.push("current"),!t.inRange||"normal"!==t.type&&"today"!==t.type&&"week"!==this.selectionMode||(r.push("in-range"),t.start&&r.push("start-date"),t.end&&r.push("end-date")),t.disabled&&r.push("disabled"),t.selected&&r.push("selected"),t.customClass&&r.push(t.customClass),r.join(" ")},getDateOfCell:function(t,e){var n=7*t+(e-(this.showWeekNumber?1:0))-this.offsetDay;return Object(ro["nextDate"])(this.startDate,n)},isWeekActive:function(t){if("week"!==this.selectionMode)return!1;var e=new Date(this.year,this.month,1),n=e.getFullYear(),i=e.getMonth();if("prev-month"===t.type&&(e.setMonth(0===i?11:i-1),e.setFullYear(0===i?n-1:n)),"next-month"===t.type&&(e.setMonth(11===i?0:i+1),e.setFullYear(11===i?n+1:n)),e.setDate(parseInt(t.text,10)),Object(ro["isDate"])(this.value)){var r=(this.value.getDay()-this.firstDayOfWeek+7)%7-1,o=Object(ro["prevDate"])(this.value,r);return o.getTime()===e.getTime()}return!1},markRange:function(t,e){t=ia(t),e=ia(e)||t;var n=[Math.min(t,e),Math.max(t,e)];t=n[0],e=n[1];for(var i=this.startDate,r=this.rows,o=0,a=r.length;o<a;o++)for(var s=r[o],l=0,c=s.length;l<c;l++)if(!this.showWeekNumber||0!==l){var u=s[l],h=7*o+l+(this.showWeekNumber?-1:0),d=Object(ro["nextDate"])(i,h-this.offsetDay).getTime();u.inRange=t&&d>=t&&d<=e,u.start=t&&d===t,u.end=e&&d===e}},handleMouseMove:function(t){if(this.rangeState.selecting){var e=t.target;if("SPAN"===e.tagName&&(e=e.parentNode.parentNode),"DIV"===e.tagName&&(e=e.parentNode),"TD"===e.tagName){var n=e.parentNode.rowIndex-1,i=e.cellIndex;this.rows[n][i].disabled||n===this.lastRow&&i===this.lastColumn||(this.lastRow=n,this.lastColumn=i,this.$emit("changerange",{minDate:this.minDate,maxDate:this.maxDate,rangeState:{selecting:!0,endDate:this.getDateOfCell(n,i)}}))}}},handleClick:function(t){var e=t.target;if("SPAN"===e.tagName&&(e=e.parentNode.parentNode),"DIV"===e.tagName&&(e=e.parentNode),"TD"===e.tagName){var n=e.parentNode.rowIndex-1,i="week"===this.selectionMode?1:e.cellIndex,r=this.rows[n][i];if(!r.disabled&&"week"!==r.type){var o=this.getDateOfCell(n,i);if("range"===this.selectionMode)this.rangeState.selecting?(o>=this.minDate?this.$emit("pick",{minDate:this.minDate,maxDate:o}):this.$emit("pick",{minDate:o,maxDate:this.minDate}),this.rangeState.selecting=!1):(this.$emit("pick",{minDate:o,maxDate:null}),this.rangeState.selecting=!0);else if("day"===this.selectionMode)this.$emit("pick",o);else if("week"===this.selectionMode){var a=Object(ro["getWeekNumber"])(o),s=o.getFullYear()+"w"+a;this.$emit("pick",{year:o.getFullYear(),week:a,value:s,date:o})}else if("dates"===this.selectionMode){var l=this.value||[],c=r.selected?ra(l,function(t){return t.getTime()===o.getTime()}):[].concat(l,[o]);this.$emit("pick",c)}}}}}},aa=oa,sa=s(aa,ta,ea,!1,null,null,null);sa.options.__file="packages/date-picker/src/basic/date-table.vue";var la=sa.exports,ca={mixins:[g.a],directives:{Clickoutside:F.a},watch:{showTime:function(t){var e=this;t&&this.$nextTick(function(t){var n=e.$refs.input.$el;n&&(e.pickerWidth=n.getBoundingClientRect().width+10)})},value:function(t){"dates"===this.selectionMode&&this.value||(Object(ro["isDate"])(t)?this.date=new Date(t):this.date=this.getDefaultValue())},defaultValue:function(t){Object(ro["isDate"])(this.value)||(this.date=t?new Date(t):new Date)},timePickerVisible:function(t){var e=this;t&&this.$nextTick(function(){return e.$refs.timepicker.adjustSpinners()})},selectionMode:function(t){"month"===t?"year"===this.currentView&&"month"===this.currentView||(this.currentView="month"):"dates"===t&&(this.currentView="date")}},methods:{proxyTimePickerDataProperties:function(){var t=this,e=function(e){t.$refs.timepicker.format=e},n=function(e){t.$refs.timepicker.value=e},i=function(e){t.$refs.timepicker.date=e},r=function(e){t.$refs.timepicker.selectableRange=e};this.$watch("value",n),this.$watch("date",i),this.$watch("selectableRange",r),e(this.timeFormat),n(this.value),i(this.date),r(this.selectableRange)},handleClear:function(){this.date=this.getDefaultValue(),this.$emit("pick",null)},emit:function(t){for(var e=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];if(t)if(Array.isArray(t)){var o=t.map(function(t){return e.showTime?Object(ro["clearMilliseconds"])(t):Object(ro["clearTime"])(t)});this.$emit.apply(this,["pick",o].concat(i))}else this.$emit.apply(this,["pick",this.showTime?Object(ro["clearMilliseconds"])(t):Object(ro["clearTime"])(t)].concat(i));else this.$emit.apply(this,["pick",t].concat(i));this.userInputDate=null,this.userInputTime=null},showMonthPicker:function(){this.currentView="month"},showYearPicker:function(){this.currentView="year"},prevMonth:function(){this.date=Object(ro["prevMonth"])(this.date)},nextMonth:function(){this.date=Object(ro["nextMonth"])(this.date)},prevYear:function(){"year"===this.currentView?this.date=Object(ro["prevYear"])(this.date,10):this.date=Object(ro["prevYear"])(this.date)},nextYear:function(){"year"===this.currentView?this.date=Object(ro["nextYear"])(this.date,10):this.date=Object(ro["nextYear"])(this.date)},handleShortcutClick:function(t){t.onClick&&t.onClick(this)},handleTimePick:function(t,e,n){if(Object(ro["isDate"])(t)){var i=this.value?Object(ro["modifyTime"])(this.value,t.getHours(),t.getMinutes(),t.getSeconds()):Object(ro["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=i,this.emit(this.date,!0)}else this.emit(t,!0);n||(this.timePickerVisible=e)},handleTimePickClose:function(){this.timePickerVisible=!1},handleMonthPick:function(t){"month"===this.selectionMode?(this.date=Object(ro["modifyDate"])(this.date,this.year,t,1),this.emit(this.date)):(this.date=Object(ro["changeYearMonthAndClampDate"])(this.date,this.year,t),this.currentView="date")},handleDatePick:function(t){if("day"===this.selectionMode){var e=this.value?Object(ro["modifyDate"])(this.value,t.getFullYear(),t.getMonth(),t.getDate()):Object(ro["modifyWithTimeString"])(t,this.defaultTime);this.checkDateWithinRange(e)||(e=Object(ro["modifyDate"])(this.selectableRange[0][0],t.getFullYear(),t.getMonth(),t.getDate())),this.date=e,this.emit(this.date,this.showTime)}else"week"===this.selectionMode?this.emit(t.date):"dates"===this.selectionMode&&this.emit(t,!0)},handleYearPick:function(t){"year"===this.selectionMode?(this.date=Object(ro["modifyDate"])(this.date,t,0,1),this.emit(this.date)):(this.date=Object(ro["changeYearMonthAndClampDate"])(this.date,t,this.month),this.currentView="month")},changeToNow:function(){this.disabledDate&&this.disabledDate(new Date)||!this.checkDateWithinRange(new Date)||(this.date=new Date,this.emit(this.date))},confirm:function(){if("dates"===this.selectionMode)this.emit(this.value);else{var t=this.value?this.value:Object(ro["modifyWithTimeString"])(this.getDefaultValue(),this.defaultTime);this.date=new Date(t),this.emit(t)}},resetView:function(){"month"===this.selectionMode?this.currentView="month":"year"===this.selectionMode?this.currentView="year":this.currentView="date"},handleEnter:function(){document.body.addEventListener("keydown",this.handleKeydown)},handleLeave:function(){this.$emit("dodestroy"),document.body.removeEventListener("keydown",this.handleKeydown)},handleKeydown:function(t){var e=t.keyCode,n=[38,40,37,39];this.visible&&!this.timePickerVisible&&(-1!==n.indexOf(e)&&(this.handleKeyControl(e),t.stopPropagation(),t.preventDefault()),13===e&&null===this.userInputDate&&null===this.userInputTime&&this.emit(this.date,!1))},handleKeyControl:function(t){var e={year:{38:-4,40:4,37:-1,39:1,offset:function(t,e){return t.setFullYear(t.getFullYear()+e)}},month:{38:-4,40:4,37:-1,39:1,offset:function(t,e){return t.setMonth(t.getMonth()+e)}},week:{38:-1,40:1,37:-1,39:1,offset:function(t,e){return t.setDate(t.getDate()+7*e)}},day:{38:-7,40:7,37:-1,39:1,offset:function(t,e){return t.setDate(t.getDate()+e)}}},n=this.selectionMode,i=31536e6,r=this.date.getTime(),o=new Date(this.date.getTime());while(Math.abs(r-o.getTime())<=i){var a=e[n];if(a.offset(o,a[t]),"function"!==typeof this.disabledDate||!this.disabledDate(o)){this.date=o,this.$emit("pick",o,!0);break}}},handleVisibleTimeChange:function(t){var e=Object(ro["parseDate"])(t,this.timeFormat);e&&this.checkDateWithinRange(e)&&(this.date=Object(ro["modifyDate"])(e,this.year,this.month,this.monthDate),this.userInputTime=null,this.$refs.timepicker.value=this.date,this.timePickerVisible=!1,this.emit(this.date,!0))},handleVisibleDateChange:function(t){var e=Object(ro["parseDate"])(t,this.dateFormat);if(e){if("function"===typeof this.disabledDate&&this.disabledDate(e))return;this.date=Object(ro["modifyTime"])(e,this.date.getHours(),this.date.getMinutes(),this.date.getSeconds()),this.userInputDate=null,this.resetView(),this.emit(this.date,!0)}},isValidValue:function(t){return t&&!isNaN(t)&&("function"!==typeof this.disabledDate||!this.disabledDate(t))&&this.checkDateWithinRange(t)},getDefaultValue:function(){return this.defaultValue?new Date(this.defaultValue):new Date},checkDateWithinRange:function(t){return!(this.selectableRange.length>0)||Object(ro["timeWithinRange"])(t,this.selectableRange,this.format||"HH:mm:ss")}},components:{TimePicker:zo,YearTable:Go,MonthTable:Qo,DateTable:la,ElInput:m.a,ElButton:at.a},data:function(){return{popperClass:"",date:new Date,value:"",defaultValue:null,defaultTime:null,showTime:!1,selectionMode:"day",shortcuts:"",visible:!1,currentView:"date",disabledDate:"",cellClassName:"",selectableRange:[],firstDayOfWeek:7,showWeekNumber:!1,timePickerVisible:!1,format:"",arrowControl:!1,userInputDate:null,userInputTime:null}},computed:{year:function(){return this.date.getFullYear()},month:function(){return this.date.getMonth()},week:function(){return Object(ro["getWeekNumber"])(this.date)},monthDate:function(){return this.date.getDate()},footerVisible:function(){return this.showTime||"dates"===this.selectionMode},visibleTime:function(){return null!==this.userInputTime?this.userInputTime:Object(ro["formatDate"])(this.value||this.defaultValue,this.timeFormat)},visibleDate:function(){return null!==this.userInputDate?this.userInputDate:Object(ro["formatDate"])(this.value||this.defaultValue,this.dateFormat)},yearLabel:function(){var t=this.t("el.datepicker.year");if("year"===this.currentView){var e=10*Math.floor(this.year/10);return t?e+" "+t+" - "+(e+9)+" "+t:e+" - "+(e+9)}return this.year+" "+t},timeFormat:function(){return this.format?Object(ro["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(ro["extractDateFormat"])(this.format):"yyyy-MM-dd"}}},ua=ca,ha=s(ua,Eo,So,!1,null,null,null);ha.options.__file="packages/date-picker/src/panel/date.vue";var da=ha.exports,pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(e){t.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":t.$slots.sidebar||t.shortcuts,"has-time":t.showTime},t.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[t._t("sidebar"),t.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},t._l(t.shortcuts,function(e,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){t.handleShortcutClick(e)}}},[t._v(t._s(e.text))])}),0):t._e(),n("div",{staticClass:"el-picker-panel__body"},[t.showTime?n("div",{staticClass:"el-date-range-picker__time-header"},[n("span",{staticClass:"el-date-range-picker__editors-wrap"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{ref:"minInput",staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:t.rangeState.selecting,placeholder:t.t("el.datepicker.startDate"),value:t.minVisibleDate},on:{input:function(e){return t.handleDateInput(e,"min")},change:function(e){return t.handleDateChange(e,"min")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleMinTimeClose,expression:"handleMinTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:t.rangeState.selecting,placeholder:t.t("el.datepicker.startTime"),value:t.minVisibleTime},on:{focus:function(e){t.minTimePickerVisible=!0},input:function(e){return t.handleTimeInput(e,"min")},change:function(e){return t.handleTimeChange(e,"min")}}}),n("time-picker",{ref:"minTimePicker",attrs:{"time-arrow-control":t.arrowControl,visible:t.minTimePickerVisible},on:{pick:t.handleMinTimePick,mounted:function(e){t.$refs.minTimePicker.format=t.timeFormat}}})],1)]),n("span",{staticClass:"el-icon-arrow-right"}),n("span",{staticClass:"el-date-range-picker__editors-wrap is-right"},[n("span",{staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:t.rangeState.selecting,placeholder:t.t("el.datepicker.endDate"),value:t.maxVisibleDate,readonly:!t.minDate},on:{input:function(e){return t.handleDateInput(e,"max")},change:function(e){return t.handleDateChange(e,"max")}}})],1),n("span",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.handleMaxTimeClose,expression:"handleMaxTimeClose"}],staticClass:"el-date-range-picker__time-picker-wrap"},[n("el-input",{staticClass:"el-date-range-picker__editor",attrs:{size:"small",disabled:t.rangeState.selecting,placeholder:t.t("el.datepicker.endTime"),value:t.maxVisibleTime,readonly:!t.minDate},on:{focus:function(e){t.minDate&&(t.maxTimePickerVisible=!0)},input:function(e){return t.handleTimeInput(e,"max")},change:function(e){return t.handleTimeChange(e,"max")}}}),n("time-picker",{ref:"maxTimePicker",attrs:{"time-arrow-control":t.arrowControl,visible:t.maxTimePickerVisible},on:{pick:t.handleMaxTimePick,mounted:function(e){t.$refs.maxTimePicker.format=t.timeFormat}}})],1)])]):t._e(),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:t.leftPrevYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",attrs:{type:"button"},on:{click:t.leftPrevMonth}}),t.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!t.enableYearArrow},attrs:{type:"button",disabled:!t.enableYearArrow},on:{click:t.leftNextYear}}):t._e(),t.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",class:{"is-disabled":!t.enableMonthArrow},attrs:{type:"button",disabled:!t.enableMonthArrow},on:{click:t.leftNextMonth}}):t._e(),n("div",[t._v(t._s(t.leftLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:t.leftDate,"default-value":t.defaultValue,"min-date":t.minDate,"max-date":t.maxDate,"range-state":t.rangeState,"disabled-date":t.disabledDate,"cell-class-name":t.cellClassName,"first-day-of-week":t.firstDayOfWeek},on:{changerange:t.handleChangeRange,pick:t.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[t.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!t.enableYearArrow},attrs:{type:"button",disabled:!t.enableYearArrow},on:{click:t.rightPrevYear}}):t._e(),t.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-left",class:{"is-disabled":!t.enableMonthArrow},attrs:{type:"button",disabled:!t.enableMonthArrow},on:{click:t.rightPrevMonth}}):t._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:t.rightNextYear}}),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-arrow-right",attrs:{type:"button"},on:{click:t.rightNextMonth}}),n("div",[t._v(t._s(t.rightLabel))])]),n("date-table",{attrs:{"selection-mode":"range",date:t.rightDate,"default-value":t.defaultValue,"min-date":t.minDate,"max-date":t.maxDate,"range-state":t.rangeState,"disabled-date":t.disabledDate,"cell-class-name":t.cellClassName,"first-day-of-week":t.firstDayOfWeek},on:{changerange:t.handleChangeRange,pick:t.handleRangePick}})],1)])],2),t.showTime?n("div",{staticClass:"el-picker-panel__footer"},[n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{size:"mini",type:"text"},on:{click:t.handleClear}},[t._v("\n        "+t._s(t.t("el.datepicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-picker-panel__link-btn",attrs:{plain:"",size:"mini",disabled:t.btnDisabled},on:{click:function(e){t.handleConfirm(!1)}}},[t._v("\n        "+t._s(t.t("el.datepicker.confirm"))+"\n      ")])],1):t._e()])])},fa=[];pa._withStripped=!0;var ma=function(t){return Array.isArray(t)?[new Date(t[0]),new Date(t[1])]:t?[new Date(t),Object(ro["nextDate"])(new Date(t),1)]:[new Date,Object(ro["nextDate"])(new Date,1)]},va={mixins:[g.a],directives:{Clickoutside:F.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.leftDate.getMonth()+1))},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+(this.rightDate.getMonth()+1))},leftYear:function(){return this.leftDate.getFullYear()},leftMonth:function(){return this.leftDate.getMonth()},leftMonthDate:function(){return this.leftDate.getDate()},rightYear:function(){return this.rightDate.getFullYear()},rightMonth:function(){return this.rightDate.getMonth()},rightMonthDate:function(){return this.rightDate.getDate()},minVisibleDate:function(){return null!==this.dateUserInput.min?this.dateUserInput.min:this.minDate?Object(ro["formatDate"])(this.minDate,this.dateFormat):""},maxVisibleDate:function(){return null!==this.dateUserInput.max?this.dateUserInput.max:this.maxDate||this.minDate?Object(ro["formatDate"])(this.maxDate||this.minDate,this.dateFormat):""},minVisibleTime:function(){return null!==this.timeUserInput.min?this.timeUserInput.min:this.minDate?Object(ro["formatDate"])(this.minDate,this.timeFormat):""},maxVisibleTime:function(){return null!==this.timeUserInput.max?this.timeUserInput.max:this.maxDate||this.minDate?Object(ro["formatDate"])(this.maxDate||this.minDate,this.timeFormat):""},timeFormat:function(){return this.format?Object(ro["extractTimeFormat"])(this.format):"HH:mm:ss"},dateFormat:function(){return this.format?Object(ro["extractDateFormat"])(this.format):"yyyy-MM-dd"},enableMonthArrow:function(){var t=(this.leftMonth+1)%12,e=this.leftMonth+1>=12?1:0;return this.unlinkPanels&&new Date(this.leftYear+e,t)<new Date(this.rightYear,this.rightMonth)},enableYearArrow:function(){return this.unlinkPanels&&12*this.rightYear+this.rightMonth-(12*this.leftYear+this.leftMonth+1)>=12}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(ro["nextMonth"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},showTime:!1,shortcuts:"",visible:"",disabledDate:"",cellClassName:"",firstDayOfWeek:7,minTimePickerVisible:!1,maxTimePickerVisible:!1,format:"",arrowControl:!1,unlinkPanels:!1,dateUserInput:{min:null,max:null},timeUserInput:{min:null,max:null}}},watch:{minDate:function(t){var e=this;this.dateUserInput.min=null,this.timeUserInput.min=null,this.$nextTick(function(){if(e.$refs.maxTimePicker&&e.maxDate&&e.maxDate<e.minDate){var t="HH:mm:ss";e.$refs.maxTimePicker.selectableRange=[[Object(ro["parseDate"])(Object(ro["formatDate"])(e.minDate,t),t),Object(ro["parseDate"])("23:59:59",t)]]}}),t&&this.$refs.minTimePicker&&(this.$refs.minTimePicker.date=t,this.$refs.minTimePicker.value=t)},maxDate:function(t){this.dateUserInput.max=null,this.timeUserInput.max=null,t&&this.$refs.maxTimePicker&&(this.$refs.maxTimePicker.date=t,this.$refs.maxTimePicker.value=t)},minTimePickerVisible:function(t){var e=this;t&&this.$nextTick(function(){e.$refs.minTimePicker.date=e.minDate,e.$refs.minTimePicker.value=e.minDate,e.$refs.minTimePicker.adjustSpinners()})},maxTimePickerVisible:function(t){var e=this;t&&this.$nextTick(function(){e.$refs.maxTimePicker.date=e.maxDate,e.$refs.maxTimePicker.value=e.maxDate,e.$refs.maxTimePicker.adjustSpinners()})},value:function(t){if(t){if(Array.isArray(t))if(this.minDate=Object(ro["isDate"])(t[0])?new Date(t[0]):null,this.maxDate=Object(ro["isDate"])(t[1])?new Date(t[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var e=this.minDate.getFullYear(),n=this.minDate.getMonth(),i=this.maxDate.getFullYear(),r=this.maxDate.getMonth();this.rightDate=e===i&&n===r?Object(ro["nextMonth"])(this.maxDate):this.maxDate}else this.rightDate=Object(ro["nextMonth"])(this.leftDate);else this.leftDate=ma(this.defaultValue)[0],this.rightDate=Object(ro["nextMonth"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(t){if(!Array.isArray(this.value)){var e=ma(t),n=e[0],i=e[1];this.leftDate=n,this.rightDate=t&&t[1]&&this.unlinkPanels?i:Object(ro["nextMonth"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=ma(this.defaultValue)[0],this.rightDate=Object(ro["nextMonth"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(t){this.minDate=t.minDate,this.maxDate=t.maxDate,this.rangeState=t.rangeState},handleDateInput:function(t,e){if(this.dateUserInput[e]=t,t.length===this.dateFormat.length){var n=Object(ro["parseDate"])(t,this.dateFormat);if(n){if("function"===typeof this.disabledDate&&this.disabledDate(new Date(n)))return;"min"===e?(this.minDate=Object(ro["modifyDate"])(this.minDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.leftDate=new Date(n),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))):(this.maxDate=Object(ro["modifyDate"])(this.maxDate||new Date,n.getFullYear(),n.getMonth(),n.getDate()),this.rightDate=new Date(n),this.unlinkPanels||(this.leftDate=Object(ro["prevMonth"])(n)))}}},handleDateChange:function(t,e){var n=Object(ro["parseDate"])(t,this.dateFormat);n&&("min"===e?(this.minDate=Object(ro["modifyDate"])(this.minDate,n.getFullYear(),n.getMonth(),n.getDate()),this.minDate>this.maxDate&&(this.maxDate=this.minDate)):(this.maxDate=Object(ro["modifyDate"])(this.maxDate,n.getFullYear(),n.getMonth(),n.getDate()),this.maxDate<this.minDate&&(this.minDate=this.maxDate)))},handleTimeInput:function(t,e){var n=this;if(this.timeUserInput[e]=t,t.length===this.timeFormat.length){var i=Object(ro["parseDate"])(t,this.timeFormat);i&&("min"===e?(this.minDate=Object(ro["modifyTime"])(this.minDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick(function(t){return n.$refs.minTimePicker.adjustSpinners()})):(this.maxDate=Object(ro["modifyTime"])(this.maxDate,i.getHours(),i.getMinutes(),i.getSeconds()),this.$nextTick(function(t){return n.$refs.maxTimePicker.adjustSpinners()})))}},handleTimeChange:function(t,e){var n=Object(ro["parseDate"])(t,this.timeFormat);n&&("min"===e?(this.minDate=Object(ro["modifyTime"])(this.minDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.minDate>this.maxDate&&(this.maxDate=this.minDate),this.$refs.minTimePicker.value=this.minDate,this.minTimePickerVisible=!1):(this.maxDate=Object(ro["modifyTime"])(this.maxDate,n.getHours(),n.getMinutes(),n.getSeconds()),this.maxDate<this.minDate&&(this.minDate=this.maxDate),this.$refs.maxTimePicker.value=this.minDate,this.maxTimePickerVisible=!1))},handleRangePick:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(ro["modifyWithTimeString"])(t.minDate,i[0]),o=Object(ro["modifyWithTimeString"])(t.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(t),this.maxDate=o,this.minDate=r,setTimeout(function(){e.maxDate=o,e.minDate=r},10),n&&!this.showTime&&this.handleConfirm())},handleShortcutClick:function(t){t.onClick&&t.onClick(this)},handleMinTimePick:function(t,e,n){this.minDate=this.minDate||new Date,t&&(this.minDate=Object(ro["modifyTime"])(this.minDate,t.getHours(),t.getMinutes(),t.getSeconds())),n||(this.minTimePickerVisible=e),(!this.maxDate||this.maxDate&&this.maxDate.getTime()<this.minDate.getTime())&&(this.maxDate=new Date(this.minDate))},handleMinTimeClose:function(){this.minTimePickerVisible=!1},handleMaxTimePick:function(t,e,n){this.maxDate&&t&&(this.maxDate=Object(ro["modifyTime"])(this.maxDate,t.getHours(),t.getMinutes(),t.getSeconds())),n||(this.maxTimePickerVisible=e),this.maxDate&&this.minDate&&this.minDate.getTime()>this.maxDate.getTime()&&(this.minDate=new Date(this.maxDate))},handleMaxTimeClose:function(){this.maxTimePickerVisible=!1},leftPrevYear:function(){this.leftDate=Object(ro["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))},leftPrevMonth:function(){this.leftDate=Object(ro["prevMonth"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["nextMonth"])(this.leftDate))},rightNextYear:function(){this.unlinkPanels?this.rightDate=Object(ro["nextYear"])(this.rightDate):(this.leftDate=Object(ro["nextYear"])(this.leftDate),this.rightDate=Object(ro["nextMonth"])(this.leftDate))},rightNextMonth:function(){this.unlinkPanels?this.rightDate=Object(ro["nextMonth"])(this.rightDate):(this.leftDate=Object(ro["nextMonth"])(this.leftDate),this.rightDate=Object(ro["nextMonth"])(this.leftDate))},leftNextYear:function(){this.leftDate=Object(ro["nextYear"])(this.leftDate)},leftNextMonth:function(){this.leftDate=Object(ro["nextMonth"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(ro["prevYear"])(this.rightDate)},rightPrevMonth:function(){this.rightDate=Object(ro["prevMonth"])(this.rightDate)},handleConfirm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],t)},isValidValue:function(t){return Array.isArray(t)&&t&&t[0]&&t[1]&&Object(ro["isDate"])(t[0])&&Object(ro["isDate"])(t[1])&&t[0].getTime()<=t[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(t[0])&&!this.disabledDate(t[1]))},resetView:function(){this.minDate&&null==this.maxDate&&(this.rangeState.selecting=!1),this.minDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{TimePicker:zo,DateTable:la,ElInput:m.a,ElButton:at.a}},ga=va,ya=s(ga,pa,fa,!1,null,null,null);ya.options.__file="packages/date-picker/src/panel/date-range.vue";var ba=ya.exports,xa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(e){t.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-picker-panel el-date-range-picker el-popper",class:[{"has-sidebar":t.$slots.sidebar||t.shortcuts},t.popperClass]},[n("div",{staticClass:"el-picker-panel__body-wrapper"},[t._t("sidebar"),t.shortcuts?n("div",{staticClass:"el-picker-panel__sidebar"},t._l(t.shortcuts,function(e,i){return n("button",{key:i,staticClass:"el-picker-panel__shortcut",attrs:{type:"button"},on:{click:function(n){t.handleShortcutClick(e)}}},[t._v(t._s(e.text))])}),0):t._e(),n("div",{staticClass:"el-picker-panel__body"},[n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-left"},[n("div",{staticClass:"el-date-range-picker__header"},[n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",attrs:{type:"button"},on:{click:t.leftPrevYear}}),t.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",class:{"is-disabled":!t.enableYearArrow},attrs:{type:"button",disabled:!t.enableYearArrow},on:{click:t.leftNextYear}}):t._e(),n("div",[t._v(t._s(t.leftLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:t.leftDate,"default-value":t.defaultValue,"min-date":t.minDate,"max-date":t.maxDate,"range-state":t.rangeState,"disabled-date":t.disabledDate},on:{changerange:t.handleChangeRange,pick:t.handleRangePick}})],1),n("div",{staticClass:"el-picker-panel__content el-date-range-picker__content is-right"},[n("div",{staticClass:"el-date-range-picker__header"},[t.unlinkPanels?n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-left",class:{"is-disabled":!t.enableYearArrow},attrs:{type:"button",disabled:!t.enableYearArrow},on:{click:t.rightPrevYear}}):t._e(),n("button",{staticClass:"el-picker-panel__icon-btn el-icon-d-arrow-right",attrs:{type:"button"},on:{click:t.rightNextYear}}),n("div",[t._v(t._s(t.rightLabel))])]),n("month-table",{attrs:{"selection-mode":"range",date:t.rightDate,"default-value":t.defaultValue,"min-date":t.minDate,"max-date":t.maxDate,"range-state":t.rangeState,"disabled-date":t.disabledDate},on:{changerange:t.handleChangeRange,pick:t.handleRangePick}})],1)])],2)])])},wa=[];xa._withStripped=!0;var _a=function(t){return Array.isArray(t)?[new Date(t[0]),new Date(t[1])]:t?[new Date(t),Object(ro["nextMonth"])(new Date(t))]:[new Date,Object(ro["nextMonth"])(new Date)]},Ma={mixins:[g.a],directives:{Clickoutside:F.a},computed:{btnDisabled:function(){return!(this.minDate&&this.maxDate&&!this.selecting&&this.isValidValue([this.minDate,this.maxDate]))},leftLabel:function(){return this.leftDate.getFullYear()+" "+this.t("el.datepicker.year")},rightLabel:function(){return this.rightDate.getFullYear()+" "+this.t("el.datepicker.year")},leftYear:function(){return this.leftDate.getFullYear()},rightYear:function(){return this.rightDate.getFullYear()===this.leftDate.getFullYear()?this.leftDate.getFullYear()+1:this.rightDate.getFullYear()},enableYearArrow:function(){return this.unlinkPanels&&this.rightYear>this.leftYear+1}},data:function(){return{popperClass:"",value:[],defaultValue:null,defaultTime:null,minDate:"",maxDate:"",leftDate:new Date,rightDate:Object(ro["nextYear"])(new Date),rangeState:{endDate:null,selecting:!1,row:null,column:null},shortcuts:"",visible:"",disabledDate:"",format:"",arrowControl:!1,unlinkPanels:!1}},watch:{value:function(t){if(t){if(Array.isArray(t))if(this.minDate=Object(ro["isDate"])(t[0])?new Date(t[0]):null,this.maxDate=Object(ro["isDate"])(t[1])?new Date(t[1]):null,this.minDate)if(this.leftDate=this.minDate,this.unlinkPanels&&this.maxDate){var e=this.minDate.getFullYear(),n=this.maxDate.getFullYear();this.rightDate=e===n?Object(ro["nextYear"])(this.maxDate):this.maxDate}else this.rightDate=Object(ro["nextYear"])(this.leftDate);else this.leftDate=_a(this.defaultValue)[0],this.rightDate=Object(ro["nextYear"])(this.leftDate)}else this.minDate=null,this.maxDate=null},defaultValue:function(t){if(!Array.isArray(this.value)){var e=_a(t),n=e[0],i=e[1];this.leftDate=n,this.rightDate=t&&t[1]&&n.getFullYear()!==i.getFullYear()&&this.unlinkPanels?i:Object(ro["nextYear"])(this.leftDate)}}},methods:{handleClear:function(){this.minDate=null,this.maxDate=null,this.leftDate=_a(this.defaultValue)[0],this.rightDate=Object(ro["nextYear"])(this.leftDate),this.$emit("pick",null)},handleChangeRange:function(t){this.minDate=t.minDate,this.maxDate=t.maxDate,this.rangeState=t.rangeState},handleRangePick:function(t){var e=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=this.defaultTime||[],r=Object(ro["modifyWithTimeString"])(t.minDate,i[0]),o=Object(ro["modifyWithTimeString"])(t.maxDate,i[1]);this.maxDate===o&&this.minDate===r||(this.onPick&&this.onPick(t),this.maxDate=o,this.minDate=r,setTimeout(function(){e.maxDate=o,e.minDate=r},10),n&&this.handleConfirm())},handleShortcutClick:function(t){t.onClick&&t.onClick(this)},leftPrevYear:function(){this.leftDate=Object(ro["prevYear"])(this.leftDate),this.unlinkPanels||(this.rightDate=Object(ro["prevYear"])(this.rightDate))},rightNextYear:function(){this.unlinkPanels||(this.leftDate=Object(ro["nextYear"])(this.leftDate)),this.rightDate=Object(ro["nextYear"])(this.rightDate)},leftNextYear:function(){this.leftDate=Object(ro["nextYear"])(this.leftDate)},rightPrevYear:function(){this.rightDate=Object(ro["prevYear"])(this.rightDate)},handleConfirm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.isValidValue([this.minDate,this.maxDate])&&this.$emit("pick",[this.minDate,this.maxDate],t)},isValidValue:function(t){return Array.isArray(t)&&t&&t[0]&&t[1]&&Object(ro["isDate"])(t[0])&&Object(ro["isDate"])(t[1])&&t[0].getTime()<=t[1].getTime()&&("function"!==typeof this.disabledDate||!this.disabledDate(t[0])&&!this.disabledDate(t[1]))},resetView:function(){this.minDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[0]):null,this.maxDate=this.value&&Object(ro["isDate"])(this.value[0])?new Date(this.value[1]):null}},components:{MonthTable:Qo,ElInput:m.a,ElButton:at.a}},Ea=Ma,Sa=s(Ea,xa,wa,!1,null,null,null);Sa.options.__file="packages/date-picker/src/panel/month-range.vue";var Ta=Sa.exports,Aa=function(t){return"daterange"===t||"datetimerange"===t?ba:"monthrange"===t?Ta:da},Ca={mixins:[Mo],name:"ElDatePicker",props:{type:{type:String,default:"date"},timeArrowControl:Boolean},watch:{type:function(t){this.picker?(this.unmountPicker(),this.panel=Aa(t),this.mountPicker()):this.panel=Aa(t)}},created:function(){this.panel=Aa(this.type)},install:function(t){t.component(Ca.name,Ca)}},La=Ca,Pa=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"before-enter":t.handleMenuEnter,"after-leave":function(e){t.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],ref:"popper",staticClass:"el-picker-panel time-select el-popper",class:t.popperClass,style:{width:t.width+"px"}},[n("el-scrollbar",{attrs:{noresize:"","wrap-class":"el-picker-panel__content"}},t._l(t.items,function(e){return n("div",{key:e.value,staticClass:"time-select-item",class:{selected:t.value===e.value,disabled:e.disabled,default:e.value===t.defaultValue},attrs:{disabled:e.disabled},on:{click:function(n){t.handleClick(e)}}},[t._v(t._s(e.value))])}),0)],1)])},Oa=[];Pa._withStripped=!0;var Ra=function(t){var e=(t||"").split(":");if(e.length>=2){var n=parseInt(e[0],10),i=parseInt(e[1],10);return{hours:n,minutes:i}}return null},ka=function(t,e){var n=Ra(t),i=Ra(e),r=n.minutes+60*n.hours,o=i.minutes+60*i.hours;return r===o?0:r>o?1:-1},Da=function(t){return(t.hours<10?"0"+t.hours:t.hours)+":"+(t.minutes<10?"0"+t.minutes:t.minutes)},Ia=function(t,e){var n=Ra(t),i=Ra(e),r={hours:n.hours,minutes:n.minutes};return r.minutes+=i.minutes,r.hours+=i.hours,r.hours+=Math.floor(r.minutes/60),r.minutes=r.minutes%60,Da(r)},Na={components:{ElScrollbar:W.a},watch:{value:function(t){var e=this;t&&this.$nextTick(function(){return e.scrollToOption()})}},methods:{handleClick:function(t){t.disabled||this.$emit("pick",t.value)},handleClear:function(){this.$emit("pick",null)},scrollToOption:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:".selected",e=this.$refs.popper.querySelector(".el-picker-panel__content");ni()(e,e.querySelector(t))},handleMenuEnter:function(){var t=this,e=-1!==this.items.map(function(t){return t.value}).indexOf(this.value),n=-1!==this.items.map(function(t){return t.value}).indexOf(this.defaultValue),i=(e?".selected":n&&".default")||".time-select-item:not(.disabled)";this.$nextTick(function(){return t.scrollToOption(i)})},scrollDown:function(t){var e=this.items,n=e.length,i=e.length,r=e.map(function(t){return t.value}).indexOf(this.value);while(i--)if(r=(r+t+n)%n,!e[r].disabled)return void this.$emit("pick",e[r].value,!0)},isValidValue:function(t){return-1!==this.items.filter(function(t){return!t.disabled}).map(function(t){return t.value}).indexOf(t)},handleKeydown:function(t){var e=t.keyCode;if(38===e||40===e){var n={40:1,38:-1},i=n[e.toString()];return this.scrollDown(i),void t.stopPropagation()}}},data:function(){return{popperClass:"",start:"09:00",end:"18:00",step:"00:30",value:"",defaultValue:"",visible:!1,minTime:"",maxTime:"",width:0}},computed:{items:function(){var t=this.start,e=this.end,n=this.step,i=[];if(t&&e&&n){var r=t;while(ka(r,e)<=0)i.push({value:r,disabled:ka(r,this.minTime||"-1:-1")<=0||ka(r,this.maxTime||"100:100")>=0}),r=Ia(r,n)}return i}}},za=Na,Ba=s(za,Pa,Oa,!1,null,null,null);Ba.options.__file="packages/date-picker/src/panel/time-select.vue";var Fa=Ba.exports,ja={mixins:[Mo],name:"ElTimeSelect",componentName:"ElTimeSelect",props:{type:{type:String,default:"time-select"}},beforeCreate:function(){this.panel=Fa},install:function(t){t.component(ja.name,ja)}},Ha=ja,Ua=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":function(e){t.$emit("dodestroy")}}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-time-range-picker el-picker-panel el-popper",class:t.popperClass},[n("div",{staticClass:"el-time-range-picker__content"},[n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[t._v(t._s(t.t("el.datepicker.startTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":t.showSeconds,"is-arrow":t.arrowControl}},[n("time-spinner",{ref:"minSpinner",attrs:{"show-seconds":t.showSeconds,"am-pm-mode":t.amPmMode,"arrow-control":t.arrowControl,date:t.minDate},on:{change:t.handleMinChange,"select-range":t.setMinSelectionRange}})],1)]),n("div",{staticClass:"el-time-range-picker__cell"},[n("div",{staticClass:"el-time-range-picker__header"},[t._v(t._s(t.t("el.datepicker.endTime")))]),n("div",{staticClass:"el-time-range-picker__body el-time-panel__content",class:{"has-seconds":t.showSeconds,"is-arrow":t.arrowControl}},[n("time-spinner",{ref:"maxSpinner",attrs:{"show-seconds":t.showSeconds,"am-pm-mode":t.amPmMode,"arrow-control":t.arrowControl,date:t.maxDate},on:{change:t.handleMaxChange,"select-range":t.setMaxSelectionRange}})],1)])]),n("div",{staticClass:"el-time-panel__footer"},[n("button",{staticClass:"el-time-panel__btn cancel",attrs:{type:"button"},on:{click:function(e){t.handleCancel()}}},[t._v(t._s(t.t("el.datepicker.cancel")))]),n("button",{staticClass:"el-time-panel__btn confirm",attrs:{type:"button",disabled:t.btnDisabled},on:{click:function(e){t.handleConfirm()}}},[t._v(t._s(t.t("el.datepicker.confirm")))])])])])},Va=[];Ua._withStripped=!0;var Ga=Object(ro["parseDate"])("00:00:00","HH:mm:ss"),Wa=Object(ro["parseDate"])("23:59:59","HH:mm:ss"),$a=function(t){return Object(ro["modifyDate"])(Ga,t.getFullYear(),t.getMonth(),t.getDate())},qa=function(t){return Object(ro["modifyDate"])(Wa,t.getFullYear(),t.getMonth(),t.getDate())},Ya=function(t,e){return new Date(Math.min(t.getTime()+e,qa(t).getTime()))},Xa={mixins:[g.a],components:{TimeSpinner:ko},computed:{showSeconds:function(){return-1!==(this.format||"").indexOf("ss")},offset:function(){return this.showSeconds?11:8},spinner:function(){return this.selectionRange[0]<this.offset?this.$refs.minSpinner:this.$refs.maxSpinner},btnDisabled:function(){return this.minDate.getTime()>this.maxDate.getTime()},amPmMode:function(){return-1!==(this.format||"").indexOf("A")?"A":-1!==(this.format||"").indexOf("a")?"a":""}},data:function(){return{popperClass:"",minDate:new Date,maxDate:new Date,value:[],oldValue:[new Date,new Date],defaultValue:null,format:"HH:mm:ss",visible:!1,selectionRange:[0,2],arrowControl:!1}},watch:{value:function(t){Array.isArray(t)?(this.minDate=new Date(t[0]),this.maxDate=new Date(t[1])):Array.isArray(this.defaultValue)?(this.minDate=new Date(this.defaultValue[0]),this.maxDate=new Date(this.defaultValue[1])):this.defaultValue?(this.minDate=new Date(this.defaultValue),this.maxDate=Ya(new Date(this.defaultValue),36e5)):(this.minDate=new Date,this.maxDate=Ya(new Date,36e5))},visible:function(t){var e=this;t&&(this.oldValue=this.value,this.$nextTick(function(){return e.$refs.minSpinner.emitSelectRange("hours")}))}},methods:{handleClear:function(){this.$emit("pick",null)},handleCancel:function(){this.$emit("pick",this.oldValue)},handleMinChange:function(t){this.minDate=Object(ro["clearMilliseconds"])(t),this.handleChange()},handleMaxChange:function(t){this.maxDate=Object(ro["clearMilliseconds"])(t),this.handleChange()},handleChange:function(){this.isValidValue([this.minDate,this.maxDate])&&(this.$refs.minSpinner.selectableRange=[[$a(this.minDate),this.maxDate]],this.$refs.maxSpinner.selectableRange=[[this.minDate,qa(this.maxDate)]],this.$emit("pick",[this.minDate,this.maxDate],!0))},setMinSelectionRange:function(t,e){this.$emit("select-range",t,e,"min"),this.selectionRange=[t,e]},setMaxSelectionRange:function(t,e){this.$emit("select-range",t,e,"max"),this.selectionRange=[t+this.offset,e+this.offset]},handleConfirm:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.$refs.minSpinner.selectableRange,n=this.$refs.maxSpinner.selectableRange;this.minDate=Object(ro["limitTimeRange"])(this.minDate,e,this.format),this.maxDate=Object(ro["limitTimeRange"])(this.maxDate,n,this.format),this.$emit("pick",[this.minDate,this.maxDate],t)},adjustSpinners:function(){this.$refs.minSpinner.adjustSpinners(),this.$refs.maxSpinner.adjustSpinners()},changeSelectionRange:function(t){var e=this.showSeconds?[0,3,6,11,14,17]:[0,3,8,11],n=["hours","minutes"].concat(this.showSeconds?["seconds"]:[]),i=e.indexOf(this.selectionRange[0]),r=(i+t+e.length)%e.length,o=e.length/2;r<o?this.$refs.minSpinner.emitSelectRange(n[r]):this.$refs.maxSpinner.emitSelectRange(n[r-o])},isValidValue:function(t){return Array.isArray(t)&&Object(ro["timeWithinRange"])(this.minDate,this.$refs.minSpinner.selectableRange)&&Object(ro["timeWithinRange"])(this.maxDate,this.$refs.maxSpinner.selectableRange)},handleKeydown:function(t){var e=t.keyCode,n={38:-1,40:1,37:-1,39:1};if(37===e||39===e){var i=n[e];return this.changeSelectionRange(i),void t.preventDefault()}if(38===e||40===e){var r=n[e];return this.spinner.scrollDown(r),void t.preventDefault()}}}},Za=Xa,Ja=s(Za,Ua,Va,!1,null,null,null);Ja.options.__file="packages/date-picker/src/panel/time-range.vue";var Ka=Ja.exports,Qa={mixins:[Mo],name:"ElTimePicker",props:{isRange:Boolean,arrowControl:Boolean},data:function(){return{type:""}},watch:{isRange:function(t){this.picker?(this.unmountPicker(),this.type=t?"timerange":"time",this.panel=t?Ka:zo,this.mountPicker()):(this.type=t?"timerange":"time",this.panel=t?Ka:zo)}},created:function(){this.type=this.isRange?"timerange":"time",this.panel=this.isRange?Ka:zo},install:function(t){t.component(Qa.name,Qa)}},ts=Qa,es=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("transition",{attrs:{name:t.transition},on:{"after-enter":t.handleAfterEnter,"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&t.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[t.popperClass,t.content&&"el-popover--plain"],style:{width:t.width+"px"},attrs:{role:"tooltip",id:t.tooltipId,"aria-hidden":t.disabled||!t.showPopper?"true":"false"}},[t.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:t._s(t.title)}}):t._e(),t._t("default",[t._v(t._s(t.content))])],2)]),n("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[t._t("reference")],2)],1)},ns=[];es._withStripped=!0;var is={name:"ElPopover",mixins:[V.a],props:{trigger:{type:String,default:"click",validator:function(t){return["click","focus","hover","manual"].indexOf(t)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(y["generateId"])()}},watch:{showPopper:function(t){this.disabled||(t?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var t=this,e=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$refs.wrapper.children&&(e=this.referenceElm=this.$refs.wrapper.children[0]),e&&(Object(Bt["addClass"])(e,"el-popover__reference"),e.setAttribute("aria-describedby",this.tooltipId),e.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(Bt["on"])(e,"focusin",function(){t.handleFocus();var n=e.__vue__;n&&"function"===typeof n.focus&&n.focus()}),Object(Bt["on"])(n,"focusin",this.handleFocus),Object(Bt["on"])(e,"focusout",this.handleBlur),Object(Bt["on"])(n,"focusout",this.handleBlur)),Object(Bt["on"])(e,"keydown",this.handleKeydown),Object(Bt["on"])(e,"click",this.handleClick)),"click"===this.trigger?(Object(Bt["on"])(e,"click",this.doToggle),Object(Bt["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(Bt["on"])(e,"mouseenter",this.handleMouseEnter),Object(Bt["on"])(n,"mouseenter",this.handleMouseEnter),Object(Bt["on"])(e,"mouseleave",this.handleMouseLeave),Object(Bt["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),e.querySelector("input, textarea")?(Object(Bt["on"])(e,"focusin",this.doShow),Object(Bt["on"])(e,"focusout",this.doClose)):(Object(Bt["on"])(e,"mousedown",this.doShow),Object(Bt["on"])(e,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(Bt["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(Bt["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(Bt["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var t=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout(function(){t.showPopper=!0},this.openDelay):this.showPopper=!0},handleKeydown:function(t){27===t.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var t=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout(function(){t.showPopper=!1},this.closeDelay):this.showPopper=!1},handleDocumentClick:function(t){var e=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$refs.wrapper.children&&(e=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&e&&!this.$el.contains(t.target)&&!e.contains(t.target)&&n&&!n.contains(t.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var t=this.reference;Object(Bt["off"])(t,"click",this.doToggle),Object(Bt["off"])(t,"mouseup",this.doClose),Object(Bt["off"])(t,"mousedown",this.doShow),Object(Bt["off"])(t,"focusin",this.doShow),Object(Bt["off"])(t,"focusout",this.doClose),Object(Bt["off"])(t,"mousedown",this.doShow),Object(Bt["off"])(t,"mouseup",this.doClose),Object(Bt["off"])(t,"mouseleave",this.handleMouseLeave),Object(Bt["off"])(t,"mouseenter",this.handleMouseEnter),Object(Bt["off"])(document,"click",this.handleDocumentClick)}},rs=is,os=s(rs,es,ns,!1,null,null,null);os.options.__file="packages/popover/src/main.vue";var as=os.exports,ss=function(t,e,n){var i=e.expression?e.value:e.arg,r=n.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=t:r.$refs.reference=t)},ls={bind:function(t,e,n){ss(t,e,n)},inserted:function(t,e,n){ss(t,e,n)}};Ui.a.directive("popover",ls),as.install=function(t){t.directive("popover",ls),t.component(as.name,as)},as.directive=ls;var cs=as,us={name:"ElTooltip",mixins:[V.a],props:{openDelay:{type:Number,default:0},disabled:Boolean,manual:Boolean,effect:{type:String,default:"dark"},arrowOffset:{type:Number,default:0},popperClass:String,content:String,visibleArrow:{default:!0},transition:{type:String,default:"el-fade-in-linear"},popperOptions:{default:function(){return{boundariesPadding:10,gpuAcceleration:!1}}},enterable:{type:Boolean,default:!0},hideAfter:{type:Number,default:0},tabindex:{type:Number,default:0}},data:function(){return{tooltipId:"el-tooltip-"+Object(y["generateId"])(),timeoutPending:null,focusing:!1}},beforeCreate:function(){var t=this;this.$isServer||(this.popperVM=new Ui.a({data:{node:""},render:function(t){return this.node}}).$mount(),this.debounceClose=z()(200,function(){return t.handleClosePopper()}))},render:function(t){var e=this;this.popperVM&&(this.popperVM.node=t("transition",{attrs:{name:this.transition},on:{afterLeave:this.doDestroy}},[t("div",{on:{mouseleave:function(){e.setExpectedState(!1),e.debounceClose()},mouseenter:function(){e.setExpectedState(!0)}},ref:"popper",attrs:{role:"tooltip",id:this.tooltipId,"aria-hidden":this.disabled||!this.showPopper?"true":"false"},directives:[{name:"show",value:!this.disabled&&this.showPopper}],class:["el-tooltip__popper","is-"+this.effect,this.popperClass]},[this.$slots.content||this.content])]));var n=this.getFirstElement();if(!n)return null;var i=n.data=n.data||{};return i.staticClass=this.addTooltipClass(i.staticClass),n},mounted:function(){var t=this;this.referenceElm=this.$el,1===this.$el.nodeType&&(this.$el.setAttribute("aria-describedby",this.tooltipId),this.$el.setAttribute("tabindex",this.tabindex),Object(Bt["on"])(this.referenceElm,"mouseenter",this.show),Object(Bt["on"])(this.referenceElm,"mouseleave",this.hide),Object(Bt["on"])(this.referenceElm,"focus",function(){if(t.$slots.default&&t.$slots.default.length){var e=t.$slots.default[0].componentInstance;e&&e.focus?e.focus():t.handleFocus()}else t.handleFocus()}),Object(Bt["on"])(this.referenceElm,"blur",this.handleBlur),Object(Bt["on"])(this.referenceElm,"click",this.removeFocusing)),this.value&&this.popperVM&&this.popperVM.$nextTick(function(){t.value&&t.updatePopper()})},watch:{focusing:function(t){t?Object(Bt["addClass"])(this.referenceElm,"focusing"):Object(Bt["removeClass"])(this.referenceElm,"focusing")}},methods:{show:function(){this.setExpectedState(!0),this.handleShowPopper()},hide:function(){this.setExpectedState(!1),this.debounceClose()},handleFocus:function(){this.focusing=!0,this.show()},handleBlur:function(){this.focusing=!1,this.hide()},removeFocusing:function(){this.focusing=!1},addTooltipClass:function(t){return t?"el-tooltip "+t.replace("el-tooltip",""):"el-tooltip"},handleShowPopper:function(){var t=this;this.expectedState&&!this.manual&&(clearTimeout(this.timeout),this.timeout=setTimeout(function(){t.showPopper=!0},this.openDelay),this.hideAfter>0&&(this.timeoutPending=setTimeout(function(){t.showPopper=!1},this.hideAfter)))},handleClosePopper:function(){this.enterable&&this.expectedState||this.manual||(clearTimeout(this.timeout),this.timeoutPending&&clearTimeout(this.timeoutPending),this.showPopper=!1,this.disabled&&this.doDestroy())},setExpectedState:function(t){!1===t&&clearTimeout(this.timeoutPending),this.expectedState=t},getFirstElement:function(){var t=this.$slots.default;if(!Array.isArray(t))return null;for(var e=null,n=0;n<t.length;n++)t[n]&&t[n].tag&&(e=t[n]);return e}},beforeDestroy:function(){this.popperVM&&this.popperVM.$destroy()},destroyed:function(){var t=this.referenceElm;1===t.nodeType&&(Object(Bt["off"])(t,"mouseenter",this.show),Object(Bt["off"])(t,"mouseleave",this.hide),Object(Bt["off"])(t,"focus",this.handleFocus),Object(Bt["off"])(t,"blur",this.handleBlur),Object(Bt["off"])(t,"click",this.removeFocusing))},install:function(t){t.component(us.name,us)}},hs=us,ds=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"msgbox-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-message-box__wrapper",attrs:{tabindex:"-1",role:"dialog","aria-modal":"true","aria-label":t.title||"dialog"},on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{staticClass:"el-message-box",class:[t.customClass,t.center&&"el-message-box--center"]},[null!==t.title?n("div",{staticClass:"el-message-box__header"},[n("div",{staticClass:"el-message-box__title"},[t.icon&&t.center?n("div",{class:["el-message-box__status",t.icon]}):t._e(),n("span",[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-message-box__headerbtn",attrs:{type:"button","aria-label":"Close"},on:{click:function(e){t.handleAction(t.distinguishCancelAndClose?"close":"cancel")},keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction(t.distinguishCancelAndClose?"close":"cancel")}}},[n("i",{staticClass:"el-message-box__close el-icon-close"})]):t._e()]):t._e(),n("div",{staticClass:"el-message-box__content"},[n("div",{staticClass:"el-message-box__container"},[t.icon&&!t.center&&""!==t.message?n("div",{class:["el-message-box__status",t.icon]}):t._e(),""!==t.message?n("div",{staticClass:"el-message-box__message"},[t._t("default",[t.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:t._s(t.message)}}):n("p",[t._v(t._s(t.message))])])],2):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:t.showInput,expression:"showInput"}],staticClass:"el-message-box__input"},[n("el-input",{ref:"input",attrs:{type:t.inputType,placeholder:t.inputPlaceholder},nativeOn:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleInputEnter(e):null}},model:{value:t.inputValue,callback:function(e){t.inputValue=e},expression:"inputValue"}}),n("div",{staticClass:"el-message-box__errormsg",style:{visibility:t.editorErrorMessage?"visible":"hidden"}},[t._v(t._s(t.editorErrorMessage))])],1)]),n("div",{staticClass:"el-message-box__btns"},[t.showCancelButton?n("el-button",{class:[t.cancelButtonClasses],attrs:{loading:t.cancelButtonLoading,round:t.roundButton,size:"small"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction("cancel")}},nativeOn:{click:function(e){t.handleAction("cancel")}}},[t._v("\n          "+t._s(t.cancelButtonText||t.t("el.messagebox.cancel"))+"\n        ")]):t._e(),n("el-button",{directives:[{name:"show",rawName:"v-show",value:t.showConfirmButton,expression:"showConfirmButton"}],ref:"confirm",class:[t.confirmButtonClasses],attrs:{loading:t.confirmButtonLoading,round:t.roundButton,size:"small"},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.handleAction("confirm")}},nativeOn:{click:function(e){t.handleAction("confirm")}}},[t._v("\n          "+t._s(t.confirmButtonText||t.t("el.messagebox.confirm"))+"\n        ")])],1)])])])},ps=[];ds._withStripped=!0;var fs=n(15),ms=n.n(fs),vs=n(39),gs=n.n(vs),ys=void 0,bs={success:"success",info:"info",warning:"warning",error:"error"},xs={mixins:[E.a,g.a],props:{modal:{default:!0},lockScroll:{default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{default:!0},closeOnPressEscape:{default:!0},closeOnHashChange:{default:!0},center:{default:!1,type:Boolean},roundButton:{default:!1,type:Boolean}},components:{ElInput:m.a,ElButton:at.a},computed:{icon:function(){var t=this.type,e=this.iconClass;return e||(t&&bs[t]?"el-icon-"+bs[t]:"")},confirmButtonClasses:function(){return"el-button--primary "+this.confirmButtonClass},cancelButtonClasses:function(){return""+this.cancelButtonClass}},methods:{getSafeClose:function(){var t=this,e=this.uid;return function(){t.$nextTick(function(){e===t.uid&&t.doClose()})}},doClose:function(){var t=this;this.visible&&(this.visible=!1,this._closing=!0,this.onClose&&this.onClose(),ys.closeDialog(),this.lockScroll&&setTimeout(this.restoreBodyStyle,200),this.opened=!1,this.doAfterClose(),setTimeout(function(){t.action&&t.callback(t.action,t)}))},handleWrapperClick:function(){this.closeOnClickModal&&this.handleAction(this.distinguishCancelAndClose?"close":"cancel")},handleInputEnter:function(){if("textarea"!==this.inputType)return this.handleAction("confirm")},handleAction:function(t){("prompt"!==this.$type||"confirm"!==t||this.validate())&&(this.action=t,"function"===typeof this.beforeClose?(this.close=this.getSafeClose(),this.beforeClose(t,this,this.close)):this.doClose())},validate:function(){if("prompt"===this.$type){var t=this.inputPattern;if(t&&!t.test(this.inputValue||""))return this.editorErrorMessage=this.inputErrorMessage||Object(fs["t"])("el.messagebox.error"),Object(Bt["addClass"])(this.getInputElement(),"invalid"),!1;var e=this.inputValidator;if("function"===typeof e){var n=e(this.inputValue);if(!1===n)return this.editorErrorMessage=this.inputErrorMessage||Object(fs["t"])("el.messagebox.error"),Object(Bt["addClass"])(this.getInputElement(),"invalid"),!1;if("string"===typeof n)return this.editorErrorMessage=n,Object(Bt["addClass"])(this.getInputElement(),"invalid"),!1}}return this.editorErrorMessage="",Object(Bt["removeClass"])(this.getInputElement(),"invalid"),!0},getFirstFocus:function(){var t=this.$el.querySelector(".el-message-box__btns .el-button"),e=this.$el.querySelector(".el-message-box__btns .el-message-box__title");return t||e},getInputElement:function(){var t=this.$refs.input.$refs;return t.input||t.textarea},handleClose:function(){this.handleAction("close")}},watch:{inputValue:{immediate:!0,handler:function(t){var e=this;this.$nextTick(function(n){"prompt"===e.$type&&null!==t&&e.validate()})}},visible:function(t){var e=this;t&&(this.uid++,"alert"!==this.$type&&"confirm"!==this.$type||this.$nextTick(function(){e.$refs.confirm.$el.focus()}),this.focusAfterClosed=document.activeElement,ys=new gs.a(this.$el,this.focusAfterClosed,this.getFirstFocus())),"prompt"===this.$type&&(t?setTimeout(function(){e.$refs.input&&e.$refs.input.$el&&e.getInputElement().focus()},500):(this.editorErrorMessage="",Object(Bt["removeClass"])(this.getInputElement(),"invalid")))}},mounted:function(){var t=this;this.$nextTick(function(){t.closeOnHashChange&&window.addEventListener("hashchange",t.close)})},beforeDestroy:function(){this.closeOnHashChange&&window.removeEventListener("hashchange",this.close),setTimeout(function(){ys.closeDialog()})},data:function(){return{uid:1,title:void 0,message:"",type:"",iconClass:"",customClass:"",showInput:!1,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,action:"",confirmButtonText:"",cancelButtonText:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonClass:"",confirmButtonDisabled:!1,cancelButtonClass:"",editorErrorMessage:null,callback:null,dangerouslyUseHTMLString:!1,focusAfterClosed:null,isOnComposition:!1,distinguishCancelAndClose:!1}}},ws=xs,_s=s(ws,ds,ps,!1,null,null,null);_s.options.__file="packages/message-box/src/main.vue";var Ms=_s.exports,Es=n(23),Ss="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ts={title:null,message:"",type:"",iconClass:"",showInput:!1,showClose:!0,modalFade:!0,lockScroll:!0,closeOnClickModal:!0,closeOnPressEscape:!0,closeOnHashChange:!0,inputValue:null,inputPlaceholder:"",inputType:"text",inputPattern:null,inputValidator:null,inputErrorMessage:"",showConfirmButton:!0,showCancelButton:!1,confirmButtonPosition:"right",confirmButtonHighlight:!1,cancelButtonHighlight:!1,confirmButtonText:"",cancelButtonText:"",confirmButtonClass:"",cancelButtonClass:"",customClass:"",beforeClose:null,dangerouslyUseHTMLString:!1,center:!1,roundButton:!1,distinguishCancelAndClose:!1},As=Ui.a.extend(Ms),Cs=void 0,Ls=void 0,Ps=[],Os=function(t){if(Cs){var e=Cs.callback;"function"===typeof e&&(Ls.showInput?e(Ls.inputValue,t):e(t)),Cs.resolve&&("confirm"===t?Ls.showInput?Cs.resolve({value:Ls.inputValue,action:t}):Cs.resolve(t):!Cs.reject||"cancel"!==t&&"close"!==t||Cs.reject(t))}},Rs=function(){Ls=new As({el:document.createElement("div")}),Ls.callback=Os},ks=function t(){if(Ls||Rs(),Ls.action="",(!Ls.visible||Ls.closeTimer)&&Ps.length>0){Cs=Ps.shift();var e=Cs.options;for(var n in e)e.hasOwnProperty(n)&&(Ls[n]=e[n]);void 0===e.callback&&(Ls.callback=Os);var i=Ls.callback;Ls.callback=function(e,n){i(e,n),t()},Object(Es["isVNode"])(Ls.message)?(Ls.$slots.default=[Ls.message],Ls.message=null):delete Ls.$slots.default,["modal","showClose","closeOnClickModal","closeOnPressEscape","closeOnHashChange"].forEach(function(t){void 0===Ls[t]&&(Ls[t]=!0)}),document.body.appendChild(Ls.$el),Ui.a.nextTick(function(){Ls.visible=!0})}},Ds=function t(e,n){if(!Ui.a.prototype.$isServer){if("string"===typeof e||Object(Es["isVNode"])(e)?(e={message:e},"string"===typeof arguments[1]&&(e.title=arguments[1])):e.callback&&!n&&(n=e.callback),"undefined"!==typeof Promise)return new Promise(function(i,r){Ps.push({options:Se()({},Ts,t.defaults,e),callback:n,resolve:i,reject:r}),ks()});Ps.push({options:Se()({},Ts,t.defaults,e),callback:n}),ks()}};Ds.setDefaults=function(t){Ds.defaults=t},Ds.alert=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":Ss(e))?(n=e,e=""):void 0===e&&(e=""),Ds(Se()({title:e,message:t,$type:"alert",closeOnPressEscape:!1,closeOnClickModal:!1},n))},Ds.confirm=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":Ss(e))?(n=e,e=""):void 0===e&&(e=""),Ds(Se()({title:e,message:t,$type:"confirm",showCancelButton:!0},n))},Ds.prompt=function(t,e,n){return"object"===("undefined"===typeof e?"undefined":Ss(e))?(n=e,e=""):void 0===e&&(e=""),Ds(Se()({title:e,message:t,showCancelButton:!0,showInput:!0,$type:"prompt"},n))},Ds.close=function(){Ls.doClose(),Ls.visible=!1,Ps=[],Cs=null};var Is=Ds,Ns=Is,zs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-breadcrumb",attrs:{"aria-label":"Breadcrumb",role:"navigation"}},[t._t("default")],2)},Bs=[];zs._withStripped=!0;var Fs={name:"ElBreadcrumb",props:{separator:{type:String,default:"/"},separatorClass:{type:String,default:""}},provide:function(){return{elBreadcrumb:this}},mounted:function(){var t=this.$el.querySelectorAll(".el-breadcrumb__item");t.length&&t[t.length-1].setAttribute("aria-current","page")}},js=Fs,Hs=s(js,zs,Bs,!1,null,null,null);Hs.options.__file="packages/breadcrumb/src/breadcrumb.vue";var Us=Hs.exports;Us.install=function(t){t.component(Us.name,Us)};var Vs=Us,Gs=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"el-breadcrumb__item"},[n("span",{ref:"link",class:["el-breadcrumb__inner",t.to?"is-link":""],attrs:{role:"link"}},[t._t("default")],2),t.separatorClass?n("i",{staticClass:"el-breadcrumb__separator",class:t.separatorClass}):n("span",{staticClass:"el-breadcrumb__separator",attrs:{role:"presentation"}},[t._v(t._s(t.separator))])])},Ws=[];Gs._withStripped=!0;var $s={name:"ElBreadcrumbItem",props:{to:{},replace:Boolean},data:function(){return{separator:"",separatorClass:""}},inject:["elBreadcrumb"],mounted:function(){var t=this;this.separator=this.elBreadcrumb.separator,this.separatorClass=this.elBreadcrumb.separatorClass;var e=this.$refs.link;e.setAttribute("role","link"),e.addEventListener("click",function(e){var n=t.to,i=t.$router;n&&i&&(t.replace?i.replace(n):i.push(n))})}},qs=$s,Ys=s(qs,Gs,Ws,!1,null,null,null);Ys.options.__file="packages/breadcrumb/src/breadcrumb-item.vue";var Xs=Ys.exports;Xs.install=function(t){t.component(Xs.name,Xs)};var Zs=Xs,Js=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("form",{staticClass:"el-form",class:[t.labelPosition?"el-form--label-"+t.labelPosition:"",{"el-form--inline":t.inline}]},[t._t("default")],2)},Ks=[];Js._withStripped=!0;var Qs={name:"ElForm",componentName:"ElForm",provide:function(){return{elForm:this}},props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,inlineMessage:Boolean,statusIcon:Boolean,showMessage:{type:Boolean,default:!0},size:String,disabled:Boolean,validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1}},watch:{rules:function(){this.fields.forEach(function(t){t.removeValidateEvents(),t.addValidateEvents()}),this.validateOnRuleChange&&this.validate(function(){})}},computed:{autoLabelWidth:function(){if(!this.potentialLabelWidthArr.length)return 0;var t=Math.max.apply(Math,this.potentialLabelWidthArr);return t?t+"px":""}},data:function(){return{fields:[],potentialLabelWidthArr:[]}},created:function(){var t=this;this.$on("el.form.addField",function(e){e&&t.fields.push(e)}),this.$on("el.form.removeField",function(e){e.prop&&t.fields.splice(t.fields.indexOf(e),1)})},methods:{resetFields:function(){this.model?this.fields.forEach(function(t){t.resetField()}):console.warn("[Element Warn][Form]model is required for resetFields to work.")},clearValidate:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=t.length?"string"===typeof t?this.fields.filter(function(e){return t===e.prop}):this.fields.filter(function(e){return t.indexOf(e.prop)>-1}):this.fields;e.forEach(function(t){t.clearValidate()})},validate:function(t){var e=this;if(this.model){var n=void 0;"function"!==typeof t&&window.Promise&&(n=new window.Promise(function(e,n){t=function(t){t?e(t):n(t)}}));var i=!0,r=0;0===this.fields.length&&t&&t(!0);var o={};return this.fields.forEach(function(n){n.validate("",function(n,a){n&&(i=!1),o=Se()({},o,a),"function"===typeof t&&++r===e.fields.length&&t(i,o)})}),n||void 0}console.warn("[Element Warn][Form]model is required for validate to work!")},validateField:function(t,e){t=[].concat(t);var n=this.fields.filter(function(e){return-1!==t.indexOf(e.prop)});n.length?n.forEach(function(t){t.validate("",e)}):console.warn("[Element Warn]please pass correct props!")},getLabelWidthIndex:function(t){var e=this.potentialLabelWidthArr.indexOf(t);if(-1===e)throw new Error("[ElementForm]unpected width ",t);return e},registerLabelWidth:function(t,e){if(t&&e){var n=this.getLabelWidthIndex(e);this.potentialLabelWidthArr.splice(n,1,t)}else t&&this.potentialLabelWidthArr.push(t)},deregisterLabelWidth:function(t){var e=this.getLabelWidthIndex(t);this.potentialLabelWidthArr.splice(e,1)}}},tl=Qs,el=s(tl,Js,Ks,!1,null,null,null);el.options.__file="packages/form/src/form.vue";var nl=el.exports;nl.install=function(t){t.component(nl.name,nl)};var il=nl,rl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-form-item",class:[{"el-form-item--feedback":t.elForm&&t.elForm.statusIcon,"is-error":"error"===t.validateState,"is-validating":"validating"===t.validateState,"is-success":"success"===t.validateState,"is-required":t.isRequired||t.required,"is-no-asterisk":t.elForm&&t.elForm.hideRequiredAsterisk},t.sizeClass?"el-form-item--"+t.sizeClass:""]},[n("label-wrap",{attrs:{"is-auto-width":t.labelStyle&&"auto"===t.labelStyle.width,"update-all":"auto"===t.form.labelWidth}},[t.label||t.$slots.label?n("label",{staticClass:"el-form-item__label",style:t.labelStyle,attrs:{for:t.labelFor}},[t._t("label",[t._v(t._s(t.label+t.form.labelSuffix))])],2):t._e()]),n("div",{staticClass:"el-form-item__content",style:t.contentStyle},[t._t("default"),n("transition",{attrs:{name:"el-zoom-in-top"}},["error"===t.validateState&&t.showMessage&&t.form.showMessage?t._t("error",[n("div",{staticClass:"el-form-item__error",class:{"el-form-item__error--inline":"boolean"===typeof t.inlineMessage?t.inlineMessage:t.elForm&&t.elForm.inlineMessage||!1}},[t._v("\n          "+t._s(t.validateMessage)+"\n        ")])],{error:t.validateMessage}):t._e()],2)],2)],1)},ol=[];rl._withStripped=!0;var al,sl,ll=n(40),cl=n.n(ll),ul={props:{isAutoWidth:Boolean,updateAll:Boolean},inject:["elForm","elFormItem"],render:function(){var t=arguments[0],e=this.$slots.default;if(!e)return null;if(this.isAutoWidth){var n=this.elForm.autoLabelWidth,i={};if(n&&"auto"!==n){var r=parseInt(n,10)-this.computedWidth;r&&(i.marginLeft=r+"px")}return t("div",{class:"el-form-item__label-wrap",style:i},[e])}return e[0]},methods:{getLabelWidth:function(){if(this.$el&&this.$el.firstElementChild){var t=window.getComputedStyle(this.$el.firstElementChild).width;return Math.ceil(parseFloat(t))}return 0},updateLabelWidth:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"update";this.$slots.default&&this.isAutoWidth&&this.$el.firstElementChild&&("update"===t?this.computedWidth=this.getLabelWidth():"remove"===t&&this.elForm.deregisterLabelWidth(this.computedWidth))}},watch:{computedWidth:function(t,e){this.updateAll&&(this.elForm.registerLabelWidth(t,e),this.elFormItem.updateComputedLabelWidth(t))}},data:function(){return{computedWidth:0}},mounted:function(){this.updateLabelWidth("update")},updated:function(){this.updateLabelWidth("update")},beforeDestroy:function(){this.updateLabelWidth("remove")}},hl=ul,dl=s(hl,al,sl,!1,null,null,null);dl.options.__file="packages/form/src/label-wrap.vue";var pl=dl.exports,fl={name:"ElFormItem",componentName:"ElFormItem",mixins:[C.a],provide:function(){return{elFormItem:this}},inject:["elForm"],props:{label:String,labelWidth:String,prop:String,required:{type:Boolean,default:void 0},rules:[Object,Array],error:String,validateStatus:String,for:String,inlineMessage:{type:[String,Boolean],default:""},showMessage:{type:Boolean,default:!0},size:String},components:{LabelWrap:pl},watch:{error:{immediate:!0,handler:function(t){this.validateMessage=t,this.validateState=t?"error":""}},validateStatus:function(t){this.validateState=t}},computed:{labelFor:function(){return this.for||this.prop},labelStyle:function(){var t={};if("top"===this.form.labelPosition)return t;var e=this.labelWidth||this.form.labelWidth;return e&&(t.width=e),t},contentStyle:function(){var t={},e=this.label;if("top"===this.form.labelPosition||this.form.inline)return t;if(!e&&!this.labelWidth&&this.isNested)return t;var n=this.labelWidth||this.form.labelWidth;return"auto"===n?"auto"===this.labelWidth?t.marginLeft=this.computedLabelWidth:"auto"===this.form.labelWidth&&(t.marginLeft=this.elForm.autoLabelWidth):t.marginLeft=n,t},form:function(){var t=this.$parent,e=t.$options.componentName;while("ElForm"!==e)"ElFormItem"===e&&(this.isNested=!0),t=t.$parent,e=t.$options.componentName;return t},fieldValue:function(){var t=this.form.model;if(t&&this.prop){var e=this.prop;return-1!==e.indexOf(":")&&(e=e.replace(/:/,".")),Object(y["getPropByPath"])(t,e,!0).v}},isRequired:function(){var t=this.getRules(),e=!1;return t&&t.length&&t.every(function(t){return!t.required||(e=!0,!1)}),e},_formSize:function(){return this.elForm.size},elFormItemSize:function(){return this.size||this._formSize},sizeClass:function(){return this.elFormItemSize||(this.$ELEMENT||{}).size}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1,computedLabelWidth:""}},methods:{validate:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y["noop"];this.validateDisabled=!1;var i=this.getFilteredRule(t);if((!i||0===i.length)&&void 0===this.required)return n(),!0;this.validateState="validating";var r={};i&&i.length>0&&i.forEach(function(t){delete t.trigger}),r[this.prop]=i;var o=new cl.a(r),a={};a[this.prop]=this.fieldValue,o.validate(a,{firstFields:!0},function(t,i){e.validateState=t?"error":"success",e.validateMessage=t?t[0].message:"",n(e.validateMessage,i),e.elForm&&e.elForm.$emit("validate",e.prop,!t,e.validateMessage||null)})},clearValidate:function(){this.validateState="",this.validateMessage="",this.validateDisabled=!1},resetField:function(){var t=this;this.validateState="",this.validateMessage="";var e=this.form.model,n=this.fieldValue,i=this.prop;-1!==i.indexOf(":")&&(i=i.replace(/:/,"."));var r=Object(y["getPropByPath"])(e,i,!0);this.validateDisabled=!0,Array.isArray(n)?r.o[r.k]=[].concat(this.initialValue):r.o[r.k]=this.initialValue,this.$nextTick(function(){t.validateDisabled=!1}),this.broadcast("ElTimeSelect","fieldReset",this.initialValue)},getRules:function(){var t=this.form.rules,e=this.rules,n=void 0!==this.required?{required:!!this.required}:[],i=Object(y["getPropByPath"])(t,this.prop||"");return t=t?i.o[this.prop||""]||i.v:[],[].concat(e||t||[]).concat(n)},getFilteredRule:function(t){var e=this.getRules();return e.filter(function(e){return!e.trigger||""===t||(Array.isArray(e.trigger)?e.trigger.indexOf(t)>-1:e.trigger===t)}).map(function(t){return Se()({},t)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){this.validateDisabled?this.validateDisabled=!1:this.validate("change")},updateComputedLabelWidth:function(t){this.computedLabelWidth=t?t+"px":""},addValidateEvents:function(){var t=this.getRules();(t.length||void 0!==this.required)&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))},removeValidateEvents:function(){this.$off()}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var t=this.fieldValue;Array.isArray(t)&&(t=[].concat(t)),Object.defineProperty(this,"initialValue",{value:t}),this.addValidateEvents()}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}},ml=fl,vl=s(ml,rl,ol,!1,null,null,null);vl.options.__file="packages/form/src/form-item.vue";var gl=vl.exports;gl.install=function(t){t.component(gl.name,gl)};var yl=gl,bl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-tabs__active-bar",class:"is-"+t.rootTabs.tabPosition,style:t.barStyle})},xl=[];bl._withStripped=!0;var wl={name:"TabBar",props:{tabs:Array},inject:["rootTabs"],computed:{barStyle:{get:function(){var t=this,e={},n=0,i=0,r=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height",o="width"===r?"x":"y",a=function(t){return t.toLowerCase().replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()})};this.tabs.every(function(e,o){var s=Object(y["arrayFind"])(t.$parent.$refs.tabs||[],function(t){return t.id.replace("tab-","")===e.paneName});if(!s)return!1;if(e.active){i=s["client"+a(r)];var l=window.getComputedStyle(s);return"width"===r&&t.tabs.length>1&&(i-=parseFloat(l.paddingLeft)+parseFloat(l.paddingRight)),"width"===r&&(n+=parseFloat(l.paddingLeft)),!1}return n+=s["client"+a(r)],!0});var s="translate"+a(o)+"("+n+"px)";return e[r]=i+"px",e.transform=s,e.msTransform=s,e.webkitTransform=s,e}}}},_l=wl,Ml=s(_l,bl,xl,!1,null,null,null);Ml.options.__file="packages/tabs/src/tab-bar.vue";var El=Ml.exports;function Sl(){}var Tl,Al,Cl=function(t){return t.toLowerCase().replace(/( |^)[a-z]/g,function(t){return t.toUpperCase()})},Ll={name:"TabNav",components:{TabBar:El},inject:["rootTabs"],props:{panes:Array,currentName:String,editable:Boolean,onTabClick:{type:Function,default:Sl},onTabRemove:{type:Function,default:Sl},type:String,stretch:Boolean},data:function(){return{scrollable:!1,navOffset:0,isFocus:!1,focusable:!0}},computed:{navStyle:function(){var t=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"X":"Y";return{transform:"translate"+t+"(-"+this.navOffset+"px)"}},sizeName:function(){return-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"width":"height"}},methods:{scrollPrev:function(){var t=this.$refs.navScroll["offset"+Cl(this.sizeName)],e=this.navOffset;if(e){var n=e>t?e-t:0;this.navOffset=n}},scrollNext:function(){var t=this.$refs.nav["offset"+Cl(this.sizeName)],e=this.$refs.navScroll["offset"+Cl(this.sizeName)],n=this.navOffset;if(!(t-n<=e)){var i=t-n>2*e?n+e:t-e;this.navOffset=i}},scrollToActiveTab:function(){if(this.scrollable){var t=this.$refs.nav,e=this.$el.querySelector(".is-active");if(e){var n=this.$refs.navScroll,i=-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition),r=e.getBoundingClientRect(),o=n.getBoundingClientRect(),a=i?t.offsetWidth-o.width:t.offsetHeight-o.height,s=this.navOffset,l=s;i?(r.left<o.left&&(l=s-(o.left-r.left)),r.right>o.right&&(l=s+r.right-o.right)):(r.top<o.top&&(l=s-(o.top-r.top)),r.bottom>o.bottom&&(l=s+(r.bottom-o.bottom))),l=Math.max(l,0),this.navOffset=Math.min(l,a)}}},update:function(){if(this.$refs.nav){var t=this.sizeName,e=this.$refs.nav["offset"+Cl(t)],n=this.$refs.navScroll["offset"+Cl(t)],i=this.navOffset;if(n<e){var r=this.navOffset;this.scrollable=this.scrollable||{},this.scrollable.prev=r,this.scrollable.next=r+n<e,e-r<n&&(this.navOffset=e-n)}else this.scrollable=!1,i>0&&(this.navOffset=0)}},changeTab:function(t){var e=t.keyCode,n=void 0,i=void 0,r=void 0;-1!==[37,38,39,40].indexOf(e)&&(r=t.currentTarget.querySelectorAll("[role=tab]"),i=Array.prototype.indexOf.call(r,t.target),n=37===e||38===e?0===i?r.length-1:i-1:i<r.length-1?i+1:0,r[n].focus(),r[n].click(),this.setFocus())},setFocus:function(){this.focusable&&(this.isFocus=!0)},removeFocus:function(){this.isFocus=!1},visibilityChangeHandler:function(){var t=this,e=document.visibilityState;"hidden"===e?this.focusable=!1:"visible"===e&&setTimeout(function(){t.focusable=!0},50)},windowBlurHandler:function(){this.focusable=!1},windowFocusHandler:function(){var t=this;setTimeout(function(){t.focusable=!0},50)}},updated:function(){this.update()},render:function(t){var e=this,n=this.type,i=this.panes,r=this.editable,o=this.stretch,a=this.onTabClick,s=this.onTabRemove,l=this.navStyle,c=this.scrollable,u=this.scrollNext,h=this.scrollPrev,d=this.changeTab,p=this.setFocus,f=this.removeFocus,m=c?[t("span",{class:["el-tabs__nav-prev",c.prev?"":"is-disabled"],on:{click:h}},[t("i",{class:"el-icon-arrow-left"})]),t("span",{class:["el-tabs__nav-next",c.next?"":"is-disabled"],on:{click:u}},[t("i",{class:"el-icon-arrow-right"})])]:null,v=this._l(i,function(n,i){var o,l=n.name||n.index||i,c=n.isClosable||r;n.index=""+i;var u=c?t("span",{class:"el-icon-close",on:{click:function(t){s(n,t)}}}):null,h=n.$slots.label||n.label,d=n.active?0:-1;return t("div",{class:(o={"el-tabs__item":!0},o["is-"+e.rootTabs.tabPosition]=!0,o["is-active"]=n.active,o["is-disabled"]=n.disabled,o["is-closable"]=c,o["is-focus"]=e.isFocus,o),attrs:{id:"tab-"+l,"aria-controls":"pane-"+l,role:"tab","aria-selected":n.active,tabindex:d},key:"tab-"+l,ref:"tabs",refInFor:!0,on:{focus:function(){p()},blur:function(){f()},click:function(t){f(),a(n,l,t)},keydown:function(t){!c||46!==t.keyCode&&8!==t.keyCode||s(n,t)}}},[h,u])});return t("div",{class:["el-tabs__nav-wrap",c?"is-scrollable":"","is-"+this.rootTabs.tabPosition]},[m,t("div",{class:["el-tabs__nav-scroll"],ref:"navScroll"},[t("div",{class:["el-tabs__nav","is-"+this.rootTabs.tabPosition,o&&-1!==["top","bottom"].indexOf(this.rootTabs.tabPosition)?"is-stretch":""],ref:"nav",style:l,attrs:{role:"tablist"},on:{keydown:d}},[n?null:t("tab-bar",{attrs:{tabs:i}}),v])])])},mounted:function(){var t=this;Object(ti["addResizeListener"])(this.$el,this.update),document.addEventListener("visibilitychange",this.visibilityChangeHandler),window.addEventListener("blur",this.windowBlurHandler),window.addEventListener("focus",this.windowFocusHandler),setTimeout(function(){t.scrollToActiveTab()},0)},beforeDestroy:function(){this.$el&&this.update&&Object(ti["removeResizeListener"])(this.$el,this.update),document.removeEventListener("visibilitychange",this.visibilityChangeHandler),window.removeEventListener("blur",this.windowBlurHandler),window.removeEventListener("focus",this.windowFocusHandler)}},Pl=Ll,Ol=s(Pl,Tl,Al,!1,null,null,null);Ol.options.__file="packages/tabs/src/tab-nav.vue";var Rl,kl,Dl=Ol.exports,Il={name:"ElTabs",components:{TabNav:Dl},props:{type:String,activeName:String,closable:Boolean,addable:Boolean,value:{},editable:Boolean,tabPosition:{type:String,default:"top"},beforeLeave:Function,stretch:Boolean},provide:function(){return{rootTabs:this}},data:function(){return{currentName:this.value||this.activeName,panes:[]}},watch:{activeName:function(t){this.setCurrentName(t)},value:function(t){this.setCurrentName(t)},currentName:function(t){var e=this;this.$refs.nav&&this.$nextTick(function(){e.$refs.nav.$nextTick(function(t){e.$refs.nav.scrollToActiveTab()})})}},methods:{calcPaneInstances:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.$slots.default){var n=this.$slots.default.filter(function(t){return t.tag&&t.componentOptions&&"ElTabPane"===t.componentOptions.Ctor.options.name}),i=n.map(function(t){var e=t.componentInstance;return e}),r=!(i.length===this.panes.length&&i.every(function(e,n){return e===t.panes[n]}));(e||r)&&(this.panes=i)}else 0!==this.panes.length&&(this.panes=[])},handleTabClick:function(t,e,n){t.disabled||(this.setCurrentName(e),this.$emit("tab-click",t,n))},handleTabRemove:function(t,e){t.disabled||(e.stopPropagation(),this.$emit("edit",t.name,"remove"),this.$emit("tab-remove",t.name))},handleTabAdd:function(){this.$emit("edit",null,"add"),this.$emit("tab-add")},setCurrentName:function(t){var e=this,n=function(){e.currentName=t,e.$emit("input",t)};if(this.currentName!==t&&this.beforeLeave){var i=this.beforeLeave(t,this.currentName);i&&i.then?i.then(function(){n(),e.$refs.nav&&e.$refs.nav.removeFocus()},function(){}):!1!==i&&n()}else n()}},render:function(t){var e,n=this.type,i=this.handleTabClick,r=this.handleTabRemove,o=this.handleTabAdd,a=this.currentName,s=this.panes,l=this.editable,c=this.addable,u=this.tabPosition,h=this.stretch,d=l||c?t("span",{class:"el-tabs__new-tab",on:{click:o,keydown:function(t){13===t.keyCode&&o()}},attrs:{tabindex:"0"}},[t("i",{class:"el-icon-plus"})]):null,p={props:{currentName:a,onTabClick:i,onTabRemove:r,editable:l,type:n,panes:s,stretch:h},ref:"nav"},f=t("div",{class:["el-tabs__header","is-"+u]},[d,t("tab-nav",p)]),m=t("div",{class:"el-tabs__content"},[this.$slots.default]);return t("div",{class:(e={"el-tabs":!0,"el-tabs--card":"card"===n},e["el-tabs--"+u]=!0,e["el-tabs--border-card"]="border-card"===n,e)},["bottom"!==u?[f,m]:[m,f]])},created:function(){this.currentName||this.setCurrentName("0"),this.$on("tab-nav-update",this.calcPaneInstances.bind(null,!0))},mounted:function(){this.calcPaneInstances()},updated:function(){this.calcPaneInstances()}},Nl=Il,zl=s(Nl,Rl,kl,!1,null,null,null);zl.options.__file="packages/tabs/src/tabs.vue";var Bl=zl.exports;Bl.install=function(t){t.component(Bl.name,Bl)};var Fl=Bl,jl=function(){var t=this,e=t.$createElement,n=t._self._c||e;return!t.lazy||t.loaded||t.active?n("div",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],staticClass:"el-tab-pane",attrs:{role:"tabpanel","aria-hidden":!t.active,id:"pane-"+t.paneName,"aria-labelledby":"tab-"+t.paneName}},[t._t("default")],2):t._e()},Hl=[];jl._withStripped=!0;var Ul={name:"ElTabPane",componentName:"ElTabPane",props:{label:String,labelContent:Function,name:String,closable:Boolean,disabled:Boolean,lazy:Boolean},data:function(){return{index:null,loaded:!1}},computed:{isClosable:function(){return this.closable||this.$parent.closable},active:function(){var t=this.$parent.currentName===(this.name||this.index);return t&&(this.loaded=!0),t},paneName:function(){return this.name||this.index}},updated:function(){this.$parent.$emit("tab-nav-update")}},Vl=Ul,Gl=s(Vl,jl,Hl,!1,null,null,null);Gl.options.__file="packages/tabs/src/tab-pane.vue";var Wl=Gl.exports;Wl.install=function(t){t.component(Wl.name,Wl)};var $l,ql,Yl=Wl,Xl={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(t){return-1!==["dark","light","plain"].indexOf(t)}}},methods:{handleClose:function(t){t.stopPropagation(),this.$emit("close",t)},handleClick:function(t){this.$emit("click",t)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(t){var e=this.type,n=this.tagSize,i=this.hit,r=this.effect,o=["el-tag",e?"el-tag--"+e:"",n?"el-tag--"+n:"",r?"el-tag--"+r:"",i&&"is-hit"],a=t("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&t("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?a:t("transition",{attrs:{name:"el-zoom-in-center"}},[a])}},Zl=Xl,Jl=s(Zl,$l,ql,!1,null,null,null);Jl.options.__file="packages/tag/src/tag.vue";var Kl=Jl.exports;Kl.install=function(t){t.component(Kl.name,Kl)};var Ql=Kl,tc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-tree",class:{"el-tree--highlight-current":t.highlightCurrent,"is-dragging":!!t.dragState.draggingNode,"is-drop-not-allow":!t.dragState.allowDrop,"is-drop-inner":"inner"===t.dragState.dropType},attrs:{role:"tree"}},[t._l(t.root.childNodes,function(e){return n("el-tree-node",{key:t.getNodeKey(e),attrs:{node:e,props:t.props,"render-after-expand":t.renderAfterExpand,"show-checkbox":t.showCheckbox,"render-content":t.renderContent},on:{"node-expand":t.handleNodeExpand}})}),t.isEmpty?n("div",{staticClass:"el-tree__empty-block"},[n("span",{staticClass:"el-tree__empty-text"},[t._v(t._s(t.emptyText))])]):t._e(),n("div",{directives:[{name:"show",rawName:"v-show",value:t.dragState.showDropIndicator,expression:"dragState.showDropIndicator"}],ref:"dropIndicator",staticClass:"el-tree__drop-indicator"})],2)},ec=[];tc._withStripped=!0;var nc="$treeNodeId",ic=function(t,e){e&&!e[nc]&&Object.defineProperty(e,nc,{value:t.id,enumerable:!1,configurable:!1,writable:!1})},rc=function(t,e){return t?e[t]:e[nc]},oc=function(t,e){var n=t;while(n&&"BODY"!==n.tagName){if(n.__vue__&&n.__vue__.$options.name===e)return n.__vue__;n=n.parentNode}return null},ac=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function sc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var lc=function(t){for(var e=!0,n=!0,i=!0,r=0,o=t.length;r<o;r++){var a=t[r];(!0!==a.checked||a.indeterminate)&&(e=!1,a.disabled||(i=!1)),(!1!==a.checked||a.indeterminate)&&(n=!1)}return{all:e,none:n,allWithoutDisable:i,half:!e&&!n}},cc=function t(e){if(0!==e.childNodes.length){var n=lc(e.childNodes),i=n.all,r=n.none,o=n.half;i?(e.checked=!0,e.indeterminate=!1):o?(e.checked=!1,e.indeterminate=!0):r&&(e.checked=!1,e.indeterminate=!1);var a=e.parent;a&&0!==a.level&&(e.store.checkStrictly||t(a))}},uc=function(t,e){var n=t.store.props,i=t.data||{},r=n[e];if("function"===typeof r)return r(i,t);if("string"===typeof r)return i[r];if("undefined"===typeof r){var o=i[e];return void 0===o?"":o}},hc=0,dc=function(){function t(e){for(var n in sc(this,t),this.id=hc++,this.text=null,this.checked=!1,this.indeterminate=!1,this.data=null,this.expanded=!1,this.parent=null,this.visible=!0,this.isCurrent=!1,e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.level=0,this.loaded=!1,this.childNodes=[],this.loading=!1,this.parent&&(this.level=this.parent.level+1);var i=this.store;if(!i)throw new Error("[Node]store is required!");i.registerNode(this);var r=i.props;if(r&&"undefined"!==typeof r.isLeaf){var o=uc(this,"isLeaf");"boolean"===typeof o&&(this.isLeafByUser=o)}if(!0!==i.lazy&&this.data?(this.setData(this.data),i.defaultExpandAll&&(this.expanded=!0)):this.level>0&&i.lazy&&i.defaultExpandAll&&this.expand(),Array.isArray(this.data)||ic(this,this.data),this.data){var a=i.defaultExpandedKeys,s=i.key;s&&a&&-1!==a.indexOf(this.key)&&this.expand(null,i.autoExpandParent),s&&void 0!==i.currentNodeKey&&this.key===i.currentNodeKey&&(i.currentNode=this,i.currentNode.isCurrent=!0),i.lazy&&i._initDefaultCheckedNode(this),this.updateLeafState()}}return t.prototype.setData=function(t){Array.isArray(t)||ic(this,t),this.data=t,this.childNodes=[];var e=void 0;e=0===this.level&&this.data instanceof Array?this.data:uc(this,"children")||[];for(var n=0,i=e.length;n<i;n++)this.insertChild({data:e[n]})},t.prototype.contains=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=function n(i){for(var r=i.childNodes||[],o=!1,a=0,s=r.length;a<s;a++){var l=r[a];if(l===t||e&&n(l)){o=!0;break}}return o};return n(this)},t.prototype.remove=function(){var t=this.parent;t&&t.removeChild(this)},t.prototype.insertChild=function(e,n,i){if(!e)throw new Error("insertChild error: child is required.");if(!(e instanceof t)){if(!i){var r=this.getChildren(!0);-1===r.indexOf(e.data)&&("undefined"===typeof n||n<0?r.push(e.data):r.splice(n,0,e.data))}Se()(e,{parent:this,store:this.store}),e=new t(e)}e.level=this.level+1,"undefined"===typeof n||n<0?this.childNodes.push(e):this.childNodes.splice(n,0,e),this.updateLeafState()},t.prototype.insertBefore=function(t,e){var n=void 0;e&&(n=this.childNodes.indexOf(e)),this.insertChild(t,n)},t.prototype.insertAfter=function(t,e){var n=void 0;e&&(n=this.childNodes.indexOf(e),-1!==n&&(n+=1)),this.insertChild(t,n)},t.prototype.removeChild=function(t){var e=this.getChildren()||[],n=e.indexOf(t.data);n>-1&&e.splice(n,1);var i=this.childNodes.indexOf(t);i>-1&&(this.store&&this.store.deregisterNode(t),t.parent=null,this.childNodes.splice(i,1)),this.updateLeafState()},t.prototype.removeChildByData=function(t){for(var e=null,n=0;n<this.childNodes.length;n++)if(this.childNodes[n].data===t){e=this.childNodes[n];break}e&&this.removeChild(e)},t.prototype.expand=function(t,e){var n=this,i=function(){if(e){var i=n.parent;while(i.level>0)i.expanded=!0,i=i.parent}n.expanded=!0,t&&t()};this.shouldLoadData()?this.loadData(function(t){t instanceof Array&&(n.checked?n.setChecked(!0,!0):n.store.checkStrictly||cc(n),i())}):i()},t.prototype.doCreateChildren=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.forEach(function(t){e.insertChild(Se()({data:t},n),void 0,!0)})},t.prototype.collapse=function(){this.expanded=!1},t.prototype.shouldLoadData=function(){return!0===this.store.lazy&&this.store.load&&!this.loaded},t.prototype.updateLeafState=function(){if(!0!==this.store.lazy||!0===this.loaded||"undefined"===typeof this.isLeafByUser){var t=this.childNodes;!this.store.lazy||!0===this.store.lazy&&!0===this.loaded?this.isLeaf=!t||0===t.length:this.isLeaf=!1}else this.isLeaf=this.isLeafByUser},t.prototype.setChecked=function(t,e,n,i){var r=this;if(this.indeterminate="half"===t,this.checked=!0===t,!this.store.checkStrictly){if(!this.shouldLoadData()||this.store.checkDescendants){var o=lc(this.childNodes),a=o.all,s=o.allWithoutDisable;this.isLeaf||a||!s||(this.checked=!1,t=!1);var l=function(){if(e){for(var n=r.childNodes,o=0,a=n.length;o<a;o++){var s=n[o];i=i||!1!==t;var l=s.disabled?s.checked:i;s.setChecked(l,e,!0,i)}var c=lc(n),u=c.half,h=c.all;h||(r.checked=h,r.indeterminate=u)}};if(this.shouldLoadData())return void this.loadData(function(){l(),cc(r)},{checked:!1!==t});l()}var c=this.parent;c&&0!==c.level&&(n||cc(c))}},t.prototype.getChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(0===this.level)return this.data;var e=this.data;if(!e)return null;var n=this.store.props,i="children";return n&&(i=n.children||"children"),void 0===e[i]&&(e[i]=null),t&&!e[i]&&(e[i]=[]),e[i]},t.prototype.updateChildren=function(){var t=this,e=this.getChildren()||[],n=this.childNodes.map(function(t){return t.data}),i={},r=[];e.forEach(function(t,e){var o=t[nc],a=!!o&&Object(y["arrayFindIndex"])(n,function(t){return t[nc]===o})>=0;a?i[o]={index:e,data:t}:r.push({index:e,data:t})}),this.store.lazy||n.forEach(function(e){i[e[nc]]||t.removeChildByData(e)}),r.forEach(function(e){var n=e.index,i=e.data;t.insertChild({data:i},n)}),this.updateLeafState()},t.prototype.loadData=function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!0!==this.store.lazy||!this.store.load||this.loaded||this.loading&&!Object.keys(n).length)t&&t.call(this);else{this.loading=!0;var i=function(i){e.loaded=!0,e.loading=!1,e.childNodes=[],e.doCreateChildren(i,n),e.updateLeafState(),t&&t.call(e,i)};this.store.load(this,i)}},ac(t,[{key:"label",get:function(){return uc(this,"label")}},{key:"key",get:function(){var t=this.store.key;return this.data?this.data[t]:null}},{key:"disabled",get:function(){return uc(this,"disabled")}},{key:"nextSibling",get:function(){var t=this.parent;if(t){var e=t.childNodes.indexOf(this);if(e>-1)return t.childNodes[e+1]}return null}},{key:"previousSibling",get:function(){var t=this.parent;if(t){var e=t.childNodes.indexOf(this);if(e>-1)return e>0?t.childNodes[e-1]:null}return null}}]),t}(),pc=dc,fc="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function mc(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var vc=function(){function t(e){var n=this;for(var i in mc(this,t),this.currentNode=null,this.currentNodeKey=null,e)e.hasOwnProperty(i)&&(this[i]=e[i]);if(this.nodesMap={},this.root=new pc({data:this.data,store:this}),this.lazy&&this.load){var r=this.load;r(this.root,function(t){n.root.doCreateChildren(t),n._initDefaultCheckedNodes()})}else this._initDefaultCheckedNodes()}return t.prototype.filter=function(t){var e=this.filterNodeMethod,n=this.lazy,i=function i(r){var o=r.root?r.root.childNodes:r.childNodes;if(o.forEach(function(n){n.visible=e.call(n,t,n.data,n),i(n)}),!r.visible&&o.length){var a=!0;a=!o.some(function(t){return t.visible}),r.root?r.root.visible=!1===a:r.visible=!1===a}t&&(!r.visible||r.isLeaf||n||r.expand())};i(this)},t.prototype.setData=function(t){var e=t!==this.root.data;e?(this.root.setData(t),this._initDefaultCheckedNodes()):this.root.updateChildren()},t.prototype.getNode=function(t){if(t instanceof pc)return t;var e="object"!==("undefined"===typeof t?"undefined":fc(t))?t:rc(this.key,t);return this.nodesMap[e]||null},t.prototype.insertBefore=function(t,e){var n=this.getNode(e);n.parent.insertBefore({data:t},n)},t.prototype.insertAfter=function(t,e){var n=this.getNode(e);n.parent.insertAfter({data:t},n)},t.prototype.remove=function(t){var e=this.getNode(t);e&&e.parent&&(e===this.currentNode&&(this.currentNode=null),e.parent.removeChild(e))},t.prototype.append=function(t,e){var n=e?this.getNode(e):this.root;n&&n.insertChild({data:t})},t.prototype._initDefaultCheckedNodes=function(){var t=this,e=this.defaultCheckedKeys||[],n=this.nodesMap;e.forEach(function(e){var i=n[e];i&&i.setChecked(!0,!t.checkStrictly)})},t.prototype._initDefaultCheckedNode=function(t){var e=this.defaultCheckedKeys||[];-1!==e.indexOf(t.key)&&t.setChecked(!0,!this.checkStrictly)},t.prototype.setDefaultCheckedKey=function(t){t!==this.defaultCheckedKeys&&(this.defaultCheckedKeys=t,this._initDefaultCheckedNodes())},t.prototype.registerNode=function(t){var e=this.key;if(e&&t&&t.data){var n=t.key;void 0!==n&&(this.nodesMap[t.key]=t)}},t.prototype.deregisterNode=function(t){var e=this,n=this.key;n&&t&&t.data&&(t.childNodes.forEach(function(t){e.deregisterNode(t)}),delete this.nodesMap[t.key])},t.prototype.getCheckedNodes=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],i=function i(r){var o=r.root?r.root.childNodes:r.childNodes;o.forEach(function(r){(r.checked||e&&r.indeterminate)&&(!t||t&&r.isLeaf)&&n.push(r.data),i(r)})};return i(this),n},t.prototype.getCheckedKeys=function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.getCheckedNodes(e).map(function(e){return(e||{})[t.key]})},t.prototype.getHalfCheckedNodes=function(){var t=[],e=function e(n){var i=n.root?n.root.childNodes:n.childNodes;i.forEach(function(n){n.indeterminate&&t.push(n.data),e(n)})};return e(this),t},t.prototype.getHalfCheckedKeys=function(){var t=this;return this.getHalfCheckedNodes().map(function(e){return(e||{})[t.key]})},t.prototype._getAllNodes=function(){var t=[],e=this.nodesMap;for(var n in e)e.hasOwnProperty(n)&&t.push(e[n]);return t},t.prototype.updateChildren=function(t,e){var n=this.nodesMap[t];if(n){for(var i=n.childNodes,r=i.length-1;r>=0;r--){var o=i[r];this.remove(o.data)}for(var a=0,s=e.length;a<s;a++){var l=e[a];this.append(l,n.data)}}},t.prototype._setCheckedKeys=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments[2],i=this._getAllNodes().sort(function(t,e){return e.level-t.level}),r=Object.create(null),o=Object.keys(n);i.forEach(function(t){return t.setChecked(!1,!1)});for(var a=0,s=i.length;a<s;a++){var l=i[a],c=l.data[t].toString(),u=o.indexOf(c)>-1;if(u){var h=l.parent;while(h&&h.level>0)r[h.data[t]]=!0,h=h.parent;l.isLeaf||this.checkStrictly?l.setChecked(!0,!1):(l.setChecked(!0,!0),e&&function(){l.setChecked(!1,!1);var t=function t(e){var n=e.childNodes;n.forEach(function(e){e.isLeaf||e.setChecked(!1,!1),t(e)})};t(l)}())}else l.checked&&!r[c]&&l.setChecked(!1,!1)}},t.prototype.setCheckedNodes=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.key,i={};t.forEach(function(t){i[(t||{})[n]]=!0}),this._setCheckedKeys(n,e,i)},t.prototype.setCheckedKeys=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.defaultCheckedKeys=t;var n=this.key,i={};t.forEach(function(t){i[t]=!0}),this._setCheckedKeys(n,e,i)},t.prototype.setDefaultExpandedKeys=function(t){var e=this;t=t||[],this.defaultExpandedKeys=t,t.forEach(function(t){var n=e.getNode(t);n&&n.expand(null,e.autoExpandParent)})},t.prototype.setChecked=function(t,e,n){var i=this.getNode(t);i&&i.setChecked(!!e,n)},t.prototype.getCurrentNode=function(){return this.currentNode},t.prototype.setCurrentNode=function(t){var e=this.currentNode;e&&(e.isCurrent=!1),this.currentNode=t,this.currentNode.isCurrent=!0},t.prototype.setUserCurrentNode=function(t){var e=t[this.key],n=this.nodesMap[e];this.setCurrentNode(n)},t.prototype.setCurrentNodeKey=function(t){if(null===t||void 0===t)return this.currentNode&&(this.currentNode.isCurrent=!1),void(this.currentNode=null);var e=this.getNode(t);e&&this.setCurrentNode(e)},t}(),gc=vc,yc=function(){var t=this,e=this,n=e.$createElement,i=e._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.node.visible,expression:"node.visible"}],ref:"node",staticClass:"el-tree-node",class:{"is-expanded":e.expanded,"is-current":e.node.isCurrent,"is-hidden":!e.node.visible,"is-focusable":!e.node.disabled,"is-checked":!e.node.disabled&&e.node.checked},attrs:{role:"treeitem",tabindex:"-1","aria-expanded":e.expanded,"aria-disabled":e.node.disabled,"aria-checked":e.node.checked,draggable:e.tree.draggable},on:{click:function(t){return t.stopPropagation(),e.handleClick(t)},contextmenu:function(e){return t.handleContextMenu(e)},dragstart:function(t){return t.stopPropagation(),e.handleDragStart(t)},dragover:function(t){return t.stopPropagation(),e.handleDragOver(t)},dragend:function(t){return t.stopPropagation(),e.handleDragEnd(t)},drop:function(t){return t.stopPropagation(),e.handleDrop(t)}}},[i("div",{staticClass:"el-tree-node__content",style:{"padding-left":(e.node.level-1)*e.tree.indent+"px"}},[i("span",{class:[{"is-leaf":e.node.isLeaf,expanded:!e.node.isLeaf&&e.expanded},"el-tree-node__expand-icon",e.tree.iconClass?e.tree.iconClass:"el-icon-caret-right"],on:{click:function(t){return t.stopPropagation(),e.handleExpandIconClick(t)}}}),e.showCheckbox?i("el-checkbox",{attrs:{indeterminate:e.node.indeterminate,disabled:!!e.node.disabled},on:{change:e.handleCheckChange},nativeOn:{click:function(t){t.stopPropagation()}},model:{value:e.node.checked,callback:function(t){e.$set(e.node,"checked",t)},expression:"node.checked"}}):e._e(),e.node.loading?i("span",{staticClass:"el-tree-node__loading-icon el-icon-loading"}):e._e(),i("node-content",{attrs:{node:e.node}})],1),i("el-collapse-transition",[!e.renderAfterExpand||e.childNodeRendered?i("div",{directives:[{name:"show",rawName:"v-show",value:e.expanded,expression:"expanded"}],staticClass:"el-tree-node__children",attrs:{role:"group","aria-expanded":e.expanded}},e._l(e.node.childNodes,function(t){return i("el-tree-node",{key:e.getNodeKey(t),attrs:{"render-content":e.renderContent,"render-after-expand":e.renderAfterExpand,"show-checkbox":e.showCheckbox,node:t},on:{"node-expand":e.handleChildNodeExpand}})}),1):e._e()])],1)},bc=[];yc._withStripped=!0;var xc={name:"ElTreeNode",componentName:"ElTreeNode",mixins:[C.a],props:{node:{default:function(){return{}}},props:{},renderContent:Function,renderAfterExpand:{type:Boolean,default:!0},showCheckbox:{type:Boolean,default:!1}},components:{ElCollapseTransition:qt.a,ElCheckbox:Di.a,NodeContent:{props:{node:{required:!0}},render:function(t){var e=this.$parent,n=e.tree,i=this.node,r=i.data,o=i.store;return e.renderContent?e.renderContent.call(e._renderProxy,t,{_self:n.$vnode.context,node:i,data:r,store:o}):n.$scopedSlots.default?n.$scopedSlots.default({node:i,data:r}):t("span",{class:"el-tree-node__label"},[i.label])}}},data:function(){return{tree:null,expanded:!1,childNodeRendered:!1,oldChecked:null,oldIndeterminate:null}},watch:{"node.indeterminate":function(t){this.handleSelectChange(this.node.checked,t)},"node.checked":function(t){this.handleSelectChange(t,this.node.indeterminate)},"node.expanded":function(t){var e=this;this.$nextTick(function(){return e.expanded=t}),t&&(this.childNodeRendered=!0)}},methods:{getNodeKey:function(t){return rc(this.tree.nodeKey,t.data)},handleSelectChange:function(t,e){this.oldChecked!==t&&this.oldIndeterminate!==e&&this.tree.$emit("check-change",this.node.data,t,e),this.oldChecked=t,this.indeterminate=e},handleClick:function(){var t=this.tree.store;t.setCurrentNode(this.node),this.tree.$emit("current-change",t.currentNode?t.currentNode.data:null,t.currentNode),this.tree.currentNode=this,this.tree.expandOnClickNode&&this.handleExpandIconClick(),this.tree.checkOnClickNode&&!this.node.disabled&&this.handleCheckChange(null,{target:{checked:!this.node.checked}}),this.tree.$emit("node-click",this.node.data,this.node,this)},handleContextMenu:function(t){this.tree._events["node-contextmenu"]&&this.tree._events["node-contextmenu"].length>0&&(t.stopPropagation(),t.preventDefault()),this.tree.$emit("node-contextmenu",t,this.node.data,this.node,this)},handleExpandIconClick:function(){this.node.isLeaf||(this.expanded?(this.tree.$emit("node-collapse",this.node.data,this.node,this),this.node.collapse()):(this.node.expand(),this.$emit("node-expand",this.node.data,this.node,this)))},handleCheckChange:function(t,e){var n=this;this.node.setChecked(e.target.checked,!this.tree.checkStrictly),this.$nextTick(function(){var t=n.tree.store;n.tree.$emit("check",n.node.data,{checkedNodes:t.getCheckedNodes(),checkedKeys:t.getCheckedKeys(),halfCheckedNodes:t.getHalfCheckedNodes(),halfCheckedKeys:t.getHalfCheckedKeys()})})},handleChildNodeExpand:function(t,e,n){this.broadcast("ElTreeNode","tree-node-expand",e),this.tree.$emit("node-expand",t,e,n)},handleDragStart:function(t){this.tree.draggable&&this.tree.$emit("tree-node-drag-start",t,this)},handleDragOver:function(t){this.tree.draggable&&(this.tree.$emit("tree-node-drag-over",t,this),t.preventDefault())},handleDrop:function(t){t.preventDefault()},handleDragEnd:function(t){this.tree.draggable&&this.tree.$emit("tree-node-drag-end",t,this)}},created:function(){var t=this,e=this.$parent;e.isTree?this.tree=e:this.tree=e.tree;var n=this.tree;n||console.warn("Can not find node's tree.");var i=n.props||{},r=i["children"]||"children";this.$watch("node.data."+r,function(){t.node.updateChildren()}),this.node.expanded&&(this.expanded=!0,this.childNodeRendered=!0),this.tree.accordion&&this.$on("tree-node-expand",function(e){t.node!==e&&t.node.collapse()})}},wc=xc,_c=s(wc,yc,bc,!1,null,null,null);_c.options.__file="packages/tree/src/tree-node.vue";var Mc=_c.exports,Ec={name:"ElTree",mixins:[C.a],components:{ElTreeNode:Mc},data:function(){return{store:null,root:null,currentNode:null,treeItems:null,checkboxItems:[],dragState:{showDropIndicator:!1,draggingNode:null,dropNode:null,allowDrop:!0}}},props:{data:{type:Array},emptyText:{type:String,default:function(){return Object(fs["t"])("el.tree.emptyText")}},renderAfterExpand:{type:Boolean,default:!0},nodeKey:String,checkStrictly:Boolean,defaultExpandAll:Boolean,expandOnClickNode:{type:Boolean,default:!0},checkOnClickNode:Boolean,checkDescendants:{type:Boolean,default:!1},autoExpandParent:{type:Boolean,default:!0},defaultCheckedKeys:Array,defaultExpandedKeys:Array,currentNodeKey:[String,Number],renderContent:Function,showCheckbox:{type:Boolean,default:!1},draggable:{type:Boolean,default:!1},allowDrag:Function,allowDrop:Function,props:{default:function(){return{children:"children",label:"label",disabled:"disabled"}}},lazy:{type:Boolean,default:!1},highlightCurrent:Boolean,load:Function,filterNodeMethod:Function,accordion:Boolean,indent:{type:Number,default:18},iconClass:String},computed:{children:{set:function(t){this.data=t},get:function(){return this.data}},treeItemArray:function(){return Array.prototype.slice.call(this.treeItems)},isEmpty:function(){var t=this.root.childNodes;return!t||0===t.length||t.every(function(t){var e=t.visible;return!e})}},watch:{defaultCheckedKeys:function(t){this.store.setDefaultCheckedKey(t)},defaultExpandedKeys:function(t){this.store.defaultExpandedKeys=t,this.store.setDefaultExpandedKeys(t)},data:function(t){this.store.setData(t)},checkboxItems:function(t){Array.prototype.forEach.call(t,function(t){t.setAttribute("tabindex",-1)})},checkStrictly:function(t){this.store.checkStrictly=t}},methods:{filter:function(t){if(!this.filterNodeMethod)throw new Error("[Tree] filterNodeMethod is required when filter");this.store.filter(t)},getNodeKey:function(t){return rc(this.nodeKey,t.data)},getNodePath:function(t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getNodePath");var e=this.store.getNode(t);if(!e)return[];var n=[e.data],i=e.parent;while(i&&i!==this.root)n.push(i.data),i=i.parent;return n.reverse()},getCheckedNodes:function(t,e){return this.store.getCheckedNodes(t,e)},getCheckedKeys:function(t){return this.store.getCheckedKeys(t)},getCurrentNode:function(){var t=this.store.getCurrentNode();return t?t.data:null},getCurrentKey:function(){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in getCurrentKey");var t=this.getCurrentNode();return t?t[this.nodeKey]:null},setCheckedNodes:function(t,e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedNodes");this.store.setCheckedNodes(t,e)},setCheckedKeys:function(t,e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCheckedKeys");this.store.setCheckedKeys(t,e)},setChecked:function(t,e,n){this.store.setChecked(t,e,n)},getHalfCheckedNodes:function(){return this.store.getHalfCheckedNodes()},getHalfCheckedKeys:function(){return this.store.getHalfCheckedKeys()},setCurrentNode:function(t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentNode");this.store.setUserCurrentNode(t)},setCurrentKey:function(t){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in setCurrentKey");this.store.setCurrentNodeKey(t)},getNode:function(t){return this.store.getNode(t)},remove:function(t){this.store.remove(t)},append:function(t,e){this.store.append(t,e)},insertBefore:function(t,e){this.store.insertBefore(t,e)},insertAfter:function(t,e){this.store.insertAfter(t,e)},handleNodeExpand:function(t,e,n){this.broadcast("ElTreeNode","tree-node-expand",e),this.$emit("node-expand",t,e,n)},updateKeyChildren:function(t,e){if(!this.nodeKey)throw new Error("[Tree] nodeKey is required in updateKeyChild");this.store.updateChildren(t,e)},initTabIndex:function(){this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]");var t=this.$el.querySelectorAll(".is-checked[role=treeitem]");t.length?t[0].setAttribute("tabindex",0):this.treeItems[0]&&this.treeItems[0].setAttribute("tabindex",0)},handleKeydown:function(t){var e=t.target;if(-1!==e.className.indexOf("el-tree-node")){var n=t.keyCode;this.treeItems=this.$el.querySelectorAll(".is-focusable[role=treeitem]");var i=this.treeItemArray.indexOf(e),r=void 0;[38,40].indexOf(n)>-1&&(t.preventDefault(),r=38===n?0!==i?i-1:0:i<this.treeItemArray.length-1?i+1:0,this.treeItemArray[r].focus()),[37,39].indexOf(n)>-1&&(t.preventDefault(),e.click());var o=e.querySelector('[type="checkbox"]');[13,32].indexOf(n)>-1&&o&&(t.preventDefault(),o.click())}}},created:function(){var t=this;this.isTree=!0,this.store=new gc({key:this.nodeKey,data:this.data,lazy:this.lazy,props:this.props,load:this.load,currentNodeKey:this.currentNodeKey,checkStrictly:this.checkStrictly,checkDescendants:this.checkDescendants,defaultCheckedKeys:this.defaultCheckedKeys,defaultExpandedKeys:this.defaultExpandedKeys,autoExpandParent:this.autoExpandParent,defaultExpandAll:this.defaultExpandAll,filterNodeMethod:this.filterNodeMethod}),this.root=this.store.root;var e=this.dragState;this.$on("tree-node-drag-start",function(n,i){if("function"===typeof t.allowDrag&&!t.allowDrag(i.node))return n.preventDefault(),!1;n.dataTransfer.effectAllowed="move";try{n.dataTransfer.setData("text/plain","")}catch(r){}e.draggingNode=i,t.$emit("node-drag-start",i.node,n)}),this.$on("tree-node-drag-over",function(n,i){var r=oc(n.target,"ElTreeNode"),o=e.dropNode;o&&o!==r&&Object(Bt["removeClass"])(o.$el,"is-drop-inner");var a=e.draggingNode;if(a&&r){var s=!0,l=!0,c=!0,u=!0;"function"===typeof t.allowDrop&&(s=t.allowDrop(a.node,r.node,"prev"),u=l=t.allowDrop(a.node,r.node,"inner"),c=t.allowDrop(a.node,r.node,"next")),n.dataTransfer.dropEffect=l?"move":"none",(s||l||c)&&o!==r&&(o&&t.$emit("node-drag-leave",a.node,o.node,n),t.$emit("node-drag-enter",a.node,r.node,n)),(s||l||c)&&(e.dropNode=r),r.node.nextSibling===a.node&&(c=!1),r.node.previousSibling===a.node&&(s=!1),r.node.contains(a.node,!1)&&(l=!1),(a.node===r.node||a.node.contains(r.node))&&(s=!1,l=!1,c=!1);var h=r.$el.getBoundingClientRect(),d=t.$el.getBoundingClientRect(),p=void 0,f=s?l?.25:c?.45:1:-1,m=c?l?.75:s?.55:0:1,v=-9999,g=n.clientY-h.top;p=g<h.height*f?"before":g>h.height*m?"after":l?"inner":"none";var y=r.$el.querySelector(".el-tree-node__expand-icon").getBoundingClientRect(),b=t.$refs.dropIndicator;"before"===p?v=y.top-d.top:"after"===p&&(v=y.bottom-d.top),b.style.top=v+"px",b.style.left=y.right-d.left+"px","inner"===p?Object(Bt["addClass"])(r.$el,"is-drop-inner"):Object(Bt["removeClass"])(r.$el,"is-drop-inner"),e.showDropIndicator="before"===p||"after"===p,e.allowDrop=e.showDropIndicator||u,e.dropType=p,t.$emit("node-drag-over",a.node,r.node,n)}}),this.$on("tree-node-drag-end",function(n){var i=e.draggingNode,r=e.dropType,o=e.dropNode;if(n.preventDefault(),n.dataTransfer.dropEffect="move",i&&o){var a={data:i.node.data};"none"!==r&&i.node.remove(),"before"===r?o.node.parent.insertBefore(a,o.node):"after"===r?o.node.parent.insertAfter(a,o.node):"inner"===r&&o.node.insertChild(a),"none"!==r&&t.store.registerNode(a),Object(Bt["removeClass"])(o.$el,"is-drop-inner"),t.$emit("node-drag-end",i.node,o.node,r,n),"none"!==r&&t.$emit("node-drop",i.node,o.node,r,n)}i&&!o&&t.$emit("node-drag-end",i.node,null,r,n),e.showDropIndicator=!1,e.draggingNode=null,e.dropNode=null,e.allowDrop=!0})},mounted:function(){this.initTabIndex(),this.$el.addEventListener("keydown",this.handleKeydown)},updated:function(){this.treeItems=this.$el.querySelectorAll("[role=treeitem]"),this.checkboxItems=this.$el.querySelectorAll("input[type=checkbox]")}},Sc=Ec,Tc=s(Sc,tc,ec,!1,null,null,null);Tc.options.__file="packages/tree/src/tree.vue";var Ac=Tc.exports;Ac.install=function(t){t.component(Ac.name,Ac)};var Cc=Ac,Lc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-alert-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-alert",class:[t.typeClass,t.center?"is-center":"","is-"+t.effect],attrs:{role:"alert"}},[t.showIcon?n("i",{staticClass:"el-alert__icon",class:[t.iconClass,t.isBigIcon]}):t._e(),n("div",{staticClass:"el-alert__content"},[t.title||t.$slots.title?n("span",{staticClass:"el-alert__title",class:[t.isBoldTitle]},[t._t("title",[t._v(t._s(t.title))])],2):t._e(),t.$slots.default&&!t.description?n("p",{staticClass:"el-alert__description"},[t._t("default")],2):t._e(),t.description&&!t.$slots.default?n("p",{staticClass:"el-alert__description"},[t._v(t._s(t.description))]):t._e(),n("i",{directives:[{name:"show",rawName:"v-show",value:t.closable,expression:"closable"}],staticClass:"el-alert__closebtn",class:{"is-customed":""!==t.closeText,"el-icon-close":""===t.closeText},on:{click:function(e){t.close()}}},[t._v(t._s(t.closeText))])])])])},Pc=[];Lc._withStripped=!0;var Oc={success:"el-icon-success",warning:"el-icon-warning",error:"el-icon-error"},Rc={name:"ElAlert",props:{title:{type:String,default:""},description:{type:String,default:""},type:{type:String,default:"info"},closable:{type:Boolean,default:!0},closeText:{type:String,default:""},showIcon:Boolean,center:Boolean,effect:{type:String,default:"light",validator:function(t){return-1!==["light","dark"].indexOf(t)}}},data:function(){return{visible:!0}},methods:{close:function(){this.visible=!1,this.$emit("close")}},computed:{typeClass:function(){return"el-alert--"+this.type},iconClass:function(){return Oc[this.type]||"el-icon-info"},isBigIcon:function(){return this.description||this.$slots.default?"is-big":""},isBoldTitle:function(){return this.description||this.$slots.default?"is-bold":""}}},kc=Rc,Dc=s(kc,Lc,Pc,!1,null,null,null);Dc.options.__file="packages/alert/src/main.vue";var Ic=Dc.exports;Ic.install=function(t){t.component(Ic.name,Ic)};var Nc=Ic,zc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-notification-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-notification",t.customClass,t.horizontalClass],style:t.positionStyle,attrs:{role:"alert"},on:{mouseenter:function(e){t.clearTimer()},mouseleave:function(e){t.startTimer()},click:t.click}},[t.type||t.iconClass?n("i",{staticClass:"el-notification__icon",class:[t.typeClass,t.iconClass]}):t._e(),n("div",{staticClass:"el-notification__group",class:{"is-with-icon":t.typeClass||t.iconClass}},[n("h2",{staticClass:"el-notification__title",domProps:{textContent:t._s(t.title)}}),n("div",{directives:[{name:"show",rawName:"v-show",value:t.message,expression:"message"}],staticClass:"el-notification__content"},[t._t("default",[t.dangerouslyUseHTMLString?n("p",{domProps:{innerHTML:t._s(t.message)}}):n("p",[t._v(t._s(t.message))])])],2),t.showClose?n("div",{staticClass:"el-notification__closeBtn el-icon-close",on:{click:function(e){return e.stopPropagation(),t.close(e)}}}):t._e()])])])},Bc=[];zc._withStripped=!0;var Fc={success:"success",info:"info",warning:"warning",error:"error"},jc={data:function(){return{visible:!1,title:"",message:"",duration:4500,type:"",showClose:!0,customClass:"",iconClass:"",onClose:null,onClick:null,closed:!1,verticalOffset:0,timer:null,dangerouslyUseHTMLString:!1,position:"top-right"}},computed:{typeClass:function(){return this.type&&Fc[this.type]?"el-icon-"+Fc[this.type]:""},horizontalClass:function(){return this.position.indexOf("right")>-1?"right":"left"},verticalProperty:function(){return/^top-/.test(this.position)?"top":"bottom"},positionStyle:function(){var t;return t={},t[this.verticalProperty]=this.verticalOffset+"px",t}},watch:{closed:function(t){t&&(this.visible=!1,this.$el.addEventListener("transitionend",this.destroyElement))}},methods:{destroyElement:function(){this.$el.removeEventListener("transitionend",this.destroyElement),this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},click:function(){"function"===typeof this.onClick&&this.onClick()},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose()},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout(function(){t.closed||t.close()},this.duration))},keydown:function(t){46===t.keyCode||8===t.keyCode?this.clearTimer():27===t.keyCode?this.closed||this.close():this.startTimer()}},mounted:function(){var t=this;this.duration>0&&(this.timer=setTimeout(function(){t.closed||t.close()},this.duration)),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},Hc=jc,Uc=s(Hc,zc,Bc,!1,null,null,null);Uc.options.__file="packages/notification/src/main.vue";var Vc=Uc.exports,Gc=Ui.a.extend(Vc),Wc=void 0,$c=[],qc=1,Yc=function t(e){if(!Ui.a.prototype.$isServer){e=Se()({},e);var n=e.onClose,i="notification_"+qc++,r=e.position||"top-right";e.onClose=function(){t.close(i,n)},Wc=new Gc({data:e}),Object(Es["isVNode"])(e.message)&&(Wc.$slots.default=[e.message],e.message="REPLACED_BY_VNODE"),Wc.id=i,Wc.$mount(),document.body.appendChild(Wc.$el),Wc.visible=!0,Wc.dom=Wc.$el,Wc.dom.style.zIndex=M["PopupManager"].nextZIndex();var o=e.offset||0;return $c.filter(function(t){return t.position===r}).forEach(function(t){o+=t.$el.offsetHeight+16}),o+=16,Wc.verticalOffset=o,$c.push(Wc),Wc}};["success","warning","info","error"].forEach(function(t){Yc[t]=function(e){return("string"===typeof e||Object(Es["isVNode"])(e))&&(e={message:e}),e.type=t,Yc(e)}}),Yc.close=function(t,e){var n=-1,i=$c.length,r=$c.filter(function(e,i){return e.id===t&&(n=i,!0)})[0];if(r&&("function"===typeof e&&e(r),$c.splice(n,1),!(i<=1)))for(var o=r.position,a=r.dom.offsetHeight,s=n;s<i-1;s++)$c[s].position===o&&($c[s].dom.style[r.verticalProperty]=parseInt($c[s].dom.style[r.verticalProperty],10)-a-16+"px")},Yc.closeAll=function(){for(var t=$c.length-1;t>=0;t--)$c[t].close()};var Xc=Yc,Zc=Xc,Jc=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-slider",class:{"is-vertical":t.vertical,"el-slider--with-input":t.showInput},attrs:{role:"slider","aria-valuemin":t.min,"aria-valuemax":t.max,"aria-orientation":t.vertical?"vertical":"horizontal","aria-disabled":t.sliderDisabled}},[t.showInput&&!t.range?n("el-input-number",{ref:"input",staticClass:"el-slider__input",attrs:{step:t.step,disabled:t.sliderDisabled,controls:t.showInputControls,min:t.min,max:t.max,debounce:t.debounce,size:t.inputSize},on:{change:t.emitChange},model:{value:t.firstValue,callback:function(e){t.firstValue=e},expression:"firstValue"}}):t._e(),n("div",{ref:"slider",staticClass:"el-slider__runway",class:{"show-input":t.showInput,disabled:t.sliderDisabled},style:t.runwayStyle,on:{click:t.onSliderClick}},[n("div",{staticClass:"el-slider__bar",style:t.barStyle}),n("slider-button",{ref:"button1",attrs:{vertical:t.vertical,"tooltip-class":t.tooltipClass},model:{value:t.firstValue,callback:function(e){t.firstValue=e},expression:"firstValue"}}),t.range?n("slider-button",{ref:"button2",attrs:{vertical:t.vertical,"tooltip-class":t.tooltipClass},model:{value:t.secondValue,callback:function(e){t.secondValue=e},expression:"secondValue"}}):t._e(),t._l(t.stops,function(e,i){return t.showStops?n("div",{key:i,staticClass:"el-slider__stop",style:t.getStopStyle(e)}):t._e()}),t.markList.length>0?[n("div",t._l(t.markList,function(e,i){return n("div",{key:i,staticClass:"el-slider__stop el-slider__marks-stop",style:t.getStopStyle(e.position)})}),0),n("div",{staticClass:"el-slider__marks"},t._l(t.markList,function(e,i){return n("slider-marker",{key:i,style:t.getStopStyle(e.position),attrs:{mark:e.mark}})}),1)]:t._e()],2)],1)},Kc=[];Jc._withStripped=!0;var Qc=n(41),tu=n.n(Qc),eu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"button",staticClass:"el-slider__button-wrapper",class:{hover:t.hovering,dragging:t.dragging},style:t.wrapperStyle,attrs:{tabindex:"0"},on:{mouseenter:t.handleMouseEnter,mouseleave:t.handleMouseLeave,mousedown:t.onButtonDown,touchstart:t.onButtonDown,focus:t.handleMouseEnter,blur:t.handleMouseLeave,keydown:[function(e){return"button"in e||!t._k(e.keyCode,"left",37,e.key,["Left","ArrowLeft"])?"button"in e&&0!==e.button?null:t.onLeftKeyDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"right",39,e.key,["Right","ArrowRight"])?"button"in e&&2!==e.button?null:t.onRightKeyDown(e):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?(e.preventDefault(),t.onLeftKeyDown(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t.onRightKeyDown(e)):null}]}},[n("el-tooltip",{ref:"tooltip",attrs:{placement:"top","popper-class":t.tooltipClass,disabled:!t.showTooltip}},[n("span",{attrs:{slot:"content"},slot:"content"},[t._v(t._s(t.formatValue))]),n("div",{staticClass:"el-slider__button",class:{hover:t.hovering,dragging:t.dragging}})])],1)},nu=[];eu._withStripped=!0;var iu={name:"ElSliderButton",components:{ElTooltip:re.a},props:{value:{type:Number,default:0},vertical:{type:Boolean,default:!1},tooltipClass:String},data:function(){return{hovering:!1,dragging:!1,isClick:!1,startX:0,currentX:0,startY:0,currentY:0,startPosition:0,newPosition:null,oldValue:this.value}},computed:{disabled:function(){return this.$parent.sliderDisabled},max:function(){return this.$parent.max},min:function(){return this.$parent.min},step:function(){return this.$parent.step},showTooltip:function(){return this.$parent.showTooltip},precision:function(){return this.$parent.precision},currentPosition:function(){return(this.value-this.min)/(this.max-this.min)*100+"%"},enableFormat:function(){return this.$parent.formatTooltip instanceof Function},formatValue:function(){return this.enableFormat&&this.$parent.formatTooltip(this.value)||this.value},wrapperStyle:function(){return this.vertical?{bottom:this.currentPosition}:{left:this.currentPosition}}},watch:{dragging:function(t){this.$parent.dragging=t}},methods:{displayTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!0)},hideTooltip:function(){this.$refs.tooltip&&(this.$refs.tooltip.showPopper=!1)},handleMouseEnter:function(){this.hovering=!0,this.displayTooltip()},handleMouseLeave:function(){this.hovering=!1,this.hideTooltip()},onButtonDown:function(t){this.disabled||(t.preventDefault(),this.onDragStart(t),window.addEventListener("mousemove",this.onDragging),window.addEventListener("touchmove",this.onDragging),window.addEventListener("mouseup",this.onDragEnd),window.addEventListener("touchend",this.onDragEnd),window.addEventListener("contextmenu",this.onDragEnd))},onLeftKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)-this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onRightKeyDown:function(){this.disabled||(this.newPosition=parseFloat(this.currentPosition)+this.step/(this.max-this.min)*100,this.setPosition(this.newPosition),this.$parent.emitChange())},onDragStart:function(t){this.dragging=!0,this.isClick=!0,"touchstart"===t.type&&(t.clientY=t.touches[0].clientY,t.clientX=t.touches[0].clientX),this.vertical?this.startY=t.clientY:this.startX=t.clientX,this.startPosition=parseFloat(this.currentPosition),this.newPosition=this.startPosition},onDragging:function(t){if(this.dragging){this.isClick=!1,this.displayTooltip(),this.$parent.resetSize();var e=0;"touchmove"===t.type&&(t.clientY=t.touches[0].clientY,t.clientX=t.touches[0].clientX),this.vertical?(this.currentY=t.clientY,e=(this.startY-this.currentY)/this.$parent.sliderSize*100):(this.currentX=t.clientX,e=(this.currentX-this.startX)/this.$parent.sliderSize*100),this.newPosition=this.startPosition+e,this.setPosition(this.newPosition)}},onDragEnd:function(){var t=this;this.dragging&&(setTimeout(function(){t.dragging=!1,t.hideTooltip(),t.isClick||(t.setPosition(t.newPosition),t.$parent.emitChange())},0),window.removeEventListener("mousemove",this.onDragging),window.removeEventListener("touchmove",this.onDragging),window.removeEventListener("mouseup",this.onDragEnd),window.removeEventListener("touchend",this.onDragEnd),window.removeEventListener("contextmenu",this.onDragEnd))},setPosition:function(t){var e=this;if(null!==t&&!isNaN(t)){t<0?t=0:t>100&&(t=100);var n=100/((this.max-this.min)/this.step),i=Math.round(t/n),r=i*n*(this.max-this.min)*.01+this.min;r=parseFloat(r.toFixed(this.precision)),this.$emit("input",r),this.$nextTick(function(){e.displayTooltip(),e.$refs.tooltip&&e.$refs.tooltip.updatePopper()}),this.dragging||this.value===this.oldValue||(this.oldValue=this.value)}}}},ru=iu,ou=s(ru,eu,nu,!1,null,null,null);ou.options.__file="packages/slider/src/button.vue";var au=ou.exports,su={name:"ElMarker",props:{mark:{type:[String,Object]}},render:function(){var t=arguments[0],e="string"===typeof this.mark?this.mark:this.mark.label;return t("div",{class:"el-slider__marks-text",style:this.mark.style||{}},[e])}},lu={name:"ElSlider",mixins:[C.a],inject:{elForm:{default:""}},props:{min:{type:Number,default:0},max:{type:Number,default:100},step:{type:Number,default:1},value:{type:[Number,Array],default:0},showInput:{type:Boolean,default:!1},showInputControls:{type:Boolean,default:!0},inputSize:{type:String,default:"small"},showStops:{type:Boolean,default:!1},showTooltip:{type:Boolean,default:!0},formatTooltip:Function,disabled:{type:Boolean,default:!1},range:{type:Boolean,default:!1},vertical:{type:Boolean,default:!1},height:{type:String},debounce:{type:Number,default:300},label:{type:String},tooltipClass:String,marks:Object},components:{ElInputNumber:tu.a,SliderButton:au,SliderMarker:su},data:function(){return{firstValue:null,secondValue:null,oldValue:null,dragging:!1,sliderSize:1}},watch:{value:function(t,e){this.dragging||Array.isArray(t)&&Array.isArray(e)&&t.every(function(t,n){return t===e[n]})||this.setValues()},dragging:function(t){t||this.setValues()},firstValue:function(t){this.range?this.$emit("input",[this.minValue,this.maxValue]):this.$emit("input",t)},secondValue:function(){this.range&&this.$emit("input",[this.minValue,this.maxValue])},min:function(){this.setValues()},max:function(){this.setValues()}},methods:{valueChanged:function(){var t=this;return this.range?![this.minValue,this.maxValue].every(function(e,n){return e===t.oldValue[n]}):this.value!==this.oldValue},setValues:function(){if(this.min>this.max)console.error("[Element Error][Slider]min should not be greater than max.");else{var t=this.value;this.range&&Array.isArray(t)?t[1]<this.min?this.$emit("input",[this.min,this.min]):t[0]>this.max?this.$emit("input",[this.max,this.max]):t[0]<this.min?this.$emit("input",[this.min,t[1]]):t[1]>this.max?this.$emit("input",[t[0],this.max]):(this.firstValue=t[0],this.secondValue=t[1],this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",[this.minValue,this.maxValue]),this.oldValue=t.slice())):this.range||"number"!==typeof t||isNaN(t)||(t<this.min?this.$emit("input",this.min):t>this.max?this.$emit("input",this.max):(this.firstValue=t,this.valueChanged()&&(this.dispatch("ElFormItem","el.form.change",t),this.oldValue=t)))}},setPosition:function(t){var e=this.min+t*(this.max-this.min)/100;if(this.range){var n=void 0;n=Math.abs(this.minValue-e)<Math.abs(this.maxValue-e)?this.firstValue<this.secondValue?"button1":"button2":this.firstValue>this.secondValue?"button1":"button2",this.$refs[n].setPosition(t)}else this.$refs.button1.setPosition(t)},onSliderClick:function(t){if(!this.sliderDisabled&&!this.dragging){if(this.resetSize(),this.vertical){var e=this.$refs.slider.getBoundingClientRect().bottom;this.setPosition((e-t.clientY)/this.sliderSize*100)}else{var n=this.$refs.slider.getBoundingClientRect().left;this.setPosition((t.clientX-n)/this.sliderSize*100)}this.emitChange()}},resetSize:function(){this.$refs.slider&&(this.sliderSize=this.$refs.slider["client"+(this.vertical?"Height":"Width")])},emitChange:function(){var t=this;this.$nextTick(function(){t.$emit("change",t.range?[t.minValue,t.maxValue]:t.value)})},getStopStyle:function(t){return this.vertical?{bottom:t+"%"}:{left:t+"%"}}},computed:{stops:function(){var t=this;if(!this.showStops||this.min>this.max)return[];if(0===this.step)return[];for(var e=(this.max-this.min)/this.step,n=100*this.step/(this.max-this.min),i=[],r=1;r<e;r++)i.push(r*n);return this.range?i.filter(function(e){return e<100*(t.minValue-t.min)/(t.max-t.min)||e>100*(t.maxValue-t.min)/(t.max-t.min)}):i.filter(function(e){return e>100*(t.firstValue-t.min)/(t.max-t.min)})},markList:function(){var t=this;if(!this.marks)return[];var e=Object.keys(this.marks);return e.map(parseFloat).sort(function(t,e){return t-e}).filter(function(e){return e<=t.max&&e>=t.min}).map(function(e){return{point:e,position:100*(e-t.min)/(t.max-t.min),mark:t.marks[e]}})},minValue:function(){return Math.min(this.firstValue,this.secondValue)},maxValue:function(){return Math.max(this.firstValue,this.secondValue)},barSize:function(){return this.range?100*(this.maxValue-this.minValue)/(this.max-this.min)+"%":100*(this.firstValue-this.min)/(this.max-this.min)+"%"},barStart:function(){return this.range?100*(this.minValue-this.min)/(this.max-this.min)+"%":"0%"},precision:function(){var t=[this.min,this.max,this.step].map(function(t){var e=(""+t).split(".")[1];return e?e.length:0});return Math.max.apply(null,t)},runwayStyle:function(){return this.vertical?{height:this.height}:{}},barStyle:function(){return this.vertical?{height:this.barSize,bottom:this.barStart}:{width:this.barSize,left:this.barStart}},sliderDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},mounted:function(){var t=void 0;this.range?(Array.isArray(this.value)?(this.firstValue=Math.max(this.min,this.value[0]),this.secondValue=Math.min(this.max,this.value[1])):(this.firstValue=this.min,this.secondValue=this.max),this.oldValue=[this.firstValue,this.secondValue],t=this.firstValue+"-"+this.secondValue):("number"!==typeof this.value||isNaN(this.value)?this.firstValue=this.min:this.firstValue=Math.min(this.max,Math.max(this.min,this.value)),this.oldValue=this.firstValue,t=this.firstValue),this.$el.setAttribute("aria-valuetext",t),this.$el.setAttribute("aria-label",this.label?this.label:"slider between "+this.min+" and "+this.max),this.resetSize(),window.addEventListener("resize",this.resetSize)},beforeDestroy:function(){window.removeEventListener("resize",this.resetSize)}},cu=lu,uu=s(cu,Jc,Kc,!1,null,null,null);uu.options.__file="packages/slider/src/main.vue";var hu=uu.exports;hu.install=function(t){t.component(hu.name,hu)};var du=hu,pu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-loading-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-loading-mask",class:[t.customClass,{"is-fullscreen":t.fullscreen}],style:{backgroundColor:t.background||""}},[n("div",{staticClass:"el-loading-spinner"},[t.spinner?n("i",{class:t.spinner}):n("svg",{staticClass:"circular",attrs:{viewBox:"25 25 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"50",cy:"50",r:"20",fill:"none"}})]),t.text?n("p",{staticClass:"el-loading-text"},[t._v(t._s(t.text))]):t._e()])])])},fu=[];pu._withStripped=!0;var mu={data:function(){return{text:null,spinner:null,background:null,fullscreen:!0,visible:!1,customClass:""}},methods:{handleAfterLeave:function(){this.$emit("after-leave")},setText:function(t){this.text=t}}},vu=mu,gu=s(vu,pu,fu,!1,null,null,null);gu.options.__file="packages/loading/src/loading.vue";var yu=gu.exports,bu=n(32),xu=n.n(bu),wu=Ui.a.extend(yu),_u={install:function(t){if(!t.prototype.$isServer){var e=function(e,i){i.value?t.nextTick(function(){i.modifiers.fullscreen?(e.originalPosition=Object(Bt["getStyle"])(document.body,"position"),e.originalOverflow=Object(Bt["getStyle"])(document.body,"overflow"),e.maskStyle.zIndex=M["PopupManager"].nextZIndex(),Object(Bt["addClass"])(e.mask,"is-fullscreen"),n(document.body,e,i)):(Object(Bt["removeClass"])(e.mask,"is-fullscreen"),i.modifiers.body?(e.originalPosition=Object(Bt["getStyle"])(document.body,"position"),["top","left"].forEach(function(t){var n="top"===t?"scrollTop":"scrollLeft";e.maskStyle[t]=e.getBoundingClientRect()[t]+document.body[n]+document.documentElement[n]-parseInt(Object(Bt["getStyle"])(document.body,"margin-"+t),10)+"px"}),["height","width"].forEach(function(t){e.maskStyle[t]=e.getBoundingClientRect()[t]+"px"}),n(document.body,e,i)):(e.originalPosition=Object(Bt["getStyle"])(e,"position"),n(e,e,i)))}):(xu()(e.instance,function(t){if(e.instance.hiding){e.domVisible=!1;var n=i.modifiers.fullscreen||i.modifiers.body?document.body:e;Object(Bt["removeClass"])(n,"el-loading-parent--relative"),Object(Bt["removeClass"])(n,"el-loading-parent--hidden"),e.instance.hiding=!1}},300,!0),e.instance.visible=!1,e.instance.hiding=!0)},n=function(e,n,i){n.domVisible||"none"===Object(Bt["getStyle"])(n,"display")||"hidden"===Object(Bt["getStyle"])(n,"visibility")?n.domVisible&&!0===n.instance.hiding&&(n.instance.visible=!0,n.instance.hiding=!1):(Object.keys(n.maskStyle).forEach(function(t){n.mask.style[t]=n.maskStyle[t]}),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(Bt["addClass"])(e,"el-loading-parent--relative"),i.modifiers.fullscreen&&i.modifiers.lock&&Object(Bt["addClass"])(e,"el-loading-parent--hidden"),n.domVisible=!0,e.appendChild(n.mask),t.nextTick(function(){n.instance.hiding?n.instance.$emit("after-leave"):n.instance.visible=!0}),n.domInserted=!0)};t.directive("loading",{bind:function(t,n,i){var r=t.getAttribute("element-loading-text"),o=t.getAttribute("element-loading-spinner"),a=t.getAttribute("element-loading-background"),s=t.getAttribute("element-loading-custom-class"),l=i.context,c=new wu({el:document.createElement("div"),data:{text:l&&l[r]||r,spinner:l&&l[o]||o,background:l&&l[a]||a,customClass:l&&l[s]||s,fullscreen:!!n.modifiers.fullscreen}});t.instance=c,t.mask=c.$el,t.maskStyle={},n.value&&e(t,n)},update:function(t,n){t.instance.setText(t.getAttribute("element-loading-text")),n.oldValue!==n.value&&e(t,n)},unbind:function(t,n){t.domInserted&&(t.mask&&t.mask.parentNode&&t.mask.parentNode.removeChild(t.mask),e(t,{value:!1,modifiers:n.modifiers})),t.instance&&t.instance.$destroy()}})}}},Mu=_u,Eu=Ui.a.extend(yu),Su={text:null,fullscreen:!0,body:!1,lock:!1,customClass:""},Tu=void 0;Eu.prototype.originalPosition="",Eu.prototype.originalOverflow="",Eu.prototype.close=function(){var t=this;this.fullscreen&&(Tu=void 0),xu()(this,function(e){var n=t.fullscreen||t.body?document.body:t.target;Object(Bt["removeClass"])(n,"el-loading-parent--relative"),Object(Bt["removeClass"])(n,"el-loading-parent--hidden"),t.$el&&t.$el.parentNode&&t.$el.parentNode.removeChild(t.$el),t.$destroy()},300),this.visible=!1};var Au=function(t,e,n){var i={};t.fullscreen?(n.originalPosition=Object(Bt["getStyle"])(document.body,"position"),n.originalOverflow=Object(Bt["getStyle"])(document.body,"overflow"),i.zIndex=M["PopupManager"].nextZIndex()):t.body?(n.originalPosition=Object(Bt["getStyle"])(document.body,"position"),["top","left"].forEach(function(e){var n="top"===e?"scrollTop":"scrollLeft";i[e]=t.target.getBoundingClientRect()[e]+document.body[n]+document.documentElement[n]+"px"}),["height","width"].forEach(function(e){i[e]=t.target.getBoundingClientRect()[e]+"px"})):n.originalPosition=Object(Bt["getStyle"])(e,"position"),Object.keys(i).forEach(function(t){n.$el.style[t]=i[t]})},Cu=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ui.a.prototype.$isServer){if(t=Se()({},Su,t),"string"===typeof t.target&&(t.target=document.querySelector(t.target)),t.target=t.target||document.body,t.target!==document.body?t.fullscreen=!1:t.body=!0,t.fullscreen&&Tu)return Tu;var e=t.body?document.body:t.target,n=new Eu({el:document.createElement("div"),data:t});return Au(t,e,n),"absolute"!==n.originalPosition&&"fixed"!==n.originalPosition&&Object(Bt["addClass"])(e,"el-loading-parent--relative"),t.fullscreen&&t.lock&&Object(Bt["addClass"])(e,"el-loading-parent--hidden"),e.appendChild(n.$el),Ui.a.nextTick(function(){n.visible=!0}),t.fullscreen&&(Tu=n),n}},Lu=Cu,Pu={install:function(t){t.use(Mu),t.prototype.$loading=Lu},directive:Mu,service:Lu},Ou=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("i",{class:"el-icon-"+t.name})},Ru=[];Ou._withStripped=!0;var ku={name:"ElIcon",props:{name:String}},Du=ku,Iu=s(Du,Ou,Ru,!1,null,null,null);Iu.options.__file="packages/icon/src/icon.vue";var Nu=Iu.exports;Nu.install=function(t){t.component(Nu.name,Nu)};var zu=Nu,Bu={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var t={};return this.gutter&&(t.marginLeft="-"+this.gutter/2+"px",t.marginRight=t.marginLeft),t}},render:function(t){return t(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)},install:function(t){t.component(Bu.name,Bu)}},Fu=Bu,ju="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hu={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object],xl:[Number,Object]},computed:{gutter:function(){var t=this.$parent;while(t&&"ElRow"!==t.$options.componentName)t=t.$parent;return t?t.gutter:0}},render:function(t){var e=this,n=[],i={};return this.gutter&&(i.paddingLeft=this.gutter/2+"px",i.paddingRight=i.paddingLeft),["span","offset","pull","push"].forEach(function(t){(e[t]||0===e[t])&&n.push("span"!==t?"el-col-"+t+"-"+e[t]:"el-col-"+e[t])}),["xs","sm","md","lg","xl"].forEach(function(t){if("number"===typeof e[t])n.push("el-col-"+t+"-"+e[t]);else if("object"===ju(e[t])){var i=e[t];Object.keys(i).forEach(function(e){n.push("span"!==e?"el-col-"+t+"-"+e+"-"+i[e]:"el-col-"+t+"-"+i[e])})}}),t(this.tag,{class:["el-col",n],style:i},this.$slots.default)},install:function(t){t.component(Hu.name,Hu)}},Uu=Hu,Vu=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition-group",{class:["el-upload-list","el-upload-list--"+t.listType,{"is-disabled":t.disabled}],attrs:{tag:"ul",name:"el-list"}},t._l(t.files,function(e){return n("li",{key:e.uid,class:["el-upload-list__item","is-"+e.status,t.focusing?"focusing":""],attrs:{tabindex:"0"},on:{keydown:function(n){if(!("button"in n)&&t._k(n.keyCode,"delete",[8,46],n.key,["Backspace","Delete","Del"]))return null;!t.disabled&&t.$emit("remove",e)},focus:function(e){t.focusing=!0},blur:function(e){t.focusing=!1},click:function(e){t.focusing=!1}}},[t._t("default",["uploading"!==e.status&&["picture-card","picture"].indexOf(t.listType)>-1?n("img",{staticClass:"el-upload-list__item-thumbnail",attrs:{src:e.url,alt:""}}):t._e(),n("a",{staticClass:"el-upload-list__item-name",on:{click:function(n){t.handleClick(e)}}},[n("i",{staticClass:"el-icon-document"}),t._v(t._s(e.name)+"\n      ")]),n("label",{staticClass:"el-upload-list__item-status-label"},[n("i",{class:{"el-icon-upload-success":!0,"el-icon-circle-check":"text"===t.listType,"el-icon-check":["picture-card","picture"].indexOf(t.listType)>-1}})]),t.disabled?t._e():n("i",{staticClass:"el-icon-close",on:{click:function(n){t.$emit("remove",e)}}}),t.disabled?t._e():n("i",{staticClass:"el-icon-close-tip"},[t._v(t._s(t.t("el.upload.deleteTip")))]),"uploading"===e.status?n("el-progress",{attrs:{type:"picture-card"===t.listType?"circle":"line","stroke-width":"picture-card"===t.listType?6:2,percentage:t.parsePercentage(e.percentage)}}):t._e(),"picture-card"===t.listType?n("span",{staticClass:"el-upload-list__item-actions"},[t.handlePreview&&"picture-card"===t.listType?n("span",{staticClass:"el-upload-list__item-preview",on:{click:function(n){t.handlePreview(e)}}},[n("i",{staticClass:"el-icon-zoom-in"})]):t._e(),t.disabled?t._e():n("span",{staticClass:"el-upload-list__item-delete",on:{click:function(n){t.$emit("remove",e)}}},[n("i",{staticClass:"el-icon-delete"})])]):t._e()],{file:e})],2)}),0)},Gu=[];Vu._withStripped=!0;var Wu=n(33),$u=n.n(Wu),qu={name:"ElUploadList",mixins:[g.a],data:function(){return{focusing:!1}},components:{ElProgress:$u.a},props:{files:{type:Array,default:function(){return[]}},disabled:{type:Boolean,default:!1},handlePreview:Function,listType:String},methods:{parsePercentage:function(t){return parseInt(t,10)},handleClick:function(t){this.handlePreview&&this.handlePreview(t)}}},Yu=qu,Xu=s(Yu,Vu,Gu,!1,null,null,null);Xu.options.__file="packages/upload/src/upload-list.vue";var Zu=Xu.exports,Ju=n(24),Ku=n.n(Ju);function Qu(t,e,n){var i=void 0;i=n.response?""+(n.response.error||n.response):n.responseText?""+n.responseText:"fail to post "+t+" "+n.status;var r=new Error(i);return r.status=n.status,r.method="post",r.url=t,r}function th(t){var e=t.responseText||t.response;if(!e)return e;try{return JSON.parse(e)}catch(n){return e}}function eh(t){if("undefined"!==typeof XMLHttpRequest){var e=new XMLHttpRequest,n=t.action;e.upload&&(e.upload.onprogress=function(e){e.total>0&&(e.percent=e.loaded/e.total*100),t.onProgress(e)});var i=new FormData;t.data&&Object.keys(t.data).forEach(function(e){i.append(e,t.data[e])}),i.append(t.filename,t.file,t.file.name),e.onerror=function(e){t.onError(e)},e.onload=function(){if(e.status<200||e.status>=300)return t.onError(Qu(n,t,e));t.onSuccess(th(e))},e.open("post",n,!0),t.withCredentials&&"withCredentials"in e&&(e.withCredentials=!0);var r=t.headers||{};for(var o in r)r.hasOwnProperty(o)&&null!==r[o]&&e.setRequestHeader(o,r[o]);return e.send(i),e}}var nh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-upload-dragger",class:{"is-dragover":t.dragover},on:{drop:function(e){return e.preventDefault(),t.onDrop(e)},dragover:function(e){return e.preventDefault(),t.onDragover(e)},dragleave:function(e){e.preventDefault(),t.dragover=!1}}},[t._t("default")],2)},ih=[];nh._withStripped=!0;var rh={name:"ElUploadDrag",props:{disabled:Boolean},inject:{uploader:{default:""}},data:function(){return{dragover:!1}},methods:{onDragover:function(){this.disabled||(this.dragover=!0)},onDrop:function(t){if(!this.disabled&&this.uploader){var e=this.uploader.accept;this.dragover=!1,e?this.$emit("file",[].slice.call(t.dataTransfer.files).filter(function(t){var n=t.type,i=t.name,r=i.indexOf(".")>-1?"."+i.split(".").pop():"",o=n.replace(/\/.*$/,"");return e.split(",").map(function(t){return t.trim()}).filter(function(t){return t}).some(function(t){return/\..+$/.test(t)?r===t:/\/\*$/.test(t)?o===t.replace(/\/\*$/,""):!!/^[^\/]+\/[^\/]+$/.test(t)&&n===t})})):this.$emit("file",t.dataTransfer.files)}}}},oh=rh,ah=s(oh,nh,ih,!1,null,null,null);ah.options.__file="packages/upload/src/upload-dragger.vue";var sh,lh,ch=ah.exports,uh={inject:["uploader"],components:{UploadDragger:ch},props:{type:String,action:{type:String,required:!0},name:{type:String,default:"file"},data:Object,headers:Object,withCredentials:Boolean,multiple:Boolean,accept:String,onStart:Function,onProgress:Function,onSuccess:Function,onError:Function,beforeUpload:Function,drag:Boolean,onPreview:{type:Function,default:function(){}},onRemove:{type:Function,default:function(){}},fileList:Array,autoUpload:Boolean,listType:String,httpRequest:{type:Function,default:eh},disabled:Boolean,limit:Number,onExceed:Function},data:function(){return{mouseover:!1,reqs:{}}},methods:{isImage:function(t){return-1!==t.indexOf("image")},handleChange:function(t){var e=t.target.files;e&&this.uploadFiles(e)},uploadFiles:function(t){var e=this;if(this.limit&&this.fileList.length+t.length>this.limit)this.onExceed&&this.onExceed(t,this.fileList);else{var n=Array.prototype.slice.call(t);this.multiple||(n=n.slice(0,1)),0!==n.length&&n.forEach(function(t){e.onStart(t),e.autoUpload&&e.upload(t)})}},upload:function(t){var e=this;if(this.$refs.input.value=null,!this.beforeUpload)return this.post(t);var n=this.beforeUpload(t);n&&n.then?n.then(function(n){var i=Object.prototype.toString.call(n);if("[object File]"===i||"[object Blob]"===i){for(var r in"[object Blob]"===i&&(n=new File([n],t.name,{type:t.type})),t)t.hasOwnProperty(r)&&(n[r]=t[r]);e.post(n)}else e.post(t)},function(){e.onRemove(null,t)}):!1!==n?this.post(t):this.onRemove(null,t)},abort:function(t){var e=this.reqs;if(t){var n=t;t.uid&&(n=t.uid),e[n]&&e[n].abort()}else Object.keys(e).forEach(function(t){e[t]&&e[t].abort(),delete e[t]})},post:function(t){var e=this,n=t.uid,i={headers:this.headers,withCredentials:this.withCredentials,file:t,data:this.data,filename:this.name,action:this.action,onProgress:function(n){e.onProgress(n,t)},onSuccess:function(i){e.onSuccess(i,t),delete e.reqs[n]},onError:function(i){e.onError(i,t),delete e.reqs[n]}},r=this.httpRequest(i);this.reqs[n]=r,r&&r.then&&r.then(i.onSuccess,i.onError)},handleClick:function(){this.disabled||(this.$refs.input.value=null,this.$refs.input.click())},handleKeydown:function(t){t.target===t.currentTarget&&(13!==t.keyCode&&32!==t.keyCode||this.handleClick())}},render:function(t){var e=this.handleClick,n=this.drag,i=this.name,r=this.handleChange,o=this.multiple,a=this.accept,s=this.listType,l=this.uploadFiles,c=this.disabled,u=this.handleKeydown,h={class:{"el-upload":!0},on:{click:e,keydown:u}};return h.class["el-upload--"+s]=!0,t("div",Ku()([h,{attrs:{tabindex:"0"}}]),[n?t("upload-dragger",{attrs:{disabled:c},on:{file:l}},[this.$slots.default]):this.$slots.default,t("input",{class:"el-upload__input",attrs:{type:"file",name:i,multiple:o,accept:a},ref:"input",on:{change:r}})])}},hh=uh,dh=s(hh,sh,lh,!1,null,null,null);dh.options.__file="packages/upload/src/upload.vue";var ph=dh.exports;function fh(){}var mh,vh,gh={name:"ElUpload",mixins:[T.a],components:{ElProgress:$u.a,UploadList:Zu,Upload:ph},provide:function(){return{uploader:this}},inject:{elForm:{default:""}},props:{action:{type:String,required:!0},headers:{type:Object,default:function(){return{}}},data:Object,multiple:Boolean,name:{type:String,default:"file"},drag:Boolean,dragger:Boolean,withCredentials:Boolean,showFileList:{type:Boolean,default:!0},accept:String,type:{type:String,default:"select"},beforeUpload:Function,beforeRemove:Function,onRemove:{type:Function,default:fh},onChange:{type:Function,default:fh},onPreview:{type:Function},onSuccess:{type:Function,default:fh},onProgress:{type:Function,default:fh},onError:{type:Function,default:fh},fileList:{type:Array,default:function(){return[]}},autoUpload:{type:Boolean,default:!0},listType:{type:String,default:"text"},httpRequest:Function,disabled:Boolean,limit:Number,onExceed:{type:Function,default:fh}},data:function(){return{uploadFiles:[],dragOver:!1,draging:!1,tempIndex:1}},computed:{uploadDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{listType:function(t){"picture-card"!==t&&"picture"!==t||(this.uploadFiles=this.uploadFiles.map(function(t){if(!t.url&&t.raw)try{t.url=URL.createObjectURL(t.raw)}catch(e){console.error("[Element Error][Upload]",e)}return t}))},fileList:{immediate:!0,handler:function(t){var e=this;this.uploadFiles=t.map(function(t){return t.uid=t.uid||Date.now()+e.tempIndex++,t.status=t.status||"success",t})}}},methods:{handleStart:function(t){t.uid=Date.now()+this.tempIndex++;var e={status:"ready",name:t.name,size:t.size,percentage:0,uid:t.uid,raw:t};if("picture-card"===this.listType||"picture"===this.listType)try{e.url=URL.createObjectURL(t)}catch(n){return void console.error("[Element Error][Upload]",n)}this.uploadFiles.push(e),this.onChange(e,this.uploadFiles)},handleProgress:function(t,e){var n=this.getFile(e);this.onProgress(t,n,this.uploadFiles),n.status="uploading",n.percentage=t.percent||0},handleSuccess:function(t,e){var n=this.getFile(e);n&&(n.status="success",n.response=t,this.onSuccess(t,n,this.uploadFiles),this.onChange(n,this.uploadFiles))},handleError:function(t,e){var n=this.getFile(e),i=this.uploadFiles;n.status="fail",i.splice(i.indexOf(n),1),this.onError(t,n,this.uploadFiles),this.onChange(n,this.uploadFiles)},handleRemove:function(t,e){var n=this;e&&(t=this.getFile(e));var i=function(){n.abort(t);var e=n.uploadFiles;e.splice(e.indexOf(t),1),n.onRemove(t,e)};if(this.beforeRemove){if("function"===typeof this.beforeRemove){var r=this.beforeRemove(t,this.uploadFiles);r&&r.then?r.then(function(){i()},fh):!1!==r&&i()}}else i()},getFile:function(t){var e=this.uploadFiles,n=void 0;return e.every(function(e){return n=t.uid===e.uid?e:null,!n}),n},abort:function(t){this.$refs["upload-inner"].abort(t)},clearFiles:function(){this.uploadFiles=[]},submit:function(){var t=this;this.uploadFiles.filter(function(t){return"ready"===t.status}).forEach(function(e){t.$refs["upload-inner"].upload(e.raw)})},getMigratingConfig:function(){return{props:{"default-file-list":"default-file-list is renamed to file-list.","show-upload-list":"show-upload-list is renamed to show-file-list.","thumbnail-mode":"thumbnail-mode has been deprecated, you can implement the same effect according to this case: http://element.eleme.io/#/zh-CN/component/upload#yong-hu-tou-xiang-shang-chuan"}}}},beforeDestroy:function(){this.uploadFiles.forEach(function(t){t.url&&0===t.url.indexOf("blob:")&&URL.revokeObjectURL(t.url)})},render:function(t){var e=this,n=void 0;this.showFileList&&(n=t(Zu,{attrs:{disabled:this.uploadDisabled,listType:this.listType,files:this.uploadFiles,handlePreview:this.onPreview},on:{remove:this.handleRemove}},[function(t){if(e.$scopedSlots.file)return e.$scopedSlots.file({file:t.file})}]));var i={props:{type:this.type,drag:this.drag,action:this.action,multiple:this.multiple,"before-upload":this.beforeUpload,"with-credentials":this.withCredentials,headers:this.headers,name:this.name,data:this.data,accept:this.accept,fileList:this.uploadFiles,autoUpload:this.autoUpload,listType:this.listType,disabled:this.uploadDisabled,limit:this.limit,"on-exceed":this.onExceed,"on-start":this.handleStart,"on-progress":this.handleProgress,"on-success":this.handleSuccess,"on-error":this.handleError,"on-preview":this.onPreview,"on-remove":this.handleRemove,"http-request":this.httpRequest},ref:"upload-inner"},r=this.$slots.trigger||this.$slots.default,o=t("upload",i,[r]);return t("div",["picture-card"===this.listType?n:"",this.$slots.trigger?[o,this.$slots.default]:o,this.$slots.tip,"picture-card"!==this.listType?n:""])}},yh=gh,bh=s(yh,mh,vh,!1,null,null,null);bh.options.__file="packages/upload/src/index.vue";var xh=bh.exports;xh.install=function(t){t.component(xh.name,xh)};var wh=xh,_h=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-progress",class:["el-progress--"+t.type,t.status?"is-"+t.status:"",{"el-progress--without-text":!t.showText,"el-progress--text-inside":t.textInside}],attrs:{role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===t.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:t.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:t.barStyle},[t.showText&&t.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[t._v(t._s(t.content))]):t._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:t.width+"px",width:t.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:t.trailPathStyle,attrs:{d:t.trackPath,stroke:"#e5e9f2","stroke-width":t.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:t.circlePathStyle,attrs:{d:t.trackPath,stroke:t.stroke,fill:"none","stroke-linecap":t.strokeLinecap,"stroke-width":t.percentage?t.relativeStrokeWidth:0}})])]),t.showText&&!t.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:t.progressTextSize+"px"}},[t.status?n("i",{class:t.iconClass}):[t._v(t._s(t.content))]],2):t._e()])},Mh=[];_h._withStripped=!0;var Eh={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(t){return["line","circle","dashboard"].indexOf(t)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(t){return t>=0&&t<=100}},status:{type:String,validator:function(t){return["success","exception","warning"].indexOf(t)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var t={};return t.width=this.percentage+"%",t.backgroundColor=this.getCurrentColor(this.percentage),t},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var t=this.radius,e="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(e?"":"-")+t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"-":"")+2*t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"":"-")+2*t+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var t=-1*this.perimeter*(1-this.rate)/2;return t+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var t=void 0;if(this.color)t=this.getCurrentColor(this.percentage);else switch(this.status){case"success":t="#13ce66";break;case"exception":t="#ff4949";break;case"warning":t="#e6a23c";break;default:t="#20a0ff"}return t},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(t){return"function"===typeof this.color?this.color(t):"string"===typeof this.color?this.color:this.getLevelColor(t)},getLevelColor:function(t){for(var e=this.getColorArray().sort(function(t,e){return t.percentage-e.percentage}),n=0;n<e.length;n++)if(e[n].percentage>t)return e[n].color;return e[e.length-1].color},getColorArray:function(){var t=this.color,e=100/t.length;return t.map(function(t,n){return"string"===typeof t?{color:t,percentage:(n+1)*e}:t})}}},Sh=Eh,Th=s(Sh,_h,Mh,!1,null,null,null);Th.options.__file="packages/progress/src/progress.vue";var Ah=Th.exports;Ah.install=function(t){t.component(Ah.name,Ah)};var Ch=Ah,Lh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",{staticClass:"el-spinner"},[n("svg",{staticClass:"el-spinner-inner",style:{width:t.radius/2+"px",height:t.radius/2+"px"},attrs:{viewBox:"0 0 50 50"}},[n("circle",{staticClass:"path",attrs:{cx:"25",cy:"25",r:"20",fill:"none",stroke:t.strokeColor,"stroke-width":t.strokeWidth}})])])},Ph=[];Lh._withStripped=!0;var Oh={name:"ElSpinner",props:{type:String,radius:{type:Number,default:100},strokeWidth:{type:Number,default:5},strokeColor:{type:String,default:"#efefef"}}},Rh=Oh,kh=s(Rh,Lh,Ph,!1,null,null,null);kh.options.__file="packages/spinner/src/spinner.vue";var Dh=kh.exports;Dh.install=function(t){t.component(Dh.name,Dh)};var Ih=Dh,Nh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-message-fade"},on:{"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],class:["el-message",t.type&&!t.iconClass?"el-message--"+t.type:"",t.center?"is-center":"",t.showClose?"is-closable":"",t.customClass],style:t.positionStyle,attrs:{role:"alert"},on:{mouseenter:t.clearTimer,mouseleave:t.startTimer}},[t.iconClass?n("i",{class:t.iconClass}):n("i",{class:t.typeClass}),t._t("default",[t.dangerouslyUseHTMLString?n("p",{staticClass:"el-message__content",domProps:{innerHTML:t._s(t.message)}}):n("p",{staticClass:"el-message__content"},[t._v(t._s(t.message))])]),t.showClose?n("i",{staticClass:"el-message__closeBtn el-icon-close",on:{click:t.close}}):t._e()],2)])},zh=[];Nh._withStripped=!0;var Bh={success:"success",info:"info",warning:"warning",error:"error"},Fh={data:function(){return{visible:!1,message:"",duration:3e3,type:"info",iconClass:"",customClass:"",onClose:null,showClose:!1,closed:!1,verticalOffset:20,timer:null,dangerouslyUseHTMLString:!1,center:!1}},computed:{typeClass:function(){return this.type&&!this.iconClass?"el-message__icon el-icon-"+Bh[this.type]:""},positionStyle:function(){return{top:this.verticalOffset+"px"}}},watch:{closed:function(t){t&&(this.visible=!1)}},methods:{handleAfterLeave:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)},close:function(){this.closed=!0,"function"===typeof this.onClose&&this.onClose(this)},clearTimer:function(){clearTimeout(this.timer)},startTimer:function(){var t=this;this.duration>0&&(this.timer=setTimeout(function(){t.closed||t.close()},this.duration))},keydown:function(t){27===t.keyCode&&(this.closed||this.close())}},mounted:function(){this.startTimer(),document.addEventListener("keydown",this.keydown)},beforeDestroy:function(){document.removeEventListener("keydown",this.keydown)}},jh=Fh,Hh=s(jh,Nh,zh,!1,null,null,null);Hh.options.__file="packages/message/src/main.vue";var Uh=Hh.exports,Vh=Ui.a.extend(Uh),Gh=void 0,Wh=[],$h=1,qh=function t(e){if(!Ui.a.prototype.$isServer){e=e||{},"string"===typeof e&&(e={message:e});var n=e.onClose,i="message_"+$h++;e.onClose=function(){t.close(i,n)},Gh=new Vh({data:e}),Gh.id=i,Object(Es["isVNode"])(Gh.message)&&(Gh.$slots.default=[Gh.message],Gh.message=null),Gh.$mount(),document.body.appendChild(Gh.$el);var r=e.offset||20;return Wh.forEach(function(t){r+=t.$el.offsetHeight+16}),Gh.verticalOffset=r,Gh.visible=!0,Gh.$el.style.zIndex=M["PopupManager"].nextZIndex(),Wh.push(Gh),Gh}};["success","warning","info","error"].forEach(function(t){qh[t]=function(e){return"string"===typeof e&&(e={message:e}),e.type=t,qh(e)}}),qh.close=function(t,e){for(var n=Wh.length,i=-1,r=void 0,o=0;o<n;o++)if(t===Wh[o].id){r=Wh[o].$el.offsetHeight,i=o,"function"===typeof e&&e(Wh[o]),Wh.splice(o,1);break}if(!(n<=1||-1===i||i>Wh.length-1))for(var a=i;a<n-1;a++){var s=Wh[a].$el;s.style["top"]=parseInt(s.style["top"],10)-r-16+"px"}},qh.closeAll=function(){for(var t=Wh.length-1;t>=0;t--)Wh[t].close()};var Yh=qh,Xh=Yh,Zh=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-badge"},[t._t("default"),n("transition",{attrs:{name:"el-zoom-in-center"}},[n("sup",{directives:[{name:"show",rawName:"v-show",value:!t.hidden&&(t.content||0===t.content||t.isDot),expression:"!hidden && (content || content === 0 || isDot)"}],staticClass:"el-badge__content",class:["el-badge__content--"+t.type,{"is-fixed":t.$slots.default,"is-dot":t.isDot}],domProps:{textContent:t._s(t.content)}})])],2)},Jh=[];Zh._withStripped=!0;var Kh={name:"ElBadge",props:{value:[String,Number],max:Number,isDot:Boolean,hidden:Boolean,type:{type:String,validator:function(t){return["primary","success","warning","info","danger"].indexOf(t)>-1}}},computed:{content:function(){if(!this.isDot){var t=this.value,e=this.max;return"number"===typeof t&&"number"===typeof e&&e<t?e+"+":t}}}},Qh=Kh,td=s(Qh,Zh,Jh,!1,null,null,null);td.options.__file="packages/badge/src/main.vue";var ed=td.exports;ed.install=function(t){t.component(ed.name,ed)};var nd=ed,id=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-card",class:t.shadow?"is-"+t.shadow+"-shadow":"is-always-shadow"},[t.$slots.header||t.header?n("div",{staticClass:"el-card__header"},[t._t("header",[t._v(t._s(t.header))])],2):t._e(),n("div",{staticClass:"el-card__body",style:t.bodyStyle},[t._t("default")],2)])},rd=[];id._withStripped=!0;var od={name:"ElCard",props:{header:{},bodyStyle:{},shadow:{type:String}}},ad=od,sd=s(ad,id,rd,!1,null,null,null);sd.options.__file="packages/card/src/main.vue";var ld=sd.exports;ld.install=function(t){t.component(ld.name,ld)};var cd=ld,ud=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-rate",attrs:{role:"slider","aria-valuenow":t.currentValue,"aria-valuetext":t.text,"aria-valuemin":"0","aria-valuemax":t.max,tabindex:"0"},on:{keydown:t.handleKey}},[t._l(t.max,function(e,i){return n("span",{key:i,staticClass:"el-rate__item",style:{cursor:t.rateDisabled?"auto":"pointer"},on:{mousemove:function(n){t.setCurrentValue(e,n)},mouseleave:t.resetCurrentValue,click:function(n){t.selectValue(e)}}},[n("i",{staticClass:"el-rate__icon",class:[t.classes[e-1],{hover:t.hoverIndex===e}],style:t.getIconStyle(e)},[t.showDecimalIcon(e)?n("i",{staticClass:"el-rate__decimal",class:t.decimalIconClass,style:t.decimalStyle}):t._e()])])}),t.showText||t.showScore?n("span",{staticClass:"el-rate__text",style:{color:t.textColor}},[t._v(t._s(t.text))]):t._e()],2)},hd=[];ud._withStripped=!0;var dd=n(18),pd={name:"ElRate",mixins:[T.a],inject:{elForm:{default:""}},data:function(){return{pointerAtLeftHalf:!0,currentValue:this.value,hoverIndex:-1}},props:{value:{type:Number,default:0},lowThreshold:{type:Number,default:2},highThreshold:{type:Number,default:4},max:{type:Number,default:5},colors:{type:[Array,Object],default:function(){return["#F7BA2A","#F7BA2A","#F7BA2A"]}},voidColor:{type:String,default:"#C6D1DE"},disabledVoidColor:{type:String,default:"#EFF2F7"},iconClasses:{type:[Array,Object],default:function(){return["el-icon-star-on","el-icon-star-on","el-icon-star-on"]}},voidIconClass:{type:String,default:"el-icon-star-off"},disabledVoidIconClass:{type:String,default:"el-icon-star-on"},disabled:{type:Boolean,default:!1},allowHalf:{type:Boolean,default:!1},showText:{type:Boolean,default:!1},showScore:{type:Boolean,default:!1},textColor:{type:String,default:"#1f2d3d"},texts:{type:Array,default:function(){return["","","","",""]}},scoreTemplate:{type:String,default:"{value}"}},computed:{text:function(){var t="";return this.showScore?t=this.scoreTemplate.replace(/\{\s*value\s*\}/,this.rateDisabled?this.value:this.currentValue):this.showText&&(t=this.texts[Math.ceil(this.currentValue)-1]),t},decimalStyle:function(){var t="";return this.rateDisabled?t=this.valueDecimal+"%":this.allowHalf&&(t="50%"),{color:this.activeColor,width:t}},valueDecimal:function(){return 100*this.value-100*Math.floor(this.value)},classMap:function(){var t;return Array.isArray(this.iconClasses)?(t={},t[this.lowThreshold]=this.iconClasses[0],t[this.highThreshold]={value:this.iconClasses[1],excluded:!0},t[this.max]=this.iconClasses[2],t):this.iconClasses},decimalIconClass:function(){return this.getValueFromMap(this.value,this.classMap)},voidClass:function(){return this.rateDisabled?this.disabledVoidIconClass:this.voidIconClass},activeClass:function(){return this.getValueFromMap(this.currentValue,this.classMap)},colorMap:function(){var t;return Array.isArray(this.colors)?(t={},t[this.lowThreshold]=this.colors[0],t[this.highThreshold]={value:this.colors[1],excluded:!0},t[this.max]=this.colors[2],t):this.colors},activeColor:function(){return this.getValueFromMap(this.currentValue,this.colorMap)},classes:function(){var t=[],e=0,n=this.currentValue;for(this.allowHalf&&this.currentValue!==Math.floor(this.currentValue)&&n--;e<n;e++)t.push(this.activeClass);for(;e<this.max;e++)t.push(this.voidClass);return t},rateDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(t){this.currentValue=t,this.pointerAtLeftHalf=this.value!==Math.floor(this.value)}},methods:{getMigratingConfig:function(){return{props:{"text-template":"text-template is renamed to score-template."}}},getValueFromMap:function(t,e){var n=Object.keys(e).filter(function(n){var i=e[n],r=!!Object(dd["isObject"])(i)&&i.excluded;return r?t<n:t<=n}).sort(function(t,e){return t-e}),i=e[n[0]];return Object(dd["isObject"])(i)?i.value:i||""},showDecimalIcon:function(t){var e=this.rateDisabled&&this.valueDecimal>0&&t-1<this.value&&t>this.value,n=this.allowHalf&&this.pointerAtLeftHalf&&t-.5<=this.currentValue&&t>this.currentValue;return e||n},getIconStyle:function(t){var e=this.rateDisabled?this.disabledVoidColor:this.voidColor;return{color:t<=this.currentValue?this.activeColor:e}},selectValue:function(t){this.rateDisabled||(this.allowHalf&&this.pointerAtLeftHalf?(this.$emit("input",this.currentValue),this.$emit("change",this.currentValue)):(this.$emit("input",t),this.$emit("change",t)))},handleKey:function(t){if(!this.rateDisabled){var e=this.currentValue,n=t.keyCode;38===n||39===n?(this.allowHalf?e+=.5:e+=1,t.stopPropagation(),t.preventDefault()):37!==n&&40!==n||(this.allowHalf?e-=.5:e-=1,t.stopPropagation(),t.preventDefault()),e=e<0?0:e,e=e>this.max?this.max:e,this.$emit("input",e),this.$emit("change",e)}},setCurrentValue:function(t,e){if(!this.rateDisabled){if(this.allowHalf){var n=e.target;Object(Bt["hasClass"])(n,"el-rate__item")&&(n=n.querySelector(".el-rate__icon")),Object(Bt["hasClass"])(n,"el-rate__decimal")&&(n=n.parentNode),this.pointerAtLeftHalf=2*e.offsetX<=n.clientWidth,this.currentValue=this.pointerAtLeftHalf?t-.5:t}else this.currentValue=t;this.hoverIndex=t}},resetCurrentValue:function(){this.rateDisabled||(this.allowHalf&&(this.pointerAtLeftHalf=this.value!==Math.floor(this.value)),this.currentValue=this.value,this.hoverIndex=-1)}},created:function(){this.value||this.$emit("input",0)}},fd=pd,md=s(fd,ud,hd,!1,null,null,null);md.options.__file="packages/rate/src/main.vue";var vd=md.exports;vd.install=function(t){t.component(vd.name,vd)};var gd=vd,yd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-steps",class:[!t.simple&&"el-steps--"+t.direction,t.simple&&"el-steps--simple"]},[t._t("default")],2)},bd=[];yd._withStripped=!0;var xd={name:"ElSteps",mixins:[T.a],props:{space:[Number,String],active:Number,direction:{type:String,default:"horizontal"},alignCenter:Boolean,simple:Boolean,finishStatus:{type:String,default:"finish"},processStatus:{type:String,default:"process"}},data:function(){return{steps:[],stepOffset:0}},methods:{getMigratingConfig:function(){return{props:{center:"center is removed."}}}},watch:{active:function(t,e){this.$emit("change",t,e)},steps:function(t){t.forEach(function(t,e){t.index=e})}}},wd=xd,_d=s(wd,yd,bd,!1,null,null,null);_d.options.__file="packages/steps/src/steps.vue";var Md=_d.exports;Md.install=function(t){t.component(Md.name,Md)};var Ed=Md,Sd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-step",class:[!t.isSimple&&"is-"+t.$parent.direction,t.isSimple&&"is-simple",t.isLast&&!t.space&&!t.isCenter&&"is-flex",t.isCenter&&!t.isVertical&&!t.isSimple&&"is-center"],style:t.style},[n("div",{staticClass:"el-step__head",class:"is-"+t.currentStatus},[n("div",{staticClass:"el-step__line",style:t.isLast?"":{marginRight:t.$parent.stepOffset+"px"}},[n("i",{staticClass:"el-step__line-inner",style:t.lineStyle})]),n("div",{staticClass:"el-step__icon",class:"is-"+(t.icon?"icon":"text")},["success"!==t.currentStatus&&"error"!==t.currentStatus?t._t("icon",[t.icon?n("i",{staticClass:"el-step__icon-inner",class:[t.icon]}):t._e(),t.icon||t.isSimple?t._e():n("div",{staticClass:"el-step__icon-inner"},[t._v(t._s(t.index+1))])]):n("i",{staticClass:"el-step__icon-inner is-status",class:["el-icon-"+("success"===t.currentStatus?"check":"close")]})],2)]),n("div",{staticClass:"el-step__main"},[n("div",{ref:"title",staticClass:"el-step__title",class:["is-"+t.currentStatus]},[t._t("title",[t._v(t._s(t.title))])],2),t.isSimple?n("div",{staticClass:"el-step__arrow"}):n("div",{staticClass:"el-step__description",class:["is-"+t.currentStatus]},[t._t("description",[t._v(t._s(t.description))])],2)])])},Td=[];Sd._withStripped=!0;var Ad={name:"ElStep",props:{title:String,icon:String,description:String,status:String},data:function(){return{index:-1,lineStyle:{},internalStatus:""}},beforeCreate:function(){this.$parent.steps.push(this)},beforeDestroy:function(){var t=this.$parent.steps,e=t.indexOf(this);e>=0&&t.splice(e,1)},computed:{currentStatus:function(){return this.status||this.internalStatus},prevStatus:function(){var t=this.$parent.steps[this.index-1];return t?t.currentStatus:"wait"},isCenter:function(){return this.$parent.alignCenter},isVertical:function(){return"vertical"===this.$parent.direction},isSimple:function(){return this.$parent.simple},isLast:function(){var t=this.$parent;return t.steps[t.steps.length-1]===this},stepsCount:function(){return this.$parent.steps.length},space:function(){var t=this.isSimple,e=this.$parent.space;return t?"":e},style:function(){var t={},e=this.$parent,n=e.steps.length,i="number"===typeof this.space?this.space+"px":this.space?this.space:100/(n-(this.isCenter?0:1))+"%";return t.flexBasis=i,this.isVertical?t:(this.isLast?t.maxWidth=100/this.stepsCount+"%":t.marginRight=-this.$parent.stepOffset+"px",t)}},methods:{updateStatus:function(t){var e=this.$parent.$children[this.index-1];t>this.index?this.internalStatus=this.$parent.finishStatus:t===this.index&&"error"!==this.prevStatus?this.internalStatus=this.$parent.processStatus:this.internalStatus="wait",e&&e.calcProgress(this.internalStatus)},calcProgress:function(t){var e=100,n={};n.transitionDelay=150*this.index+"ms",t===this.$parent.processStatus?(this.currentStatus,e=0):"wait"===t&&(e=0,n.transitionDelay=-150*this.index+"ms"),n.borderWidth=e&&!this.isSimple?"1px":0,"vertical"===this.$parent.direction?n.height=e+"%":n.width=e+"%",this.lineStyle=n}},mounted:function(){var t=this,e=this.$watch("index",function(n){t.$watch("$parent.active",t.updateStatus,{immediate:!0}),t.$watch("$parent.processStatus",function(){var e=t.$parent.active;t.updateStatus(e)},{immediate:!0}),e()})}},Cd=Ad,Ld=s(Cd,Sd,Td,!1,null,null,null);Ld.options.__file="packages/steps/src/step.vue";var Pd=Ld.exports;Pd.install=function(t){t.component(Pd.name,Pd)};var Od=Pd,Rd=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:t.carouselClasses,on:{mouseenter:function(e){return e.stopPropagation(),t.handleMouseEnter(e)},mouseleave:function(e){return e.stopPropagation(),t.handleMouseLeave(e)}}},[n("div",{staticClass:"el-carousel__container",style:{height:t.height}},[t.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-left"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===t.arrow||t.hover)&&(t.loop||t.activeIndex>0),expression:"(arrow === 'always' || hover) && (loop || activeIndex > 0)"}],staticClass:"el-carousel__arrow el-carousel__arrow--left",attrs:{type:"button"},on:{mouseenter:function(e){t.handleButtonEnter("left")},mouseleave:t.handleButtonLeave,click:function(e){e.stopPropagation(),t.throttledArrowClick(t.activeIndex-1)}}},[n("i",{staticClass:"el-icon-arrow-left"})])]):t._e(),t.arrowDisplay?n("transition",{attrs:{name:"carousel-arrow-right"}},[n("button",{directives:[{name:"show",rawName:"v-show",value:("always"===t.arrow||t.hover)&&(t.loop||t.activeIndex<t.items.length-1),expression:"(arrow === 'always' || hover) && (loop || activeIndex < items.length - 1)"}],staticClass:"el-carousel__arrow el-carousel__arrow--right",attrs:{type:"button"},on:{mouseenter:function(e){t.handleButtonEnter("right")},mouseleave:t.handleButtonLeave,click:function(e){e.stopPropagation(),t.throttledArrowClick(t.activeIndex+1)}}},[n("i",{staticClass:"el-icon-arrow-right"})])]):t._e(),t._t("default")],2),"none"!==t.indicatorPosition?n("ul",{class:t.indicatorsClasses},t._l(t.items,function(e,i){return n("li",{key:i,class:["el-carousel__indicator","el-carousel__indicator--"+t.direction,{"is-active":i===t.activeIndex}],on:{mouseenter:function(e){t.throttledIndicatorHover(i)},click:function(e){e.stopPropagation(),t.handleIndicatorClick(i)}}},[n("button",{staticClass:"el-carousel__button"},[t.hasLabel?n("span",[t._v(t._s(e.label))]):t._e()])])}),0):t._e()])},kd=[];Rd._withStripped=!0;var Dd=n(25),Id=n.n(Dd),Nd={name:"ElCarousel",props:{initialIndex:{type:Number,default:0},height:String,trigger:{type:String,default:"hover"},autoplay:{type:Boolean,default:!0},interval:{type:Number,default:3e3},indicatorPosition:String,indicator:{type:Boolean,default:!0},arrow:{type:String,default:"hover"},type:String,loop:{type:Boolean,default:!0},direction:{type:String,default:"horizontal",validator:function(t){return-1!==["horizontal","vertical"].indexOf(t)}}},data:function(){return{items:[],activeIndex:-1,containerWidth:0,timer:null,hover:!1}},computed:{arrowDisplay:function(){return"never"!==this.arrow&&"vertical"!==this.direction},hasLabel:function(){return this.items.some(function(t){return t.label.toString().length>0})},carouselClasses:function(){var t=["el-carousel","el-carousel--"+this.direction];return"card"===this.type&&t.push("el-carousel--card"),t},indicatorsClasses:function(){var t=["el-carousel__indicators","el-carousel__indicators--"+this.direction];return this.hasLabel&&t.push("el-carousel__indicators--labels"),"outside"!==this.indicatorPosition&&"card"!==this.type||t.push("el-carousel__indicators--outside"),t}},watch:{items:function(t){t.length>0&&this.setActiveItem(this.initialIndex)},activeIndex:function(t,e){this.resetItemPosition(e),e>-1&&this.$emit("change",t,e)},autoplay:function(t){t?this.startTimer():this.pauseTimer()},loop:function(){this.setActiveItem(this.activeIndex)}},methods:{handleMouseEnter:function(){this.hover=!0,this.pauseTimer()},handleMouseLeave:function(){this.hover=!1,this.startTimer()},itemInStage:function(t,e){var n=this.items.length;return e===n-1&&t.inStage&&this.items[0].active||t.inStage&&this.items[e+1]&&this.items[e+1].active?"left":!!(0===e&&t.inStage&&this.items[n-1].active||t.inStage&&this.items[e-1]&&this.items[e-1].active)&&"right"},handleButtonEnter:function(t){var e=this;"vertical"!==this.direction&&this.items.forEach(function(n,i){t===e.itemInStage(n,i)&&(n.hover=!0)})},handleButtonLeave:function(){"vertical"!==this.direction&&this.items.forEach(function(t){t.hover=!1})},updateItems:function(){this.items=this.$children.filter(function(t){return"ElCarouselItem"===t.$options.name})},resetItemPosition:function(t){var e=this;this.items.forEach(function(n,i){n.translateItem(i,e.activeIndex,t)})},playSlides:function(){this.activeIndex<this.items.length-1?this.activeIndex++:this.loop&&(this.activeIndex=0)},pauseTimer:function(){this.timer&&(clearInterval(this.timer),this.timer=null)},startTimer:function(){this.interval<=0||!this.autoplay||this.timer||(this.timer=setInterval(this.playSlides,this.interval))},setActiveItem:function(t){if("string"===typeof t){var e=this.items.filter(function(e){return e.name===t});e.length>0&&(t=this.items.indexOf(e[0]))}if(t=Number(t),isNaN(t)||t!==Math.floor(t))console.warn("[Element Warn][Carousel]index must be an integer.");else{var n=this.items.length,i=this.activeIndex;this.activeIndex=t<0?this.loop?n-1:0:t>=n?this.loop?0:n-1:t,i===this.activeIndex&&this.resetItemPosition(i)}},prev:function(){this.setActiveItem(this.activeIndex-1)},next:function(){this.setActiveItem(this.activeIndex+1)},handleIndicatorClick:function(t){this.activeIndex=t},handleIndicatorHover:function(t){"hover"===this.trigger&&t!==this.activeIndex&&(this.activeIndex=t)}},created:function(){var t=this;this.throttledArrowClick=Id()(300,!0,function(e){t.setActiveItem(e)}),this.throttledIndicatorHover=Id()(300,function(e){t.handleIndicatorHover(e)})},mounted:function(){var t=this;this.updateItems(),this.$nextTick(function(){Object(ti["addResizeListener"])(t.$el,t.resetItemPosition),t.initialIndex<t.items.length&&t.initialIndex>=0&&(t.activeIndex=t.initialIndex),t.startTimer()})},beforeDestroy:function(){this.$el&&Object(ti["removeResizeListener"])(this.$el,this.resetItemPosition),this.pauseTimer()}},zd=Nd,Bd=s(zd,Rd,kd,!1,null,null,null);Bd.options.__file="packages/carousel/src/main.vue";var Fd=Bd.exports;Fd.install=function(t){t.component(Fd.name,Fd)};var jd=Fd,Hd={vertical:{offset:"offsetHeight",scroll:"scrollTop",scrollSize:"scrollHeight",size:"height",key:"vertical",axis:"Y",client:"clientY",direction:"top"},horizontal:{offset:"offsetWidth",scroll:"scrollLeft",scrollSize:"scrollWidth",size:"width",key:"horizontal",axis:"X",client:"clientX",direction:"left"}};function Ud(t){var e=t.move,n=t.size,i=t.bar,r={},o="translate"+i.axis+"("+e+"%)";return r[i.size]=n,r.transform=o,r.msTransform=o,r.webkitTransform=o,r}var Vd={name:"Bar",props:{vertical:Boolean,size:String,move:Number},computed:{bar:function(){return Hd[this.vertical?"vertical":"horizontal"]},wrap:function(){return this.$parent.wrap}},render:function(t){var e=this.size,n=this.move,i=this.bar;return t("div",{class:["el-scrollbar__bar","is-"+i.key],on:{mousedown:this.clickTrackHandler}},[t("div",{ref:"thumb",class:"el-scrollbar__thumb",on:{mousedown:this.clickThumbHandler},style:Ud({size:e,move:n,bar:i})})])},methods:{clickThumbHandler:function(t){t.ctrlKey||2===t.button||(this.startDrag(t),this[this.bar.axis]=t.currentTarget[this.bar.offset]-(t[this.bar.client]-t.currentTarget.getBoundingClientRect()[this.bar.direction]))},clickTrackHandler:function(t){var e=Math.abs(t.target.getBoundingClientRect()[this.bar.direction]-t[this.bar.client]),n=this.$refs.thumb[this.bar.offset]/2,i=100*(e-n)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=i*this.wrap[this.bar.scrollSize]/100},startDrag:function(t){t.stopImmediatePropagation(),this.cursorDown=!0,Object(Bt["on"])(document,"mousemove",this.mouseMoveDocumentHandler),Object(Bt["on"])(document,"mouseup",this.mouseUpDocumentHandler),document.onselectstart=function(){return!1}},mouseMoveDocumentHandler:function(t){if(!1!==this.cursorDown){var e=this[this.bar.axis];if(e){var n=-1*(this.$el.getBoundingClientRect()[this.bar.direction]-t[this.bar.client]),i=this.$refs.thumb[this.bar.offset]-e,r=100*(n-i)/this.$el[this.bar.offset];this.wrap[this.bar.scroll]=r*this.wrap[this.bar.scrollSize]/100}}},mouseUpDocumentHandler:function(t){this.cursorDown=!1,this[this.bar.axis]=0,Object(Bt["off"])(document,"mousemove",this.mouseMoveDocumentHandler),document.onselectstart=null}},destroyed:function(){Object(Bt["off"])(document,"mouseup",this.mouseUpDocumentHandler)}},Gd={name:"ElScrollbar",components:{Bar:Vd},props:{native:Boolean,wrapStyle:{},wrapClass:{},viewClass:{},viewStyle:{},noresize:Boolean,tag:{type:String,default:"div"}},data:function(){return{sizeWidth:"0",sizeHeight:"0",moveX:0,moveY:0}},computed:{wrap:function(){return this.$refs.wrap}},render:function(t){var e=gr()(),n=this.wrapStyle;if(e){var i="-"+e+"px",r="margin-bottom: "+i+"; margin-right: "+i+";";Array.isArray(this.wrapStyle)?(n=Object(y["toObject"])(this.wrapStyle),n.marginRight=n.marginBottom=i):"string"===typeof this.wrapStyle?n+=r:n=r}var o=t(this.tag,{class:["el-scrollbar__view",this.viewClass],style:this.viewStyle,ref:"resize"},this.$slots.default),a=t("div",{ref:"wrap",style:n,on:{scroll:this.handleScroll},class:[this.wrapClass,"el-scrollbar__wrap",e?"":"el-scrollbar__wrap--hidden-default"]},[[o]]),s=void 0;return s=this.native?[t("div",{ref:"wrap",class:[this.wrapClass,"el-scrollbar__wrap"],style:n},[[o]])]:[a,t(Vd,{attrs:{move:this.moveX,size:this.sizeWidth}}),t(Vd,{attrs:{vertical:!0,move:this.moveY,size:this.sizeHeight}})],t("div",{class:"el-scrollbar"},s)},methods:{handleScroll:function(){var t=this.wrap;this.moveY=100*t.scrollTop/t.clientHeight,this.moveX=100*t.scrollLeft/t.clientWidth},update:function(){var t=void 0,e=void 0,n=this.wrap;n&&(t=100*n.clientHeight/n.scrollHeight,e=100*n.clientWidth/n.scrollWidth,this.sizeHeight=t<100?t+"%":"",this.sizeWidth=e<100?e+"%":"")}},mounted:function(){this.native||(this.$nextTick(this.update),!this.noresize&&Object(ti["addResizeListener"])(this.$refs.resize,this.update))},beforeDestroy:function(){this.native||!this.noresize&&Object(ti["removeResizeListener"])(this.$refs.resize,this.update)},install:function(t){t.component(Gd.name,Gd)}},Wd=Gd,$d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.ready,expression:"ready"}],staticClass:"el-carousel__item",class:{"is-active":t.active,"el-carousel__item--card":"card"===t.$parent.type,"is-in-stage":t.inStage,"is-hover":t.hover,"is-animating":t.animating},style:t.itemStyle,on:{click:t.handleItemClick}},["card"===t.$parent.type?n("div",{directives:[{name:"show",rawName:"v-show",value:!t.active,expression:"!active"}],staticClass:"el-carousel__mask"}):t._e(),t._t("default")],2)},qd=[];$d._withStripped=!0;var Yd=.83,Xd={name:"ElCarouselItem",props:{name:String,label:{type:[String,Number],default:""}},data:function(){return{hover:!1,translate:0,scale:1,active:!1,ready:!1,inStage:!1,animating:!1}},methods:{processIndex:function(t,e,n){return 0===e&&t===n-1?-1:e===n-1&&0===t?n:t<e-1&&e-t>=n/2?n+1:t>e+1&&t-e>=n/2?-2:t},calcCardTranslate:function(t,e){var n=this.$parent.$el.offsetWidth;return this.inStage?n*((2-Yd)*(t-e)+1)/4:t<e?-(1+Yd)*n/4:(3+Yd)*n/4},calcTranslate:function(t,e,n){var i=this.$parent.$el[n?"offsetHeight":"offsetWidth"];return i*(t-e)},translateItem:function(t,e,n){var i=this.$parent.type,r=this.parentDirection,o=this.$parent.items.length;if("card"!==i&&void 0!==n&&(this.animating=t===e||t===n),t!==e&&o>2&&this.$parent.loop&&(t=this.processIndex(t,e,o)),"card"===i)"vertical"===r&&console.warn("[Element Warn][Carousel]vertical direction is not supported in card mode"),this.inStage=Math.round(Math.abs(t-e))<=1,this.active=t===e,this.translate=this.calcCardTranslate(t,e),this.scale=this.active?1:Yd;else{this.active=t===e;var a="vertical"===r;this.translate=this.calcTranslate(t,e,a)}this.ready=!0},handleItemClick:function(){var t=this.$parent;if(t&&"card"===t.type){var e=t.items.indexOf(this);t.setActiveItem(e)}}},computed:{parentDirection:function(){return this.$parent.direction},itemStyle:function(){var t="vertical"===this.parentDirection?"translateY":"translateX",e=t+"("+this.translate+"px) scale("+this.scale+")",n={transform:e};return Object(y["autoprefixer"])(n)}},created:function(){this.$parent&&this.$parent.updateItems()},destroyed:function(){this.$parent&&this.$parent.updateItems()}},Zd=Xd,Jd=s(Zd,$d,qd,!1,null,null,null);Jd.options.__file="packages/carousel/src/item.vue";var Kd=Jd.exports;Kd.install=function(t){t.component(Kd.name,Kd)};var Qd=Kd,tp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-collapse",attrs:{role:"tablist","aria-multiselectable":"true"}},[t._t("default")],2)},ep=[];tp._withStripped=!0;var np={name:"ElCollapse",componentName:"ElCollapse",props:{accordion:Boolean,value:{type:[Array,String,Number],default:function(){return[]}}},data:function(){return{activeNames:[].concat(this.value)}},provide:function(){return{collapse:this}},watch:{value:function(t){this.activeNames=[].concat(t)}},methods:{setActiveNames:function(t){t=[].concat(t);var e=this.accordion?t[0]:t;this.activeNames=t,this.$emit("input",e),this.$emit("change",e)},handleItemClick:function(t){if(this.accordion)this.setActiveNames(!this.activeNames[0]&&0!==this.activeNames[0]||this.activeNames[0]!==t.name?t.name:"");else{var e=this.activeNames.slice(0),n=e.indexOf(t.name);n>-1?e.splice(n,1):e.push(t.name),this.setActiveNames(e)}}},created:function(){this.$on("item-click",this.handleItemClick)}},ip=np,rp=s(ip,tp,ep,!1,null,null,null);rp.options.__file="packages/collapse/src/collapse.vue";var op=rp.exports;op.install=function(t){t.component(op.name,op)};var ap=op,sp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-collapse-item",class:{"is-active":t.isActive,"is-disabled":t.disabled}},[n("div",{attrs:{role:"tab","aria-expanded":t.isActive,"aria-controls":"el-collapse-content-"+t.id,"aria-describedby":"el-collapse-content-"+t.id}},[n("div",{staticClass:"el-collapse-item__header",class:{focusing:t.focusing,"is-active":t.isActive},attrs:{role:"button",id:"el-collapse-head-"+t.id,tabindex:t.disabled?void 0:0},on:{click:t.handleHeaderClick,keyup:function(e){return"button"in e||!t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"])||!t._k(e.keyCode,"enter",13,e.key,"Enter")?(e.stopPropagation(),t.handleEnterClick(e)):null},focus:t.handleFocus,blur:function(e){t.focusing=!1}}},[t._t("title",[t._v(t._s(t.title))]),n("i",{staticClass:"el-collapse-item__arrow el-icon-arrow-right",class:{"is-active":t.isActive}})],2)]),n("el-collapse-transition",[n("div",{directives:[{name:"show",rawName:"v-show",value:t.isActive,expression:"isActive"}],staticClass:"el-collapse-item__wrap",attrs:{role:"tabpanel","aria-hidden":!t.isActive,"aria-labelledby":"el-collapse-head-"+t.id,id:"el-collapse-content-"+t.id}},[n("div",{staticClass:"el-collapse-item__content"},[t._t("default")],2)])])],1)},lp=[];sp._withStripped=!0;var cp={name:"ElCollapseItem",componentName:"ElCollapseItem",mixins:[C.a],components:{ElCollapseTransition:qt.a},data:function(){return{contentWrapStyle:{height:"auto",display:"block"},contentHeight:0,focusing:!1,isClick:!1,id:Object(y["generateId"])()}},inject:["collapse"],props:{title:String,name:{type:[String,Number],default:function(){return this._uid}},disabled:Boolean},computed:{isActive:function(){return this.collapse.activeNames.indexOf(this.name)>-1}},methods:{handleFocus:function(){var t=this;setTimeout(function(){t.isClick?t.isClick=!1:t.focusing=!0},50)},handleHeaderClick:function(){this.disabled||(this.dispatch("ElCollapse","item-click",this),this.focusing=!1,this.isClick=!0)},handleEnterClick:function(){this.dispatch("ElCollapse","item-click",this)}}},up=cp,hp=s(up,sp,lp,!1,null,null,null);hp.options.__file="packages/collapse/src/collapse-item.vue";var dp=hp.exports;dp.install=function(t){t.component(dp.name,dp)};var pp=dp,fp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:function(){return t.toggleDropDownVisible(!1)},expression:"() => toggleDropDownVisible(false)"}],ref:"reference",class:["el-cascader",t.realSize&&"el-cascader--"+t.realSize,{"is-disabled":t.isDisabled}],on:{mouseenter:function(e){t.inputHover=!0},mouseleave:function(e){t.inputHover=!1},click:function(){return t.toggleDropDownVisible(!t.readonly||void 0)},keydown:t.handleKeyDown}},[n("el-input",{ref:"input",class:{"is-focus":t.dropDownVisible},attrs:{size:t.realSize,placeholder:t.placeholder,readonly:t.readonly,disabled:t.isDisabled,"validate-event":!1},on:{focus:t.handleFocus,blur:t.handleBlur,input:t.handleInput},model:{value:t.multiple?t.presentText:t.inputValue,callback:function(e){t.multiple?t.presentText:t.inputValue=e},expression:"multiple ? presentText : inputValue"}},[n("template",{slot:"suffix"},[t.clearBtnVisible?n("i",{key:"clear",staticClass:"el-input__icon el-icon-circle-close",on:{click:function(e){return e.stopPropagation(),t.handleClear(e)}}}):n("i",{key:"arrow-down",class:["el-input__icon","el-icon-arrow-down",t.dropDownVisible&&"is-reverse"],on:{click:function(e){e.stopPropagation(),t.toggleDropDownVisible()}}})])],2),t.multiple?n("div",{staticClass:"el-cascader__tags"},[t._l(t.presentTags,function(e,i){return n("el-tag",{key:e.key,attrs:{type:"info",size:t.tagSize,hit:e.hitState,closable:e.closable,"disable-transitions":""},on:{close:function(e){t.deleteTag(i)}}},[n("span",[t._v(t._s(e.text))])])}),t.filterable&&!t.isDisabled?n("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.inputValue,expression:"inputValue",modifiers:{trim:!0}}],staticClass:"el-cascader__search-input",attrs:{type:"text",placeholder:t.presentTags.length?"":t.placeholder},domProps:{value:t.inputValue},on:{input:[function(e){e.target.composing||(t.inputValue=e.target.value.trim())},function(e){return t.handleInput(t.inputValue,e)}],click:function(e){e.stopPropagation(),t.toggleDropDownVisible(!0)},keydown:function(e){return"button"in e||!t._k(e.keyCode,"delete",[8,46],e.key,["Backspace","Delete","Del"])?t.handleDelete(e):null},blur:function(e){t.$forceUpdate()}}}):t._e()],2):t._e(),n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.handleDropdownLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.dropDownVisible,expression:"dropDownVisible"}],ref:"popper",class:["el-popper","el-cascader__dropdown",t.popperClass]},[n("el-cascader-panel",{directives:[{name:"show",rawName:"v-show",value:!t.filtering,expression:"!filtering"}],ref:"panel",attrs:{options:t.options,props:t.config,border:!1,"render-label":t.$scopedSlots.default},on:{"expand-change":t.handleExpandChange,close:function(e){t.toggleDropDownVisible(!1)}},model:{value:t.checkedValue,callback:function(e){t.checkedValue=e},expression:"checkedValue"}}),t.filterable?n("el-scrollbar",{directives:[{name:"show",rawName:"v-show",value:t.filtering,expression:"filtering"}],ref:"suggestionPanel",staticClass:"el-cascader__suggestion-panel",attrs:{tag:"ul","view-class":"el-cascader__suggestion-list"},nativeOn:{keydown:function(e){return t.handleSuggestionKeyDown(e)}}},[t.suggestions.length?t._l(t.suggestions,function(e,i){return n("li",{key:e.uid,class:["el-cascader__suggestion-item",e.checked&&"is-checked"],attrs:{tabindex:-1},on:{click:function(e){t.handleSuggestionClick(i)}}},[n("span",[t._v(t._s(e.text))]),e.checked?n("i",{staticClass:"el-icon-check"}):t._e()])}):t._t("empty",[n("li",{staticClass:"el-cascader__empty-text"},[t._v(t._s(t.t("el.cascader.noMatch")))])])],2):t._e()],1)])],1)},mp=[];fp._withStripped=!0;var vp=n(42),gp=n.n(vp),yp=n(34),bp=n.n(yp),xp=bp.a.keys,wp={expandTrigger:{newProp:"expandTrigger",type:String},changeOnSelect:{newProp:"checkStrictly",type:Boolean},hoverThreshold:{newProp:"hoverThreshold",type:Number}},_p={props:{placement:{type:String,default:"bottom-start"},appendToBody:V.a.props.appendToBody,visibleArrow:{type:Boolean,default:!0},arrowOffset:V.a.props.arrowOffset,offset:V.a.props.offset,boundariesPadding:V.a.props.boundariesPadding,popperOptions:V.a.props.popperOptions},methods:V.a.methods,data:V.a.data,beforeDestroy:V.a.beforeDestroy},Mp={medium:36,small:32,mini:28},Ep={name:"ElCascader",directives:{Clickoutside:F.a},mixins:[_p,C.a,g.a,T.a],inject:{elForm:{default:""},elFormItem:{default:""}},components:{ElInput:m.a,ElTag:Qn.a,ElScrollbar:W.a,ElCascaderPanel:gp.a},props:{value:{},options:Array,props:Object,size:String,placeholder:{type:String,default:function(){return Object(fs["t"])("el.cascader.placeholder")}},disabled:Boolean,clearable:Boolean,filterable:Boolean,filterMethod:Function,separator:{type:String,default:" / "},showAllLevels:{type:Boolean,default:!0},collapseTags:Boolean,debounce:{type:Number,default:300},beforeFilter:{type:Function,default:function(){return function(){}}},popperClass:String},data:function(){return{dropDownVisible:!1,checkedValue:this.value||null,inputHover:!1,inputValue:null,presentText:null,presentTags:[],checkedNodes:[],filtering:!1,suggestions:[],inputInitialHeight:0,pressDeleteCount:0}},computed:{realSize:function(){var t=(this.elFormItem||{}).elFormItemSize;return this.size||t||(this.$ELEMENT||{}).size},tagSize:function(){return["small","mini"].indexOf(this.realSize)>-1?"mini":"small"},isDisabled:function(){return this.disabled||(this.elForm||{}).disabled},config:function(){var t=this.props||{},e=this.$attrs;return Object.keys(wp).forEach(function(n){var i=wp[n],r=i.newProp,o=i.type,a=e[n]||e[Object(y["kebabCase"])(n)];Object(Te["isDef"])(n)&&!Object(Te["isDef"])(t[r])&&(o===Boolean&&""===a&&(a=!0),t[r]=a)}),t},multiple:function(){return this.config.multiple},leafOnly:function(){return!this.config.checkStrictly},readonly:function(){return!this.filterable||this.multiple},clearBtnVisible:function(){return!(!this.clearable||this.isDisabled||this.filtering||!this.inputHover)&&(this.multiple?!!this.checkedNodes.filter(function(t){return!t.isDisabled}).length:!!this.presentText)},panel:function(){return this.$refs.panel}},watch:{disabled:function(){this.computePresentContent()},value:function(t){Object(y["isEqual"])(t,this.checkedValue)||(this.checkedValue=t,this.computePresentContent())},checkedValue:function(t){var e=this.value,n=this.dropDownVisible,i=this.config,r=i.checkStrictly,o=i.multiple;Object(y["isEqual"])(t,e)&&!Object(dd["isUndefined"])(e)||(this.computePresentContent(),o||r||!n||this.toggleDropDownVisible(!1),this.$emit("input",t),this.$emit("change",t),this.dispatch("ElFormItem","el.form.change",[t]))},options:{handler:function(){this.$nextTick(this.computePresentContent)},deep:!0},presentText:function(t){this.inputValue=t},presentTags:function(t,e){this.multiple&&(t.length||e.length)&&this.$nextTick(this.updateStyle)},filtering:function(t){this.$nextTick(this.updatePopper)}},mounted:function(){var t=this,e=this.$refs.input;e&&e.$el&&(this.inputInitialHeight=e.$el.offsetHeight||Mp[this.realSize]||40),Object(y["isEmpty"])(this.value)||this.computePresentContent(),this.filterHandler=z()(this.debounce,function(){var e=t.inputValue;if(e){var n=t.beforeFilter(e);n&&n.then?n.then(t.getSuggestions):!1!==n?t.getSuggestions():t.filtering=!1}else t.filtering=!1}),Object(ti["addResizeListener"])(this.$el,this.updateStyle)},beforeDestroy:function(){Object(ti["removeResizeListener"])(this.$el,this.updateStyle)},methods:{getMigratingConfig:function(){return{props:{"expand-trigger":"expand-trigger is removed, use `props.expandTrigger` instead.","change-on-select":"change-on-select is removed, use `props.checkStrictly` instead.","hover-threshold":"hover-threshold is removed, use `props.hoverThreshold` instead"},events:{"active-item-change":"active-item-change is renamed to expand-change"}}},toggleDropDownVisible:function(t){var e=this;if(!this.isDisabled){var n=this.dropDownVisible,i=this.$refs.input;t=Object(Te["isDef"])(t)?t:!n,t!==n&&(this.dropDownVisible=t,t&&this.$nextTick(function(){e.updatePopper(),e.panel.scrollIntoView()}),i.$refs.input.setAttribute("aria-expanded",t),this.$emit("visible-change",t))}},handleDropdownLeave:function(){this.filtering=!1,this.inputValue=this.presentText},handleKeyDown:function(t){switch(t.keyCode){case xp.enter:this.toggleDropDownVisible();break;case xp.down:this.toggleDropDownVisible(!0),this.focusFirstNode(),t.preventDefault();break;case xp.esc:case xp.tab:this.toggleDropDownVisible(!1);break}},handleFocus:function(t){this.$emit("focus",t)},handleBlur:function(t){this.$emit("blur",t)},handleInput:function(t,e){!this.dropDownVisible&&this.toggleDropDownVisible(!0),e&&e.isComposing||(t?this.filterHandler():this.filtering=!1)},handleClear:function(){this.presentText="",this.panel.clearCheckedNodes()},handleExpandChange:function(t){this.$nextTick(this.updatePopper.bind(this)),this.$emit("expand-change",t),this.$emit("active-item-change",t)},focusFirstNode:function(){var t=this;this.$nextTick(function(){var e=t.filtering,n=t.$refs,i=n.popper,r=n.suggestionPanel,o=null;if(e&&r)o=r.$el.querySelector(".el-cascader__suggestion-item");else{var a=i.querySelector(".el-cascader-menu");o=a.querySelector('.el-cascader-node[tabindex="-1"]')}o&&(o.focus(),!e&&o.click())})},computePresentContent:function(){var t=this;this.$nextTick(function(){t.config.multiple?(t.computePresentTags(),t.presentText=t.presentTags.length?" ":null):t.computePresentText()})},computePresentText:function(){var t=this.checkedValue,e=this.config;if(!Object(y["isEmpty"])(t)){var n=this.panel.getNodeByValue(t);if(n&&(e.checkStrictly||n.isLeaf))return void(this.presentText=n.getText(this.showAllLevels,this.separator))}this.presentText=null},computePresentTags:function(){var t=this.isDisabled,e=this.leafOnly,n=this.showAllLevels,i=this.separator,r=this.collapseTags,o=this.getCheckedNodes(e),a=[],s=function(e){return{node:e,key:e.uid,text:e.getText(n,i),hitState:!1,closable:!t&&!e.isDisabled}};if(o.length){var l=o[0],c=o.slice(1),u=c.length;a.push(s(l)),u&&(r?a.push({key:-1,text:"+ "+u,closable:!1}):c.forEach(function(t){return a.push(s(t))}))}this.checkedNodes=o,this.presentTags=a},getSuggestions:function(){var t=this,e=this.filterMethod;Object(dd["isFunction"])(e)||(e=function(t,e){return t.text.includes(e)});var n=this.panel.getFlattedNodes(this.leafOnly).filter(function(n){return!n.isDisabled&&(n.text=n.getText(t.showAllLevels,t.separator)||"",e(n,t.inputValue))});this.multiple?this.presentTags.forEach(function(t){t.hitState=!1}):n.forEach(function(e){e.checked=Object(y["isEqual"])(t.checkedValue,e.getValueByOption())}),this.filtering=!0,this.suggestions=n,this.$nextTick(this.updatePopper)},handleSuggestionKeyDown:function(t){var e=t.keyCode,n=t.target;switch(e){case xp.enter:n.click();break;case xp.up:var i=n.previousElementSibling;i&&i.focus();break;case xp.down:var r=n.nextElementSibling;r&&r.focus();break;case xp.esc:case xp.tab:this.toggleDropDownVisible(!1);break}},handleDelete:function(){var t=this.inputValue,e=this.pressDeleteCount,n=this.presentTags,i=n.length-1,r=n[i];this.pressDeleteCount=t?0:e+1,r&&this.pressDeleteCount&&(r.hitState?this.deleteTag(i):r.hitState=!0)},handleSuggestionClick:function(t){var e=this.multiple,n=this.suggestions[t];if(e){var i=n.checked;n.doCheck(!i),this.panel.calculateMultiCheckedValue()}else this.checkedValue=n.getValueByOption(),this.toggleDropDownVisible(!1)},deleteTag:function(t){var e=this.checkedValue,n=e[t];this.checkedValue=e.filter(function(e,n){return n!==t}),this.$emit("remove-tag",n)},updateStyle:function(){var t=this.$el,e=this.inputInitialHeight;if(!this.$isServer&&t){var n=this.$refs.suggestionPanel,i=t.querySelector(".el-input__inner");if(i){var r=t.querySelector(".el-cascader__tags"),o=null;if(n&&(o=n.$el)){var a=o.querySelector(".el-cascader__suggestion-list");a.style.minWidth=i.offsetWidth+"px"}if(r){var s=r.offsetHeight,l=Math.max(s+6,e)+"px";i.style.height=l,this.updatePopper()}}}},getCheckedNodes:function(t){return this.panel.getCheckedNodes(t)}}},Sp=Ep,Tp=s(Sp,fp,mp,!1,null,null,null);Tp.options.__file="packages/cascader/src/cascader.vue";var Ap=Tp.exports;Ap.install=function(t){t.component(Ap.name,Ap)};var Cp=Ap,Lp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"clickoutside",rawName:"v-clickoutside",value:t.hide,expression:"hide"}],class:["el-color-picker",t.colorDisabled?"is-disabled":"",t.colorSize?"el-color-picker--"+t.colorSize:""]},[t.colorDisabled?n("div",{staticClass:"el-color-picker__mask"}):t._e(),n("div",{staticClass:"el-color-picker__trigger",on:{click:t.handleTrigger}},[n("span",{staticClass:"el-color-picker__color",class:{"is-alpha":t.showAlpha}},[n("span",{staticClass:"el-color-picker__color-inner",style:{backgroundColor:t.displayedColor}}),t.value||t.showPanelColor?t._e():n("span",{staticClass:"el-color-picker__empty el-icon-close"})]),n("span",{directives:[{name:"show",rawName:"v-show",value:t.value||t.showPanelColor,expression:"value || showPanelColor"}],staticClass:"el-color-picker__icon el-icon-arrow-down"})]),n("picker-dropdown",{ref:"dropdown",class:["el-color-picker__panel",t.popperClass||""],attrs:{color:t.color,"show-alpha":t.showAlpha,predefine:t.predefine},on:{pick:t.confirmValue,clear:t.clearValue},model:{value:t.showPicker,callback:function(e){t.showPicker=e},expression:"showPicker"}})],1)},Pp=[];Lp._withStripped=!0;var Op="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};function Rp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var kp=function(t,e,n){return[t,e*n/((t=(2-e)*n)<1?t:2-t)||0,t/2]},Dp=function(t){return"string"===typeof t&&-1!==t.indexOf(".")&&1===parseFloat(t)},Ip=function(t){return"string"===typeof t&&-1!==t.indexOf("%")},Np=function(t,e){Dp(t)&&(t="100%");var n=Ip(t);return t=Math.min(e,Math.max(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),Math.abs(t-e)<1e-6?1:t%e/parseFloat(e)},zp={10:"A",11:"B",12:"C",13:"D",14:"E",15:"F"},Bp=function(t){var e=t.r,n=t.g,i=t.b,r=function(t){t=Math.min(Math.round(t),255);var e=Math.floor(t/16),n=t%16;return""+(zp[e]||e)+(zp[n]||n)};return isNaN(e)||isNaN(n)||isNaN(i)?"":"#"+r(e)+r(n)+r(i)},Fp={A:10,B:11,C:12,D:13,E:14,F:15},jp=function(t){return 2===t.length?16*(Fp[t[0].toUpperCase()]||+t[0])+(Fp[t[1].toUpperCase()]||+t[1]):Fp[t[1].toUpperCase()]||+t[1]},Hp=function(t,e,n){e/=100,n/=100;var i=e,r=Math.max(n,.01),o=void 0,a=void 0;return n*=2,e*=n<=1?n:2-n,i*=r<=1?r:2-r,a=(n+e)/2,o=0===n?2*i/(r+i):2*e/(n+e),{h:t,s:100*o,v:100*a}},Up=function(t,e,n){t=Np(t,255),e=Np(e,255),n=Np(n,255);var i=Math.max(t,e,n),r=Math.min(t,e,n),o=void 0,a=void 0,s=i,l=i-r;if(a=0===i?0:l/i,i===r)o=0;else{switch(i){case t:o=(e-n)/l+(e<n?6:0);break;case e:o=(n-t)/l+2;break;case n:o=(t-e)/l+4;break}o/=6}return{h:360*o,s:100*a,v:100*s}},Vp=function(t,e,n){t=6*Np(t,360),e=Np(e,100),n=Np(n,100);var i=Math.floor(t),r=t-i,o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),l=i%6,c=[n,a,o,o,s,n][l],u=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:Math.round(255*c),g:Math.round(255*u),b:Math.round(255*h)}},Gp=function(){function t(e){for(var n in Rp(this,t),this._hue=0,this._saturation=100,this._value=100,this._alpha=100,this.enableAlpha=!1,this.format="hex",this.value="",e=e||{},e)e.hasOwnProperty(n)&&(this[n]=e[n]);this.doOnChange()}return t.prototype.set=function(t,e){if(1!==arguments.length||"object"!==("undefined"===typeof t?"undefined":Op(t)))this["_"+t]=e,this.doOnChange();else for(var n in t)t.hasOwnProperty(n)&&this.set(n,t[n])},t.prototype.get=function(t){return this["_"+t]},t.prototype.toRgb=function(){return Vp(this._hue,this._saturation,this._value)},t.prototype.fromString=function(t){var e=this;if(!t)return this._hue=0,this._saturation=100,this._value=100,void this.doOnChange();var n=function(t,n,i){e._hue=Math.max(0,Math.min(360,t)),e._saturation=Math.max(0,Math.min(100,n)),e._value=Math.max(0,Math.min(100,i)),e.doOnChange()};if(-1!==t.indexOf("hsl")){var i=t.replace(/hsla|hsl|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});if(4===i.length?this._alpha=Math.floor(100*parseFloat(i[3])):3===i.length&&(this._alpha=100),i.length>=3){var r=Hp(i[0],i[1],i[2]),o=r.h,a=r.s,s=r.v;n(o,a,s)}}else if(-1!==t.indexOf("hsv")){var l=t.replace(/hsva|hsv|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});4===l.length?this._alpha=Math.floor(100*parseFloat(l[3])):3===l.length&&(this._alpha=100),l.length>=3&&n(l[0],l[1],l[2])}else if(-1!==t.indexOf("rgb")){var c=t.replace(/rgba|rgb|\(|\)/gm,"").split(/\s|,/g).filter(function(t){return""!==t}).map(function(t,e){return e>2?parseFloat(t):parseInt(t,10)});if(4===c.length?this._alpha=Math.floor(100*parseFloat(c[3])):3===c.length&&(this._alpha=100),c.length>=3){var u=Up(c[0],c[1],c[2]),h=u.h,d=u.s,p=u.v;n(h,d,p)}}else if(-1!==t.indexOf("#")){var f=t.replace("#","").trim();if(!/^(?:[0-9a-fA-F]{3}){1,2}$/.test(f))return;var m=void 0,v=void 0,g=void 0;3===f.length?(m=jp(f[0]+f[0]),v=jp(f[1]+f[1]),g=jp(f[2]+f[2])):6!==f.length&&8!==f.length||(m=jp(f.substring(0,2)),v=jp(f.substring(2,4)),g=jp(f.substring(4,6))),8===f.length?this._alpha=Math.floor(jp(f.substring(6))/255*100):3!==f.length&&6!==f.length||(this._alpha=100);var y=Up(m,v,g),b=y.h,x=y.s,w=y.v;n(b,x,w)}},t.prototype.compare=function(t){return Math.abs(t._hue-this._hue)<2&&Math.abs(t._saturation-this._saturation)<1&&Math.abs(t._value-this._value)<1&&Math.abs(t._alpha-this._alpha)<1},t.prototype.doOnChange=function(){var t=this._hue,e=this._saturation,n=this._value,i=this._alpha,r=this.format;if(this.enableAlpha)switch(r){case"hsl":var o=kp(t,e/100,n/100);this.value="hsla("+t+", "+Math.round(100*o[1])+"%, "+Math.round(100*o[2])+"%, "+i/100+")";break;case"hsv":this.value="hsva("+t+", "+Math.round(e)+"%, "+Math.round(n)+"%, "+i/100+")";break;default:var a=Vp(t,e,n),s=a.r,l=a.g,c=a.b;this.value="rgba("+s+", "+l+", "+c+", "+i/100+")"}else switch(r){case"hsl":var u=kp(t,e/100,n/100);this.value="hsl("+t+", "+Math.round(100*u[1])+"%, "+Math.round(100*u[2])+"%)";break;case"hsv":this.value="hsv("+t+", "+Math.round(e)+"%, "+Math.round(n)+"%)";break;case"rgb":var h=Vp(t,e,n),d=h.r,p=h.g,f=h.b;this.value="rgb("+d+", "+p+", "+f+")";break;default:this.value=Bp(Vp(t,e,n))}},t}(),Wp=Gp,$p=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-zoom-in-top"},on:{"after-leave":t.doDestroy}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.showPopper,expression:"showPopper"}],staticClass:"el-color-dropdown"},[n("div",{staticClass:"el-color-dropdown__main-wrapper"},[n("hue-slider",{ref:"hue",staticStyle:{float:"right"},attrs:{color:t.color,vertical:""}}),n("sv-panel",{ref:"sl",attrs:{color:t.color}})],1),t.showAlpha?n("alpha-slider",{ref:"alpha",attrs:{color:t.color}}):t._e(),t.predefine?n("predefine",{attrs:{color:t.color,colors:t.predefine}}):t._e(),n("div",{staticClass:"el-color-dropdown__btns"},[n("span",{staticClass:"el-color-dropdown__value"},[n("el-input",{attrs:{"validate-event":!1,size:"mini"},on:{blur:t.handleConfirm},nativeOn:{keyup:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.handleConfirm(e):null}},model:{value:t.customInput,callback:function(e){t.customInput=e},expression:"customInput"}})],1),n("el-button",{staticClass:"el-color-dropdown__link-btn",attrs:{size:"mini",type:"text"},on:{click:function(e){t.$emit("clear")}}},[t._v("\n        "+t._s(t.t("el.colorpicker.clear"))+"\n      ")]),n("el-button",{staticClass:"el-color-dropdown__btn",attrs:{plain:"",size:"mini"},on:{click:t.confirmValue}},[t._v("\n        "+t._s(t.t("el.colorpicker.confirm"))+"\n      ")])],1)],1)])},qp=[];$p._withStripped=!0;var Yp=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-color-svpanel",style:{backgroundColor:t.background}},[n("div",{staticClass:"el-color-svpanel__white"}),n("div",{staticClass:"el-color-svpanel__black"}),n("div",{staticClass:"el-color-svpanel__cursor",style:{top:t.cursorTop+"px",left:t.cursorLeft+"px"}},[n("div")])])},Xp=[];Yp._withStripped=!0;var Zp=!1,Jp=function(t,e){if(!Ui.a.prototype.$isServer){var n=function(t){e.drag&&e.drag(t)},i=function t(i){document.removeEventListener("mousemove",n),document.removeEventListener("mouseup",t),document.onselectstart=null,document.ondragstart=null,Zp=!1,e.end&&e.end(i)};t.addEventListener("mousedown",function(t){Zp||(document.onselectstart=function(){return!1},document.ondragstart=function(){return!1},document.addEventListener("mousemove",n),document.addEventListener("mouseup",i),Zp=!0,e.start&&e.start(t))})}},Kp={name:"el-sl-panel",props:{color:{required:!0}},computed:{colorValue:function(){var t=this.color.get("hue"),e=this.color.get("value");return{hue:t,value:e}}},watch:{colorValue:function(){this.update()}},methods:{update:function(){var t=this.color.get("saturation"),e=this.color.get("value"),n=this.$el,i=n.clientWidth,r=n.clientHeight;this.cursorLeft=t*i/100,this.cursorTop=(100-e)*r/100,this.background="hsl("+this.color.get("hue")+", 100%, 50%)"},handleDrag:function(t){var e=this.$el,n=e.getBoundingClientRect(),i=t.clientX-n.left,r=t.clientY-n.top;i=Math.max(0,i),i=Math.min(i,n.width),r=Math.max(0,r),r=Math.min(r,n.height),this.cursorLeft=i,this.cursorTop=r,this.color.set({saturation:i/n.width*100,value:100-r/n.height*100})}},mounted:function(){var t=this;Jp(this.$el,{drag:function(e){t.handleDrag(e)},end:function(e){t.handleDrag(e)}}),this.update()},data:function(){return{cursorTop:0,cursorLeft:0,background:"hsl(0, 100%, 50%)"}}},Qp=Kp,tf=s(Qp,Yp,Xp,!1,null,null,null);tf.options.__file="packages/color-picker/src/components/sv-panel.vue";var ef=tf.exports,nf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-color-hue-slider",class:{"is-vertical":t.vertical}},[n("div",{ref:"bar",staticClass:"el-color-hue-slider__bar",on:{click:t.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-hue-slider__thumb",style:{left:t.thumbLeft+"px",top:t.thumbTop+"px"}})])},rf=[];nf._withStripped=!0;var of={name:"el-color-hue-slider",props:{color:{required:!0},vertical:Boolean},data:function(){return{thumbLeft:0,thumbTop:0}},computed:{hueValue:function(){var t=this.color.get("hue");return t}},watch:{hueValue:function(){this.update()}},methods:{handleClick:function(t){var e=this.$refs.thumb,n=t.target;n!==e&&this.handleDrag(t)},handleDrag:function(t){var e=this.$el.getBoundingClientRect(),n=this.$refs.thumb,i=void 0;if(this.vertical){var r=t.clientY-e.top;r=Math.min(r,e.height-n.offsetHeight/2),r=Math.max(n.offsetHeight/2,r),i=Math.round((r-n.offsetHeight/2)/(e.height-n.offsetHeight)*360)}else{var o=t.clientX-e.left;o=Math.min(o,e.width-n.offsetWidth/2),o=Math.max(n.offsetWidth/2,o),i=Math.round((o-n.offsetWidth/2)/(e.width-n.offsetWidth)*360)}this.color.set("hue",i)},getThumbLeft:function(){if(this.vertical)return 0;var t=this.$el,e=this.color.get("hue");if(!t)return 0;var n=this.$refs.thumb;return Math.round(e*(t.offsetWidth-n.offsetWidth/2)/360)},getThumbTop:function(){if(!this.vertical)return 0;var t=this.$el,e=this.color.get("hue");if(!t)return 0;var n=this.$refs.thumb;return Math.round(e*(t.offsetHeight-n.offsetHeight/2)/360)},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop()}},mounted:function(){var t=this,e=this.$refs,n=e.bar,i=e.thumb,r={drag:function(e){t.handleDrag(e)},end:function(e){t.handleDrag(e)}};Jp(n,r),Jp(i,r),this.update()}},af=of,sf=s(af,nf,rf,!1,null,null,null);sf.options.__file="packages/color-picker/src/components/hue-slider.vue";var lf=sf.exports,cf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-color-alpha-slider",class:{"is-vertical":t.vertical}},[n("div",{ref:"bar",staticClass:"el-color-alpha-slider__bar",style:{background:t.background},on:{click:t.handleClick}}),n("div",{ref:"thumb",staticClass:"el-color-alpha-slider__thumb",style:{left:t.thumbLeft+"px",top:t.thumbTop+"px"}})])},uf=[];cf._withStripped=!0;var hf={name:"el-color-alpha-slider",props:{color:{required:!0},vertical:Boolean},watch:{"color._alpha":function(){this.update()},"color.value":function(){this.update()}},methods:{handleClick:function(t){var e=this.$refs.thumb,n=t.target;n!==e&&this.handleDrag(t)},handleDrag:function(t){var e=this.$el.getBoundingClientRect(),n=this.$refs.thumb;if(this.vertical){var i=t.clientY-e.top;i=Math.max(n.offsetHeight/2,i),i=Math.min(i,e.height-n.offsetHeight/2),this.color.set("alpha",Math.round((i-n.offsetHeight/2)/(e.height-n.offsetHeight)*100))}else{var r=t.clientX-e.left;r=Math.max(n.offsetWidth/2,r),r=Math.min(r,e.width-n.offsetWidth/2),this.color.set("alpha",Math.round((r-n.offsetWidth/2)/(e.width-n.offsetWidth)*100))}},getThumbLeft:function(){if(this.vertical)return 0;var t=this.$el,e=this.color._alpha;if(!t)return 0;var n=this.$refs.thumb;return Math.round(e*(t.offsetWidth-n.offsetWidth/2)/100)},getThumbTop:function(){if(!this.vertical)return 0;var t=this.$el,e=this.color._alpha;if(!t)return 0;var n=this.$refs.thumb;return Math.round(e*(t.offsetHeight-n.offsetHeight/2)/100)},getBackground:function(){if(this.color&&this.color.value){var t=this.color.toRgb(),e=t.r,n=t.g,i=t.b;return"linear-gradient(to right, rgba("+e+", "+n+", "+i+", 0) 0%, rgba("+e+", "+n+", "+i+", 1) 100%)"}return null},update:function(){this.thumbLeft=this.getThumbLeft(),this.thumbTop=this.getThumbTop(),this.background=this.getBackground()}},data:function(){return{thumbLeft:0,thumbTop:0,background:null}},mounted:function(){var t=this,e=this.$refs,n=e.bar,i=e.thumb,r={drag:function(e){t.handleDrag(e)},end:function(e){t.handleDrag(e)}};Jp(n,r),Jp(i,r),this.update()}},df=hf,pf=s(df,cf,uf,!1,null,null,null);pf.options.__file="packages/color-picker/src/components/alpha-slider.vue";var ff=pf.exports,mf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-color-predefine"},[n("div",{staticClass:"el-color-predefine__colors"},t._l(t.rgbaColors,function(e,i){return n("div",{key:t.colors[i],staticClass:"el-color-predefine__color-selector",class:{selected:e.selected,"is-alpha":e._alpha<100},on:{click:function(e){t.handleSelect(i)}}},[n("div",{style:{"background-color":e.value}})])}),0)])},vf=[];mf._withStripped=!0;var gf={props:{colors:{type:Array,required:!0},color:{required:!0}},data:function(){return{rgbaColors:this.parseColors(this.colors,this.color)}},methods:{handleSelect:function(t){this.color.fromString(this.colors[t])},parseColors:function(t,e){return t.map(function(t){var n=new Wp;return n.enableAlpha=!0,n.format="rgba",n.fromString(t),n.selected=n.value===e.value,n})}},watch:{"$parent.currentColor":function(t){var e=new Wp;e.fromString(t),this.rgbaColors.forEach(function(t){t.selected=e.compare(t)})},colors:function(t){this.rgbaColors=this.parseColors(t,this.color)},color:function(t){this.rgbaColors=this.parseColors(this.colors,t)}}},yf=gf,bf=s(yf,mf,vf,!1,null,null,null);bf.options.__file="packages/color-picker/src/components/predefine.vue";var xf=bf.exports,wf={name:"el-color-picker-dropdown",mixins:[V.a,g.a],components:{SvPanel:ef,HueSlider:lf,AlphaSlider:ff,ElInput:m.a,ElButton:at.a,Predefine:xf},props:{color:{required:!0},showAlpha:Boolean,predefine:Array},data:function(){return{customInput:""}},computed:{currentColor:function(){var t=this.$parent;return t.value||t.showPanelColor?t.color.value:""}},methods:{confirmValue:function(){this.$emit("pick")},handleConfirm:function(){this.color.fromString(this.customInput)}},mounted:function(){this.$parent.popperElm=this.popperElm=this.$el,this.referenceElm=this.$parent.$el},watch:{showPopper:function(t){var e=this;!0===t&&this.$nextTick(function(){var t=e.$refs,n=t.sl,i=t.hue,r=t.alpha;n&&n.update(),i&&i.update(),r&&r.update()})},currentColor:{immediate:!0,handler:function(t){this.customInput=t}}}},_f=wf,Mf=s(_f,$p,qp,!1,null,null,null);Mf.options.__file="packages/color-picker/src/components/picker-dropdown.vue";var Ef=Mf.exports,Sf={name:"ElColorPicker",mixins:[C.a],props:{value:String,showAlpha:Boolean,colorFormat:String,disabled:Boolean,size:String,popperClass:String,predefine:Array},inject:{elForm:{default:""},elFormItem:{default:""}},directives:{Clickoutside:F.a},computed:{displayedColor:function(){return this.value||this.showPanelColor?this.displayedRgb(this.color,this.showAlpha):"transparent"},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},colorSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},colorDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},watch:{value:function(t){t?t&&t!==this.color.value&&this.color.fromString(t):this.showPanelColor=!1},color:{deep:!0,handler:function(){this.showPanelColor=!0}},displayedColor:function(t){if(this.showPicker){var e=new Wp({enableAlpha:this.showAlpha,format:this.colorFormat});e.fromString(this.value);var n=this.displayedRgb(e,this.showAlpha);t!==n&&this.$emit("active-change",t)}}},methods:{handleTrigger:function(){this.colorDisabled||(this.showPicker=!this.showPicker)},confirmValue:function(){var t=this.color.value;this.$emit("input",t),this.$emit("change",t),this.dispatch("ElFormItem","el.form.change",t),this.showPicker=!1},clearValue:function(){this.$emit("input",null),this.$emit("change",null),null!==this.value&&this.dispatch("ElFormItem","el.form.change",null),this.showPanelColor=!1,this.showPicker=!1,this.resetColor()},hide:function(){this.showPicker=!1,this.resetColor()},resetColor:function(){var t=this;this.$nextTick(function(e){t.value?t.color.fromString(t.value):t.showPanelColor=!1})},displayedRgb:function(t,e){if(!(t instanceof Wp))throw Error("color should be instance of Color Class");var n=t.toRgb(),i=n.r,r=n.g,o=n.b;return e?"rgba("+i+", "+r+", "+o+", "+t.get("alpha")/100+")":"rgb("+i+", "+r+", "+o+")"}},mounted:function(){var t=this.value;t&&this.color.fromString(t),this.popperElm=this.$refs.dropdown.$el},data:function(){var t=new Wp({enableAlpha:this.showAlpha,format:this.colorFormat});return{color:t,showPicker:!1,showPanelColor:!1}},components:{PickerDropdown:Ef}},Tf=Sf,Af=s(Tf,Lp,Pp,!1,null,null,null);Af.options.__file="packages/color-picker/src/main.vue";var Cf=Af.exports;Cf.install=function(t){t.component(Cf.name,Cf)};var Lf=Cf,Pf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-transfer"},[n("transfer-panel",t._b({ref:"leftPanel",attrs:{data:t.sourceData,title:t.titles[0]||t.t("el.transfer.titles.0"),"default-checked":t.leftDefaultChecked,placeholder:t.filterPlaceholder||t.t("el.transfer.filterPlaceholder")},on:{"checked-change":t.onSourceCheckedChange}},"transfer-panel",t.$props,!1),[t._t("left-footer")],2),n("div",{staticClass:"el-transfer__buttons"},[n("el-button",{class:["el-transfer__button",t.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===t.rightChecked.length},nativeOn:{click:function(e){return t.addToLeft(e)}}},[n("i",{staticClass:"el-icon-arrow-left"}),void 0!==t.buttonTexts[0]?n("span",[t._v(t._s(t.buttonTexts[0]))]):t._e()]),n("el-button",{class:["el-transfer__button",t.hasButtonTexts?"is-with-texts":""],attrs:{type:"primary",disabled:0===t.leftChecked.length},nativeOn:{click:function(e){return t.addToRight(e)}}},[void 0!==t.buttonTexts[1]?n("span",[t._v(t._s(t.buttonTexts[1]))]):t._e(),n("i",{staticClass:"el-icon-arrow-right"})])],1),n("transfer-panel",t._b({ref:"rightPanel",attrs:{data:t.targetData,title:t.titles[1]||t.t("el.transfer.titles.1"),"default-checked":t.rightDefaultChecked,placeholder:t.filterPlaceholder||t.t("el.transfer.filterPlaceholder")},on:{"checked-change":t.onTargetCheckedChange}},"transfer-panel",t.$props,!1),[t._t("right-footer")],2)],1)},Of=[];Pf._withStripped=!0;var Rf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-transfer-panel"},[n("p",{staticClass:"el-transfer-panel__header"},[n("el-checkbox",{attrs:{indeterminate:t.isIndeterminate},on:{change:t.handleAllCheckedChange},model:{value:t.allChecked,callback:function(e){t.allChecked=e},expression:"allChecked"}},[t._v("\n      "+t._s(t.title)+"\n      "),n("span",[t._v(t._s(t.checkedSummary))])])],1),n("div",{class:["el-transfer-panel__body",t.hasFooter?"is-with-footer":""]},[t.filterable?n("el-input",{staticClass:"el-transfer-panel__filter",attrs:{size:"small",placeholder:t.placeholder},nativeOn:{mouseenter:function(e){t.inputHover=!0},mouseleave:function(e){t.inputHover=!1}},model:{value:t.query,callback:function(e){t.query=e},expression:"query"}},[n("i",{class:["el-input__icon","el-icon-"+t.inputIcon],attrs:{slot:"prefix"},on:{click:t.clearQuery},slot:"prefix"})]):t._e(),n("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:!t.hasNoMatch&&t.data.length>0,expression:"!hasNoMatch && data.length > 0"}],staticClass:"el-transfer-panel__list",class:{"is-filterable":t.filterable},model:{value:t.checked,callback:function(e){t.checked=e},expression:"checked"}},t._l(t.filteredData,function(e){return n("el-checkbox",{key:e[t.keyProp],staticClass:"el-transfer-panel__item",attrs:{label:e[t.keyProp],disabled:e[t.disabledProp]}},[n("option-content",{attrs:{option:e}})],1)}),1),n("p",{directives:[{name:"show",rawName:"v-show",value:t.hasNoMatch,expression:"hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[t._v(t._s(t.t("el.transfer.noMatch")))]),n("p",{directives:[{name:"show",rawName:"v-show",value:0===t.data.length&&!t.hasNoMatch,expression:"data.length === 0 && !hasNoMatch"}],staticClass:"el-transfer-panel__empty"},[t._v(t._s(t.t("el.transfer.noData")))])],1),t.hasFooter?n("p",{staticClass:"el-transfer-panel__footer"},[t._t("default")],2):t._e()])},kf=[];Rf._withStripped=!0;var Df={mixins:[g.a],name:"ElTransferPanel",componentName:"ElTransferPanel",components:{ElCheckboxGroup:Pr.a,ElCheckbox:Di.a,ElInput:m.a,OptionContent:{props:{option:Object},render:function(t){var e=function t(e){return"ElTransferPanel"===e.$options.componentName?e:e.$parent?t(e.$parent):e},n=e(this),i=n.$parent||n;return n.renderContent?n.renderContent(t,this.option):i.$scopedSlots.default?i.$scopedSlots.default({option:this.option}):t("span",[this.option[n.labelProp]||this.option[n.keyProp]])}}},props:{data:{type:Array,default:function(){return[]}},renderContent:Function,placeholder:String,title:String,filterable:Boolean,format:Object,filterMethod:Function,defaultChecked:Array,props:Object},data:function(){return{checked:[],allChecked:!1,query:"",inputHover:!1,checkChangeByUser:!0}},watch:{checked:function(t,e){if(this.updateAllChecked(),this.checkChangeByUser){var n=t.concat(e).filter(function(n){return-1===t.indexOf(n)||-1===e.indexOf(n)});this.$emit("checked-change",t,n)}else this.$emit("checked-change",t),this.checkChangeByUser=!0},data:function(){var t=this,e=[],n=this.filteredData.map(function(e){return e[t.keyProp]});this.checked.forEach(function(t){n.indexOf(t)>-1&&e.push(t)}),this.checkChangeByUser=!1,this.checked=e},checkableData:function(){this.updateAllChecked()},defaultChecked:{immediate:!0,handler:function(t,e){var n=this;if(!e||t.length!==e.length||!t.every(function(t){return e.indexOf(t)>-1})){var i=[],r=this.checkableData.map(function(t){return t[n.keyProp]});t.forEach(function(t){r.indexOf(t)>-1&&i.push(t)}),this.checkChangeByUser=!1,this.checked=i}}}},computed:{filteredData:function(){var t=this;return this.data.filter(function(e){if("function"===typeof t.filterMethod)return t.filterMethod(t.query,e);var n=e[t.labelProp]||e[t.keyProp].toString();return n.toLowerCase().indexOf(t.query.toLowerCase())>-1})},checkableData:function(){var t=this;return this.filteredData.filter(function(e){return!e[t.disabledProp]})},checkedSummary:function(){var t=this.checked.length,e=this.data.length,n=this.format,i=n.noChecked,r=n.hasChecked;return i&&r?t>0?r.replace(/\${checked}/g,t).replace(/\${total}/g,e):i.replace(/\${total}/g,e):t+"/"+e},isIndeterminate:function(){var t=this.checked.length;return t>0&&t<this.checkableData.length},hasNoMatch:function(){return this.query.length>0&&0===this.filteredData.length},inputIcon:function(){return this.query.length>0&&this.inputHover?"circle-close":"search"},labelProp:function(){return this.props.label||"label"},keyProp:function(){return this.props.key||"key"},disabledProp:function(){return this.props.disabled||"disabled"},hasFooter:function(){return!!this.$slots.default}},methods:{updateAllChecked:function(){var t=this,e=this.checkableData.map(function(e){return e[t.keyProp]});this.allChecked=e.length>0&&e.every(function(e){return t.checked.indexOf(e)>-1})},handleAllCheckedChange:function(t){var e=this;this.checked=t?this.checkableData.map(function(t){return t[e.keyProp]}):[]},clearQuery:function(){"circle-close"===this.inputIcon&&(this.query="")}}},If=Df,Nf=s(If,Rf,kf,!1,null,null,null);Nf.options.__file="packages/transfer/src/transfer-panel.vue";var zf=Nf.exports,Bf={name:"ElTransfer",mixins:[C.a,g.a,T.a],components:{TransferPanel:zf,ElButton:at.a},props:{data:{type:Array,default:function(){return[]}},titles:{type:Array,default:function(){return[]}},buttonTexts:{type:Array,default:function(){return[]}},filterPlaceholder:{type:String,default:""},filterMethod:Function,leftDefaultChecked:{type:Array,default:function(){return[]}},rightDefaultChecked:{type:Array,default:function(){return[]}},renderContent:Function,value:{type:Array,default:function(){return[]}},format:{type:Object,default:function(){return{}}},filterable:Boolean,props:{type:Object,default:function(){return{label:"label",key:"key",disabled:"disabled"}}},targetOrder:{type:String,default:"original"}},data:function(){return{leftChecked:[],rightChecked:[]}},computed:{dataObj:function(){var t=this.props.key;return this.data.reduce(function(e,n){return(e[n[t]]=n)&&e},{})},sourceData:function(){var t=this;return this.data.filter(function(e){return-1===t.value.indexOf(e[t.props.key])})},targetData:function(){var t=this;return"original"===this.targetOrder?this.data.filter(function(e){return t.value.indexOf(e[t.props.key])>-1}):this.value.reduce(function(e,n){var i=t.dataObj[n];return i&&e.push(i),e},[])},hasButtonTexts:function(){return 2===this.buttonTexts.length}},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",t)}},methods:{getMigratingConfig:function(){return{props:{"footer-format":"footer-format is renamed to format."}}},onSourceCheckedChange:function(t,e){this.leftChecked=t,void 0!==e&&this.$emit("left-check-change",t,e)},onTargetCheckedChange:function(t,e){this.rightChecked=t,void 0!==e&&this.$emit("right-check-change",t,e)},addToLeft:function(){var t=this.value.slice();this.rightChecked.forEach(function(e){var n=t.indexOf(e);n>-1&&t.splice(n,1)}),this.$emit("input",t),this.$emit("change",t,"left",this.rightChecked)},addToRight:function(){var t=this,e=this.value.slice(),n=[],i=this.props.key;this.data.forEach(function(e){var r=e[i];t.leftChecked.indexOf(r)>-1&&-1===t.value.indexOf(r)&&n.push(r)}),e="unshift"===this.targetOrder?n.concat(e):e.concat(n),this.$emit("input",e),this.$emit("change",e,"right",this.leftChecked)},clearQuery:function(t){"left"===t?this.$refs.leftPanel.query="":"right"===t&&(this.$refs.rightPanel.query="")}}},Ff=Bf,jf=s(Ff,Pf,Of,!1,null,null,null);jf.options.__file="packages/transfer/src/main.vue";var Hf=jf.exports;Hf.install=function(t){t.component(Hf.name,Hf)};var Uf=Hf,Vf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"el-container",class:{"is-vertical":t.isVertical}},[t._t("default")],2)},Gf=[];Vf._withStripped=!0;var Wf={name:"ElContainer",componentName:"ElContainer",props:{direction:String},computed:{isVertical:function(){return"vertical"===this.direction||"horizontal"!==this.direction&&(!(!this.$slots||!this.$slots.default)&&this.$slots.default.some(function(t){var e=t.componentOptions&&t.componentOptions.tag;return"el-header"===e||"el-footer"===e}))}}},$f=Wf,qf=s($f,Vf,Gf,!1,null,null,null);qf.options.__file="packages/container/src/main.vue";var Yf=qf.exports;Yf.install=function(t){t.component(Yf.name,Yf)};var Xf=Yf,Zf=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("header",{staticClass:"el-header",style:{height:t.height}},[t._t("default")],2)},Jf=[];Zf._withStripped=!0;var Kf={name:"ElHeader",componentName:"ElHeader",props:{height:{type:String,default:"60px"}}},Qf=Kf,tm=s(Qf,Zf,Jf,!1,null,null,null);tm.options.__file="packages/header/src/main.vue";var em=tm.exports;em.install=function(t){t.component(em.name,em)};var nm=em,im=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("aside",{staticClass:"el-aside",style:{width:t.width}},[t._t("default")],2)},rm=[];im._withStripped=!0;var om={name:"ElAside",componentName:"ElAside",props:{width:{type:String,default:"300px"}}},am=om,sm=s(am,im,rm,!1,null,null,null);sm.options.__file="packages/aside/src/main.vue";var lm=sm.exports;lm.install=function(t){t.component(lm.name,lm)};var cm=lm,um=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("main",{staticClass:"el-main"},[t._t("default")],2)},hm=[];um._withStripped=!0;var dm={name:"ElMain",componentName:"ElMain"},pm=dm,fm=s(pm,um,hm,!1,null,null,null);fm.options.__file="packages/main/src/main.vue";var mm=fm.exports;mm.install=function(t){t.component(mm.name,mm)};var vm=mm,gm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("footer",{staticClass:"el-footer",style:{height:t.height}},[t._t("default")],2)},ym=[];gm._withStripped=!0;var bm={name:"ElFooter",componentName:"ElFooter",props:{height:{type:String,default:"60px"}}},xm=bm,wm=s(xm,gm,ym,!1,null,null,null);wm.options.__file="packages/footer/src/main.vue";var _m=wm.exports;_m.install=function(t){t.component(_m.name,_m)};var Mm,Em,Sm=_m,Tm={name:"ElTimeline",props:{reverse:{type:Boolean,default:!1}},provide:function(){return{timeline:this}},render:function(){var t=arguments[0],e=this.reverse,n={"el-timeline":!0,"is-reverse":e},i=this.$slots.default||[];return e&&(i=i.reverse()),t("ul",{class:n},[i])}},Am=Tm,Cm=s(Am,Mm,Em,!1,null,null,null);Cm.options.__file="packages/timeline/src/main.vue";var Lm=Cm.exports;Lm.install=function(t){t.component(Lm.name,Lm)};var Pm=Lm,Om=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{staticClass:"el-timeline-item"},[n("div",{staticClass:"el-timeline-item__tail"}),t.$slots.dot?t._e():n("div",{staticClass:"el-timeline-item__node",class:["el-timeline-item__node--"+(t.size||""),"el-timeline-item__node--"+(t.type||"")],style:{backgroundColor:t.color}},[t.icon?n("i",{staticClass:"el-timeline-item__icon",class:t.icon}):t._e()]),t.$slots.dot?n("div",{staticClass:"el-timeline-item__dot"},[t._t("dot")],2):t._e(),n("div",{staticClass:"el-timeline-item__wrapper"},[t.hideTimestamp||"top"!==t.placement?t._e():n("div",{staticClass:"el-timeline-item__timestamp is-top"},[t._v("\n      "+t._s(t.timestamp)+"\n    ")]),n("div",{staticClass:"el-timeline-item__content"},[t._t("default")],2),t.hideTimestamp||"bottom"!==t.placement?t._e():n("div",{staticClass:"el-timeline-item__timestamp is-bottom"},[t._v("\n      "+t._s(t.timestamp)+"\n    ")])])])},Rm=[];Om._withStripped=!0;var km={name:"ElTimelineItem",inject:["timeline"],props:{timestamp:String,hideTimestamp:{type:Boolean,default:!1},placement:{type:String,default:"bottom"},type:String,color:String,size:{type:String,default:"normal"},icon:String}},Dm=km,Im=s(Dm,Om,Rm,!1,null,null,null);Im.options.__file="packages/timeline/src/item.vue";var Nm=Im.exports;Nm.install=function(t){t.component(Nm.name,Nm)};var zm=Nm,Bm=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("a",t._b({class:["el-link",t.type?"el-link--"+t.type:"",t.disabled&&"is-disabled",t.underline&&!t.disabled&&"is-underline"],attrs:{href:t.disabled?null:t.href},on:{click:t.handleClick}},"a",t.$attrs,!1),[t.icon?n("i",{class:t.icon}):t._e(),t.$slots.default?n("span",{staticClass:"el-link--inner"},[t._t("default")],2):t._e(),t.$slots.icon?[t.$slots.icon?t._t("icon"):t._e()]:t._e()],2)},Fm=[];Bm._withStripped=!0;var jm={name:"ElLink",props:{type:{type:String,default:"default"},underline:{type:Boolean,default:!0},disabled:Boolean,href:String,icon:String},methods:{handleClick:function(t){this.disabled||this.href||this.$emit("click",t)}}},Hm=jm,Um=s(Hm,Bm,Fm,!1,null,null,null);Um.options.__file="packages/link/src/main.vue";var Vm=Um.exports;Vm.install=function(t){t.component(Vm.name,Vm)};var Gm=Vm,Wm=function(t,e){var n=e._c;return n("div",e._g(e._b({class:[e.data.staticClass,"el-divider","el-divider--"+e.props.direction]},"div",e.data.attrs,!1),e.listeners),[e.slots().default&&"vertical"!==e.props.direction?n("div",{class:["el-divider__text","is-"+e.props.contentPosition]},[e._t("default")],2):e._e()])},$m=[];Wm._withStripped=!0;var qm={name:"ElDivider",props:{direction:{type:String,default:"horizontal",validator:function(t){return-1!==["horizontal","vertical"].indexOf(t)}},contentPosition:{type:String,default:"center",validator:function(t){return-1!==["left","center","right"].indexOf(t)}}}},Ym=qm,Xm=s(Ym,Wm,$m,!0,null,null,null);Xm.options.__file="packages/divider/src/main.vue";var Zm=Xm.exports;Zm.install=function(t){t.component(Zm.name,Zm)};var Jm=Zm,Km=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-image"},[t.loading?t._t("placeholder",[n("div",{staticClass:"el-image__placeholder"})]):t.error?t._t("error",[n("div",{staticClass:"el-image__error"},[t._v(t._s(t.t("el.image.error")))])]):n("img",t._g(t._b({staticClass:"el-image__inner",class:{"el-image__inner--center":t.alignCenter,"el-image__preview":t.preview},style:t.imageStyle,attrs:{src:t.src},on:{click:t.clickHandler}},"img",t.$attrs,!1),t.$listeners)),t.preview?[t.showViewer?n("image-viewer",{attrs:{"z-index":t.zIndex,"initial-index":t.imageIndex,"on-close":t.closeViewer,"url-list":t.previewSrcList}}):t._e()]:t._e()],2)},Qm=[];Km._withStripped=!0;var tv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"viewer-fade"}},[n("div",{ref:"el-image-viewer__wrapper",staticClass:"el-image-viewer__wrapper",style:{"z-index":t.zIndex},attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-image-viewer__mask",on:{click:function(e){return e.target!==e.currentTarget?null:t.handleMaskClick(e)}}}),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__close",on:{click:t.hide}},[n("i",{staticClass:"el-icon-close"})]),t.isSingle?t._e():[n("span",{staticClass:"el-image-viewer__btn el-image-viewer__prev",class:{"is-disabled":!t.infinite&&t.isFirst},on:{click:t.prev}},[n("i",{staticClass:"el-icon-arrow-left"})]),n("span",{staticClass:"el-image-viewer__btn el-image-viewer__next",class:{"is-disabled":!t.infinite&&t.isLast},on:{click:t.next}},[n("i",{staticClass:"el-icon-arrow-right"})])],n("div",{staticClass:"el-image-viewer__btn el-image-viewer__actions"},[n("div",{staticClass:"el-image-viewer__actions__inner"},[n("i",{staticClass:"el-icon-zoom-out",on:{click:function(e){t.handleActions("zoomOut")}}}),n("i",{staticClass:"el-icon-zoom-in",on:{click:function(e){t.handleActions("zoomIn")}}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{class:t.mode.icon,on:{click:t.toggleMode}}),n("i",{staticClass:"el-image-viewer__actions__divider"}),n("i",{staticClass:"el-icon-refresh-left",on:{click:function(e){t.handleActions("anticlocelise")}}}),n("i",{staticClass:"el-icon-refresh-right",on:{click:function(e){t.handleActions("clocelise")}}})])]),n("div",{staticClass:"el-image-viewer__canvas"},t._l(t.urlList,function(e,i){return i===t.index?n("img",{key:e,ref:"img",refInFor:!0,staticClass:"el-image-viewer__img",style:t.imgStyle,attrs:{src:t.currentImg},on:{load:t.handleImgLoad,error:t.handleImgError,mousedown:t.handleMouseDown}}):t._e()}),0)],2)])},ev=[];tv._withStripped=!0;var nv=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},iv={CONTAIN:{name:"contain",icon:"el-icon-full-screen"},ORIGINAL:{name:"original",icon:"el-icon-c-scale-to-original"}},rv=Object(y["isFirefox"])()?"DOMMouseScroll":"mousewheel",ov={name:"elImageViewer",props:{urlList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3},onSwitch:{type:Function,default:function(){}},onClose:{type:Function,default:function(){}},initialIndex:{type:Number,default:0},appendToBody:{type:Boolean,default:!0},maskClosable:{type:Boolean,default:!0}},data:function(){return{index:this.initialIndex,isShow:!1,infinite:!0,loading:!1,mode:iv.CONTAIN,transform:{scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}}},computed:{isSingle:function(){return this.urlList.length<=1},isFirst:function(){return 0===this.index},isLast:function(){return this.index===this.urlList.length-1},currentImg:function(){return this.urlList[this.index]},imgStyle:function(){var t=this.transform,e=t.scale,n=t.deg,i=t.offsetX,r=t.offsetY,o=t.enableTransition,a={transform:"scale("+e+") rotate("+n+"deg)",transition:o?"transform .3s":"","margin-left":i+"px","margin-top":r+"px"};return this.mode===iv.CONTAIN&&(a.maxWidth=a.maxHeight="100%"),a}},watch:{index:{handler:function(t){this.reset(),this.onSwitch(t)}},currentImg:function(t){var e=this;this.$nextTick(function(t){var n=e.$refs.img[0];n.complete||(e.loading=!0)})}},methods:{hide:function(){this.deviceSupportUninstall(),this.onClose()},deviceSupportInstall:function(){var t=this;this._keyDownHandler=Object(y["rafThrottle"])(function(e){var n=e.keyCode;switch(n){case 27:t.hide();break;case 32:t.toggleMode();break;case 37:t.prev();break;case 38:t.handleActions("zoomIn");break;case 39:t.next();break;case 40:t.handleActions("zoomOut");break}}),this._mouseWheelHandler=Object(y["rafThrottle"])(function(e){var n=e.wheelDelta?e.wheelDelta:-e.detail;n>0?t.handleActions("zoomIn",{zoomRate:.015,enableTransition:!1}):t.handleActions("zoomOut",{zoomRate:.015,enableTransition:!1})}),Object(Bt["on"])(document,"keydown",this._keyDownHandler),Object(Bt["on"])(document,rv,this._mouseWheelHandler)},deviceSupportUninstall:function(){Object(Bt["off"])(document,"keydown",this._keyDownHandler),Object(Bt["off"])(document,rv,this._mouseWheelHandler),this._keyDownHandler=null,this._mouseWheelHandler=null},handleImgLoad:function(t){this.loading=!1},handleImgError:function(t){this.loading=!1,t.target.alt=""},handleMouseDown:function(t){var e=this;if(!this.loading&&0===t.button){var n=this.transform,i=n.offsetX,r=n.offsetY,o=t.pageX,a=t.pageY;this._dragHandler=Object(y["rafThrottle"])(function(t){e.transform.offsetX=i+t.pageX-o,e.transform.offsetY=r+t.pageY-a}),Object(Bt["on"])(document,"mousemove",this._dragHandler),Object(Bt["on"])(document,"mouseup",function(t){Object(Bt["off"])(document,"mousemove",e._dragHandler)}),t.preventDefault()}},handleMaskClick:function(){this.maskClosable&&this.hide()},reset:function(){this.transform={scale:1,deg:0,offsetX:0,offsetY:0,enableTransition:!1}},toggleMode:function(){if(!this.loading){var t=Object.keys(iv),e=Object.values(iv),n=e.indexOf(this.mode),i=(n+1)%t.length;this.mode=iv[t[i]],this.reset()}},prev:function(){if(!this.isFirst||this.infinite){var t=this.urlList.length;this.index=(this.index-1+t)%t}},next:function(){if(!this.isLast||this.infinite){var t=this.urlList.length;this.index=(this.index+1)%t}},handleActions:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.loading){var n=nv({zoomRate:.2,rotateDeg:90,enableTransition:!0},e),i=n.zoomRate,r=n.rotateDeg,o=n.enableTransition,a=this.transform;switch(t){case"zoomOut":a.scale>.2&&(a.scale=parseFloat((a.scale-i).toFixed(3)));break;case"zoomIn":a.scale=parseFloat((a.scale+i).toFixed(3));break;case"clocelise":a.deg+=r;break;case"anticlocelise":a.deg-=r;break}a.enableTransition=o}}},mounted:function(){this.deviceSupportInstall(),this.appendToBody&&document.body.appendChild(this.$el),this.$refs["el-image-viewer__wrapper"].focus()},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},av=ov,sv=s(av,tv,ev,!1,null,null,null);sv.options.__file="packages/image/src/image-viewer.vue";var lv=sv.exports,cv=function(){return void 0!==document.documentElement.style.objectFit},uv={NONE:"none",CONTAIN:"contain",COVER:"cover",FILL:"fill",SCALE_DOWN:"scale-down"},hv="",dv={name:"ElImage",mixins:[g.a],inheritAttrs:!1,components:{ImageViewer:lv},props:{src:String,fit:String,lazy:Boolean,scrollContainer:{},previewSrcList:{type:Array,default:function(){return[]}},zIndex:{type:Number,default:2e3}},data:function(){return{loading:!0,error:!1,show:!this.lazy,imageWidth:0,imageHeight:0,showViewer:!1}},computed:{imageStyle:function(){var t=this.fit;return!this.$isServer&&t?cv()?{"object-fit":t}:this.getImageStyle(t):{}},alignCenter:function(){return!this.$isServer&&!cv()&&this.fit!==uv.FILL},preview:function(){var t=this.previewSrcList;return Array.isArray(t)&&t.length>0},imageIndex:function(){var t=0,e=this.previewSrcList.indexOf(this.src);return e>=0&&(t=e),t}},watch:{src:function(t){this.show&&this.loadImage()},show:function(t){t&&this.loadImage()}},mounted:function(){this.lazy?this.addLazyLoadListener():this.loadImage()},beforeDestroy:function(){this.lazy&&this.removeLazyLoadListener()},methods:{loadImage:function(){var t=this;if(!this.$isServer){this.loading=!0,this.error=!1;var e=new Image;e.onload=function(n){return t.handleLoad(n,e)},e.onerror=this.handleError.bind(this),Object.keys(this.$attrs).forEach(function(n){var i=t.$attrs[n];e.setAttribute(n,i)}),e.src=this.src}},handleLoad:function(t,e){this.imageWidth=e.width,this.imageHeight=e.height,this.loading=!1,this.error=!1},handleError:function(t){this.loading=!1,this.error=!0,this.$emit("error",t)},handleLazyLoad:function(){Object(Bt["isInContainer"])(this.$el,this._scrollContainer)&&(this.show=!0,this.removeLazyLoadListener())},addLazyLoadListener:function(){if(!this.$isServer){var t=this.scrollContainer,e=null;e=Object(dd["isHtmlElement"])(t)?t:Object(dd["isString"])(t)?document.querySelector(t):Object(Bt["getScrollContainer"])(this.$el),e&&(this._scrollContainer=e,this._lazyLoadHandler=Id()(200,this.handleLazyLoad),Object(Bt["on"])(e,"scroll",this._lazyLoadHandler),this.handleLazyLoad())}},removeLazyLoadListener:function(){var t=this._scrollContainer,e=this._lazyLoadHandler;!this.$isServer&&t&&e&&(Object(Bt["off"])(t,"scroll",e),this._scrollContainer=null,this._lazyLoadHandler=null)},getImageStyle:function(t){var e=this.imageWidth,n=this.imageHeight,i=this.$el,r=i.clientWidth,o=i.clientHeight;if(!e||!n||!r||!o)return{};var a=e/n<1;if(t===uv.SCALE_DOWN){var s=e<r&&n<o;t=s?uv.NONE:uv.CONTAIN}switch(t){case uv.NONE:return{width:"auto",height:"auto"};case uv.CONTAIN:return a?{width:"auto"}:{height:"auto"};case uv.COVER:return a?{height:"auto"}:{width:"auto"};default:return{}}},clickHandler:function(){this.preview&&(hv=document.body.style.overflow,document.body.style.overflow="hidden",this.showViewer=!0)},closeViewer:function(){document.body.style.overflow=hv,this.showViewer=!1}}},pv=dv,fv=s(pv,Km,Qm,!1,null,null,null);fv.options.__file="packages/image/src/main.vue";var mv=fv.exports;mv.install=function(t){t.component(mv.name,mv)};var vv=mv,gv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-calendar"},[n("div",{staticClass:"el-calendar__header"},[n("div",{staticClass:"el-calendar__title"},[t._v("\n      "+t._s(t.i18nDate)+"\n    ")]),0===t.validatedRange.length?n("div",{staticClass:"el-calendar__button-group"},[n("el-button-group",[n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(e){t.selectDate("prev-month")}}},[t._v("\n          "+t._s(t.t("el.datepicker.prevMonth"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(e){t.selectDate("today")}}},[t._v("\n          "+t._s(t.t("el.datepicker.today"))+"\n        ")]),n("el-button",{attrs:{type:"plain",size:"mini"},on:{click:function(e){t.selectDate("next-month")}}},[t._v("\n          "+t._s(t.t("el.datepicker.nextMonth"))+"\n        ")])],1)],1):t._e()]),0===t.validatedRange.length?n("div",{key:"no-range",staticClass:"el-calendar__body"},[n("date-table",{attrs:{date:t.date,"selected-day":t.realSelectedDay,"first-day-of-week":t.realFirstDayOfWeek},on:{pick:t.pickDay}})],1):n("div",{key:"has-range",staticClass:"el-calendar__body"},t._l(t.validatedRange,function(e,i){return n("date-table",{key:i,attrs:{date:e[0],"selected-day":t.realSelectedDay,range:e,"hide-header":0!==i,"first-day-of-week":t.realFirstDayOfWeek},on:{pick:t.pickDay}})}),1)])},yv=[];gv._withStripped=!0;var bv,xv,wv=n(20),_v=n.n(wv),Mv={props:{selectedDay:String,range:{type:Array,validator:function(t){if(!t||!t.length)return!0;var e=t[0],n=t[1];return Object(ro["validateRangeInOneMonth"])(e,n)}},date:Date,hideHeader:Boolean,firstDayOfWeek:Number},inject:["elCalendar"],data:function(){return{WEEK_DAYS:Object(ro["getI18nSettings"])().dayNames}},methods:{toNestedArr:function(t){return Object(ro["range"])(t.length/7).map(function(e,n){var i=7*n;return t.slice(i,i+7)})},getFormateDate:function(t,e){if(!t||-1===["prev","current","next"].indexOf(e))throw new Error("invalid day or type");var n=this.curMonthDatePrefix;return"prev"===e?n=this.prevMonthDatePrefix:"next"===e&&(n=this.nextMonthDatePrefix),t=("00"+t).slice(-2),n+"-"+t},getCellClass:function(t){var e=t.text,n=t.type,i=[n];if("current"===n){var r=this.getFormateDate(e,n);r===this.selectedDay&&i.push("is-selected"),r===this.formatedToday&&i.push("is-today")}return i},pickDay:function(t){var e=t.text,n=t.type,i=this.getFormateDate(e,n);this.$emit("pick",i)},cellRenderProxy:function(t){var e=t.text,n=t.type,i=this.$createElement,r=this.elCalendar.$scopedSlots.dateCell;if(!r)return i("span",[e]);var o=this.getFormateDate(e,n),a=new Date(o),s={isSelected:this.selectedDay===o,type:n+"-month",day:o};return r({date:a,data:s})}},computed:{prevMonthDatePrefix:function(){var t=new Date(this.date.getTime());return t.setDate(0),_v.a.format(t,"yyyy-MM")},curMonthDatePrefix:function(){return _v.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var t=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return _v.a.format(t,"yyyy-MM")},formatedToday:function(){return this.elCalendar.formatedToday},isInRange:function(){return this.range&&this.range.length},rows:function(){var t=[];if(this.isInRange){var e=this.range,n=e[0],i=e[1],r=Object(ro["range"])(i.getDate()-n.getDate()+1).map(function(t,e){return{text:n.getDate()+e,type:"current"}}),o=r.length%7;o=0===o?0:7-o;var a=Object(ro["range"])(o).map(function(t,e){return{text:e+1,type:"next"}});t=r.concat(a)}else{var s=this.date,l=Object(ro["getFirstDayOfMonth"])(s);l=0===l?7:l;var c="number"===typeof this.firstDayOfWeek?this.firstDayOfWeek:1,u=Object(ro["getPrevMonthLastDays"])(s,l-c).map(function(t){return{text:t,type:"prev"}}),h=Object(ro["getMonthDays"])(s).map(function(t){return{text:t,type:"current"}});t=[].concat(u,h);var d=Object(ro["range"])(42-t.length).map(function(t,e){return{text:e+1,type:"next"}});t=t.concat(d)}return this.toNestedArr(t)},weekDays:function(){var t=this.firstDayOfWeek,e=this.WEEK_DAYS;return"number"!==typeof t||0===t?e.slice():e.slice(t).concat(e.slice(0,t))}},render:function(){var t=this,e=arguments[0],n=this.hideHeader?null:e("thead",[this.weekDays.map(function(t){return e("th",{key:t},[t])})]);return e("table",{class:{"el-calendar-table":!0,"is-range":this.isInRange},attrs:{cellspacing:"0",cellpadding:"0"}},[n,e("tbody",[this.rows.map(function(n,i){return e("tr",{class:{"el-calendar-table__row":!0,"el-calendar-table__row--hide-border":0===i&&t.hideHeader},key:i},[n.map(function(n,i){return e("td",{key:i,class:t.getCellClass(n),on:{click:t.pickDay.bind(t,n)}},[e("div",{class:"el-calendar-day"},[t.cellRenderProxy(n)])])})])})])])}},Ev=Mv,Sv=s(Ev,bv,xv,!1,null,null,null);Sv.options.__file="packages/calendar/src/date-table.vue";var Tv=Sv.exports,Av=["prev-month","today","next-month"],Cv=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],Lv=864e5,Pv={name:"ElCalendar",mixins:[g.a],components:{DateTable:Tv,ElButton:at.a,ElButtonGroup:lt.a},props:{value:[Date,String,Number],range:{type:Array,validator:function(t){return!Array.isArray(t)||2===t.length&&t.every(function(t){return"string"===typeof t||"number"===typeof t||t instanceof Date})}},firstDayOfWeek:{type:Number,default:1}},provide:function(){return{elCalendar:this}},methods:{pickDay:function(t){this.realSelectedDay=t},selectDate:function(t){if(-1===Av.indexOf(t))throw new Error("invalid type "+t);var e="";e="prev-month"===t?this.prevMonthDatePrefix+"-01":"next-month"===t?this.nextMonthDatePrefix+"-01":this.formatedToday,e!==this.formatedDate&&this.pickDay(e)},toDate:function(t){if(!t)throw new Error("invalid val");return t instanceof Date?t:new Date(t)},rangeValidator:function(t,e){var n=this.realFirstDayOfWeek,i=e?n:0===n?6:n-1,r=(e?"start":"end")+" of range should be "+Cv[i]+".";return t.getDay()===i||(console.warn("[ElementCalendar]",r,"Invalid range will be ignored."),!1)}},computed:{prevMonthDatePrefix:function(){var t=new Date(this.date.getTime());return t.setDate(0),_v.a.format(t,"yyyy-MM")},curMonthDatePrefix:function(){return _v.a.format(this.date,"yyyy-MM")},nextMonthDatePrefix:function(){var t=new Date(this.date.getFullYear(),this.date.getMonth()+1,1);return _v.a.format(t,"yyyy-MM")},formatedDate:function(){return _v.a.format(this.date,"yyyy-MM-dd")},i18nDate:function(){var t=this.date.getFullYear(),e=this.date.getMonth()+1;return t+" "+this.t("el.datepicker.year")+" "+this.t("el.datepicker.month"+e)},formatedToday:function(){return _v.a.format(this.now,"yyyy-MM-dd")},realSelectedDay:{get:function(){return this.value?this.formatedDate:this.selectedDay},set:function(t){this.selectedDay=t;var e=new Date(t);this.$emit("input",e)}},date:function(){if(this.value)return this.toDate(this.value);if(this.realSelectedDay){var t=this.selectedDay.split("-");return new Date(t[0],t[1]-1,t[2])}return this.validatedRange.length?this.validatedRange[0][0]:this.now},validatedRange:function(){var t=this,e=this.range;if(!e)return[];if(e=e.reduce(function(e,n,i){var r=t.toDate(n);return t.rangeValidator(r,0===i)&&(e=e.concat(r)),e},[]),2===e.length){var n=e,i=n[0],r=n[1];if(i>r)return console.warn("[ElementCalendar]end time should be greater than start time"),[];if(Object(ro["validateRangeInOneMonth"])(i,r))return[[i,r]];var o=[],a=new Date(i.getFullYear(),i.getMonth()+1,1),s=this.toDate(a.getTime()-Lv);if(!Object(ro["validateRangeInOneMonth"])(a,r))return console.warn("[ElementCalendar]start time and end time interval must not exceed two months"),[];o.push([i,s]);var l=this.realFirstDayOfWeek,c=a.getDay(),u=0;return c!==l&&(0===l?u=7-c:(u=l-c,u=u>0?u:7+u)),a=this.toDate(a.getTime()+u*Lv),a.getDate()<r.getDate()&&o.push([a,r]),o}return[]},realFirstDayOfWeek:function(){return this.firstDayOfWeek<1||this.firstDayOfWeek>6?0:Math.floor(this.firstDayOfWeek)}},data:function(){return{selectedDay:"",now:new Date}}},Ov=Pv,Rv=s(Ov,gv,yv,!1,null,null,null);Rv.options.__file="packages/calendar/src/main.vue";var kv=Rv.exports;kv.install=function(t){t.component(kv.name,kv)};var Dv=kv,Iv=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-fade-in"}},[t.visible?n("div",{staticClass:"el-backtop",style:{right:t.styleRight,bottom:t.styleBottom},on:{click:function(e){return e.stopPropagation(),t.handleClick(e)}}},[t._t("default",[n("el-icon",{attrs:{name:"caret-top"}})])],2):t._e()])},Nv=[];Iv._withStripped=!0;var zv=function(t){return Math.pow(t,3)},Bv=function(t){return t<.5?zv(2*t)/2:1-zv(2*(1-t))/2},Fv={name:"ElBacktop",props:{visibilityHeight:{type:Number,default:200},target:[String],right:{type:Number,default:40},bottom:{type:Number,default:40}},data:function(){return{el:null,container:null,visible:!1}},computed:{styleBottom:function(){return this.bottom+"px"},styleRight:function(){return this.right+"px"}},mounted:function(){this.init(),this.throttledScrollHandler=Id()(300,this.onScroll),this.container.addEventListener("scroll",this.throttledScrollHandler)},methods:{init:function(){if(this.container=document,this.el=document.documentElement,this.target){if(this.el=document.querySelector(this.target),!this.el)throw new Error("target is not existed: "+this.target);this.container=this.el}},onScroll:function(){var t=this.el.scrollTop;this.visible=t>=this.visibilityHeight},handleClick:function(t){this.scrollToTop(),this.$emit("click",t)},scrollToTop:function(){var t=this.el,e=Date.now(),n=t.scrollTop,i=window.requestAnimationFrame||function(t){return setTimeout(t,16)},r=function r(){var o=(Date.now()-e)/500;o<1?(t.scrollTop=n*(1-Bv(o)),i(r)):t.scrollTop=0};i(r)}},beforeDestroy:function(){this.container.removeEventListener("scroll",this.throttledScrollHandler)}},jv=Fv,Hv=s(jv,Iv,Nv,!1,null,null,null);Hv.options.__file="packages/backtop/src/main.vue";var Uv=Hv.exports;Uv.install=function(t){t.component(Uv.name,Uv)};var Vv=Uv,Gv=function(t,e){if(t===window&&(t=document.documentElement),1!==t.nodeType)return[];var n=window.getComputedStyle(t,null);return e?n[e]:n},Wv=function(t){return Object.keys(t||{}).map(function(e){return[e,t[e]]})},$v=function(t,e){return t===window||t===document?document.documentElement[e]:t[e]},qv=function(t){return $v(t,"offsetHeight")},Yv=function(t){return $v(t,"clientHeight")},Xv="ElInfiniteScroll",Zv={delay:{type:Number,default:200},distance:{type:Number,default:0},disabled:{type:Boolean,default:!1},immediate:{type:Boolean,default:!0}},Jv=function(t,e){return Object(dd["isHtmlElement"])(t)?Wv(Zv).reduce(function(n,i){var r=i[0],o=i[1],a=o.type,s=o.default,l=t.getAttribute("infinite-scroll-"+r);switch(l=Object(dd["isUndefined"])(e[l])?l:e[l],a){case Number:l=Number(l),l=Number.isNaN(l)?s:l;break;case Boolean:l=Object(dd["isDefined"])(l)?"false"!==l&&Boolean(l):s;break;default:l=a(l)}return n[r]=l,n},{}):{}},Kv=function(t){return t.getBoundingClientRect().top},Qv=function(t){var e=this[Xv],n=e.el,i=e.vm,r=e.container,o=e.observer,a=Jv(n,i),s=a.distance,l=a.disabled;if(!l){var c=r.getBoundingClientRect();if(c.width||c.height){var u=!1;if(r===n){var h=r.scrollTop+Yv(r);u=r.scrollHeight-h<=s}else{var d=qv(n)+Kv(n)-Kv(r),p=qv(r),f=Number.parseFloat(Gv(r,"borderBottomWidth"));u=d-p+f<=s}u&&Object(dd["isFunction"])(t)?t.call(i):o&&(o.disconnect(),this[Xv].observer=null)}}},tg={name:"InfiniteScroll",inserted:function(t,e,n){var i=e.value,r=n.context,o=Object(Bt["getScrollContainer"])(t,!0),a=Jv(t,r),s=a.delay,l=a.immediate,c=z()(s,Qv.bind(t,i));if(t[Xv]={el:t,vm:r,container:o,onScroll:c},o&&(o.addEventListener("scroll",c),l)){var u=t[Xv].observer=new MutationObserver(c);u.observe(o,{childList:!0,subtree:!0}),c()}},unbind:function(t){var e=t[Xv],n=e.container,i=e.onScroll;n&&n.removeEventListener("scroll",i)},install:function(t){t.directive(tg.name,tg)}},eg=tg,ng=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-page-header"},[n("div",{staticClass:"el-page-header__left",on:{click:function(e){t.$emit("back")}}},[n("i",{staticClass:"el-icon-back"}),n("div",{staticClass:"el-page-header__title"},[t._t("title",[t._v(t._s(t.title))])],2)]),n("div",{staticClass:"el-page-header__content"},[t._t("content",[t._v(t._s(t.content))])],2)])},ig=[];ng._withStripped=!0;var rg={name:"ElPageHeader",props:{title:{type:String,default:function(){return Object(fs["t"])("el.pageHeader.title")}},content:String}},og=rg,ag=s(og,ng,ig,!1,null,null,null);ag.options.__file="packages/page-header/src/main.vue";var sg=ag.exports;sg.install=function(t){t.component(sg.name,sg)};var lg=sg,cg=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["el-cascader-panel",t.border&&"is-bordered"],on:{keydown:t.handleKeyDown}},t._l(t.menus,function(t,e){return n("cascader-menu",{key:e,ref:"menu",refInFor:!0,attrs:{index:e,nodes:t}})}),1)},ug=[];cg._withStripped=!0;var hg,dg,pg=n(43),fg=n.n(pg),mg=function(t){return t.stopPropagation()},vg={inject:["panel"],components:{ElCheckbox:Di.a,ElRadio:fg.a},props:{node:{required:!0},nodeId:String},computed:{config:function(){return this.panel.config},isLeaf:function(){return this.node.isLeaf},isDisabled:function(){return this.node.isDisabled},checkedValue:function(){return this.panel.checkedValue},isChecked:function(){return this.node.isSameNode(this.checkedValue)},inActivePath:function(){return this.isInPath(this.panel.activePath)},inCheckedPath:function(){var t=this;return!!this.config.checkStrictly&&this.panel.checkedNodePaths.some(function(e){return t.isInPath(e)})},value:function(){return this.node.getValueByOption()}},methods:{handleExpand:function(){var t=this,e=this.panel,n=this.node,i=this.isDisabled,r=this.config,o=r.multiple,a=r.checkStrictly;!a&&i||n.loading||(r.lazy&&!n.loaded?e.lazyLoad(n,function(){var e=t.isLeaf;if(e||t.handleExpand(),o){var i=!!e&&n.checked;t.handleMultiCheckChange(i)}}):e.handleExpand(n))},handleCheckChange:function(){var t=this.panel,e=this.value,n=this.node;t.handleCheckChange(e),t.handleExpand(n)},handleMultiCheckChange:function(t){this.node.doCheck(t),this.panel.calculateMultiCheckedValue()},isInPath:function(t){var e=this.node,n=t[e.level-1]||{};return n.uid===e.uid},renderPrefix:function(t){var e=this.isLeaf,n=this.isChecked,i=this.config,r=i.checkStrictly,o=i.multiple;return o?this.renderCheckbox(t):r?this.renderRadio(t):e&&n?this.renderCheckIcon(t):null},renderPostfix:function(t){var e=this.node,n=this.isLeaf;return e.loading?this.renderLoadingIcon(t):n?null:this.renderExpandIcon(t)},renderCheckbox:function(t){var e=this.node,n=this.config,i=this.isDisabled,r={on:{change:this.handleMultiCheckChange},nativeOn:{}};return n.checkStrictly&&(r.nativeOn.click=mg),t("el-checkbox",Ku()([{attrs:{value:e.checked,indeterminate:e.indeterminate,disabled:i}},r]))},renderRadio:function(t){var e=this.checkedValue,n=this.value,i=this.isDisabled;return Object(y["isEqual"])(n,e)&&(n=e),t("el-radio",{attrs:{value:e,label:n,disabled:i},on:{change:this.handleCheckChange},nativeOn:{click:mg}},[t("span")])},renderCheckIcon:function(t){return t("i",{class:"el-icon-check el-cascader-node__prefix"})},renderLoadingIcon:function(t){return t("i",{class:"el-icon-loading el-cascader-node__postfix"})},renderExpandIcon:function(t){return t("i",{class:"el-icon-arrow-right el-cascader-node__postfix"})},renderContent:function(t){var e=this.panel,n=this.node,i=e.renderLabelFn,r=i?i({node:n,data:n.data}):null;return t("span",{class:"el-cascader-node__label"},[r||n.label])}},render:function(t){var e=this,n=this.inActivePath,i=this.inCheckedPath,r=this.isChecked,o=this.isLeaf,a=this.isDisabled,s=this.config,l=this.nodeId,c=s.expandTrigger,u=s.checkStrictly,h=s.multiple,d=!u&&a,p={on:{}};return"click"===c?p.on.click=this.handleExpand:(p.on.mouseenter=function(t){e.handleExpand(),e.$emit("expand",t)},p.on.focus=function(t){e.handleExpand(),e.$emit("expand",t)}),!o||a||u||h||(p.on.click=this.handleCheckChange),t("li",Ku()([{attrs:{role:"menuitem",id:l,"aria-expanded":n,tabindex:d?null:-1},class:{"el-cascader-node":!0,"is-selectable":u,"in-active-path":n,"in-checked-path":i,"is-active":r,"is-disabled":d}},p]),[this.renderPrefix(t),this.renderContent(t),this.renderPostfix(t)])}},gg=vg,yg=s(gg,hg,dg,!1,null,null,null);yg.options.__file="packages/cascader-panel/src/cascader-node.vue";var bg,xg,wg=yg.exports,_g={name:"ElCascaderMenu",mixins:[g.a],inject:["panel"],components:{ElScrollbar:W.a,CascaderNode:wg},props:{nodes:{type:Array,required:!0},index:Number},data:function(){return{activeNode:null,hoverTimer:null,id:Object(y["generateId"])()}},computed:{isEmpty:function(){return!this.nodes.length},menuId:function(){return"cascader-menu-"+this.id+"-"+this.index}},methods:{handleExpand:function(t){this.activeNode=t.target},handleMouseMove:function(t){var e=this.activeNode,n=this.hoverTimer,i=this.$refs.hoverZone;if(e&&i)if(e.contains(t.target)){clearTimeout(n);var r=this.$el.getBoundingClientRect(),o=r.left,a=t.clientX-o,s=this.$el,l=s.offsetWidth,c=s.offsetHeight,u=e.offsetTop,h=u+e.offsetHeight;i.innerHTML='\n          <path style="pointer-events: auto;" fill="transparent" d="M'+a+" "+u+" L"+l+" 0 V"+u+' Z" />\n          <path style="pointer-events: auto;" fill="transparent" d="M'+a+" "+h+" L"+l+" "+c+" V"+h+' Z" />\n        '}else n||(this.hoverTimer=setTimeout(this.clearHoverZone,this.panel.config.hoverThreshold))},clearHoverZone:function(){var t=this.$refs.hoverZone;t&&(t.innerHTML="")},renderEmptyText:function(t){return t("div",{class:"el-cascader-menu__empty-text"},[this.t("el.cascader.noData")])},renderNodeList:function(t){var e=this.menuId,n=this.panel.isHoverMenu,i={on:{}};n&&(i.on.expand=this.handleExpand);var r=this.nodes.map(function(n,r){var o=n.hasChildren;return t("cascader-node",Ku()([{key:n.uid,attrs:{node:n,"node-id":e+"-"+r,"aria-haspopup":o,"aria-owns":o?e:null}},i]))});return[].concat(r,[n?t("svg",{ref:"hoverZone",class:"el-cascader-menu__hover-zone"}):null])}},render:function(t){var e=this.isEmpty,n=this.menuId,i={nativeOn:{}};return this.panel.isHoverMenu&&(i.nativeOn.mousemove=this.handleMouseMove),t("el-scrollbar",Ku()([{attrs:{tag:"ul",role:"menu",id:n,"wrap-class":"el-cascader-menu__wrap","view-class":{"el-cascader-menu__list":!0,"is-empty":e}},class:"el-cascader-menu"},i]),[e?this.renderEmptyText(t):this.renderNodeList(t)])}},Mg=_g,Eg=s(Mg,bg,xg,!1,null,null,null);Eg.options.__file="packages/cascader-panel/src/cascader-menu.vue";var Sg=Eg.exports,Tg=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();function Ag(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Cg=0,Lg=function(){function t(e,n,i){Ag(this,t),this.data=e,this.config=n,this.parent=i||null,this.level=this.parent?this.parent.level+1:1,this.uid=Cg++,this.initState(),this.initChildren()}return t.prototype.initState=function(){var t=this.config,e=t.value,n=t.label;this.value=this.data[e],this.label=this.data[n],this.pathNodes=this.calculatePathNodes(),this.path=this.pathNodes.map(function(t){return t.value}),this.pathLabels=this.pathNodes.map(function(t){return t.label}),this.loading=!1,this.loaded=!1},t.prototype.initChildren=function(){var e=this,n=this.config,i=n.children,r=this.data[i];this.hasChildren=Array.isArray(r),this.children=(r||[]).map(function(i){return new t(i,n,e)})},t.prototype.calculatePathNodes=function(){var t=[this],e=this.parent;while(e)t.unshift(e),e=e.parent;return t},t.prototype.getPath=function(){return this.path},t.prototype.getValue=function(){return this.value},t.prototype.getValueByOption=function(){return this.config.emitPath?this.getPath():this.getValue()},t.prototype.getText=function(t,e){return t?this.pathLabels.join(e):this.label},t.prototype.isSameNode=function(t){var e=this.getValueByOption();return this.config.multiple&&Array.isArray(t)?t.some(function(t){return Object(y["isEqual"])(t,e)}):Object(y["isEqual"])(t,e)},t.prototype.broadcast=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];var r="onParent"+Object(y["capitalize"])(t);this.children.forEach(function(e){e&&(e.broadcast.apply(e,[t].concat(n)),e[r]&&e[r].apply(e,n))})},t.prototype.emit=function(t){var e=this.parent,n="onChild"+Object(y["capitalize"])(t);if(e){for(var i=arguments.length,r=Array(i>1?i-1:0),o=1;o<i;o++)r[o-1]=arguments[o];e[n]&&e[n].apply(e,r),e.emit.apply(e,[t].concat(r))}},t.prototype.onParentCheck=function(t){this.isDisabled||this.setCheckState(t)},t.prototype.onChildCheck=function(){var t=this.children,e=t.filter(function(t){return!t.isDisabled}),n=!!e.length&&e.every(function(t){return t.checked});this.setCheckState(n)},t.prototype.setCheckState=function(t){var e=this.children.length,n=this.children.reduce(function(t,e){var n=e.checked?1:e.indeterminate?.5:0;return t+n},0);this.checked=t,this.indeterminate=n!==e&&n>0},t.prototype.syncCheckState=function(t){var e=this.getValueByOption(),n=this.isSameNode(t,e);this.doCheck(n)},t.prototype.doCheck=function(t){this.checked!==t&&(this.config.checkStrictly?this.checked=t:(this.broadcast("check",t),this.setCheckState(t),this.emit("check")))},Tg(t,[{key:"isDisabled",get:function(){var t=this.data,e=this.parent,n=this.config,i=n.disabled,r=n.checkStrictly;return t[i]||!r&&e&&e.isDisabled}},{key:"isLeaf",get:function(){var t=this.data,e=this.loaded,n=this.hasChildren,i=this.children,r=this.config,o=r.lazy,a=r.leaf;if(o){var s=Object(Te["isDef"])(t[a])?t[a]:!!e&&!i.length;return this.hasChildren=!s,s}return!n}}]),t}(),Pg=Lg;function Og(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var Rg=function t(e,n){return e.reduce(function(e,i){return i.isLeaf?e.push(i):(!n&&e.push(i),e=e.concat(t(i.children,n))),e},[])},kg=function(){function t(e,n){Og(this,t),this.config=n,this.initNodes(e)}return t.prototype.initNodes=function(t){var e=this;t=Object(y["coerceTruthyValueToArray"])(t),this.nodes=t.map(function(t){return new Pg(t,e.config)}),this.flattedNodes=this.getFlattedNodes(!1,!1),this.leafNodes=this.getFlattedNodes(!0,!1)},t.prototype.appendNode=function(t,e){var n=new Pg(t,this.config,e),i=e?e.children:this.nodes;i.push(n)},t.prototype.appendNodes=function(t,e){var n=this;t=Object(y["coerceTruthyValueToArray"])(t),t.forEach(function(t){return n.appendNode(t,e)})},t.prototype.getNodes=function(){return this.nodes},t.prototype.getFlattedNodes=function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?this.leafNodes:this.flattedNodes;return e?n:Rg(this.nodes,t)},t.prototype.getNodeByValue=function(t){if(t){var e=this.getFlattedNodes(!1,!this.config.lazy).filter(function(e){return Object(y["valueEquals"])(e.path,t)||e.value===t});return e&&e.length?e[0]:null}return null},t}(),Dg=kg,Ig=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ng=bp.a.keys,zg={expandTrigger:"click",multiple:!1,checkStrictly:!1,emitPath:!0,lazy:!1,lazyLoad:y["noop"],value:"value",label:"label",children:"children",leaf:"leaf",disabled:"disabled",hoverThreshold:500},Bg=function(t){return!t.getAttribute("aria-owns")},Fg=function(t,e){var n=t.parentNode;if(n){var i=n.querySelectorAll('.el-cascader-node[tabindex="-1"]'),r=Array.prototype.indexOf.call(i,t);return i[r+e]||null}return null},jg=function(t,e){if(t){var n=t.id.split("-");return Number(n[n.length-2])}},Hg=function(t){t&&(t.focus(),!Bg(t)&&t.click())},Ug=function(t){if(t){var e=t.querySelector("input");e?e.click():Bg(t)&&t.click()}},Vg={name:"ElCascaderPanel",components:{CascaderMenu:Sg},props:{value:{},options:Array,props:Object,border:{type:Boolean,default:!0},renderLabel:Function},provide:function(){return{panel:this}},data:function(){return{checkedValue:null,checkedNodePaths:[],store:[],menus:[],activePath:[],loadCount:0}},computed:{config:function(){return Se()(Ig({},zg),this.props||{})},multiple:function(){return this.config.multiple},checkStrictly:function(){return this.config.checkStrictly},leafOnly:function(){return!this.checkStrictly},isHoverMenu:function(){return"hover"===this.config.expandTrigger},renderLabelFn:function(){return this.renderLabel||this.$scopedSlots.default}},watch:{options:{handler:function(){this.initStore()},immediate:!0,deep:!0},value:function(){this.syncCheckedValue(),this.checkStrictly&&this.calculateCheckedNodePaths()},checkedValue:function(t){Object(y["isEqual"])(t,this.value)||(this.checkStrictly&&this.calculateCheckedNodePaths(),this.$emit("input",t),this.$emit("change",t))}},mounted:function(){Object(y["isEmpty"])(this.value)||this.syncCheckedValue()},methods:{initStore:function(){var t=this.config,e=this.options;t.lazy&&Object(y["isEmpty"])(e)?this.lazyLoad():(this.store=new Dg(e,t),this.menus=[this.store.getNodes()],this.syncMenuState())},syncCheckedValue:function(){var t=this.value,e=this.checkedValue;Object(y["isEqual"])(t,e)||(this.checkedValue=t,this.syncMenuState())},syncMenuState:function(){var t=this.multiple,e=this.checkStrictly;this.syncActivePath(),t&&this.syncMultiCheckState(),e&&this.calculateCheckedNodePaths(),this.$nextTick(this.scrollIntoView)},syncMultiCheckState:function(){var t=this,e=this.getFlattedNodes(this.leafOnly);e.forEach(function(e){e.syncCheckState(t.checkedValue)})},syncActivePath:function(){var t=this,e=this.store,n=this.multiple,i=this.activePath,r=this.checkedValue;if(Object(y["isEmpty"])(i))if(Object(y["isEmpty"])(r))this.activePath=[],this.menus=[e.getNodes()];else{var o=n?r[0]:r,a=this.getNodeByValue(o)||{},s=(a.pathNodes||[]).slice(0,-1);this.expandNodes(s)}else{var l=i.map(function(e){return t.getNodeByValue(e.getValue())});this.expandNodes(l)}},expandNodes:function(t){var e=this;t.forEach(function(t){return e.handleExpand(t,!0)})},calculateCheckedNodePaths:function(){var t=this,e=this.checkedValue,n=this.multiple,i=n?Object(y["coerceTruthyValueToArray"])(e):[e];this.checkedNodePaths=i.map(function(e){var n=t.getNodeByValue(e);return n?n.pathNodes:[]})},handleKeyDown:function(t){var e=t.target,n=t.keyCode;switch(n){case Ng.up:var i=Fg(e,-1);Hg(i);break;case Ng.down:var r=Fg(e,1);Hg(r);break;case Ng.left:var o=this.$refs.menu[jg(e)-1];if(o){var a=o.$el.querySelector('.el-cascader-node[aria-expanded="true"]');Hg(a)}break;case Ng.right:var s=this.$refs.menu[jg(e)+1];if(s){var l=s.$el.querySelector('.el-cascader-node[tabindex="-1"]');Hg(l)}break;case Ng.enter:Ug(e);break;case Ng.esc:case Ng.tab:this.$emit("close");break;default:return}},handleExpand:function(t,e){var n=this.activePath,i=t.level,r=n.slice(0,i-1),o=this.menus.slice(0,i);if(t.isLeaf||(r.push(t),o.push(t.children)),this.activePath=r,this.menus=o,!e){var a=r.map(function(t){return t.getValue()}),s=n.map(function(t){return t.getValue()});Object(y["valueEquals"])(a,s)||(this.$emit("active-item-change",a),this.$emit("expand-change",a))}},handleCheckChange:function(t){this.checkedValue=t},lazyLoad:function(t,e){var n=this,i=this.config;t||(t=t||{root:!0,level:0},this.store=new Dg([],i),this.menus=[this.store.getNodes()]),t.loading=!0;var r=function(i){var r=t.root?null:t;if(i&&i.length&&n.store.appendNodes(i,r),t.loading=!1,t.loaded=!0,Array.isArray(n.checkedValue)){var o=n.checkedValue[n.loadCount++],a=n.config.value,s=n.config.leaf;if(Array.isArray(i)&&i.filter(function(t){return t[a]===o}).length>0){var l=n.store.getNodeByValue(o);l.data[s]||n.lazyLoad(l,function(){n.handleExpand(l)}),n.loadCount===n.checkedValue.length&&n.$parent.computePresentText()}}e&&e(i)};i.lazyLoad(t,r)},calculateMultiCheckedValue:function(){this.checkedValue=this.getCheckedNodes(this.leafOnly).map(function(t){return t.getValueByOption()})},scrollIntoView:function(){if(!this.$isServer){var t=this.$refs.menu||[];t.forEach(function(t){var e=t.$el;if(e){var n=e.querySelector(".el-scrollbar__wrap"),i=e.querySelector(".el-cascader-node.is-active")||e.querySelector(".el-cascader-node.in-active-path");ni()(n,i)}})}},getNodeByValue:function(t){return this.store.getNodeByValue(t)},getFlattedNodes:function(t){var e=!this.config.lazy;return this.store.getFlattedNodes(t,e)},getCheckedNodes:function(t){var e=this.checkedValue,n=this.multiple;if(n){var i=this.getFlattedNodes(t);return i.filter(function(t){return t.checked})}return Object(y["isEmpty"])(e)?[]:[this.getNodeByValue(e)]},clearCheckedNodes:function(){var t=this.config,e=this.leafOnly,n=t.multiple,i=t.emitPath;n?(this.getCheckedNodes(e).filter(function(t){return!t.isDisabled}).forEach(function(t){return t.doCheck(!1)}),this.calculateMultiCheckedValue()):this.checkedValue=i?[]:null}}},Gg=Vg,Wg=s(Gg,cg,ug,!1,null,null,null);Wg.options.__file="packages/cascader-panel/src/cascader-panel.vue";var $g=Wg.exports;$g.install=function(t){t.component($g.name,$g)};var qg,Yg,Xg=$g,Zg={name:"ElAvatar",props:{size:{type:[Number,String],validator:function(t){return"string"===typeof t?["large","medium","small"].includes(t):"number"===typeof t}},shape:{type:String,default:"circle",validator:function(t){return["circle","square"].includes(t)}},icon:String,src:String,alt:String,srcSet:String,error:Function,fit:{type:String,default:"cover"}},data:function(){return{isImageExist:!0}},computed:{avatarClass:function(){var t=this.size,e=this.icon,n=this.shape,i=["el-avatar"];return t&&"string"===typeof t&&i.push("el-avatar--"+t),e&&i.push("el-avatar--icon"),n&&i.push("el-avatar--"+n),i.join(" ")}},methods:{handleError:function(){var t=this.error,e=t?t():void 0;!1!==e&&(this.isImageExist=!1)},renderAvatar:function(){var t=this.$createElement,e=this.icon,n=this.src,i=this.alt,r=this.isImageExist,o=this.srcSet,a=this.fit;return r&&n?t("img",{attrs:{src:n,alt:i,srcSet:o},on:{error:this.handleError},style:{"object-fit":a}}):e?t("i",{class:e}):this.$slots.default}},render:function(){var t=arguments[0],e=this.avatarClass,n=this.size,i="number"===typeof n?{height:n+"px",width:n+"px",lineHeight:n+"px"}:{};return t("span",{class:e,style:i},[this.renderAvatar()])}},Jg=Zg,Kg=s(Jg,qg,Yg,!1,null,null,null);Kg.options.__file="packages/avatar/src/main.vue";var Qg=Kg.exports;Qg.install=function(t){t.component(Qg.name,Qg)};var ty=Qg,ey=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("transition",{attrs:{name:"el-drawer-fade"},on:{"after-enter":t.afterEnter,"after-leave":t.afterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-drawer__wrapper",attrs:{tabindex:"-1"}},[n("div",{staticClass:"el-drawer__container",class:t.visible&&"el-drawer__open",attrs:{role:"document",tabindex:"-1"},on:{click:function(e){return e.target!==e.currentTarget?null:t.handleWrapperClick(e)}}},[n("div",{ref:"drawer",staticClass:"el-drawer",class:[t.direction,t.customClass],style:t.isHorizontal?"width: "+t.size:"height: "+t.size,attrs:{"aria-modal":"true","aria-labelledby":"el-drawer__title","aria-label":t.title,role:"dialog",tabindex:"-1"}},[t.withHeader?n("header",{staticClass:"el-drawer__header",attrs:{id:"el-drawer__title"}},[t._t("title",[n("span",{attrs:{role:"heading",title:t.title}},[t._v(t._s(t.title))])]),t.showClose?n("button",{staticClass:"el-drawer__close-btn",attrs:{"aria-label":"close "+(t.title||"drawer"),type:"button"},on:{click:t.closeDrawer}},[n("i",{staticClass:"el-dialog__close el-icon el-icon-close"})]):t._e()],2):t._e(),t.rendered?n("section",{staticClass:"el-drawer__body"},[t._t("default")],2):t._e()])])])])},ny=[];ey._withStripped=!0;var iy={name:"ElDrawer",mixins:[E.a,C.a],props:{appendToBody:{type:Boolean,default:!1},beforeClose:{type:Function},customClass:{type:String,default:""},closeOnPressEscape:{type:Boolean,default:!0},destroyOnClose:{type:Boolean,default:!1},modal:{type:Boolean,default:!0},direction:{type:String,default:"rtl",validator:function(t){return-1!==["ltr","rtl","ttb","btt"].indexOf(t)}},modalAppendToBody:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},size:{type:String,default:"30%"},title:{type:String,default:""},visible:{type:Boolean},wrapperClosable:{type:Boolean,default:!0},withHeader:{type:Boolean,default:!0}},computed:{isHorizontal:function(){return"rtl"===this.direction||"ltr"===this.direction}},data:function(){return{closed:!1,prevActiveElement:null}},watch:{visible:function(t){var e=this;t?(this.closed=!1,this.$emit("open"),this.appendToBody&&document.body.appendChild(this.$el),this.prevActiveElement=document.activeElement):(this.closed||this.$emit("close"),this.$nextTick(function(){e.prevActiveElement&&e.prevActiveElement.focus()}))}},methods:{afterEnter:function(){this.$emit("opened")},afterLeave:function(){this.$emit("closed")},hide:function(t){!1!==t&&(this.$emit("update:visible",!1),this.$emit("close"),!0===this.destroyOnClose&&(this.rendered=!1),this.closed=!0)},handleWrapperClick:function(){this.wrapperClosable&&this.closeDrawer()},closeDrawer:function(){"function"===typeof this.beforeClose?this.beforeClose(this.hide):this.hide()},handleClose:function(){this.closeDrawer()}},mounted:function(){this.visible&&(this.rendered=!0,this.open())},destroyed:function(){this.appendToBody&&this.$el&&this.$el.parentNode&&this.$el.parentNode.removeChild(this.$el)}},ry=iy,oy=s(ry,ey,ny,!1,null,null,null);oy.options.__file="packages/drawer/src/main.vue";var ay=oy.exports;ay.install=function(t){t.component(ay.name,ay)};var sy=ay,ly=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("el-popover",t._b({attrs:{trigger:"click"},model:{value:t.visible,callback:function(e){t.visible=e},expression:"visible"}},"el-popover",t.$attrs,!1),[n("div",{staticClass:"el-popconfirm"},[n("p",{staticClass:"el-popconfirm__main"},[t.hideIcon?t._e():n("i",{staticClass:"el-popconfirm__icon",class:t.icon,style:{color:t.iconColor}}),t._v("\n      "+t._s(t.title)+"\n    ")]),n("div",{staticClass:"el-popconfirm__action"},[n("el-button",{attrs:{size:"mini",type:t.cancelButtonType},on:{click:t.cancel}},[t._v("\n        "+t._s(t.displayCancelButtonText)+"\n      ")]),n("el-button",{attrs:{size:"mini",type:t.confirmButtonType},on:{click:t.confirm}},[t._v("\n        "+t._s(t.displayConfirmButtonText)+"\n      ")])],1)]),t._t("reference",null,{slot:"reference"})],2)},cy=[];ly._withStripped=!0;var uy=n(44),hy=n.n(uy),dy={name:"ElPopconfirm",props:{title:{type:String},confirmButtonText:{type:String},cancelButtonText:{type:String},confirmButtonType:{type:String,default:"primary"},cancelButtonType:{type:String,default:"text"},icon:{type:String,default:"el-icon-question"},iconColor:{type:String,default:"#f90"},hideIcon:{type:Boolean,default:!1}},components:{ElPopover:hy.a,ElButton:at.a},data:function(){return{visible:!1}},computed:{displayConfirmButtonText:function(){return this.confirmButtonText||Object(fs["t"])("el.popconfirm.confirmButtonText")},displayCancelButtonText:function(){return this.cancelButtonText||Object(fs["t"])("el.popconfirm.cancelButtonText")}},methods:{confirm:function(){this.visible=!1,this.$emit("confirm")},cancel:function(){this.visible=!1,this.$emit("cancel")}}},py=dy,fy=s(py,ly,cy,!1,null,null,null);fy.options.__file="packages/popconfirm/src/main.vue";var my=fy.exports;my.install=function(t){t.component(my.name,my)};var vy=my,gy=[x,k,rt,pt,xt,At,Wt,te,ce,ve,Oe,Fe,$e,tn,ln,mn,_n,Ln,Nn,li,ci,vi,Mi,Pi,qr,eo,La,Ha,ts,cs,hs,Vs,Zs,il,yl,Fl,Yl,Ql,Cc,Nc,du,zu,Fu,Uu,wh,Ch,Ih,nd,cd,gd,Ed,Od,jd,Wd,Qd,ap,pp,Cp,Lf,Uf,Xf,nm,cm,vm,Sm,Pm,zm,Gm,Jm,vv,Dv,Vv,lg,Xg,ty,sy,vy,qt.a],yy=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};ms.a.use(e.locale),ms.a.i18n(e.i18n),gy.forEach(function(e){t.component(e.name,e)}),t.use(eg),t.use(Pu.directive),t.prototype.$ELEMENT={size:e.size||"",zIndex:e.zIndex||2e3},t.prototype.$loading=Pu.service,t.prototype.$msgbox=Ns,t.prototype.$alert=Ns.alert,t.prototype.$confirm=Ns.confirm,t.prototype.$prompt=Ns.prompt,t.prototype.$notify=Zc,t.prototype.$message=Xh};"undefined"!==typeof window&&window.Vue&&yy(window.Vue);e["default"]={version:"2.15.0",locale:ms.a.use,i18n:ms.a.i18n,install:yy,CollapseTransition:qt.a,Loading:Pu,Pagination:x,Dialog:k,Autocomplete:rt,Dropdown:pt,DropdownMenu:xt,DropdownItem:At,Menu:Wt,Submenu:te,MenuItem:ce,MenuItemGroup:ve,Input:Oe,InputNumber:Fe,Radio:$e,RadioGroup:tn,RadioButton:ln,Checkbox:mn,CheckboxButton:_n,CheckboxGroup:Ln,Switch:Nn,Select:li,Option:ci,OptionGroup:vi,Button:Mi,ButtonGroup:Pi,Table:qr,TableColumn:eo,DatePicker:La,TimeSelect:Ha,TimePicker:ts,Popover:cs,Tooltip:hs,MessageBox:Ns,Breadcrumb:Vs,BreadcrumbItem:Zs,Form:il,FormItem:yl,Tabs:Fl,TabPane:Yl,Tag:Ql,Tree:Cc,Alert:Nc,Notification:Zc,Slider:du,Icon:zu,Row:Fu,Col:Uu,Upload:wh,Progress:Ch,Spinner:Ih,Message:Xh,Badge:nd,Card:cd,Rate:gd,Steps:Ed,Step:Od,Carousel:jd,Scrollbar:Wd,CarouselItem:Qd,Collapse:ap,CollapseItem:pp,Cascader:Cp,ColorPicker:Lf,Transfer:Uf,Container:Xf,Header:nm,Aside:cm,Main:vm,Footer:Sm,Timeline:Pm,TimelineItem:zm,Link:Gm,Divider:Jm,Image:vv,Calendar:Dv,Backtop:Vv,InfiniteScroll:eg,PageHeader:lg,CascaderPanel:Xg,Avatar:ty,Drawer:sy,Popconfirm:vy}}])["default"]},"5ca1":function(t,e,n){var i=n("7726"),r=n("8378"),o=n("32e9"),a=n("2aba"),s=n("9b43"),l="prototype",c=function(t,e,n){var u,h,d,p,f=t&c.F,m=t&c.G,v=t&c.S,g=t&c.P,y=t&c.B,b=m?i:v?i[e]||(i[e]={}):(i[e]||{})[l],x=m?r:r[e]||(r[e]={}),w=x[l]||(x[l]={});for(u in m&&(n=e),n)h=!f&&b&&void 0!==b[u],d=(h?b:n)[u],p=y&&h?s(d,i):g&&"function"==typeof d?s(Function.call,d):d,b&&a(b,u,d,t&c.U),x[u]!=d&&o(x,u,p),g&&w[u]!=d&&(w[u]=d)};i.core=r,c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},"5cc5":function(t,e,n){var i=n("2b4c")("iterator"),r=!1;try{var o=[7][i]();o["return"]=function(){r=!0},Array.from(o,function(){throw 2})}catch(a){}t.exports=function(t,e){if(!e&&!r)return!1;var n=!1;try{var o=[7],s=o[i]();s.next=function(){return{done:n=!0}},o[i]=function(){return s},t(o)}catch(a){}return n}},"5f02":function(t,e,n){"use strict";t.exports=function(t){return"object"===typeof t&&!0===t.isAxiosError}},"613b":function(t,e,n){var i=n("5537")("keys"),r=n("ca5a");t.exports=function(t){return i[t]||(i[t]=r(t))}},6167:function(t,e,n){"use strict";var i,r;"function"===typeof Symbol&&Symbol.iterator;(function(o,a){i=a,r="function"===typeof i?i.call(e,n,e,t):i,void 0===r||(t.exports=r)})(0,function(){var t=window,e={placement:"bottom",gpuAcceleration:!0,offset:0,boundariesElement:"viewport",boundariesPadding:5,preventOverflowOrder:["left","right","top","bottom"],flipBehavior:"flip",arrowElement:"[x-arrow]",arrowOffset:0,modifiers:["shift","offset","preventOverflow","keepTogether","arrow","flip","applyStyle"],modifiersIgnored:[],forceAbsolute:!1};function n(t,n,i){this._reference=t.jquery?t[0]:t,this.state={};var r="undefined"===typeof n||null===n,o=n&&"[object Object]"===Object.prototype.toString.call(n);return this._popper=r||o?this.parse(o?n:{}):n.jquery?n[0]:n,this._options=Object.assign({},e,i),this._options.modifiers=this._options.modifiers.map(function(t){if(-1===this._options.modifiersIgnored.indexOf(t))return"applyStyle"===t&&this._popper.setAttribute("x-placement",this._options.placement),this.modifiers[t]||t}.bind(this)),this.state.position=this._getPosition(this._popper,this._reference),h(this._popper,{position:this.state.position,top:0}),this.update(),this._setupEventListeners(),this}function i(e){var n=e.style.display,i=e.style.visibility;e.style.display="block",e.style.visibility="hidden";e.offsetWidth;var r=t.getComputedStyle(e),o=parseFloat(r.marginTop)+parseFloat(r.marginBottom),a=parseFloat(r.marginLeft)+parseFloat(r.marginRight),s={width:e.offsetWidth+a,height:e.offsetHeight+o};return e.style.display=n,e.style.visibility=i,s}function r(t){var e={left:"right",right:"left",bottom:"top",top:"bottom"};return t.replace(/left|right|bottom|top/g,function(t){return e[t]})}function o(t){var e=Object.assign({},t);return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function a(t,e){var n,i=0;for(n in t){if(t[n]===e)return i;i++}return null}function s(e,n){var i=t.getComputedStyle(e,null);return i[n]}function l(e){var n=e.offsetParent;return n!==t.document.body&&n?n:t.document.documentElement}function c(e){var n=e.parentNode;return n?n===t.document?t.document.body.scrollTop||t.document.body.scrollLeft?t.document.body:t.document.documentElement:-1!==["scroll","auto"].indexOf(s(n,"overflow"))||-1!==["scroll","auto"].indexOf(s(n,"overflow-x"))||-1!==["scroll","auto"].indexOf(s(n,"overflow-y"))?n:c(e.parentNode):e}function u(e){return e!==t.document.body&&("fixed"===s(e,"position")||(e.parentNode?u(e.parentNode):e))}function h(t,e){function n(t){return""!==t&&!isNaN(parseFloat(t))&&isFinite(t)}Object.keys(e).forEach(function(i){var r="";-1!==["width","height","top","right","bottom","left"].indexOf(i)&&n(e[i])&&(r="px"),t.style[i]=e[i]+r})}function d(t){var e={};return t&&"[object Function]"===e.toString.call(t)}function p(t){var e={width:t.offsetWidth,height:t.offsetHeight,left:t.offsetLeft,top:t.offsetTop};return e.right=e.left+e.width,e.bottom=e.top+e.height,e}function f(t){var e=t.getBoundingClientRect(),n=-1!=navigator.userAgent.indexOf("MSIE"),i=n&&"HTML"===t.tagName?-t.scrollTop:e.top;return{left:e.left,top:i,right:e.right,bottom:e.bottom,width:e.right-e.left,height:e.bottom-i}}function m(t,e,n){var i=f(t),r=f(e);if(n){var o=c(e);r.top+=o.scrollTop,r.bottom+=o.scrollTop,r.left+=o.scrollLeft,r.right+=o.scrollLeft}var a={top:i.top-r.top,left:i.left-r.left,bottom:i.top-r.top+i.height,right:i.left-r.left+i.width,width:i.width,height:i.height};return a}function v(e){for(var n=["","ms","webkit","moz","o"],i=0;i<n.length;i++){var r=n[i]?n[i]+e.charAt(0).toUpperCase()+e.slice(1):e;if("undefined"!==typeof t.document.body.style[r])return r}return null}return n.prototype.destroy=function(){return this._popper.removeAttribute("x-placement"),this._popper.style.left="",this._popper.style.position="",this._popper.style.top="",this._popper.style[v("transform")]="",this._removeEventListeners(),this._options.removeOnDestroy&&this._popper.remove(),this},n.prototype.update=function(){var t={instance:this,styles:{}};t.placement=this._options.placement,t._originalPlacement=this._options.placement,t.offsets=this._getOffsets(this._popper,this._reference,t.placement),t.boundaries=this._getBoundaries(t,this._options.boundariesPadding,this._options.boundariesElement),t=this.runModifiers(t,this._options.modifiers),"function"===typeof this.state.updateCallback&&this.state.updateCallback(t)},n.prototype.onCreate=function(t){return t(this),this},n.prototype.onUpdate=function(t){return this.state.updateCallback=t,this},n.prototype.parse=function(e){var n={tagName:"div",classNames:["popper"],attributes:[],parent:t.document.body,content:"",contentType:"text",arrowTagName:"div",arrowClassNames:["popper__arrow"],arrowAttributes:["x-arrow"]};e=Object.assign({},n,e);var i=t.document,r=i.createElement(e.tagName);if(s(r,e.classNames),l(r,e.attributes),"node"===e.contentType?r.appendChild(e.content.jquery?e.content[0]:e.content):"html"===e.contentType?r.innerHTML=e.content:r.textContent=e.content,e.arrowTagName){var o=i.createElement(e.arrowTagName);s(o,e.arrowClassNames),l(o,e.arrowAttributes),r.appendChild(o)}var a=e.parent.jquery?e.parent[0]:e.parent;if("string"===typeof a){if(a=i.querySelectorAll(e.parent),a.length>1&&console.warn("WARNING: the given `parent` query("+e.parent+") matched more than one element, the first one will be used"),0===a.length)throw"ERROR: the given `parent` doesn't exists!";a=a[0]}return a.length>1&&a instanceof Element===!1&&(console.warn("WARNING: you have passed as parent a list of elements, the first one will be used"),a=a[0]),a.appendChild(r),r;function s(t,e){e.forEach(function(e){t.classList.add(e)})}function l(t,e){e.forEach(function(e){t.setAttribute(e.split(":")[0],e.split(":")[1]||"")})}},n.prototype._getPosition=function(t,e){var n=l(e);if(this._options.forceAbsolute)return"absolute";var i=u(e,n);return i?"fixed":"absolute"},n.prototype._getOffsets=function(t,e,n){n=n.split("-")[0];var r={};r.position=this.state.position;var o="fixed"===r.position,a=m(e,l(t),o),s=i(t);return-1!==["right","left"].indexOf(n)?(r.top=a.top+a.height/2-s.height/2,r.left="left"===n?a.left-s.width:a.right):(r.left=a.left+a.width/2-s.width/2,r.top="top"===n?a.top-s.height:a.bottom),r.width=s.width,r.height=s.height,{popper:r,reference:a}},n.prototype._setupEventListeners=function(){if(this.state.updateBound=this.update.bind(this),t.addEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement){var e=c(this._reference);e!==t.document.body&&e!==t.document.documentElement||(e=t),e.addEventListener("scroll",this.state.updateBound),this.state.scrollTarget=e}},n.prototype._removeEventListeners=function(){t.removeEventListener("resize",this.state.updateBound),"window"!==this._options.boundariesElement&&this.state.scrollTarget&&(this.state.scrollTarget.removeEventListener("scroll",this.state.updateBound),this.state.scrollTarget=null),this.state.updateBound=null},n.prototype._getBoundaries=function(e,n,i){var r,o,a={};if("window"===i){var s=t.document.body,u=t.document.documentElement;o=Math.max(s.scrollHeight,s.offsetHeight,u.clientHeight,u.scrollHeight,u.offsetHeight),r=Math.max(s.scrollWidth,s.offsetWidth,u.clientWidth,u.scrollWidth,u.offsetWidth),a={top:0,right:r,bottom:o,left:0}}else if("viewport"===i){var h=l(this._popper),d=c(this._popper),f=p(h),m=function(t){return t==document.body?Math.max(document.documentElement.scrollTop,document.body.scrollTop):t.scrollTop},v=function(t){return t==document.body?Math.max(document.documentElement.scrollLeft,document.body.scrollLeft):t.scrollLeft},g="fixed"===e.offsets.popper.position?0:m(d),y="fixed"===e.offsets.popper.position?0:v(d);a={top:0-(f.top-g),right:t.document.documentElement.clientWidth-(f.left-y),bottom:t.document.documentElement.clientHeight-(f.top-g),left:0-(f.left-y)}}else a=l(this._popper)===i?{top:0,left:0,right:i.clientWidth,bottom:i.clientHeight}:p(i);return a.left+=n,a.right-=n,a.top=a.top+n,a.bottom=a.bottom-n,a},n.prototype.runModifiers=function(t,e,n){var i=e.slice();return void 0!==n&&(i=this._options.modifiers.slice(0,a(this._options.modifiers,n))),i.forEach(function(e){d(e)&&(t=e.call(this,t))}.bind(this)),t},n.prototype.isModifierRequired=function(t,e){var n=a(this._options.modifiers,t);return!!this._options.modifiers.slice(0,n).filter(function(t){return t===e}).length},n.prototype.modifiers={},n.prototype.modifiers.applyStyle=function(t){var e,n={position:t.offsets.popper.position},i=Math.round(t.offsets.popper.left),r=Math.round(t.offsets.popper.top);return this._options.gpuAcceleration&&(e=v("transform"))?(n[e]="translate3d("+i+"px, "+r+"px, 0)",n.top=0,n.left=0):(n.left=i,n.top=r),Object.assign(n,t.styles),h(this._popper,n),this._popper.setAttribute("x-placement",t.placement),this.isModifierRequired(this.modifiers.applyStyle,this.modifiers.arrow)&&t.offsets.arrow&&h(t.arrowElement,t.offsets.arrow),t},n.prototype.modifiers.shift=function(t){var e=t.placement,n=e.split("-")[0],i=e.split("-")[1];if(i){var r=t.offsets.reference,a=o(t.offsets.popper),s={y:{start:{top:r.top},end:{top:r.top+r.height-a.height}},x:{start:{left:r.left},end:{left:r.left+r.width-a.width}}},l=-1!==["bottom","top"].indexOf(n)?"x":"y";t.offsets.popper=Object.assign(a,s[l][i])}return t},n.prototype.modifiers.preventOverflow=function(t){var e=this._options.preventOverflowOrder,n=o(t.offsets.popper),i={left:function(){var e=n.left;return n.left<t.boundaries.left&&(e=Math.max(n.left,t.boundaries.left)),{left:e}},right:function(){var e=n.left;return n.right>t.boundaries.right&&(e=Math.min(n.left,t.boundaries.right-n.width)),{left:e}},top:function(){var e=n.top;return n.top<t.boundaries.top&&(e=Math.max(n.top,t.boundaries.top)),{top:e}},bottom:function(){var e=n.top;return n.bottom>t.boundaries.bottom&&(e=Math.min(n.top,t.boundaries.bottom-n.height)),{top:e}}};return e.forEach(function(e){t.offsets.popper=Object.assign(n,i[e]())}),t},n.prototype.modifiers.keepTogether=function(t){var e=o(t.offsets.popper),n=t.offsets.reference,i=Math.floor;return e.right<i(n.left)&&(t.offsets.popper.left=i(n.left)-e.width),e.left>i(n.right)&&(t.offsets.popper.left=i(n.right)),e.bottom<i(n.top)&&(t.offsets.popper.top=i(n.top)-e.height),e.top>i(n.bottom)&&(t.offsets.popper.top=i(n.bottom)),t},n.prototype.modifiers.flip=function(t){if(!this.isModifierRequired(this.modifiers.flip,this.modifiers.preventOverflow))return console.warn("WARNING: preventOverflow modifier is required by flip modifier in order to work, be sure to include it before flip!"),t;if(t.flipped&&t.placement===t._originalPlacement)return t;var e=t.placement.split("-")[0],n=r(e),i=t.placement.split("-")[1]||"",a=[];return a="flip"===this._options.flipBehavior?[e,n]:this._options.flipBehavior,a.forEach(function(s,l){if(e===s&&a.length!==l+1){e=t.placement.split("-")[0],n=r(e);var c=o(t.offsets.popper),u=-1!==["right","bottom"].indexOf(e);(u&&Math.floor(t.offsets.reference[e])>Math.floor(c[n])||!u&&Math.floor(t.offsets.reference[e])<Math.floor(c[n]))&&(t.flipped=!0,t.placement=a[l+1],i&&(t.placement+="-"+i),t.offsets.popper=this._getOffsets(this._popper,this._reference,t.placement).popper,t=this.runModifiers(t,this._options.modifiers,this._flip))}}.bind(this)),t},n.prototype.modifiers.offset=function(t){var e=this._options.offset,n=t.offsets.popper;return-1!==t.placement.indexOf("left")?n.top-=e:-1!==t.placement.indexOf("right")?n.top+=e:-1!==t.placement.indexOf("top")?n.left-=e:-1!==t.placement.indexOf("bottom")&&(n.left+=e),t},n.prototype.modifiers.arrow=function(t){var e=this._options.arrowElement,n=this._options.arrowOffset;if("string"===typeof e&&(e=this._popper.querySelector(e)),!e)return t;if(!this._popper.contains(e))return console.warn("WARNING: `arrowElement` must be child of its popper element!"),t;if(!this.isModifierRequired(this.modifiers.arrow,this.modifiers.keepTogether))return console.warn("WARNING: keepTogether modifier is required by arrow modifier in order to work, be sure to include it before arrow!"),t;var r={},a=t.placement.split("-")[0],s=o(t.offsets.popper),l=t.offsets.reference,c=-1!==["left","right"].indexOf(a),u=c?"height":"width",h=c?"top":"left",d=c?"left":"top",p=c?"bottom":"right",f=i(e)[u];l[p]-f<s[h]&&(t.offsets.popper[h]-=s[h]-(l[p]-f)),l[h]+f>s[p]&&(t.offsets.popper[h]+=l[h]+f-s[p]);var m=l[h]+(n||l[u]/2-f/2),v=m-s[h];return v=Math.max(Math.min(s[u]-f-8,v),8),r[h]=v,r[d]="",t.offsets.arrow=r,t.arrowElement=e,t},Object.assign||Object.defineProperty(Object,"assign",{enumerable:!1,configurable:!0,writable:!0,value:function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert first argument to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i){i=Object(i);for(var r=Object.keys(i),o=0,a=r.length;o<a;o++){var s=r[o],l=Object.getOwnPropertyDescriptor(i,s);void 0!==l&&l.enumerable&&(e[s]=i[s])}}}return e}}),n})},"61d9":function(t,e,n){"use strict";var i=function(){function t(){var t=this;this.mode=0,this.beginTime=(performance||Date).now(),this.prevTime=this.beginTime,this.frames=0,this.container=document.createElement("div"),this.container.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",this.container.addEventListener("click",function(e){e.preventDefault(),t.showPanel(++t.mode%t.container.children.length)},!1),this.fpsPanel=this.addPanel(new r("FPS","#0ff","#002")),this.msPanel=this.addPanel(new r("MS","#0f0","#020")),self.performance&&self.performance.memory&&(this.memPanel=this.addPanel(new r("MB","#f08","#201"))),this.dom=this.container,this.domElement=this.container,this.setMode=this.showPanel,this.showPanel(0)}return t.prototype.addPanel=function(t){return this.container.appendChild(t.dom),t},t.prototype.showPanel=function(t){for(var e=0;e<this.container.children.length;e++)this.container.children[e].style.display=e===t?"block":"none";this.mode=t},t.prototype.begin=function(){this.beginTime=(performance||Date).now()},t.prototype.end=function(){this.frames++;var t=(performance||Date).now();if(this.msPanel.update(t-this.beginTime,200),t>this.prevTime+1e3&&(this.fpsPanel.update(1e3*this.frames/(t-this.prevTime),100),this.prevTime=t,this.frames=0,this.memPanel)){var e=performance.memory;this.memPanel.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},t.prototype.update=function(){this.beginTime=this.end()},t}();e.Stats=i;var r=function(){function t(t,e,n){this.name=t,this.fg=e,this.bg=n,this.min=1/0,this.max=0,this.PR=Math.round(window.devicePixelRatio||1),this.WIDTH=80*this.PR,this.HEIGHT=48*this.PR,this.TEXT_X=3*this.PR,this.TEXT_Y=2*this.PR,this.GRAPH_X=3*this.PR,this.GRAPH_Y=15*this.PR,this.GRAPH_WIDTH=74*this.PR,this.GRAPH_HEIGHT=30*this.PR,this.canvas=document.createElement("canvas"),this.canvas.width=this.WIDTH,this.canvas.height=this.HEIGHT,this.canvas.style.cssText="width:80px;height:48px",this.context=this.canvas.getContext("2d"),this.context.font="bold "+9*this.PR+"px Helvetica,Arial,sans-serif",this.context.textBaseline="top",this.context.fillStyle=n,this.context.fillRect(0,0,this.WIDTH,this.HEIGHT),this.context.fillStyle=e,this.context.fillText(t,this.TEXT_X,this.TEXT_Y),this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.context.fillStyle=n,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH,this.GRAPH_HEIGHT),this.dom=this.canvas}return t.prototype.update=function(t,e){this.min=Math.min(this.min,t),this.max=Math.max(this.max,t),this.context.fillStyle=this.bg,this.context.globalAlpha=1,this.context.fillRect(0,0,this.WIDTH,this.GRAPH_Y),this.context.fillStyle=this.fg,this.context.fillText(Math.round(t)+" "+name+" ("+Math.round(this.min)+"-"+Math.round(this.max)+")",this.TEXT_X,this.TEXT_Y),this.context.drawImage(this.canvas,this.GRAPH_X+this.PR,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT,this.GRAPH_X,this.GRAPH_Y,this.GRAPH_WIDTH-this.PR,this.GRAPH_HEIGHT),this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,this.GRAPH_HEIGHT),this.context.fillStyle=this.bg,this.context.globalAlpha=.9,this.context.fillRect(this.GRAPH_X+this.GRAPH_WIDTH-this.PR,this.GRAPH_Y,this.PR,Math.round((1-t/e)*this.GRAPH_HEIGHT))},t}()},"626a":function(t,e,n){var i=n("2d95");t.exports=Object("z").propertyIsEnumerable(0)?Object:function(t){return"String"==i(t)?t.split(""):Object(t)}},"62a0":function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},"63b6":function(t,e,n){var i=n("e53d"),r=n("584a"),o=n("d864"),a=n("35e8"),s=n("07e3"),l="prototype",c=function(t,e,n){var u,h,d,p=t&c.F,f=t&c.G,m=t&c.S,v=t&c.P,g=t&c.B,y=t&c.W,b=f?r:r[e]||(r[e]={}),x=b[l],w=f?i:m?i[e]:(i[e]||{})[l];for(u in f&&(n=e),n)h=!p&&w&&void 0!==w[u],h&&s(b,u)||(d=h?w[u]:n[u],b[u]=f&&"function"!=typeof w[u]?n[u]:g&&h?o(d,i):y&&w[u]==d?function(t){var e=function(e,n,i){if(this instanceof t){switch(arguments.length){case 0:return new t;case 1:return new t(e);case 2:return new t(e,n)}return new t(e,n,i)}return t.apply(this,arguments)};return e[l]=t[l],e}(d):v&&"function"==typeof d?o(Function.call,d):d,v&&((b.virtual||(b.virtual={}))[u]=d,t&c.R&&x&&!x[u]&&a(x,u,d)))};c.F=1,c.G=2,c.S=4,c.P=8,c.B=16,c.W=32,c.U=64,c.R=128,t.exports=c},6718:function(t,e,n){var i=n("e53d"),r=n("584a"),o=n("b8e3"),a=n("ccb9"),s=n("d9f6").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==t.charAt(0)||t in e||s(e,t,{value:a.f(t)})}},"67ab":function(t,e,n){var i=n("ca5a")("meta"),r=n("d3f4"),o=n("69a8"),a=n("86cc").f,s=0,l=Object.isExtensible||function(){return!0},c=!n("79e5")(function(){return l(Object.preventExtensions({}))}),u=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[i].w},p=function(t){return c&&f.NEED&&l(t)&&!o(t,i)&&u(t),t},f=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},6821:function(t,e,n){var i=n("626a"),r=n("be13");t.exports=function(t){return i(r(t))}},"69a8":function(t,e){var n={}.hasOwnProperty;t.exports=function(t,e){return n.call(t,e)}},"69d3":function(t,e,n){n("6718")("asyncIterator")},"6a99":function(t,e,n){var i=n("d3f4");t.exports=function(t,e){if(!i(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!i(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!i(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")}},"6abf":function(t,e,n){var i=n("e6f3"),r=n("1691").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},"6ac9":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=74)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},2:function(t,e){t.exports=n("5924")},3:function(t,e){t.exports=n("8122")},5:function(t,e){t.exports=n("e974")},7:function(t,e){t.exports=n("2b0e")},74:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("span",[n("transition",{attrs:{name:t.transition},on:{"after-enter":t.handleAfterEnter,"after-leave":t.handleAfterLeave}},[n("div",{directives:[{name:"show",rawName:"v-show",value:!t.disabled&&t.showPopper,expression:"!disabled && showPopper"}],ref:"popper",staticClass:"el-popover el-popper",class:[t.popperClass,t.content&&"el-popover--plain"],style:{width:t.width+"px"},attrs:{role:"tooltip",id:t.tooltipId,"aria-hidden":t.disabled||!t.showPopper?"true":"false"}},[t.title?n("div",{staticClass:"el-popover__title",domProps:{textContent:t._s(t.title)}}):t._e(),t._t("default",[t._v(t._s(t.content))])],2)]),n("span",{ref:"wrapper",staticClass:"el-popover__reference-wrapper"},[t._t("reference")],2)],1)},r=[];i._withStripped=!0;var o=n(5),a=n.n(o),s=n(2),l=n(3),c={name:"ElPopover",mixins:[a.a],props:{trigger:{type:String,default:"click",validator:function(t){return["click","focus","hover","manual"].indexOf(t)>-1}},openDelay:{type:Number,default:0},closeDelay:{type:Number,default:200},title:String,disabled:Boolean,content:String,reference:{},popperClass:String,width:{},visibleArrow:{default:!0},arrowOffset:{type:Number,default:0},transition:{type:String,default:"fade-in-linear"},tabindex:{type:Number,default:0}},computed:{tooltipId:function(){return"el-popover-"+Object(l["generateId"])()}},watch:{showPopper:function(t){this.disabled||(t?this.$emit("show"):this.$emit("hide"))}},mounted:function(){var t=this,e=this.referenceElm=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$refs.wrapper.children&&(e=this.referenceElm=this.$refs.wrapper.children[0]),e&&(Object(s["addClass"])(e,"el-popover__reference"),e.setAttribute("aria-describedby",this.tooltipId),e.setAttribute("tabindex",this.tabindex),n.setAttribute("tabindex",0),"click"!==this.trigger&&(Object(s["on"])(e,"focusin",function(){t.handleFocus();var n=e.__vue__;n&&"function"===typeof n.focus&&n.focus()}),Object(s["on"])(n,"focusin",this.handleFocus),Object(s["on"])(e,"focusout",this.handleBlur),Object(s["on"])(n,"focusout",this.handleBlur)),Object(s["on"])(e,"keydown",this.handleKeydown),Object(s["on"])(e,"click",this.handleClick)),"click"===this.trigger?(Object(s["on"])(e,"click",this.doToggle),Object(s["on"])(document,"click",this.handleDocumentClick)):"hover"===this.trigger?(Object(s["on"])(e,"mouseenter",this.handleMouseEnter),Object(s["on"])(n,"mouseenter",this.handleMouseEnter),Object(s["on"])(e,"mouseleave",this.handleMouseLeave),Object(s["on"])(n,"mouseleave",this.handleMouseLeave)):"focus"===this.trigger&&(this.tabindex<0&&console.warn("[Element Warn][Popover]a negative taindex means that the element cannot be focused by tab key"),e.querySelector("input, textarea")?(Object(s["on"])(e,"focusin",this.doShow),Object(s["on"])(e,"focusout",this.doClose)):(Object(s["on"])(e,"mousedown",this.doShow),Object(s["on"])(e,"mouseup",this.doClose)))},beforeDestroy:function(){this.cleanup()},deactivated:function(){this.cleanup()},methods:{doToggle:function(){this.showPopper=!this.showPopper},doShow:function(){this.showPopper=!0},doClose:function(){this.showPopper=!1},handleFocus:function(){Object(s["addClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!0)},handleClick:function(){Object(s["removeClass"])(this.referenceElm,"focusing")},handleBlur:function(){Object(s["removeClass"])(this.referenceElm,"focusing"),"click"!==this.trigger&&"focus"!==this.trigger||(this.showPopper=!1)},handleMouseEnter:function(){var t=this;clearTimeout(this._timer),this.openDelay?this._timer=setTimeout(function(){t.showPopper=!0},this.openDelay):this.showPopper=!0},handleKeydown:function(t){27===t.keyCode&&"manual"!==this.trigger&&this.doClose()},handleMouseLeave:function(){var t=this;clearTimeout(this._timer),this.closeDelay?this._timer=setTimeout(function(){t.showPopper=!1},this.closeDelay):this.showPopper=!1},handleDocumentClick:function(t){var e=this.reference||this.$refs.reference,n=this.popper||this.$refs.popper;!e&&this.$refs.wrapper.children&&(e=this.referenceElm=this.$refs.wrapper.children[0]),this.$el&&e&&!this.$el.contains(t.target)&&!e.contains(t.target)&&n&&!n.contains(t.target)&&(this.showPopper=!1)},handleAfterEnter:function(){this.$emit("after-enter")},handleAfterLeave:function(){this.$emit("after-leave"),this.doDestroy()},cleanup:function(){(this.openDelay||this.closeDelay)&&clearTimeout(this._timer)}},destroyed:function(){var t=this.reference;Object(s["off"])(t,"click",this.doToggle),Object(s["off"])(t,"mouseup",this.doClose),Object(s["off"])(t,"mousedown",this.doShow),Object(s["off"])(t,"focusin",this.doShow),Object(s["off"])(t,"focusout",this.doClose),Object(s["off"])(t,"mousedown",this.doShow),Object(s["off"])(t,"mouseup",this.doClose),Object(s["off"])(t,"mouseleave",this.handleMouseLeave),Object(s["off"])(t,"mouseenter",this.handleMouseEnter),Object(s["off"])(document,"click",this.handleDocumentClick)}},u=c,h=n(0),d=Object(h["a"])(u,i,r,!1,null,null,null);d.options.__file="packages/popover/src/main.vue";var p=d.exports,f=function(t,e,n){var i=e.expression?e.value:e.arg,r=n.context.$refs[i];r&&(Array.isArray(r)?r[0].$refs.reference=t:r.$refs.reference=t)},m={bind:function(t,e,n){f(t,e,n)},inserted:function(t,e,n){f(t,e,n)}},v=n(7),g=n.n(v);g.a.directive("popover",m),p.install=function(t){t.directive("popover",m),t.component(p.name,p)},p.directive=m;e["default"]=p}})},"6b4c":function(t,e){var n={}.toString;t.exports=function(t){return n.call(t).slice(8,-1)}},"6b7c":function(t,e,n){"use strict";e.__esModule=!0;var i=n("4897");e.default={methods:{t:function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return i.t.apply(this,e)}}}},"6c1c":function(t,e,n){n("c367");for(var i=n("e53d"),r=n("35e8"),o=n("481b"),a=n("5168")("toStringTag"),s="CSSRuleList,CSSStyleDeclaration,CSSValueList,ClientRectList,DOMRectList,DOMStringList,DOMTokenList,DataTransferItemList,FileList,HTMLAllCollection,HTMLCollection,HTMLFormElement,HTMLSelectElement,MediaList,MimeTypeArray,NamedNodeMap,NodeList,PaintRequestList,Plugin,PluginArray,SVGLengthList,SVGNumberList,SVGPathSegList,SVGPointList,SVGStringList,SVGTransformList,SourceBufferList,StyleSheetList,TextTrackCueList,TextTrackList,TouchList".split(","),l=0;l<s.length;l++){var c=s[l],u=i[c],h=u&&u.prototype;h&&!h[a]&&r(h,a,c),o[c]=o.Array}},"6dd8":function(t,e,n){"use strict";n.r(e),function(t){var n=function(){if("undefined"!==typeof Map)return Map;function t(t,e){var n=-1;return t.some(function(t,i){return t[0]===e&&(n=i,!0)}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(e){var n=t(this.__entries__,e),i=this.__entries__[n];return i&&i[1]},e.prototype.set=function(e,n){var i=t(this.__entries__,e);~i?this.__entries__[i][1]=n:this.__entries__.push([e,n])},e.prototype.delete=function(e){var n=this.__entries__,i=t(n,e);~i&&n.splice(i,1)},e.prototype.has=function(e){return!!~t(this.__entries__,e)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,e){void 0===e&&(e=null);for(var n=0,i=this.__entries__;n<i.length;n++){var r=i[n];t.call(e,r[1],r[0])}},e}()}(),i="undefined"!==typeof window&&"undefined"!==typeof document&&window.document===document,r=function(){return"undefined"!==typeof t&&t.Math===Math?t:"undefined"!==typeof self&&self.Math===Math?self:"undefined"!==typeof window&&window.Math===Math?window:Function("return this")()}(),o=function(){return"function"===typeof requestAnimationFrame?requestAnimationFrame.bind(r):function(t){return setTimeout(function(){return t(Date.now())},1e3/60)}}(),a=2;function s(t,e){var n=!1,i=!1,r=0;function s(){n&&(n=!1,t()),i&&c()}function l(){o(s)}function c(){var t=Date.now();if(n){if(t-r<a)return;i=!0}else n=!0,i=!1,setTimeout(l,e);r=t}return c}var l=20,c=["top","right","bottom","left","width","height","size","weight"],u="undefined"!==typeof MutationObserver,h=function(){function t(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=s(this.refresh.bind(this),l)}return t.prototype.addObserver=function(t){~this.observers_.indexOf(t)||this.observers_.push(t),this.connected_||this.connect_()},t.prototype.removeObserver=function(t){var e=this.observers_,n=e.indexOf(t);~n&&e.splice(n,1),!e.length&&this.connected_&&this.disconnect_()},t.prototype.refresh=function(){var t=this.updateObservers_();t&&this.refresh()},t.prototype.updateObservers_=function(){var t=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return t.forEach(function(t){return t.broadcastActive()}),t.length>0},t.prototype.connect_=function(){i&&!this.connected_&&(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),u?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},t.prototype.disconnect_=function(){i&&this.connected_&&(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},t.prototype.onTransitionEnd_=function(t){var e=t.propertyName,n=void 0===e?"":e,i=c.some(function(t){return!!~n.indexOf(t)});i&&this.refresh()},t.getInstance=function(){return this.instance_||(this.instance_=new t),this.instance_},t.instance_=null,t}(),d=function(t,e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];Object.defineProperty(t,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return t},p=function(t){var e=t&&t.ownerDocument&&t.ownerDocument.defaultView;return e||r},f=E(0,0,0,0);function m(t){return parseFloat(t)||0}function v(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return e.reduce(function(e,n){var i=t["border-"+n+"-width"];return e+m(i)},0)}function g(t){for(var e=["top","right","bottom","left"],n={},i=0,r=e;i<r.length;i++){var o=r[i],a=t["padding-"+o];n[o]=m(a)}return n}function y(t){var e=t.getBBox();return E(0,0,e.width,e.height)}function b(t){var e=t.clientWidth,n=t.clientHeight;if(!e&&!n)return f;var i=p(t).getComputedStyle(t),r=g(i),o=r.left+r.right,a=r.top+r.bottom,s=m(i.width),l=m(i.height);if("border-box"===i.boxSizing&&(Math.round(s+o)!==e&&(s-=v(i,"left","right")+o),Math.round(l+a)!==n&&(l-=v(i,"top","bottom")+a)),!w(t)){var c=Math.round(s+o)-e,u=Math.round(l+a)-n;1!==Math.abs(c)&&(s-=c),1!==Math.abs(u)&&(l-=u)}return E(r.left,r.top,s,l)}var x=function(){return"undefined"!==typeof SVGGraphicsElement?function(t){return t instanceof p(t).SVGGraphicsElement}:function(t){return t instanceof p(t).SVGElement&&"function"===typeof t.getBBox}}();function w(t){return t===p(t).document.documentElement}function _(t){return i?x(t)?y(t):b(t):f}function M(t){var e=t.x,n=t.y,i=t.width,r=t.height,o="undefined"!==typeof DOMRectReadOnly?DOMRectReadOnly:Object,a=Object.create(o.prototype);return d(a,{x:e,y:n,width:i,height:r,top:n,right:e+i,bottom:r+n,left:e}),a}function E(t,e,n,i){return{x:t,y:e,width:n,height:i}}var S=function(){function t(t){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=E(0,0,0,0),this.target=t}return t.prototype.isActive=function(){var t=_(this.target);return this.contentRect_=t,t.width!==this.broadcastWidth||t.height!==this.broadcastHeight},t.prototype.broadcastRect=function(){var t=this.contentRect_;return this.broadcastWidth=t.width,this.broadcastHeight=t.height,t},t}(),T=function(){function t(t,e){var n=M(e);d(this,{target:t,contentRect:n})}return t}(),A=function(){function t(t,e,i){if(this.activeObservations_=[],this.observations_=new n,"function"!==typeof t)throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=t,this.controller_=e,this.callbackCtx_=i}return t.prototype.observe=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)||(e.set(t,new S(t)),this.controller_.addObserver(this),this.controller_.refresh())}},t.prototype.unobserve=function(t){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if("undefined"!==typeof Element&&Element instanceof Object){if(!(t instanceof p(t).Element))throw new TypeError('parameter 1 is not of type "Element".');var e=this.observations_;e.has(t)&&(e.delete(t),e.size||this.controller_.removeObserver(this))}},t.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},t.prototype.gatherActive=function(){var t=this;this.clearActive(),this.observations_.forEach(function(e){e.isActive()&&t.activeObservations_.push(e)})},t.prototype.broadcastActive=function(){if(this.hasActive()){var t=this.callbackCtx_,e=this.activeObservations_.map(function(t){return new T(t.target,t.broadcastRect())});this.callback_.call(t,e,t),this.clearActive()}},t.prototype.clearActive=function(){this.activeObservations_.splice(0)},t.prototype.hasActive=function(){return this.activeObservations_.length>0},t}(),C="undefined"!==typeof WeakMap?new WeakMap:new n,L=function(){function t(e){if(!(this instanceof t))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var n=h.getInstance(),i=new A(e,n,this);C.set(this,i)}return t}();["observe","unobserve","disconnect"].forEach(function(t){L.prototype[t]=function(){var e;return(e=C.get(this))[t].apply(e,arguments)}});var P=function(){return"undefined"!==typeof r.ResizeObserver?r.ResizeObserver:L}();e["default"]=P}.call(this,n("c8ba"))},"71c1":function(t,e,n){var i=n("3a38"),r=n("25eb");t.exports=function(t){return function(e,n){var o,a,s=String(r(e)),l=i(n),c=s.length;return l<0||l>=c?t?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===c||(a=s.charCodeAt(l+1))<56320||a>57343?t?s.charAt(l):o:t?s.slice(l,l+2):a-56320+(o-55296<<10)+65536)}}},"722f":function(t,e,n){"use strict";e.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r=n("e452"),o=a(r);function a(t){return t&&t.__esModule?t:{default:t}}var s,l=l||{};l.Dialog=function(t,e,n){var r=this;if(this.dialogNode=t,null===this.dialogNode||"dialog"!==this.dialogNode.getAttribute("role"))throw new Error("Dialog() requires a DOM element with ARIA role of dialog.");"string"===typeof e?this.focusAfterClosed=document.getElementById(e):"object"===("undefined"===typeof e?"undefined":i(e))?this.focusAfterClosed=e:this.focusAfterClosed=null,"string"===typeof n?this.focusFirst=document.getElementById(n):"object"===("undefined"===typeof n?"undefined":i(n))?this.focusFirst=n:this.focusFirst=null,this.focusFirst?this.focusFirst.focus():o.default.focusFirstDescendant(this.dialogNode),this.lastFocus=document.activeElement,s=function(t){r.trapFocus(t)},this.addListeners()},l.Dialog.prototype.addListeners=function(){document.addEventListener("focus",s,!0)},l.Dialog.prototype.removeListeners=function(){document.removeEventListener("focus",s,!0)},l.Dialog.prototype.closeDialog=function(){var t=this;this.removeListeners(),this.focusAfterClosed&&setTimeout(function(){t.focusAfterClosed.focus()})},l.Dialog.prototype.trapFocus=function(t){o.default.IgnoreUtilFocusChanges||(this.dialogNode.contains(t.target)?this.lastFocus=t.target:(o.default.focusFirstDescendant(this.dialogNode),this.lastFocus===document.activeElement&&o.default.focusLastDescendant(this.dialogNode),this.lastFocus=document.activeElement))},e.default=l.Dialog},7333:function(t,e,n){"use strict";var i=n("9e1e"),r=n("0d58"),o=n("2621"),a=n("52a7"),s=n("4bf8"),l=n("626a"),c=Object.assign;t.exports=!c||n("79e5")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){var n=s(t),c=arguments.length,u=1,h=o.f,d=a.f;while(c>u){var p,f=l(arguments[u++]),m=h?r(f).concat(h(f)):r(f),v=m.length,g=0;while(v>g)p=m[g++],i&&!d.call(f,p)||(n[p]=f[p])}return n}:c},"765d":function(t,e,n){n("6718")("observable")},7726:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},"77f1":function(t,e,n){var i=n("4588"),r=Math.max,o=Math.min;t.exports=function(t,e){return t=i(t),t<0?r(t+e,0):o(t,e)}},"794b":function(t,e,n){t.exports=!n("8e60")&&!n("294c")(function(){return 7!=Object.defineProperty(n("1ec9")("div"),"a",{get:function(){return 7}}).a})},"79aa":function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},"79e5":function(t,e){t.exports=function(t){try{return!!t()}catch(e){return!0}}},"7a56":function(t,e,n){"use strict";var i=n("7726"),r=n("86cc"),o=n("9e1e"),a=n("2b4c")("species");t.exports=function(t){var e=i[t];o&&e&&!e[a]&&r.f(e,a,{configurable:!0,get:function(){return this}})}},"7a77":function(t,e,n){"use strict";function i(t){this.message=t}i.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},i.prototype.__CANCEL__=!0,t.exports=i},"7aac":function(t,e,n){"use strict";var i=n("c532");t.exports=i.isStandardBrowserEnv()?function(){return{write:function(t,e,n,r,o,a){var s=[];s.push(t+"="+encodeURIComponent(e)),i.isNumber(n)&&s.push("expires="+new Date(n).toGMTString()),i.isString(r)&&s.push("path="+r),i.isString(o)&&s.push("domain="+o),!0===a&&s.push("secure"),document.cookie=s.join("; ")},read:function(t){var e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove:function(t){this.write(t,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}()},"7b3e":function(t,e,n){"use strict";var i,r=n("a3de");
/**
 * Checks if an event is supported in the current execution environment.
 *
 * NOTE: This will not work correctly for non-generic events such as `change`,
 * `reset`, `load`, `error`, and `select`.
 *
 * Borrows from Modernizr.
 *
 * @param {string} eventNameSuffix Event name, e.g. "click".
 * @param {?boolean} capture Check if the capture phase is supported.
 * @return {boolean} True if the event is supported.
 * @internal
 * @license Modernizr 3.0.0pre (Custom Build) | MIT
 */
function o(t,e){if(!r.canUseDOM||e&&!("addEventListener"in document))return!1;var n="on"+t,o=n in document;if(!o){var a=document.createElement("div");a.setAttribute(n,"return;"),o="function"===typeof a[n]}return!o&&i&&"wheel"===t&&(o=document.implementation.hasFeature("Events.wheel","3.0")),o}r.canUseDOM&&(i=document.implementation&&document.implementation.hasFeature&&!0!==document.implementation.hasFeature("","")),t.exports=o},"7bbc":function(t,e,n){var i=n("6821"),r=n("9093").f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(t){try{return r(t)}catch(e){return a.slice()}};t.exports.f=function(t){return a&&"[object Window]"==o.call(t)?s(t):r(i(t))}},"7e90":function(t,e,n){var i=n("d9f6"),r=n("e4ae"),o=n("c3a1");t.exports=n("8e60")?Object.defineProperties:function(t,e){r(t);var n,a=o(e),s=a.length,l=0;while(s>l)i.f(t,n=a[l++],e[n]);return t}},"7f20":function(t,e,n){var i=n("86cc").f,r=n("69a8"),o=n("2b4c")("toStringTag");t.exports=function(t,e,n){t&&!r(t=n?t:t.prototype,o)&&i(t,o,{configurable:!0,value:e})}},"7f4d":function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t){for(var e=1,n=arguments.length;e<n;e++){var i=arguments[e]||{};for(var r in i)if(i.hasOwnProperty(r)){var o=i[r];void 0!==o&&(t[r]=o)}}return t}},"7f7f":function(t,e,n){var i=n("86cc").f,r=Function.prototype,o=/^\s*function ([^ (]*)/,a="name";a in r||n("9e1e")&&i(r,a,{configurable:!0,get:function(){try{return(""+this).match(o)[1]}catch(t){return""}}})},"7fc1":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=86)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},4:function(t,e){t.exports=n("d010")},86:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-checkbox-group",attrs:{role:"group","aria-label":"checkbox-group"}},[t._t("default")],2)},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s={name:"ElCheckboxGroup",componentName:"ElCheckboxGroup",mixins:[a.a],inject:{elFormItem:{default:""}},props:{value:{},disabled:Boolean,min:Number,max:Number,size:String,fill:String,textColor:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxGroupSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size}},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",[t])}}},l=s,c=n(0),u=Object(c["a"])(l,i,r,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox-group.vue";var h=u.exports;h.install=function(t){t.component(h.name,h)};e["default"]=h}})},8079:function(t,e,n){var i=n("7726"),r=n("1991").set,o=i.MutationObserver||i.WebKitMutationObserver,a=i.process,s=i.Promise,l="process"==n("2d95")(a);t.exports=function(){var t,e,n,c=function(){var i,r;l&&(i=a.domain)&&i.exit();while(t){r=t.fn,t=t.next;try{r()}catch(o){throw t?n():e=void 0,o}}e=void 0,i&&i.enter()};if(l)n=function(){a.nextTick(c)};else if(!o||i.navigator&&i.navigator.standalone)if(s&&s.resolve){var u=s.resolve(void 0);n=function(){u.then(c)}}else n=function(){r.call(i,c)};else{var h=!0,d=document.createTextNode("");new o(c).observe(d,{characterData:!0}),n=function(){d.data=h=!h}}return function(i){var r={fn:i,next:void 0};e&&(e.next=r),t||(t=r,n()),e=r}}},8122:function(t,e,n){"use strict";e.__esModule=!0,e.isEmpty=e.isEqual=e.arrayEquals=e.looseEqual=e.capitalize=e.kebabCase=e.autoprefixer=e.isFirefox=e.isEdge=e.isIE=e.coerceTruthyValueToArray=e.arrayFind=e.arrayFindIndex=e.escapeRegexpString=e.valueEquals=e.generateId=e.getValueByPath=void 0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.noop=c,e.hasOwn=u,e.toObject=d,e.getPropByPath=p,e.rafThrottle=y,e.objToArray=b;var r=n("2b0e"),o=s(r),a=n("a742");function s(t){return t&&t.__esModule?t:{default:t}}var l=Object.prototype.hasOwnProperty;function c(){}function u(t,e){return l.call(t,e)}function h(t,e){for(var n in e)t[n]=e[n];return t}function d(t){for(var e={},n=0;n<t.length;n++)t[n]&&h(e,t[n]);return e}e.getValueByPath=function(t,e){e=e||"";for(var n=e.split("."),i=t,r=null,o=0,a=n.length;o<a;o++){var s=n[o];if(!i)break;if(o===a-1){r=i[s];break}i=i[s]}return r};function p(t,e,n){var i=t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var r=e.split("."),o=0,a=r.length;o<a-1;++o){if(!i&&!n)break;var s=r[o];if(!(s in i)){if(n)throw new Error("please transfer a valid prop path to form item!");break}i=i[s]}return{o:i,k:r[o],v:i?i[r[o]]:null}}e.generateId=function(){return Math.floor(1e4*Math.random())},e.valueEquals=function(t,e){if(t===e)return!0;if(!(t instanceof Array))return!1;if(!(e instanceof Array))return!1;if(t.length!==e.length)return!1;for(var n=0;n!==t.length;++n)if(t[n]!==e[n])return!1;return!0},e.escapeRegexpString=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(t).replace(/[|\\{}()[\]^$+*?.]/g,"\\$&")};var f=e.arrayFindIndex=function(t,e){for(var n=0;n!==t.length;++n)if(e(t[n]))return n;return-1},m=(e.arrayFind=function(t,e){var n=f(t,e);return-1!==n?t[n]:void 0},e.coerceTruthyValueToArray=function(t){return Array.isArray(t)?t:t?[t]:[]},e.isIE=function(){return!o.default.prototype.$isServer&&!isNaN(Number(document.documentMode))},e.isEdge=function(){return!o.default.prototype.$isServer&&navigator.userAgent.indexOf("Edge")>-1},e.isFirefox=function(){return!o.default.prototype.$isServer&&!!window.navigator.userAgent.match(/firefox/i)},e.autoprefixer=function(t){if("object"!==("undefined"===typeof t?"undefined":i(t)))return t;var e=["transform","transition","animation"],n=["ms-","webkit-"];return e.forEach(function(e){var i=t[e];e&&i&&n.forEach(function(n){t[n+e]=i})}),t},e.kebabCase=function(t){var e=/([^-])([A-Z])/g;return t.replace(e,"$1-$2").replace(e,"$1-$2").toLowerCase()},e.capitalize=function(t){return(0,a.isString)(t)?t.charAt(0).toUpperCase()+t.slice(1):t},e.looseEqual=function(t,e){var n=(0,a.isObject)(t),i=(0,a.isObject)(e);return n&&i?JSON.stringify(t)===JSON.stringify(e):!n&&!i&&String(t)===String(e)}),v=e.arrayEquals=function(t,e){if(t=t||[],e=e||[],t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!m(t[n],e[n]))return!1;return!0},g=(e.isEqual=function(t,e){return Array.isArray(t)&&Array.isArray(e)?v(t,e):m(t,e)},e.isEmpty=function(t){if(null==t)return!0;if("boolean"===typeof t)return!1;if("number"===typeof t)return!t;if(t instanceof Error)return""===t.message;switch(Object.prototype.toString.call(t)){case"[object String]":case"[object Array]":return!t.length;case"[object File]":case"[object Map]":case"[object Set]":return!t.size;case"[object Object]":return!Object.keys(t).length}return!1});function y(t){var e=!1;return function(){for(var n=this,i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];e||(e=!0,window.requestAnimationFrame(function(i){t.apply(n,r),e=!1}))}}function b(t){return Array.isArray(t)?t:g(t)?[]:[t]}},8378:function(t,e){var n=t.exports={version:"2.6.9"};"number"==typeof __e&&(__e=n)},"83b9":function(t,e,n){"use strict";var i=n("d925"),r=n("e683");t.exports=function(t,e){return t&&!i(e)?r(t,e):e}},8436:function(t,e){t.exports=function(){}},"845f":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=99)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},99:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-button-group"},[t._t("default")],2)},r=[];i._withStripped=!0;var o={name:"ElButtonGroup"},a=o,s=n(0),l=Object(s["a"])(a,i,r,!1,null,null,null);l.options.__file="packages/button/src/button-group.vue";var c=l.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},"84f2":function(t,e){t.exports={}},"86cc":function(t,e,n){var i=n("cb7c"),r=n("c69a"),o=n("6a99"),a=Object.defineProperty;e.f=n("9e1e")?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},"8a81":function(t,e,n){"use strict";var i=n("7726"),r=n("69a8"),o=n("9e1e"),a=n("5ca1"),s=n("2aba"),l=n("67ab").KEY,c=n("79e5"),u=n("5537"),h=n("7f20"),d=n("ca5a"),p=n("2b4c"),f=n("37c8"),m=n("3a72"),v=n("d4c0"),g=n("1169"),y=n("cb7c"),b=n("d3f4"),x=n("4bf8"),w=n("6821"),_=n("6a99"),M=n("4630"),E=n("2aeb"),S=n("7bbc"),T=n("11e9"),A=n("2621"),C=n("86cc"),L=n("0d58"),P=T.f,O=C.f,R=S.f,k=i.Symbol,D=i.JSON,I=D&&D.stringify,N="prototype",z=p("_hidden"),B=p("toPrimitive"),F={}.propertyIsEnumerable,j=u("symbol-registry"),H=u("symbols"),U=u("op-symbols"),V=Object[N],G="function"==typeof k&&!!A.f,W=i.QObject,$=!W||!W[N]||!W[N].findChild,q=o&&c(function(){return 7!=E(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(t,e,n){var i=P(V,e);i&&delete V[e],O(t,e,n),i&&t!==V&&O(V,e,i)}:O,Y=function(t){var e=H[t]=E(k[N]);return e._k=t,e},X=G&&"symbol"==typeof k.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof k},Z=function(t,e,n){return t===V&&Z(U,e,n),y(t),e=_(e,!0),y(n),r(H,e)?(n.enumerable?(r(t,z)&&t[z][e]&&(t[z][e]=!1),n=E(n,{enumerable:M(0,!1)})):(r(t,z)||O(t,z,M(1,{})),t[z][e]=!0),q(t,e,n)):O(t,e,n)},J=function(t,e){y(t);var n,i=v(e=w(e)),r=0,o=i.length;while(o>r)Z(t,n=i[r++],e[n]);return t},K=function(t,e){return void 0===e?E(t):J(E(t),e)},Q=function(t){var e=F.call(this,t=_(t,!0));return!(this===V&&r(H,t)&&!r(U,t))&&(!(e||!r(this,t)||!r(H,t)||r(this,z)&&this[z][t])||e)},tt=function(t,e){if(t=w(t),e=_(e,!0),t!==V||!r(H,e)||r(U,e)){var n=P(t,e);return!n||!r(H,e)||r(t,z)&&t[z][e]||(n.enumerable=!0),n}},et=function(t){var e,n=R(w(t)),i=[],o=0;while(n.length>o)r(H,e=n[o++])||e==z||e==l||i.push(e);return i},nt=function(t){var e,n=t===V,i=R(n?U:w(t)),o=[],a=0;while(i.length>a)!r(H,e=i[a++])||n&&!r(V,e)||o.push(H[e]);return o};G||(k=function(){if(this instanceof k)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(n){this===V&&e.call(U,n),r(this,z)&&r(this[z],t)&&(this[z][t]=!1),q(this,t,M(1,n))};return o&&$&&q(V,t,{configurable:!0,set:e}),Y(t)},s(k[N],"toString",function(){return this._k}),T.f=tt,C.f=Z,n("9093").f=S.f=et,n("52a7").f=Q,A.f=nt,o&&!n("2d00")&&s(V,"propertyIsEnumerable",Q,!0),f.f=function(t){return Y(p(t))}),a(a.G+a.W+a.F*!G,{Symbol:k});for(var it="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),rt=0;it.length>rt;)p(it[rt++]);for(var ot=L(p.store),at=0;ot.length>at;)m(ot[at++]);a(a.S+a.F*!G,"Symbol",{for:function(t){return r(j,t+="")?j[t]:j[t]=k(t)},keyFor:function(t){if(!X(t))throw TypeError(t+" is not a symbol!");for(var e in j)if(j[e]===t)return e},useSetter:function(){$=!0},useSimple:function(){$=!1}}),a(a.S+a.F*!G,"Object",{create:K,defineProperty:Z,defineProperties:J,getOwnPropertyDescriptor:tt,getOwnPropertyNames:et,getOwnPropertySymbols:nt});var st=c(function(){A.f(1)});a(a.S+a.F*st,"Object",{getOwnPropertySymbols:function(t){return A.f(x(t))}}),D&&a(a.S+a.F*(!G||c(function(){var t=k();return"[null]"!=I([t])||"{}"!=I({a:t})||"{}"!=I(Object(t))})),"JSON",{stringify:function(t){var e,n,i=[t],r=1;while(arguments.length>r)i.push(arguments[r++]);if(n=e=i[1],(b(e)||void 0!==t)&&!X(t))return g(e)||(e=function(t,e){if("function"==typeof n&&(e=n.call(this,t,e)),!X(e))return e}),i[1]=e,I.apply(D,i)}}),k[N][B]||n("32e9")(k[N],B,k[N].valueOf),h(k,"Symbol"),h(Math,"Math",!0),h(i.JSON,"JSON",!0)},"8bbc":function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=124)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},124:function(t,e,n){"use strict";n.r(e);var i,r,o={name:"ElTag",props:{text:String,closable:Boolean,type:String,hit:Boolean,disableTransitions:Boolean,color:String,size:String,effect:{type:String,default:"light",validator:function(t){return-1!==["dark","light","plain"].indexOf(t)}}},methods:{handleClose:function(t){t.stopPropagation(),this.$emit("close",t)},handleClick:function(t){this.$emit("click",t)}},computed:{tagSize:function(){return this.size||(this.$ELEMENT||{}).size}},render:function(t){var e=this.type,n=this.tagSize,i=this.hit,r=this.effect,o=["el-tag",e?"el-tag--"+e:"",n?"el-tag--"+n:"",r?"el-tag--"+r:"",i&&"is-hit"],a=t("span",{class:o,style:{backgroundColor:this.color},on:{click:this.handleClick}},[this.$slots.default,this.closable&&t("i",{class:"el-tag__close el-icon-close",on:{click:this.handleClose}})]);return this.disableTransitions?a:t("transition",{attrs:{name:"el-zoom-in-center"}},[a])}},a=o,s=n(0),l=Object(s["a"])(a,i,r,!1,null,null,null);l.options.__file="packages/tag/src/tag.vue";var c=l.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},"8c4f":function(t,e,n){"use strict";
/*!
  * vue-router v3.5.2
  * (c) 2021 Evan You
  * @license MIT
  */function i(t,e){0}function r(t,e){for(var n in e)t[n]=e[n];return t}var o=/[!'()*]/g,a=function(t){return"%"+t.charCodeAt(0).toString(16)},s=/%2C/g,l=function(t){return encodeURIComponent(t).replace(o,a).replace(s,",")};function c(t){try{return decodeURIComponent(t)}catch(e){0}return t}function u(t,e,n){void 0===e&&(e={});var i,r=n||d;try{i=r(t||"")}catch(s){i={}}for(var o in e){var a=e[o];i[o]=Array.isArray(a)?a.map(h):h(a)}return i}var h=function(t){return null==t||"object"===typeof t?t:String(t)};function d(t){var e={};return t=t.trim().replace(/^(\?|#|&)/,""),t?(t.split("&").forEach(function(t){var n=t.replace(/\+/g," ").split("="),i=c(n.shift()),r=n.length>0?c(n.join("=")):null;void 0===e[i]?e[i]=r:Array.isArray(e[i])?e[i].push(r):e[i]=[e[i],r]}),e):e}function p(t){var e=t?Object.keys(t).map(function(e){var n=t[e];if(void 0===n)return"";if(null===n)return l(e);if(Array.isArray(n)){var i=[];return n.forEach(function(t){void 0!==t&&(null===t?i.push(l(e)):i.push(l(e)+"="+l(t)))}),i.join("&")}return l(e)+"="+l(n)}).filter(function(t){return t.length>0}).join("&"):null;return e?"?"+e:""}var f=/\/?$/;function m(t,e,n,i){var r=i&&i.options.stringifyQuery,o=e.query||{};try{o=v(o)}catch(s){}var a={name:e.name||t&&t.name,meta:t&&t.meta||{},path:e.path||"/",hash:e.hash||"",query:o,params:e.params||{},fullPath:b(e,r),matched:t?y(t):[]};return n&&(a.redirectedFrom=b(n,r)),Object.freeze(a)}function v(t){if(Array.isArray(t))return t.map(v);if(t&&"object"===typeof t){var e={};for(var n in t)e[n]=v(t[n]);return e}return t}var g=m(null,{path:"/"});function y(t){var e=[];while(t)e.unshift(t),t=t.parent;return e}function b(t,e){var n=t.path,i=t.query;void 0===i&&(i={});var r=t.hash;void 0===r&&(r="");var o=e||p;return(n||"/")+o(i)+r}function x(t,e,n){return e===g?t===e:!!e&&(t.path&&e.path?t.path.replace(f,"")===e.path.replace(f,"")&&(n||t.hash===e.hash&&w(t.query,e.query)):!(!t.name||!e.name)&&(t.name===e.name&&(n||t.hash===e.hash&&w(t.query,e.query)&&w(t.params,e.params))))}function w(t,e){if(void 0===t&&(t={}),void 0===e&&(e={}),!t||!e)return t===e;var n=Object.keys(t).sort(),i=Object.keys(e).sort();return n.length===i.length&&n.every(function(n,r){var o=t[n],a=i[r];if(a!==n)return!1;var s=e[n];return null==o||null==s?o===s:"object"===typeof o&&"object"===typeof s?w(o,s):String(o)===String(s)})}function _(t,e){return 0===t.path.replace(f,"/").indexOf(e.path.replace(f,"/"))&&(!e.hash||t.hash===e.hash)&&M(t.query,e.query)}function M(t,e){for(var n in e)if(!(n in t))return!1;return!0}function E(t){for(var e=0;e<t.matched.length;e++){var n=t.matched[e];for(var i in n.instances){var r=n.instances[i],o=n.enteredCbs[i];if(r&&o){delete n.enteredCbs[i];for(var a=0;a<o.length;a++)r._isBeingDestroyed||o[a](r)}}}}var S={name:"RouterView",functional:!0,props:{name:{type:String,default:"default"}},render:function(t,e){var n=e.props,i=e.children,o=e.parent,a=e.data;a.routerView=!0;var s=o.$createElement,l=n.name,c=o.$route,u=o._routerViewCache||(o._routerViewCache={}),h=0,d=!1;while(o&&o._routerRoot!==o){var p=o.$vnode?o.$vnode.data:{};p.routerView&&h++,p.keepAlive&&o._directInactive&&o._inactive&&(d=!0),o=o.$parent}if(a.routerViewDepth=h,d){var f=u[l],m=f&&f.component;return m?(f.configProps&&T(m,a,f.route,f.configProps),s(m,a,i)):s()}var v=c.matched[h],g=v&&v.components[l];if(!v||!g)return u[l]=null,s();u[l]={component:g},a.registerRouteInstance=function(t,e){var n=v.instances[l];(e&&n!==t||!e&&n===t)&&(v.instances[l]=e)},(a.hook||(a.hook={})).prepatch=function(t,e){v.instances[l]=e.componentInstance},a.hook.init=function(t){t.data.keepAlive&&t.componentInstance&&t.componentInstance!==v.instances[l]&&(v.instances[l]=t.componentInstance),E(c)};var y=v.props&&v.props[l];return y&&(r(u[l],{route:c,configProps:y}),T(g,a,c,y)),s(g,a,i)}};function T(t,e,n,i){var o=e.props=A(n,i);if(o){o=e.props=r({},o);var a=e.attrs=e.attrs||{};for(var s in o)t.props&&s in t.props||(a[s]=o[s],delete o[s])}}function A(t,e){switch(typeof e){case"undefined":return;case"object":return e;case"function":return e(t);case"boolean":return e?t.params:void 0;default:0}}function C(t,e,n){var i=t.charAt(0);if("/"===i)return t;if("?"===i||"#"===i)return e+t;var r=e.split("/");n&&r[r.length-1]||r.pop();for(var o=t.replace(/^\//,"").split("/"),a=0;a<o.length;a++){var s=o[a];".."===s?r.pop():"."!==s&&r.push(s)}return""!==r[0]&&r.unshift(""),r.join("/")}function L(t){var e="",n="",i=t.indexOf("#");i>=0&&(e=t.slice(i),t=t.slice(0,i));var r=t.indexOf("?");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{path:t,query:n,hash:e}}function P(t){return t.replace(/\/\//g,"/")}var O=Array.isArray||function(t){return"[object Array]"==Object.prototype.toString.call(t)},R=J,k=B,D=F,I=U,N=Z,z=new RegExp(["(\\\\.)","([\\/.])?(?:(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?|(\\*))"].join("|"),"g");function B(t,e){var n,i=[],r=0,o=0,a="",s=e&&e.delimiter||"/";while(null!=(n=z.exec(t))){var l=n[0],c=n[1],u=n.index;if(a+=t.slice(o,u),o=u+l.length,c)a+=c[1];else{var h=t[o],d=n[2],p=n[3],f=n[4],m=n[5],v=n[6],g=n[7];a&&(i.push(a),a="");var y=null!=d&&null!=h&&h!==d,b="+"===v||"*"===v,x="?"===v||"*"===v,w=n[2]||s,_=f||m;i.push({name:p||r++,prefix:d||"",delimiter:w,optional:x,repeat:b,partial:y,asterisk:!!g,pattern:_?G(_):g?".*":"[^"+V(w)+"]+?"})}}return o<t.length&&(a+=t.substr(o)),a&&i.push(a),i}function F(t,e){return U(B(t,e),e)}function j(t){return encodeURI(t).replace(/[\/?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function H(t){return encodeURI(t).replace(/[?#]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function U(t,e){for(var n=new Array(t.length),i=0;i<t.length;i++)"object"===typeof t[i]&&(n[i]=new RegExp("^(?:"+t[i].pattern+")$",$(e)));return function(e,i){for(var r="",o=e||{},a=i||{},s=a.pretty?j:encodeURIComponent,l=0;l<t.length;l++){var c=t[l];if("string"!==typeof c){var u,h=o[c.name];if(null==h){if(c.optional){c.partial&&(r+=c.prefix);continue}throw new TypeError('Expected "'+c.name+'" to be defined')}if(O(h)){if(!c.repeat)throw new TypeError('Expected "'+c.name+'" to not repeat, but received `'+JSON.stringify(h)+"`");if(0===h.length){if(c.optional)continue;throw new TypeError('Expected "'+c.name+'" to not be empty')}for(var d=0;d<h.length;d++){if(u=s(h[d]),!n[l].test(u))throw new TypeError('Expected all "'+c.name+'" to match "'+c.pattern+'", but received `'+JSON.stringify(u)+"`");r+=(0===d?c.prefix:c.delimiter)+u}}else{if(u=c.asterisk?H(h):s(h),!n[l].test(u))throw new TypeError('Expected "'+c.name+'" to match "'+c.pattern+'", but received "'+u+'"');r+=c.prefix+u}}else r+=c}return r}}function V(t){return t.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function G(t){return t.replace(/([=!:$\/()])/g,"\\$1")}function W(t,e){return t.keys=e,t}function $(t){return t&&t.sensitive?"":"i"}function q(t,e){var n=t.source.match(/\((?!\?)/g);if(n)for(var i=0;i<n.length;i++)e.push({name:i,prefix:null,delimiter:null,optional:!1,repeat:!1,partial:!1,asterisk:!1,pattern:null});return W(t,e)}function Y(t,e,n){for(var i=[],r=0;r<t.length;r++)i.push(J(t[r],e,n).source);var o=new RegExp("(?:"+i.join("|")+")",$(n));return W(o,e)}function X(t,e,n){return Z(B(t,n),e,n)}function Z(t,e,n){O(e)||(n=e||n,e=[]),n=n||{};for(var i=n.strict,r=!1!==n.end,o="",a=0;a<t.length;a++){var s=t[a];if("string"===typeof s)o+=V(s);else{var l=V(s.prefix),c="(?:"+s.pattern+")";e.push(s),s.repeat&&(c+="(?:"+l+c+")*"),c=s.optional?s.partial?l+"("+c+")?":"(?:"+l+"("+c+"))?":l+"("+c+")",o+=c}}var u=V(n.delimiter||"/"),h=o.slice(-u.length)===u;return i||(o=(h?o.slice(0,-u.length):o)+"(?:"+u+"(?=$))?"),o+=r?"$":i&&h?"":"(?="+u+"|$)",W(new RegExp("^"+o,$(n)),e)}function J(t,e,n){return O(e)||(n=e||n,e=[]),n=n||{},t instanceof RegExp?q(t,e):O(t)?Y(t,e,n):X(t,e,n)}R.parse=k,R.compile=D,R.tokensToFunction=I,R.tokensToRegExp=N;var K=Object.create(null);function Q(t,e,n){e=e||{};try{var i=K[t]||(K[t]=R.compile(t));return"string"===typeof e.pathMatch&&(e[0]=e.pathMatch),i(e,{pretty:!0})}catch(r){return""}finally{delete e[0]}}function tt(t,e,n,i){var o="string"===typeof t?{path:t}:t;if(o._normalized)return o;if(o.name){o=r({},t);var a=o.params;return a&&"object"===typeof a&&(o.params=r({},a)),o}if(!o.path&&o.params&&e){o=r({},o),o._normalized=!0;var s=r(r({},e.params),o.params);if(e.name)o.name=e.name,o.params=s;else if(e.matched.length){var l=e.matched[e.matched.length-1].path;o.path=Q(l,s,"path "+e.path)}else 0;return o}var c=L(o.path||""),h=e&&e.path||"/",d=c.path?C(c.path,h,n||o.append):h,p=u(c.query,o.query,i&&i.options.parseQuery),f=o.hash||c.hash;return f&&"#"!==f.charAt(0)&&(f="#"+f),{_normalized:!0,path:d,query:p,hash:f}}var et,nt=[String,Object],it=[String,Array],rt=function(){},ot={name:"RouterLink",props:{to:{type:nt,required:!0},tag:{type:String,default:"a"},custom:Boolean,exact:Boolean,exactPath:Boolean,append:Boolean,replace:Boolean,activeClass:String,exactActiveClass:String,ariaCurrentValue:{type:String,default:"page"},event:{type:it,default:"click"}},render:function(t){var e=this,n=this.$router,i=this.$route,o=n.resolve(this.to,i,this.append),a=o.location,s=o.route,l=o.href,c={},u=n.options.linkActiveClass,h=n.options.linkExactActiveClass,d=null==u?"router-link-active":u,p=null==h?"router-link-exact-active":h,f=null==this.activeClass?d:this.activeClass,v=null==this.exactActiveClass?p:this.exactActiveClass,g=s.redirectedFrom?m(null,tt(s.redirectedFrom),null,n):s;c[v]=x(i,g,this.exactPath),c[f]=this.exact||this.exactPath?c[v]:_(i,g);var y=c[v]?this.ariaCurrentValue:null,b=function(t){at(t)&&(e.replace?n.replace(a,rt):n.push(a,rt))},w={click:at};Array.isArray(this.event)?this.event.forEach(function(t){w[t]=b}):w[this.event]=b;var M={class:c},E=!this.$scopedSlots.$hasNormal&&this.$scopedSlots.default&&this.$scopedSlots.default({href:l,route:s,navigate:b,isActive:c[f],isExactActive:c[v]});if(E){if(1===E.length)return E[0];if(E.length>1||!E.length)return 0===E.length?t():t("span",{},E)}if("a"===this.tag)M.on=w,M.attrs={href:l,"aria-current":y};else{var S=st(this.$slots.default);if(S){S.isStatic=!1;var T=S.data=r({},S.data);for(var A in T.on=T.on||{},T.on){var C=T.on[A];A in w&&(T.on[A]=Array.isArray(C)?C:[C])}for(var L in w)L in T.on?T.on[L].push(w[L]):T.on[L]=b;var P=S.data.attrs=r({},S.data.attrs);P.href=l,P["aria-current"]=y}else M.on=w}return t(this.tag,M,this.$slots.default)}};function at(t){if(!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)&&!t.defaultPrevented&&(void 0===t.button||0===t.button)){if(t.currentTarget&&t.currentTarget.getAttribute){var e=t.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(e))return}return t.preventDefault&&t.preventDefault(),!0}}function st(t){if(t)for(var e,n=0;n<t.length;n++){if(e=t[n],"a"===e.tag)return e;if(e.children&&(e=st(e.children)))return e}}function lt(t){if(!lt.installed||et!==t){lt.installed=!0,et=t;var e=function(t){return void 0!==t},n=function(t,n){var i=t.$options._parentVnode;e(i)&&e(i=i.data)&&e(i=i.registerRouteInstance)&&i(t,n)};t.mixin({beforeCreate:function(){e(this.$options.router)?(this._routerRoot=this,this._router=this.$options.router,this._router.init(this),t.util.defineReactive(this,"_route",this._router.history.current)):this._routerRoot=this.$parent&&this.$parent._routerRoot||this,n(this,this)},destroyed:function(){n(this)}}),Object.defineProperty(t.prototype,"$router",{get:function(){return this._routerRoot._router}}),Object.defineProperty(t.prototype,"$route",{get:function(){return this._routerRoot._route}}),t.component("RouterView",S),t.component("RouterLink",ot);var i=t.config.optionMergeStrategies;i.beforeRouteEnter=i.beforeRouteLeave=i.beforeRouteUpdate=i.created}}var ct="undefined"!==typeof window;function ut(t,e,n,i,r){var o=e||[],a=n||Object.create(null),s=i||Object.create(null);t.forEach(function(t){ht(o,a,s,t,r)});for(var l=0,c=o.length;l<c;l++)"*"===o[l]&&(o.push(o.splice(l,1)[0]),c--,l--);return{pathList:o,pathMap:a,nameMap:s}}function ht(t,e,n,i,r,o){var a=i.path,s=i.name;var l=i.pathToRegexpOptions||{},c=pt(a,r,l.strict);"boolean"===typeof i.caseSensitive&&(l.sensitive=i.caseSensitive);var u={path:c,regex:dt(c,l),components:i.components||{default:i.component},alias:i.alias?"string"===typeof i.alias?[i.alias]:i.alias:[],instances:{},enteredCbs:{},name:s,parent:r,matchAs:o,redirect:i.redirect,beforeEnter:i.beforeEnter,meta:i.meta||{},props:null==i.props?{}:i.components?i.props:{default:i.props}};if(i.children&&i.children.forEach(function(i){var r=o?P(o+"/"+i.path):void 0;ht(t,e,n,i,u,r)}),e[u.path]||(t.push(u.path),e[u.path]=u),void 0!==i.alias)for(var h=Array.isArray(i.alias)?i.alias:[i.alias],d=0;d<h.length;++d){var p=h[d];0;var f={path:p,children:i.children};ht(t,e,n,f,r,u.path||"/")}s&&(n[s]||(n[s]=u))}function dt(t,e){var n=R(t,[],e);return n}function pt(t,e,n){return n||(t=t.replace(/\/$/,"")),"/"===t[0]?t:null==e?t:P(e.path+"/"+t)}function ft(t,e){var n=ut(t),i=n.pathList,r=n.pathMap,o=n.nameMap;function a(t){ut(t,i,r,o)}function s(t,e){var n="object"!==typeof t?o[t]:void 0;ut([e||t],i,r,o,n),n&&n.alias.length&&ut(n.alias.map(function(t){return{path:t,children:[e]}}),i,r,o,n)}function l(){return i.map(function(t){return r[t]})}function c(t,n,a){var s=tt(t,n,!1,e),l=s.name;if(l){var c=o[l];if(!c)return d(null,s);var u=c.regex.keys.filter(function(t){return!t.optional}).map(function(t){return t.name});if("object"!==typeof s.params&&(s.params={}),n&&"object"===typeof n.params)for(var h in n.params)!(h in s.params)&&u.indexOf(h)>-1&&(s.params[h]=n.params[h]);return s.path=Q(c.path,s.params,'named route "'+l+'"'),d(c,s,a)}if(s.path){s.params={};for(var p=0;p<i.length;p++){var f=i[p],m=r[f];if(mt(m.regex,s.path,s.params))return d(m,s,a)}}return d(null,s)}function u(t,n){var i=t.redirect,r="function"===typeof i?i(m(t,n,null,e)):i;if("string"===typeof r&&(r={path:r}),!r||"object"!==typeof r)return d(null,n);var a=r,s=a.name,l=a.path,u=n.query,h=n.hash,p=n.params;if(u=a.hasOwnProperty("query")?a.query:u,h=a.hasOwnProperty("hash")?a.hash:h,p=a.hasOwnProperty("params")?a.params:p,s){o[s];return c({_normalized:!0,name:s,query:u,hash:h,params:p},void 0,n)}if(l){var f=vt(l,t),v=Q(f,p,'redirect route with path "'+f+'"');return c({_normalized:!0,path:v,query:u,hash:h},void 0,n)}return d(null,n)}function h(t,e,n){var i=Q(n,e.params,'aliased route with path "'+n+'"'),r=c({_normalized:!0,path:i});if(r){var o=r.matched,a=o[o.length-1];return e.params=r.params,d(a,e)}return d(null,e)}function d(t,n,i){return t&&t.redirect?u(t,i||n):t&&t.matchAs?h(t,n,t.matchAs):m(t,n,i,e)}return{match:c,addRoute:s,getRoutes:l,addRoutes:a}}function mt(t,e,n){var i=e.match(t);if(!i)return!1;if(!n)return!0;for(var r=1,o=i.length;r<o;++r){var a=t.keys[r-1];a&&(n[a.name||"pathMatch"]="string"===typeof i[r]?c(i[r]):i[r])}return!0}function vt(t,e){return C(t,e.parent?e.parent.path:"/",!0)}var gt=ct&&window.performance&&window.performance.now?window.performance:Date;function yt(){return gt.now().toFixed(3)}var bt=yt();function xt(){return bt}function wt(t){return bt=t}var _t=Object.create(null);function Mt(){"scrollRestoration"in window.history&&(window.history.scrollRestoration="manual");var t=window.location.protocol+"//"+window.location.host,e=window.location.href.replace(t,""),n=r({},window.history.state);return n.key=xt(),window.history.replaceState(n,"",e),window.addEventListener("popstate",Tt),function(){window.removeEventListener("popstate",Tt)}}function Et(t,e,n,i){if(t.app){var r=t.options.scrollBehavior;r&&t.app.$nextTick(function(){var o=At(),a=r.call(t,e,n,i?o:null);a&&("function"===typeof a.then?a.then(function(t){Dt(t,o)}).catch(function(t){0}):Dt(a,o))})}}function St(){var t=xt();t&&(_t[t]={x:window.pageXOffset,y:window.pageYOffset})}function Tt(t){St(),t.state&&t.state.key&&wt(t.state.key)}function At(){var t=xt();if(t)return _t[t]}function Ct(t,e){var n=document.documentElement,i=n.getBoundingClientRect(),r=t.getBoundingClientRect();return{x:r.left-i.left-e.x,y:r.top-i.top-e.y}}function Lt(t){return Rt(t.x)||Rt(t.y)}function Pt(t){return{x:Rt(t.x)?t.x:window.pageXOffset,y:Rt(t.y)?t.y:window.pageYOffset}}function Ot(t){return{x:Rt(t.x)?t.x:0,y:Rt(t.y)?t.y:0}}function Rt(t){return"number"===typeof t}var kt=/^#\d/;function Dt(t,e){var n="object"===typeof t;if(n&&"string"===typeof t.selector){var i=kt.test(t.selector)?document.getElementById(t.selector.slice(1)):document.querySelector(t.selector);if(i){var r=t.offset&&"object"===typeof t.offset?t.offset:{};r=Ot(r),e=Ct(i,r)}else Lt(t)&&(e=Pt(t))}else n&&Lt(t)&&(e=Pt(t));e&&("scrollBehavior"in document.documentElement.style?window.scrollTo({left:e.x,top:e.y,behavior:t.behavior}):window.scrollTo(e.x,e.y))}var It=ct&&function(){var t=window.navigator.userAgent;return(-1===t.indexOf("Android 2.")&&-1===t.indexOf("Android 4.0")||-1===t.indexOf("Mobile Safari")||-1!==t.indexOf("Chrome")||-1!==t.indexOf("Windows Phone"))&&(window.history&&"function"===typeof window.history.pushState)}();function Nt(t,e){St();var n=window.history;try{if(e){var i=r({},n.state);i.key=xt(),n.replaceState(i,"",t)}else n.pushState({key:wt(yt())},"",t)}catch(o){window.location[e?"replace":"assign"](t)}}function zt(t){Nt(t,!0)}function Bt(t,e,n){var i=function(r){r>=t.length?n():t[r]?e(t[r],function(){i(r+1)}):i(r+1)};i(0)}var Ft={redirected:2,aborted:4,cancelled:8,duplicated:16};function jt(t,e){return Gt(t,e,Ft.redirected,'Redirected when going from "'+t.fullPath+'" to "'+$t(e)+'" via a navigation guard.')}function Ht(t,e){var n=Gt(t,e,Ft.duplicated,'Avoided redundant navigation to current location: "'+t.fullPath+'".');return n.name="NavigationDuplicated",n}function Ut(t,e){return Gt(t,e,Ft.cancelled,'Navigation cancelled from "'+t.fullPath+'" to "'+e.fullPath+'" with a new navigation.')}function Vt(t,e){return Gt(t,e,Ft.aborted,'Navigation aborted from "'+t.fullPath+'" to "'+e.fullPath+'" via a navigation guard.')}function Gt(t,e,n,i){var r=new Error(i);return r._isRouter=!0,r.from=t,r.to=e,r.type=n,r}var Wt=["params","query","hash"];function $t(t){if("string"===typeof t)return t;if("path"in t)return t.path;var e={};return Wt.forEach(function(n){n in t&&(e[n]=t[n])}),JSON.stringify(e,null,2)}function qt(t){return Object.prototype.toString.call(t).indexOf("Error")>-1}function Yt(t,e){return qt(t)&&t._isRouter&&(null==e||t.type===e)}function Xt(t){return function(e,n,i){var r=!1,o=0,a=null;Zt(t,function(t,e,n,s){if("function"===typeof t&&void 0===t.cid){r=!0,o++;var l,c=te(function(e){Qt(e)&&(e=e.default),t.resolved="function"===typeof e?e:et.extend(e),n.components[s]=e,o--,o<=0&&i()}),u=te(function(t){var e="Failed to resolve async component "+s+": "+t;a||(a=qt(t)?t:new Error(e),i(a))});try{l=t(c,u)}catch(d){u(d)}if(l)if("function"===typeof l.then)l.then(c,u);else{var h=l.component;h&&"function"===typeof h.then&&h.then(c,u)}}}),r||i()}}function Zt(t,e){return Jt(t.map(function(t){return Object.keys(t.components).map(function(n){return e(t.components[n],t.instances[n],t,n)})}))}function Jt(t){return Array.prototype.concat.apply([],t)}var Kt="function"===typeof Symbol&&"symbol"===typeof Symbol.toStringTag;function Qt(t){return t.__esModule||Kt&&"Module"===t[Symbol.toStringTag]}function te(t){var e=!1;return function(){var n=[],i=arguments.length;while(i--)n[i]=arguments[i];if(!e)return e=!0,t.apply(this,n)}}var ee=function(t,e){this.router=t,this.base=ne(e),this.current=g,this.pending=null,this.ready=!1,this.readyCbs=[],this.readyErrorCbs=[],this.errorCbs=[],this.listeners=[]};function ne(t){if(!t)if(ct){var e=document.querySelector("base");t=e&&e.getAttribute("href")||"/",t=t.replace(/^https?:\/\/[^\/]+/,"")}else t="/";return"/"!==t.charAt(0)&&(t="/"+t),t.replace(/\/$/,"")}function ie(t,e){var n,i=Math.max(t.length,e.length);for(n=0;n<i;n++)if(t[n]!==e[n])break;return{updated:e.slice(0,n),activated:e.slice(n),deactivated:t.slice(n)}}function re(t,e,n,i){var r=Zt(t,function(t,i,r,o){var a=oe(t,e);if(a)return Array.isArray(a)?a.map(function(t){return n(t,i,r,o)}):n(a,i,r,o)});return Jt(i?r.reverse():r)}function oe(t,e){return"function"!==typeof t&&(t=et.extend(t)),t.options[e]}function ae(t){return re(t,"beforeRouteLeave",le,!0)}function se(t){return re(t,"beforeRouteUpdate",le)}function le(t,e){if(e)return function(){return t.apply(e,arguments)}}function ce(t){return re(t,"beforeRouteEnter",function(t,e,n,i){return ue(t,n,i)})}function ue(t,e,n){return function(i,r,o){return t(i,r,function(t){"function"===typeof t&&(e.enteredCbs[n]||(e.enteredCbs[n]=[]),e.enteredCbs[n].push(t)),o(t)})}}ee.prototype.listen=function(t){this.cb=t},ee.prototype.onReady=function(t,e){this.ready?t():(this.readyCbs.push(t),e&&this.readyErrorCbs.push(e))},ee.prototype.onError=function(t){this.errorCbs.push(t)},ee.prototype.transitionTo=function(t,e,n){var i,r=this;try{i=this.router.match(t,this.current)}catch(a){throw this.errorCbs.forEach(function(t){t(a)}),a}var o=this.current;this.confirmTransition(i,function(){r.updateRoute(i),e&&e(i),r.ensureURL(),r.router.afterHooks.forEach(function(t){t&&t(i,o)}),r.ready||(r.ready=!0,r.readyCbs.forEach(function(t){t(i)}))},function(t){n&&n(t),t&&!r.ready&&(Yt(t,Ft.redirected)&&o===g||(r.ready=!0,r.readyErrorCbs.forEach(function(e){e(t)})))})},ee.prototype.confirmTransition=function(t,e,n){var r=this,o=this.current;this.pending=t;var a=function(t){!Yt(t)&&qt(t)&&(r.errorCbs.length?r.errorCbs.forEach(function(e){e(t)}):(i(!1,"uncaught error during route navigation:"),console.error(t))),n&&n(t)},s=t.matched.length-1,l=o.matched.length-1;if(x(t,o)&&s===l&&t.matched[s]===o.matched[l])return this.ensureURL(),a(Ht(o,t));var c=ie(this.current.matched,t.matched),u=c.updated,h=c.deactivated,d=c.activated,p=[].concat(ae(h),this.router.beforeHooks,se(u),d.map(function(t){return t.beforeEnter}),Xt(d)),f=function(e,n){if(r.pending!==t)return a(Ut(o,t));try{e(t,o,function(e){!1===e?(r.ensureURL(!0),a(Vt(o,t))):qt(e)?(r.ensureURL(!0),a(e)):"string"===typeof e||"object"===typeof e&&("string"===typeof e.path||"string"===typeof e.name)?(a(jt(o,t)),"object"===typeof e&&e.replace?r.replace(e):r.push(e)):n(e)})}catch(i){a(i)}};Bt(p,f,function(){var n=ce(d),i=n.concat(r.router.resolveHooks);Bt(i,f,function(){if(r.pending!==t)return a(Ut(o,t));r.pending=null,e(t),r.router.app&&r.router.app.$nextTick(function(){E(t)})})})},ee.prototype.updateRoute=function(t){this.current=t,this.cb&&this.cb(t)},ee.prototype.setupListeners=function(){},ee.prototype.teardown=function(){this.listeners.forEach(function(t){t()}),this.listeners=[],this.current=g,this.pending=null};var he=function(t){function e(e,n){t.call(this,e,n),this._startLocation=de(this.base)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,i=It&&n;i&&this.listeners.push(Mt());var r=function(){var n=t.current,r=de(t.base);t.current===g&&r===t._startLocation||t.transitionTo(r,function(t){i&&Et(e,t,n,!0)})};window.addEventListener("popstate",r),this.listeners.push(function(){window.removeEventListener("popstate",r)})}},e.prototype.go=function(t){window.history.go(t)},e.prototype.push=function(t,e,n){var i=this,r=this,o=r.current;this.transitionTo(t,function(t){Nt(P(i.base+t.fullPath)),Et(i.router,t,o,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this,r=this,o=r.current;this.transitionTo(t,function(t){zt(P(i.base+t.fullPath)),Et(i.router,t,o,!1),e&&e(t)},n)},e.prototype.ensureURL=function(t){if(de(this.base)!==this.current.fullPath){var e=P(this.base+this.current.fullPath);t?Nt(e):zt(e)}},e.prototype.getCurrentLocation=function(){return de(this.base)},e}(ee);function de(t){var e=window.location.pathname,n=e.toLowerCase(),i=t.toLowerCase();return!t||n!==i&&0!==n.indexOf(P(i+"/"))||(e=e.slice(t.length)),(e||"/")+window.location.search+window.location.hash}var pe=function(t){function e(e,n,i){t.call(this,e,n),i&&fe(this.base)||me()}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.setupListeners=function(){var t=this;if(!(this.listeners.length>0)){var e=this.router,n=e.options.scrollBehavior,i=It&&n;i&&this.listeners.push(Mt());var r=function(){var e=t.current;me()&&t.transitionTo(ve(),function(n){i&&Et(t.router,n,e,!0),It||be(n.fullPath)})},o=It?"popstate":"hashchange";window.addEventListener(o,r),this.listeners.push(function(){window.removeEventListener(o,r)})}},e.prototype.push=function(t,e,n){var i=this,r=this,o=r.current;this.transitionTo(t,function(t){ye(t.fullPath),Et(i.router,t,o,!1),e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this,r=this,o=r.current;this.transitionTo(t,function(t){be(t.fullPath),Et(i.router,t,o,!1),e&&e(t)},n)},e.prototype.go=function(t){window.history.go(t)},e.prototype.ensureURL=function(t){var e=this.current.fullPath;ve()!==e&&(t?ye(e):be(e))},e.prototype.getCurrentLocation=function(){return ve()},e}(ee);function fe(t){var e=de(t);if(!/^\/#/.test(e))return window.location.replace(P(t+"/#"+e)),!0}function me(){var t=ve();return"/"===t.charAt(0)||(be("/"+t),!1)}function ve(){var t=window.location.href,e=t.indexOf("#");return e<0?"":(t=t.slice(e+1),t)}function ge(t){var e=window.location.href,n=e.indexOf("#"),i=n>=0?e.slice(0,n):e;return i+"#"+t}function ye(t){It?Nt(ge(t)):window.location.hash=t}function be(t){It?zt(ge(t)):window.location.replace(ge(t))}var xe=function(t){function e(e,n){t.call(this,e,n),this.stack=[],this.index=-1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.push=function(t,e,n){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index+1).concat(t),i.index++,e&&e(t)},n)},e.prototype.replace=function(t,e,n){var i=this;this.transitionTo(t,function(t){i.stack=i.stack.slice(0,i.index).concat(t),e&&e(t)},n)},e.prototype.go=function(t){var e=this,n=this.index+t;if(!(n<0||n>=this.stack.length)){var i=this.stack[n];this.confirmTransition(i,function(){var t=e.current;e.index=n,e.updateRoute(i),e.router.afterHooks.forEach(function(e){e&&e(i,t)})},function(t){Yt(t,Ft.duplicated)&&(e.index=n)})}},e.prototype.getCurrentLocation=function(){var t=this.stack[this.stack.length-1];return t?t.fullPath:"/"},e.prototype.ensureURL=function(){},e}(ee),we=function(t){void 0===t&&(t={}),this.app=null,this.apps=[],this.options=t,this.beforeHooks=[],this.resolveHooks=[],this.afterHooks=[],this.matcher=ft(t.routes||[],this);var e=t.mode||"hash";switch(this.fallback="history"===e&&!It&&!1!==t.fallback,this.fallback&&(e="hash"),ct||(e="abstract"),this.mode=e,e){case"history":this.history=new he(this,t.base);break;case"hash":this.history=new pe(this,t.base,this.fallback);break;case"abstract":this.history=new xe(this,t.base);break;default:0}},_e={currentRoute:{configurable:!0}};function Me(t,e){return t.push(e),function(){var n=t.indexOf(e);n>-1&&t.splice(n,1)}}function Ee(t,e,n){var i="hash"===n?"#"+e:e;return t?P(t+"/"+i):i}we.prototype.match=function(t,e,n){return this.matcher.match(t,e,n)},_e.currentRoute.get=function(){return this.history&&this.history.current},we.prototype.init=function(t){var e=this;if(this.apps.push(t),t.$once("hook:destroyed",function(){var n=e.apps.indexOf(t);n>-1&&e.apps.splice(n,1),e.app===t&&(e.app=e.apps[0]||null),e.app||e.history.teardown()}),!this.app){this.app=t;var n=this.history;if(n instanceof he||n instanceof pe){var i=function(t){var i=n.current,r=e.options.scrollBehavior,o=It&&r;o&&"fullPath"in t&&Et(e,t,i,!1)},r=function(t){n.setupListeners(),i(t)};n.transitionTo(n.getCurrentLocation(),r,r)}n.listen(function(t){e.apps.forEach(function(e){e._route=t})})}},we.prototype.beforeEach=function(t){return Me(this.beforeHooks,t)},we.prototype.beforeResolve=function(t){return Me(this.resolveHooks,t)},we.prototype.afterEach=function(t){return Me(this.afterHooks,t)},we.prototype.onReady=function(t,e){this.history.onReady(t,e)},we.prototype.onError=function(t){this.history.onError(t)},we.prototype.push=function(t,e,n){var i=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise(function(e,n){i.history.push(t,e,n)});this.history.push(t,e,n)},we.prototype.replace=function(t,e,n){var i=this;if(!e&&!n&&"undefined"!==typeof Promise)return new Promise(function(e,n){i.history.replace(t,e,n)});this.history.replace(t,e,n)},we.prototype.go=function(t){this.history.go(t)},we.prototype.back=function(){this.go(-1)},we.prototype.forward=function(){this.go(1)},we.prototype.getMatchedComponents=function(t){var e=t?t.matched?t:this.resolve(t).route:this.currentRoute;return e?[].concat.apply([],e.matched.map(function(t){return Object.keys(t.components).map(function(e){return t.components[e]})})):[]},we.prototype.resolve=function(t,e,n){e=e||this.history.current;var i=tt(t,e,n,this),r=this.match(i,e),o=r.redirectedFrom||r.fullPath,a=this.history.base,s=Ee(a,o,this.mode);return{location:i,route:r,href:s,normalizedTo:i,resolved:r}},we.prototype.getRoutes=function(){return this.matcher.getRoutes()},we.prototype.addRoute=function(t,e){this.matcher.addRoute(t,e),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},we.prototype.addRoutes=function(t){this.matcher.addRoutes(t),this.history.current!==g&&this.history.transitionTo(this.history.getCurrentLocation())},Object.defineProperties(we.prototype,_e),we.install=lt,we.version="3.5.2",we.isNavigationFailure=Yt,we.NavigationFailureType=Ft,we.START_LOCATION=g,ct&&window.Vue&&window.Vue.use(we),e["a"]=we},"8df4":function(t,e,n){"use strict";var i=n("7a77");function r(t){if("function"!==typeof t)throw new TypeError("executor must be a function.");var e;this.promise=new Promise(function(t){e=t});var n=this;t(function(t){n.reason||(n.reason=new i(t),e(n.reason))})}r.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},r.source=function(){var t,e=new r(function(e){t=e});return{token:e,cancel:t}},t.exports=r},"8e60":function(t,e,n){t.exports=!n("294c")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},"8eb7":function(t,e){var n,i,r,o,a,s,l,c,u,h,d,p,f,m,v,g=!1;function y(){if(!g){g=!0;var t=navigator.userAgent,e=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(t),y=/(Mac OS X)|(Windows)|(Linux)/.exec(t);if(p=/\b(iPhone|iP[ao]d)/.exec(t),f=/\b(iP[ao]d)/.exec(t),h=/Android/i.exec(t),m=/FBAN\/\w+;/i.exec(t),v=/Mobile/i.exec(t),d=!!/Win64/.exec(t),e){n=e[1]?parseFloat(e[1]):e[5]?parseFloat(e[5]):NaN,n&&document&&document.documentMode&&(n=document.documentMode);var b=/(?:Trident\/(\d+.\d+))/.exec(t);s=b?parseFloat(b[1])+4:n,i=e[2]?parseFloat(e[2]):NaN,r=e[3]?parseFloat(e[3]):NaN,o=e[4]?parseFloat(e[4]):NaN,o?(e=/(?:Chrome\/(\d+\.\d+))/.exec(t),a=e&&e[1]?parseFloat(e[1]):NaN):a=NaN}else n=i=r=a=o=NaN;if(y){if(y[1]){var x=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(t);l=!x||parseFloat(x[1].replace("_","."))}else l=!1;c=!!y[2],u=!!y[3]}else l=c=u=!1}}var b={ie:function(){return y()||n},ieCompatibilityMode:function(){return y()||s>n},ie64:function(){return b.ie()&&d},firefox:function(){return y()||i},opera:function(){return y()||r},webkit:function(){return y()||o},safari:function(){return b.webkit()},chrome:function(){return y()||a},windows:function(){return y()||c},osx:function(){return y()||l},linux:function(){return y()||u},iphone:function(){return y()||p},mobile:function(){return y()||p||f||h||v},nativeApp:function(){return y()||m},android:function(){return y()||h},ipad:function(){return y()||f}};t.exports=b},"8f60":function(t,e,n){"use strict";var i=n("a159"),r=n("aebd"),o=n("45f2"),a={};n("35e8")(a,n("5168")("iterator"),function(){return this}),t.exports=function(t,e,n){t.prototype=i(a,{next:r(1,n)}),o(t,e+" Iterator")}},9003:function(t,e,n){var i=n("6b4c");t.exports=Array.isArray||function(t){return"Array"==i(t)}},9093:function(t,e,n){var i=n("ce10"),r=n("e11e").concat("length","prototype");e.f=Object.getOwnPropertyNames||function(t){return i(t,r)}},9138:function(t,e,n){t.exports=n("35e8")},"92fa":function(t,e){var n=/^(attrs|props|on|nativeOn|class|style|hook)$/;function i(t,e){return function(){t&&t.apply(this,arguments),e&&e.apply(this,arguments)}}t.exports=function(t){return t.reduce(function(t,e){var r,o,a,s,l;for(a in e)if(r=t[a],o=e[a],r&&n.test(a))if("class"===a&&("string"===typeof r&&(l=r,t[a]=r={},r[l]=!0),"string"===typeof o&&(l=o,e[a]=o={},o[l]=!0)),"on"===a||"nativeOn"===a||"hook"===a)for(s in o)r[s]=i(r[s],o[s]);else if(Array.isArray(r))t[a]=r.concat(o);else if(Array.isArray(o))t[a]=[r].concat(o);else for(s in o)r[s]=o[s];else t[a]=e[a];return t},{})}},9306:function(t,e,n){"use strict";var i=n("8e60"),r=n("c3a1"),o=n("9aa9"),a=n("355d"),s=n("241e"),l=n("335c"),c=Object.assign;t.exports=!c||n("294c")(function(){var t={},e={},n=Symbol(),i="abcdefghijklmnopqrst";return t[n]=7,i.split("").forEach(function(t){e[t]=t}),7!=c({},t)[n]||Object.keys(c({},e)).join("")!=i})?function(t,e){var n=s(t),c=arguments.length,u=1,h=o.f,d=a.f;while(c>u){var p,f=l(arguments[u++]),m=h?r(f).concat(h(f)):r(f),v=m.length,g=0;while(v>g)p=m[g++],i&&!d.call(f,p)||(n[p]=f[p])}return n}:c},9619:function(t,e,n){var i=n("597f"),r=n("0e15");t.exports={throttle:i,debounce:r}},"9aa9":function(t,e){e.f=Object.getOwnPropertySymbols},"9b43":function(t,e,n){var i=n("d8e8");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},"9c6c":function(t,e,n){var i=n("2b4c")("unscopables"),r=Array.prototype;void 0==r[i]&&n("32e9")(r,i,{}),t.exports=function(t){r[i][t]=!0}},"9c80":function(t,e){t.exports=function(t){try{return{e:!1,v:t()}}catch(e){return{e:!0,v:e}}}},"9d7e":function(t,e,n){"use strict";e.__esModule=!0;var i="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};e.default=function(t){function e(t){for(var e=arguments.length,n=Array(e>1?e-1:0),a=1;a<e;a++)n[a-1]=arguments[a];return 1===n.length&&"object"===i(n[0])&&(n=n[0]),n&&n.hasOwnProperty||(n={}),t.replace(o,function(e,i,o,a){var s=void 0;return"{"===t[a-1]&&"}"===t[a+e.length]?o:(s=(0,r.hasOwn)(n,o)?n[o]:null,null===s||void 0===s?"":s)})}return e};var r=n("8122"),o=/(%|)\{([0-9a-zA-Z_]+)\}/g},"9def":function(t,e,n){var i=n("4588"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},"9e1e":function(t,e,n){t.exports=!n("79e5")(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},a159:function(t,e,n){var i=n("e4ae"),r=n("7e90"),o=n("1691"),a=n("5559")("IE_PROTO"),s=function(){},l="prototype",c=function(){var t,e=n("1ec9")("iframe"),i=o.length,r="<",a=">";e.style.display="none",n("32fc").appendChild(e),e.src="javascript:",t=e.contentWindow.document,t.open(),t.write(r+"script"+a+"document.F=Object"+r+"/script"+a),t.close(),c=t.F;while(i--)delete c[l][o[i]];return c()};t.exports=Object.create||function(t,e){var n;return null!==t?(s[l]=i(t),n=new s,s[l]=null,n[a]=t):n=c(),void 0===e?n:r(n,e)}},a15e:function(t,e,n){"use strict";n.r(e);var i=n("41b2"),r=n.n(i),o=n("1098"),a=n.n(o),s=/%[sdj%]/g,l=function(){};function c(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var i=1,r=e[0],o=e.length;if("function"===typeof r)return r.apply(null,e.slice(1));if("string"===typeof r){for(var a=String(r).replace(s,function(t){if("%%"===t)return"%";if(i>=o)return t;switch(t){case"%s":return String(e[i++]);case"%d":return Number(e[i++]);case"%j":try{return JSON.stringify(e[i++])}catch(n){return"[Circular]"}break;default:return t}}),l=e[i];i<o;l=e[++i])a+=" "+l;return a}return r}function u(t){return"string"===t||"url"===t||"hex"===t||"email"===t||"pattern"===t}function h(t,e){return void 0===t||null===t||(!("array"!==e||!Array.isArray(t)||t.length)||!(!u(e)||"string"!==typeof t||t))}function d(t,e,n){var i=[],r=0,o=t.length;function a(t){i.push.apply(i,t),r++,r===o&&n(i)}t.forEach(function(t){e(t,a)})}function p(t,e,n){var i=0,r=t.length;function o(a){if(a&&a.length)n(a);else{var s=i;i+=1,s<r?e(t[s],o):n([])}}o([])}function f(t){var e=[];return Object.keys(t).forEach(function(n){e.push.apply(e,t[n])}),e}function m(t,e,n,i){if(e.first){var r=f(t);return p(r,n,i)}var o=e.firstFields||[];!0===o&&(o=Object.keys(t));var a=Object.keys(t),s=a.length,l=0,c=[],u=function(t){c.push.apply(c,t),l++,l===s&&i(c)};a.forEach(function(e){var i=t[e];-1!==o.indexOf(e)?p(i,n,u):d(i,n,u)})}function v(t){return function(e){return e&&e.message?(e.field=e.field||t.fullField,e):{message:e,field:e.field||t.fullField}}}function g(t,e){if(e)for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];"object"===("undefined"===typeof i?"undefined":a()(i))&&"object"===a()(t[n])?t[n]=r()({},t[n],i):t[n]=i}return t}function y(t,e,n,i,r,o){!t.required||n.hasOwnProperty(t.field)&&!h(e,o||t.type)||i.push(c(r.messages.required,t.fullField))}var b=y;function x(t,e,n,i,r){(/^\s+$/.test(e)||""===e)&&i.push(c(r.messages.whitespace,t.fullField))}var w=x,_={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,url:new RegExp("^(?!mailto:)(?:(?:http|https|ftp)://|//)(?:\\S+(?::\\S*)?@)?(?:(?:(?:[1-9]\\d?|1\\d\\d|2[01]\\d|22[0-3])(?:\\.(?:1?\\d{1,2}|2[0-4]\\d|25[0-5])){2}(?:\\.(?:[0-9]\\d?|1\\d\\d|2[0-4]\\d|25[0-4]))|(?:(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)(?:\\.(?:[a-z\\u00a1-\\uffff0-9]+-?)*[a-z\\u00a1-\\uffff0-9]+)*(?:\\.(?:[a-z\\u00a1-\\uffff]{2,})))|localhost)(?::\\d{2,5})?(?:(/|\\?|#)[^\\s]*)?$","i"),hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},M={integer:function(t){return M.number(t)&&parseInt(t,10)===t},float:function(t){return M.number(t)&&!M.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch(e){return!1}},date:function(t){return"function"===typeof t.getTime&&"function"===typeof t.getMonth&&"function"===typeof t.getYear},number:function(t){return!isNaN(t)&&"number"===typeof t},object:function(t){return"object"===("undefined"===typeof t?"undefined":a()(t))&&!M.array(t)},method:function(t){return"function"===typeof t},email:function(t){return"string"===typeof t&&!!t.match(_.email)&&t.length<255},url:function(t){return"string"===typeof t&&!!t.match(_.url)},hex:function(t){return"string"===typeof t&&!!t.match(_.hex)}};function E(t,e,n,i,r){if(t.required&&void 0===e)b(t,e,n,i,r);else{var o=["integer","float","array","regexp","object","method","email","number","date","url","hex"],s=t.type;o.indexOf(s)>-1?M[s](e)||i.push(c(r.messages.types[s],t.fullField,t.type)):s&&("undefined"===typeof e?"undefined":a()(e))!==t.type&&i.push(c(r.messages.types[s],t.fullField,t.type))}}var S=E;function T(t,e,n,i,r){var o="number"===typeof t.len,a="number"===typeof t.min,s="number"===typeof t.max,l=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,u=e,h=null,d="number"===typeof e,p="string"===typeof e,f=Array.isArray(e);if(d?h="number":p?h="string":f&&(h="array"),!h)return!1;f&&(u=e.length),p&&(u=e.replace(l,"_").length),o?u!==t.len&&i.push(c(r.messages[h].len,t.fullField,t.len)):a&&!s&&u<t.min?i.push(c(r.messages[h].min,t.fullField,t.min)):s&&!a&&u>t.max?i.push(c(r.messages[h].max,t.fullField,t.max)):a&&s&&(u<t.min||u>t.max)&&i.push(c(r.messages[h].range,t.fullField,t.min,t.max))}var A=T,C="enum";function L(t,e,n,i,r){t[C]=Array.isArray(t[C])?t[C]:[],-1===t[C].indexOf(e)&&i.push(c(r.messages[C],t.fullField,t[C].join(", ")))}var P=L;function O(t,e,n,i,r){if(t.pattern)if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(e)||i.push(c(r.messages.pattern.mismatch,t.fullField,e,t.pattern));else if("string"===typeof t.pattern){var o=new RegExp(t.pattern);o.test(e)||i.push(c(r.messages.pattern.mismatch,t.fullField,e,t.pattern))}}var R=O,k={required:b,whitespace:w,type:S,range:A,enum:P,pattern:R};function D(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e,"string")&&!t.required)return n();k.required(t,e,i,o,r,"string"),h(e,"string")||(k.type(t,e,i,o,r),k.range(t,e,i,o,r),k.pattern(t,e,i,o,r),!0===t.whitespace&&k.whitespace(t,e,i,o,r))}n(o)}var I=D;function N(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),void 0!==e&&k.type(t,e,i,o,r)}n(o)}var z=N;function B(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),void 0!==e&&(k.type(t,e,i,o,r),k.range(t,e,i,o,r))}n(o)}var F=B;function j(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),void 0!==e&&k.type(t,e,i,o,r)}n(o)}var H=j;function U(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),h(e)||k.type(t,e,i,o,r)}n(o)}var V=U;function G(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),void 0!==e&&(k.type(t,e,i,o,r),k.range(t,e,i,o,r))}n(o)}var W=G;function $(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),void 0!==e&&(k.type(t,e,i,o,r),k.range(t,e,i,o,r))}n(o)}var q=$;function Y(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e,"array")&&!t.required)return n();k.required(t,e,i,o,r,"array"),h(e,"array")||(k.type(t,e,i,o,r),k.range(t,e,i,o,r))}n(o)}var X=Y;function Z(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),void 0!==e&&k.type(t,e,i,o,r)}n(o)}var J=Z,K="enum";function Q(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();k.required(t,e,i,o,r),e&&k[K](t,e,i,o,r)}n(o)}var tt=Q;function et(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e,"string")&&!t.required)return n();k.required(t,e,i,o,r),h(e,"string")||k.pattern(t,e,i,o,r)}n(o)}var nt=et;function it(t,e,n,i,r){var o=[],a=t.required||!t.required&&i.hasOwnProperty(t.field);if(a){if(h(e)&&!t.required)return n();if(k.required(t,e,i,o,r),!h(e)){var s=void 0;s="number"===typeof e?new Date(e):e,k.type(t,s,i,o,r),s&&k.range(t,s.getTime(),i,o,r)}}n(o)}var rt=it;function ot(t,e,n,i,r){var o=[],s=Array.isArray(e)?"array":"undefined"===typeof e?"undefined":a()(e);k.required(t,e,i,o,r,s),n(o)}var at=ot;function st(t,e,n,i,r){var o=t.type,a=[],s=t.required||!t.required&&i.hasOwnProperty(t.field);if(s){if(h(e,o)&&!t.required)return n();k.required(t,e,i,a,r,o),h(e,o)||k.type(t,e,i,a,r)}n(a)}var lt=st,ct={string:I,method:z,number:F,boolean:H,regexp:V,integer:W,float:q,array:X,object:J,enum:tt,pattern:nt,date:rt,url:lt,hex:lt,email:lt,required:at};function ut(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var ht=ut();function dt(t){this.rules=null,this._messages=ht,this.define(t)}dt.prototype={messages:function(t){return t&&(this._messages=g(ut(),t)),this._messages},define:function(t){if(!t)throw new Error("Cannot configure a schema with no rules");if("object"!==("undefined"===typeof t?"undefined":a()(t))||Array.isArray(t))throw new Error("Rules must be an object");this.rules={};var e=void 0,n=void 0;for(e in t)t.hasOwnProperty(e)&&(n=t[e],this.rules[e]=Array.isArray(n)?n:[n])},validate:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments[2],o=t,s=n,u=i;if("function"===typeof s&&(u=s,s={}),this.rules&&0!==Object.keys(this.rules).length){if(s.messages){var h=this.messages();h===ht&&(h=ut()),g(h,s.messages),s.messages=h}else s.messages=this.messages();var d=void 0,p=void 0,f={},y=s.keys||Object.keys(this.rules);y.forEach(function(n){d=e.rules[n],p=o[n],d.forEach(function(i){var a=i;"function"===typeof a.transform&&(o===t&&(o=r()({},o)),p=o[n]=a.transform(p)),a="function"===typeof a?{validator:a}:r()({},a),a.validator=e.getValidationMethod(a),a.field=n,a.fullField=a.fullField||n,a.type=e.getType(a),a.validator&&(f[n]=f[n]||[],f[n].push({rule:a,value:p,source:o,field:n}))})});var b={};m(f,s,function(t,e){var n=t.rule,i=("object"===n.type||"array"===n.type)&&("object"===a()(n.fields)||"object"===a()(n.defaultField));function o(t,e){return r()({},e,{fullField:n.fullField+"."+t})}function u(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],u=a;if(Array.isArray(u)||(u=[u]),u.length&&l("async-validator:",u),u.length&&n.message&&(u=[].concat(n.message)),u=u.map(v(n)),s.first&&u.length)return b[n.field]=1,e(u);if(i){if(n.required&&!t.value)return u=n.message?[].concat(n.message).map(v(n)):s.error?[s.error(n,c(s.messages.required,n.field))]:[],e(u);var h={};if(n.defaultField)for(var d in t.value)t.value.hasOwnProperty(d)&&(h[d]=n.defaultField);for(var p in h=r()({},h,t.rule.fields),h)if(h.hasOwnProperty(p)){var f=Array.isArray(h[p])?h[p]:[h[p]];h[p]=f.map(o.bind(null,p))}var m=new dt(h);m.messages(s.messages),t.rule.options&&(t.rule.options.messages=s.messages,t.rule.options.error=s.error),m.validate(t.value,t.rule.options||s,function(t){e(t&&t.length?u.concat(t):t)})}else e(u)}i=i&&(n.required||!n.required&&t.value),n.field=t.field;var h=n.validator(n,t.value,u,t.source,s);h&&h.then&&h.then(function(){return u()},function(t){return u(t)})},function(t){x(t)})}else u&&u();function x(t){var e=void 0,n=void 0,i=[],r={};function o(t){Array.isArray(t)?i=i.concat.apply(i,t):i.push(t)}for(e=0;e<t.length;e++)o(t[e]);if(i.length)for(e=0;e<i.length;e++)n=i[e].field,r[n]=r[n]||[],r[n].push(i[e]);else i=null,r=null;u(i,r)}},getType:function(t){if(void 0===t.type&&t.pattern instanceof RegExp&&(t.type="pattern"),"function"!==typeof t.validator&&t.type&&!ct.hasOwnProperty(t.type))throw new Error(c("Unknown rule type %s",t.type));return t.type||"string"},getValidationMethod:function(t){if("function"===typeof t.validator)return t.validator;var e=Object.keys(t),n=e.indexOf("message");return-1!==n&&e.splice(n,1),1===e.length&&"required"===e[0]?ct.required:ct[this.getType(t)]||!1}},dt.register=function(t,e){if("function"!==typeof e)throw new Error("Cannot register a validator by type, validator is not a function");ct[t]=e},dt.messages=ht;e["default"]=dt},a25f:function(t,e,n){var i=n("7726"),r=i.navigator;t.exports=r&&r.userAgent||""},a3c3:function(t,e,n){var i=n("63b6");i(i.S+i.F,"Object",{assign:n("9306")})},a3de:function(t,e,n){"use strict";var i=!("undefined"===typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!==typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=r},a5b8:function(t,e,n){"use strict";var i=n("d8e8");function r(t){var e,n;this.promise=new t(function(t,i){if(void 0!==e||void 0!==n)throw TypeError("Bad Promise constructor");e=t,n=i}),this.resolve=i(e),this.reject=i(n)}t.exports.f=function(t){return new r(t)}},a5d4:function(t,e,n){"use strict";const i=window.THREE||n("5a89"),r=function(t,e){void 0===e&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),e===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');const n=this,r={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=t,this.domElement=e,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:i.MOUSE.ROTATE,MIDDLE:i.MOUSE.ZOOM,RIGHT:i.MOUSE.PAN},this.target=new i.Vector3;const o=1e-6,a=new i.Vector3;let s=r.NONE,l=r.NONE,c=new i.Vector3,u=new i.Vector2,h=new i.Vector2,d=new i.Vector3,p=0,f=new i.Vector2,m=new i.Vector2,v=0,g=0,y=new i.Vector2,b=new i.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var x={type:"change"},w={type:"start"},_={type:"end"};this.handleResize=function(){const t=n.domElement.getBoundingClientRect(),e=n.domElement.ownerDocument.documentElement;n.screen.left=t.left+window.pageXOffset-e.clientLeft,n.screen.top=t.top+window.pageYOffset-e.clientTop,n.screen.width=t.width,n.screen.height=t.height};const M=function(){const t=new i.Vector2;return function(e,i){return t.set((e-n.screen.left)/n.screen.width,(i-n.screen.top)/n.screen.height),t}}(),E=function(){const t=new i.Vector2;return function(e,i){return t.set((e-.5*n.screen.width-n.screen.left)/(.5*n.screen.width),(n.screen.height+2*(n.screen.top-i))/n.screen.width),t}}();function S(t){if(!1!==n.enabled)switch(t.pointerType){case"mouse":case"pen":P(t);break}}function T(t){if(!1!==n.enabled)switch(t.pointerType){case"mouse":case"pen":O(t);break}}function A(t){if(!1!==n.enabled)switch(t.pointerType){case"mouse":case"pen":R(t);break}}function C(t){!1!==n.enabled&&(window.removeEventListener("keydown",C),l===r.NONE&&(t.keyCode!==n.keys[r.ROTATE]||n.noRotate?t.keyCode!==n.keys[r.ZOOM]||n.noZoom?t.keyCode!==n.keys[r.PAN]||n.noPan||(l=r.PAN):l=r.ZOOM:l=r.ROTATE))}function L(){!1!==n.enabled&&(l=r.NONE,window.addEventListener("keydown",C,!1))}function P(t){if(t.preventDefault(),t.stopPropagation(),s===r.NONE)switch(t.button){case n.mouseButtons.LEFT:s=r.ROTATE;break;case n.mouseButtons.MIDDLE:s=r.ZOOM;break;case n.mouseButtons.RIGHT:s=r.PAN;break;default:s=r.NONE}const e=l!==r.NONE?l:s;e!==r.ROTATE||n.noRotate?e!==r.ZOOM||n.noZoom?e!==r.PAN||n.noPan||(y.copy(M(t.pageX,t.pageY)),b.copy(y)):(f.copy(M(t.pageX,t.pageY)),m.copy(f)):(h.copy(E(t.pageX,t.pageY)),u.copy(h)),n.domElement.ownerDocument.addEventListener("pointermove",T,!1),n.domElement.ownerDocument.addEventListener("pointerup",A,!1),n.dispatchEvent(w)}function O(t){if(!1===n.enabled)return;t.preventDefault(),t.stopPropagation();const e=l!==r.NONE?l:s;e!==r.ROTATE||n.noRotate?e!==r.ZOOM||n.noZoom?e!==r.PAN||n.noPan||b.copy(M(t.pageX,t.pageY)):m.copy(M(t.pageX,t.pageY)):(u.copy(h),h.copy(E(t.pageX,t.pageY)))}function R(t){!1!==n.enabled&&(t.preventDefault(),t.stopPropagation(),s=r.NONE,n.domElement.ownerDocument.removeEventListener("pointermove",T),n.domElement.ownerDocument.removeEventListener("pointerup",A),n.dispatchEvent(_))}function k(t){if(!1!==n.enabled&&!0!==n.noZoom){switch(t.preventDefault(),t.stopPropagation(),t.deltaMode){case 2:f.y-=.025*t.deltaY;break;case 1:f.y-=.01*t.deltaY;break;default:f.y-=25e-5*t.deltaY;break}n.dispatchEvent(w),n.dispatchEvent(_)}}function D(t){if(!1!==n.enabled){switch(t.preventDefault(),t.touches.length){case 1:s=r.TOUCH_ROTATE,h.copy(E(t.touches[0].pageX,t.touches[0].pageY)),u.copy(h);break;default:s=r.TOUCH_ZOOM_PAN;var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;g=v=Math.sqrt(e*e+i*i);var o=(t.touches[0].pageX+t.touches[1].pageX)/2,a=(t.touches[0].pageY+t.touches[1].pageY)/2;y.copy(M(o,a)),b.copy(y);break}n.dispatchEvent(w)}}function I(t){if(!1!==n.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:u.copy(h),h.copy(E(t.touches[0].pageX,t.touches[0].pageY));break;default:var e=t.touches[0].pageX-t.touches[1].pageX,i=t.touches[0].pageY-t.touches[1].pageY;g=Math.sqrt(e*e+i*i);var r=(t.touches[0].pageX+t.touches[1].pageX)/2,o=(t.touches[0].pageY+t.touches[1].pageY)/2;b.copy(M(r,o));break}}function N(t){if(!1!==n.enabled){switch(t.touches.length){case 0:s=r.NONE;break;case 1:s=r.TOUCH_ROTATE,h.copy(E(t.touches[0].pageX,t.touches[0].pageY)),u.copy(h);break}n.dispatchEvent(_)}}function z(t){!1!==n.enabled&&t.preventDefault()}this.rotateCamera=function(){let t,e=new i.Vector3,r=new i.Quaternion,o=new i.Vector3,a=new i.Vector3,s=new i.Vector3,l=new i.Vector3;return function(){l.set(h.x-u.x,h.y-u.y,0),t=l.length(),t?(c.copy(n.object.position).sub(n.target),o.copy(c).normalize(),a.copy(n.object.up).normalize(),s.crossVectors(a,o).normalize(),a.setLength(h.y-u.y),s.setLength(h.x-u.x),l.copy(a.add(s)),e.crossVectors(l,c).normalize(),t*=n.rotateSpeed,r.setFromAxisAngle(e,t),c.applyQuaternion(r),n.object.up.applyQuaternion(r),d.copy(e),p=t):!n.staticMoving&&p&&(p*=Math.sqrt(1-n.dynamicDampingFactor),c.copy(n.object.position).sub(n.target),r.setFromAxisAngle(d,p),c.applyQuaternion(r),n.object.up.applyQuaternion(r)),u.copy(h)}}(),this.zoomCamera=function(){let t;s===r.TOUCH_ZOOM_PAN?(t=v/g,v=g,c.multiplyScalar(t)):(t=1+(m.y-f.y)*n.zoomSpeed,1!==t&&t>0&&c.multiplyScalar(t),n.staticMoving?f.copy(m):f.y+=(m.y-f.y)*this.dynamicDampingFactor)},this.panCamera=function(){let t=new i.Vector2,e=new i.Vector3,r=new i.Vector3;return function(){t.copy(b).sub(y),t.lengthSq()&&(t.multiplyScalar(c.length()*n.panSpeed),r.copy(c).cross(n.object.up).setLength(t.x),r.add(e.copy(n.object.up).setLength(t.y)),n.object.position.add(r),n.target.add(r),n.staticMoving?y.copy(b):y.add(t.subVectors(b,y).multiplyScalar(n.dynamicDampingFactor)))}}(),this.checkDistances=function(){n.noZoom&&n.noPan||(c.lengthSq()>n.maxDistance*n.maxDistance&&(n.object.position.addVectors(n.target,c.setLength(n.maxDistance)),f.copy(m)),c.lengthSq()<n.minDistance*n.minDistance&&(n.object.position.addVectors(n.target,c.setLength(n.minDistance)),f.copy(m)))},this.update=function(){c.subVectors(n.object.position,n.target),n.noRotate||n.rotateCamera(),n.noZoom||n.zoomCamera(),n.noPan||n.panCamera(),n.object.position.addVectors(n.target,c),n.checkDistances(),n.object.lookAt(n.target),a.distanceToSquared(n.object.position)>o&&(n.dispatchEvent(x),a.copy(n.object.position))},this.reset=function(){s=r.NONE,l=r.NONE,n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.up.copy(n.up0),c.subVectors(n.object.position,n.target),n.object.lookAt(n.target),n.dispatchEvent(x),a.copy(n.object.position)},this.dispose=function(){n.domElement.removeEventListener("contextmenu",z,!1),n.domElement.removeEventListener("pointerdown",S,!1),n.domElement.removeEventListener("wheel",k,!1),n.domElement.removeEventListener("touchstart",D,!1),n.domElement.removeEventListener("touchend",N,!1),n.domElement.removeEventListener("touchmove",I,!1),n.domElement.ownerDocument.removeEventListener("pointermove",T,!1),n.domElement.ownerDocument.removeEventListener("pointerup",A,!1),window.removeEventListener("keydown",C,!1),window.removeEventListener("keyup",L,!1)},this.domElement.addEventListener("contextmenu",z,!1),this.domElement.addEventListener("pointerdown",S,!1),this.domElement.addEventListener("wheel",k,!1),this.domElement.addEventListener("touchstart",D,!1),this.domElement.addEventListener("touchend",N,!1),this.domElement.addEventListener("touchmove",I,!1),this.domElement.ownerDocument.addEventListener("pointermove",T,!1),this.domElement.ownerDocument.addEventListener("pointerup",A,!1),window.addEventListener("keydown",C,!1),window.addEventListener("keyup",L,!1),this.handleResize(),this.update()};r.prototype=Object.create(i.EventDispatcher.prototype),r.prototype.constructor=r},a742:function(t,e,n){"use strict";function i(t){return"[object String]"===Object.prototype.toString.call(t)}function r(t){return"[object Object]"===Object.prototype.toString.call(t)}function o(t){return t&&t.nodeType===Node.ELEMENT_NODE}e.__esModule=!0,e.isString=i,e.isObject=r,e.isHtmlElement=o;e.isFunction=function(t){var e={};return t&&"[object Function]"===e.toString.call(t)},e.isUndefined=function(t){return void 0===t},e.isDefined=function(t){return void 0!==t&&null!==t}},a9a4:function(t,e,n){"use strict";function i(){}n.d(e,"a",function(){return p}),n.d(e,"b",function(){return jr}),n.d(e,"c",function(){return Sr}),n.d(e,"d",function(){return Br}),n.d(e,"e",function(){return pc}),n.d(e,"f",function(){return ys}),n.d(e,"g",function(){return pr}),n.d(e,"h",function(){return co}),n.d(e,"i",function(){return f}),n.d(e,"j",function(){return br}),n.d(e,"k",function(){return i}),n.d(e,"l",function(){return Xe}),n.d(e,"m",function(){return yt}),n.d(e,"n",function(){return a}),n.d(e,"o",function(){return ke}),n.d(e,"p",function(){return Ze}),n.d(e,"q",function(){return Jr}),n.d(e,"r",function(){return Zr}),n.d(e,"s",function(){return mt}),n.d(e,"t",function(){return _r}),n.d(e,"u",function(){return au}),n.d(e,"v",function(){return Ga}),n.d(e,"w",function(){return Ur}),n.d(e,"x",function(){return Ie}),n.d(e,"y",function(){return o}),n.d(e,"z",function(){return It}),n.d(e,"A",function(){return Dt}),n.d(e,"B",function(){return eh}),n.d(e,"C",function(){return es}),n.d(e,"D",function(){return mr}),n.d(e,"E",function(){return qr}),n.d(e,"F",function(){return El}),n.d(e,"G",function(){return os}),n.d(e,"H",function(){return rs}),n.d(e,"I",function(){return Iu}),n.d(e,"J",function(){return je}),n.d(e,"K",function(){return De}),n.d(e,"L",function(){return Ne}),n.d(e,"M",function(){return vs}),n.d(e,"N",function(){return Ue}),n.d(e,"O",function(){return Ka}),void 0===Number.EPSILON&&(Number.EPSILON=Math.pow(2,-52)),void 0===Number.isInteger&&(Number.isInteger=function(t){return"number"===typeof t&&isFinite(t)&&Math.floor(t)===t}),void 0===Math.sign&&(Math.sign=function(t){return t<0?-1:t>0?1:+t}),"name"in Function.prototype===!1&&Object.defineProperty(Function.prototype,"name",{get:function(){return this.toString().match(/^\s*function\s*([^\(\s]*)/)[1]}}),void 0===Object.assign&&function(){Object.assign=function(t){if(void 0===t||null===t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(void 0!==i&&null!==i)for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(e[r]=i[r])}return e}}(),Object.assign(i.prototype,{addEventListener:function(t,e){void 0===this._listeners&&(this._listeners={});var n=this._listeners;void 0===n[t]&&(n[t]=[]),-1===n[t].indexOf(e)&&n[t].push(e)},hasEventListener:function(t,e){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[t]&&-1!==n[t].indexOf(e)},removeEventListener:function(t,e){if(void 0!==this._listeners){var n=this._listeners,i=n[t];if(void 0!==i){var r=i.indexOf(e);-1!==r&&i.splice(r,1)}}},dispatchEvent:function(t){if(void 0!==this._listeners){var e=this._listeners,n=e[t.type];if(void 0!==n){t.target=this;for(var i=n.slice(0),r=0,o=i.length;r<o;r++)i[r].call(this,t)}}}});var r,o="105",a={LEFT:0,MIDDLE:1,RIGHT:2},s=0,l=1,c=2,u=1,h=2,d=0,p=1,f=2,m=1,v=0,g=1,y=2,b=0,x=1,w=2,_=3,M=4,E=5,S=100,T=101,A=102,C=103,L=104,P=200,O=201,R=202,k=203,D=204,I=205,N=206,z=207,B=208,F=209,j=210,H=0,U=1,V=2,G=3,W=4,$=5,q=6,Y=7,X=0,Z=1,J=2,K=0,Q=1,tt=2,et=3,nt=4,it=5,rt=300,ot=301,at=302,st=303,lt=304,ct=305,ut=306,ht=307,dt=1e3,pt=1001,ft=1002,mt=1003,vt=1004,gt=1005,yt=1006,bt=1007,xt=1008,wt=1009,_t=1010,Mt=1011,Et=1012,St=1013,Tt=1014,At=1015,Ct=1016,Lt=1017,Pt=1018,Ot=1019,Rt=1020,kt=1021,Dt=1022,It=1023,Nt=1024,zt=1025,Bt=1026,Ft=1027,jt=1028,Ht=33776,Ut=33777,Vt=33778,Gt=33779,Wt=35840,$t=35841,qt=35842,Yt=35843,Xt=36196,Zt=37808,Jt=37809,Kt=37810,Qt=37811,te=37812,ee=37813,ne=37814,ie=37815,re=37816,oe=37817,ae=37818,se=37819,le=37820,ce=37821,ue=2200,he=2201,de=2202,pe=2300,fe=2301,me=2302,ve=2400,ge=2401,ye=2402,be=0,xe=1,we=2,_e=3e3,Me=3001,Ee=3007,Se=3002,Te=3004,Ae=3005,Ce=3006,Le=3200,Pe=3201,Oe=0,Re=1,ke={DEG2RAD:Math.PI/180,RAD2DEG:180/Math.PI,generateUUID:function(){for(var t=[],e=0;e<256;e++)t[e]=(e<16?"0":"")+e.toString(16);return function(){var e=4294967295*Math.random()|0,n=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0,o=t[255&e]+t[e>>8&255]+t[e>>16&255]+t[e>>24&255]+"-"+t[255&n]+t[n>>8&255]+"-"+t[n>>16&15|64]+t[n>>24&255]+"-"+t[63&i|128]+t[i>>8&255]+"-"+t[i>>16&255]+t[i>>24&255]+t[255&r]+t[r>>8&255]+t[r>>16&255]+t[r>>24&255];return o.toUpperCase()}}(),clamp:function(t,e,n){return Math.max(e,Math.min(n,t))},euclideanModulo:function(t,e){return(t%e+e)%e},mapLinear:function(t,e,n,i,r){return i+(t-e)*(r-i)/(n-e)},lerp:function(t,e,n){return(1-n)*t+n*e},smoothstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*(3-2*t))},smootherstep:function(t,e,n){return t<=e?0:t>=n?1:(t=(t-e)/(n-e),t*t*t*(t*(6*t-15)+10))},randInt:function(t,e){return t+Math.floor(Math.random()*(e-t+1))},randFloat:function(t,e){return t+Math.random()*(e-t)},randFloatSpread:function(t){return t*(.5-Math.random())},degToRad:function(t){return t*ke.DEG2RAD},radToDeg:function(t){return t*ke.RAD2DEG},isPowerOfTwo:function(t){return 0===(t&t-1)&&0!==t},ceilPowerOfTwo:function(t){return Math.pow(2,Math.ceil(Math.log(t)/Math.LN2))},floorPowerOfTwo:function(t){return Math.pow(2,Math.floor(Math.log(t)/Math.LN2))}};function De(t,e){this.x=t||0,this.y=e||0}function Ie(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._w=void 0!==i?i:1}function Ne(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}function ze(){this.elements=[1,0,0,0,1,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")}Object.defineProperties(De.prototype,{width:{get:function(){return this.x},set:function(t){this.x=t}},height:{get:function(){return this.y},set:function(t){this.y=t}}}),Object.assign(De.prototype,{isVector2:!0,set:function(t,e){return this.x=t,this.y=e,this},setScalar:function(t){return this.x=t,this.y=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y)},copy:function(t){return this.x=t.x,this.y=t.y,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this)},addScalar:function(t){return this.x+=t,this.y+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this)},subScalar:function(t){return this.x-=t,this.y-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this},multiply:function(t){return this.x*=t.x,this.y*=t.y,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return this.x/=t.x,this.y/=t.y,this},divideScalar:function(t){return this.multiplyScalar(1/t)},applyMatrix3:function(t){var e=this.x,n=this.y,i=t.elements;return this.x=i[0]*e+i[3]*n+i[6],this.y=i[1]*e+i[4]*n+i[7],this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this},negate:function(){return this.x=-this.x,this.y=-this.y,this},dot:function(t){return this.x*t.x+this.y*t.y},cross:function(t){return this.x*t.y-this.y*t.x},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)},normalize:function(){return this.divideScalar(this.length()||1)},angle:function(){var t=Math.atan2(this.y,this.x);return t<0&&(t+=2*Math.PI),t},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector2: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this},rotateAround:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=this.x-t.x,o=this.y-t.y;return this.x=r*n-o*i+t.x,this.y=r*i+o*n+t.y,this}}),Object.assign(Ie,{slerp:function(t,e,n,i){return n.copy(t).slerp(e,i)},slerpFlat:function(t,e,n,i,r,o,a){var s=n[i+0],l=n[i+1],c=n[i+2],u=n[i+3],h=r[o+0],d=r[o+1],p=r[o+2],f=r[o+3];if(u!==f||s!==h||l!==d||c!==p){var m=1-a,v=s*h+l*d+c*p+u*f,g=v>=0?1:-1,y=1-v*v;if(y>Number.EPSILON){var b=Math.sqrt(y),x=Math.atan2(b,v*g);m=Math.sin(m*x)/b,a=Math.sin(a*x)/b}var w=a*g;if(s=s*m+h*w,l=l*m+d*w,c=c*m+p*w,u=u*m+f*w,m===1-a){var _=1/Math.sqrt(s*s+l*l+c*c+u*u);s*=_,l*=_,c*=_,u*=_}}t[e]=s,t[e+1]=l,t[e+2]=c,t[e+3]=u}}),Object.defineProperties(Ie.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},w:{get:function(){return this._w},set:function(t){this._w=t,this.onChangeCallback()}}}),Object.assign(Ie.prototype,{isQuaternion:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._w=i,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._w)},copy:function(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this.onChangeCallback(),this},setFromEuler:function(t,e){if(!t||!t.isEuler)throw new Error("THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.");var n=t._x,i=t._y,r=t._z,o=t.order,a=Math.cos,s=Math.sin,l=a(n/2),c=a(i/2),u=a(r/2),h=s(n/2),d=s(i/2),p=s(r/2);return"XYZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"YXZ"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"ZXY"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u-h*d*p):"ZYX"===o?(this._x=h*c*u-l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u+h*d*p):"YZX"===o?(this._x=h*c*u+l*d*p,this._y=l*d*u+h*c*p,this._z=l*c*p-h*d*u,this._w=l*c*u-h*d*p):"XZY"===o&&(this._x=h*c*u-l*d*p,this._y=l*d*u-h*c*p,this._z=l*c*p+h*d*u,this._w=l*c*u+h*d*p),!1!==e&&this.onChangeCallback(),this},setFromAxisAngle:function(t,e){var n=e/2,i=Math.sin(n);return this._x=t.x*i,this._y=t.y*i,this._z=t.z*i,this._w=Math.cos(n),this.onChangeCallback(),this},setFromRotationMatrix:function(t){var e,n=t.elements,i=n[0],r=n[4],o=n[8],a=n[1],s=n[5],l=n[9],c=n[2],u=n[6],h=n[10],d=i+s+h;return d>0?(e=.5/Math.sqrt(d+1),this._w=.25/e,this._x=(u-l)*e,this._y=(o-c)*e,this._z=(a-r)*e):i>s&&i>h?(e=2*Math.sqrt(1+i-s-h),this._w=(u-l)/e,this._x=.25*e,this._y=(r+a)/e,this._z=(o+c)/e):s>h?(e=2*Math.sqrt(1+s-i-h),this._w=(o-c)/e,this._x=(r+a)/e,this._y=.25*e,this._z=(l+u)/e):(e=2*Math.sqrt(1+h-i-s),this._w=(a-r)/e,this._x=(o+c)/e,this._y=(l+u)/e,this._z=.25*e),this.onChangeCallback(),this},setFromUnitVectors:function(t,e){var n=1e-6,i=t.dot(e)+1;return i<n?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()},angleTo:function(t){return 2*Math.acos(Math.abs(ke.clamp(this.dot(t),-1,1)))},rotateTowards:function(t,e){var n=this.angleTo(t);if(0===n)return this;var i=Math.min(1,e/n);return this.slerp(t,i),this},inverse:function(){return this.conjugate()},conjugate:function(){return this._x*=-1,this._y*=-1,this._z*=-1,this.onChangeCallback(),this},dot:function(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)},normalize:function(){var t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this.onChangeCallback(),this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(t,e)):this.multiplyQuaternions(this,t)},premultiply:function(t){return this.multiplyQuaternions(t,this)},multiplyQuaternions:function(t,e){var n=t._x,i=t._y,r=t._z,o=t._w,a=e._x,s=e._y,l=e._z,c=e._w;return this._x=n*c+o*a+i*l-r*s,this._y=i*c+o*s+r*a-n*l,this._z=r*c+o*l+n*s-i*a,this._w=o*c-n*a-i*s-r*l,this.onChangeCallback(),this},slerp:function(t,e){if(0===e)return this;if(1===e)return this.copy(t);var n=this._x,i=this._y,r=this._z,o=this._w,a=o*t._w+n*t._x+i*t._y+r*t._z;if(a<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,a=-a):this.copy(t),a>=1)return this._w=o,this._x=n,this._y=i,this._z=r,this;var s=1-a*a;if(s<=Number.EPSILON){var l=1-e;return this._w=l*o+e*this._w,this._x=l*n+e*this._x,this._y=l*i+e*this._y,this._z=l*r+e*this._z,this.normalize()}var c=Math.sqrt(s),u=Math.atan2(c,a),h=Math.sin((1-e)*u)/c,d=Math.sin(e*u)/c;return this._w=o*h+this._w*d,this._x=n*h+this._x*d,this._y=i*h+this._y*d,this._z=r*h+this._z*d,this.onChangeCallback(),this},equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w},fromArray:function(t,e){return void 0===e&&(e=0),this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(Ne.prototype,{isVector3:!0,set:function(t,e,n){return this.x=t,this.y=e,this.z=n,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this},multiply:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(t,e)):(this.x*=t.x,this.y*=t.y,this.z*=t.z,this)},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this},multiplyVectors:function(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this},applyEuler:function(){var t=new Ie;return function(e){return e&&e.isEuler||console.error("THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order."),this.applyQuaternion(t.setFromEuler(e))}}(),applyAxisAngle:function(){var t=new Ie;return function(e,n){return this.applyQuaternion(t.setFromAxisAngle(e,n))}}(),applyMatrix3:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[3]*n+r[6]*i,this.y=r[1]*e+r[4]*n+r[7]*i,this.z=r[2]*e+r[5]*n+r[8]*i,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements,o=1/(r[3]*e+r[7]*n+r[11]*i+r[15]);return this.x=(r[0]*e+r[4]*n+r[8]*i+r[12])*o,this.y=(r[1]*e+r[5]*n+r[9]*i+r[13])*o,this.z=(r[2]*e+r[6]*n+r[10]*i+r[14])*o,this},applyQuaternion:function(t){var e=this.x,n=this.y,i=this.z,r=t.x,o=t.y,a=t.z,s=t.w,l=s*e+o*i-a*n,c=s*n+a*e-r*i,u=s*i+r*n-o*e,h=-r*e-o*n-a*i;return this.x=l*s+h*-r+c*-a-u*-o,this.y=c*s+h*-o+u*-r-l*-a,this.z=u*s+h*-a+l*-o-c*-r,this},project:function(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)},unproject:function(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)},transformDirection:function(t){var e=this.x,n=this.y,i=this.z,r=t.elements;return this.x=r[0]*e+r[4]*n+r[8]*i,this.y=r[1]*e+r[5]*n+r[9]*i,this.z=r[2]*e+r[6]*n+r[10]*i,this.normalize()},divide:function(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this},divideScalar:function(t){return this.multiplyScalar(1/t)},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this},clampScalar:function(t,e){return this.x=Math.max(t,Math.min(e,this.x)),this.y=Math.max(t,Math.min(e,this.y)),this.z=Math.max(t,Math.min(e,this.z)),this},clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},cross:function(t,e){return void 0!==e?(console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(t,e)):this.crossVectors(this,t)},crossVectors:function(t,e){var n=t.x,i=t.y,r=t.z,o=e.x,a=e.y,s=e.z;return this.x=i*s-r*a,this.y=r*o-n*s,this.z=n*a-i*o,this},projectOnVector:function(t){var e=t.dot(this)/t.lengthSq();return this.copy(t).multiplyScalar(e)},projectOnPlane:function(){var t=new Ne;return function(e){return t.copy(this).projectOnVector(e),this.sub(t)}}(),reflect:function(){var t=new Ne;return function(e){return this.sub(t.copy(e).multiplyScalar(2*this.dot(e)))}}(),angleTo:function(t){var e=this.dot(t)/Math.sqrt(this.lengthSq()*t.lengthSq());return Math.acos(ke.clamp(e,-1,1))},distanceTo:function(t){return Math.sqrt(this.distanceToSquared(t))},distanceToSquared:function(t){var e=this.x-t.x,n=this.y-t.y,i=this.z-t.z;return e*e+n*n+i*i},manhattanDistanceTo:function(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)},setFromSpherical:function(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)},setFromSphericalCoords:function(t,e,n){var i=Math.sin(e)*t;return this.x=i*Math.sin(n),this.y=Math.cos(e)*t,this.z=i*Math.cos(n),this},setFromCylindrical:function(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)},setFromCylindricalCoords:function(t,e,n){return this.x=t*Math.sin(e),this.y=n,this.z=t*Math.cos(e),this},setFromMatrixPosition:function(t){var e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this},setFromMatrixScale:function(t){var e=this.setFromMatrixColumn(t,0).length(),n=this.setFromMatrixColumn(t,1).length(),i=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=n,this.z=i,this},setFromMatrixColumn:function(t,e){return this.fromArray(t.elements,4*e)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector3: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}}),Object.assign(ze.prototype,{isMatrix3:!0,set:function(t,e,n,i,r,o,a,s,l){var c=this.elements;return c[0]=t,c[1]=i,c[2]=a,c[3]=e,c[4]=r,c[5]=s,c[6]=n,c[7]=o,c[8]=l,this},identity:function(){return this.set(1,0,0,0,1,0,0,0,1),this},clone:function(){return(new this.constructor).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],this},setFromMatrix4:function(t){var e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this},applyToBufferAttribute:function(){var t=new Ne;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix3(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),multiply:function(t){return this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[3],s=n[6],l=n[1],c=n[4],u=n[7],h=n[2],d=n[5],p=n[8],f=i[0],m=i[3],v=i[6],g=i[1],y=i[4],b=i[7],x=i[2],w=i[5],_=i[8];return r[0]=o*f+a*g+s*x,r[3]=o*m+a*y+s*w,r[6]=o*v+a*b+s*_,r[1]=l*f+c*g+u*x,r[4]=l*m+c*y+u*w,r[7]=l*v+c*b+u*_,r[2]=h*f+d*g+p*x,r[5]=h*m+d*y+p*w,r[8]=h*v+d*b+p*_,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this},determinant:function(){var t=this.elements,e=t[0],n=t[1],i=t[2],r=t[3],o=t[4],a=t[5],s=t[6],l=t[7],c=t[8];return e*o*c-e*a*l-n*r*c+n*a*s+i*r*l-i*o*s},getInverse:function(t,e){t&&t.isMatrix4&&console.error("THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.");var n=t.elements,i=this.elements,r=n[0],o=n[1],a=n[2],s=n[3],l=n[4],c=n[5],u=n[6],h=n[7],d=n[8],p=d*l-c*h,f=c*u-d*s,m=h*s-l*u,v=r*p+o*f+a*m;if(0===v){var g="THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(g);return console.warn(g),this.identity()}var y=1/v;return i[0]=p*y,i[1]=(a*h-d*o)*y,i[2]=(c*o-a*l)*y,i[3]=f*y,i[4]=(d*r-a*u)*y,i[5]=(a*s-c*r)*y,i[6]=m*y,i[7]=(o*u-h*r)*y,i[8]=(l*r-o*s)*y,this},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this},getNormalMatrix:function(t){return this.setFromMatrix4(t).getInverse(this).transpose()},transposeIntoArray:function(t){var e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this},setUvTransform:function(t,e,n,i,r,o,a){var s=Math.cos(r),l=Math.sin(r);this.set(n*s,n*l,-n*(s*o+l*a)+o+t,-i*l,i*s,-i*(-l*o+s*a)+a+e,0,0,1)},scale:function(t,e){var n=this.elements;return n[0]*=t,n[3]*=t,n[6]*=t,n[1]*=e,n[4]*=e,n[7]*=e,this},rotate:function(t){var e=Math.cos(t),n=Math.sin(t),i=this.elements,r=i[0],o=i[3],a=i[6],s=i[1],l=i[4],c=i[7];return i[0]=e*r+n*s,i[3]=e*o+n*l,i[6]=e*a+n*c,i[1]=-n*r+e*s,i[4]=-n*o+e*l,i[7]=-n*a+e*c,this},translate:function(t,e){var n=this.elements;return n[0]+=t*n[2],n[3]+=t*n[5],n[6]+=t*n[8],n[1]+=e*n[2],n[4]+=e*n[5],n[7]+=e*n[8],this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<9;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<9;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t}});var Be={getDataURL:function(t){var e;if("undefined"==typeof HTMLCanvasElement)return t.src;if(t instanceof HTMLCanvasElement)e=t;else{void 0===r&&(r=document.createElementNS("http://www.w3.org/1999/xhtml","canvas")),r.width=t.width,r.height=t.height;var n=r.getContext("2d");t instanceof ImageData?n.putImageData(t,0,0):n.drawImage(t,0,0,t.width,t.height),e=r}return e.width>2048||e.height>2048?e.toDataURL("image/jpeg",.6):e.toDataURL("image/png")}},Fe=0;function je(t,e,n,i,r,o,a,s,l,c){Object.defineProperty(this,"id",{value:Fe++}),this.uuid=ke.generateUUID(),this.name="",this.image=void 0!==t?t:je.DEFAULT_IMAGE,this.mipmaps=[],this.mapping=void 0!==e?e:je.DEFAULT_MAPPING,this.wrapS=void 0!==n?n:pt,this.wrapT=void 0!==i?i:pt,this.magFilter=void 0!==r?r:yt,this.minFilter=void 0!==o?o:xt,this.anisotropy=void 0!==l?l:1,this.format=void 0!==a?a:It,this.type=void 0!==s?s:wt,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ze,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.encoding=void 0!==c?c:_e,this.version=0,this.onUpdate=null}function He(t,e,n,i){this.x=t||0,this.y=e||0,this.z=n||0,this.w=void 0!==i?i:1}function Ue(t,e,n){this.width=t,this.height=e,this.scissor=new He(0,0,t,e),this.scissorTest=!1,this.viewport=new He(0,0,t,e),n=n||{},this.texture=new je(void 0,void 0,n.wrapS,n.wrapT,n.magFilter,n.minFilter,n.format,n.type,n.anisotropy,n.encoding),this.texture.generateMipmaps=void 0!==n.generateMipmaps&&n.generateMipmaps,this.texture.minFilter=void 0!==n.minFilter?n.minFilter:yt,this.depthBuffer=void 0===n.depthBuffer||n.depthBuffer,this.stencilBuffer=void 0===n.stencilBuffer||n.stencilBuffer,this.depthTexture=void 0!==n.depthTexture?n.depthTexture:null}function Ve(t,e,n){Ue.call(this,t,e,n),this.samples=4}function Ge(t,e,n){Ue.call(this,t,e,n)}function We(t,e,n,i,r,o,a,s,l,c,u,h){je.call(this,null,o,a,s,l,c,i,r,u,h),this.image={data:t,width:e,height:n},this.magFilter=void 0!==l?l:mt,this.minFilter=void 0!==c?c:mt,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}function $e(t,e){this.min=void 0!==t?t:new Ne(1/0,1/0,1/0),this.max=void 0!==e?e:new Ne(-1/0,-1/0,-1/0)}function qe(t,e){this.center=void 0!==t?t:new Ne,this.radius=void 0!==e?e:0}function Ye(t,e){this.normal=void 0!==t?t:new Ne(1,0,0),this.constant=void 0!==e?e:0}function Xe(t,e,n,i,r,o){this.planes=[void 0!==t?t:new Ye,void 0!==e?e:new Ye,void 0!==n?n:new Ye,void 0!==i?i:new Ye,void 0!==r?r:new Ye,void 0!==o?o:new Ye]}function Ze(){this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],arguments.length>0&&console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")}je.DEFAULT_IMAGE=void 0,je.DEFAULT_MAPPING=rt,je.prototype=Object.assign(Object.create(i.prototype),{constructor:je,isTexture:!0,updateMatrix:function(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.name=t.name,this.image=t.image,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.encoding=t.encoding,this},toJSON:function(t){var e=void 0===t||"string"===typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];var n={metadata:{version:4.5,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,mapping:this.mapping,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,type:this.type,encoding:this.encoding,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};if(void 0!==this.image){var i=this.image;if(void 0===i.uuid&&(i.uuid=ke.generateUUID()),!e&&void 0===t.images[i.uuid]){var r;if(Array.isArray(i)){r=[];for(var o=0,a=i.length;o<a;o++)r.push(Be.getDataURL(i[o]))}else r=Be.getDataURL(i);t.images[i.uuid]={uuid:i.uuid,url:r}}n.image=i.uuid}return e||(t.textures[this.uuid]=n),n},dispose:function(){this.dispatchEvent({type:"dispose"})},transformUv:function(t){if(this.mapping!==rt)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case dt:t.x=t.x-Math.floor(t.x);break;case pt:t.x=t.x<0?0:1;break;case ft:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x);break}if(t.y<0||t.y>1)switch(this.wrapT){case dt:t.y=t.y-Math.floor(t.y);break;case pt:t.y=t.y<0?0:1;break;case ft:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y);break}return this.flipY&&(t.y=1-t.y),t}}),Object.defineProperty(je.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(He.prototype,{isVector4:!0,set:function(t,e,n,i){return this.x=t,this.y=e,this.z=n,this.w=i,this},setScalar:function(t){return this.x=t,this.y=t,this.z=t,this.w=t,this},setX:function(t){return this.x=t,this},setY:function(t){return this.y=t,this},setZ:function(t){return this.z=t,this},setW:function(t){return this.w=t,this},setComponent:function(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this},getComponent:function(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}},clone:function(){return new this.constructor(this.x,this.y,this.z,this.w)},copy:function(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this},add:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(t,e)):(this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this)},addScalar:function(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this},addVectors:function(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this},addScaledVector:function(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this},sub:function(t,e){return void 0!==e?(console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(t,e)):(this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this)},subScalar:function(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this},subVectors:function(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this},multiplyScalar:function(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this},applyMatrix4:function(t){var e=this.x,n=this.y,i=this.z,r=this.w,o=t.elements;return this.x=o[0]*e+o[4]*n+o[8]*i+o[12]*r,this.y=o[1]*e+o[5]*n+o[9]*i+o[13]*r,this.z=o[2]*e+o[6]*n+o[10]*i+o[14]*r,this.w=o[3]*e+o[7]*n+o[11]*i+o[15]*r,this},divideScalar:function(t){return this.multiplyScalar(1/t)},setAxisAngleFromQuaternion:function(t){this.w=2*Math.acos(t.w);var e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this},setAxisAngleFromRotationMatrix:function(t){var e,n,i,r,o=.01,a=.1,s=t.elements,l=s[0],c=s[4],u=s[8],h=s[1],d=s[5],p=s[9],f=s[2],m=s[6],v=s[10];if(Math.abs(c-h)<o&&Math.abs(u-f)<o&&Math.abs(p-m)<o){if(Math.abs(c+h)<a&&Math.abs(u+f)<a&&Math.abs(p+m)<a&&Math.abs(l+d+v-3)<a)return this.set(1,0,0,0),this;e=Math.PI;var g=(l+1)/2,y=(d+1)/2,b=(v+1)/2,x=(c+h)/4,w=(u+f)/4,_=(p+m)/4;return g>y&&g>b?g<o?(n=0,i=.707106781,r=.707106781):(n=Math.sqrt(g),i=x/n,r=w/n):y>b?y<o?(n=.707106781,i=0,r=.707106781):(i=Math.sqrt(y),n=x/i,r=_/i):b<o?(n=.707106781,i=.707106781,r=0):(r=Math.sqrt(b),n=w/r,i=_/r),this.set(n,i,r,e),this}var M=Math.sqrt((m-p)*(m-p)+(u-f)*(u-f)+(h-c)*(h-c));return Math.abs(M)<.001&&(M=1),this.x=(m-p)/M,this.y=(u-f)/M,this.z=(h-c)/M,this.w=Math.acos((l+d+v-1)/2),this},min:function(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this},max:function(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this},clamp:function(t,e){return this.x=Math.max(t.x,Math.min(e.x,this.x)),this.y=Math.max(t.y,Math.min(e.y,this.y)),this.z=Math.max(t.z,Math.min(e.z,this.z)),this.w=Math.max(t.w,Math.min(e.w,this.w)),this},clampScalar:function(){var t,e;return function(n,i){return void 0===t&&(t=new He,e=new He),t.set(n,n,n,n),e.set(i,i,i,i),this.clamp(t,e)}}(),clampLength:function(t,e){var n=this.length();return this.divideScalar(n||1).multiplyScalar(Math.max(t,Math.min(e,n)))},floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this},ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this},round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this},roundToZero:function(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this},negate:function(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this},dot:function(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},manhattanLength:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length()||1)},setLength:function(t){return this.normalize().multiplyScalar(t)},lerp:function(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this},lerpVectors:function(t,e,n){return this.subVectors(e,t).multiplyScalar(n).add(t)},equals:function(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w},fromArray:function(t,e){return void 0===e&&(e=0),this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t},fromBufferAttribute:function(t,e,n){return void 0!==n&&console.warn("THREE.Vector4: offset has been removed from .fromBufferAttribute()."),this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}}),Ue.prototype=Object.assign(Object.create(i.prototype),{constructor:Ue,isWebGLRenderTarget:!0,setSize:function(t,e){this.width===t&&this.height===e||(this.width=t,this.height=e,this.dispose()),this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.width=t.width,this.height=t.height,this.viewport.copy(t.viewport),this.texture=t.texture.clone(),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.depthTexture=t.depthTexture,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Ve.prototype=Object.assign(Object.create(Ue.prototype),{constructor:Ve,isWebGLMultisampleRenderTarget:!0,copy:function(t){return Ue.prototype.copy.call(this,t),this.samples=t.samples,this}}),Ge.prototype=Object.create(Ue.prototype),Ge.prototype.constructor=Ge,Ge.prototype.isWebGLRenderTargetCube=!0,We.prototype=Object.create(je.prototype),We.prototype.constructor=We,We.prototype.isDataTexture=!0,Object.assign($e.prototype,{isBox3:!0,set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromArray:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.length;s<l;s+=3){var c=t[s],u=t[s+1],h=t[s+2];c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromBufferAttribute:function(t){for(var e=1/0,n=1/0,i=1/0,r=-1/0,o=-1/0,a=-1/0,s=0,l=t.count;s<l;s++){var c=t.getX(s),u=t.getY(s),h=t.getZ(s);c<e&&(e=c),u<n&&(n=u),h<i&&(i=h),c>r&&(r=c),u>o&&(o=u),h>a&&(a=h)}return this.min.set(e,n,i),this.max.set(r,o,a),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new Ne;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),setFromObject:function(t){return this.makeEmpty(),this.expandByObject(t)},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box3: .getCenter() target is now required"),t=new Ne),this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box3: .getSize() target is now required"),t=new Ne),this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},expandByObject:function(){var t,e,n,i=new Ne;function r(r){var o=r.geometry;if(void 0!==o)if(o.isGeometry){var a=o.vertices;for(e=0,n=a.length;e<n;e++)i.copy(a[e]),i.applyMatrix4(r.matrixWorld),t.expandByPoint(i)}else if(o.isBufferGeometry){var s=o.attributes.position;if(void 0!==s)for(e=0,n=s.count;e<n;e++)i.fromBufferAttribute(s,e).applyMatrix4(r.matrixWorld),t.expandByPoint(i)}}return function(e){return t=this,e.updateMatrixWorld(!0),e.traverse(r),this}}(),containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y||t.z<this.min.z||t.z>this.max.z)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .getParameter() target is now required"),e=new Ne),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y||t.max.z<this.min.z||t.min.z>this.max.z)},intersectsSphere:function(){var t=new Ne;return function(e){return this.clampPoint(e.center,t),t.distanceToSquared(e.center)<=e.radius*e.radius}}(),intersectsPlane:function(t){var e,n;return t.normal.x>0?(e=t.normal.x*this.min.x,n=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,n=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,n+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,n+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,n+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,n+=t.normal.z*this.min.z),e<=-t.constant&&n>=-t.constant},intersectsTriangle:function(){var t=new Ne,e=new Ne,n=new Ne,i=new Ne,r=new Ne,o=new Ne,a=new Ne,s=new Ne,l=new Ne,c=new Ne;function u(i){var r,o;for(r=0,o=i.length-3;r<=o;r+=3){a.fromArray(i,r);var s=l.x*Math.abs(a.x)+l.y*Math.abs(a.y)+l.z*Math.abs(a.z),c=t.dot(a),u=e.dot(a),h=n.dot(a);if(Math.max(-Math.max(c,u,h),Math.min(c,u,h))>s)return!1}return!0}return function(a){if(this.isEmpty())return!1;this.getCenter(s),l.subVectors(this.max,s),t.subVectors(a.a,s),e.subVectors(a.b,s),n.subVectors(a.c,s),i.subVectors(e,t),r.subVectors(n,e),o.subVectors(t,n);var h=[0,-i.z,i.y,0,-r.z,r.y,0,-o.z,o.y,i.z,0,-i.x,r.z,0,-r.x,o.z,0,-o.x,-i.y,i.x,0,-r.y,r.x,0,-o.y,o.x,0];return!!u(h)&&(h=[1,0,0,0,1,0,0,0,1],!!u(h)&&(c.crossVectors(i,r),h=[c.x,c.y,c.z],u(h)))}}(),clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box3: .clampPoint() target is now required"),e=new Ne),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new Ne;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),getBoundingSphere:function(){var t=new Ne;return function(e){return void 0===e&&console.error("THREE.Box3: .getBoundingSphere() target is now required"),this.getCenter(e.center),e.radius=.5*this.getSize(t).length(),e}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},applyMatrix4:function(){var t=[new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne,new Ne];return function(e){return this.isEmpty()?this:(t[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),t[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),t[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),t[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),t[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),t[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),t[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),t[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(t),this)}}(),translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(qe.prototype,{set:function(t,e){return this.center.copy(t),this.radius=e,this},setFromPoints:function(){var t=new $e;return function(e,n){var i=this.center;void 0!==n?i.copy(n):t.setFromPoints(e).getCenter(i);for(var r=0,o=0,a=e.length;o<a;o++)r=Math.max(r,i.distanceToSquared(e[o]));return this.radius=Math.sqrt(r),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.center.copy(t.center),this.radius=t.radius,this},empty:function(){return this.radius<=0},containsPoint:function(t){return t.distanceToSquared(this.center)<=this.radius*this.radius},distanceToPoint:function(t){return t.distanceTo(this.center)-this.radius},intersectsSphere:function(t){var e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e},intersectsBox:function(t){return t.intersectsSphere(this)},intersectsPlane:function(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius},clampPoint:function(t,e){var n=this.center.distanceToSquared(t);return void 0===e&&(console.warn("THREE.Sphere: .clampPoint() target is now required"),e=new Ne),e.copy(t),n>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e},getBoundingBox:function(t){return void 0===t&&(console.warn("THREE.Sphere: .getBoundingBox() target is now required"),t=new $e),t.set(this.center,this.center),t.expandByScalar(this.radius),t},applyMatrix4:function(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this},translate:function(t){return this.center.add(t),this},equals:function(t){return t.center.equals(this.center)&&t.radius===this.radius}}),Object.assign(Ye.prototype,{set:function(t,e){return this.normal.copy(t),this.constant=e,this},setComponents:function(t,e,n,i){return this.normal.set(t,e,n),this.constant=i,this},setFromNormalAndCoplanarPoint:function(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this},setFromCoplanarPoints:function(){var t=new Ne,e=new Ne;return function(n,i,r){var o=t.subVectors(r,i).cross(e.subVectors(n,i)).normalize();return this.setFromNormalAndCoplanarPoint(o,n),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.normal.copy(t.normal),this.constant=t.constant,this},normalize:function(){var t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this},negate:function(){return this.constant*=-1,this.normal.negate(),this},distanceToPoint:function(t){return this.normal.dot(t)+this.constant},distanceToSphere:function(t){return this.distanceToPoint(t.center)-t.radius},projectPoint:function(t,e){return void 0===e&&(console.warn("THREE.Plane: .projectPoint() target is now required"),e=new Ne),e.copy(this.normal).multiplyScalar(-this.distanceToPoint(t)).add(t)},intersectLine:function(){var t=new Ne;return function(e,n){void 0===n&&(console.warn("THREE.Plane: .intersectLine() target is now required"),n=new Ne);var i=e.delta(t),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(e.start)?n.copy(e.start):void 0;var o=-(e.start.dot(this.normal)+this.constant)/r;return o<0||o>1?void 0:n.copy(i).multiplyScalar(o).add(e.start)}}(),intersectsLine:function(t){var e=this.distanceToPoint(t.start),n=this.distanceToPoint(t.end);return e<0&&n>0||n<0&&e>0},intersectsBox:function(t){return t.intersectsPlane(this)},intersectsSphere:function(t){return t.intersectsPlane(this)},coplanarPoint:function(t){return void 0===t&&(console.warn("THREE.Plane: .coplanarPoint() target is now required"),t=new Ne),t.copy(this.normal).multiplyScalar(-this.constant)},applyMatrix4:function(){var t=new Ne,e=new ze;return function(n,i){var r=i||e.getNormalMatrix(n),o=this.coplanarPoint(t).applyMatrix4(n),a=this.normal.applyMatrix3(r).normalize();return this.constant=-o.dot(a),this}}(),translate:function(t){return this.constant-=t.dot(this.normal),this},equals:function(t){return t.normal.equals(this.normal)&&t.constant===this.constant}}),Object.assign(Xe.prototype,{set:function(t,e,n,i,r,o){var a=this.planes;return a[0].copy(t),a[1].copy(e),a[2].copy(n),a[3].copy(i),a[4].copy(r),a[5].copy(o),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){for(var e=this.planes,n=0;n<6;n++)e[n].copy(t.planes[n]);return this},setFromMatrix:function(t){var e=this.planes,n=t.elements,i=n[0],r=n[1],o=n[2],a=n[3],s=n[4],l=n[5],c=n[6],u=n[7],h=n[8],d=n[9],p=n[10],f=n[11],m=n[12],v=n[13],g=n[14],y=n[15];return e[0].setComponents(a-i,u-s,f-h,y-m).normalize(),e[1].setComponents(a+i,u+s,f+h,y+m).normalize(),e[2].setComponents(a+r,u+l,f+d,y+v).normalize(),e[3].setComponents(a-r,u-l,f-d,y-v).normalize(),e[4].setComponents(a-o,u-c,f-p,y-g).normalize(),e[5].setComponents(a+o,u+c,f+p,y+g).normalize(),this},intersectsObject:function(){var t=new qe;return function(e){var n=e.geometry;return null===n.boundingSphere&&n.computeBoundingSphere(),t.copy(n.boundingSphere).applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSprite:function(){var t=new qe;return function(e){return t.center.set(0,0,0),t.radius=.7071067811865476,t.applyMatrix4(e.matrixWorld),this.intersectsSphere(t)}}(),intersectsSphere:function(t){for(var e=this.planes,n=t.center,i=-t.radius,r=0;r<6;r++){var o=e[r].distanceToPoint(n);if(o<i)return!1}return!0},intersectsBox:function(){var t=new Ne;return function(e){for(var n=this.planes,i=0;i<6;i++){var r=n[i];if(t.x=r.normal.x>0?e.max.x:e.min.x,t.y=r.normal.y>0?e.max.y:e.min.y,t.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(t)<0)return!1}return!0}}(),containsPoint:function(t){for(var e=this.planes,n=0;n<6;n++)if(e[n].distanceToPoint(t)<0)return!1;return!0}}),Object.assign(Ze.prototype,{isMatrix4:!0,set:function(t,e,n,i,r,o,a,s,l,c,u,h,d,p,f,m){var v=this.elements;return v[0]=t,v[4]=e,v[8]=n,v[12]=i,v[1]=r,v[5]=o,v[9]=a,v[13]=s,v[2]=l,v[6]=c,v[10]=u,v[14]=h,v[3]=d,v[7]=p,v[11]=f,v[15]=m,this},identity:function(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this},clone:function(){return(new Ze).fromArray(this.elements)},copy:function(t){var e=this.elements,n=t.elements;return e[0]=n[0],e[1]=n[1],e[2]=n[2],e[3]=n[3],e[4]=n[4],e[5]=n[5],e[6]=n[6],e[7]=n[7],e[8]=n[8],e[9]=n[9],e[10]=n[10],e[11]=n[11],e[12]=n[12],e[13]=n[13],e[14]=n[14],e[15]=n[15],this},copyPosition:function(t){var e=this.elements,n=t.elements;return e[12]=n[12],e[13]=n[13],e[14]=n[14],this},extractBasis:function(t,e,n){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this},makeBasis:function(t,e,n){return this.set(t.x,e.x,n.x,0,t.y,e.y,n.y,0,t.z,e.z,n.z,0,0,0,0,1),this},extractRotation:function(){var t=new Ne;return function(e){var n=this.elements,i=e.elements,r=1/t.setFromMatrixColumn(e,0).length(),o=1/t.setFromMatrixColumn(e,1).length(),a=1/t.setFromMatrixColumn(e,2).length();return n[0]=i[0]*r,n[1]=i[1]*r,n[2]=i[2]*r,n[3]=0,n[4]=i[4]*o,n[5]=i[5]*o,n[6]=i[6]*o,n[7]=0,n[8]=i[8]*a,n[9]=i[9]*a,n[10]=i[10]*a,n[11]=0,n[12]=0,n[13]=0,n[14]=0,n[15]=1,this}}(),makeRotationFromEuler:function(t){t&&t.isEuler||console.error("THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var e=this.elements,n=t.x,i=t.y,r=t.z,o=Math.cos(n),a=Math.sin(n),s=Math.cos(i),l=Math.sin(i),c=Math.cos(r),u=Math.sin(r);if("XYZ"===t.order){var h=o*c,d=o*u,p=a*c,f=a*u;e[0]=s*c,e[4]=-s*u,e[8]=l,e[1]=d+p*l,e[5]=h-f*l,e[9]=-a*s,e[2]=f-h*l,e[6]=p+d*l,e[10]=o*s}else if("YXZ"===t.order){var m=s*c,v=s*u,g=l*c,y=l*u;e[0]=m+y*a,e[4]=g*a-v,e[8]=o*l,e[1]=o*u,e[5]=o*c,e[9]=-a,e[2]=v*a-g,e[6]=y+m*a,e[10]=o*s}else if("ZXY"===t.order){m=s*c,v=s*u,g=l*c,y=l*u;e[0]=m-y*a,e[4]=-o*u,e[8]=g+v*a,e[1]=v+g*a,e[5]=o*c,e[9]=y-m*a,e[2]=-o*l,e[6]=a,e[10]=o*s}else if("ZYX"===t.order){h=o*c,d=o*u,p=a*c,f=a*u;e[0]=s*c,e[4]=p*l-d,e[8]=h*l+f,e[1]=s*u,e[5]=f*l+h,e[9]=d*l-p,e[2]=-l,e[6]=a*s,e[10]=o*s}else if("YZX"===t.order){var b=o*s,x=o*l,w=a*s,_=a*l;e[0]=s*c,e[4]=_-b*u,e[8]=w*u+x,e[1]=u,e[5]=o*c,e[9]=-a*c,e[2]=-l*c,e[6]=x*u+w,e[10]=b-_*u}else if("XZY"===t.order){b=o*s,x=o*l,w=a*s,_=a*l;e[0]=s*c,e[4]=-u,e[8]=l*c,e[1]=b*u+_,e[5]=o*c,e[9]=x*u-w,e[2]=w*u-x,e[6]=a*c,e[10]=_*u+b}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this},makeRotationFromQuaternion:function(){var t=new Ne(0,0,0),e=new Ne(1,1,1);return function(n){return this.compose(t,n,e)}}(),lookAt:function(){var t=new Ne,e=new Ne,n=new Ne;return function(i,r,o){var a=this.elements;return n.subVectors(i,r),0===n.lengthSq()&&(n.z=1),n.normalize(),t.crossVectors(o,n),0===t.lengthSq()&&(1===Math.abs(o.z)?n.x+=1e-4:n.z+=1e-4,n.normalize(),t.crossVectors(o,n)),t.normalize(),e.crossVectors(n,t),a[0]=t.x,a[4]=e.x,a[8]=n.x,a[1]=t.y,a[5]=e.y,a[9]=n.y,a[2]=t.z,a[6]=e.z,a[10]=n.z,this}}(),multiply:function(t,e){return void 0!==e?(console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(t,e)):this.multiplyMatrices(this,t)},premultiply:function(t){return this.multiplyMatrices(t,this)},multiplyMatrices:function(t,e){var n=t.elements,i=e.elements,r=this.elements,o=n[0],a=n[4],s=n[8],l=n[12],c=n[1],u=n[5],h=n[9],d=n[13],p=n[2],f=n[6],m=n[10],v=n[14],g=n[3],y=n[7],b=n[11],x=n[15],w=i[0],_=i[4],M=i[8],E=i[12],S=i[1],T=i[5],A=i[9],C=i[13],L=i[2],P=i[6],O=i[10],R=i[14],k=i[3],D=i[7],I=i[11],N=i[15];return r[0]=o*w+a*S+s*L+l*k,r[4]=o*_+a*T+s*P+l*D,r[8]=o*M+a*A+s*O+l*I,r[12]=o*E+a*C+s*R+l*N,r[1]=c*w+u*S+h*L+d*k,r[5]=c*_+u*T+h*P+d*D,r[9]=c*M+u*A+h*O+d*I,r[13]=c*E+u*C+h*R+d*N,r[2]=p*w+f*S+m*L+v*k,r[6]=p*_+f*T+m*P+v*D,r[10]=p*M+f*A+m*O+v*I,r[14]=p*E+f*C+m*R+v*N,r[3]=g*w+y*S+b*L+x*k,r[7]=g*_+y*T+b*P+x*D,r[11]=g*M+y*A+b*O+x*I,r[15]=g*E+y*C+b*R+x*N,this},multiplyScalar:function(t){var e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this},applyToBufferAttribute:function(){var t=new Ne;return function(e){for(var n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.applyMatrix4(this),e.setXYZ(n,t.x,t.y,t.z);return e}}(),determinant:function(){var t=this.elements,e=t[0],n=t[4],i=t[8],r=t[12],o=t[1],a=t[5],s=t[9],l=t[13],c=t[2],u=t[6],h=t[10],d=t[14],p=t[3],f=t[7],m=t[11],v=t[15];return p*(+r*s*u-i*l*u-r*a*h+n*l*h+i*a*d-n*s*d)+f*(+e*s*d-e*l*h+r*o*h-i*o*d+i*l*c-r*s*c)+m*(+e*l*u-e*a*d-r*o*u+n*o*d+r*a*c-n*l*c)+v*(-i*a*c-e*s*u+e*a*h+i*o*u-n*o*h+n*s*c)},transpose:function(){var t,e=this.elements;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this},setPosition:function(t,e,n){var i=this.elements;return t.isVector3?(i[12]=t.x,i[13]=t.y,i[14]=t.z):(i[12]=t,i[13]=e,i[14]=n),this},getInverse:function(t,e){var n=this.elements,i=t.elements,r=i[0],o=i[1],a=i[2],s=i[3],l=i[4],c=i[5],u=i[6],h=i[7],d=i[8],p=i[9],f=i[10],m=i[11],v=i[12],g=i[13],y=i[14],b=i[15],x=p*y*h-g*f*h+g*u*m-c*y*m-p*u*b+c*f*b,w=v*f*h-d*y*h-v*u*m+l*y*m+d*u*b-l*f*b,_=d*g*h-v*p*h+v*c*m-l*g*m-d*c*b+l*p*b,M=v*p*u-d*g*u-v*c*f+l*g*f+d*c*y-l*p*y,E=r*x+o*w+a*_+s*M;if(0===E){var S="THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0";if(!0===e)throw new Error(S);return console.warn(S),this.identity()}var T=1/E;return n[0]=x*T,n[1]=(g*f*s-p*y*s-g*a*m+o*y*m+p*a*b-o*f*b)*T,n[2]=(c*y*s-g*u*s+g*a*h-o*y*h-c*a*b+o*u*b)*T,n[3]=(p*u*s-c*f*s-p*a*h+o*f*h+c*a*m-o*u*m)*T,n[4]=w*T,n[5]=(d*y*s-v*f*s+v*a*m-r*y*m-d*a*b+r*f*b)*T,n[6]=(v*u*s-l*y*s-v*a*h+r*y*h+l*a*b-r*u*b)*T,n[7]=(l*f*s-d*u*s+d*a*h-r*f*h-l*a*m+r*u*m)*T,n[8]=_*T,n[9]=(v*p*s-d*g*s-v*o*m+r*g*m+d*o*b-r*p*b)*T,n[10]=(l*g*s-v*c*s+v*o*h-r*g*h-l*o*b+r*c*b)*T,n[11]=(d*c*s-l*p*s-d*o*h+r*p*h+l*o*m-r*c*m)*T,n[12]=M*T,n[13]=(d*g*a-v*p*a+v*o*f-r*g*f-d*o*y+r*p*y)*T,n[14]=(v*c*a-l*g*a-v*o*u+r*g*u+l*o*y-r*c*y)*T,n[15]=(l*p*a-d*c*a+d*o*u-r*p*u-l*o*f+r*c*f)*T,this},scale:function(t){var e=this.elements,n=t.x,i=t.y,r=t.z;return e[0]*=n,e[4]*=i,e[8]*=r,e[1]*=n,e[5]*=i,e[9]*=r,e[2]*=n,e[6]*=i,e[10]*=r,e[3]*=n,e[7]*=i,e[11]*=r,this},getMaxScaleOnAxis:function(){var t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],n=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],i=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,n,i))},makeTranslation:function(t,e,n){return this.set(1,0,0,t,0,1,0,e,0,0,1,n,0,0,0,1),this},makeRotationX:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(1,0,0,0,0,e,-n,0,0,n,e,0,0,0,0,1),this},makeRotationY:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,0,n,0,0,1,0,0,-n,0,e,0,0,0,0,1),this},makeRotationZ:function(t){var e=Math.cos(t),n=Math.sin(t);return this.set(e,-n,0,0,n,e,0,0,0,0,1,0,0,0,0,1),this},makeRotationAxis:function(t,e){var n=Math.cos(e),i=Math.sin(e),r=1-n,o=t.x,a=t.y,s=t.z,l=r*o,c=r*a;return this.set(l*o+n,l*a-i*s,l*s+i*a,0,l*a+i*s,c*a+n,c*s-i*o,0,l*s-i*a,c*s+i*o,r*s*s+n,0,0,0,0,1),this},makeScale:function(t,e,n){return this.set(t,0,0,0,0,e,0,0,0,0,n,0,0,0,0,1),this},makeShear:function(t,e,n){return this.set(1,e,n,0,t,1,n,0,t,e,1,0,0,0,0,1),this},compose:function(t,e,n){var i=this.elements,r=e._x,o=e._y,a=e._z,s=e._w,l=r+r,c=o+o,u=a+a,h=r*l,d=r*c,p=r*u,f=o*c,m=o*u,v=a*u,g=s*l,y=s*c,b=s*u,x=n.x,w=n.y,_=n.z;return i[0]=(1-(f+v))*x,i[1]=(d+b)*x,i[2]=(p-y)*x,i[3]=0,i[4]=(d-b)*w,i[5]=(1-(h+v))*w,i[6]=(m+g)*w,i[7]=0,i[8]=(p+y)*_,i[9]=(m-g)*_,i[10]=(1-(h+f))*_,i[11]=0,i[12]=t.x,i[13]=t.y,i[14]=t.z,i[15]=1,this},decompose:function(){var t=new Ne,e=new Ze;return function(n,i,r){var o=this.elements,a=t.set(o[0],o[1],o[2]).length(),s=t.set(o[4],o[5],o[6]).length(),l=t.set(o[8],o[9],o[10]).length(),c=this.determinant();c<0&&(a=-a),n.x=o[12],n.y=o[13],n.z=o[14],e.copy(this);var u=1/a,h=1/s,d=1/l;return e.elements[0]*=u,e.elements[1]*=u,e.elements[2]*=u,e.elements[4]*=h,e.elements[5]*=h,e.elements[6]*=h,e.elements[8]*=d,e.elements[9]*=d,e.elements[10]*=d,i.setFromRotationMatrix(e),r.x=a,r.y=s,r.z=l,this}}(),makePerspective:function(t,e,n,i,r,o){void 0===o&&console.warn("THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.");var a=this.elements,s=2*r/(e-t),l=2*r/(n-i),c=(e+t)/(e-t),u=(n+i)/(n-i),h=-(o+r)/(o-r),d=-2*o*r/(o-r);return a[0]=s,a[4]=0,a[8]=c,a[12]=0,a[1]=0,a[5]=l,a[9]=u,a[13]=0,a[2]=0,a[6]=0,a[10]=h,a[14]=d,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this},makeOrthographic:function(t,e,n,i,r,o){var a=this.elements,s=1/(e-t),l=1/(n-i),c=1/(o-r),u=(e+t)*s,h=(n+i)*l,d=(o+r)*c;return a[0]=2*s,a[4]=0,a[8]=0,a[12]=-u,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-h,a[2]=0,a[6]=0,a[10]=-2*c,a[14]=-d,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this},equals:function(t){for(var e=this.elements,n=t.elements,i=0;i<16;i++)if(e[i]!==n[i])return!1;return!0},fromArray:function(t,e){void 0===e&&(e=0);for(var n=0;n<16;n++)this.elements[n]=t[n+e];return this},toArray:function(t,e){void 0===t&&(t=[]),void 0===e&&(e=0);var n=this.elements;return t[e]=n[0],t[e+1]=n[1],t[e+2]=n[2],t[e+3]=n[3],t[e+4]=n[4],t[e+5]=n[5],t[e+6]=n[6],t[e+7]=n[7],t[e+8]=n[8],t[e+9]=n[9],t[e+10]=n[10],t[e+11]=n[11],t[e+12]=n[12],t[e+13]=n[13],t[e+14]=n[14],t[e+15]=n[15],t}});var Je="#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n#endif",Ke="#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",Qe="#ifdef ALPHATEST\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n#endif",tn="#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\t#endif\n#endif",en="#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",nn="vec3 transformed = vec3( position );",rn="vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",on="vec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n}\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n#else\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\t}\n\treturn 1.0;\n#endif\n}\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n}\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\treturn Fr * fresnel + F0;\n}\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\treturn 1.0 / ( gl * gv );\n}\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\tfloat D = D_GGX( alpha, dotNH );\n\treturn F * ( G * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\nvec3 BRDF_Specular_GGX_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\treturn specularColor * brdf.x + brdf.y;\n}\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\nfloat G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n}\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}",an="#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",sn="#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\t}\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\tbool clipped = true;\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t}\n\t\tif ( clipped ) discard;\n\t#endif\n#endif",ln="#if NUM_CLIPPING_PLANES > 0\n\t#if ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",cn="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif",un="#if NUM_CLIPPING_PLANES > 0 && ! defined( PHYSICAL ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif",hn="#ifdef USE_COLOR\n\tdiffuseColor.rgb *= vColor;\n#endif",dn="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",pn="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif",fn="#ifdef USE_COLOR\n\tvColor.xyz = color.xyz;\n#endif",mn="#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#define whiteCompliment(a) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n};\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\treturn - distance * planeNormal + point;\n}\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n}\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\treturn dot( weights, color.rgb );\n}",vn="#ifdef ENVMAP_TYPE_CUBE_UV\n#define cubeUV_textureSize (1024.0)\nint getFaceFromDirection(vec3 direction) {\n\tvec3 absDirection = abs(direction);\n\tint face = -1;\n\tif( absDirection.x > absDirection.z ) {\n\t\tif(absDirection.x > absDirection.y )\n\t\t\tface = direction.x > 0.0 ? 0 : 3;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\telse {\n\t\tif(absDirection.z > absDirection.y )\n\t\t\tface = direction.z > 0.0 ? 2 : 5;\n\t\telse\n\t\t\tface = direction.y > 0.0 ? 1 : 4;\n\t}\n\treturn face;\n}\n#define cubeUV_maxLods1  (log2(cubeUV_textureSize*0.25) - 1.0)\n#define cubeUV_rangeClamp (exp2((6.0 - 1.0) * 2.0))\nvec2 MipLevelInfo( vec3 vec, float roughnessLevel, float roughness ) {\n\tfloat scale = exp2(cubeUV_maxLods1 - roughnessLevel);\n\tfloat dxRoughness = dFdx(roughness);\n\tfloat dyRoughness = dFdy(roughness);\n\tvec3 dx = dFdx( vec * scale * dxRoughness );\n\tvec3 dy = dFdy( vec * scale * dyRoughness );\n\tfloat d = max( dot( dx, dx ), dot( dy, dy ) );\n\td = clamp(d, 1.0, cubeUV_rangeClamp);\n\tfloat mipLevel = 0.5 * log2(d);\n\treturn vec2(floor(mipLevel), fract(mipLevel));\n}\n#define cubeUV_maxLods2 (log2(cubeUV_textureSize*0.25) - 2.0)\n#define cubeUV_rcpTextureSize (1.0 / cubeUV_textureSize)\nvec2 getCubeUV(vec3 direction, float roughnessLevel, float mipLevel) {\n\tmipLevel = roughnessLevel > cubeUV_maxLods2 - 3.0 ? 0.0 : mipLevel;\n\tfloat a = 16.0 * cubeUV_rcpTextureSize;\n\tvec2 exp2_packed = exp2( vec2( roughnessLevel, mipLevel ) );\n\tvec2 rcp_exp2_packed = vec2( 1.0 ) / exp2_packed;\n\tfloat powScale = exp2_packed.x * exp2_packed.y;\n\tfloat scale = rcp_exp2_packed.x * rcp_exp2_packed.y * 0.25;\n\tfloat mipOffset = 0.75*(1.0 - rcp_exp2_packed.y) * rcp_exp2_packed.x;\n\tbool bRes = mipLevel == 0.0;\n\tscale =  bRes && (scale < a) ? a : scale;\n\tvec3 r;\n\tvec2 offset;\n\tint face = getFaceFromDirection(direction);\n\tfloat rcpPowScale = 1.0 / powScale;\n\tif( face == 0) {\n\t\tr = vec3(direction.x, -direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 1) {\n\t\tr = vec3(direction.y, direction.x, direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 2) {\n\t\tr = vec3(direction.z, direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.75 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? a : offset.y;\n\t}\n\telse if( face == 3) {\n\t\tr = vec3(direction.x, direction.z, direction.y);\n\t\toffset = vec2(0.0+mipOffset,0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse if( face == 4) {\n\t\tr = vec3(direction.y, direction.x, -direction.z);\n\t\toffset = vec2(scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\telse {\n\t\tr = vec3(direction.z, -direction.x, direction.y);\n\t\toffset = vec2(2.0*scale+mipOffset, 0.5 * rcpPowScale);\n\t\toffset.y = bRes && (offset.y < 2.0*a) ? 0.0 : offset.y;\n\t}\n\tr = normalize(r);\n\tfloat texelOffset = 0.5 * cubeUV_rcpTextureSize;\n\tvec2 s = ( r.yz / abs( r.x ) + vec2( 1.0 ) ) * 0.5;\n\tvec2 base = offset + vec2( texelOffset );\n\treturn base + s * ( scale - 2.0 * texelOffset );\n}\n#define cubeUV_maxLods3 (log2(cubeUV_textureSize*0.25) - 3.0)\nvec4 textureCubeUV( sampler2D envMap, vec3 reflectedDirection, float roughness ) {\n\tfloat roughnessVal = roughness* cubeUV_maxLods3;\n\tfloat r1 = floor(roughnessVal);\n\tfloat r2 = r1 + 1.0;\n\tfloat t = fract(roughnessVal);\n\tvec2 mipInfo = MipLevelInfo(reflectedDirection, r1, roughness);\n\tfloat s = mipInfo.y;\n\tfloat level0 = mipInfo.x;\n\tfloat level1 = level0 + 1.0;\n\tlevel1 = level1 > 5.0 ? 5.0 : level1;\n\tlevel0 += min( floor( s + 0.5 ), 5.0 );\n\tvec2 uv_10 = getCubeUV(reflectedDirection, r1, level0);\n\tvec4 color10 = envMapTexelToLinear(texture2D(envMap, uv_10));\n\tvec2 uv_20 = getCubeUV(reflectedDirection, r2, level0);\n\tvec4 color20 = envMapTexelToLinear(texture2D(envMap, uv_20));\n\tvec4 result = mix(color10, color20, t);\n\treturn vec4(result.rgb, 1.0);\n}\n#endif",gn="vec3 transformedNormal = normalMatrix * objectNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = normalMatrix * objectTangent;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",yn="#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",bn="#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, uv ).x * displacementScale + displacementBias );\n#endif",xn="#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",wn="#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",_n="gl_FragColor = linearToOutputTexel( gl_FragColor );",Mn="\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n}\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}",En="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\tvec2 sampleUV;\n\t\treflectVec = normalize( reflectVec );\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\treflectVec = normalize( reflectVec );\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\tenvColor = envMapTexelToLinear( envColor );\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",Sn="#if defined( USE_ENVMAP ) || defined( PHYSICAL )\n\tuniform float reflectivity;\n\tuniform float envMapIntensity;\n#endif\n#ifdef USE_ENVMAP\n\t#if ! defined( PHYSICAL ) && ( defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) )\n\t\tvarying vec3 vWorldPosition;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( PHYSICAL )\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",Tn="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",An="#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",Cn="#ifdef USE_FOG\n\tfogDepth = -mvPosition.z;\n#endif",Ln="#ifdef USE_FOG\n\tvarying float fogDepth;\n#endif",Pn="#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = whiteCompliment( exp2( - fogDensity * fogDensity * fogDepth * fogDepth * LOG2 ) );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",On="#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",Rn="#ifdef TOON\n\tuniform sampler2D gradientMap;\n\tvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\t\tfloat dotNL = dot( normal, lightDirection );\n\t\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t\t#ifdef USE_GRADIENTMAP\n\t\t\treturn texture2D( gradientMap, coord ).rgb;\n\t\t#else\n\t\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\t\t#endif\n\t}\n#endif",kn="#ifdef USE_LIGHTMAP\n\treflectedLight.indirectDiffuse += PI * texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n#endif",Dn="#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",In="vec3 diffuse = vec3( 1.0 );\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = normalize( -mvPosition.xyz );\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\t\t#endif\n\t}\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\t\t#endif\n\t}\n#endif",Nn="uniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treturn irradiance;\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\t\tif ( angleCos > spotLight.coneCos ) {\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\t\t} else {\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tirradiance *= PI;\n\t\t#endif\n\t\treturn irradiance;\n\t}\n#endif",zn="#if defined( USE_ENVMAP ) && defined( PHYSICAL )\n\tvec3 getLightProbeIndirectIrradiance( const in GeometricContext geometry, const in int maxMIPLevel ) {\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\t\t#else\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\t\t#endif\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t}\n\tfloat getSpecularMIPLevel( const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + 0.79248 - 0.5 * log2( pow2( blinnShininessExponent ) + 1.0 );\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\t}\n\tvec3 getLightProbeIndirectRadiance( const in GeometricContext geometry, const in float blinnShininessExponent, const in int maxMIPLevel ) {\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( -geometry.viewDir, geometry.normal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( -geometry.viewDir, geometry.normal, refractionRatio );\n\t\t#endif\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( blinnShininessExponent, maxMIPLevel );\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, BlinnExponentToGGXRoughness(blinnShininessExponent ));\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#else\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\t\t\t#endif\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\t\t#endif\n\t\treturn envMapColor.rgb * envMapIntensity;\n\t}\n#endif",Bn="BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",Fn="varying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\nstruct BlinnPhongMaterial {\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifdef TOON\n\t\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\t#else\n\t\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\t\tvec3 irradiance = dotNL * directLight.color;\n\t#endif\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n#define Material_LightProbeLOD( material )\t(0)",jn="PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nmaterial.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );\n#ifdef STANDARD\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.clearCoat = saturate( clearCoat );\tmaterial.clearCoatRoughness = clamp( clearCoatRoughness, 0.04, 1.0 );\n#endif",Hn="struct PhysicalMaterial {\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\t#ifndef STANDARD\n\t\tfloat clearCoat;\n\t\tfloat clearCoatRoughness;\n\t#endif\n};\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\nfloat clearCoatDHRApprox( const in float roughness, const in float dotNL ) {\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\tirradiance *= PI;\n\t#endif\n\t#ifndef STANDARD\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\treflectedLight.directSpecular += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry, material.specularColor, material.specularRoughness );\n\treflectedLight.directDiffuse += ( 1.0 - clearCoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#ifndef STANDARD\n\t\treflectedLight.directSpecular += irradiance * material.clearCoat * BRDF_Specular_GGX( directLight, geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\t\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\t#endif\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearCoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifndef STANDARD\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\t\tfloat dotNL = dotNV;\n\t\tfloat clearCoatDHR = material.clearCoat * clearCoatDHRApprox( material.clearCoatRoughness, dotNL );\n\t#else\n\t\tfloat clearCoatDHR = 0.0;\n\t#endif\n\tfloat clearCoatInv = 1.0 - clearCoatDHR;\n\t#if defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec3 singleScattering = vec3( 0.0 );\n\t\tvec3 multiScattering = vec3( 0.0 );\n\t\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\t\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * singleScattering;\n\t\treflectedLight.indirectDiffuse += multiScattering * cosineWeightedIrradiance;\n\t\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\t#else\n\t\treflectedLight.indirectSpecular += clearCoatInv * radiance * BRDF_Specular_GGX_Environment( geometry, material.specularColor, material.specularRoughness );\n\t#endif\n\t#ifndef STANDARD\n\t\treflectedLight.indirectSpecular += clearCoatRadiance * material.clearCoat * BRDF_Specular_GGX_Environment( geometry, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearCoatRoughness );\n\t#endif\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n#define Material_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.specularRoughness )\n#define Material_ClearCoat_BlinnShininessExponent( material )   GGXRoughnessToBlinnExponent( material.clearCoatRoughness )\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",Un="\nGeometricContext geometry;\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = normalize( vViewPosition );\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( pointLight.shadow, directLight.visible ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( spotLight.shadow, directLight.visible ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\t\t#ifdef USE_SHADOWMAP\n\t\tdirectLight.color *= all( bvec2( directionalLight.shadow, directLight.visible ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\t}\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\t\t}\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearCoatRadiance = vec3( 0.0 );\n#endif",Vn="#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec3 lightMapIrradiance = texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\t\t\tlightMapIrradiance *= PI;\n\t\t#endif\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( PHYSICAL ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tirradiance += getLightProbeIndirectIrradiance( geometry, maxMipLevel );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\tradiance += getLightProbeIndirectRadiance( geometry, Material_BlinnShininessExponent( material ), maxMipLevel );\n\t#ifndef STANDARD\n\t\tclearCoatRadiance += getLightProbeIndirectRadiance( geometry, Material_ClearCoat_BlinnShininessExponent( material ), maxMipLevel );\n\t#endif\n#endif",Gn="#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, irradiance, clearCoatRadiance, geometry, material, reflectedLight );\n#endif",Wn="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tgl_FragDepthEXT = log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",$n="#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n#endif",qn="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvarying float vFragDepth;\n\t#else\n\t\tuniform float logDepthBufFC;\n\t#endif\n#endif",Yn="#ifdef USE_LOGDEPTHBUF\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t#else\n\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\t\tgl_Position.z *= gl_Position.w;\n\t#endif\n#endif",Xn="#ifdef USE_MAP\n\tvec4 texelColor = texture2D( map, vUv );\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n#endif",Zn="#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",Jn="#ifdef USE_MAP\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n#endif",Kn="#ifdef USE_MAP\n\tuniform mat3 uvTransform;\n\tuniform sampler2D map;\n#endif",Qn="float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",ti="#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",ei="#ifdef USE_MORPHNORMALS\n\tobjectNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n\tobjectNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n\tobjectNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n\tobjectNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n#endif",ni="#ifdef USE_MORPHTARGETS\n\t#ifndef USE_MORPHNORMALS\n\tuniform float morphTargetInfluences[ 8 ];\n\t#else\n\tuniform float morphTargetInfluences[ 4 ];\n\t#endif\n#endif",ii="#ifdef USE_MORPHTARGETS\n\ttransformed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n\ttransformed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n\ttransformed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n\ttransformed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\t#ifndef USE_MORPHNORMALS\n\ttransformed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n\ttransformed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n\ttransformed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n\ttransformed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\t#endif\n#endif",ri="#ifdef FLAT_SHADED\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t#endif\n\t#ifdef USE_TANGENT\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\t\t#ifdef DOUBLE_SIDED\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t#endif\n#endif",oi="#ifdef USE_NORMALMAP\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t#ifdef FLIP_SIDED\n\t\t\tnormal = - normal;\n\t\t#endif\n\t\t#ifdef DOUBLE_SIDED\n\t\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t#endif\n\t\tnormal = normalize( normalMatrix * normal );\n\t#else\n\t\t#ifdef USE_TANGENT\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy = normalScale * mapN.xy;\n\t\t\tnormal = normalize( vTBN * mapN );\n\t\t#else\n\t\t\tnormal = perturbNormal2Arb( -vViewPosition, normal );\n\t\t#endif\n\t#endif\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n#endif",ai="#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\t#ifdef OBJECTSPACE_NORMALMAP\n\t\tuniform mat3 normalMatrix;\n\t#else\n\t\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\t\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\t\tvec2 st0 = dFdx( vUv.st );\n\t\t\tvec2 st1 = dFdy( vUv.st );\n\t\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s );\n\t\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\t\tvec3 N = normalize( surf_norm );\n\t\t\tmat3 tsn = mat3( S, T, N );\n\t\t\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\t\t\tmapN.xy *= normalScale;\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\treturn normalize( tsn * mapN );\n\t\t}\n\t#endif\n#endif",si="vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\nconst float ShiftRight8 = 1. / 256.;\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8;\treturn r * PackUpscale;\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}",li="#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",ci="vec4 mvPosition = modelViewMatrix * vec4( transformed, 1.0 );\ngl_Position = projectionMatrix * mvPosition;",ui="#if defined( DITHERING )\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",hi="#if defined( DITHERING )\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",di="float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",pi="#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",fi="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = floor( uv * size + 0.5 ) / size;\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\t\tvec2 f = fract( uv * size + 0.5 );\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\t\treturn c;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\t\tbool frustumTest = all( frustumTestVec );\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn shadow;\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\tdp += shadowBias;\n\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#else\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t#endif\n\t}\n#endif",mi="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHTS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHTS ];\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHTS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHTS ];\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHTS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHTS ];\n\t#endif\n#endif",vi="#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\t}\n\t#endif\n#endif",gi="float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHTS > 0\n\tDirectionalLight directionalLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= bool( directionalLight.shadow ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_SPOT_LIGHTS > 0\n\tSpotLight spotLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= bool( spotLight.shadow ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t}\n\t#endif\n\t#if NUM_POINT_LIGHTS > 0\n\tPointLight pointLight;\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= bool( pointLight.shadow ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#endif\n\t#endif\n\treturn shadow;\n}",yi="#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",bi="#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\t#ifdef BONE_TEXTURE\n\t\tuniform sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\t\t\ty = dy * ( y + 0.5 );\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\t\t\treturn bone;\n\t\t}\n\t#else\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\t\tmat4 getBoneMatrix( const in float i ) {\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\t\t}\n\t#endif\n#endif",xi="#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",wi="#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",_i="float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",Mi="#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",Ei="#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",Si="#ifndef saturate\n\t#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn toneMappingExposure * color;\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n}\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n}",Ti="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n#endif",Ai="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif",Ci="#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n#endif",Li="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvarying vec2 vUv2;\n#endif",Pi="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n#endif",Oi="#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\tvUv2 = uv2;\n#endif",Ri="#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\tvec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );\n#endif",ki="uniform sampler2D t2D;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Di="varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",Ii="uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ni="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",zi="#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <logdepthbuf_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\t#endif\n}",Bi="#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n}",Fi="#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",ji="#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",Hi="uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV;\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\tgl_FragColor = mapTexelToLinear( texColor );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n}",Ui="varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",Vi="uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Gi="uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\tvLineDistance = scale * lineDistance;\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",Wi="uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\treflectedLight.indirectDiffuse += texture2D( lightMap, vUv2 ).xyz * lightMapIntensity;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",$i="#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\t#ifdef USE_ENVMAP\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",qi="uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t#endif\n\t#include <lightmap_fragment>\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Yi="#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Xi="#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\t#else\n\t\tvec4 matcapColor = vec4( 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",Zi="#define MATCAP\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#ifndef FLAT_SHADED\n\t\tvNormal = normalize( transformedNormal );\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",Ji="#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",Ki="#define PHONG\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",Qi="#define PHYSICAL\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifndef STANDARD\n\tuniform float clearCoat;\n\tuniform float clearCoatRoughness;\n#endif\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",tr="#define PHYSICAL\nvarying vec3 vViewPosition;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",er="#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n}",nr="#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvarying vec3 vViewPosition;\n#endif\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || ( defined( USE_NORMALMAP ) && ! defined( OBJECTSPACE_NORMALMAP ) )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",ir="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",rr="uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",or="uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <fog_fragment>\n}",ar="#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",sr="uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphatest_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n}",lr="uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",cr={alphamap_fragment:Je,alphamap_pars_fragment:Ke,alphatest_fragment:Qe,aomap_fragment:tn,aomap_pars_fragment:en,begin_vertex:nn,beginnormal_vertex:rn,bsdfs:on,bumpmap_pars_fragment:an,clipping_planes_fragment:sn,clipping_planes_pars_fragment:ln,clipping_planes_pars_vertex:cn,clipping_planes_vertex:un,color_fragment:hn,color_pars_fragment:dn,color_pars_vertex:pn,color_vertex:fn,common:mn,cube_uv_reflection_fragment:vn,defaultnormal_vertex:gn,displacementmap_pars_vertex:yn,displacementmap_vertex:bn,emissivemap_fragment:xn,emissivemap_pars_fragment:wn,encodings_fragment:_n,encodings_pars_fragment:Mn,envmap_fragment:En,envmap_pars_fragment:Sn,envmap_pars_vertex:Tn,envmap_physical_pars_fragment:zn,envmap_vertex:An,fog_vertex:Cn,fog_pars_vertex:Ln,fog_fragment:Pn,fog_pars_fragment:On,gradientmap_pars_fragment:Rn,lightmap_fragment:kn,lightmap_pars_fragment:Dn,lights_lambert_vertex:In,lights_pars_begin:Nn,lights_phong_fragment:Bn,lights_phong_pars_fragment:Fn,lights_physical_fragment:jn,lights_physical_pars_fragment:Hn,lights_fragment_begin:Un,lights_fragment_maps:Vn,lights_fragment_end:Gn,logdepthbuf_fragment:Wn,logdepthbuf_pars_fragment:$n,logdepthbuf_pars_vertex:qn,logdepthbuf_vertex:Yn,map_fragment:Xn,map_pars_fragment:Zn,map_particle_fragment:Jn,map_particle_pars_fragment:Kn,metalnessmap_fragment:Qn,metalnessmap_pars_fragment:ti,morphnormal_vertex:ei,morphtarget_pars_vertex:ni,morphtarget_vertex:ii,normal_fragment_begin:ri,normal_fragment_maps:oi,normalmap_pars_fragment:ai,packing:si,premultiplied_alpha_fragment:li,project_vertex:ci,dithering_fragment:ui,dithering_pars_fragment:hi,roughnessmap_fragment:di,roughnessmap_pars_fragment:pi,shadowmap_pars_fragment:fi,shadowmap_pars_vertex:mi,shadowmap_vertex:vi,shadowmask_pars_fragment:gi,skinbase_vertex:yi,skinning_pars_vertex:bi,skinning_vertex:xi,skinnormal_vertex:wi,specularmap_fragment:_i,specularmap_pars_fragment:Mi,tonemapping_fragment:Ei,tonemapping_pars_fragment:Si,uv_pars_fragment:Ti,uv_pars_vertex:Ai,uv_vertex:Ci,uv2_pars_fragment:Li,uv2_pars_vertex:Pi,uv2_vertex:Oi,worldpos_vertex:Ri,background_frag:ki,background_vert:Di,cube_frag:Ii,cube_vert:Ni,depth_frag:zi,depth_vert:Bi,distanceRGBA_frag:Fi,distanceRGBA_vert:ji,equirect_frag:Hi,equirect_vert:Ui,linedashed_frag:Vi,linedashed_vert:Gi,meshbasic_frag:Wi,meshbasic_vert:$i,meshlambert_frag:qi,meshlambert_vert:Yi,meshmatcap_frag:Xi,meshmatcap_vert:Zi,meshphong_frag:Ji,meshphong_vert:Ki,meshphysical_frag:Qi,meshphysical_vert:tr,normal_frag:er,normal_vert:nr,points_frag:ir,points_vert:rr,shadow_frag:or,shadow_vert:ar,sprite_frag:sr,sprite_vert:lr};function ur(t){var e={};for(var n in t)for(var i in e[n]={},t[n]){var r=t[n][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture)?e[n][i]=r.clone():Array.isArray(r)?e[n][i]=r.slice():e[n][i]=r}return e}function hr(t){for(var e={},n=0;n<t.length;n++){var i=ur(t[n]);for(var r in i)e[r]=i[r]}return e}var dr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function pr(t,e,n){return void 0===e&&void 0===n?this.set(t):this.setRGB(t,e,n)}Object.assign(pr.prototype,{isColor:!0,r:1,g:1,b:1,set:function(t){return t&&t.isColor?this.copy(t):"number"===typeof t?this.setHex(t):"string"===typeof t&&this.setStyle(t),this},setScalar:function(t){return this.r=t,this.g=t,this.b=t,this},setHex:function(t){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,this},setRGB:function(t,e,n){return this.r=t,this.g=e,this.b=n,this},setHSL:function(){function t(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+6*(e-t)*(2/3-n):t}return function(e,n,i){if(e=ke.euclideanModulo(e,1),n=ke.clamp(n,0,1),i=ke.clamp(i,0,1),0===n)this.r=this.g=this.b=i;else{var r=i<=.5?i*(1+n):i+n-i*n,o=2*i-r;this.r=t(o,r,e+1/3),this.g=t(o,r,e),this.b=t(o,r,e-1/3)}return this}}(),setStyle:function(t){function e(e){void 0!==e&&parseFloat(e)<1&&console.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}var n;if(n=/^((?:rgb|hsl)a?)\(\s*([^\)]*)\)/.exec(t)){var i,r=n[1],o=n[2];switch(r){case"rgb":case"rgba":if(i=/^(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(255,parseInt(i[1],10))/255,this.g=Math.min(255,parseInt(i[2],10))/255,this.b=Math.min(255,parseInt(i[3],10))/255,e(i[5]),this;if(i=/^(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o))return this.r=Math.min(100,parseInt(i[1],10))/100,this.g=Math.min(100,parseInt(i[2],10))/100,this.b=Math.min(100,parseInt(i[3],10))/100,e(i[5]),this;break;case"hsl":case"hsla":if(i=/^([0-9]*\.?[0-9]+)\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(,\s*([0-9]*\.?[0-9]+)\s*)?$/.exec(o)){var a=parseFloat(i[1])/360,s=parseInt(i[2],10)/100,l=parseInt(i[3],10)/100;return e(i[5]),this.setHSL(a,s,l)}break}}else if(n=/^\#([A-Fa-f0-9]+)$/.exec(t)){var c=n[1],u=c.length;if(3===u)return this.r=parseInt(c.charAt(0)+c.charAt(0),16)/255,this.g=parseInt(c.charAt(1)+c.charAt(1),16)/255,this.b=parseInt(c.charAt(2)+c.charAt(2),16)/255,this;if(6===u)return this.r=parseInt(c.charAt(0)+c.charAt(1),16)/255,this.g=parseInt(c.charAt(2)+c.charAt(3),16)/255,this.b=parseInt(c.charAt(4)+c.charAt(5),16)/255,this}if(t&&t.length>0){c=dr[t];void 0!==c?this.setHex(c):console.warn("THREE.Color: Unknown color "+t)}return this},clone:function(){return new this.constructor(this.r,this.g,this.b)},copy:function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this},copyGammaToLinear:function(t,e){return void 0===e&&(e=2),this.r=Math.pow(t.r,e),this.g=Math.pow(t.g,e),this.b=Math.pow(t.b,e),this},copyLinearToGamma:function(t,e){void 0===e&&(e=2);var n=e>0?1/e:1;return this.r=Math.pow(t.r,n),this.g=Math.pow(t.g,n),this.b=Math.pow(t.b,n),this},convertGammaToLinear:function(t){return this.copyGammaToLinear(this,t),this},convertLinearToGamma:function(t){return this.copyLinearToGamma(this,t),this},copySRGBToLinear:function(){function t(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),copyLinearToSRGB:function(){function t(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}return function(e){return this.r=t(e.r),this.g=t(e.g),this.b=t(e.b),this}}(),convertSRGBToLinear:function(){return this.copySRGBToLinear(this),this},convertLinearToSRGB:function(){return this.copyLinearToSRGB(this),this},getHex:function(){return 255*this.r<<16^255*this.g<<8^255*this.b<<0},getHexString:function(){return("000000"+this.getHex().toString(16)).slice(-6)},getHSL:function(t){void 0===t&&(console.warn("THREE.Color: .getHSL() target is now required"),t={h:0,s:0,l:0});var e,n,i=this.r,r=this.g,o=this.b,a=Math.max(i,r,o),s=Math.min(i,r,o),l=(s+a)/2;if(s===a)e=0,n=0;else{var c=a-s;switch(n=l<=.5?c/(a+s):c/(2-a-s),a){case i:e=(r-o)/c+(r<o?6:0);break;case r:e=(o-i)/c+2;break;case o:e=(i-r)/c+4;break}e/=6}return t.h=e,t.s=n,t.l=l,t},getStyle:function(){return"rgb("+(255*this.r|0)+","+(255*this.g|0)+","+(255*this.b|0)+")"},offsetHSL:function(){var t={};return function(e,n,i){return this.getHSL(t),t.h+=e,t.s+=n,t.l+=i,this.setHSL(t.h,t.s,t.l),this}}(),add:function(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this},addColors:function(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this},addScalar:function(t){return this.r+=t,this.g+=t,this.b+=t,this},sub:function(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this},multiply:function(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this},multiplyScalar:function(t){return this.r*=t,this.g*=t,this.b*=t,this},lerp:function(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this},lerpHSL:function(){var t={h:0,s:0,l:0},e={h:0,s:0,l:0};return function(n,i){this.getHSL(t),n.getHSL(e);var r=ke.lerp(t.h,e.h,i),o=ke.lerp(t.s,e.s,i),a=ke.lerp(t.l,e.l,i);return this.setHSL(r,o,a),this}}(),equals:function(t){return t.r===this.r&&t.g===this.g&&t.b===this.b},fromArray:function(t,e){return void 0===e&&(e=0),this.r=t[e],this.g=t[e+1],this.b=t[e+2],this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t},toJSON:function(){return this.getHex()}});var fr={common:{diffuse:{value:new pr(15658734)},opacity:{value:1},map:{value:null},uvTransform:{value:new ze},alphaMap:{value:null}},specularmap:{specularMap:{value:null}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},refractionRatio:{value:.98},maxMipLevel:{value:0}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1}},emissivemap:{emissiveMap:{value:null}},bumpmap:{bumpMap:{value:null},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementScale:{value:1},displacementBias:{value:0}},roughnessmap:{roughnessMap:{value:null}},metalnessmap:{metalnessMap:{value:null}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pr(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{}}},spotShadowMap:{value:[]},spotShadowMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{},shadow:{},shadowBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}}},points:{diffuse:{value:new pr(15658734)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},uvTransform:{value:new ze}},sprite:{diffuse:{value:new pr(15658734)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},uvTransform:{value:new ze}}},mr={basic:{uniforms:hr([fr.common,fr.specularmap,fr.envmap,fr.aomap,fr.lightmap,fr.fog]),vertexShader:cr.meshbasic_vert,fragmentShader:cr.meshbasic_frag},lambert:{uniforms:hr([fr.common,fr.specularmap,fr.envmap,fr.aomap,fr.lightmap,fr.emissivemap,fr.fog,fr.lights,{emissive:{value:new pr(0)}}]),vertexShader:cr.meshlambert_vert,fragmentShader:cr.meshlambert_frag},phong:{uniforms:hr([fr.common,fr.specularmap,fr.envmap,fr.aomap,fr.lightmap,fr.emissivemap,fr.bumpmap,fr.normalmap,fr.displacementmap,fr.gradientmap,fr.fog,fr.lights,{emissive:{value:new pr(0)},specular:{value:new pr(1118481)},shininess:{value:30}}]),vertexShader:cr.meshphong_vert,fragmentShader:cr.meshphong_frag},standard:{uniforms:hr([fr.common,fr.envmap,fr.aomap,fr.lightmap,fr.emissivemap,fr.bumpmap,fr.normalmap,fr.displacementmap,fr.roughnessmap,fr.metalnessmap,fr.fog,fr.lights,{emissive:{value:new pr(0)},roughness:{value:.5},metalness:{value:.5},envMapIntensity:{value:1}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},matcap:{uniforms:hr([fr.common,fr.bumpmap,fr.normalmap,fr.displacementmap,fr.fog,{matcap:{value:null}}]),vertexShader:cr.meshmatcap_vert,fragmentShader:cr.meshmatcap_frag},points:{uniforms:hr([fr.points,fr.fog]),vertexShader:cr.points_vert,fragmentShader:cr.points_frag},dashed:{uniforms:hr([fr.common,fr.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cr.linedashed_vert,fragmentShader:cr.linedashed_frag},depth:{uniforms:hr([fr.common,fr.displacementmap]),vertexShader:cr.depth_vert,fragmentShader:cr.depth_frag},normal:{uniforms:hr([fr.common,fr.bumpmap,fr.normalmap,fr.displacementmap,{opacity:{value:1}}]),vertexShader:cr.normal_vert,fragmentShader:cr.normal_frag},sprite:{uniforms:hr([fr.sprite,fr.fog]),vertexShader:cr.sprite_vert,fragmentShader:cr.sprite_frag},background:{uniforms:{uvTransform:{value:new ze},t2D:{value:null}},vertexShader:cr.background_vert,fragmentShader:cr.background_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cr.cube_vert,fragmentShader:cr.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cr.equirect_vert,fragmentShader:cr.equirect_frag},distanceRGBA:{uniforms:hr([fr.common,fr.displacementmap,{referencePosition:{value:new Ne},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cr.distanceRGBA_vert,fragmentShader:cr.distanceRGBA_frag},shadow:{uniforms:hr([fr.lights,fr.fog,{color:{value:new pr(0)},opacity:{value:1}}]),vertexShader:cr.shadow_vert,fragmentShader:cr.shadow_frag}};function vr(){var t=null,e=!1,n=null;function i(r,o){!1!==e&&(n(r,o),t.requestAnimationFrame(i))}return{start:function(){!0!==e&&null!==n&&(t.requestAnimationFrame(i),e=!0)},stop:function(){e=!1},setAnimationLoop:function(t){n=t},setContext:function(e){t=e}}}function gr(t){var e=new WeakMap;function n(e,n){var i=e.array,r=e.dynamic?35048:35044,o=t.createBuffer();t.bindBuffer(n,o),t.bufferData(n,i,r),e.onUploadCallback();var a=5126;return i instanceof Float32Array?a=5126:i instanceof Float64Array?console.warn("THREE.WebGLAttributes: Unsupported data buffer format: Float64Array."):i instanceof Uint16Array?a=5123:i instanceof Int16Array?a=5122:i instanceof Uint32Array?a=5125:i instanceof Int32Array?a=5124:i instanceof Int8Array?a=5120:i instanceof Uint8Array&&(a=5121),{buffer:o,type:a,bytesPerElement:i.BYTES_PER_ELEMENT,version:e.version}}function i(e,n,i){var r=n.array,o=n.updateRange;t.bindBuffer(i,e),!1===n.dynamic?t.bufferData(i,r,35044):-1===o.count?t.bufferSubData(i,0,r):0===o.count?console.error("THREE.WebGLObjects.updateBuffer: dynamic THREE.BufferAttribute marked as needsUpdate but updateRange.count is 0, ensure you are using set methods or updating manually."):(t.bufferSubData(i,o.offset*r.BYTES_PER_ELEMENT,r.subarray(o.offset,o.offset+o.count)),o.count=-1)}function r(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)}function o(n){n.isInterleavedBufferAttribute&&(n=n.data);var i=e.get(n);i&&(t.deleteBuffer(i.buffer),e.delete(n))}function a(t,r){t.isInterleavedBufferAttribute&&(t=t.data);var o=e.get(t);void 0===o?e.set(t,n(t,r)):o.version<t.version&&(i(o.buffer,t,r),o.version=t.version)}return{get:r,remove:o,update:a}}function yr(t,e,n,i,r,o){this.a=t,this.b=e,this.c=n,this.normal=i&&i.isVector3?i:new Ne,this.vertexNormals=Array.isArray(i)?i:[],this.color=r&&r.isColor?r:new pr,this.vertexColors=Array.isArray(r)?r:[],this.materialIndex=void 0!==o?o:0}function br(t,e,n,i){this._x=t||0,this._y=e||0,this._z=n||0,this._order=i||br.DefaultOrder}function xr(){this.mask=1}mr.physical={uniforms:hr([mr.standard.uniforms,{clearCoat:{value:0},clearCoatRoughness:{value:0}}]),vertexShader:cr.meshphysical_vert,fragmentShader:cr.meshphysical_frag},Object.assign(yr.prototype,{clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.a=t.a,this.b=t.b,this.c=t.c,this.normal.copy(t.normal),this.color.copy(t.color),this.materialIndex=t.materialIndex;for(var e=0,n=t.vertexNormals.length;e<n;e++)this.vertexNormals[e]=t.vertexNormals[e].clone();for(e=0,n=t.vertexColors.length;e<n;e++)this.vertexColors[e]=t.vertexColors[e].clone();return this}}),br.RotationOrders=["XYZ","YZX","ZXY","XZY","YXZ","ZYX"],br.DefaultOrder="XYZ",Object.defineProperties(br.prototype,{x:{get:function(){return this._x},set:function(t){this._x=t,this.onChangeCallback()}},y:{get:function(){return this._y},set:function(t){this._y=t,this.onChangeCallback()}},z:{get:function(){return this._z},set:function(t){this._z=t,this.onChangeCallback()}},order:{get:function(){return this._order},set:function(t){this._order=t,this.onChangeCallback()}}}),Object.assign(br.prototype,{isEuler:!0,set:function(t,e,n,i){return this._x=t,this._y=e,this._z=n,this._order=i||this._order,this.onChangeCallback(),this},clone:function(){return new this.constructor(this._x,this._y,this._z,this._order)},copy:function(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this.onChangeCallback(),this},setFromRotationMatrix:function(t,e,n){var i=ke.clamp,r=t.elements,o=r[0],a=r[4],s=r[8],l=r[1],c=r[5],u=r[9],h=r[2],d=r[6],p=r[10];return e=e||this._order,"XYZ"===e?(this._y=Math.asin(i(s,-1,1)),Math.abs(s)<.99999?(this._x=Math.atan2(-u,p),this._z=Math.atan2(-a,o)):(this._x=Math.atan2(d,c),this._z=0)):"YXZ"===e?(this._x=Math.asin(-i(u,-1,1)),Math.abs(u)<.99999?(this._y=Math.atan2(s,p),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-h,o),this._z=0)):"ZXY"===e?(this._x=Math.asin(i(d,-1,1)),Math.abs(d)<.99999?(this._y=Math.atan2(-h,p),this._z=Math.atan2(-a,c)):(this._y=0,this._z=Math.atan2(l,o))):"ZYX"===e?(this._y=Math.asin(-i(h,-1,1)),Math.abs(h)<.99999?(this._x=Math.atan2(d,p),this._z=Math.atan2(l,o)):(this._x=0,this._z=Math.atan2(-a,c))):"YZX"===e?(this._z=Math.asin(i(l,-1,1)),Math.abs(l)<.99999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-h,o)):(this._x=0,this._y=Math.atan2(s,p))):"XZY"===e?(this._z=Math.asin(-i(a,-1,1)),Math.abs(a)<.99999?(this._x=Math.atan2(d,c),this._y=Math.atan2(s,o)):(this._x=Math.atan2(-u,p),this._y=0)):console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: "+e),this._order=e,!1!==n&&this.onChangeCallback(),this},setFromQuaternion:function(){var t=new Ze;return function(e,n,i){return t.makeRotationFromQuaternion(e),this.setFromRotationMatrix(t,n,i)}}(),setFromVector3:function(t,e){return this.set(t.x,t.y,t.z,e||this._order)},reorder:function(){var t=new Ie;return function(e){return t.setFromEuler(this),this.setFromQuaternion(t,e)}}(),equals:function(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order},fromArray:function(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this.onChangeCallback(),this},toArray:function(t,e){return void 0===t&&(t=[]),void 0===e&&(e=0),t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t},toVector3:function(t){return t?t.set(this._x,this._y,this._z):new Ne(this._x,this._y,this._z)},onChange:function(t){return this.onChangeCallback=t,this},onChangeCallback:function(){}}),Object.assign(xr.prototype,{set:function(t){this.mask=1<<t|0},enable:function(t){this.mask|=1<<t|0},toggle:function(t){this.mask^=1<<t|0},disable:function(t){this.mask&=~(1<<t|0)},test:function(t){return 0!==(this.mask&t.mask)}});var wr=0;function _r(){Object.defineProperty(this,"id",{value:wr++}),this.uuid=ke.generateUUID(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=_r.DefaultUp.clone();var t=new Ne,e=new br,n=new Ie,i=new Ne(1,1,1);function r(){n.setFromEuler(e,!1)}function o(){e.setFromQuaternion(n,void 0,!1)}e.onChange(r),n.onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:i},modelViewMatrix:{value:new Ze},normalMatrix:{value:new ze}}),this.matrix=new Ze,this.matrixWorld=new Ze,this.matrixAutoUpdate=_r.DefaultMatrixAutoUpdate,this.matrixWorldNeedsUpdate=!1,this.layers=new xr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.userData={}}_r.DefaultUp=new Ne(0,1,0),_r.DefaultMatrixAutoUpdate=!0,_r.prototype=Object.assign(Object.create(i.prototype),{constructor:_r,isObject3D:!0,onBeforeRender:function(){},onAfterRender:function(){},applyMatrix:function(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)},applyQuaternion:function(t){return this.quaternion.premultiply(t),this},setRotationFromAxisAngle:function(t,e){this.quaternion.setFromAxisAngle(t,e)},setRotationFromEuler:function(t){this.quaternion.setFromEuler(t,!0)},setRotationFromMatrix:function(t){this.quaternion.setFromRotationMatrix(t)},setRotationFromQuaternion:function(t){this.quaternion.copy(t)},rotateOnAxis:function(){var t=new Ie;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.multiply(t),this}}(),rotateOnWorldAxis:function(){var t=new Ie;return function(e,n){return t.setFromAxisAngle(e,n),this.quaternion.premultiply(t),this}}(),rotateX:function(){var t=new Ne(1,0,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateY:function(){var t=new Ne(0,1,0);return function(e){return this.rotateOnAxis(t,e)}}(),rotateZ:function(){var t=new Ne(0,0,1);return function(e){return this.rotateOnAxis(t,e)}}(),translateOnAxis:function(){var t=new Ne;return function(e,n){return t.copy(e).applyQuaternion(this.quaternion),this.position.add(t.multiplyScalar(n)),this}}(),translateX:function(){var t=new Ne(1,0,0);return function(e){return this.translateOnAxis(t,e)}}(),translateY:function(){var t=new Ne(0,1,0);return function(e){return this.translateOnAxis(t,e)}}(),translateZ:function(){var t=new Ne(0,0,1);return function(e){return this.translateOnAxis(t,e)}}(),localToWorld:function(t){return t.applyMatrix4(this.matrixWorld)},worldToLocal:function(){var t=new Ze;return function(e){return e.applyMatrix4(t.getInverse(this.matrixWorld))}}(),lookAt:function(){var t=new Ie,e=new Ze,n=new Ne,i=new Ne;return function(r,o,a){r.isVector3?n.copy(r):n.set(r,o,a);var s=this.parent;this.updateWorldMatrix(!0,!1),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?e.lookAt(i,n,this.up):e.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(e),s&&(e.extractRotation(s.matrixWorld),t.setFromRotationMatrix(e),this.quaternion.premultiply(t.inverse()))}}(),add:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.add(arguments[e]);return this}return t===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(null!==t.parent&&t.parent.remove(t),t.parent=this,t.dispatchEvent({type:"added"}),this.children.push(t)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)},remove:function(t){if(arguments.length>1){for(var e=0;e<arguments.length;e++)this.remove(arguments[e]);return this}var n=this.children.indexOf(t);return-1!==n&&(t.parent=null,t.dispatchEvent({type:"removed"}),this.children.splice(n,1)),this},attach:function(){var t=new Ze;return function(e){return this.updateWorldMatrix(!0,!1),t.getInverse(this.matrixWorld),null!==e.parent&&(e.parent.updateWorldMatrix(!0,!1),t.multiply(e.parent.matrixWorld)),e.applyMatrix(t),e.updateWorldMatrix(!1,!1),this.add(e),this}}(),getObjectById:function(t){return this.getObjectByProperty("id",t)},getObjectByName:function(t){return this.getObjectByProperty("name",t)},getObjectByProperty:function(t,e){if(this[t]===e)return this;for(var n=0,i=this.children.length;n<i;n++){var r=this.children[n],o=r.getObjectByProperty(t,e);if(void 0!==o)return o}},getWorldPosition:function(t){return void 0===t&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),t=new Ne),this.updateMatrixWorld(!0),t.setFromMatrixPosition(this.matrixWorld)},getWorldQuaternion:function(){var t=new Ne,e=new Ne;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new Ie),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,n,e),n}}(),getWorldScale:function(){var t=new Ne,e=new Ie;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new Ne),this.updateMatrixWorld(!0),this.matrixWorld.decompose(t,e,n),n}}(),getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Object3D: .getWorldDirection() target is now required"),t=new Ne),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()},raycast:function(){},traverse:function(t){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverse(t)},traverseVisible:function(t){if(!1!==this.visible){t(this);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].traverseVisible(t)}},traverseAncestors:function(t){var e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))},updateMatrix:function(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0},updateMatrixWorld:function(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,t=!0);for(var e=this.children,n=0,i=e.length;n<i;n++)e[n].updateMatrixWorld(t)},updateWorldMatrix:function(t,e){var n=this.parent;if(!0===t&&null!==n&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),!0===e)for(var i=this.children,r=0,o=i.length;r<o;r++)i[r].updateWorldMatrix(!1,!0)},toJSON:function(t){var e=void 0===t||"string"===typeof t,n={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{}},n.metadata={version:4.5,type:"Object",generator:"Object3D.toJSON"});var i={};function r(e,n){return void 0===e[n.uuid]&&(e[n.uuid]=n.toJSON(t)),n.uuid}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),!0===this.castShadow&&(i.castShadow=!0),!0===this.receiveShadow&&(i.receiveShadow=!0),!1===this.visible&&(i.visible=!1),!1===this.frustumCulled&&(i.frustumCulled=!1),0!==this.renderOrder&&(i.renderOrder=this.renderOrder),"{}"!==JSON.stringify(this.userData)&&(i.userData=this.userData),i.layers=this.layers.mask,i.matrix=this.matrix.toArray(),!1===this.matrixAutoUpdate&&(i.matrixAutoUpdate=!1),this.isMesh&&this.drawMode!==be&&(i.drawMode=this.drawMode),this.isMesh||this.isLine||this.isPoints){i.geometry=r(t.geometries,this.geometry);var o=this.geometry.parameters;if(void 0!==o&&void 0!==o.shapes){var a=o.shapes;if(Array.isArray(a))for(var s=0,l=a.length;s<l;s++){var c=a[s];r(t.shapes,c)}else r(t.shapes,a)}}if(void 0!==this.material)if(Array.isArray(this.material)){var u=[];for(s=0,l=this.material.length;s<l;s++)u.push(r(t.materials,this.material[s]));i.material=u}else i.material=r(t.materials,this.material);if(this.children.length>0){i.children=[];for(s=0;s<this.children.length;s++)i.children.push(this.children[s].toJSON(t).object)}if(e){var h=m(t.geometries),d=m(t.materials),p=m(t.textures),f=m(t.images);a=m(t.shapes);h.length>0&&(n.geometries=h),d.length>0&&(n.materials=d),p.length>0&&(n.textures=p),f.length>0&&(n.images=f),a.length>0&&(n.shapes=a)}return n.object=i,n;function m(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}},clone:function(t){return(new this.constructor).copy(this,t)},copy:function(t,e){if(void 0===e&&(e=!0),this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(var n=0;n<t.children.length;n++){var i=t.children[n];this.add(i.clone())}return this}});var Mr=0;function Er(){Object.defineProperty(this,"id",{value:Mr+=2}),this.uuid=ke.generateUUID(),this.name="",this.type="Geometry",this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.elementsNeedUpdate=!1,this.verticesNeedUpdate=!1,this.uvsNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.lineDistancesNeedUpdate=!1,this.groupsNeedUpdate=!1}function Sr(t,e,n){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=!0===n,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function Tr(t,e,n){Sr.call(this,new Int8Array(t),e,n)}function Ar(t,e,n){Sr.call(this,new Uint8Array(t),e,n)}function Cr(t,e,n){Sr.call(this,new Uint8ClampedArray(t),e,n)}function Lr(t,e,n){Sr.call(this,new Int16Array(t),e,n)}function Pr(t,e,n){Sr.call(this,new Uint16Array(t),e,n)}function Or(t,e,n){Sr.call(this,new Int32Array(t),e,n)}function Rr(t,e,n){Sr.call(this,new Uint32Array(t),e,n)}function kr(t,e,n){Sr.call(this,new Float32Array(t),e,n)}function Dr(t,e,n){Sr.call(this,new Float64Array(t),e,n)}function Ir(){this.vertices=[],this.normals=[],this.colors=[],this.uvs=[],this.uvs2=[],this.groups=[],this.morphTargets={},this.skinWeights=[],this.skinIndices=[],this.boundingBox=null,this.boundingSphere=null,this.verticesNeedUpdate=!1,this.normalsNeedUpdate=!1,this.colorsNeedUpdate=!1,this.uvsNeedUpdate=!1,this.groupsNeedUpdate=!1}function Nr(t){if(0===t.length)return-1/0;for(var e=t[0],n=1,i=t.length;n<i;++n)t[n]>e&&(e=t[n]);return e}Er.prototype=Object.assign(Object.create(i.prototype),{constructor:Er,isGeometry:!0,applyMatrix:function(t){for(var e=(new ze).getNormalMatrix(t),n=0,i=this.vertices.length;n<i;n++){var r=this.vertices[n];r.applyMatrix4(t)}for(n=0,i=this.faces.length;n<i;n++){var o=this.faces[n];o.normal.applyMatrix3(e).normalize();for(var a=0,s=o.vertexNormals.length;a<s;a++)o.vertexNormals[a].applyMatrix3(e).normalize()}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this.verticesNeedUpdate=!0,this.normalsNeedUpdate=!0,this},rotateX:function(){var t=new Ze;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ze;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ze;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Ze;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new Ze;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new _r;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),fromBufferGeometry:function(t){var e=this,n=null!==t.index?t.index.array:void 0,i=t.attributes,r=i.position.array,o=void 0!==i.normal?i.normal.array:void 0,a=void 0!==i.color?i.color.array:void 0,s=void 0!==i.uv?i.uv.array:void 0,l=void 0!==i.uv2?i.uv2.array:void 0;void 0!==l&&(this.faceVertexUvs[1]=[]);for(var c=0;c<r.length;c+=3)e.vertices.push((new Ne).fromArray(r,c)),void 0!==a&&e.colors.push((new pr).fromArray(a,c));function u(t,n,i,r){var c=void 0===a?[]:[e.colors[t].clone(),e.colors[n].clone(),e.colors[i].clone()],u=void 0===o?[]:[(new Ne).fromArray(o,3*t),(new Ne).fromArray(o,3*n),(new Ne).fromArray(o,3*i)],h=new yr(t,n,i,u,c,r);e.faces.push(h),void 0!==s&&e.faceVertexUvs[0].push([(new De).fromArray(s,2*t),(new De).fromArray(s,2*n),(new De).fromArray(s,2*i)]),void 0!==l&&e.faceVertexUvs[1].push([(new De).fromArray(l,2*t),(new De).fromArray(l,2*n),(new De).fromArray(l,2*i)])}var h=t.groups;if(h.length>0)for(c=0;c<h.length;c++)for(var d=h[c],p=d.start,f=d.count,m=p,v=p+f;m<v;m+=3)void 0!==n?u(n[m],n[m+1],n[m+2],d.materialIndex):u(m,m+1,m+2,d.materialIndex);else if(void 0!==n)for(c=0;c<n.length;c+=3)u(n[c],n[c+1],n[c+2]);else for(c=0;c<r.length/3;c+=3)u(c,c+1,c+2);return this.computeFaceNormals(),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),this},center:function(){var t=new Ne;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),normalize:function(){this.computeBoundingSphere();var t=this.boundingSphere.center,e=this.boundingSphere.radius,n=0===e?1:1/e,i=new Ze;return i.set(n,0,0,-n*t.x,0,n,0,-n*t.y,0,0,n,-n*t.z,0,0,0,1),this.applyMatrix(i),this},computeFaceNormals:function(){for(var t=new Ne,e=new Ne,n=0,i=this.faces.length;n<i;n++){var r=this.faces[n],o=this.vertices[r.a],a=this.vertices[r.b],s=this.vertices[r.c];t.subVectors(s,a),e.subVectors(o,a),t.cross(e),t.normalize(),r.normal.copy(t)}},computeVertexNormals:function(t){var e,n,i,r,o,a;for(void 0===t&&(t=!0),a=new Array(this.vertices.length),e=0,n=this.vertices.length;e<n;e++)a[e]=new Ne;if(t){var s,l,c,u=new Ne,h=new Ne;for(i=0,r=this.faces.length;i<r;i++)o=this.faces[i],s=this.vertices[o.a],l=this.vertices[o.b],c=this.vertices[o.c],u.subVectors(c,l),h.subVectors(s,l),u.cross(h),a[o.a].add(u),a[o.b].add(u),a[o.c].add(u)}else for(this.computeFaceNormals(),i=0,r=this.faces.length;i<r;i++)o=this.faces[i],a[o.a].add(o.normal),a[o.b].add(o.normal),a[o.c].add(o.normal);for(e=0,n=this.vertices.length;e<n;e++)a[e].normalize();for(i=0,r=this.faces.length;i<r;i++){o=this.faces[i];var d=o.vertexNormals;3===d.length?(d[0].copy(a[o.a]),d[1].copy(a[o.b]),d[2].copy(a[o.c])):(d[0]=a[o.a].clone(),d[1]=a[o.b].clone(),d[2]=a[o.c].clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeFlatVertexNormals:function(){var t,e,n;for(this.computeFaceNormals(),t=0,e=this.faces.length;t<e;t++){n=this.faces[t];var i=n.vertexNormals;3===i.length?(i[0].copy(n.normal),i[1].copy(n.normal),i[2].copy(n.normal)):(i[0]=n.normal.clone(),i[1]=n.normal.clone(),i[2]=n.normal.clone())}this.faces.length>0&&(this.normalsNeedUpdate=!0)},computeMorphNormals:function(){var t,e,n,i,r;for(n=0,i=this.faces.length;n<i;n++)for(r=this.faces[n],r.__originalFaceNormal?r.__originalFaceNormal.copy(r.normal):r.__originalFaceNormal=r.normal.clone(),r.__originalVertexNormals||(r.__originalVertexNormals=[]),t=0,e=r.vertexNormals.length;t<e;t++)r.__originalVertexNormals[t]?r.__originalVertexNormals[t].copy(r.vertexNormals[t]):r.__originalVertexNormals[t]=r.vertexNormals[t].clone();var o=new Er;for(o.faces=this.faces,t=0,e=this.morphTargets.length;t<e;t++){if(!this.morphNormals[t]){this.morphNormals[t]={},this.morphNormals[t].faceNormals=[],this.morphNormals[t].vertexNormals=[];var a=this.morphNormals[t].faceNormals,s=this.morphNormals[t].vertexNormals;for(n=0,i=this.faces.length;n<i;n++)l=new Ne,c={a:new Ne,b:new Ne,c:new Ne},a.push(l),s.push(c)}var l,c,u=this.morphNormals[t];for(o.vertices=this.morphTargets[t].vertices,o.computeFaceNormals(),o.computeVertexNormals(),n=0,i=this.faces.length;n<i;n++)r=this.faces[n],l=u.faceNormals[n],c=u.vertexNormals[n],l.copy(r.normal),c.a.copy(r.vertexNormals[0]),c.b.copy(r.vertexNormals[1]),c.c.copy(r.vertexNormals[2])}for(n=0,i=this.faces.length;n<i;n++)r=this.faces[n],r.normal=r.__originalFaceNormal,r.vertexNormals=r.__originalVertexNormals},computeBoundingBox:function(){null===this.boundingBox&&(this.boundingBox=new $e),this.boundingBox.setFromPoints(this.vertices)},computeBoundingSphere:function(){null===this.boundingSphere&&(this.boundingSphere=new qe),this.boundingSphere.setFromPoints(this.vertices)},merge:function(t,e,n){if(t&&t.isGeometry){var i,r=this.vertices.length,o=this.vertices,a=t.vertices,s=this.faces,l=t.faces,c=this.faceVertexUvs[0],u=t.faceVertexUvs[0],h=this.colors,d=t.colors;void 0===n&&(n=0),void 0!==e&&(i=(new ze).getNormalMatrix(e));for(var p=0,f=a.length;p<f;p++){var m=a[p],v=m.clone();void 0!==e&&v.applyMatrix4(e),o.push(v)}for(p=0,f=d.length;p<f;p++)h.push(d[p].clone());for(p=0,f=l.length;p<f;p++){var g,y,b,x=l[p],w=x.vertexNormals,_=x.vertexColors;g=new yr(x.a+r,x.b+r,x.c+r),g.normal.copy(x.normal),void 0!==i&&g.normal.applyMatrix3(i).normalize();for(var M=0,E=w.length;M<E;M++)y=w[M].clone(),void 0!==i&&y.applyMatrix3(i).normalize(),g.vertexNormals.push(y);g.color.copy(x.color);for(M=0,E=_.length;M<E;M++)b=_[M],g.vertexColors.push(b.clone());g.materialIndex=x.materialIndex+n,s.push(g)}for(p=0,f=u.length;p<f;p++){var S=u[p],T=[];if(void 0!==S){for(M=0,E=S.length;M<E;M++)T.push(S[M].clone());c.push(T)}}}else console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.",t)},mergeMesh:function(t){t&&t.isMesh?(t.matrixAutoUpdate&&t.updateMatrix(),this.merge(t.geometry,t.matrix)):console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.",t)},mergeVertices:function(){var t,e,n,i,r,o,a,s,l={},c=[],u=[],h=4,d=Math.pow(10,h);for(n=0,i=this.vertices.length;n<i;n++)t=this.vertices[n],e=Math.round(t.x*d)+"_"+Math.round(t.y*d)+"_"+Math.round(t.z*d),void 0===l[e]?(l[e]=n,c.push(this.vertices[n]),u[n]=c.length-1):u[n]=u[l[e]];var p=[];for(n=0,i=this.faces.length;n<i;n++){r=this.faces[n],r.a=u[r.a],r.b=u[r.b],r.c=u[r.c],o=[r.a,r.b,r.c];for(var f=0;f<3;f++)if(o[f]===o[(f+1)%3]){p.push(n);break}}for(n=p.length-1;n>=0;n--){var m=p[n];for(this.faces.splice(m,1),a=0,s=this.faceVertexUvs.length;a<s;a++)this.faceVertexUvs[a].splice(m,1)}var v=this.vertices.length-c.length;return this.vertices=c,v},setFromPoints:function(t){this.vertices=[];for(var e=0,n=t.length;e<n;e++){var i=t[e];this.vertices.push(new Ne(i.x,i.y,i.z||0))}return this},sortFacesByMaterialIndex:function(){for(var t=this.faces,e=t.length,n=0;n<e;n++)t[n]._id=n;function i(t,e){return t.materialIndex-e.materialIndex}t.sort(i);var r,o,a=this.faceVertexUvs[0],s=this.faceVertexUvs[1];a&&a.length===e&&(r=[]),s&&s.length===e&&(o=[]);for(n=0;n<e;n++){var l=t[n]._id;r&&r.push(a[l]),o&&o.push(s[l])}r&&(this.faceVertexUvs[0]=r),o&&(this.faceVertexUvs[1]=o)},toJSON:function(){var t={metadata:{version:4.5,type:"Geometry",generator:"Geometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}for(var i=[],r=0;r<this.vertices.length;r++){var o=this.vertices[r];i.push(o.x,o.y,o.z)}var a=[],s=[],l={},c=[],u={},h=[],d={};for(r=0;r<this.faces.length;r++){var p=this.faces[r],f=!0,m=!1,v=void 0!==this.faceVertexUvs[0][r],g=p.normal.length()>0,y=p.vertexNormals.length>0,b=1!==p.color.r||1!==p.color.g||1!==p.color.b,x=p.vertexColors.length>0,w=0;if(w=S(w,0,0),w=S(w,1,f),w=S(w,2,m),w=S(w,3,v),w=S(w,4,g),w=S(w,5,y),w=S(w,6,b),w=S(w,7,x),a.push(w),a.push(p.a,p.b,p.c),a.push(p.materialIndex),v){var _=this.faceVertexUvs[0][r];a.push(C(_[0]),C(_[1]),C(_[2]))}if(g&&a.push(T(p.normal)),y){var M=p.vertexNormals;a.push(T(M[0]),T(M[1]),T(M[2]))}if(b&&a.push(A(p.color)),x){var E=p.vertexColors;a.push(A(E[0]),A(E[1]),A(E[2]))}}function S(t,e,n){return n?t|1<<e:t&~(1<<e)}function T(t){var e=t.x.toString()+t.y.toString()+t.z.toString();return void 0!==l[e]?l[e]:(l[e]=s.length/3,s.push(t.x,t.y,t.z),l[e])}function A(t){var e=t.r.toString()+t.g.toString()+t.b.toString();return void 0!==u[e]?u[e]:(u[e]=c.length,c.push(t.getHex()),u[e])}function C(t){var e=t.x.toString()+t.y.toString();return void 0!==d[e]?d[e]:(d[e]=h.length/2,h.push(t.x,t.y),d[e])}return t.data={},t.data.vertices=i,t.data.normals=s,c.length>0&&(t.data.colors=c),h.length>0&&(t.data.uvs=[h]),t.data.faces=a,t},clone:function(){return(new Er).copy(this)},copy:function(t){var e,n,i,r,o,a;this.vertices=[],this.colors=[],this.faces=[],this.faceVertexUvs=[[]],this.morphTargets=[],this.morphNormals=[],this.skinWeights=[],this.skinIndices=[],this.lineDistances=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var s=t.vertices;for(e=0,n=s.length;e<n;e++)this.vertices.push(s[e].clone());var l=t.colors;for(e=0,n=l.length;e<n;e++)this.colors.push(l[e].clone());var c=t.faces;for(e=0,n=c.length;e<n;e++)this.faces.push(c[e].clone());for(e=0,n=t.faceVertexUvs.length;e<n;e++){var u=t.faceVertexUvs[e];for(void 0===this.faceVertexUvs[e]&&(this.faceVertexUvs[e]=[]),i=0,r=u.length;i<r;i++){var h=u[i],d=[];for(o=0,a=h.length;o<a;o++){var p=h[o];d.push(p.clone())}this.faceVertexUvs[e].push(d)}}var f=t.morphTargets;for(e=0,n=f.length;e<n;e++){var m={};if(m.name=f[e].name,void 0!==f[e].vertices)for(m.vertices=[],i=0,r=f[e].vertices.length;i<r;i++)m.vertices.push(f[e].vertices[i].clone());if(void 0!==f[e].normals)for(m.normals=[],i=0,r=f[e].normals.length;i<r;i++)m.normals.push(f[e].normals[i].clone());this.morphTargets.push(m)}var v=t.morphNormals;for(e=0,n=v.length;e<n;e++){var g={};if(void 0!==v[e].vertexNormals)for(g.vertexNormals=[],i=0,r=v[e].vertexNormals.length;i<r;i++){var y=v[e].vertexNormals[i],b={};b.a=y.a.clone(),b.b=y.b.clone(),b.c=y.c.clone(),g.vertexNormals.push(b)}if(void 0!==v[e].faceNormals)for(g.faceNormals=[],i=0,r=v[e].faceNormals.length;i<r;i++)g.faceNormals.push(v[e].faceNormals[i].clone());this.morphNormals.push(g)}var x=t.skinWeights;for(e=0,n=x.length;e<n;e++)this.skinWeights.push(x[e].clone());var w=t.skinIndices;for(e=0,n=w.length;e<n;e++)this.skinIndices.push(w[e].clone());var _=t.lineDistances;for(e=0,n=_.length;e<n;e++)this.lineDistances.push(_[e]);var M=t.boundingBox;null!==M&&(this.boundingBox=M.clone());var E=t.boundingSphere;return null!==E&&(this.boundingSphere=E.clone()),this.elementsNeedUpdate=t.elementsNeedUpdate,this.verticesNeedUpdate=t.verticesNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.lineDistancesNeedUpdate=t.lineDistancesNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(Sr.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(Sr.prototype,{isBufferAttribute:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.itemSize:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.itemSize,n*=e.itemSize;for(var i=0,r=this.itemSize;i<r;i++)this.array[t+i]=e.array[n+i];return this},copyArray:function(t){return this.array.set(t),this},copyColorsArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyColorsArray(): color is undefined",i),o=new pr),e[n++]=o.r,e[n++]=o.g,e[n++]=o.b}return this},copyVector2sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector2sArray(): vector is undefined",i),o=new De),e[n++]=o.x,e[n++]=o.y}return this},copyVector3sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector3sArray(): vector is undefined",i),o=new Ne),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z}return this},copyVector4sArray:function(t){for(var e=this.array,n=0,i=0,r=t.length;i<r;i++){var o=t[i];void 0===o&&(console.warn("THREE.BufferAttribute.copyVector4sArray(): vector is undefined",i),o=new He),e[n++]=o.x,e[n++]=o.y,e[n++]=o.z,e[n++]=o.w}return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},getX:function(t){return this.array[t*this.itemSize]},setX:function(t,e){return this.array[t*this.itemSize]=e,this},getY:function(t){return this.array[t*this.itemSize+1]},setY:function(t,e){return this.array[t*this.itemSize+1]=e,this},getZ:function(t){return this.array[t*this.itemSize+2]},setZ:function(t,e){return this.array[t*this.itemSize+2]=e,this},getW:function(t){return this.array[t*this.itemSize+3]},setW:function(t,e){return this.array[t*this.itemSize+3]=e,this},setXY:function(t,e,n){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t*=this.itemSize,this.array[t+0]=e,this.array[t+1]=n,this.array[t+2]=i,this.array[t+3]=r,this},onUpload:function(t){return this.onUploadCallback=t,this},clone:function(){return new this.constructor(this.array,this.itemSize).copy(this)},toJSON:function(){return{itemSize:this.itemSize,type:this.array.constructor.name,array:Array.prototype.slice.call(this.array),normalized:this.normalized}}}),Tr.prototype=Object.create(Sr.prototype),Tr.prototype.constructor=Tr,Ar.prototype=Object.create(Sr.prototype),Ar.prototype.constructor=Ar,Cr.prototype=Object.create(Sr.prototype),Cr.prototype.constructor=Cr,Lr.prototype=Object.create(Sr.prototype),Lr.prototype.constructor=Lr,Pr.prototype=Object.create(Sr.prototype),Pr.prototype.constructor=Pr,Or.prototype=Object.create(Sr.prototype),Or.prototype.constructor=Or,Rr.prototype=Object.create(Sr.prototype),Rr.prototype.constructor=Rr,kr.prototype=Object.create(Sr.prototype),kr.prototype.constructor=kr,Dr.prototype=Object.create(Sr.prototype),Dr.prototype.constructor=Dr,Object.assign(Ir.prototype,{computeGroups:function(t){for(var e,n=[],i=void 0,r=t.faces,o=0;o<r.length;o++){var a=r[o];a.materialIndex!==i&&(i=a.materialIndex,void 0!==e&&(e.count=3*o-e.start,n.push(e)),e={start:3*o,materialIndex:i})}void 0!==e&&(e.count=3*o-e.start,n.push(e)),this.groups=n},fromGeometry:function(t){var e,n=t.faces,i=t.vertices,r=t.faceVertexUvs,o=r[0]&&r[0].length>0,a=r[1]&&r[1].length>0,s=t.morphTargets,l=s.length;if(l>0){e=[];for(var c=0;c<l;c++)e[c]={name:s[c].name,data:[]};this.morphTargets.position=e}var u,h=t.morphNormals,d=h.length;if(d>0){u=[];for(c=0;c<d;c++)u[c]={name:h[c].name,data:[]};this.morphTargets.normal=u}var p=t.skinIndices,f=t.skinWeights,m=p.length===i.length,v=f.length===i.length;i.length>0&&0===n.length&&console.error("THREE.DirectGeometry: Faceless geometries are not supported.");for(c=0;c<n.length;c++){var g=n[c];this.vertices.push(i[g.a],i[g.b],i[g.c]);var y=g.vertexNormals;if(3===y.length)this.normals.push(y[0],y[1],y[2]);else{var b=g.normal;this.normals.push(b,b,b)}var x=g.vertexColors;if(3===x.length)this.colors.push(x[0],x[1],x[2]);else{var w=g.color;this.colors.push(w,w,w)}if(!0===o){var _=r[0][c];void 0!==_?this.uvs.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ",c),this.uvs.push(new De,new De,new De))}if(!0===a){_=r[1][c];void 0!==_?this.uvs2.push(_[0],_[1],_[2]):(console.warn("THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ",c),this.uvs2.push(new De,new De,new De))}for(var M=0;M<l;M++){var E=s[M].vertices;e[M].data.push(E[g.a],E[g.b],E[g.c])}for(M=0;M<d;M++){var S=h[M].vertexNormals[c];u[M].data.push(S.a,S.b,S.c)}m&&this.skinIndices.push(p[g.a],p[g.b],p[g.c]),v&&this.skinWeights.push(f[g.a],f[g.b],f[g.c])}return this.computeGroups(t),this.verticesNeedUpdate=t.verticesNeedUpdate,this.normalsNeedUpdate=t.normalsNeedUpdate,this.colorsNeedUpdate=t.colorsNeedUpdate,this.uvsNeedUpdate=t.uvsNeedUpdate,this.groupsNeedUpdate=t.groupsNeedUpdate,this}});var zr=1;function Br(){Object.defineProperty(this,"id",{value:zr+=2}),this.uuid=ke.generateUUID(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}function Fr(t,e,n,i,r,o){Er.call(this),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o},this.fromBufferGeometry(new jr(t,e,n,i,r,o)),this.mergeVertices()}function jr(t,e,n,i,r,o){Br.call(this),this.type="BoxBufferGeometry",this.parameters={width:t,height:e,depth:n,widthSegments:i,heightSegments:r,depthSegments:o};var a=this;t=t||1,e=e||1,n=n||1,i=Math.floor(i)||1,r=Math.floor(r)||1,o=Math.floor(o)||1;var s=[],l=[],c=[],u=[],h=0,d=0;function p(t,e,n,i,r,o,p,f,m,v,g){var y,b,x=o/m,w=p/v,_=o/2,M=p/2,E=f/2,S=m+1,T=v+1,A=0,C=0,L=new Ne;for(b=0;b<T;b++){var P=b*w-M;for(y=0;y<S;y++){var O=y*x-_;L[t]=O*i,L[e]=P*r,L[n]=E,l.push(L.x,L.y,L.z),L[t]=0,L[e]=0,L[n]=f>0?1:-1,c.push(L.x,L.y,L.z),u.push(y/m),u.push(1-b/v),A+=1}}for(b=0;b<v;b++)for(y=0;y<m;y++){var R=h+y+S*b,k=h+y+S*(b+1),D=h+(y+1)+S*(b+1),I=h+(y+1)+S*b;s.push(R,k,I),s.push(k,D,I),C+=6}a.addGroup(d,C,g),d+=C,h+=A}p("z","y","x",-1,-1,n,e,t,o,r,0),p("z","y","x",1,-1,n,e,-t,o,r,1),p("x","z","y",1,1,t,n,e,i,o,2),p("x","z","y",1,-1,t,n,-e,i,o,3),p("x","y","z",1,-1,t,e,n,i,r,4),p("x","y","z",-1,-1,t,e,-n,i,r,5),this.setIndex(s),this.addAttribute("position",new kr(l,3)),this.addAttribute("normal",new kr(c,3)),this.addAttribute("uv",new kr(u,2))}function Hr(t,e,n,i){Er.call(this),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},this.fromBufferGeometry(new Ur(t,e,n,i)),this.mergeVertices()}function Ur(t,e,n,i){Br.call(this),this.type="PlaneBufferGeometry",this.parameters={width:t,height:e,widthSegments:n,heightSegments:i},t=t||1,e=e||1;var r,o,a=t/2,s=e/2,l=Math.floor(n)||1,c=Math.floor(i)||1,u=l+1,h=c+1,d=t/l,p=e/c,f=[],m=[],v=[],g=[];for(o=0;o<h;o++){var y=o*p-s;for(r=0;r<u;r++){var b=r*d-a;m.push(b,-y,0),v.push(0,0,1),g.push(r/l),g.push(1-o/c)}}for(o=0;o<c;o++)for(r=0;r<l;r++){var x=r+u*o,w=r+u*(o+1),_=r+1+u*(o+1),M=r+1+u*o;f.push(x,w,M),f.push(w,_,M)}this.setIndex(f),this.addAttribute("position",new kr(m,3)),this.addAttribute("normal",new kr(v,3)),this.addAttribute("uv",new kr(g,2))}Br.prototype=Object.assign(Object.create(i.prototype),{constructor:Br,isBufferGeometry:!0,getIndex:function(){return this.index},setIndex:function(t){Array.isArray(t)?this.index=new(Nr(t)>65535?Rr:Pr)(t,1):this.index=t},addAttribute:function(t,e){return e&&e.isBufferAttribute||e&&e.isInterleavedBufferAttribute?"index"===t?(console.warn("THREE.BufferGeometry.addAttribute: Use .setIndex() for index attribute."),this.setIndex(e),this):(this.attributes[t]=e,this):(console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."),this.addAttribute(t,new Sr(arguments[1],arguments[2])))},getAttribute:function(t){return this.attributes[t]},removeAttribute:function(t){return delete this.attributes[t],this},addGroup:function(t,e,n){this.groups.push({start:t,count:e,materialIndex:void 0!==n?n:0})},clearGroups:function(){this.groups=[]},setDrawRange:function(t,e){this.drawRange.start=t,this.drawRange.count=e},applyMatrix:function(t){var e=this.attributes.position;void 0!==e&&(t.applyToBufferAttribute(e),e.needsUpdate=!0);var n=this.attributes.normal;if(void 0!==n){var i=(new ze).getNormalMatrix(t);i.applyToBufferAttribute(n),n.needsUpdate=!0}var r=this.attributes.tangent;if(void 0!==r){i=(new ze).getNormalMatrix(t);i.applyToBufferAttribute(r),r.needsUpdate=!0}return null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this},rotateX:function(){var t=new Ze;return function(e){return t.makeRotationX(e),this.applyMatrix(t),this}}(),rotateY:function(){var t=new Ze;return function(e){return t.makeRotationY(e),this.applyMatrix(t),this}}(),rotateZ:function(){var t=new Ze;return function(e){return t.makeRotationZ(e),this.applyMatrix(t),this}}(),translate:function(){var t=new Ze;return function(e,n,i){return t.makeTranslation(e,n,i),this.applyMatrix(t),this}}(),scale:function(){var t=new Ze;return function(e,n,i){return t.makeScale(e,n,i),this.applyMatrix(t),this}}(),lookAt:function(){var t=new _r;return function(e){t.lookAt(e),t.updateMatrix(),this.applyMatrix(t.matrix)}}(),center:function(){var t=new Ne;return function(){return this.computeBoundingBox(),this.boundingBox.getCenter(t).negate(),this.translate(t.x,t.y,t.z),this}}(),setFromObject:function(t){var e=t.geometry;if(t.isPoints||t.isLine){var n=new kr(3*e.vertices.length,3),i=new kr(3*e.colors.length,3);if(this.addAttribute("position",n.copyVector3sArray(e.vertices)),this.addAttribute("color",i.copyColorsArray(e.colors)),e.lineDistances&&e.lineDistances.length===e.vertices.length){var r=new kr(e.lineDistances.length,1);this.addAttribute("lineDistance",r.copyArray(e.lineDistances))}null!==e.boundingSphere&&(this.boundingSphere=e.boundingSphere.clone()),null!==e.boundingBox&&(this.boundingBox=e.boundingBox.clone())}else t.isMesh&&e&&e.isGeometry&&this.fromGeometry(e);return this},setFromPoints:function(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n];e.push(r.x,r.y,r.z||0)}return this.addAttribute("position",new kr(e,3)),this},updateFromObject:function(t){var e,n=t.geometry;if(t.isMesh){var i=n.__directGeometry;if(!0===n.elementsNeedUpdate&&(i=void 0,n.elementsNeedUpdate=!1),void 0===i)return this.fromGeometry(n);i.verticesNeedUpdate=n.verticesNeedUpdate,i.normalsNeedUpdate=n.normalsNeedUpdate,i.colorsNeedUpdate=n.colorsNeedUpdate,i.uvsNeedUpdate=n.uvsNeedUpdate,i.groupsNeedUpdate=n.groupsNeedUpdate,n.verticesNeedUpdate=!1,n.normalsNeedUpdate=!1,n.colorsNeedUpdate=!1,n.uvsNeedUpdate=!1,n.groupsNeedUpdate=!1,n=i}return!0===n.verticesNeedUpdate&&(e=this.attributes.position,void 0!==e&&(e.copyVector3sArray(n.vertices),e.needsUpdate=!0),n.verticesNeedUpdate=!1),!0===n.normalsNeedUpdate&&(e=this.attributes.normal,void 0!==e&&(e.copyVector3sArray(n.normals),e.needsUpdate=!0),n.normalsNeedUpdate=!1),!0===n.colorsNeedUpdate&&(e=this.attributes.color,void 0!==e&&(e.copyColorsArray(n.colors),e.needsUpdate=!0),n.colorsNeedUpdate=!1),n.uvsNeedUpdate&&(e=this.attributes.uv,void 0!==e&&(e.copyVector2sArray(n.uvs),e.needsUpdate=!0),n.uvsNeedUpdate=!1),n.lineDistancesNeedUpdate&&(e=this.attributes.lineDistance,void 0!==e&&(e.copyArray(n.lineDistances),e.needsUpdate=!0),n.lineDistancesNeedUpdate=!1),n.groupsNeedUpdate&&(n.computeGroups(t.geometry),this.groups=n.groups,n.groupsNeedUpdate=!1),this},fromGeometry:function(t){return t.__directGeometry=(new Ir).fromGeometry(t),this.fromDirectGeometry(t.__directGeometry)},fromDirectGeometry:function(t){var e=new Float32Array(3*t.vertices.length);if(this.addAttribute("position",new Sr(e,3).copyVector3sArray(t.vertices)),t.normals.length>0){var n=new Float32Array(3*t.normals.length);this.addAttribute("normal",new Sr(n,3).copyVector3sArray(t.normals))}if(t.colors.length>0){var i=new Float32Array(3*t.colors.length);this.addAttribute("color",new Sr(i,3).copyColorsArray(t.colors))}if(t.uvs.length>0){var r=new Float32Array(2*t.uvs.length);this.addAttribute("uv",new Sr(r,2).copyVector2sArray(t.uvs))}if(t.uvs2.length>0){var o=new Float32Array(2*t.uvs2.length);this.addAttribute("uv2",new Sr(o,2).copyVector2sArray(t.uvs2))}for(var a in this.groups=t.groups,t.morphTargets){for(var s=[],l=t.morphTargets[a],c=0,u=l.length;c<u;c++){var h=l[c],d=new kr(3*h.data.length,3);d.name=h.name,s.push(d.copyVector3sArray(h.data))}this.morphAttributes[a]=s}if(t.skinIndices.length>0){var p=new kr(4*t.skinIndices.length,4);this.addAttribute("skinIndex",p.copyVector4sArray(t.skinIndices))}if(t.skinWeights.length>0){var f=new kr(4*t.skinWeights.length,4);this.addAttribute("skinWeight",f.copyVector4sArray(t.skinWeights))}return null!==t.boundingSphere&&(this.boundingSphere=t.boundingSphere.clone()),null!==t.boundingBox&&(this.boundingBox=t.boundingBox.clone()),this},computeBoundingBox:function(){var t=new $e;return function(){null===this.boundingBox&&(this.boundingBox=new $e);var e=this.attributes.position,n=this.morphAttributes.position;if(void 0!==e){if(this.boundingBox.setFromBufferAttribute(e),n)for(var i=0,r=n.length;i<r;i++){var o=n[i];t.setFromBufferAttribute(o),this.boundingBox.expandByPoint(t.min),this.boundingBox.expandByPoint(t.max)}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}}(),computeBoundingSphere:function(){var t=new $e,e=new $e,n=new Ne;return function(){null===this.boundingSphere&&(this.boundingSphere=new qe);var i=this.attributes.position,r=this.morphAttributes.position;if(i){var o=this.boundingSphere.center;if(t.setFromBufferAttribute(i),r)for(var a=0,s=r.length;a<s;a++){var l=r[a];e.setFromBufferAttribute(l),t.expandByPoint(e.min),t.expandByPoint(e.max)}t.getCenter(o);var c=0;for(a=0,s=i.count;a<s;a++)n.fromBufferAttribute(i,a),c=Math.max(c,o.distanceToSquared(n));if(r)for(a=0,s=r.length;a<s;a++){l=r[a];for(var u=0,h=l.count;u<h;u++)n.fromBufferAttribute(l,u),c=Math.max(c,o.distanceToSquared(n))}this.boundingSphere.radius=Math.sqrt(c),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}}(),computeFaceNormals:function(){},computeVertexNormals:function(){var t=this.index,e=this.attributes;if(e.position){var n=e.position.array;if(void 0===e.normal)this.addAttribute("normal",new Sr(new Float32Array(n.length),3));else for(var i=e.normal.array,r=0,o=i.length;r<o;r++)i[r]=0;var a,s,l,c=e.normal.array,u=new Ne,h=new Ne,d=new Ne,p=new Ne,f=new Ne;if(t){var m=t.array;for(r=0,o=t.count;r<o;r+=3)a=3*m[r+0],s=3*m[r+1],l=3*m[r+2],u.fromArray(n,a),h.fromArray(n,s),d.fromArray(n,l),p.subVectors(d,h),f.subVectors(u,h),p.cross(f),c[a]+=p.x,c[a+1]+=p.y,c[a+2]+=p.z,c[s]+=p.x,c[s+1]+=p.y,c[s+2]+=p.z,c[l]+=p.x,c[l+1]+=p.y,c[l+2]+=p.z}else for(r=0,o=n.length;r<o;r+=9)u.fromArray(n,r),h.fromArray(n,r+3),d.fromArray(n,r+6),p.subVectors(d,h),f.subVectors(u,h),p.cross(f),c[r]=p.x,c[r+1]=p.y,c[r+2]=p.z,c[r+3]=p.x,c[r+4]=p.y,c[r+5]=p.z,c[r+6]=p.x,c[r+7]=p.y,c[r+8]=p.z;this.normalizeNormals(),e.normal.needsUpdate=!0}},merge:function(t,e){if(t&&t.isBufferGeometry){void 0===e&&(e=0,console.warn("THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge."));var n=this.attributes;for(var i in n)if(void 0!==t.attributes[i])for(var r=n[i],o=r.array,a=t.attributes[i],s=a.array,l=a.itemSize*e,c=Math.min(s.length,o.length-l),u=0,h=l;u<c;u++,h++)o[h]=s[u];return this}console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.",t)},normalizeNormals:function(){var t=new Ne;return function(){for(var e=this.attributes.normal,n=0,i=e.count;n<i;n++)t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.normalize(),e.setXYZ(n,t.x,t.y,t.z)}}(),toNonIndexed:function(){function t(t,e){for(var n=t.array,i=t.itemSize,r=new n.constructor(e.length*i),o=0,a=0,s=0,l=e.length;s<l;s++){o=e[s]*i;for(var c=0;c<i;c++)r[a++]=n[o++]}return new Sr(r,i)}if(null===this.index)return console.warn("THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed."),this;var e=new Br,n=this.index.array,i=this.attributes;for(var r in i){var o=i[r],a=t(o,n);e.addAttribute(r,a)}var s=this.morphAttributes;for(r in s){for(var l=[],c=s[r],u=0,h=c.length;u<h;u++){o=c[u],a=t(o,n);l.push(a)}e.morphAttributes[r]=l}for(var d=this.groups,p=(u=0,d.length);u<p;u++){var f=d[u];e.addGroup(f.start,f.count,f.materialIndex)}return e},toJSON:function(){var t={metadata:{version:4.5,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){var e=this.parameters;for(var n in e)void 0!==e[n]&&(t[n]=e[n]);return t}t.data={attributes:{}};var i=this.index;null!==i&&(t.data.index={type:i.array.constructor.name,array:Array.prototype.slice.call(i.array)});var r=this.attributes;for(var n in r){var o=r[n],a=o.toJSON();""!==o.name&&(a.name=o.name),t.data.attributes[n]=a}var s={},l=!1;for(var n in this.morphAttributes){for(var c=this.morphAttributes[n],u=[],h=0,d=c.length;h<d;h++){o=c[h],a=o.toJSON();""!==o.name&&(a.name=o.name),u.push(a)}u.length>0&&(s[n]=u,l=!0)}l&&(t.data.morphAttributes=s);var p=this.groups;p.length>0&&(t.data.groups=JSON.parse(JSON.stringify(p)));var f=this.boundingSphere;return null!==f&&(t.data.boundingSphere={center:f.center.toArray(),radius:f.radius}),t},clone:function(){return(new Br).copy(this)},copy:function(t){var e,n,i;this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.name=t.name;var r=t.index;null!==r&&this.setIndex(r.clone());var o=t.attributes;for(e in o){var a=o[e];this.addAttribute(e,a.clone())}var s=t.morphAttributes;for(e in s){var l=[],c=s[e];for(n=0,i=c.length;n<i;n++)l.push(c[n].clone());this.morphAttributes[e]=l}var u=t.groups;for(n=0,i=u.length;n<i;n++){var h=u[n];this.addGroup(h.start,h.count,h.materialIndex)}var d=t.boundingBox;null!==d&&(this.boundingBox=d.clone());var p=t.boundingSphere;return null!==p&&(this.boundingSphere=p.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Fr.prototype=Object.create(Er.prototype),Fr.prototype.constructor=Fr,jr.prototype=Object.create(Br.prototype),jr.prototype.constructor=jr,Hr.prototype=Object.create(Er.prototype),Hr.prototype.constructor=Hr,Ur.prototype=Object.create(Br.prototype),Ur.prototype.constructor=Ur;var Vr=0;function Gr(){Object.defineProperty(this,"id",{value:Vr++}),this.uuid=ke.generateUUID(),this.name="",this.type="Material",this.fog=!0,this.lights=!0,this.blending=x,this.side=d,this.flatShading=!1,this.vertexTangents=!1,this.vertexColors=v,this.opacity=1,this.transparent=!1,this.blendSrc=D,this.blendDst=I,this.blendEquation=S,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=G,this.depthTest=!0,this.depthWrite=!0,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaTest=0,this.premultipliedAlpha=!1,this.visible=!0,this.userData={},this.needsUpdate=!0}Gr.prototype=Object.assign(Object.create(i.prototype),{constructor:Gr,isMaterial:!0,onBeforeCompile:function(){},setValues:function(t){if(void 0!==t)for(var e in t){var n=t[e];if(void 0!==n)if("shading"!==e){var i=this[e];void 0!==i?i&&i.isColor?i.set(n):i&&i.isVector3&&n&&n.isVector3?i.copy(n):this[e]=n:console.warn("THREE."+this.type+": '"+e+"' is not a property of this material.")}else console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=n===m;else console.warn("THREE.Material: '"+e+"' parameter is undefined.")}},toJSON:function(t){var e=void 0===t||"string"===typeof t;e&&(t={textures:{},images:{}});var n={metadata:{version:4.5,type:"Material",generator:"Material.toJSON"}};function i(t){var e=[];for(var n in t){var i=t[n];delete i.metadata,e.push(i)}return e}if(n.uuid=this.uuid,n.type=this.type,""!==this.name&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),void 0!==this.roughness&&(n.roughness=this.roughness),void 0!==this.metalness&&(n.metalness=this.metalness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),1!==this.emissiveIntensity&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),void 0!==this.shininess&&(n.shininess=this.shininess),void 0!==this.clearCoat&&(n.clearCoat=this.clearCoat),void 0!==this.clearCoatRoughness&&(n.clearCoatRoughness=this.clearCoatRoughness),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(t).uuid),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(t).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(t).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(t).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(t).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(t).uuid,n.reflectivity=this.reflectivity,void 0!==this.combine&&(n.combine=this.combine),void 0!==this.envMapIntensity&&(n.envMapIntensity=this.envMapIntensity)),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.size&&(n.size=this.size),void 0!==this.sizeAttenuation&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==x&&(n.blending=this.blending),!0===this.flatShading&&(n.flatShading=this.flatShading),this.side!==d&&(n.side=this.side),this.vertexColors!==v&&(n.vertexColors=this.vertexColors),this.opacity<1&&(n.opacity=this.opacity),!0===this.transparent&&(n.transparent=this.transparent),n.depthFunc=this.depthFunc,n.depthTest=this.depthTest,n.depthWrite=this.depthWrite,0!==this.rotation&&(n.rotation=this.rotation),!0===this.polygonOffset&&(n.polygonOffset=!0),0!==this.polygonOffsetFactor&&(n.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(n.polygonOffsetUnits=this.polygonOffsetUnits),1!==this.linewidth&&(n.linewidth=this.linewidth),void 0!==this.dashSize&&(n.dashSize=this.dashSize),void 0!==this.gapSize&&(n.gapSize=this.gapSize),void 0!==this.scale&&(n.scale=this.scale),!0===this.dithering&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(n.premultipliedAlpha=this.premultipliedAlpha),!0===this.wireframe&&(n.wireframe=this.wireframe),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(n.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(n.wireframeLinejoin=this.wireframeLinejoin),!0===this.morphTargets&&(n.morphTargets=!0),!0===this.skinning&&(n.skinning=!0),!1===this.visible&&(n.visible=!1),"{}"!==JSON.stringify(this.userData)&&(n.userData=this.userData),e){var r=i(t.textures),o=i(t.images);r.length>0&&(n.textures=r),o.length>0&&(n.images=o)}return n},clone:function(){return(new this.constructor).copy(this)},copy:function(t){this.name=t.name,this.fog=t.fog,this.lights=t.lights,this.blending=t.blending,this.side=t.side,this.flatShading=t.flatShading,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.premultipliedAlpha=t.premultipliedAlpha,this.visible=t.visible,this.userData=JSON.parse(JSON.stringify(t.userData)),this.clipShadows=t.clipShadows,this.clipIntersection=t.clipIntersection;var e=t.clippingPlanes,n=null;if(null!==e){var i=e.length;n=new Array(i);for(var r=0;r!==i;++r)n[r]=e[r].clone()}return this.clippingPlanes=n,this.shadowSide=t.shadowSide,this},dispose:function(){this.dispatchEvent({type:"dispose"})}});var Wr="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",$r="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}";function qr(t){Gr.call(this),this.type="ShaderMaterial",this.defines={},this.uniforms={},this.vertexShader=Wr,this.fragmentShader=$r,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv2:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,void 0!==t&&(void 0!==t.attributes&&console.error("THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead."),this.setValues(t))}function Yr(t,e){this.origin=void 0!==t?t:new Ne,this.direction=void 0!==e?e:new Ne}function Xr(t,e,n){this.a=void 0!==t?t:new Ne,this.b=void 0!==e?e:new Ne,this.c=void 0!==n?n:new Ne}function Zr(t){Gr.call(this),this.type="MeshBasicMaterial",this.color=new pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function Jr(t,e){_r.call(this),this.type="Mesh",this.geometry=void 0!==t?t:new Br,this.material=void 0!==e?e:new Zr({color:16777215*Math.random()}),this.drawMode=be,this.updateMorphTargets()}function Kr(t,e,n,i){var r,o,a=new pr(0),s=0,l=null,c=0;function u(e,i,u,f){var m=i.background,v=t.vr,g=v.getSession&&v.getSession();if(g&&"additive"===g.environmentBlendMode&&(m=null),null===m?(h(a,s),l=null,c=0):m&&m.isColor&&(h(m,1),f=!0,l=null,c=0),(t.autoClear||f)&&t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil),m&&(m.isCubeTexture||m.isWebGLRenderTargetCube)){void 0===o&&(o=new Jr(new jr(1,1,1),new qr({type:"BackgroundCubeMaterial",uniforms:ur(mr.cube.uniforms),vertexShader:mr.cube.vertexShader,fragmentShader:mr.cube.fragmentShader,side:p,depthTest:!1,depthWrite:!1,fog:!1})),o.geometry.removeAttribute("normal"),o.geometry.removeAttribute("uv"),o.onBeforeRender=function(t,e,n){this.matrixWorld.copyPosition(n.matrixWorld)},Object.defineProperty(o.material,"map",{get:function(){return this.uniforms.tCube.value}}),n.update(o));var y=m.isWebGLRenderTargetCube?m.texture:m;o.material.uniforms.tCube.value=y,o.material.uniforms.tFlip.value=m.isWebGLRenderTargetCube?1:-1,l===m&&c===y.version||(o.material.needsUpdate=!0,l=m,c=y.version),e.unshift(o,o.geometry,o.material,0,0,null)}else m&&m.isTexture&&(void 0===r&&(r=new Jr(new Ur(2,2),new qr({type:"BackgroundMaterial",uniforms:ur(mr.background.uniforms),vertexShader:mr.background.vertexShader,fragmentShader:mr.background.fragmentShader,side:d,depthTest:!1,depthWrite:!1,fog:!1})),r.geometry.removeAttribute("normal"),Object.defineProperty(r.material,"map",{get:function(){return this.uniforms.t2D.value}}),n.update(r)),r.material.uniforms.t2D.value=m,!0===m.matrixAutoUpdate&&m.updateMatrix(),r.material.uniforms.uvTransform.value.copy(m.matrix),l===m&&c===m.version||(r.material.needsUpdate=!0,l=m,c=m.version),e.unshift(r,r.geometry,r.material,0,0,null))}function h(t,n){e.buffers.color.setClear(t.r,t.g,t.b,n,i)}return{getClearColor:function(){return a},setClearColor:function(t,e){a.set(t),s=void 0!==e?e:1,h(a,s)},getClearAlpha:function(){return s},setClearAlpha:function(t){s=t,h(a,s)},render:u}}function Qr(t,e,n,i){var r;function o(t){r=t}function a(e,i){t.drawArrays(r,e,i),n.update(i,r)}function s(o,a,s){var l;if(i.isWebGL2)l=t;else if(l=e.get("ANGLE_instanced_arrays"),null===l)return void console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");l[i.isWebGL2?"drawArraysInstanced":"drawArraysInstancedANGLE"](r,a,s,o.maxInstancedCount),n.update(s,r,o.maxInstancedCount)}this.setMode=o,this.render=a,this.renderInstances=s}function to(t,e,n){var i;function r(){if(void 0!==i)return i;var n=e.get("EXT_texture_filter_anisotropic");return i=null!==n?t.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT):0,i}function o(e){if("highp"===e){if(t.getShaderPrecisionFormat(35633,36338).precision>0&&t.getShaderPrecisionFormat(35632,36338).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(35633,36337).precision>0&&t.getShaderPrecisionFormat(35632,36337).precision>0?"mediump":"lowp"}var a="undefined"!==typeof WebGL2RenderingContext&&t instanceof WebGL2RenderingContext,s=void 0!==n.precision?n.precision:"highp",l=o(s);l!==s&&(console.warn("THREE.WebGLRenderer:",s,"not supported, using",l,"instead."),s=l);var c=!0===n.logarithmicDepthBuffer,u=t.getParameter(34930),h=t.getParameter(35660),d=t.getParameter(3379),p=t.getParameter(34076),f=t.getParameter(34921),m=t.getParameter(36347),v=t.getParameter(36348),g=t.getParameter(36349),y=h>0,b=a||!!e.get("OES_texture_float"),x=y&&b,w=a?t.getParameter(36183):0;return{isWebGL2:a,getMaxAnisotropy:r,getMaxPrecision:o,precision:s,logarithmicDepthBuffer:c,maxTextures:u,maxVertexTextures:h,maxTextureSize:d,maxCubemapSize:p,maxAttributes:f,maxVertexUniforms:m,maxVaryings:v,maxFragmentUniforms:g,vertexTextures:y,floatFragmentTextures:b,floatVertexTextures:x,maxSamples:w}}function eo(){var t=this,e=null,n=0,i=!1,r=!1,o=new Ye,a=new ze,s={value:null,needsUpdate:!1};function l(){s.value!==e&&(s.value=e,s.needsUpdate=n>0),t.numPlanes=n,t.numIntersection=0}function c(e,n,i,r){var l=null!==e?e.length:0,c=null;if(0!==l){if(c=s.value,!0!==r||null===c){var u=i+4*l,h=n.matrixWorldInverse;a.getNormalMatrix(h),(null===c||c.length<u)&&(c=new Float32Array(u));for(var d=0,p=i;d!==l;++d,p+=4)o.copy(e[d]).applyMatrix4(h,a),o.normal.toArray(c,p),c[p+3]=o.constant}s.value=c,s.needsUpdate=!0}return t.numPlanes=l,c}this.uniform=s,this.numPlanes=0,this.numIntersection=0,this.init=function(t,r,o){var a=0!==t.length||r||0!==n||i;return i=r,e=c(t,o,0),n=t.length,a},this.beginShadows=function(){r=!0,c(null)},this.endShadows=function(){r=!1,l()},this.setState=function(t,o,a,u,h,d){if(!i||null===t||0===t.length||r&&!a)r?c(null):l();else{var p=r?0:n,f=4*p,m=h.clippingState||null;s.value=m,m=c(t,u,f,d);for(var v=0;v!==f;++v)m[v]=e[v];h.clippingState=m,this.numIntersection=o?this.numPlanes:0,this.numPlanes+=p}}}function no(t){var e={};return{get:function(n){if(void 0!==e[n])return e[n];var i;switch(n){case"WEBGL_depth_texture":i=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":i=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":i=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":i=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:i=t.getExtension(n)}return null===i&&console.warn("THREE.WebGLRenderer: "+n+" extension not supported."),e[n]=i,i}}}function io(t,e,n){var i={},r={};function o(t){var a=t.target,s=i[a.id];for(var l in null!==s.index&&e.remove(s.index),s.attributes)e.remove(s.attributes[l]);a.removeEventListener("dispose",o),delete i[a.id];var c=r[s.id];c&&(e.remove(c),delete r[s.id]),n.memory.geometries--}function a(t,e){var r=i[e.id];return r||(e.addEventListener("dispose",o),e.isBufferGeometry?r=e:e.isGeometry&&(void 0===e._bufferGeometry&&(e._bufferGeometry=(new Br).setFromObject(t)),r=e._bufferGeometry),i[e.id]=r,n.memory.geometries++,r)}function s(t){var n=t.index,i=t.attributes;for(var r in null!==n&&e.update(n,34963),i)e.update(i[r],34962);var o=t.morphAttributes;for(var r in o)for(var a=o[r],s=0,l=a.length;s<l;s++)e.update(a[s],34962)}function l(t){var n=r[t.id];if(n)return n;var i=[],o=t.index,a=t.attributes;if(null!==o)for(var s=o.array,l=0,c=s.length;l<c;l+=3){var u=s[l+0],h=s[l+1],d=s[l+2];i.push(u,h,h,d,d,u)}else for(s=a.position.array,l=0,c=s.length/3-1;l<c;l+=3){u=l+0,h=l+1,d=l+2;i.push(u,h,h,d,d,u)}return n=new(Nr(i)>65535?Rr:Pr)(i,1),e.update(n,34963),r[t.id]=n,n}return{get:a,update:s,getWireframeAttribute:l}}function ro(t,e,n,i){var r,o,a;function s(t){r=t}function l(t){o=t.type,a=t.bytesPerElement}function c(e,i){t.drawElements(r,i,o,e*a),n.update(i,r)}function u(s,l,c){if(i.isWebGL2)u=t;else{var u=e.get("ANGLE_instanced_arrays");if(null===u)return void console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.")}u[i.isWebGL2?"drawElementsInstanced":"drawElementsInstancedANGLE"](r,c,o,l*a,s.maxInstancedCount),n.update(c,r,s.maxInstancedCount)}this.setMode=s,this.setIndex=l,this.render=c,this.renderInstances=u}function oo(t){var e={geometries:0,textures:0},n={frame:0,calls:0,triangles:0,points:0,lines:0};function i(t,e,i){switch(i=i||1,n.calls++,e){case 4:n.triangles+=i*(t/3);break;case 5:case 6:n.triangles+=i*(t-2);break;case 1:n.lines+=i*(t/2);break;case 3:n.lines+=i*(t-1);break;case 2:n.lines+=i*t;break;case 0:n.points+=i*t;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",e);break}}function r(){n.frame++,n.calls=0,n.triangles=0,n.points=0,n.lines=0}return{memory:e,render:n,programs:null,autoReset:!0,reset:r,update:i}}function ao(t,e){return Math.abs(e[1])-Math.abs(t[1])}function so(t){var e={},n=new Float32Array(8);function i(i,r,o,a){var s=i.morphTargetInfluences,l=s.length,c=e[r.id];if(void 0===c){c=[];for(var u=0;u<l;u++)c[u]=[u,0];e[r.id]=c}var h=o.morphTargets&&r.morphAttributes.position,d=o.morphNormals&&r.morphAttributes.normal;for(u=0;u<l;u++){var p=c[u];0!==p[1]&&(h&&r.removeAttribute("morphTarget"+u),d&&r.removeAttribute("morphNormal"+u))}for(u=0;u<l;u++){p=c[u];p[0]=u,p[1]=s[u]}c.sort(ao);for(u=0;u<8;u++){p=c[u];if(p){var f=p[0],m=p[1];if(m){h&&r.addAttribute("morphTarget"+u,h[f]),d&&r.addAttribute("morphNormal"+u,d[f]),n[u]=m;continue}}n[u]=0}a.getUniforms().setValue(t,"morphTargetInfluences",n)}return{update:i}}function lo(t,e){var n={};function i(i){var r=e.render.frame,o=i.geometry,a=t.get(i,o);return n[a.id]!==r&&(o.isGeometry&&a.updateFromObject(i),t.update(a),n[a.id]=r),a}function r(){n={}}return{update:i,dispose:r}}function co(t,e,n,i,r,o,a,s,l,c){t=void 0!==t?t:[],e=void 0!==e?e:ot,a=void 0!==a?a:Dt,je.call(this,t,e,n,i,r,o,a,s,l,c),this.flipY=!1}function uo(t,e,n,i){je.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=mt,this.minFilter=mt,this.wrapR=pt,this.generateMipmaps=!1,this.flipY=!1}function ho(t,e,n,i){je.call(this,null),this.image={data:t,width:e,height:n,depth:i},this.magFilter=mt,this.minFilter=mt,this.wrapR=pt,this.generateMipmaps=!1,this.flipY=!1}qr.prototype=Object.create(Gr.prototype),qr.prototype.constructor=qr,qr.prototype.isShaderMaterial=!0,qr.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=ur(t.uniforms),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.lights=t.lights,this.clipping=t.clipping,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this.extensions=t.extensions,this},qr.prototype.toJSON=function(t){var e=Gr.prototype.toJSON.call(this,t);for(var n in e.uniforms={},this.uniforms){var i=this.uniforms[n],r=i.value;r&&r.isTexture?e.uniforms[n]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[n]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[n]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[n]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[n]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[n]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[n]={type:"m4",value:r.toArray()}:e.uniforms[n]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader;var o={};for(var a in this.extensions)!0===this.extensions[a]&&(o[a]=!0);return Object.keys(o).length>0&&(e.extensions=o),e},Object.assign(Yr.prototype,{set:function(t,e){return this.origin.copy(t),this.direction.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this},at:function(t,e){return void 0===e&&(console.warn("THREE.Ray: .at() target is now required"),e=new Ne),e.copy(this.direction).multiplyScalar(t).add(this.origin)},lookAt:function(t){return this.direction.copy(t).sub(this.origin).normalize(),this},recast:function(){var t=new Ne;return function(e){return this.origin.copy(this.at(e,t)),this}}(),closestPointToPoint:function(t,e){void 0===e&&(console.warn("THREE.Ray: .closestPointToPoint() target is now required"),e=new Ne),e.subVectors(t,this.origin);var n=e.dot(this.direction);return n<0?e.copy(this.origin):e.copy(this.direction).multiplyScalar(n).add(this.origin)},distanceToPoint:function(t){return Math.sqrt(this.distanceSqToPoint(t))},distanceSqToPoint:function(){var t=new Ne;return function(e){var n=t.subVectors(e,this.origin).dot(this.direction);return n<0?this.origin.distanceToSquared(e):(t.copy(this.direction).multiplyScalar(n).add(this.origin),t.distanceToSquared(e))}}(),distanceSqToSegment:function(){var t=new Ne,e=new Ne,n=new Ne;return function(i,r,o,a){t.copy(i).add(r).multiplyScalar(.5),e.copy(r).sub(i).normalize(),n.copy(this.origin).sub(t);var s,l,c,u,h=.5*i.distanceTo(r),d=-this.direction.dot(e),p=n.dot(this.direction),f=-n.dot(e),m=n.lengthSq(),v=Math.abs(1-d*d);if(v>0)if(s=d*f-p,l=d*p-f,u=h*v,s>=0)if(l>=-u)if(l<=u){var g=1/v;s*=g,l*=g,c=s*(s+d*l+2*p)+l*(d*s+l+2*f)+m}else l=h,s=Math.max(0,-(d*l+p)),c=-s*s+l*(l+2*f)+m;else l=-h,s=Math.max(0,-(d*l+p)),c=-s*s+l*(l+2*f)+m;else l<=-u?(s=Math.max(0,-(-d*h+p)),l=s>0?-h:Math.min(Math.max(-h,-f),h),c=-s*s+l*(l+2*f)+m):l<=u?(s=0,l=Math.min(Math.max(-h,-f),h),c=l*(l+2*f)+m):(s=Math.max(0,-(d*h+p)),l=s>0?h:Math.min(Math.max(-h,-f),h),c=-s*s+l*(l+2*f)+m);else l=d>0?-h:h,s=Math.max(0,-(d*l+p)),c=-s*s+l*(l+2*f)+m;return o&&o.copy(this.direction).multiplyScalar(s).add(this.origin),a&&a.copy(e).multiplyScalar(l).add(t),c}}(),intersectSphere:function(){var t=new Ne;return function(e,n){t.subVectors(e.center,this.origin);var i=t.dot(this.direction),r=t.dot(t)-i*i,o=e.radius*e.radius;if(r>o)return null;var a=Math.sqrt(o-r),s=i-a,l=i+a;return s<0&&l<0?null:s<0?this.at(l,n):this.at(s,n)}}(),intersectsSphere:function(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius},distanceToPlane:function(t){var e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;var n=-(this.origin.dot(t.normal)+t.constant)/e;return n>=0?n:null},intersectPlane:function(t,e){var n=this.distanceToPlane(t);return null===n?null:this.at(n,e)},intersectsPlane:function(t){var e=t.distanceToPoint(this.origin);if(0===e)return!0;var n=t.normal.dot(this.direction);return n*e<0},intersectBox:function(t,e){var n,i,r,o,a,s,l=1/this.direction.x,c=1/this.direction.y,u=1/this.direction.z,h=this.origin;return l>=0?(n=(t.min.x-h.x)*l,i=(t.max.x-h.x)*l):(n=(t.max.x-h.x)*l,i=(t.min.x-h.x)*l),c>=0?(r=(t.min.y-h.y)*c,o=(t.max.y-h.y)*c):(r=(t.max.y-h.y)*c,o=(t.min.y-h.y)*c),n>o||r>i?null:((r>n||n!==n)&&(n=r),(o<i||i!==i)&&(i=o),u>=0?(a=(t.min.z-h.z)*u,s=(t.max.z-h.z)*u):(a=(t.max.z-h.z)*u,s=(t.min.z-h.z)*u),n>s||a>i?null:((a>n||n!==n)&&(n=a),(s<i||i!==i)&&(i=s),i<0?null:this.at(n>=0?n:i,e)))},intersectsBox:function(){var t=new Ne;return function(e){return null!==this.intersectBox(e,t)}}(),intersectTriangle:function(){var t=new Ne,e=new Ne,n=new Ne,i=new Ne;return function(r,o,a,s,l){e.subVectors(o,r),n.subVectors(a,r),i.crossVectors(e,n);var c,u=this.direction.dot(i);if(u>0){if(s)return null;c=1}else{if(!(u<0))return null;c=-1,u=-u}t.subVectors(this.origin,r);var h=c*this.direction.dot(n.crossVectors(t,n));if(h<0)return null;var d=c*this.direction.dot(e.cross(t));if(d<0)return null;if(h+d>u)return null;var p=-c*t.dot(i);return p<0?null:this.at(p/u,l)}}(),applyMatrix4:function(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this},equals:function(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}}),Object.assign(Xr,{getNormal:function(){var t=new Ne;return function(e,n,i,r){void 0===r&&(console.warn("THREE.Triangle: .getNormal() target is now required"),r=new Ne),r.subVectors(i,n),t.subVectors(e,n),r.cross(t);var o=r.lengthSq();return o>0?r.multiplyScalar(1/Math.sqrt(o)):r.set(0,0,0)}}(),getBarycoord:function(){var t=new Ne,e=new Ne,n=new Ne;return function(i,r,o,a,s){t.subVectors(a,r),e.subVectors(o,r),n.subVectors(i,r);var l=t.dot(t),c=t.dot(e),u=t.dot(n),h=e.dot(e),d=e.dot(n),p=l*h-c*c;if(void 0===s&&(console.warn("THREE.Triangle: .getBarycoord() target is now required"),s=new Ne),0===p)return s.set(-2,-1,-1);var f=1/p,m=(h*u-c*d)*f,v=(l*d-c*u)*f;return s.set(1-m-v,v,m)}}(),containsPoint:function(){var t=new Ne;return function(e,n,i,r){return Xr.getBarycoord(e,n,i,r,t),t.x>=0&&t.y>=0&&t.x+t.y<=1}}(),getUV:function(){var t=new Ne;return function(e,n,i,r,o,a,s,l){return this.getBarycoord(e,n,i,r,t),l.set(0,0),l.addScaledVector(o,t.x),l.addScaledVector(a,t.y),l.addScaledVector(s,t.z),l}}(),isFrontFacing:function(){var t=new Ne,e=new Ne;return function(n,i,r,o){return t.subVectors(r,i),e.subVectors(n,i),t.cross(e).dot(o)<0}}()}),Object.assign(Xr.prototype,{set:function(t,e,n){return this.a.copy(t),this.b.copy(e),this.c.copy(n),this},setFromPointsAndIndices:function(t,e,n,i){return this.a.copy(t[e]),this.b.copy(t[n]),this.c.copy(t[i]),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this},getArea:function(){var t=new Ne,e=new Ne;return function(){return t.subVectors(this.c,this.b),e.subVectors(this.a,this.b),.5*t.cross(e).length()}}(),getMidpoint:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getMidpoint() target is now required"),t=new Ne),t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)},getNormal:function(t){return Xr.getNormal(this.a,this.b,this.c,t)},getPlane:function(t){return void 0===t&&(console.warn("THREE.Triangle: .getPlane() target is now required"),t=new Ne),t.setFromCoplanarPoints(this.a,this.b,this.c)},getBarycoord:function(t,e){return Xr.getBarycoord(t,this.a,this.b,this.c,e)},getUV:function(t,e,n,i,r){return Xr.getUV(t,this.a,this.b,this.c,e,n,i,r)},containsPoint:function(t){return Xr.containsPoint(t,this.a,this.b,this.c)},isFrontFacing:function(t){return Xr.isFrontFacing(this.a,this.b,this.c,t)},intersectsBox:function(t){return t.intersectsTriangle(this)},closestPointToPoint:function(){var t=new Ne,e=new Ne,n=new Ne,i=new Ne,r=new Ne,o=new Ne;return function(a,s){void 0===s&&(console.warn("THREE.Triangle: .closestPointToPoint() target is now required"),s=new Ne);var l,c,u=this.a,h=this.b,d=this.c;t.subVectors(h,u),e.subVectors(d,u),i.subVectors(a,u);var p=t.dot(i),f=e.dot(i);if(p<=0&&f<=0)return s.copy(u);r.subVectors(a,h);var m=t.dot(r),v=e.dot(r);if(m>=0&&v<=m)return s.copy(h);var g=p*v-m*f;if(g<=0&&p>=0&&m<=0)return l=p/(p-m),s.copy(u).addScaledVector(t,l);o.subVectors(a,d);var y=t.dot(o),b=e.dot(o);if(b>=0&&y<=b)return s.copy(d);var x=y*f-p*b;if(x<=0&&f>=0&&b<=0)return c=f/(f-b),s.copy(u).addScaledVector(e,c);var w=m*b-y*v;if(w<=0&&v-m>=0&&y-b>=0)return n.subVectors(d,h),c=(v-m)/(v-m+(y-b)),s.copy(h).addScaledVector(n,c);var _=1/(w+x+g);return l=x*_,c=g*_,s.copy(u).addScaledVector(t,l).addScaledVector(e,c)}}(),equals:function(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}),Zr.prototype=Object.create(Gr.prototype),Zr.prototype.constructor=Zr,Zr.prototype.isMeshBasicMaterial=!0,Zr.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this},Jr.prototype=Object.assign(Object.create(_r.prototype),{constructor:Jr,isMesh:!0,setDrawMode:function(t){this.drawMode=t},copy:function(t){return _r.prototype.copy.call(this,t),this.drawMode=t.drawMode,void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this},updateMorphTargets:function(){var t,e,n,i=this.geometry;if(i.isBufferGeometry){var r=i.morphAttributes,o=Object.keys(r);if(o.length>0){var a=r[o[0]];if(void 0!==a)for(this.morphTargetInfluences=[],this.morphTargetDictionary={},t=0,e=a.length;t<e;t++)n=a[t].name||String(t),this.morphTargetInfluences.push(0),this.morphTargetDictionary[n]=t}}else{var s=i.morphTargets;void 0!==s&&s.length>0&&console.error("THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.")}},raycast:function(){var t=new Ze,e=new Yr,n=new qe,i=new Ne,r=new Ne,o=new Ne,a=new Ne,s=new Ne,l=new Ne,c=new Ne,u=new Ne,h=new Ne,d=new De,m=new De,v=new De,g=new Ne,y=new Ne;function b(t,e,n,i,r,o,a,s){var l;if(l=e.side===p?i.intersectTriangle(a,o,r,!0,s):i.intersectTriangle(r,o,a,e.side!==f,s),null===l)return null;y.copy(s),y.applyMatrix4(t.matrixWorld);var c=n.ray.origin.distanceTo(y);return c<n.near||c>n.far?null:{distance:c,point:y.clone(),object:t}}function x(t,e,n,p,f,y,x,w,_,M){i.fromBufferAttribute(f,w),r.fromBufferAttribute(f,_),o.fromBufferAttribute(f,M);var E=t.morphTargetInfluences;if(e.morphTargets&&y&&E){c.set(0,0,0),u.set(0,0,0),h.set(0,0,0);for(var S=0,T=y.length;S<T;S++){var A=E[S],C=y[S];0!==A&&(a.fromBufferAttribute(C,w),s.fromBufferAttribute(C,_),l.fromBufferAttribute(C,M),c.addScaledVector(a.sub(i),A),u.addScaledVector(s.sub(r),A),h.addScaledVector(l.sub(o),A))}i.add(c),r.add(u),o.add(h)}var L=b(t,e,n,p,i,r,o,g);if(L){x&&(d.fromBufferAttribute(x,w),m.fromBufferAttribute(x,_),v.fromBufferAttribute(x,M),L.uv=Xr.getUV(g,i,r,o,d,m,v,new De));var P=new yr(w,_,M);Xr.getNormal(i,r,o,P.normal),L.face=P}return L}return function(i,r){var o,a=this.geometry,s=this.material,l=this.matrixWorld;if(void 0!==s&&(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(l),!1!==i.ray.intersectsSphere(n)&&(t.getInverse(l),e.copy(i.ray).applyMatrix4(t),null===a.boundingBox||!1!==e.intersectsBox(a.boundingBox))))if(a.isBufferGeometry){var c,u,h,p,f,y,w,_,M,E,S,T=a.index,A=a.attributes.position,C=a.morphAttributes.position,L=a.attributes.uv,P=a.groups,O=a.drawRange;if(null!==T)if(Array.isArray(s))for(p=0,y=P.length;p<y;p++)for(_=P[p],M=s[_.materialIndex],E=Math.max(_.start,O.start),S=Math.min(_.start+_.count,O.start+O.count),f=E,w=S;f<w;f+=3)c=T.getX(f),u=T.getX(f+1),h=T.getX(f+2),o=x(this,M,i,e,A,C,L,c,u,h),o&&(o.faceIndex=Math.floor(f/3),o.face.materialIndex=_.materialIndex,r.push(o));else for(E=Math.max(0,O.start),S=Math.min(T.count,O.start+O.count),p=E,y=S;p<y;p+=3)c=T.getX(p),u=T.getX(p+1),h=T.getX(p+2),o=x(this,s,i,e,A,C,L,c,u,h),o&&(o.faceIndex=Math.floor(p/3),r.push(o));else if(void 0!==A)if(Array.isArray(s))for(p=0,y=P.length;p<y;p++)for(_=P[p],M=s[_.materialIndex],E=Math.max(_.start,O.start),S=Math.min(_.start+_.count,O.start+O.count),f=E,w=S;f<w;f+=3)c=f,u=f+1,h=f+2,o=x(this,M,i,e,A,C,L,c,u,h),o&&(o.faceIndex=Math.floor(f/3),o.face.materialIndex=_.materialIndex,r.push(o));else for(E=Math.max(0,O.start),S=Math.min(A.count,O.start+O.count),p=E,y=S;p<y;p+=3)c=p,u=p+1,h=p+2,o=x(this,s,i,e,A,C,L,c,u,h),o&&(o.faceIndex=Math.floor(p/3),r.push(o))}else if(a.isGeometry){var R,k,D,I,N=Array.isArray(s),z=a.vertices,B=a.faces,F=a.faceVertexUvs[0];F.length>0&&(I=F);for(var j=0,H=B.length;j<H;j++){var U=B[j],V=N?s[U.materialIndex]:s;if(void 0!==V&&(R=z[U.a],k=z[U.b],D=z[U.c],o=b(this,V,i,e,R,k,D,g),o)){if(I&&I[j]){var G=I[j];d.copy(G[0]),m.copy(G[1]),v.copy(G[2]),o.uv=Xr.getUV(g,R,k,D,d,m,v,new De)}o.face=U,o.faceIndex=j,r.push(o)}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),co.prototype=Object.create(je.prototype),co.prototype.constructor=co,co.prototype.isCubeTexture=!0,Object.defineProperty(co.prototype,"images",{get:function(){return this.image},set:function(t){this.image=t}}),uo.prototype=Object.create(je.prototype),uo.prototype.constructor=uo,uo.prototype.isDataTexture2DArray=!0,ho.prototype=Object.create(je.prototype),ho.prototype.constructor=ho,ho.prototype.isDataTexture3D=!0;var po=new je,fo=new uo,mo=new ho,vo=new co,go=[],yo=[],bo=new Float32Array(16),xo=new Float32Array(9),wo=new Float32Array(4);function _o(t,e,n){var i=t[0];if(i<=0||i>0)return t;var r=e*n,o=go[r];if(void 0===o&&(o=new Float32Array(r),go[r]=o),0!==e){i.toArray(o,0);for(var a=1,s=0;a!==e;++a)s+=n,t[a].toArray(o,s)}return o}function Mo(t,e){if(t.length!==e.length)return!1;for(var n=0,i=t.length;n<i;n++)if(t[n]!==e[n])return!1;return!0}function Eo(t,e){for(var n=0,i=e.length;n<i;n++)t[n]=e[n]}function So(t,e){var n=yo[e];void 0===n&&(n=new Int32Array(e),yo[e]=n);for(var i=0;i!==e;++i)n[i]=t.allocateTextureUnit();return n}function To(t,e){var n=this.cache;n[0]!==e&&(t.uniform1f(this.addr,e),n[0]=e)}function Ao(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),n[0]=e.x,n[1]=e.y);else{if(Mo(n,e))return;t.uniform2fv(this.addr,e),Eo(n,e)}}function Co(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),n[0]=e.x,n[1]=e.y,n[2]=e.z);else if(void 0!==e.r)n[0]===e.r&&n[1]===e.g&&n[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),n[0]=e.r,n[1]=e.g,n[2]=e.b);else{if(Mo(n,e))return;t.uniform3fv(this.addr,e),Eo(n,e)}}function Lo(t,e){var n=this.cache;if(void 0!==e.x)n[0]===e.x&&n[1]===e.y&&n[2]===e.z&&n[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),n[0]=e.x,n[1]=e.y,n[2]=e.z,n[3]=e.w);else{if(Mo(n,e))return;t.uniform4fv(this.addr,e),Eo(n,e)}}function Po(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mo(n,e))return;t.uniformMatrix2fv(this.addr,!1,e),Eo(n,e)}else{if(Mo(n,i))return;wo.set(i),t.uniformMatrix2fv(this.addr,!1,wo),Eo(n,i)}}function Oo(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mo(n,e))return;t.uniformMatrix3fv(this.addr,!1,e),Eo(n,e)}else{if(Mo(n,i))return;xo.set(i),t.uniformMatrix3fv(this.addr,!1,xo),Eo(n,i)}}function Ro(t,e){var n=this.cache,i=e.elements;if(void 0===i){if(Mo(n,e))return;t.uniformMatrix4fv(this.addr,!1,e),Eo(n,e)}else{if(Mo(n,i))return;bo.set(i),t.uniformMatrix4fv(this.addr,!1,bo),Eo(n,i)}}function ko(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTexture2D(e||po,r)}function Do(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture2DArray(e||fo,r)}function Io(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.setTexture3D(e||mo,r)}function No(t,e,n){var i=this.cache,r=n.allocateTextureUnit();i[0]!==r&&(t.uniform1i(this.addr,r),i[0]=r),n.safeSetTextureCube(e||vo,r)}function zo(t,e){var n=this.cache;n[0]!==e&&(t.uniform1i(this.addr,e),n[0]=e)}function Bo(t,e){var n=this.cache;Mo(n,e)||(t.uniform2iv(this.addr,e),Eo(n,e))}function Fo(t,e){var n=this.cache;Mo(n,e)||(t.uniform3iv(this.addr,e),Eo(n,e))}function jo(t,e){var n=this.cache;Mo(n,e)||(t.uniform4iv(this.addr,e),Eo(n,e))}function Ho(t){switch(t){case 5126:return To;case 35664:return Ao;case 35665:return Co;case 35666:return Lo;case 35674:return Po;case 35675:return Oo;case 35676:return Ro;case 35678:case 36198:return ko;case 35679:return Io;case 35680:return No;case 36289:return Do;case 5124:case 35670:return zo;case 35667:case 35671:return Bo;case 35668:case 35672:return Fo;case 35669:case 35673:return jo}}function Uo(t,e){t.uniform1fv(this.addr,e)}function Vo(t,e){t.uniform1iv(this.addr,e)}function Go(t,e){t.uniform2iv(this.addr,e)}function Wo(t,e){t.uniform3iv(this.addr,e)}function $o(t,e){t.uniform4iv(this.addr,e)}function qo(t,e){var n=_o(e,this.size,2);t.uniform2fv(this.addr,n)}function Yo(t,e){var n=_o(e,this.size,3);t.uniform3fv(this.addr,n)}function Xo(t,e){var n=_o(e,this.size,4);t.uniform4fv(this.addr,n)}function Zo(t,e){var n=_o(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,n)}function Jo(t,e){var n=_o(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,n)}function Ko(t,e){var n=_o(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,n)}function Qo(t,e,n){var i=e.length,r=So(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTexture2D(e[o]||po,r[o])}function ta(t,e,n){var i=e.length,r=So(n,i);t.uniform1iv(this.addr,r);for(var o=0;o!==i;++o)n.safeSetTextureCube(e[o]||vo,r[o])}function ea(t){switch(t){case 5126:return Uo;case 35664:return qo;case 35665:return Yo;case 35666:return Xo;case 35674:return Zo;case 35675:return Jo;case 35676:return Ko;case 35678:return Qo;case 35680:return ta;case 5124:case 35670:return Vo;case 35667:case 35671:return Go;case 35668:case 35672:return Wo;case 35669:case 35673:return $o}}function na(t,e,n){this.id=t,this.addr=n,this.cache=[],this.setValue=Ho(e.type)}function ia(t,e,n){this.id=t,this.addr=n,this.cache=[],this.size=e.size,this.setValue=ea(e.type)}function ra(t){this.id=t,this.seq=[],this.map={}}ia.prototype.updateCache=function(t){var e=this.cache;t instanceof Float32Array&&e.length!==t.length&&(this.cache=new Float32Array(t.length)),Eo(e,t)},ra.prototype.setValue=function(t,e,n){for(var i=this.seq,r=0,o=i.length;r!==o;++r){var a=i[r];a.setValue(t,e[a.id],n)}};var oa=/([\w\d_]+)(\])?(\[|\.)?/g;function aa(t,e){t.seq.push(e),t.map[e.id]=e}function sa(t,e,n){var i=t.name,r=i.length;oa.lastIndex=0;while(1){var o=oa.exec(i),a=oa.lastIndex,s=o[1],l="]"===o[2],c=o[3];if(l&&(s|=0),void 0===c||"["===c&&a+2===r){aa(n,void 0===c?new na(s,t,e):new ia(s,t,e));break}var u=n.map,h=u[s];void 0===h&&(h=new ra(s),aa(n,h)),n=h}}function la(t,e){this.seq=[],this.map={};for(var n=t.getProgramParameter(e,35718),i=0;i<n;++i){var r=t.getActiveUniform(e,i),o=t.getUniformLocation(e,r.name);sa(r,o,this)}}function ca(t){for(var e=t.split("\n"),n=0;n<e.length;n++)e[n]=n+1+": "+e[n];return e.join("\n")}function ua(t,e,n,i){var r=t.createShader(e);return t.shaderSource(r,n),t.compileShader(r),!0===i&&(!1===t.getShaderParameter(r,35713)&&console.error("THREE.WebGLShader: Shader couldn't compile."),""!==t.getShaderInfoLog(r)&&console.warn("THREE.WebGLShader: gl.getShaderInfoLog()",35633===e?"vertex":"fragment",t.getShaderInfoLog(r),ca(n))),r}la.prototype.setValue=function(t,e,n,i){var r=this.map[e];void 0!==r&&r.setValue(t,n,i)},la.prototype.setOptional=function(t,e,n){var i=e[n];void 0!==i&&this.setValue(t,n,i)},la.upload=function(t,e,n,i){for(var r=0,o=e.length;r!==o;++r){var a=e[r],s=n[a.id];!1!==s.needsUpdate&&a.setValue(t,s.value,i)}},la.seqWithValue=function(t,e){for(var n=[],i=0,r=t.length;i!==r;++i){var o=t[i];o.id in e&&n.push(o)}return n};var ha=0;function da(t){switch(t){case _e:return["Linear","( value )"];case Me:return["sRGB","( value )"];case Se:return["RGBE","( value )"];case Te:return["RGBM","( value, 7.0 )"];case Ae:return["RGBM","( value, 16.0 )"];case Ce:return["RGBD","( value, 256.0 )"];case Ee:return["Gamma","( value, float( GAMMA_FACTOR ) )"];default:throw new Error("unsupported encoding: "+t)}}function pa(t,e){var n=da(e);return"vec4 "+t+"( vec4 value ) { return "+n[0]+"ToLinear"+n[1]+"; }"}function fa(t,e){var n=da(e);return"vec4 "+t+"( vec4 value ) { return LinearTo"+n[0]+n[1]+"; }"}function ma(t,e){var n;switch(e){case Q:n="Linear";break;case tt:n="Reinhard";break;case et:n="Uncharted2";break;case nt:n="OptimizedCineon";break;case it:n="ACESFilmic";break;default:throw new Error("unsupported toneMapping: "+e)}return"vec3 "+t+"( vec3 color ) { return "+n+"ToneMapping( color ); }"}function va(t,e,n){t=t||{};var i=[t.derivatives||e.envMapCubeUV||e.bumpMap||e.normalMap&&!e.objectSpaceNormalMap||e.flatShading?"#extension GL_OES_standard_derivatives : enable":"",(t.fragDepth||e.logarithmicDepthBuffer)&&n.get("EXT_frag_depth")?"#extension GL_EXT_frag_depth : enable":"",t.drawBuffers&&n.get("WEBGL_draw_buffers")?"#extension GL_EXT_draw_buffers : require":"",(t.shaderTextureLOD||e.envMap)&&n.get("EXT_shader_texture_lod")?"#extension GL_EXT_shader_texture_lod : enable":""];return i.filter(ba).join("\n")}function ga(t){var e=[];for(var n in t){var i=t[n];!1!==i&&e.push("#define "+n+" "+i)}return e.join("\n")}function ya(t,e){for(var n={},i=t.getProgramParameter(e,35721),r=0;r<i;r++){var o=t.getActiveAttrib(e,r),a=o.name;n[a]=t.getAttribLocation(e,a)}return n}function ba(t){return""!==t}function xa(t,e){return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights)}function wa(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}function _a(t){var e=/^[ \t]*#include +<([\w\d./]+)>/gm;function n(t,e){var n=cr[e];if(void 0===n)throw new Error("Can not resolve #include <"+e+">");return _a(n)}return t.replace(e,n)}function Ma(t){var e=/#pragma unroll_loop[\s]+?for \( int i \= (\d+)\; i < (\d+)\; i \+\+ \) \{([\s\S]+?)(?=\})\}/g;function n(t,e,n,i){for(var r="",o=parseInt(e);o<parseInt(n);o++)r+=i.replace(/\[ i \]/g,"[ "+o+" ]");return r}return t.replace(e,n)}function Ea(t,e,n,i,r,o,a,s){var l=t.context,c=i.defines,d=r.vertexShader,p=r.fragmentShader,f="SHADOWMAP_TYPE_BASIC";o.shadowMapType===u?f="SHADOWMAP_TYPE_PCF":o.shadowMapType===h&&(f="SHADOWMAP_TYPE_PCF_SOFT");var m="ENVMAP_TYPE_CUBE",v="ENVMAP_MODE_REFLECTION",g="ENVMAP_BLENDING_MULTIPLY";if(o.envMap){switch(i.envMap.mapping){case ot:case at:m="ENVMAP_TYPE_CUBE";break;case ut:case ht:m="ENVMAP_TYPE_CUBE_UV";break;case st:case lt:m="ENVMAP_TYPE_EQUIREC";break;case ct:m="ENVMAP_TYPE_SPHERE";break}switch(i.envMap.mapping){case at:case lt:v="ENVMAP_MODE_REFRACTION";break}switch(i.combine){case X:g="ENVMAP_BLENDING_MULTIPLY";break;case Z:g="ENVMAP_BLENDING_MIX";break;case J:g="ENVMAP_BLENDING_ADD";break}}var y,b,x=t.gammaFactor>0?t.gammaFactor:1,w=a.isWebGL2?"":va(i.extensions,o,e),_=ga(c),M=l.createProgram();if(i.isRawShaderMaterial?(y=[_].filter(ba).join("\n"),y.length>0&&(y+="\n"),b=[w,_].filter(ba).join("\n"),b.length>0&&(b+="\n")):(y=["precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,_,o.supportsVertexTextures?"#define VERTEX_TEXTURES":"","#define GAMMA_FACTOR "+x,"#define MAX_BONES "+o.maxBones,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+v:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.displacementMap&&o.supportsVertexTextures?"#define USE_DISPLACEMENTMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.flatShading?"#define FLAT_SHADED":"",o.skinning?"#define USE_SKINNING":"",o.useVertexTexture?"#define BONE_TEXTURE":"",o.morphTargets?"#define USE_MORPHTARGETS":"",o.morphNormals&&!1===o.flatShading?"#define USE_MORPHNORMALS":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+f:"",o.sizeAttenuation?"#define USE_SIZEATTENUATION":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#ifdef USE_COLOR","\tattribute vec3 color;","#endif","#ifdef USE_MORPHTARGETS","\tattribute vec3 morphTarget0;","\tattribute vec3 morphTarget1;","\tattribute vec3 morphTarget2;","\tattribute vec3 morphTarget3;","\t#ifdef USE_MORPHNORMALS","\t\tattribute vec3 morphNormal0;","\t\tattribute vec3 morphNormal1;","\t\tattribute vec3 morphNormal2;","\t\tattribute vec3 morphNormal3;","\t#else","\t\tattribute vec3 morphTarget4;","\t\tattribute vec3 morphTarget5;","\t\tattribute vec3 morphTarget6;","\t\tattribute vec3 morphTarget7;","\t#endif","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(ba).join("\n"),b=[w,"precision "+o.precision+" float;","precision "+o.precision+" int;","#define SHADER_NAME "+r.name,_,o.alphaTest?"#define ALPHATEST "+o.alphaTest+(o.alphaTest%1?"":".0"):"","#define GAMMA_FACTOR "+x,o.useFog&&o.fog?"#define USE_FOG":"",o.useFog&&o.fogExp?"#define FOG_EXP2":"",o.map?"#define USE_MAP":"",o.matcap?"#define USE_MATCAP":"",o.envMap?"#define USE_ENVMAP":"",o.envMap?"#define "+m:"",o.envMap?"#define "+v:"",o.envMap?"#define "+g:"",o.lightMap?"#define USE_LIGHTMAP":"",o.aoMap?"#define USE_AOMAP":"",o.emissiveMap?"#define USE_EMISSIVEMAP":"",o.bumpMap?"#define USE_BUMPMAP":"",o.normalMap?"#define USE_NORMALMAP":"",o.normalMap&&o.objectSpaceNormalMap?"#define OBJECTSPACE_NORMALMAP":"",o.specularMap?"#define USE_SPECULARMAP":"",o.roughnessMap?"#define USE_ROUGHNESSMAP":"",o.metalnessMap?"#define USE_METALNESSMAP":"",o.alphaMap?"#define USE_ALPHAMAP":"",o.vertexTangents?"#define USE_TANGENT":"",o.vertexColors?"#define USE_COLOR":"",o.gradientMap?"#define USE_GRADIENTMAP":"",o.flatShading?"#define FLAT_SHADED":"",o.doubleSided?"#define DOUBLE_SIDED":"",o.flipSided?"#define FLIP_SIDED":"",o.shadowMapEnabled?"#define USE_SHADOWMAP":"",o.shadowMapEnabled?"#define "+f:"",o.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",o.physicallyCorrectLights?"#define PHYSICALLY_CORRECT_LIGHTS":"",o.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",o.logarithmicDepthBuffer&&(a.isWebGL2||e.get("EXT_frag_depth"))?"#define USE_LOGDEPTHBUF_EXT":"",o.envMap&&(a.isWebGL2||e.get("EXT_shader_texture_lod"))?"#define TEXTURE_LOD_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;",o.toneMapping!==K?"#define TONE_MAPPING":"",o.toneMapping!==K?cr["tonemapping_pars_fragment"]:"",o.toneMapping!==K?ma("toneMapping",o.toneMapping):"",o.dithering?"#define DITHERING":"",o.outputEncoding||o.mapEncoding||o.matcapEncoding||o.envMapEncoding||o.emissiveMapEncoding?cr["encodings_pars_fragment"]:"",o.mapEncoding?pa("mapTexelToLinear",o.mapEncoding):"",o.matcapEncoding?pa("matcapTexelToLinear",o.matcapEncoding):"",o.envMapEncoding?pa("envMapTexelToLinear",o.envMapEncoding):"",o.emissiveMapEncoding?pa("emissiveMapTexelToLinear",o.emissiveMapEncoding):"",o.outputEncoding?fa("linearToOutputTexel",o.outputEncoding):"",o.depthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(ba).join("\n")),d=_a(d),d=xa(d,o),d=wa(d,o),p=_a(p),p=xa(p,o),p=wa(p,o),d=Ma(d),p=Ma(p),a.isWebGL2&&!i.isRawShaderMaterial){var E=!1,S=/^\s*#version\s+300\s+es\s*\n/;i.isShaderMaterial&&null!==d.match(S)&&null!==p.match(S)&&(E=!0,d=d.replace(S,""),p=p.replace(S,"")),y=["#version 300 es\n","#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+y,b=["#version 300 es\n","#define varying in",E?"":"out highp vec4 pc_fragColor;",E?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+b}var T,A,C=y+d,L=b+p,P=ua(l,35633,C,t.debug.checkShaderErrors),O=ua(l,35632,L,t.debug.checkShaderErrors);if(l.attachShader(M,P),l.attachShader(M,O),void 0!==i.index0AttributeName?l.bindAttribLocation(M,0,i.index0AttributeName):!0===o.morphTargets&&l.bindAttribLocation(M,0,"position"),l.linkProgram(M),t.debug.checkShaderErrors){var R=l.getProgramInfoLog(M).trim(),k=l.getShaderInfoLog(P).trim(),D=l.getShaderInfoLog(O).trim(),I=!0,N=!0;!1===l.getProgramParameter(M,35714)?(I=!1,console.error("THREE.WebGLProgram: shader error: ",l.getError(),"35715",l.getProgramParameter(M,35715),"gl.getProgramInfoLog",R,k,D)):""!==R?console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()",R):""!==k&&""!==D||(N=!1),N&&(this.diagnostics={runnable:I,material:i,programLog:R,vertexShader:{log:k,prefix:y},fragmentShader:{log:D,prefix:b}})}return l.deleteShader(P),l.deleteShader(O),this.getUniforms=function(){return void 0===T&&(T=new la(l,M,s)),T},this.getAttributes=function(){return void 0===A&&(A=ya(l,M)),A},this.destroy=function(){l.deleteProgram(M),this.program=void 0},Object.defineProperties(this,{uniforms:{get:function(){return console.warn("THREE.WebGLProgram: .uniforms is now .getUniforms()."),this.getUniforms()}},attributes:{get:function(){return console.warn("THREE.WebGLProgram: .attributes is now .getAttributes()."),this.getAttributes()}}}),this.name=r.name,this.id=ha++,this.code=n,this.usedTimes=1,this.program=M,this.vertexShader=P,this.fragmentShader=O,this}function Sa(t,e,n,i){var r=[],o={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"phong",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"},a=["precision","supportsVertexTextures","map","mapEncoding","matcap","matcapEncoding","envMap","envMapMode","envMapEncoding","lightMap","aoMap","emissiveMap","emissiveMapEncoding","bumpMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","gradientMap","alphaMap","combine","vertexColors","vertexTangents","fog","useFog","fogExp","flatShading","sizeAttenuation","logarithmicDepthBuffer","skinning","maxBones","useVertexTexture","morphTargets","morphNormals","maxMorphTargets","maxMorphNormals","premultipliedAlpha","numDirLights","numPointLights","numSpotLights","numHemiLights","numRectAreaLights","shadowMapEnabled","shadowMapType","toneMapping","physicallyCorrectLights","alphaTest","doubleSided","flipSided","numClippingPlanes","numClipIntersection","depthPacking","dithering"];function s(t){var e=t.skeleton,i=e.bones;if(n.floatVertexTextures)return 1024;var r=n.maxVertexUniforms,o=Math.floor((r-20)/4),a=Math.min(o,i.length);return a<i.length?(console.warn("THREE.WebGLRenderer: Skeleton has "+i.length+" bones. This GPU supports "+a+"."),0):a}function l(t,e){var n;return t?t.isTexture?n=t.encoding:t.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),n=t.texture.encoding):n=_e,n===_e&&e&&(n=Ee),n}this.getParameters=function(e,i,r,a,c,u,h){var d=o[e.type],m=h.isSkinnedMesh?s(h):0,v=n.precision;null!==e.precision&&(v=n.getMaxPrecision(e.precision),v!==e.precision&&console.warn("THREE.WebGLProgram.getParameters:",e.precision,"not supported, using",v,"instead."));var g=t.getRenderTarget(),y={shaderID:d,precision:v,supportsVertexTextures:n.vertexTextures,outputEncoding:l(g?g.texture:null,t.gammaOutput),map:!!e.map,mapEncoding:l(e.map,t.gammaInput),matcap:!!e.matcap,matcapEncoding:l(e.matcap,t.gammaInput),envMap:!!e.envMap,envMapMode:e.envMap&&e.envMap.mapping,envMapEncoding:l(e.envMap,t.gammaInput),envMapCubeUV:!!e.envMap&&(e.envMap.mapping===ut||e.envMap.mapping===ht),lightMap:!!e.lightMap,aoMap:!!e.aoMap,emissiveMap:!!e.emissiveMap,emissiveMapEncoding:l(e.emissiveMap,t.gammaInput),bumpMap:!!e.bumpMap,normalMap:!!e.normalMap,objectSpaceNormalMap:e.normalMapType===Re,displacementMap:!!e.displacementMap,roughnessMap:!!e.roughnessMap,metalnessMap:!!e.metalnessMap,specularMap:!!e.specularMap,alphaMap:!!e.alphaMap,gradientMap:!!e.gradientMap,combine:e.combine,vertexTangents:e.normalMap&&e.vertexTangents,vertexColors:e.vertexColors,fog:!!a,useFog:e.fog,fogExp:a&&a.isFogExp2,flatShading:e.flatShading,sizeAttenuation:e.sizeAttenuation,logarithmicDepthBuffer:n.logarithmicDepthBuffer,skinning:e.skinning&&m>0,maxBones:m,useVertexTexture:n.floatVertexTextures,morphTargets:e.morphTargets,morphNormals:e.morphNormals,maxMorphTargets:t.maxMorphTargets,maxMorphNormals:t.maxMorphNormals,numDirLights:i.directional.length,numPointLights:i.point.length,numSpotLights:i.spot.length,numRectAreaLights:i.rectArea.length,numHemiLights:i.hemi.length,numClippingPlanes:c,numClipIntersection:u,dithering:e.dithering,shadowMapEnabled:t.shadowMap.enabled&&h.receiveShadow&&r.length>0,shadowMapType:t.shadowMap.type,toneMapping:t.toneMapping,physicallyCorrectLights:t.physicallyCorrectLights,premultipliedAlpha:e.premultipliedAlpha,alphaTest:e.alphaTest,doubleSided:e.side===f,flipSided:e.side===p,depthPacking:void 0!==e.depthPacking&&e.depthPacking};return y},this.getProgramCode=function(e,n){var i=[];if(n.shaderID?i.push(n.shaderID):(i.push(e.fragmentShader),i.push(e.vertexShader)),void 0!==e.defines)for(var r in e.defines)i.push(r),i.push(e.defines[r]);for(var o=0;o<a.length;o++)i.push(n[a[o]]);return i.push(e.onBeforeCompile.toString()),i.push(t.gammaOutput),i.push(t.gammaFactor),i.join()},this.acquireProgram=function(o,a,s,l){for(var c,u=0,h=r.length;u<h;u++){var d=r[u];if(d.code===l){c=d,++c.usedTimes;break}}return void 0===c&&(c=new Ea(t,e,l,o,a,s,n,i),r.push(c)),c},this.releaseProgram=function(t){if(0===--t.usedTimes){var e=r.indexOf(t);r[e]=r[r.length-1],r.pop(),t.destroy()}},this.programs=r}function Ta(){var t=new WeakMap;function e(e){var n=t.get(e);return void 0===n&&(n={},t.set(e,n)),n}function n(e){t.delete(e)}function i(e,n,i){t.get(e)[n]=i}function r(){t=new WeakMap}return{get:e,remove:n,update:i,dispose:r}}function Aa(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.program!==e.program?t.program.id-e.program.id:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function Ca(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function La(){var t=[],e=0,n=[],i=[],r={id:-1};function o(){e=0,n.length=0,i.length=0}function a(n,i,o,a,s,l){var c=t[e];return void 0===c?(c={id:n.id,object:n,geometry:i,material:o,program:o.program||r,groupOrder:a,renderOrder:n.renderOrder,z:s,group:l},t[e]=c):(c.id=n.id,c.object=n,c.geometry=i,c.material=o,c.program=o.program||r,c.groupOrder=a,c.renderOrder=n.renderOrder,c.z=s,c.group=l),e++,c}function s(t,e,r,o,s,l){var c=a(t,e,r,o,s,l);(!0===r.transparent?i:n).push(c)}function l(t,e,r,o,s,l){var c=a(t,e,r,o,s,l);(!0===r.transparent?i:n).unshift(c)}function c(){n.length>1&&n.sort(Aa),i.length>1&&i.sort(Ca)}return{opaque:n,transparent:i,init:o,push:s,unshift:l,sort:c}}function Pa(){var t={};function e(n){var i=n.target;i.removeEventListener("dispose",e),delete t[i.id]}function n(n,i){var r,o=t[n.id];return void 0===o?(r=new La,t[n.id]={},t[n.id][i.id]=r,n.addEventListener("dispose",e)):(r=o[i.id],void 0===r&&(r=new La,o[i.id]=r)),r}function i(){t={}}return{get:n,dispose:i}}function Oa(){var t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];var n;switch(e.type){case"DirectionalLight":n={direction:new Ne,color:new pr,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":n={position:new Ne,direction:new Ne,color:new pr,distance:0,coneCos:0,penumbraCos:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":n={position:new Ne,color:new pr,distance:0,decay:0,shadow:!1,shadowBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break;case"HemisphereLight":n={direction:new Ne,skyColor:new pr,groundColor:new pr};break;case"RectAreaLight":n={color:new pr,position:new Ne,halfWidth:new Ne,halfHeight:new Ne};break}return t[e.id]=n,n}}}var Ra=0;function ka(){for(var t=new Oa,e={id:Ra++,hash:{stateID:-1,directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,shadowsLength:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotShadowMap:[],spotShadowMatrix:[],rectArea:[],point:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[]},n=0;n<9;n++)e.probe.push(new Ne);var i=new Ne,r=new Ze,o=new Ze;function a(n,a,s){for(var l=0,c=0,u=0,h=0;h<9;h++)e.probe[h].set(0,0,0);for(var d=0,p=0,f=0,m=0,v=0,g=s.matrixWorldInverse,y=(h=0,n.length);h<y;h++){var b=n[h],x=b.color,w=b.intensity,_=b.distance,M=b.shadow&&b.shadow.map?b.shadow.map.texture:null;if(b.isAmbientLight)l+=x.r*w,c+=x.g*w,u+=x.b*w;else if(b.isLightProbe)for(var E=0;E<9;E++)e.probe[E].addScaledVector(b.sh.coefficients[E],w);else if(b.isDirectionalLight){var S=t.get(b);if(S.color.copy(b.color).multiplyScalar(b.intensity),S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(g),S.shadow=b.castShadow,b.castShadow){var T=b.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}e.directionalShadowMap[d]=M,e.directionalShadowMatrix[d]=b.shadow.matrix,e.directional[d]=S,d++}else if(b.isSpotLight){S=t.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),S.color.copy(x).multiplyScalar(w),S.distance=_,S.direction.setFromMatrixPosition(b.matrixWorld),i.setFromMatrixPosition(b.target.matrixWorld),S.direction.sub(i),S.direction.transformDirection(g),S.coneCos=Math.cos(b.angle),S.penumbraCos=Math.cos(b.angle*(1-b.penumbra)),S.decay=b.decay,S.shadow=b.castShadow,b.castShadow){T=b.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize}e.spotShadowMap[f]=M,e.spotShadowMatrix[f]=b.shadow.matrix,e.spot[f]=S,f++}else if(b.isRectAreaLight){S=t.get(b);S.color.copy(x).multiplyScalar(w),S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),o.identity(),r.copy(b.matrixWorld),r.premultiply(g),o.extractRotation(r),S.halfWidth.set(.5*b.width,0,0),S.halfHeight.set(0,.5*b.height,0),S.halfWidth.applyMatrix4(o),S.halfHeight.applyMatrix4(o),e.rectArea[m]=S,m++}else if(b.isPointLight){S=t.get(b);if(S.position.setFromMatrixPosition(b.matrixWorld),S.position.applyMatrix4(g),S.color.copy(b.color).multiplyScalar(b.intensity),S.distance=b.distance,S.decay=b.decay,S.shadow=b.castShadow,b.castShadow){T=b.shadow;S.shadowBias=T.bias,S.shadowRadius=T.radius,S.shadowMapSize=T.mapSize,S.shadowCameraNear=T.camera.near,S.shadowCameraFar=T.camera.far}e.pointShadowMap[p]=M,e.pointShadowMatrix[p]=b.shadow.matrix,e.point[p]=S,p++}else if(b.isHemisphereLight){S=t.get(b);S.direction.setFromMatrixPosition(b.matrixWorld),S.direction.transformDirection(g),S.direction.normalize(),S.skyColor.copy(b.color).multiplyScalar(w),S.groundColor.copy(b.groundColor).multiplyScalar(w),e.hemi[v]=S,v++}}e.ambient[0]=l,e.ambient[1]=c,e.ambient[2]=u,e.directional.length=d,e.spot.length=f,e.rectArea.length=m,e.point.length=p,e.hemi.length=v,e.hash.stateID=e.id,e.hash.directionalLength=d,e.hash.pointLength=p,e.hash.spotLength=f,e.hash.rectAreaLength=m,e.hash.hemiLength=v,e.hash.shadowsLength=a.length}return{setup:a,state:e}}function Da(){var t=new ka,e=[],n=[];function i(){e.length=0,n.length=0}function r(t){e.push(t)}function o(t){n.push(t)}function a(i){t.setup(e,n,i)}var s={lightsArray:e,shadowsArray:n,lights:t};return{init:i,state:s,setupLights:a,pushLight:r,pushShadow:o}}function Ia(){var t={};function e(n){var i=n.target;i.removeEventListener("dispose",e),delete t[i.id]}function n(n,i){var r;return void 0===t[n.id]?(r=new Da,t[n.id]={},t[n.id][i.id]=r,n.addEventListener("dispose",e)):void 0===t[n.id][i.id]?(r=new Da,t[n.id][i.id]=r):r=t[n.id][i.id],r}function i(){t={}}return{get:n,dispose:i}}function Na(t){Gr.call(this),this.type="MeshDepthMaterial",this.depthPacking=Le,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.setValues(t)}function za(t){Gr.call(this),this.type="MeshDistanceMaterial",this.referencePosition=new Ne,this.nearDistance=1,this.farDistance=1e3,this.skinning=!1,this.morphTargets=!1,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.fog=!1,this.lights=!1,this.setValues(t)}function Ba(t,e,n){for(var i=new Xe,r=new Ze,o=new De,a=new De(n,n),s=new Ne,l=new Ne,c=1,h=2,m=1+(c|h),v=new Array(m),g=new Array(m),y={},x={0:p,1:d,2:f},w=[new Ne(1,0,0),new Ne(-1,0,0),new Ne(0,0,1),new Ne(0,0,-1),new Ne(0,1,0),new Ne(0,-1,0)],_=[new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,1,0),new Ne(0,0,1),new Ne(0,0,-1)],M=[new He,new He,new He,new He,new He,new He],E=0;E!==m;++E){var S=0!==(E&c),T=0!==(E&h),A=new Na({depthPacking:Pe,morphTargets:S,skinning:T});v[E]=A;var C=new za({morphTargets:S,skinning:T});g[E]=C}var L=this;function P(e,n,i,r,o,a){var s=e.geometry,l=null,u=v,d=e.customDepthMaterial;if(i&&(u=g,d=e.customDistanceMaterial),d)l=d;else{var p=!1;n.morphTargets&&(s&&s.isBufferGeometry?p=s.morphAttributes&&s.morphAttributes.position&&s.morphAttributes.position.length>0:s&&s.isGeometry&&(p=s.morphTargets&&s.morphTargets.length>0)),e.isSkinnedMesh&&!1===n.skinning&&console.warn("THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:",e);var f=e.isSkinnedMesh&&n.skinning,m=0;p&&(m|=c),f&&(m|=h),l=u[m]}if(t.localClippingEnabled&&!0===n.clipShadows&&0!==n.clippingPlanes.length){var b=l.uuid,w=n.uuid,_=y[b];void 0===_&&(_={},y[b]=_);var M=_[w];void 0===M&&(M=l.clone(),_[w]=M),l=M}return l.visible=n.visible,l.wireframe=n.wireframe,l.side=null!=n.shadowSide?n.shadowSide:x[n.side],l.clipShadows=n.clipShadows,l.clippingPlanes=n.clippingPlanes,l.clipIntersection=n.clipIntersection,l.wireframeLinewidth=n.wireframeLinewidth,l.linewidth=n.linewidth,i&&l.isMeshDistanceMaterial&&(l.referencePosition.copy(r),l.nearDistance=o,l.farDistance=a),l}function O(n,r,o,a){if(!1!==n.visible){var s=n.layers.test(r.layers);if(s&&(n.isMesh||n.isLine||n.isPoints)&&n.castShadow&&(!n.frustumCulled||i.intersectsObject(n))){n.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,n.matrixWorld);var c=e.update(n),u=n.material;if(Array.isArray(u))for(var h=c.groups,d=0,p=h.length;d<p;d++){var f=h[d],m=u[f.materialIndex];if(m&&m.visible){var v=P(n,m,a,l,o.near,o.far);t.renderBufferDirect(o,null,c,v,n,f)}}else if(u.visible){v=P(n,u,a,l,o.near,o.far);t.renderBufferDirect(o,null,c,v,n,null)}}for(var g=n.children,y=0,b=g.length;y<b;y++)O(g[y],r,o,a)}}this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=u,this.render=function(e,n,c){if(!1!==L.enabled&&(!1!==L.autoUpdate||!1!==L.needsUpdate)&&0!==e.length){var u,h=t.getRenderTarget(),d=t.getActiveCubeFace(),p=t.getActiveMipMapLevel(),f=t.state;f.setBlending(b),f.buffers.color.setClear(1,1,1,1),f.buffers.depth.setTest(!0),f.setScissorTest(!1);for(var m=0,v=e.length;m<v;m++){var g=e[m],y=g.shadow,x=g&&g.isPointLight;if(void 0!==y){var E=y.camera;if(o.copy(y.mapSize),o.min(a),x){var S=o.x,T=o.y;M[0].set(2*S,T,S,T),M[1].set(0,T,S,T),M[2].set(3*S,T,S,T),M[3].set(S,T,S,T),M[4].set(3*S,0,S,T),M[5].set(S,0,S,T),o.x*=4,o.y*=2}if(null===y.map){var A={minFilter:mt,magFilter:mt,format:It};y.map=new Ue(o.x,o.y,A),y.map.texture.name=g.name+".shadowMap",E.updateProjectionMatrix()}y.isSpotLightShadow&&y.update(g);var C=y.map,P=y.matrix;l.setFromMatrixPosition(g.matrixWorld),E.position.copy(l),x?(u=6,P.makeTranslation(-l.x,-l.y,-l.z)):(u=1,s.setFromMatrixPosition(g.target.matrixWorld),E.lookAt(s),E.updateMatrixWorld(),P.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),P.multiply(E.projectionMatrix),P.multiply(E.matrixWorldInverse)),t.setRenderTarget(C),t.clear();for(var R=0;R<u;R++){if(x){s.copy(E.position),s.add(w[R]),E.up.copy(_[R]),E.lookAt(s),E.updateMatrixWorld();var k=M[R];f.viewport(k)}r.multiplyMatrices(E.projectionMatrix,E.matrixWorldInverse),i.setFromMatrix(r),O(n,c,E,x)}}else console.warn("THREE.WebGLShadowMap:",g,"has no shadow.")}L.needsUpdate=!1,t.setRenderTarget(h,d,p)}}}function Fa(t,e,n,i){function r(){var e=!1,n=new He,i=null,r=new He(0,0,0,0);return{setMask:function(n){i===n||e||(t.colorMask(n,n,n,n),i=n)},setLocked:function(t){e=t},setClear:function(e,i,o,a,s){!0===s&&(e*=a,i*=a,o*=a),n.set(e,i,o,a),!1===r.equals(n)&&(t.clearColor(e,i,o,a),r.copy(n))},reset:function(){e=!1,i=null,r.set(-1,0,0,0)}}}function o(){var e=!1,n=null,i=null,r=null;return{setTest:function(t){t?ht(2929):dt(2929)},setMask:function(i){n===i||e||(t.depthMask(i),n=i)},setFunc:function(e){if(i!==e){if(e)switch(e){case H:t.depthFunc(512);break;case U:t.depthFunc(519);break;case V:t.depthFunc(513);break;case G:t.depthFunc(515);break;case W:t.depthFunc(514);break;case $:t.depthFunc(518);break;case q:t.depthFunc(516);break;case Y:t.depthFunc(517);break;default:t.depthFunc(515)}else t.depthFunc(515);i=e}},setLocked:function(t){e=t},setClear:function(e){r!==e&&(t.clearDepth(e),r=e)},reset:function(){e=!1,n=null,i=null,r=null}}}function a(){var e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null;return{setTest:function(t){t?ht(2960):dt(2960)},setMask:function(i){n===i||e||(t.stencilMask(i),n=i)},setFunc:function(e,n,a){i===e&&r===n&&o===a||(t.stencilFunc(e,n,a),i=e,r=n,o=a)},setOp:function(e,n,i){a===e&&s===n&&l===i||(t.stencilOp(e,n,i),a=e,s=n,l=i)},setLocked:function(t){e=t},setClear:function(e){c!==e&&(t.clearStencil(e),c=e)},reset:function(){e=!1,n=null,i=null,r=null,o=null,a=null,s=null,l=null,c=null}}}var u=new r,h=new o,d=new a,m=t.getParameter(34921),v=new Uint8Array(m),g=new Uint8Array(m),y=new Uint8Array(m),T={},A=null,C=null,L=null,P=null,O=null,R=null,k=null,D=null,I=null,N=null,z=!1,B=null,F=null,j=null,X=null,Z=null,J=t.getParameter(35661),K=!1,Q=0,tt=t.getParameter(7938);-1!==tt.indexOf("WebGL")?(Q=parseFloat(/^WebGL\ ([0-9])/.exec(tt)[1]),K=Q>=1):-1!==tt.indexOf("OpenGL ES")&&(Q=parseFloat(/^OpenGL\ ES\ ([0-9])/.exec(tt)[1]),K=Q>=2);var et=null,nt={},it=new He,rt=new He;function ot(e,n,i){var r=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,10241,9728),t.texParameteri(e,10240,9728);for(var a=0;a<i;a++)t.texImage2D(n+a,0,6408,1,1,0,6408,5121,r);return o}var at={};function st(){for(var t=0,e=v.length;t<e;t++)v[t]=0}function lt(t){ct(t,0)}function ct(n,r){if(v[n]=1,0===g[n]&&(t.enableVertexAttribArray(n),g[n]=1),y[n]!==r){var o=i.isWebGL2?t:e.get("ANGLE_instanced_arrays");o[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](n,r),y[n]=r}}function ut(){for(var e=0,n=g.length;e!==n;++e)g[e]!==v[e]&&(t.disableVertexAttribArray(e),g[e]=0)}function ht(e){!0!==T[e]&&(t.enable(e),T[e]=!0)}function dt(e){!1!==T[e]&&(t.disable(e),T[e]=!1)}function pt(){if(null===A&&(A=[],e.get("WEBGL_compressed_texture_pvrtc")||e.get("WEBGL_compressed_texture_s3tc")||e.get("WEBGL_compressed_texture_etc1")||e.get("WEBGL_compressed_texture_astc")))for(var n=t.getParameter(34467),i=0;i<n.length;i++)A.push(n[i]);return A}function ft(e){return C!==e&&(t.useProgram(e),C=e,!0)}function mt(e,i,r,o,a,s,l,c){if(e!==b){if(L||(ht(3042),L=!0),e===E)a=a||i,s=s||r,l=l||o,i===O&&a===D||(t.blendEquationSeparate(n.convert(i),n.convert(a)),O=i,D=a),r===R&&o===k&&s===I&&l===N||(t.blendFuncSeparate(n.convert(r),n.convert(o),n.convert(s),n.convert(l)),R=r,k=o,I=s,N=l),P=e,z=null;else if(e!==P||c!==z){if(O===S&&D===S||(t.blendEquation(32774),O=S,D=S),c)switch(e){case x:t.blendFuncSeparate(1,771,1,771);break;case w:t.blendFunc(1,1);break;case _:t.blendFuncSeparate(0,0,769,771);break;case M:t.blendFuncSeparate(0,768,0,770);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case x:t.blendFuncSeparate(770,771,1,771);break;case w:t.blendFunc(770,1);break;case _:t.blendFunc(0,769);break;case M:t.blendFunc(0,768);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}R=null,k=null,I=null,N=null,P=e,z=c}}else L&&(dt(3042),L=!1)}function vt(t,e){t.side===f?dt(2884):ht(2884);var n=t.side===p;e&&(n=!n),gt(n),t.blending===x&&!1===t.transparent?mt(b):mt(t.blending,t.blendEquation,t.blendSrc,t.blendDst,t.blendEquationAlpha,t.blendSrcAlpha,t.blendDstAlpha,t.premultipliedAlpha),h.setFunc(t.depthFunc),h.setTest(t.depthTest),h.setMask(t.depthWrite),u.setMask(t.colorWrite),xt(t.polygonOffset,t.polygonOffsetFactor,t.polygonOffsetUnits)}function gt(e){B!==e&&(e?t.frontFace(2304):t.frontFace(2305),B=e)}function yt(e){e!==s?(ht(2884),e!==F&&(e===l?t.cullFace(1029):e===c?t.cullFace(1028):t.cullFace(1032))):dt(2884),F=e}function bt(e){e!==j&&(K&&t.lineWidth(e),j=e)}function xt(e,n,i){e?(ht(32823),X===n&&Z===i||(t.polygonOffset(n,i),X=n,Z=i)):dt(32823)}function wt(t){t?ht(3089):dt(3089)}function _t(e){void 0===e&&(e=33984+J-1),et!==e&&(t.activeTexture(e),et=e)}function Mt(e,n){null===et&&_t();var i=nt[et];void 0===i&&(i={type:void 0,texture:void 0},nt[et]=i),i.type===e&&i.texture===n||(t.bindTexture(e,n||at[e]),i.type=e,i.texture=n)}function Et(){try{t.compressedTexImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function St(){try{t.texImage2D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function Tt(){try{t.texImage3D.apply(t,arguments)}catch(e){console.error("THREE.WebGLState:",e)}}function At(e){!1===it.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),it.copy(e))}function Ct(e){!1===rt.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),rt.copy(e))}function Lt(){for(var e=0;e<g.length;e++)1===g[e]&&(t.disableVertexAttribArray(e),g[e]=0);T={},A=null,et=null,nt={},C=null,P=null,B=null,F=null,u.reset(),h.reset(),d.reset()}return at[3553]=ot(3553,3553,1),at[34067]=ot(34067,34069,6),u.setClear(0,0,0,1),h.setClear(1),d.setClear(0),ht(2929),h.setFunc(G),gt(!1),yt(l),ht(2884),mt(b),{buffers:{color:u,depth:h,stencil:d},initAttributes:st,enableAttribute:lt,enableAttributeAndDivisor:ct,disableUnusedAttributes:ut,enable:ht,disable:dt,getCompressedTextureFormats:pt,useProgram:ft,setBlending:mt,setMaterial:vt,setFlipSided:gt,setCullFace:yt,setLineWidth:bt,setPolygonOffset:xt,setScissorTest:wt,activeTexture:_t,bindTexture:Mt,compressedTexImage2D:Et,texImage2D:St,texImage3D:Tt,scissor:At,viewport:Ct,reset:Lt}}function ja(t,e,n,i,r,o,a){var s,l={},c="undefined"!==typeof OffscreenCanvas;function u(t,e){return c?new OffscreenCanvas(t,e):document.createElementNS("http://www.w3.org/1999/xhtml","canvas")}function h(t,e,n,i){var r=1;if((t.width>i||t.height>i)&&(r=i/Math.max(t.width,t.height)),r<1||!0===e){if("undefined"!==typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!==typeof ImageBitmap&&t instanceof ImageBitmap){var o=e?ke.floorPowerOfTwo:Math.floor,a=o(r*t.width),l=o(r*t.height);void 0===s&&(s=u(a,l));var c=n?u(a,l):s;c.width=a,c.height=l;var h=c.getContext("2d");return h.drawImage(t,0,0,a,l),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+t.width+"x"+t.height+") to ("+a+"x"+l+")."),c}return"data"in t&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+t.width+"x"+t.height+")."),t}return t}function d(t){return ke.isPowerOfTwo(t.width)&&ke.isPowerOfTwo(t.height)}function p(t){return!r.isWebGL2&&(t.wrapS!==pt||t.wrapT!==pt||t.minFilter!==mt&&t.minFilter!==yt)}function f(t,e){return t.generateMipmaps&&e&&t.minFilter!==mt&&t.minFilter!==yt}function m(e,n,r,o){t.generateMipmap(e);var a=i.get(n);a.__maxMipLevel=Math.log(Math.max(r,o))*Math.LOG2E}function v(t,n){if(!r.isWebGL2)return t;var i=t;return 6403===t&&(5126===n&&(i=33326),5131===n&&(i=33325),5121===n&&(i=33321)),6407===t&&(5126===n&&(i=34837),5131===n&&(i=34843),5121===n&&(i=32849)),6408===t&&(5126===n&&(i=34836),5131===n&&(i=34842),5121===n&&(i=32856)),33325===i||33326===i||34842===i||34836===i?e.get("EXT_color_buffer_float"):34843!==i&&34837!==i||console.warn("THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead."),i}function g(t){return t===mt||t===vt||t===gt?9728:9729}function y(t){var e=t.target;e.removeEventListener("dispose",y),x(e),e.isVideoTexture&&delete l[e.id],a.memory.textures--}function b(t){var e=t.target;e.removeEventListener("dispose",b),w(e),a.memory.textures--}function x(e){var n=i.get(e);void 0!==n.__webglInit&&(t.deleteTexture(n.__webglTexture),i.remove(e))}function w(e){var n=i.get(e),r=i.get(e.texture);if(e){if(void 0!==r.__webglTexture&&t.deleteTexture(r.__webglTexture),e.depthTexture&&e.depthTexture.dispose(),e.isWebGLRenderTargetCube)for(var o=0;o<6;o++)t.deleteFramebuffer(n.__webglFramebuffer[o]),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer[o]);else t.deleteFramebuffer(n.__webglFramebuffer),n.__webglDepthbuffer&&t.deleteRenderbuffer(n.__webglDepthbuffer);i.remove(e.texture),i.remove(e)}}var _=0;function M(){_=0}function E(){var t=_;return t>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+r.maxTextures),_+=1,t}function S(t,e){var r=i.get(t);if(t.isVideoTexture&&H(t),t.version>0&&r.__version!==t.version){var o=t.image;if(void 0===o)console.warn("THREE.WebGLRenderer: Texture marked for update but image is undefined");else{if(!1!==o.complete)return void R(r,t,e);console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}n.activeTexture(33984+e),n.bindTexture(3553,r.__webglTexture)}function T(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?R(r,t,e):(n.activeTexture(33984+e),n.bindTexture(35866,r.__webglTexture))}function A(t,e){var r=i.get(t);t.version>0&&r.__version!==t.version?R(r,t,e):(n.activeTexture(33984+e),n.bindTexture(32879,r.__webglTexture))}function C(e,a){var s=i.get(e);if(6===e.image.length)if(e.version>0&&s.__version!==e.version){O(s,e),n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture),t.pixelStorei(37440,e.flipY);for(var l=e&&e.isCompressedTexture,c=e.image[0]&&e.image[0].isDataTexture,u=[],p=0;p<6;p++)u[p]=l||c?c?e.image[p].image:e.image[p]:h(e.image[p],!1,!0,r.maxCubemapSize);var g=u[0],y=d(g)||r.isWebGL2,b=o.convert(e.format),x=o.convert(e.type),w=v(b,x);P(34067,e,y);for(p=0;p<6;p++)if(l)for(var _,M=u[p].mipmaps,E=0,S=M.length;E<S;E++)_=M[E],e.format!==It&&e.format!==Dt?n.getCompressedTextureFormats().indexOf(b)>-1?n.compressedTexImage2D(34069+p,E,w,_.width,_.height,0,_.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):n.texImage2D(34069+p,E,w,_.width,_.height,0,b,x,_.data);else c?n.texImage2D(34069+p,0,w,u[p].width,u[p].height,0,b,x,u[p].data):n.texImage2D(34069+p,0,w,b,x,u[p]);s.__maxMipLevel=l?M.length-1:0,f(e,y)&&m(34067,e,g.width,g.height),s.__version=e.version,e.onUpdate&&e.onUpdate(e)}else n.activeTexture(33984+a),n.bindTexture(34067,s.__webglTexture)}function L(t,e){n.activeTexture(33984+e),n.bindTexture(34067,i.get(t).__webglTexture)}function P(n,a,s){var l;if(s?(t.texParameteri(n,10242,o.convert(a.wrapS)),t.texParameteri(n,10243,o.convert(a.wrapT)),32879!==n&&35866!==n||t.texParameteri(n,32882,o.convert(a.wrapR)),t.texParameteri(n,10240,o.convert(a.magFilter)),t.texParameteri(n,10241,o.convert(a.minFilter))):(t.texParameteri(n,10242,33071),t.texParameteri(n,10243,33071),32879!==n&&35866!==n||t.texParameteri(n,32882,33071),a.wrapS===pt&&a.wrapT===pt||console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),t.texParameteri(n,10240,g(a.magFilter)),t.texParameteri(n,10241,g(a.minFilter)),a.minFilter!==mt&&a.minFilter!==yt&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),l=e.get("EXT_texture_filter_anisotropic"),l){if(a.type===At&&null===e.get("OES_texture_float_linear"))return;if(a.type===Ct&&null===(r.isWebGL2||e.get("OES_texture_half_float_linear")))return;(a.anisotropy>1||i.get(a).__currentAnisotropy)&&(t.texParameterf(n,l.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,r.getMaxAnisotropy())),i.get(a).__currentAnisotropy=a.anisotropy)}}function O(e,n){void 0===e.__webglInit&&(e.__webglInit=!0,n.addEventListener("dispose",y),e.__webglTexture=t.createTexture(),a.memory.textures++)}function R(e,i,a){var s=3553;i.isDataTexture2DArray&&(s=35866),i.isDataTexture3D&&(s=32879),O(e,i),n.activeTexture(33984+a),n.bindTexture(s,e.__webglTexture),t.pixelStorei(37440,i.flipY),t.pixelStorei(37441,i.premultiplyAlpha),t.pixelStorei(3317,i.unpackAlignment);var l=p(i)&&!1===d(i.image),c=h(i.image,l,!1,r.maxTextureSize),u=d(c)||r.isWebGL2,g=o.convert(i.format),y=o.convert(i.type),b=v(g,y);P(s,i,u);var x,w=i.mipmaps;if(i.isDepthTexture){if(b=6402,i.type===At){if(!r.isWebGL2)throw new Error("Float Depth Texture only supported in WebGL2.0");b=36012}else r.isWebGL2&&(b=33189);i.format===Bt&&6402===b&&i.type!==Et&&i.type!==Tt&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),i.type=Et,y=o.convert(i.type)),i.format===Ft&&(b=34041,i.type!==Rt&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),i.type=Rt,y=o.convert(i.type))),n.texImage2D(3553,0,b,c.width,c.height,0,g,y,null)}else if(i.isDataTexture)if(w.length>0&&u){for(var _=0,M=w.length;_<M;_++)x=w[_],n.texImage2D(3553,_,b,x.width,x.height,0,g,y,x.data);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,c.width,c.height,0,g,y,c.data),e.__maxMipLevel=0;else if(i.isCompressedTexture){for(_=0,M=w.length;_<M;_++)x=w[_],i.format!==It&&i.format!==Dt?n.getCompressedTextureFormats().indexOf(g)>-1?n.compressedTexImage2D(3553,_,b,x.width,x.height,0,x.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texImage2D(3553,_,b,x.width,x.height,0,g,y,x.data);e.__maxMipLevel=w.length-1}else if(i.isDataTexture2DArray)n.texImage3D(35866,0,b,c.width,c.height,c.depth,0,g,y,c.data),e.__maxMipLevel=0;else if(i.isDataTexture3D)n.texImage3D(32879,0,b,c.width,c.height,c.depth,0,g,y,c.data),e.__maxMipLevel=0;else if(w.length>0&&u){for(_=0,M=w.length;_<M;_++)x=w[_],n.texImage2D(3553,_,b,g,y,x);i.generateMipmaps=!1,e.__maxMipLevel=w.length-1}else n.texImage2D(3553,0,b,g,y,c),e.__maxMipLevel=0;f(i,u)&&m(3553,i,c.width,c.height),e.__version=i.version,i.onUpdate&&i.onUpdate(i)}function k(e,r,a,s){var l=o.convert(r.texture.format),c=o.convert(r.texture.type),u=v(l,c);n.texImage2D(s,0,u,r.width,r.height,0,l,c,null),t.bindFramebuffer(36160,e),t.framebufferTexture2D(36160,a,s,i.get(r.texture).__webglTexture,0),t.bindFramebuffer(36160,null)}function D(e,n,i){if(t.bindRenderbuffer(36161,e),n.depthBuffer&&!n.stencilBuffer){if(i){var r=j(n);t.renderbufferStorageMultisample(36161,r,33189,n.width,n.height)}else t.renderbufferStorage(36161,33189,n.width,n.height);t.framebufferRenderbuffer(36160,36096,36161,e)}else if(n.depthBuffer&&n.stencilBuffer){if(i){r=j(n);t.renderbufferStorageMultisample(36161,r,34041,n.width,n.height)}else t.renderbufferStorage(36161,34041,n.width,n.height);t.framebufferRenderbuffer(36160,33306,36161,e)}else{var a=o.convert(n.texture.format),s=o.convert(n.texture.type),l=v(a,s);if(i){r=j(n);t.renderbufferStorageMultisample(36161,r,l,n.width,n.height)}else t.renderbufferStorage(36161,l,n.width,n.height)}t.bindRenderbuffer(36161,null)}function I(e,n){var r=n&&n.isWebGLRenderTargetCube;if(r)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(36160,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");i.get(n.depthTexture).__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),S(n.depthTexture,0);var o=i.get(n.depthTexture).__webglTexture;if(n.depthTexture.format===Bt)t.framebufferTexture2D(36160,36096,3553,o,0);else{if(n.depthTexture.format!==Ft)throw new Error("Unknown depthTexture format");t.framebufferTexture2D(36160,33306,3553,o,0)}}function N(e){var n=i.get(e),r=!0===e.isWebGLRenderTargetCube;if(e.depthTexture){if(r)throw new Error("target.depthTexture not supported in Cube render targets");I(n.__webglFramebuffer,e)}else if(r){n.__webglDepthbuffer=[];for(var o=0;o<6;o++)t.bindFramebuffer(36160,n.__webglFramebuffer[o]),n.__webglDepthbuffer[o]=t.createRenderbuffer(),D(n.__webglDepthbuffer[o],e)}else t.bindFramebuffer(36160,n.__webglFramebuffer),n.__webglDepthbuffer=t.createRenderbuffer(),D(n.__webglDepthbuffer,e);t.bindFramebuffer(36160,null)}function z(e){var s=i.get(e),l=i.get(e.texture);e.addEventListener("dispose",b),l.__webglTexture=t.createTexture(),a.memory.textures++;var c=!0===e.isWebGLRenderTargetCube,u=!0===e.isWebGLMultisampleRenderTarget,h=d(e)||r.isWebGL2;if(c){s.__webglFramebuffer=[];for(var p=0;p<6;p++)s.__webglFramebuffer[p]=t.createFramebuffer()}else if(s.__webglFramebuffer=t.createFramebuffer(),u)if(r.isWebGL2){s.__webglMultisampledFramebuffer=t.createFramebuffer(),s.__webglColorRenderbuffer=t.createRenderbuffer(),t.bindRenderbuffer(36161,s.__webglColorRenderbuffer);var g=o.convert(e.texture.format),y=o.convert(e.texture.type),x=v(g,y),w=j(e);t.renderbufferStorageMultisample(36161,w,x,e.width,e.height),t.bindFramebuffer(36160,s.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(36160,36064,36161,s.__webglColorRenderbuffer),t.bindRenderbuffer(36161,null),e.depthBuffer&&(s.__webglDepthRenderbuffer=t.createRenderbuffer(),D(s.__webglDepthRenderbuffer,e,!0)),t.bindFramebuffer(36160,null)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.");if(c){n.bindTexture(34067,l.__webglTexture),P(34067,e.texture,h);for(p=0;p<6;p++)k(s.__webglFramebuffer[p],e,36064,34069+p);f(e.texture,h)&&m(34067,e.texture,e.width,e.height),n.bindTexture(34067,null)}else n.bindTexture(3553,l.__webglTexture),P(3553,e.texture,h),k(s.__webglFramebuffer,e,36064,3553),f(e.texture,h)&&m(3553,e.texture,e.width,e.height),n.bindTexture(3553,null);e.depthBuffer&&N(e)}function B(t){var e=t.texture,o=d(t)||r.isWebGL2;if(f(e,o)){var a=t.isWebGLRenderTargetCube?34067:3553,s=i.get(e).__webglTexture;n.bindTexture(a,s),m(a,e,t.width,t.height),n.bindTexture(a,null)}}function F(e){if(e.isWebGLMultisampleRenderTarget)if(r.isWebGL2){var n=i.get(e);t.bindFramebuffer(36008,n.__webglMultisampledFramebuffer),t.bindFramebuffer(36009,n.__webglFramebuffer);var o=e.width,a=e.height,s=16384;e.depthBuffer&&(s|=256),e.stencilBuffer&&(s|=1024),t.blitFramebuffer(0,0,o,a,0,0,o,a,s,9728)}else console.warn("THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.")}function j(t){return r.isWebGL2&&t.isWebGLMultisampleRenderTarget?Math.min(r.maxSamples,t.samples):0}function H(t){var e=t.id,n=a.render.frame;l[e]!==n&&(l[e]=n,t.update())}var U=!1,V=!1;function G(t,e){t&&t.isWebGLRenderTarget&&(!1===U&&(console.warn("THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead."),U=!0),t=t.texture),S(t,e)}function W(t,e){t&&t.isWebGLRenderTargetCube&&(!1===V&&(console.warn("THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead."),V=!0),t=t.texture),t&&t.isCubeTexture||Array.isArray(t.image)&&6===t.image.length?C(t,e):L(t,e)}this.allocateTextureUnit=E,this.resetTextureUnits=M,this.setTexture2D=S,this.setTexture2DArray=T,this.setTexture3D=A,this.setTextureCube=C,this.setTextureCubeDynamic=L,this.setupRenderTarget=z,this.updateRenderTargetMipmap=B,this.updateMultisampleRenderTarget=F,this.safeSetTexture2D=G,this.safeSetTextureCube=W}function Ha(t,e,n){function i(t){var i;if(t===dt)return 10497;if(t===pt)return 33071;if(t===ft)return 33648;if(t===mt)return 9728;if(t===vt)return 9984;if(t===gt)return 9986;if(t===yt)return 9729;if(t===bt)return 9985;if(t===xt)return 9987;if(t===wt)return 5121;if(t===Lt)return 32819;if(t===Pt)return 32820;if(t===Ot)return 33635;if(t===_t)return 5120;if(t===Mt)return 5122;if(t===Et)return 5123;if(t===St)return 5124;if(t===Tt)return 5125;if(t===At)return 5126;if(t===Ct){if(n.isWebGL2)return 5131;if(i=e.get("OES_texture_half_float"),null!==i)return i.HALF_FLOAT_OES}if(t===kt)return 6406;if(t===Dt)return 6407;if(t===It)return 6408;if(t===Nt)return 6409;if(t===zt)return 6410;if(t===Bt)return 6402;if(t===Ft)return 34041;if(t===jt)return 6403;if(t===S)return 32774;if(t===T)return 32778;if(t===A)return 32779;if(t===P)return 0;if(t===O)return 1;if(t===R)return 768;if(t===k)return 769;if(t===D)return 770;if(t===I)return 771;if(t===N)return 772;if(t===z)return 773;if(t===B)return 774;if(t===F)return 775;if(t===j)return 776;if((t===Ht||t===Ut||t===Vt||t===Gt)&&(i=e.get("WEBGL_compressed_texture_s3tc"),null!==i)){if(t===Ht)return i.COMPRESSED_RGB_S3TC_DXT1_EXT;if(t===Ut)return i.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(t===Vt)return i.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(t===Gt)return i.COMPRESSED_RGBA_S3TC_DXT5_EXT}if((t===Wt||t===$t||t===qt||t===Yt)&&(i=e.get("WEBGL_compressed_texture_pvrtc"),null!==i)){if(t===Wt)return i.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(t===$t)return i.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(t===qt)return i.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(t===Yt)return i.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(t===Xt&&(i=e.get("WEBGL_compressed_texture_etc1"),null!==i))return i.COMPRESSED_RGB_ETC1_WEBGL;if((t===Zt||t===Jt||t===Kt||t===Qt||t===te||t===ee||t===ne||t===ie||t===re||t===oe||t===ae||t===se||t===le||t===ce)&&(i=e.get("WEBGL_compressed_texture_astc"),null!==i))return t;if(t===C||t===L){if(n.isWebGL2){if(t===C)return 32775;if(t===L)return 32776}if(i=e.get("EXT_blend_minmax"),null!==i){if(t===C)return i.MIN_EXT;if(t===L)return i.MAX_EXT}}if(t===Rt){if(n.isWebGL2)return 34042;if(i=e.get("WEBGL_depth_texture"),null!==i)return i.UNSIGNED_INT_24_8_WEBGL}return 0}return{convert:i}}function Ua(){_r.call(this),this.type="Group"}function Va(){_r.call(this),this.type="Camera",this.matrixWorldInverse=new Ze,this.projectionMatrix=new Ze,this.projectionMatrixInverse=new Ze}function Ga(t,e,n,i){Va.call(this),this.type="PerspectiveCamera",this.fov=void 0!==t?t:50,this.zoom=1,this.near=void 0!==n?n:.1,this.far=void 0!==i?i:2e3,this.focus=10,this.aspect=void 0!==e?e:1,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}function Wa(t){Ga.call(this),this.cameras=t||[]}Na.prototype=Object.create(Gr.prototype),Na.prototype.constructor=Na,Na.prototype.isMeshDepthMaterial=!0,Na.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.depthPacking=t.depthPacking,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this},za.prototype=Object.create(Gr.prototype),za.prototype.constructor=za,za.prototype.isMeshDistanceMaterial=!0,za.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.referencePosition.copy(t.referencePosition),this.nearDistance=t.nearDistance,this.farDistance=t.farDistance,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this},Ua.prototype=Object.assign(Object.create(_r.prototype),{constructor:Ua,isGroup:!0}),Va.prototype=Object.assign(Object.create(_r.prototype),{constructor:Va,isCamera:!0,copy:function(t,e){return _r.prototype.copy.call(this,t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this},getWorldDirection:function(t){void 0===t&&(console.warn("THREE.Camera: .getWorldDirection() target is now required"),t=new Ne),this.updateMatrixWorld(!0);var e=this.matrixWorld.elements;return t.set(-e[8],-e[9],-e[10]).normalize()},updateMatrixWorld:function(t){_r.prototype.updateMatrixWorld.call(this,t),this.matrixWorldInverse.getInverse(this.matrixWorld)},clone:function(){return(new this.constructor).copy(this)}}),Ga.prototype=Object.assign(Object.create(Va.prototype),{constructor:Ga,isPerspectiveCamera:!0,copy:function(t,e){return Va.prototype.copy.call(this,t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this},setFocalLength:function(t){var e=.5*this.getFilmHeight()/t;this.fov=2*ke.RAD2DEG*Math.atan(e),this.updateProjectionMatrix()},getFocalLength:function(){var t=Math.tan(.5*ke.DEG2RAD*this.fov);return.5*this.getFilmHeight()/t},getEffectiveFOV:function(){return 2*ke.RAD2DEG*Math.atan(Math.tan(.5*ke.DEG2RAD*this.fov)/this.zoom)},getFilmWidth:function(){return this.filmGauge*Math.min(this.aspect,1)},getFilmHeight:function(){return this.filmGauge/Math.max(this.aspect,1)},setViewOffset:function(t,e,n,i,r,o){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=this.near,e=t*Math.tan(.5*ke.DEG2RAD*this.fov)/this.zoom,n=2*e,i=this.aspect*n,r=-.5*i,o=this.view;if(null!==this.view&&this.view.enabled){var a=o.fullWidth,s=o.fullHeight;r+=o.offsetX*i/a,e-=o.offsetY*n/s,i*=o.width/a,n*=o.height/s}var l=this.filmOffset;0!==l&&(r+=t*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(r,r+i,e,e-n,t,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=_r.prototype.toJSON.call(this,t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}),Wa.prototype=Object.assign(Object.create(Ga.prototype),{constructor:Wa,isArrayCamera:!0});var $a,qa=new Ne,Ya=new Ne;function Xa(t,e,n){qa.setFromMatrixPosition(e.matrixWorld),Ya.setFromMatrixPosition(n.matrixWorld);var i=qa.distanceTo(Ya),r=e.projectionMatrix.elements,o=n.projectionMatrix.elements,a=r[14]/(r[10]-1),s=r[14]/(r[10]+1),l=(r[9]+1)/r[5],c=(r[9]-1)/r[5],u=(r[8]-1)/r[0],h=(o[8]+1)/o[0],d=a*u,p=a*h,f=i/(-u+h),m=f*-u;e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(f),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.getInverse(t.matrixWorld);var v=a+f,g=s+f,y=d-m,b=p+(i-m),x=l*s/g*v,w=c*s/g*v;t.projectionMatrix.makePerspective(y,b,x,w,v,g)}function Za(t){var e,n,i=this,r=null,o=null,a=null,s=[],l=new Ze,c=new Ze,u=1,h="local-floor";"undefined"!==typeof window&&"VRFrameData"in window&&(o=new window.VRFrameData,window.addEventListener("vrdisplaypresentchange",w,!1));var d=new Ze,p=new Ie,f=new Ne,m=new Ga;m.viewport=new He,m.layers.enable(1);var v=new Ga;v.viewport=new He,v.layers.enable(2);var g=new Wa([m,v]);function y(){return null!==r&&!0===r.isPresenting}g.layers.enable(1),g.layers.enable(2);var b,x=new De;function w(){if(y()){var o=r.getEyeParameters("left");e=2*o.renderWidth*u,n=o.renderHeight*u,b=t.getPixelRatio(),t.getSize(x),t.setDrawingBufferSize(e,n,1),m.viewport.set(0,0,e/2,n),v.viewport.set(e/2,0,e/2,n),T.start()}else i.enabled&&t.setDrawingBufferSize(x.width,x.height,b),T.stop()}var _=[];function M(t){for(var e=navigator.getGamepads&&navigator.getGamepads(),n=0,i=0,r=e.length;n<r;n++){var o=e[n];if(o&&("Daydream Controller"===o.id||"Gear VR Controller"===o.id||"Oculus Go Controller"===o.id||"OpenVR Gamepad"===o.id||o.id.startsWith("Oculus Touch")||o.id.startsWith("Spatial Controller"))){if(i===t)return o;i++}}}function E(){for(var t=0;t<s.length;t++){var e=s[t],n=M(t);if(void 0!==n&&void 0!==n.pose){if(null===n.pose)return;var i=n.pose;!1===i.hasPosition&&e.position.set(.2,-.6,-.05),null!==i.position&&e.position.fromArray(i.position),null!==i.orientation&&e.quaternion.fromArray(i.orientation),e.matrix.compose(e.position,e.quaternion,e.scale),e.matrix.premultiply(l),e.matrix.decompose(e.position,e.quaternion,e.scale),e.matrixWorldNeedsUpdate=!0,e.visible=!0;var r="Daydream Controller"===n.id?0:1;void 0===_[t]&&(_[t]=!1),_[t]!==n.buttons[r].pressed&&(_[t]=n.buttons[r].pressed,!0===_[t]?e.dispatchEvent({type:"selectstart"}):(e.dispatchEvent({type:"selectend"}),e.dispatchEvent({type:"select"})))}else e.visible=!1}}function S(t,i){null!==i&&4===i.length&&t.set(i[0]*e,i[1]*n,i[2]*e,i[3]*n)}this.enabled=!1,this.getController=function(t){var e=s[t];return void 0===e&&(e=new Ua,e.matrixAutoUpdate=!1,e.visible=!1,s[t]=e),e},this.getDevice=function(){return r},this.setDevice=function(t){void 0!==t&&(r=t),T.setContext(t)},this.setFramebufferScaleFactor=function(t){u=t},this.setReferenceSpaceType=function(t){h=t},this.setPoseTarget=function(t){void 0!==t&&(a=t)},this.getCamera=function(t){var e="local-floor"===h?1.6:0;if(!1===y())return t.position.set(0,e,0),t.rotation.set(0,0,0),t;if(r.depthNear=t.near,r.depthFar=t.far,r.getFrameData(o),"local-floor"===h){var n=r.stageParameters;n?l.fromArray(n.sittingToStandingTransform):l.makeTranslation(0,e,0)}var i=o.pose,s=null!==a?a:t;s.matrix.copy(l),s.matrix.decompose(s.position,s.quaternion,s.scale),null!==i.orientation&&(p.fromArray(i.orientation),s.quaternion.multiply(p)),null!==i.position&&(p.setFromRotationMatrix(l),f.fromArray(i.position),f.applyQuaternion(p),s.position.add(f)),s.updateMatrixWorld(),m.near=t.near,v.near=t.near,m.far=t.far,v.far=t.far,m.matrixWorldInverse.fromArray(o.leftViewMatrix),v.matrixWorldInverse.fromArray(o.rightViewMatrix),c.getInverse(l),"local-floor"===h&&(m.matrixWorldInverse.multiply(c),v.matrixWorldInverse.multiply(c));var u=s.parent;null!==u&&(d.getInverse(u.matrixWorld),m.matrixWorldInverse.multiply(d),v.matrixWorldInverse.multiply(d)),m.matrixWorld.getInverse(m.matrixWorldInverse),v.matrixWorld.getInverse(v.matrixWorldInverse),m.projectionMatrix.fromArray(o.leftProjectionMatrix),v.projectionMatrix.fromArray(o.rightProjectionMatrix),Xa(g,m,v);var b=r.getLayers();if(b.length){var x=b[0];S(m.viewport,x.leftBounds),S(v.viewport,x.rightBounds)}return E(),g},this.getStandingMatrix=function(){return l},this.isPresenting=y;var T=new vr;this.setAnimationLoop=function(t){T.setAnimationLoop(t),y()&&T.start()},this.submitFrame=function(){y()&&r.submitFrame()},this.dispose=function(){"undefined"!==typeof window&&window.removeEventListener("vrdisplaypresentchange",w)},this.setFrameOfReferenceType=function(){console.warn("THREE.WebVRManager: setFrameOfReferenceType() has been deprecated.")}}function Ja(t){var e=t.context,n=null,i=null,r="local-floor",o=null,a=[],s=[];function l(){return null!==n&&null!==i}var c=new Ga;c.layers.enable(1),c.viewport=new He;var u=new Ga;u.layers.enable(2),u.viewport=new He;var h=new Wa([c,u]);function d(t){for(var e=0;e<a.length;e++)s[e]===t.inputSource&&a[e].dispatchEvent({type:t.type})}function p(){t.setFramebuffer(null),t.setRenderTarget(t.getRenderTarget()),y.stop()}function f(t){i=t,y.setContext(n),y.start()}function m(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.getInverse(t.matrixWorld)}h.layers.enable(1),h.layers.enable(2),this.enabled=!1,this.getController=function(t){var e=a[t];return void 0===e&&(e=new Ua,e.matrixAutoUpdate=!1,e.visible=!1,a[t]=e),e},this.setFramebufferScaleFactor=function(t){},this.setReferenceSpaceType=function(t){r=t},this.getSession=function(){return n},this.setSession=function(t){n=t,null!==n&&(n.addEventListener("select",d),n.addEventListener("selectstart",d),n.addEventListener("selectend",d),n.addEventListener("end",p),n.updateRenderState({baseLayer:new XRWebGLLayer(n,e)}),n.requestReferenceSpace(r).then(f),s=n.inputSources,n.addEventListener("inputsourceschange",function(){s=n.inputSources,console.log(s);for(var t=0;t<a.length;t++){var e=a[t];e.userData.inputSource=s[t]}}))},this.getCamera=function(t){if(l()){var e=t.parent,n=h.cameras;m(h,e);for(var i=0;i<n.length;i++)m(n[i],e);t.matrixWorld.copy(h.matrixWorld);for(var r=t.children,o=(i=0,r.length);i<o;i++)r[i].updateMatrixWorld(!0);return Xa(h,c,u),h}return t},this.isPresenting=l;var v=null;function g(e,r){if(o=r.getViewerPose(i),null!==o){var l=o.views,c=n.renderState.baseLayer;t.setFramebuffer(c.framebuffer);for(var u=0;u<l.length;u++){var d=l[u],p=c.getViewport(d),f=d.transform.inverse.matrix,m=h.cameras[u];m.matrix.fromArray(f).getInverse(m.matrix),m.projectionMatrix.fromArray(d.projectionMatrix),m.viewport.set(p.x,p.y,p.width,p.height),0===u&&h.matrix.copy(m.matrix)}}for(u=0;u<a.length;u++){var g=a[u],y=s[u];if(y){var b=r.getPose(y.targetRaySpace,i);if(null!==b){g.matrix.fromArray(b.transform.matrix),g.matrix.decompose(g.position,g.rotation,g.scale),g.visible=!0;continue}}g.visible=!1}v&&v(e)}var y=new vr;y.setAnimationLoop(g),this.setAnimationLoop=function(t){v=t},this.dispose=function(){},this.getStandingMatrix=function(){return console.warn("THREE.WebXRManager: getStandingMatrix() is no longer needed."),new Ze},this.getDevice=function(){console.warn("THREE.WebXRManager: getDevice() has been deprecated.")},this.setDevice=function(){console.warn("THREE.WebXRManager: setDevice() has been deprecated.")},this.setFrameOfReferenceType=function(){console.warn("THREE.WebXRManager: setFrameOfReferenceType() has been deprecated.")},this.submitFrame=function(){}}function Ka(t){console.log("THREE.WebGLRenderer",o),t=t||{};var e=void 0!==t.canvas?t.canvas:document.createElementNS("http://www.w3.org/1999/xhtml","canvas"),n=void 0!==t.context?t.context:null,i=void 0!==t.alpha&&t.alpha,r=void 0===t.depth||t.depth,a=void 0===t.stencil||t.stencil,s=void 0!==t.antialias&&t.antialias,l=void 0===t.premultipliedAlpha||t.premultipliedAlpha,c=void 0!==t.preserveDrawingBuffer&&t.preserveDrawingBuffer,u=void 0!==t.powerPreference?t.powerPreference:"default",h=void 0!==t.failIfMajorPerformanceCaveat&&t.failIfMajorPerformanceCaveat,d=null,f=null;this.domElement=e,this.context=null,this.debug={checkShaderErrors:!0},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.gammaFactor=2,this.gammaInput=!1,this.gammaOutput=!1,this.physicallyCorrectLights=!1,this.toneMapping=Q,this.toneMappingExposure=1,this.toneMappingWhitePoint=1,this.maxMorphTargets=8,this.maxMorphNormals=4;var m,v,g,y,b,x,w,_,M,E,S,T,A,C,L,P,O,R,k=this,D=!1,I=null,N=0,z=0,B=null,F=null,j=-1,H={geometry:null,program:null,wireframe:!1},U=null,V=null,G=new He,W=new He,$=null,q=e.width,Y=e.height,X=1,Z=new He(0,0,q,Y),J=new He(0,0,q,Y),K=!1,tt=new Xe,et=new eo,nt=!1,it=!1,rt=new Ze,ot=new Ne;function at(){return null===B?X:1}try{var st={alpha:i,depth:r,stencil:a,antialias:s,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:h,xrCompatible:!0};if(e.addEventListener("webglcontextlost",ht,!1),e.addEventListener("webglcontextrestored",dt,!1),m=n||e.getContext("webgl",st)||e.getContext("experimental-webgl",st),null===m)throw null!==e.getContext("webgl")?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.");void 0===m.getShaderPrecisionFormat&&(m.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch($t){throw console.error("THREE.WebGLRenderer: "+$t.message),$t}function lt(){v=new no(m),g=new to(m,v,t),g.isWebGL2||(v.get("WEBGL_depth_texture"),v.get("OES_texture_float"),v.get("OES_texture_half_float"),v.get("OES_texture_half_float_linear"),v.get("OES_standard_derivatives"),v.get("OES_element_index_uint"),v.get("ANGLE_instanced_arrays")),v.get("OES_texture_float_linear"),R=new Ha(m,v,g),y=new Fa(m,v,R,g),y.scissor(W.copy(J).multiplyScalar(X)),y.viewport(G.copy(Z).multiplyScalar(X)),b=new oo(m),x=new Ta,w=new ja(m,v,y,x,g,R,b),_=new gr(m),M=new io(m,_,b),E=new lo(M,b),L=new so(m),S=new Sa(k,v,g,w),T=new Pa,A=new Ia,C=new Kr(k,y,E,l),P=new Qr(m,v,b,g),O=new ro(m,v,b,g),b.programs=S.programs,k.context=m,k.capabilities=g,k.extensions=v,k.properties=x,k.renderLists=T,k.state=y,k.info=b}lt();var ct="undefined"!==typeof navigator&&"xr"in navigator&&"supportsSession"in navigator.xr?new Ja(k):new Za(k);this.vr=ct;var ut=new Ba(k,E,g.maxTextureSize);function ht(t){t.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),D=!0}function dt(){console.log("THREE.WebGLRenderer: Context Restored."),D=!1,lt()}function pt(t){var e=t.target;e.removeEventListener("dispose",pt),ft(e)}function ft(t){mt(t),x.remove(t)}function mt(t){var e=x.get(t).program;t.program=void 0,void 0!==e&&S.releaseProgram(e)}function vt(t,e){t.render(function(t){k.renderBufferImmediate(t,e)})}function gt(t,e,n){if(n&&n.isInstancedBufferGeometry&&!g.isWebGL2&&null===v.get("ANGLE_instanced_arrays"))console.error("THREE.WebGLRenderer.setupVertexAttributes: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");else{y.initAttributes();var i=n.attributes,r=e.getAttributes(),o=t.defaultAttributeValues;for(var a in r){var s=r[a];if(s>=0){var l=i[a];if(void 0!==l){var c=l.normalized,u=l.itemSize,h=_.get(l);if(void 0===h)continue;var d=h.buffer,p=h.type,f=h.bytesPerElement;if(l.isInterleavedBufferAttribute){var b=l.data,x=b.stride,w=l.offset;b&&b.isInstancedInterleavedBuffer?(y.enableAttributeAndDivisor(s,b.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=b.meshPerAttribute*b.count)):y.enableAttribute(s),m.bindBuffer(34962,d),m.vertexAttribPointer(s,u,p,c,x*f,w*f)}else l.isInstancedBufferAttribute?(y.enableAttributeAndDivisor(s,l.meshPerAttribute),void 0===n.maxInstancedCount&&(n.maxInstancedCount=l.meshPerAttribute*l.count)):y.enableAttribute(s),m.bindBuffer(34962,d),m.vertexAttribPointer(s,u,p,c,0,0)}else if(void 0!==o){var M=o[a];if(void 0!==M)switch(M.length){case 2:m.vertexAttrib2fv(s,M);break;case 3:m.vertexAttrib3fv(s,M);break;case 4:m.vertexAttrib4fv(s,M);break;default:m.vertexAttrib1fv(s,M)}}}}y.disableUnusedAttributes()}}this.shadowMap=ut,this.getContext=function(){return m},this.getContextAttributes=function(){return m.getContextAttributes()},this.forceContextLoss=function(){var t=v.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){var t=v.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return X},this.setPixelRatio=function(t){void 0!==t&&(X=t,this.setSize(q,Y,!1))},this.getSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getsize() now requires a Vector2 as an argument"),t=new De),t.set(q,Y)},this.setSize=function(t,n,i){ct.isPresenting()?console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(q=t,Y=n,e.width=t*X,e.height=n*X,!1!==i&&(e.style.width=t+"px",e.style.height=n+"px"),this.setViewport(0,0,t,n))},this.getDrawingBufferSize=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument"),t=new De),t.set(q*X,Y*X)},this.setDrawingBufferSize=function(t,n,i){q=t,Y=n,X=i,e.width=t*i,e.height=n*i,this.setViewport(0,0,t,n)},this.getCurrentViewport=function(t){return void 0===t&&(console.warn("WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument"),t=new He),t.copy(G)},this.getViewport=function(t){return t.copy(Z)},this.setViewport=function(t,e,n,i){t.isVector4?Z.set(t.x,t.y,t.z,t.w):Z.set(t,e,n,i),y.viewport(G.copy(Z).multiplyScalar(X))},this.getScissor=function(t){return t.copy(J)},this.setScissor=function(t,e,n,i){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,n,i),y.scissor(W.copy(J).multiplyScalar(X))},this.getScissorTest=function(){return K},this.setScissorTest=function(t){y.setScissorTest(K=t)},this.getClearColor=function(){return C.getClearColor()},this.setClearColor=function(){C.setClearColor.apply(C,arguments)},this.getClearAlpha=function(){return C.getClearAlpha()},this.setClearAlpha=function(){C.setClearAlpha.apply(C,arguments)},this.clear=function(t,e,n){var i=0;(void 0===t||t)&&(i|=16384),(void 0===e||e)&&(i|=256),(void 0===n||n)&&(i|=1024),m.clear(i)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",ht,!1),e.removeEventListener("webglcontextrestored",dt,!1),T.dispose(),A.dispose(),x.dispose(),E.dispose(),ct.dispose(),xt.stop()},this.renderBufferImmediate=function(t,e){y.initAttributes();var n=x.get(t);t.hasPositions&&!n.position&&(n.position=m.createBuffer()),t.hasNormals&&!n.normal&&(n.normal=m.createBuffer()),t.hasUvs&&!n.uv&&(n.uv=m.createBuffer()),t.hasColors&&!n.color&&(n.color=m.createBuffer());var i=e.getAttributes();t.hasPositions&&(m.bindBuffer(34962,n.position),m.bufferData(34962,t.positionArray,35048),y.enableAttribute(i.position),m.vertexAttribPointer(i.position,3,5126,!1,0,0)),t.hasNormals&&(m.bindBuffer(34962,n.normal),m.bufferData(34962,t.normalArray,35048),y.enableAttribute(i.normal),m.vertexAttribPointer(i.normal,3,5126,!1,0,0)),t.hasUvs&&(m.bindBuffer(34962,n.uv),m.bufferData(34962,t.uvArray,35048),y.enableAttribute(i.uv),m.vertexAttribPointer(i.uv,2,5126,!1,0,0)),t.hasColors&&(m.bindBuffer(34962,n.color),m.bufferData(34962,t.colorArray,35048),y.enableAttribute(i.color),m.vertexAttribPointer(i.color,3,5126,!1,0,0)),y.disableUnusedAttributes(),m.drawArrays(4,0,t.count),t.count=0},this.renderBufferDirect=function(t,e,n,i,r,o){var a=r.isMesh&&r.matrixWorld.determinant()<0;y.setMaterial(i,a);var s=Tt(t,e,i,r),l=!1;H.geometry===n.id&&H.program===s.id&&H.wireframe===(!0===i.wireframe)||(H.geometry=n.id,H.program=s.id,H.wireframe=!0===i.wireframe,l=!0),r.morphTargetInfluences&&(L.update(r,n,i,s),l=!0);var c,u=n.index,h=n.attributes.position,d=1;!0===i.wireframe&&(u=M.getWireframeAttribute(n),d=2);var p=P;null!==u&&(c=_.get(u),p=O,p.setIndex(c)),l&&(gt(i,s,n),null!==u&&m.bindBuffer(34963,c.buffer));var f=1/0;null!==u?f=u.count:void 0!==h&&(f=h.count);var v=n.drawRange.start*d,g=n.drawRange.count*d,b=null!==o?o.start*d:0,x=null!==o?o.count*d:1/0,w=Math.max(v,b),E=Math.min(f,v+g,b+x)-1,S=Math.max(0,E-w+1);if(0!==S){if(r.isMesh)if(!0===i.wireframe)y.setLineWidth(i.wireframeLinewidth*at()),p.setMode(1);else switch(r.drawMode){case be:p.setMode(4);break;case xe:p.setMode(5);break;case we:p.setMode(6);break}else if(r.isLine){var T=i.linewidth;void 0===T&&(T=1),y.setLineWidth(T*at()),r.isLineSegments?p.setMode(1):r.isLineLoop?p.setMode(2):p.setMode(3)}else r.isPoints?p.setMode(0):r.isSprite&&p.setMode(4);n&&n.isInstancedBufferGeometry?n.maxInstancedCount>0&&p.renderInstances(n,w,S):p.render(w,S)}},this.compile=function(t,e){f=A.get(t,e),f.init(),t.traverse(function(t){t.isLight&&(f.pushLight(t),t.castShadow&&f.pushShadow(t))}),f.setupLights(e),t.traverse(function(e){if(e.material)if(Array.isArray(e.material))for(var n=0;n<e.material.length;n++)St(e.material[n],t.fog,e);else St(e.material,t.fog,e)})};var yt=null;function bt(t){ct.isPresenting()||yt&&yt(t)}var xt=new vr;function _t(t,e,n,i){if(!1!==t.visible){var r=t.layers.test(e.layers);if(r)if(t.isGroup)n=t.renderOrder;else if(t.isLight)f.pushLight(t),t.castShadow&&f.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||tt.intersectsSprite(t)){i&&ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);var o=E.update(t),a=t.material;a.visible&&d.push(t,o,a,n,ot.z,null)}}else if(t.isImmediateRenderObject)i&&ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt),d.push(t,null,t.material,n,ot.z,null);else if((t.isMesh||t.isLine||t.isPoints)&&(t.isSkinnedMesh&&t.skeleton.update(),!t.frustumCulled||tt.intersectsObject(t))){i&&ot.setFromMatrixPosition(t.matrixWorld).applyMatrix4(rt);o=E.update(t),a=t.material;if(Array.isArray(a))for(var s=o.groups,l=0,c=s.length;l<c;l++){var u=s[l],h=a[u.materialIndex];h&&h.visible&&d.push(t,o,h,n,ot.z,u)}else a.visible&&d.push(t,o,a,n,ot.z,null)}var p=t.children;for(l=0,c=p.length;l<c;l++)_t(p[l],e,n,i)}}function Mt(t,e,n,i){for(var r=0,o=t.length;r<o;r++){var a=t[r],s=a.object,l=a.geometry,c=void 0===i?a.material:i,u=a.group;if(n.isArrayCamera){V=n;for(var h=n.cameras,d=0,p=h.length;d<p;d++){var m=h[d];s.layers.test(m.layers)&&(y.viewport(G.copy(m.viewport)),f.setupLights(m),Et(s,e,m,l,c,u))}}else V=null,Et(s,e,n,l,c,u)}}function Et(t,e,n,i,r,o){if(t.onBeforeRender(k,e,n,i,r,o),f=A.get(e,V||n),t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),t.isImmediateRenderObject){y.setMaterial(r);var a=Tt(n,e.fog,r,t);H.geometry=null,H.program=null,H.wireframe=!1,vt(t,a)}else k.renderBufferDirect(n,e.fog,i,r,t,o);t.onAfterRender(k,e,n,i,r,o),f=A.get(e,V||n)}function St(t,e,n){var i=x.get(t),r=f.state.lights,o=f.state.shadowsArray,a=i.lightsHash,s=r.state.hash,l=S.getParameters(t,r.state,o,e,et.numPlanes,et.numIntersection,n),c=S.getProgramCode(t,l),u=i.program,h=!0;if(void 0===u)t.addEventListener("dispose",pt);else if(u.code!==c)mt(t);else if(a.stateID!==s.stateID||a.directionalLength!==s.directionalLength||a.pointLength!==s.pointLength||a.spotLength!==s.spotLength||a.rectAreaLength!==s.rectAreaLength||a.hemiLength!==s.hemiLength||a.shadowsLength!==s.shadowsLength)a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,h=!1;else{if(void 0!==l.shaderID)return;h=!1}if(h){if(l.shaderID){var d=mr[l.shaderID];i.shader={name:t.type,uniforms:ur(d.uniforms),vertexShader:d.vertexShader,fragmentShader:d.fragmentShader}}else i.shader={name:t.type,uniforms:t.uniforms,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader};t.onBeforeCompile(i.shader,k),c=S.getProgramCode(t,l),u=S.acquireProgram(t,i.shader,l,c),i.program=u,t.program=u}var p=u.getAttributes();if(t.morphTargets){t.numSupportedMorphTargets=0;for(var m=0;m<k.maxMorphTargets;m++)p["morphTarget"+m]>=0&&t.numSupportedMorphTargets++}if(t.morphNormals){t.numSupportedMorphNormals=0;for(m=0;m<k.maxMorphNormals;m++)p["morphNormal"+m]>=0&&t.numSupportedMorphNormals++}var v=i.shader.uniforms;(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(i.numClippingPlanes=et.numPlanes,i.numIntersection=et.numIntersection,v.clippingPlanes=et.uniform),i.fog=e,void 0===a&&(i.lightsHash=a={}),a.stateID=s.stateID,a.directionalLength=s.directionalLength,a.pointLength=s.pointLength,a.spotLength=s.spotLength,a.rectAreaLength=s.rectAreaLength,a.hemiLength=s.hemiLength,a.shadowsLength=s.shadowsLength,t.lights&&(v.ambientLightColor.value=r.state.ambient,v.lightProbe.value=r.state.probe,v.directionalLights.value=r.state.directional,v.spotLights.value=r.state.spot,v.rectAreaLights.value=r.state.rectArea,v.pointLights.value=r.state.point,v.hemisphereLights.value=r.state.hemi,v.directionalShadowMap.value=r.state.directionalShadowMap,v.directionalShadowMatrix.value=r.state.directionalShadowMatrix,v.spotShadowMap.value=r.state.spotShadowMap,v.spotShadowMatrix.value=r.state.spotShadowMatrix,v.pointShadowMap.value=r.state.pointShadowMap,v.pointShadowMatrix.value=r.state.pointShadowMatrix);var g=i.program.getUniforms(),y=la.seqWithValue(g.seq,v);i.uniformsList=y}function Tt(t,e,n,i){w.resetTextureUnits();var r=x.get(n),o=f.state.lights,a=r.lightsHash,s=o.state.hash;if(nt&&(it||t!==U)){var l=t===U&&n.id===j;et.setState(n.clippingPlanes,n.clipIntersection,n.clipShadows,t,r,l)}!1===n.needsUpdate&&(void 0===r.program?n.needsUpdate=!0:n.fog&&r.fog!==e?n.needsUpdate=!0:(!n.lights||a.stateID===s.stateID&&a.directionalLength===s.directionalLength&&a.pointLength===s.pointLength&&a.spotLength===s.spotLength&&a.rectAreaLength===s.rectAreaLength&&a.hemiLength===s.hemiLength&&a.shadowsLength===s.shadowsLength)&&(void 0===r.numClippingPlanes||r.numClippingPlanes===et.numPlanes&&r.numIntersection===et.numIntersection)||(n.needsUpdate=!0)),n.needsUpdate&&(St(n,e,i),n.needsUpdate=!1);var c=!1,u=!1,h=!1,d=r.program,p=d.getUniforms(),v=r.shader.uniforms;if(y.useProgram(d.program)&&(c=!0,u=!0,h=!0),n.id!==j&&(j=n.id,u=!0),c||U!==t){if(p.setValue(m,"projectionMatrix",t.projectionMatrix),g.logarithmicDepthBuffer&&p.setValue(m,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),U!==t&&(U=t,u=!0,h=!0),n.isShaderMaterial||n.isMeshPhongMaterial||n.isMeshStandardMaterial||n.envMap){var b=p.map.cameraPosition;void 0!==b&&b.setValue(m,ot.setFromMatrixPosition(t.matrixWorld))}(n.isMeshPhongMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial||n.skinning)&&p.setValue(m,"viewMatrix",t.matrixWorldInverse)}if(n.skinning){p.setOptional(m,i,"bindMatrix"),p.setOptional(m,i,"bindMatrixInverse");var _=i.skeleton;if(_){var M=_.bones;if(g.floatVertexTextures){if(void 0===_.boneTexture){var E=Math.sqrt(4*M.length);E=ke.ceilPowerOfTwo(E),E=Math.max(E,4);var S=new Float32Array(E*E*4);S.set(_.boneMatrices);var T=new We(S,E,E,It,At);T.needsUpdate=!0,_.boneMatrices=S,_.boneTexture=T,_.boneTextureSize=E}p.setValue(m,"boneTexture",_.boneTexture,w),p.setValue(m,"boneTextureSize",_.boneTextureSize)}else p.setOptional(m,_,"boneMatrices")}}return u&&(p.setValue(m,"toneMappingExposure",k.toneMappingExposure),p.setValue(m,"toneMappingWhitePoint",k.toneMappingWhitePoint),n.lights&&Wt(v,h),e&&n.fog&&Dt(v,e),n.isMeshBasicMaterial?Lt(v,n):n.isMeshLambertMaterial?(Lt(v,n),Nt(v,n)):n.isMeshPhongMaterial?(Lt(v,n),n.isMeshToonMaterial?Bt(v,n):zt(v,n)):n.isMeshStandardMaterial?(Lt(v,n),n.isMeshPhysicalMaterial?jt(v,n):Ft(v,n)):n.isMeshMatcapMaterial?(Lt(v,n),Ht(v,n)):n.isMeshDepthMaterial?(Lt(v,n),Ut(v,n)):n.isMeshDistanceMaterial?(Lt(v,n),Vt(v,n)):n.isMeshNormalMaterial?(Lt(v,n),Gt(v,n)):n.isLineBasicMaterial?(Pt(v,n),n.isLineDashedMaterial&&Ot(v,n)):n.isPointsMaterial?Rt(v,n):n.isSpriteMaterial?kt(v,n):n.isShadowMaterial&&(v.color.value.copy(n.color),v.opacity.value=n.opacity),void 0!==v.ltc_1&&(v.ltc_1.value=fr.LTC_1),void 0!==v.ltc_2&&(v.ltc_2.value=fr.LTC_2),la.upload(m,r.uniformsList,v,w)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(la.upload(m,r.uniformsList,v,w),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&p.setValue(m,"center",i.center),p.setValue(m,"modelViewMatrix",i.modelViewMatrix),p.setValue(m,"normalMatrix",i.normalMatrix),p.setValue(m,"modelMatrix",i.matrixWorld),d}function Lt(t,e){var n;t.opacity.value=e.opacity,e.color&&t.diffuse.value.copy(e.color),e.emissive&&t.emissive.value.copy(e.emissive).multiplyScalar(e.emissiveIntensity),e.map&&(t.map.value=e.map),e.alphaMap&&(t.alphaMap.value=e.alphaMap),e.specularMap&&(t.specularMap.value=e.specularMap),e.envMap&&(t.envMap.value=e.envMap,t.flipEnvMap.value=e.envMap.isCubeTexture?-1:1,t.reflectivity.value=e.reflectivity,t.refractionRatio.value=e.refractionRatio,t.maxMipLevel.value=x.get(e.envMap).__maxMipLevel),e.lightMap&&(t.lightMap.value=e.lightMap,t.lightMapIntensity.value=e.lightMapIntensity),e.aoMap&&(t.aoMap.value=e.aoMap,t.aoMapIntensity.value=e.aoMapIntensity),e.map?n=e.map:e.specularMap?n=e.specularMap:e.displacementMap?n=e.displacementMap:e.normalMap?n=e.normalMap:e.bumpMap?n=e.bumpMap:e.roughnessMap?n=e.roughnessMap:e.metalnessMap?n=e.metalnessMap:e.alphaMap?n=e.alphaMap:e.emissiveMap&&(n=e.emissiveMap),void 0!==n&&(n.isWebGLRenderTarget&&(n=n.texture),!0===n.matrixAutoUpdate&&n.updateMatrix(),t.uvTransform.value.copy(n.matrix))}function Pt(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity}function Ot(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}function Rt(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*X,t.scale.value=.5*Y,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function kt(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,t.map.value=e.map,null!==e.map&&(!0===e.map.matrixAutoUpdate&&e.map.updateMatrix(),t.uvTransform.value.copy(e.map.matrix))}function Dt(t,e){t.fogColor.value.copy(e.color),e.isFog?(t.fogNear.value=e.near,t.fogFar.value=e.far):e.isFogExp2&&(t.fogDensity.value=e.density)}function Nt(t,e){e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap)}function zt(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Bt(t,e){zt(t,e),e.gradientMap&&(t.gradientMap.value=e.gradientMap)}function Ft(t,e){t.roughness.value=e.roughness,t.metalness.value=e.metalness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap),e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap),e.emissiveMap&&(t.emissiveMap.value=e.emissiveMap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}function jt(t,e){Ft(t,e),t.reflectivity.value=e.reflectivity,t.clearCoat.value=e.clearCoat,t.clearCoatRoughness.value=e.clearCoatRoughness}function Ht(t,e){e.matcap&&(t.matcap.value=e.matcap),e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Ut(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Vt(t,e){e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias),t.referencePosition.value.copy(e.referencePosition),t.nearDistance.value=e.nearDistance,t.farDistance.value=e.farDistance}function Gt(t,e){e.bumpMap&&(t.bumpMap.value=e.bumpMap,t.bumpScale.value=e.bumpScale,e.side===p&&(t.bumpScale.value*=-1)),e.normalMap&&(t.normalMap.value=e.normalMap,t.normalScale.value.copy(e.normalScale),e.side===p&&t.normalScale.value.negate()),e.displacementMap&&(t.displacementMap.value=e.displacementMap,t.displacementScale.value=e.displacementScale,t.displacementBias.value=e.displacementBias)}function Wt(t,e){t.ambientLightColor.needsUpdate=e,t.lightProbe.needsUpdate=e,t.directionalLights.needsUpdate=e,t.pointLights.needsUpdate=e,t.spotLights.needsUpdate=e,t.rectAreaLights.needsUpdate=e,t.hemisphereLights.needsUpdate=e}xt.setAnimationLoop(bt),"undefined"!==typeof window&&xt.setContext(window),this.setAnimationLoop=function(t){yt=t,ct.setAnimationLoop(t),xt.start()},this.render=function(t,e){var n,i;if(void 0!==arguments[2]&&(console.warn("THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),e&&e.isCamera){if(!D){H.geometry=null,H.program=null,H.wireframe=!1,j=-1,U=null,!0===t.autoUpdate&&t.updateMatrixWorld(),null===e.parent&&e.updateMatrixWorld(),ct.enabled&&(e=ct.getCamera(e)),f=A.get(t,e),f.init(),t.onBeforeRender(k,t,e,n||B),rt.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),tt.setFromMatrix(rt),it=this.localClippingEnabled,nt=et.init(this.clippingPlanes,it,e),d=T.get(t,e),d.init(),_t(t,e,0,k.sortObjects),!0===k.sortObjects&&d.sort(),nt&&et.beginShadows();var r=f.state.shadowsArray;ut.render(r,t,e),f.setupLights(e),nt&&et.endShadows(),this.info.autoReset&&this.info.reset(),void 0!==n&&this.setRenderTarget(n),C.render(d,t,e,i);var o=d.opaque,a=d.transparent;if(t.overrideMaterial){var s=t.overrideMaterial;o.length&&Mt(o,t,e,s),a.length&&Mt(a,t,e,s)}else o.length&&Mt(o,t,e),a.length&&Mt(a,t,e);t.onAfterRender(k,t,e),null!==B&&(w.updateRenderTargetMipmap(B),w.updateMultisampleRenderTarget(B)),y.buffers.depth.setTest(!0),y.buffers.depth.setMask(!0),y.buffers.color.setMask(!0),y.setPolygonOffset(!1),ct.enabled&&ct.submitFrame(),d=null,f=null}}else console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.")},this.setFramebuffer=function(t){I!==t&&m.bindFramebuffer(36160,t),I=t},this.getActiveCubeFace=function(){return N},this.getActiveMipMapLevel=function(){return z},this.getRenderTarget=function(){return B},this.setRenderTarget=function(t,e,n){B=t,N=e,z=n,t&&void 0===x.get(t).__webglFramebuffer&&w.setupRenderTarget(t);var i=I,r=!1;if(t){var o=x.get(t).__webglFramebuffer;t.isWebGLRenderTargetCube?(i=o[e||0],r=!0):i=t.isWebGLMultisampleRenderTarget?x.get(t).__webglMultisampledFramebuffer:o,G.copy(t.viewport),W.copy(t.scissor),$=t.scissorTest}else G.copy(Z).multiplyScalar(X),W.copy(J).multiplyScalar(X),$=K;if(F!==i&&(m.bindFramebuffer(36160,i),F=i),y.viewport(G),y.scissor(W),y.setScissorTest($),r){var a=x.get(t.texture);m.framebufferTexture2D(36160,36064,34069+(e||0),a.__webglTexture,n||0)}},this.readRenderTargetPixels=function(t,e,n,i,r,o,a){if(t&&t.isWebGLRenderTarget){var s=x.get(t).__webglFramebuffer;if(t.isWebGLRenderTargetCube&&void 0!==a&&(s=s[a]),s){var l=!1;s!==F&&(m.bindFramebuffer(36160,s),l=!0);try{var c=t.texture,u=c.format,h=c.type;if(u!==It&&R.convert(u)!==m.getParameter(35739))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(h!==wt&&R.convert(h)!==m.getParameter(35738)&&(h!==At||!(g.isWebGL2||v.get("OES_texture_float")||v.get("WEBGL_color_buffer_float")))&&(h!==Ct||(g.isWebGL2?!v.get("EXT_color_buffer_float"):!v.get("EXT_color_buffer_half_float"))))return void console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");36053===m.checkFramebufferStatus(36160)?e>=0&&e<=t.width-i&&n>=0&&n<=t.height-r&&m.readPixels(e,n,i,r,R.convert(u),R.convert(h),o):console.error("THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.")}finally{l&&m.bindFramebuffer(36160,F)}}}else console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.")},this.copyFramebufferToTexture=function(t,e,n){var i=e.image.width,r=e.image.height,o=R.convert(e.format);w.setTexture2D(e,0),m.copyTexImage2D(3553,n||0,o,t.x,t.y,i,r,0)},this.copyTextureToTexture=function(t,e,n,i){var r=e.image.width,o=e.image.height,a=R.convert(n.format),s=R.convert(n.type);w.setTexture2D(n,0),e.isDataTexture?m.texSubImage2D(3553,i||0,t.x,t.y,r,o,a,s,e.image.data):m.texSubImage2D(3553,i||0,t.x,t.y,a,s,e.image)}}function Qa(t,e){this.name="",this.color=new pr(t),this.density=void 0!==e?e:25e-5}function ts(t,e,n){this.name="",this.color=new pr(t),this.near=void 0!==e?e:1,this.far=void 0!==n?n:1e3}function es(){_r.call(this),this.type="Scene",this.background=null,this.fog=null,this.overrideMaterial=null,this.autoUpdate=!0}function ns(t,e){this.array=t,this.stride=e,this.count=void 0!==t?t.length/e:0,this.dynamic=!1,this.updateRange={offset:0,count:-1},this.version=0}function is(t,e,n,i){this.data=t,this.itemSize=e,this.offset=n,this.normalized=!0===i}function rs(t){Gr.call(this),this.type="SpriteMaterial",this.color=new pr(16777215),this.map=null,this.rotation=0,this.sizeAttenuation=!0,this.lights=!1,this.transparent=!0,this.setValues(t)}function os(t){if(_r.call(this),this.type="Sprite",void 0===$a){$a=new Br;var e=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new ns(e,5);$a.setIndex([0,1,2,0,2,3]),$a.addAttribute("position",new is(n,3,0,!1)),$a.addAttribute("uv",new is(n,2,3,!1))}this.geometry=$a,this.material=void 0!==t?t:new rs,this.center=new De(.5,.5)}function as(){_r.call(this),this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}})}function ss(t,e){t&&t.isGeometry&&console.error("THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead."),Jr.call(this,t,e),this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new Ze,this.bindMatrixInverse=new Ze}function ls(t,e){if(t=t||[],this.bones=t.slice(0),this.boneMatrices=new Float32Array(16*this.bones.length),void 0===e)this.calculateInverses();else if(this.bones.length===e.length)this.boneInverses=e.slice(0);else{console.warn("THREE.Skeleton boneInverses is the wrong length."),this.boneInverses=[];for(var n=0,i=this.bones.length;n<i;n++)this.boneInverses.push(new Ze)}}function cs(){_r.call(this),this.type="Bone"}function us(t){Gr.call(this),this.type="LineBasicMaterial",this.color=new pr(16777215),this.linewidth=1,this.linecap="round",this.linejoin="round",this.lights=!1,this.setValues(t)}function hs(t,e,n){1===n&&console.error("THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead."),_r.call(this),this.type="Line",this.geometry=void 0!==t?t:new Br,this.material=void 0!==e?e:new us({color:16777215*Math.random()})}function ds(t,e){hs.call(this,t,e),this.type="LineSegments"}function ps(t,e){hs.call(this,t,e),this.type="LineLoop"}function fs(t){Gr.call(this),this.type="PointsMaterial",this.color=new pr(16777215),this.map=null,this.size=1,this.sizeAttenuation=!0,this.morphTargets=!1,this.lights=!1,this.setValues(t)}function ms(t,e){_r.call(this),this.type="Points",this.geometry=void 0!==t?t:new Br,this.material=void 0!==e?e:new fs({color:16777215*Math.random()})}function vs(t,e,n,i,r,o,a,s,l){je.call(this,t,e,n,i,r,o,a,s,l),this.format=void 0!==a?a:Dt,this.minFilter=void 0!==o?o:yt,this.magFilter=void 0!==r?r:yt,this.generateMipmaps=!1}function gs(t,e,n,i,r,o,a,s,l,c,u,h){je.call(this,null,o,a,s,l,c,i,r,u,h),this.image={width:e,height:n},this.mipmaps=t,this.flipY=!1,this.generateMipmaps=!1}function ys(t,e,n,i,r,o,a,s,l){je.call(this,t,e,n,i,r,o,a,s,l),this.needsUpdate=!0}function bs(t,e,n,i,r,o,a,s,l,c){if(c=void 0!==c?c:Bt,c!==Bt&&c!==Ft)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===n&&c===Bt&&(n=Et),void 0===n&&c===Ft&&(n=Rt),je.call(this,null,i,r,o,a,s,c,n,l),this.image={width:t,height:e},this.magFilter=void 0!==a?a:mt,this.minFilter=void 0!==s?s:mt,this.flipY=!1,this.generateMipmaps=!1}function xs(t){Br.call(this),this.type="WireframeGeometry";var e,n,i,r,o,a,s,l,c,u,h=[],d=[0,0],p={},f=["a","b","c"];if(t&&t.isGeometry){var m=t.faces;for(e=0,i=m.length;e<i;e++){var v=m[e];for(n=0;n<3;n++)s=v[f[n]],l=v[f[(n+1)%3]],d[0]=Math.min(s,l),d[1]=Math.max(s,l),c=d[0]+","+d[1],void 0===p[c]&&(p[c]={index1:d[0],index2:d[1]})}for(c in p)a=p[c],u=t.vertices[a.index1],h.push(u.x,u.y,u.z),u=t.vertices[a.index2],h.push(u.x,u.y,u.z)}else if(t&&t.isBufferGeometry){var g,y,b,x,w,_,M,E;if(u=new Ne,null!==t.index){for(g=t.attributes.position,y=t.index,b=t.groups,0===b.length&&(b=[{start:0,count:y.count,materialIndex:0}]),r=0,o=b.length;r<o;++r)for(x=b[r],w=x.start,_=x.count,e=w,i=w+_;e<i;e+=3)for(n=0;n<3;n++)s=y.getX(e+n),l=y.getX(e+(n+1)%3),d[0]=Math.min(s,l),d[1]=Math.max(s,l),c=d[0]+","+d[1],void 0===p[c]&&(p[c]={index1:d[0],index2:d[1]});for(c in p)a=p[c],u.fromBufferAttribute(g,a.index1),h.push(u.x,u.y,u.z),u.fromBufferAttribute(g,a.index2),h.push(u.x,u.y,u.z)}else for(g=t.attributes.position,e=0,i=g.count/3;e<i;e++)for(n=0;n<3;n++)M=3*e+n,u.fromBufferAttribute(g,M),h.push(u.x,u.y,u.z),E=3*e+(n+1)%3,u.fromBufferAttribute(g,E),h.push(u.x,u.y,u.z)}this.addAttribute("position",new kr(h,3))}function ws(t,e,n){Er.call(this),this.type="ParametricGeometry",this.parameters={func:t,slices:e,stacks:n},this.fromBufferGeometry(new _s(t,e,n)),this.mergeVertices()}function _s(t,e,n){Br.call(this),this.type="ParametricBufferGeometry",this.parameters={func:t,slices:e,stacks:n};var i,r,o=[],a=[],s=[],l=[],c=1e-5,u=new Ne,h=new Ne,d=new Ne,p=new Ne,f=new Ne;t.length<3&&console.error("THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.");var m=e+1;for(i=0;i<=n;i++){var v=i/n;for(r=0;r<=e;r++){var g=r/e;t(g,v,h),a.push(h.x,h.y,h.z),g-c>=0?(t(g-c,v,d),p.subVectors(h,d)):(t(g+c,v,d),p.subVectors(d,h)),v-c>=0?(t(g,v-c,d),f.subVectors(h,d)):(t(g,v+c,d),f.subVectors(d,h)),u.crossVectors(p,f).normalize(),s.push(u.x,u.y,u.z),l.push(g,v)}}for(i=0;i<n;i++)for(r=0;r<e;r++){var y=i*m+r,b=i*m+r+1,x=(i+1)*m+r+1,w=(i+1)*m+r;o.push(y,b,w),o.push(b,x,w)}this.setIndex(o),this.addAttribute("position",new kr(a,3)),this.addAttribute("normal",new kr(s,3)),this.addAttribute("uv",new kr(l,2))}function Ms(t,e,n,i){Er.call(this),this.type="PolyhedronGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},this.fromBufferGeometry(new Es(t,e,n,i)),this.mergeVertices()}function Es(t,e,n,i){Br.call(this),this.type="PolyhedronBufferGeometry",this.parameters={vertices:t,indices:e,radius:n,detail:i},n=n||1,i=i||0;var r=[],o=[];function a(t){for(var n=new Ne,i=new Ne,r=new Ne,o=0;o<e.length;o+=3)d(e[o+0],n),d(e[o+1],i),d(e[o+2],r),s(n,i,r,t)}function s(t,e,n,i){var r,o,a=Math.pow(2,i),s=[];for(r=0;r<=a;r++){s[r]=[];var l=t.clone().lerp(n,r/a),c=e.clone().lerp(n,r/a),u=a-r;for(o=0;o<=u;o++)s[r][o]=0===o&&r===a?l:l.clone().lerp(c,o/u)}for(r=0;r<a;r++)for(o=0;o<2*(a-r)-1;o++){var d=Math.floor(o/2);o%2===0?(h(s[r][d+1]),h(s[r+1][d]),h(s[r][d])):(h(s[r][d+1]),h(s[r+1][d+1]),h(s[r+1][d]))}}function l(t){for(var e=new Ne,n=0;n<r.length;n+=3)e.x=r[n+0],e.y=r[n+1],e.z=r[n+2],e.normalize().multiplyScalar(t),r[n+0]=e.x,r[n+1]=e.y,r[n+2]=e.z}function c(){for(var t=new Ne,e=0;e<r.length;e+=3){t.x=r[e+0],t.y=r[e+1],t.z=r[e+2];var n=m(t)/2/Math.PI+.5,i=v(t)/Math.PI+.5;o.push(n,1-i)}p(),u()}function u(){for(var t=0;t<o.length;t+=6){var e=o[t+0],n=o[t+2],i=o[t+4],r=Math.max(e,n,i),a=Math.min(e,n,i);r>.9&&a<.1&&(e<.2&&(o[t+0]+=1),n<.2&&(o[t+2]+=1),i<.2&&(o[t+4]+=1))}}function h(t){r.push(t.x,t.y,t.z)}function d(e,n){var i=3*e;n.x=t[i+0],n.y=t[i+1],n.z=t[i+2]}function p(){for(var t=new Ne,e=new Ne,n=new Ne,i=new Ne,a=new De,s=new De,l=new De,c=0,u=0;c<r.length;c+=9,u+=6){t.set(r[c+0],r[c+1],r[c+2]),e.set(r[c+3],r[c+4],r[c+5]),n.set(r[c+6],r[c+7],r[c+8]),a.set(o[u+0],o[u+1]),s.set(o[u+2],o[u+3]),l.set(o[u+4],o[u+5]),i.copy(t).add(e).add(n).divideScalar(3);var h=m(i);f(a,u+0,t,h),f(s,u+2,e,h),f(l,u+4,n,h)}}function f(t,e,n,i){i<0&&1===t.x&&(o[e]=t.x-1),0===n.x&&0===n.z&&(o[e]=i/2/Math.PI+.5)}function m(t){return Math.atan2(t.z,-t.x)}function v(t){return Math.atan2(-t.y,Math.sqrt(t.x*t.x+t.z*t.z))}a(i),l(n),c(),this.addAttribute("position",new kr(r,3)),this.addAttribute("normal",new kr(r.slice(),3)),this.addAttribute("uv",new kr(o,2)),0===i?this.computeVertexNormals():this.normalizeNormals()}function Ss(t,e){Er.call(this),this.type="TetrahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ts(t,e)),this.mergeVertices()}function Ts(t,e){var n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],i=[2,1,0,0,3,2,1,3,0,2,3,1];Es.call(this,n,i,t,e),this.type="TetrahedronBufferGeometry",this.parameters={radius:t,detail:e}}function As(t,e){Er.call(this),this.type="OctahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Cs(t,e)),this.mergeVertices()}function Cs(t,e){var n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],i=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];Es.call(this,n,i,t,e),this.type="OctahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Ls(t,e){Er.call(this),this.type="IcosahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Ps(t,e)),this.mergeVertices()}function Ps(t,e){var n=(1+Math.sqrt(5))/2,i=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],r=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];Es.call(this,i,r,t,e),this.type="IcosahedronBufferGeometry",this.parameters={radius:t,detail:e}}function Os(t,e){Er.call(this),this.type="DodecahedronGeometry",this.parameters={radius:t,detail:e},this.fromBufferGeometry(new Rs(t,e)),this.mergeVertices()}function Rs(t,e){var n=(1+Math.sqrt(5))/2,i=1/n,r=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-i,-n,0,-i,n,0,i,-n,0,i,n,-i,-n,0,-i,n,0,i,-n,0,i,n,0,-n,0,-i,n,0,-i,-n,0,i,n,0,i],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];Es.call(this,r,o,t,e),this.type="DodecahedronBufferGeometry",this.parameters={radius:t,detail:e}}function ks(t,e,n,i,r,o){Er.call(this),this.type="TubeGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},void 0!==o&&console.warn("THREE.TubeGeometry: taper has been removed.");var a=new Ds(t,e,n,i,r);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals,this.fromBufferGeometry(a),this.mergeVertices()}function Ds(t,e,n,i,r){Br.call(this),this.type="TubeBufferGeometry",this.parameters={path:t,tubularSegments:e,radius:n,radialSegments:i,closed:r},e=e||64,n=n||1,i=i||8,r=r||!1;var o=t.computeFrenetFrames(e,r);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;var a,s,l=new Ne,c=new Ne,u=new De,h=new Ne,d=[],p=[],f=[],m=[];function v(){for(a=0;a<e;a++)g(a);g(!1===r?e:0),b(),y()}function g(r){h=t.getPointAt(r/e,h);var a=o.normals[r],u=o.binormals[r];for(s=0;s<=i;s++){var f=s/i*Math.PI*2,m=Math.sin(f),v=-Math.cos(f);c.x=v*a.x+m*u.x,c.y=v*a.y+m*u.y,c.z=v*a.z+m*u.z,c.normalize(),p.push(c.x,c.y,c.z),l.x=h.x+n*c.x,l.y=h.y+n*c.y,l.z=h.z+n*c.z,d.push(l.x,l.y,l.z)}}function y(){for(s=1;s<=e;s++)for(a=1;a<=i;a++){var t=(i+1)*(s-1)+(a-1),n=(i+1)*s+(a-1),r=(i+1)*s+a,o=(i+1)*(s-1)+a;m.push(t,n,o),m.push(n,r,o)}}function b(){for(a=0;a<=e;a++)for(s=0;s<=i;s++)u.x=a/e,u.y=s/i,f.push(u.x,u.y)}v(),this.setIndex(m),this.addAttribute("position",new kr(d,3)),this.addAttribute("normal",new kr(p,3)),this.addAttribute("uv",new kr(f,2))}function Is(t,e,n,i,r,o,a){Er.call(this),this.type="TorusKnotGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},void 0!==a&&console.warn("THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead."),this.fromBufferGeometry(new Ns(t,e,n,i,r,o)),this.mergeVertices()}function Ns(t,e,n,i,r,o){Br.call(this),this.type="TorusKnotBufferGeometry",this.parameters={radius:t,tube:e,tubularSegments:n,radialSegments:i,p:r,q:o},t=t||1,e=e||.4,n=Math.floor(n)||64,i=Math.floor(i)||8,r=r||2,o=o||3;var a,s,l=[],c=[],u=[],h=[],d=new Ne,p=new Ne,f=new Ne,m=new Ne,v=new Ne,g=new Ne,y=new Ne;for(a=0;a<=n;++a){var b=a/n*r*Math.PI*2;for(A(b,r,o,t,f),A(b+.01,r,o,t,m),g.subVectors(m,f),y.addVectors(m,f),v.crossVectors(g,y),y.crossVectors(v,g),v.normalize(),y.normalize(),s=0;s<=i;++s){var x=s/i*Math.PI*2,w=-e*Math.cos(x),_=e*Math.sin(x);d.x=f.x+(w*y.x+_*v.x),d.y=f.y+(w*y.y+_*v.y),d.z=f.z+(w*y.z+_*v.z),c.push(d.x,d.y,d.z),p.subVectors(d,f).normalize(),u.push(p.x,p.y,p.z),h.push(a/n),h.push(s/i)}}for(s=1;s<=n;s++)for(a=1;a<=i;a++){var M=(i+1)*(s-1)+(a-1),E=(i+1)*s+(a-1),S=(i+1)*s+a,T=(i+1)*(s-1)+a;l.push(M,E,T),l.push(E,S,T)}function A(t,e,n,i,r){var o=Math.cos(t),a=Math.sin(t),s=n/e*t,l=Math.cos(s);r.x=i*(2+l)*.5*o,r.y=i*(2+l)*a*.5,r.z=i*Math.sin(s)*.5}this.setIndex(l),this.addAttribute("position",new kr(c,3)),this.addAttribute("normal",new kr(u,3)),this.addAttribute("uv",new kr(h,2))}function zs(t,e,n,i,r){Er.call(this),this.type="TorusGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},this.fromBufferGeometry(new Bs(t,e,n,i,r)),this.mergeVertices()}function Bs(t,e,n,i,r){Br.call(this),this.type="TorusBufferGeometry",this.parameters={radius:t,tube:e,radialSegments:n,tubularSegments:i,arc:r},t=t||1,e=e||.4,n=Math.floor(n)||8,i=Math.floor(i)||6,r=r||2*Math.PI;var o,a,s=[],l=[],c=[],u=[],h=new Ne,d=new Ne,p=new Ne;for(o=0;o<=n;o++)for(a=0;a<=i;a++){var f=a/i*r,m=o/n*Math.PI*2;d.x=(t+e*Math.cos(m))*Math.cos(f),d.y=(t+e*Math.cos(m))*Math.sin(f),d.z=e*Math.sin(m),l.push(d.x,d.y,d.z),h.x=t*Math.cos(f),h.y=t*Math.sin(f),p.subVectors(d,h).normalize(),c.push(p.x,p.y,p.z),u.push(a/i),u.push(o/n)}for(o=1;o<=n;o++)for(a=1;a<=i;a++){var v=(i+1)*o+a-1,g=(i+1)*(o-1)+a-1,y=(i+1)*(o-1)+a,b=(i+1)*o+a;s.push(v,g,b),s.push(g,y,b)}this.setIndex(s),this.addAttribute("position",new kr(l,3)),this.addAttribute("normal",new kr(c,3)),this.addAttribute("uv",new kr(u,2))}Object.assign(Qa.prototype,{isFogExp2:!0,clone:function(){return new Qa(this.color,this.density)},toJSON:function(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}),Object.assign(ts.prototype,{isFog:!0,clone:function(){return new ts(this.color,this.near,this.far)},toJSON:function(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}),es.prototype=Object.assign(Object.create(_r.prototype),{constructor:es,isScene:!0,copy:function(t,e){return _r.prototype.copy.call(this,t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.fog&&(this.fog=t.fog.clone()),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.autoUpdate=t.autoUpdate,this.matrixAutoUpdate=t.matrixAutoUpdate,this},toJSON:function(t){var e=_r.prototype.toJSON.call(this,t);return null!==this.background&&(e.object.background=this.background.toJSON(t)),null!==this.fog&&(e.object.fog=this.fog.toJSON()),e},dispose:function(){this.dispatchEvent({type:"dispose"})}}),Object.defineProperty(ns.prototype,"needsUpdate",{set:function(t){!0===t&&this.version++}}),Object.assign(ns.prototype,{isInterleavedBuffer:!0,onUploadCallback:function(){},setArray:function(t){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");return this.count=void 0!==t?t.length/this.stride:0,this.array=t,this},setDynamic:function(t){return this.dynamic=t,this},copy:function(t){return this.array=new t.array.constructor(t.array),this.count=t.count,this.stride=t.stride,this.dynamic=t.dynamic,this},copyAt:function(t,e,n){t*=this.stride,n*=e.stride;for(var i=0,r=this.stride;i<r;i++)this.array[t+i]=e.array[n+i];return this},set:function(t,e){return void 0===e&&(e=0),this.array.set(t,e),this},clone:function(){return(new this.constructor).copy(this)},onUpload:function(t){return this.onUploadCallback=t,this}}),Object.defineProperties(is.prototype,{count:{get:function(){return this.data.count}},array:{get:function(){return this.data.array}}}),Object.assign(is.prototype,{isInterleavedBufferAttribute:!0,setX:function(t,e){return this.data.array[t*this.data.stride+this.offset]=e,this},setY:function(t,e){return this.data.array[t*this.data.stride+this.offset+1]=e,this},setZ:function(t,e){return this.data.array[t*this.data.stride+this.offset+2]=e,this},setW:function(t,e){return this.data.array[t*this.data.stride+this.offset+3]=e,this},getX:function(t){return this.data.array[t*this.data.stride+this.offset]},getY:function(t){return this.data.array[t*this.data.stride+this.offset+1]},getZ:function(t){return this.data.array[t*this.data.stride+this.offset+2]},getW:function(t){return this.data.array[t*this.data.stride+this.offset+3]},setXY:function(t,e,n){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this},setXYZ:function(t,e,n,i){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this},setXYZW:function(t,e,n,i,r){return t=t*this.data.stride+this.offset,this.data.array[t+0]=e,this.data.array[t+1]=n,this.data.array[t+2]=i,this.data.array[t+3]=r,this}}),rs.prototype=Object.create(Gr.prototype),rs.prototype.constructor=rs,rs.prototype.isSpriteMaterial=!0,rs.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.rotation=t.rotation,this.sizeAttenuation=t.sizeAttenuation,this},os.prototype=Object.assign(Object.create(_r.prototype),{constructor:os,isSprite:!0,raycast:function(){var t=new Ne,e=new Ne,n=new Ne,i=new De,r=new De,o=new Ze,a=new Ne,s=new Ne,l=new Ne,c=new De,u=new De,h=new De;function d(t,e,n,a,s,l){i.subVectors(t,n).addScalar(.5).multiply(a),void 0!==s?(r.x=l*i.x-s*i.y,r.y=s*i.x+l*i.y):r.copy(i),t.copy(e),t.x+=r.x,t.y+=r.y,t.applyMatrix4(o)}return function(i,r){e.setFromMatrixScale(this.matrixWorld),o.getInverse(this.modelViewMatrix).premultiply(this.matrixWorld),n.setFromMatrixPosition(this.modelViewMatrix);var p,f,m=this.material.rotation;0!==m&&(f=Math.cos(m),p=Math.sin(m));var v=this.center;d(a.set(-.5,-.5,0),n,v,e,p,f),d(s.set(.5,-.5,0),n,v,e,p,f),d(l.set(.5,.5,0),n,v,e,p,f),c.set(0,0),u.set(1,0),h.set(1,1);var g=i.ray.intersectTriangle(a,s,l,!1,t);if(null!==g||(d(s.set(-.5,.5,0),n,v,e,p,f),u.set(0,1),g=i.ray.intersectTriangle(a,l,s,!1,t),null!==g)){var y=i.ray.origin.distanceTo(t);y<i.near||y>i.far||r.push({distance:y,point:t.clone(),uv:Xr.getUV(t,a,s,l,c,u,h,new De),face:null,object:this})}}}(),clone:function(){return new this.constructor(this.material).copy(this)},copy:function(t){return _r.prototype.copy.call(this,t),void 0!==t.center&&this.center.copy(t.center),this}}),as.prototype=Object.assign(Object.create(_r.prototype),{constructor:as,isLOD:!0,copy:function(t){_r.prototype.copy.call(this,t,!1);for(var e=t.levels,n=0,i=e.length;n<i;n++){var r=e[n];this.addLevel(r.object.clone(),r.distance)}return this},addLevel:function(t,e){void 0===e&&(e=0),e=Math.abs(e);for(var n=this.levels,i=0;i<n.length;i++)if(e<n[i].distance)break;return n.splice(i,0,{distance:e,object:t}),this.add(t),this},getObjectForDistance:function(t){for(var e=this.levels,n=1,i=e.length;n<i;n++)if(t<e[n].distance)break;return e[n-1].object},raycast:function(){var t=new Ne;return function(e,n){t.setFromMatrixPosition(this.matrixWorld);var i=e.ray.origin.distanceTo(t);this.getObjectForDistance(i).raycast(e,n)}}(),update:function(){var t=new Ne,e=new Ne;return function(n){var i=this.levels;if(i.length>1){t.setFromMatrixPosition(n.matrixWorld),e.setFromMatrixPosition(this.matrixWorld);var r=t.distanceTo(e);i[0].object.visible=!0;for(var o=1,a=i.length;o<a;o++){if(!(r>=i[o].distance))break;i[o-1].object.visible=!1,i[o].object.visible=!0}for(;o<a;o++)i[o].object.visible=!1}}}(),toJSON:function(t){var e=_r.prototype.toJSON.call(this,t);e.object.levels=[];for(var n=this.levels,i=0,r=n.length;i<r;i++){var o=n[i];e.object.levels.push({object:o.object.uuid,distance:o.distance})}return e}}),ss.prototype=Object.assign(Object.create(Jr.prototype),{constructor:ss,isSkinnedMesh:!0,bind:function(t,e){this.skeleton=t,void 0===e&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),e=this.matrixWorld),this.bindMatrix.copy(e),this.bindMatrixInverse.getInverse(e)},pose:function(){this.skeleton.pose()},normalizeSkinWeights:function(){for(var t=new He,e=this.geometry.attributes.skinWeight,n=0,i=e.count;n<i;n++){t.x=e.getX(n),t.y=e.getY(n),t.z=e.getZ(n),t.w=e.getW(n);var r=1/t.manhattanLength();r!==1/0?t.multiplyScalar(r):t.set(1,0,0,0),e.setXYZW(n,t.x,t.y,t.z,t.w)}},updateMatrixWorld:function(t){Jr.prototype.updateMatrixWorld.call(this,t),"attached"===this.bindMode?this.bindMatrixInverse.getInverse(this.matrixWorld):"detached"===this.bindMode?this.bindMatrixInverse.getInverse(this.bindMatrix):console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)},clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),Object.assign(ls.prototype,{calculateInverses:function(){this.boneInverses=[];for(var t=0,e=this.bones.length;t<e;t++){var n=new Ze;this.bones[t]&&n.getInverse(this.bones[t].matrixWorld),this.boneInverses.push(n)}},pose:function(){var t,e,n;for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&t.matrixWorld.getInverse(this.boneInverses[e]);for(e=0,n=this.bones.length;e<n;e++)t=this.bones[e],t&&(t.parent&&t.parent.isBone?(t.matrix.getInverse(t.parent.matrixWorld),t.matrix.multiply(t.matrixWorld)):t.matrix.copy(t.matrixWorld),t.matrix.decompose(t.position,t.quaternion,t.scale))},update:function(){var t=new Ze,e=new Ze;return function(){for(var n=this.bones,i=this.boneInverses,r=this.boneMatrices,o=this.boneTexture,a=0,s=n.length;a<s;a++){var l=n[a]?n[a].matrixWorld:e;t.multiplyMatrices(l,i[a]),t.toArray(r,16*a)}void 0!==o&&(o.needsUpdate=!0)}}(),clone:function(){return new ls(this.bones,this.boneInverses)},getBoneByName:function(t){for(var e=0,n=this.bones.length;e<n;e++){var i=this.bones[e];if(i.name===t)return i}}}),cs.prototype=Object.assign(Object.create(_r.prototype),{constructor:cs,isBone:!0}),us.prototype=Object.create(Gr.prototype),us.prototype.constructor=us,us.prototype.isLineBasicMaterial=!0,us.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this},hs.prototype=Object.assign(Object.create(_r.prototype),{constructor:hs,isLine:!0,computeLineDistances:function(){var t=new Ne,e=new Ne;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[0],o=1,a=i.count;o<a;o++)t.fromBufferAttribute(i,o-1),e.fromBufferAttribute(i,o),r[o]=r[o-1],r[o]+=t.distanceTo(e);n.addAttribute("lineDistance",new kr(r,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;r=n.lineDistances;r[0]=0;for(o=1,a=s.length;o<a;o++)r[o]=r[o-1],r[o]+=s[o-1].distanceTo(s[o])}return this}}(),raycast:function(){var t=new Ze,e=new Yr,n=new qe;return function(i,r){var o=i.linePrecision,a=this.geometry,s=this.matrixWorld;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=o,!1!==i.ray.intersectsSphere(n)){t.getInverse(s),e.copy(i.ray).applyMatrix4(t);var l=o/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,u=new Ne,h=new Ne,d=new Ne,p=new Ne,f=this&&this.isLineSegments?2:1;if(a.isBufferGeometry){var m=a.index,v=a.attributes,g=v.position.array;if(null!==m)for(var y=m.array,b=0,x=y.length-1;b<x;b+=f){var w=y[b],_=y[b+1];u.fromArray(g,3*w),h.fromArray(g,3*_);var M=e.distanceSqToSegment(u,h,p,d);if(!(M>c)){p.applyMatrix4(this.matrixWorld);var E=i.ray.origin.distanceTo(p);E<i.near||E>i.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else for(b=0,x=g.length/3-1;b<x;b+=f){u.fromArray(g,3*b),h.fromArray(g,3*b+3);M=e.distanceSqToSegment(u,h,p,d);if(!(M>c)){p.applyMatrix4(this.matrixWorld);E=i.ray.origin.distanceTo(p);E<i.near||E>i.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}else if(a.isGeometry){var S=a.vertices,T=S.length;for(b=0;b<T-1;b+=f){M=e.distanceSqToSegment(S[b],S[b+1],p,d);if(!(M>c)){p.applyMatrix4(this.matrixWorld);E=i.ray.origin.distanceTo(p);E<i.near||E>i.far||r.push({distance:E,point:d.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),ds.prototype=Object.assign(Object.create(hs.prototype),{constructor:ds,isLineSegments:!0,computeLineDistances:function(){var t=new Ne,e=new Ne;return function(){var n=this.geometry;if(n.isBufferGeometry)if(null===n.index){for(var i=n.attributes.position,r=[],o=0,a=i.count;o<a;o+=2)t.fromBufferAttribute(i,o),e.fromBufferAttribute(i,o+1),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e);n.addAttribute("lineDistance",new kr(r,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");else if(n.isGeometry){var s=n.vertices;for(r=n.lineDistances,o=0,a=s.length;o<a;o+=2)t.copy(s[o]),e.copy(s[o+1]),r[o]=0===o?0:r[o-1],r[o+1]=r[o]+t.distanceTo(e)}return this}}()}),ps.prototype=Object.assign(Object.create(hs.prototype),{constructor:ps,isLineLoop:!0}),fs.prototype=Object.create(Gr.prototype),fs.prototype.constructor=fs,fs.prototype.isPointsMaterial=!0,fs.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.size=t.size,this.sizeAttenuation=t.sizeAttenuation,this.morphTargets=t.morphTargets,this},ms.prototype=Object.assign(Object.create(_r.prototype),{constructor:ms,isPoints:!0,raycast:function(){var t=new Ze,e=new Yr,n=new qe;return function(i,r){var o=this,a=this.geometry,s=this.matrixWorld,l=i.params.Points.threshold;if(null===a.boundingSphere&&a.computeBoundingSphere(),n.copy(a.boundingSphere),n.applyMatrix4(s),n.radius+=l,!1!==i.ray.intersectsSphere(n)){t.getInverse(s),e.copy(i.ray).applyMatrix4(t);var c=l/((this.scale.x+this.scale.y+this.scale.z)/3),u=c*c,h=new Ne,d=new Ne;if(a.isBufferGeometry){var p=a.index,f=a.attributes,m=f.position.array;if(null!==p)for(var v=p.array,g=0,y=v.length;g<y;g++){var b=v[g];h.fromArray(m,3*b),_(h,b)}else{g=0;for(var x=m.length/3;g<x;g++)h.fromArray(m,3*g),_(h,g)}}else{var w=a.vertices;for(g=0,x=w.length;g<x;g++)_(w[g],g)}}function _(t,n){var a=e.distanceSqToPoint(t);if(a<u){e.closestPointToPoint(t,d),d.applyMatrix4(s);var l=i.ray.origin.distanceTo(d);if(l<i.near||l>i.far)return;r.push({distance:l,distanceToRay:Math.sqrt(a),point:d.clone(),index:n,face:null,object:o})}}}}(),clone:function(){return new this.constructor(this.geometry,this.material).copy(this)}}),vs.prototype=Object.assign(Object.create(je.prototype),{constructor:vs,isVideoTexture:!0,update:function(){var t=this.image;t.readyState>=t.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}),gs.prototype=Object.create(je.prototype),gs.prototype.constructor=gs,gs.prototype.isCompressedTexture=!0,ys.prototype=Object.create(je.prototype),ys.prototype.constructor=ys,ys.prototype.isCanvasTexture=!0,bs.prototype=Object.create(je.prototype),bs.prototype.constructor=bs,bs.prototype.isDepthTexture=!0,xs.prototype=Object.create(Br.prototype),xs.prototype.constructor=xs,ws.prototype=Object.create(Er.prototype),ws.prototype.constructor=ws,_s.prototype=Object.create(Br.prototype),_s.prototype.constructor=_s,Ms.prototype=Object.create(Er.prototype),Ms.prototype.constructor=Ms,Es.prototype=Object.create(Br.prototype),Es.prototype.constructor=Es,Ss.prototype=Object.create(Er.prototype),Ss.prototype.constructor=Ss,Ts.prototype=Object.create(Es.prototype),Ts.prototype.constructor=Ts,As.prototype=Object.create(Er.prototype),As.prototype.constructor=As,Cs.prototype=Object.create(Es.prototype),Cs.prototype.constructor=Cs,Ls.prototype=Object.create(Er.prototype),Ls.prototype.constructor=Ls,Ps.prototype=Object.create(Es.prototype),Ps.prototype.constructor=Ps,Os.prototype=Object.create(Er.prototype),Os.prototype.constructor=Os,Rs.prototype=Object.create(Es.prototype),Rs.prototype.constructor=Rs,ks.prototype=Object.create(Er.prototype),ks.prototype.constructor=ks,Ds.prototype=Object.create(Br.prototype),Ds.prototype.constructor=Ds,Ds.prototype.toJSON=function(){var t=Br.prototype.toJSON.call(this);return t.path=this.parameters.path.toJSON(),t},Is.prototype=Object.create(Er.prototype),Is.prototype.constructor=Is,Ns.prototype=Object.create(Br.prototype),Ns.prototype.constructor=Ns,zs.prototype=Object.create(Er.prototype),zs.prototype.constructor=zs,Bs.prototype=Object.create(Br.prototype),Bs.prototype.constructor=Bs;var Fs={triangulate:function(t,e,n){n=n||2;var i,r,o,a,s,l,c,u=e&&e.length,h=u?e[0]*n:t.length,d=js(t,0,h,n,!0),p=[];if(!d)return p;if(u&&(d=qs(t,e,d,n)),t.length>80*n){i=o=t[0],r=a=t[1];for(var f=n;f<h;f+=n)s=t[f],l=t[f+1],s<i&&(i=s),l<r&&(r=l),s>o&&(o=s),l>a&&(a=l);c=Math.max(o-i,a-r),c=0!==c?1/c:0}return Us(d,p,n,i,r,c),p}};function js(t,e,n,i,r){var o,a;if(r===pl(t,e,n,i)>0)for(o=e;o<n;o+=i)a=ul(o,t[o],t[o+1],a);else for(o=n-i;o>=e;o-=i)a=ul(o,t[o],t[o+1],a);return a&&rl(a,a.next)&&(hl(a),a=a.next),a}function Hs(t,e){if(!t)return t;e||(e=t);var n,i=t;do{if(n=!1,i.steiner||!rl(i,i.next)&&0!==il(i.prev,i,i.next))i=i.next;else{if(hl(i),i=e=i.prev,i===i.next)break;n=!0}}while(n||i!==e);return e}function Us(t,e,n,i,r,o,a){if(t){!a&&o&&Js(t,i,r,o);var s,l,c=t;while(t.prev!==t.next)if(s=t.prev,l=t.next,o?Gs(t,i,r,o):Vs(t))e.push(s.i/n),e.push(t.i/n),e.push(l.i/n),hl(t),t=l.next,c=l.next;else if(t=l,t===c){a?1===a?(t=Ws(t,e,n),Us(t,e,n,i,r,o,2)):2===a&&$s(t,e,n,i,r,o):Us(Hs(t),e,n,i,r,o,1);break}}}function Vs(t){var e=t.prev,n=t,i=t.next;if(il(e,n,i)>=0)return!1;var r=t.next.next;while(r!==t.prev){if(el(e.x,e.y,n.x,n.y,i.x,i.y,r.x,r.y)&&il(r.prev,r,r.next)>=0)return!1;r=r.next}return!0}function Gs(t,e,n,i){var r=t.prev,o=t,a=t.next;if(il(r,o,a)>=0)return!1;var s=r.x<o.x?r.x<a.x?r.x:a.x:o.x<a.x?o.x:a.x,l=r.y<o.y?r.y<a.y?r.y:a.y:o.y<a.y?o.y:a.y,c=r.x>o.x?r.x>a.x?r.x:a.x:o.x>a.x?o.x:a.x,u=r.y>o.y?r.y>a.y?r.y:a.y:o.y>a.y?o.y:a.y,h=Qs(s,l,e,n,i),d=Qs(c,u,e,n,i),p=t.nextZ;while(p&&p.z<=d){if(p!==t.prev&&p!==t.next&&el(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&il(p.prev,p,p.next)>=0)return!1;p=p.nextZ}p=t.prevZ;while(p&&p.z>=h){if(p!==t.prev&&p!==t.next&&el(r.x,r.y,o.x,o.y,a.x,a.y,p.x,p.y)&&il(p.prev,p,p.next)>=0)return!1;p=p.prevZ}return!0}function Ws(t,e,n){var i=t;do{var r=i.prev,o=i.next.next;!rl(r,o)&&ol(r,i,i.next,o)&&sl(r,o)&&sl(o,r)&&(e.push(r.i/n),e.push(i.i/n),e.push(o.i/n),hl(i),hl(i.next),i=t=o),i=i.next}while(i!==t);return i}function $s(t,e,n,i,r,o){var a=t;do{var s=a.next.next;while(s!==a.prev){if(a.i!==s.i&&nl(a,s)){var l=cl(a,s);return a=Hs(a,a.next),l=Hs(l,l.next),Us(a,e,n,i,r,o),void Us(l,e,n,i,r,o)}s=s.next}a=a.next}while(a!==t)}function qs(t,e,n,i){var r,o,a,s,l,c=[];for(r=0,o=e.length;r<o;r++)a=e[r]*i,s=r<o-1?e[r+1]*i:t.length,l=js(t,a,s,i,!1),l===l.next&&(l.steiner=!0),c.push(tl(l));for(c.sort(Ys),r=0;r<c.length;r++)Xs(c[r],n),n=Hs(n,n.next);return n}function Ys(t,e){return t.x-e.x}function Xs(t,e){if(e=Zs(t,e),e){var n=cl(e,t);Hs(n,n.next)}}function Zs(t,e){var n,i=e,r=t.x,o=t.y,a=-1/0;do{if(o<=i.y&&o>=i.next.y&&i.next.y!==i.y){var s=i.x+(o-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(s<=r&&s>a){if(a=s,s===r){if(o===i.y)return i;if(o===i.next.y)return i.next}n=i.x<i.next.x?i:i.next}}i=i.next}while(i!==e);if(!n)return null;if(r===a)return n.prev;var l,c=n,u=n.x,h=n.y,d=1/0;i=n.next;while(i!==c)r>=i.x&&i.x>=u&&r!==i.x&&el(o<h?r:a,o,u,h,o<h?a:r,o,i.x,i.y)&&(l=Math.abs(o-i.y)/(r-i.x),(l<d||l===d&&i.x>n.x)&&sl(i,t)&&(n=i,d=l)),i=i.next;return n}function Js(t,e,n,i){var r=t;do{null===r.z&&(r.z=Qs(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next}while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,Ks(r)}function Ks(t){var e,n,i,r,o,a,s,l,c=1;do{n=t,t=null,o=null,a=0;while(n){for(a++,i=n,s=0,e=0;e<c;e++)if(s++,i=i.nextZ,!i)break;l=c;while(s>0||l>0&&i)0!==s&&(0===l||!i||n.z<=i.z)?(r=n,n=n.nextZ,s--):(r=i,i=i.nextZ,l--),o?o.nextZ=r:t=r,r.prevZ=o,o=r;n=i}o.nextZ=null,c*=2}while(a>1);return t}function Qs(t,e,n,i,r){return t=32767*(t-n)*r,e=32767*(e-i)*r,t=16711935&(t|t<<8),t=252645135&(t|t<<4),t=858993459&(t|t<<2),t=1431655765&(t|t<<1),e=16711935&(e|e<<8),e=252645135&(e|e<<4),e=858993459&(e|e<<2),e=1431655765&(e|e<<1),t|e<<1}function tl(t){var e=t,n=t;do{e.x<n.x&&(n=e),e=e.next}while(e!==t);return n}function el(t,e,n,i,r,o,a,s){return(r-a)*(e-s)-(t-a)*(o-s)>=0&&(t-a)*(i-s)-(n-a)*(e-s)>=0&&(n-a)*(o-s)-(r-a)*(i-s)>=0}function nl(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!al(t,e)&&sl(t,e)&&sl(e,t)&&ll(t,e)}function il(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function rl(t,e){return t.x===e.x&&t.y===e.y}function ol(t,e,n,i){return!!(rl(t,e)&&rl(n,i)||rl(t,i)&&rl(n,e))||il(t,e,n)>0!==il(t,e,i)>0&&il(n,i,t)>0!==il(n,i,e)>0}function al(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&ol(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function sl(t,e){return il(t.prev,t,t.next)<0?il(t,e,t.next)>=0&&il(t,t.prev,e)>=0:il(t,e,t.prev)<0||il(t,t.next,e)<0}function ll(t,e){var n=t,i=!1,r=(t.x+e.x)/2,o=(t.y+e.y)/2;do{n.y>o!==n.next.y>o&&n.next.y!==n.y&&r<(n.next.x-n.x)*(o-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next}while(n!==t);return i}function cl(t,e){var n=new dl(t.i,t.x,t.y),i=new dl(e.i,e.x,e.y),r=t.next,o=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,o.next=i,i.prev=o,i}function ul(t,e,n,i){var r=new dl(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function hl(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function dl(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pl(t,e,n,i){for(var r=0,o=e,a=n-i;o<n;o+=i)r+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return r}var fl={area:function(t){for(var e=t.length,n=0,i=e-1,r=0;r<e;i=r++)n+=t[i].x*t[r].y-t[r].x*t[i].y;return.5*n},isClockWise:function(t){return fl.area(t)<0},triangulateShape:function(t,e){var n=[],i=[],r=[];ml(t),vl(n,t);var o=t.length;e.forEach(ml);for(var a=0;a<e.length;a++)i.push(o),o+=e[a].length,vl(n,e[a]);var s=Fs.triangulate(n,i);for(a=0;a<s.length;a+=3)r.push(s.slice(a,a+3));return r}};function ml(t){var e=t.length;e>2&&t[e-1].equals(t[0])&&t.pop()}function vl(t,e){for(var n=0;n<e.length;n++)t.push(e[n].x),t.push(e[n].y)}function gl(t,e){Er.call(this),this.type="ExtrudeGeometry",this.parameters={shapes:t,options:e},this.fromBufferGeometry(new yl(t,e)),this.mergeVertices()}function yl(t,e){Br.call(this),this.type="ExtrudeBufferGeometry",this.parameters={shapes:t,options:e},t=Array.isArray(t)?t:[t];for(var n=this,i=[],r=[],o=0,a=t.length;o<a;o++){var s=t[o];l(s)}function l(t){var o=[],a=void 0!==e.curveSegments?e.curveSegments:12,s=void 0!==e.steps?e.steps:1,l=void 0!==e.depth?e.depth:100,c=void 0===e.bevelEnabled||e.bevelEnabled,u=void 0!==e.bevelThickness?e.bevelThickness:6,h=void 0!==e.bevelSize?e.bevelSize:u-2,d=void 0!==e.bevelOffset?e.bevelOffset:0,p=void 0!==e.bevelSegments?e.bevelSegments:3,f=e.extrudePath,m=void 0!==e.UVGenerator?e.UVGenerator:bl;void 0!==e.amount&&(console.warn("THREE.ExtrudeBufferGeometry: amount has been renamed to depth."),l=e.amount);var v,g,y,b,x,w,_,M,E=!1;f&&(v=f.getSpacedPoints(s),E=!0,c=!1,g=f.computeFrenetFrames(s,!1),y=new Ne,b=new Ne,x=new Ne),c||(p=0,u=0,h=0,d=0);var S=t.extractPoints(a),T=S.shape,A=S.holes,C=!fl.isClockWise(T);if(C)for(T=T.reverse(),_=0,M=A.length;_<M;_++)w=A[_],fl.isClockWise(w)&&(A[_]=w.reverse());var L=fl.triangulateShape(T,A),P=T;for(_=0,M=A.length;_<M;_++)w=A[_],T=T.concat(w);function O(t,e,n){return e||console.error("THREE.ExtrudeGeometry: vec does not exist"),e.clone().multiplyScalar(n).add(t)}var R,k,D,I,N,z,B=T.length,F=L.length;function j(t,e,n){var i,r,o,a=t.x-e.x,s=t.y-e.y,l=n.x-t.x,c=n.y-t.y,u=a*a+s*s,h=a*c-s*l;if(Math.abs(h)>Number.EPSILON){var d=Math.sqrt(u),p=Math.sqrt(l*l+c*c),f=e.x-s/d,m=e.y+a/d,v=n.x-c/p,g=n.y+l/p,y=((v-f)*c-(g-m)*l)/(a*c-s*l);i=f+a*y-t.x,r=m+s*y-t.y;var b=i*i+r*r;if(b<=2)return new De(i,r);o=Math.sqrt(b/2)}else{var x=!1;a>Number.EPSILON?l>Number.EPSILON&&(x=!0):a<-Number.EPSILON?l<-Number.EPSILON&&(x=!0):Math.sign(s)===Math.sign(c)&&(x=!0),x?(i=-s,r=a,o=Math.sqrt(u)):(i=a,r=s,o=Math.sqrt(u/2))}return new De(i/o,r/o)}for(var H=[],U=0,V=P.length,G=V-1,W=U+1;U<V;U++,G++,W++)G===V&&(G=0),W===V&&(W=0),H[U]=j(P[U],P[G],P[W]);var $,q,Y=[],X=H.concat();for(_=0,M=A.length;_<M;_++){for(w=A[_],$=[],U=0,V=w.length,G=V-1,W=U+1;U<V;U++,G++,W++)G===V&&(G=0),W===V&&(W=0),$[U]=j(w[U],w[G],w[W]);Y.push($),X=X.concat($)}for(R=0;R<p;R++){for(D=R/p,I=u*Math.cos(D*Math.PI/2),k=h*Math.sin(D*Math.PI/2)+d,U=0,V=P.length;U<V;U++)N=O(P[U],H[U],k),Q(N.x,N.y,-I);for(_=0,M=A.length;_<M;_++)for(w=A[_],$=Y[_],U=0,V=w.length;U<V;U++)N=O(w[U],$[U],k),Q(N.x,N.y,-I)}for(k=h+d,U=0;U<B;U++)N=c?O(T[U],X[U],k):T[U],E?(b.copy(g.normals[0]).multiplyScalar(N.x),y.copy(g.binormals[0]).multiplyScalar(N.y),x.copy(v[0]).add(b).add(y),Q(x.x,x.y,x.z)):Q(N.x,N.y,0);for(q=1;q<=s;q++)for(U=0;U<B;U++)N=c?O(T[U],X[U],k):T[U],E?(b.copy(g.normals[q]).multiplyScalar(N.x),y.copy(g.binormals[q]).multiplyScalar(N.y),x.copy(v[q]).add(b).add(y),Q(x.x,x.y,x.z)):Q(N.x,N.y,l/s*q);for(R=p-1;R>=0;R--){for(D=R/p,I=u*Math.cos(D*Math.PI/2),k=h*Math.sin(D*Math.PI/2)+d,U=0,V=P.length;U<V;U++)N=O(P[U],H[U],k),Q(N.x,N.y,l+I);for(_=0,M=A.length;_<M;_++)for(w=A[_],$=Y[_],U=0,V=w.length;U<V;U++)N=O(w[U],$[U],k),E?Q(N.x,N.y+v[s-1].y,v[s-1].x+I):Q(N.x,N.y,l+I)}function Z(){var t=i.length/3;if(c){var e=0,r=B*e;for(U=0;U<F;U++)z=L[U],tt(z[2]+r,z[1]+r,z[0]+r);for(e=s+2*p,r=B*e,U=0;U<F;U++)z=L[U],tt(z[0]+r,z[1]+r,z[2]+r)}else{for(U=0;U<F;U++)z=L[U],tt(z[2],z[1],z[0]);for(U=0;U<F;U++)z=L[U],tt(z[0]+B*s,z[1]+B*s,z[2]+B*s)}n.addGroup(t,i.length/3-t,0)}function J(){var t=i.length/3,e=0;for(K(P,e),e+=P.length,_=0,M=A.length;_<M;_++)w=A[_],K(w,e),e+=w.length;n.addGroup(t,i.length/3-t,1)}function K(t,e){var n,i;U=t.length;while(--U>=0){n=U,i=U-1,i<0&&(i=t.length-1);var r=0,o=s+2*p;for(r=0;r<o;r++){var a=B*r,l=B*(r+1),c=e+n+a,u=e+i+a,h=e+i+l,d=e+n+l;et(c,u,h,d)}}}function Q(t,e,n){o.push(t),o.push(e),o.push(n)}function tt(t,e,r){nt(t),nt(e),nt(r);var o=i.length/3,a=m.generateTopUV(n,i,o-3,o-2,o-1);it(a[0]),it(a[1]),it(a[2])}function et(t,e,r,o){nt(t),nt(e),nt(o),nt(e),nt(r),nt(o);var a=i.length/3,s=m.generateSideWallUV(n,i,a-6,a-3,a-2,a-1);it(s[0]),it(s[1]),it(s[3]),it(s[1]),it(s[2]),it(s[3])}function nt(t){i.push(o[3*t+0]),i.push(o[3*t+1]),i.push(o[3*t+2])}function it(t){r.push(t.x),r.push(t.y)}Z(),J()}this.addAttribute("position",new kr(i,3)),this.addAttribute("uv",new kr(r,2)),this.computeVertexNormals()}gl.prototype=Object.create(Er.prototype),gl.prototype.constructor=gl,gl.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return xl(e,n,t)},yl.prototype=Object.create(Br.prototype),yl.prototype.constructor=yl,yl.prototype.toJSON=function(){var t=Br.prototype.toJSON.call(this),e=this.parameters.shapes,n=this.parameters.options;return xl(e,n,t)};var bl={generateTopUV:function(t,e,n,i,r){var o=e[3*n],a=e[3*n+1],s=e[3*i],l=e[3*i+1],c=e[3*r],u=e[3*r+1];return[new De(o,a),new De(s,l),new De(c,u)]},generateSideWallUV:function(t,e,n,i,r,o){var a=e[3*n],s=e[3*n+1],l=e[3*n+2],c=e[3*i],u=e[3*i+1],h=e[3*i+2],d=e[3*r],p=e[3*r+1],f=e[3*r+2],m=e[3*o],v=e[3*o+1],g=e[3*o+2];return Math.abs(s-u)<.01?[new De(a,1-l),new De(c,1-h),new De(d,1-f),new De(m,1-g)]:[new De(s,1-l),new De(u,1-h),new De(p,1-f),new De(v,1-g)]}};function xl(t,e,n){if(n.shapes=[],Array.isArray(t))for(var i=0,r=t.length;i<r;i++){var o=t[i];n.shapes.push(o.uuid)}else n.shapes.push(t.uuid);return void 0!==e.extrudePath&&(n.options.extrudePath=e.extrudePath.toJSON()),n}function wl(t,e){Er.call(this),this.type="TextGeometry",this.parameters={text:t,parameters:e},this.fromBufferGeometry(new _l(t,e)),this.mergeVertices()}function _l(t,e){e=e||{};var n=e.font;if(!n||!n.isFont)return console.error("THREE.TextGeometry: font parameter is not an instance of THREE.Font."),new Er;var i=n.generateShapes(t,e.size);e.depth=void 0!==e.height?e.height:50,void 0===e.bevelThickness&&(e.bevelThickness=10),void 0===e.bevelSize&&(e.bevelSize=8),void 0===e.bevelEnabled&&(e.bevelEnabled=!1),yl.call(this,i,e),this.type="TextBufferGeometry"}function Ml(t,e,n,i,r,o,a){Er.call(this),this.type="SphereGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},this.fromBufferGeometry(new El(t,e,n,i,r,o,a)),this.mergeVertices()}function El(t,e,n,i,r,o,a){Br.call(this),this.type="SphereBufferGeometry",this.parameters={radius:t,widthSegments:e,heightSegments:n,phiStart:i,phiLength:r,thetaStart:o,thetaLength:a},t=t||1,e=Math.max(3,Math.floor(e)||8),n=Math.max(2,Math.floor(n)||6),i=void 0!==i?i:0,r=void 0!==r?r:2*Math.PI,o=void 0!==o?o:0,a=void 0!==a?a:Math.PI;var s,l,c=Math.min(o+a,Math.PI),u=0,h=[],d=new Ne,p=new Ne,f=[],m=[],v=[],g=[];for(l=0;l<=n;l++){var y=[],b=l/n,x=0;for(0==l&&0==o?x=.5/e:l==n&&c==Math.PI&&(x=-.5/e),s=0;s<=e;s++){var w=s/e;d.x=-t*Math.cos(i+w*r)*Math.sin(o+b*a),d.y=t*Math.cos(o+b*a),d.z=t*Math.sin(i+w*r)*Math.sin(o+b*a),m.push(d.x,d.y,d.z),p.copy(d).normalize(),v.push(p.x,p.y,p.z),g.push(w+x,1-b),y.push(u++)}h.push(y)}for(l=0;l<n;l++)for(s=0;s<e;s++){var _=h[l][s+1],M=h[l][s],E=h[l+1][s],S=h[l+1][s+1];(0!==l||o>0)&&f.push(_,M,S),(l!==n-1||c<Math.PI)&&f.push(M,E,S)}this.setIndex(f),this.addAttribute("position",new kr(m,3)),this.addAttribute("normal",new kr(v,3)),this.addAttribute("uv",new kr(g,2))}function Sl(t,e,n,i,r,o){Er.call(this),this.type="RingGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},this.fromBufferGeometry(new Tl(t,e,n,i,r,o)),this.mergeVertices()}function Tl(t,e,n,i,r,o){Br.call(this),this.type="RingBufferGeometry",this.parameters={innerRadius:t,outerRadius:e,thetaSegments:n,phiSegments:i,thetaStart:r,thetaLength:o},t=t||.5,e=e||1,r=void 0!==r?r:0,o=void 0!==o?o:2*Math.PI,n=void 0!==n?Math.max(3,n):8,i=void 0!==i?Math.max(1,i):1;var a,s,l,c=[],u=[],h=[],d=[],p=t,f=(e-t)/i,m=new Ne,v=new De;for(s=0;s<=i;s++){for(l=0;l<=n;l++)a=r+l/n*o,m.x=p*Math.cos(a),m.y=p*Math.sin(a),u.push(m.x,m.y,m.z),h.push(0,0,1),v.x=(m.x/e+1)/2,v.y=(m.y/e+1)/2,d.push(v.x,v.y);p+=f}for(s=0;s<i;s++){var g=s*(n+1);for(l=0;l<n;l++){a=l+g;var y=a,b=a+n+1,x=a+n+2,w=a+1;c.push(y,b,w),c.push(b,x,w)}}this.setIndex(c),this.addAttribute("position",new kr(u,3)),this.addAttribute("normal",new kr(h,3)),this.addAttribute("uv",new kr(d,2))}function Al(t,e,n,i){Er.call(this),this.type="LatheGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},this.fromBufferGeometry(new Cl(t,e,n,i)),this.mergeVertices()}function Cl(t,e,n,i){Br.call(this),this.type="LatheBufferGeometry",this.parameters={points:t,segments:e,phiStart:n,phiLength:i},e=Math.floor(e)||12,n=n||0,i=i||2*Math.PI,i=ke.clamp(i,0,2*Math.PI);var r,o,a,s=[],l=[],c=[],u=1/e,h=new Ne,d=new De;for(o=0;o<=e;o++){var p=n+o*u*i,f=Math.sin(p),m=Math.cos(p);for(a=0;a<=t.length-1;a++)h.x=t[a].x*f,h.y=t[a].y,h.z=t[a].x*m,l.push(h.x,h.y,h.z),d.x=o/e,d.y=a/(t.length-1),c.push(d.x,d.y)}for(o=0;o<e;o++)for(a=0;a<t.length-1;a++){r=a+o*t.length;var v=r,g=r+t.length,y=r+t.length+1,b=r+1;s.push(v,g,b),s.push(g,y,b)}if(this.setIndex(s),this.addAttribute("position",new kr(l,3)),this.addAttribute("uv",new kr(c,2)),this.computeVertexNormals(),i===2*Math.PI){var x=this.attributes.normal.array,w=new Ne,_=new Ne,M=new Ne;for(r=e*t.length*3,o=0,a=0;o<t.length;o++,a+=3)w.x=x[a+0],w.y=x[a+1],w.z=x[a+2],_.x=x[r+a+0],_.y=x[r+a+1],_.z=x[r+a+2],M.addVectors(w,_).normalize(),x[a+0]=x[r+a+0]=M.x,x[a+1]=x[r+a+1]=M.y,x[a+2]=x[r+a+2]=M.z}}function Ll(t,e){Er.call(this),this.type="ShapeGeometry","object"===typeof e&&(console.warn("THREE.ShapeGeometry: Options parameter has been removed."),e=e.curveSegments),this.parameters={shapes:t,curveSegments:e},this.fromBufferGeometry(new Pl(t,e)),this.mergeVertices()}function Pl(t,e){Br.call(this),this.type="ShapeBufferGeometry",this.parameters={shapes:t,curveSegments:e},e=e||12;var n=[],i=[],r=[],o=[],a=0,s=0;if(!1===Array.isArray(t))c(t);else for(var l=0;l<t.length;l++)c(t[l]),this.addGroup(a,s,l),a+=s,s=0;function c(t){var a,l,c,u=i.length/3,h=t.extractPoints(e),d=h.shape,p=h.holes;for(!1===fl.isClockWise(d)&&(d=d.reverse()),a=0,l=p.length;a<l;a++)c=p[a],!0===fl.isClockWise(c)&&(p[a]=c.reverse());var f=fl.triangulateShape(d,p);for(a=0,l=p.length;a<l;a++)c=p[a],d=d.concat(c);for(a=0,l=d.length;a<l;a++){var m=d[a];i.push(m.x,m.y,0),r.push(0,0,1),o.push(m.x,m.y)}for(a=0,l=f.length;a<l;a++){var v=f[a],g=v[0]+u,y=v[1]+u,b=v[2]+u;n.push(g,y,b),s+=3}}this.setIndex(n),this.addAttribute("position",new kr(i,3)),this.addAttribute("normal",new kr(r,3)),this.addAttribute("uv",new kr(o,2))}function Ol(t,e){if(e.shapes=[],Array.isArray(t))for(var n=0,i=t.length;n<i;n++){var r=t[n];e.shapes.push(r.uuid)}else e.shapes.push(t.uuid);return e}function Rl(t,e){Br.call(this),this.type="EdgesGeometry",this.parameters={thresholdAngle:e},e=void 0!==e?e:1;var n,i,r,o,a=[],s=Math.cos(ke.DEG2RAD*e),l=[0,0],c={},u=["a","b","c"];t.isBufferGeometry?(o=new Er,o.fromBufferGeometry(t)):o=t.clone(),o.mergeVertices(),o.computeFaceNormals();for(var h=o.vertices,d=o.faces,p=0,f=d.length;p<f;p++)for(var m=d[p],v=0;v<3;v++)n=m[u[v]],i=m[u[(v+1)%3]],l[0]=Math.min(n,i),l[1]=Math.max(n,i),r=l[0]+","+l[1],void 0===c[r]?c[r]={index1:l[0],index2:l[1],face1:p,face2:void 0}:c[r].face2=p;for(r in c){var g=c[r];if(void 0===g.face2||d[g.face1].normal.dot(d[g.face2].normal)<=s){var y=h[g.index1];a.push(y.x,y.y,y.z),y=h[g.index2],a.push(y.x,y.y,y.z)}}this.addAttribute("position",new kr(a,3))}function kl(t,e,n,i,r,o,a,s){Er.call(this),this.type="CylinderGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s},this.fromBufferGeometry(new Dl(t,e,n,i,r,o,a,s)),this.mergeVertices()}function Dl(t,e,n,i,r,o,a,s){Br.call(this),this.type="CylinderBufferGeometry",this.parameters={radiusTop:t,radiusBottom:e,height:n,radialSegments:i,heightSegments:r,openEnded:o,thetaStart:a,thetaLength:s};var l=this;t=void 0!==t?t:1,e=void 0!==e?e:1,n=n||1,i=Math.floor(i)||8,r=Math.floor(r)||1,o=void 0!==o&&o,a=void 0!==a?a:0,s=void 0!==s?s:2*Math.PI;var c=[],u=[],h=[],d=[],p=0,f=[],m=n/2,v=0;function g(){var o,g,y=new Ne,b=new Ne,x=0,w=(e-t)/n;for(g=0;g<=r;g++){var _=[],M=g/r,E=M*(e-t)+t;for(o=0;o<=i;o++){var S=o/i,T=S*s+a,A=Math.sin(T),C=Math.cos(T);b.x=E*A,b.y=-M*n+m,b.z=E*C,u.push(b.x,b.y,b.z),y.set(A,w,C).normalize(),h.push(y.x,y.y,y.z),d.push(S,1-M),_.push(p++)}f.push(_)}for(o=0;o<i;o++)for(g=0;g<r;g++){var L=f[g][o],P=f[g+1][o],O=f[g+1][o+1],R=f[g][o+1];c.push(L,P,R),c.push(P,O,R),x+=6}l.addGroup(v,x,0),v+=x}function y(n){var r,o,f,g=new De,y=new Ne,b=0,x=!0===n?t:e,w=!0===n?1:-1;for(o=p,r=1;r<=i;r++)u.push(0,m*w,0),h.push(0,w,0),d.push(.5,.5),p++;for(f=p,r=0;r<=i;r++){var _=r/i,M=_*s+a,E=Math.cos(M),S=Math.sin(M);y.x=x*S,y.y=m*w,y.z=x*E,u.push(y.x,y.y,y.z),h.push(0,w,0),g.x=.5*E+.5,g.y=.5*S*w+.5,d.push(g.x,g.y),p++}for(r=0;r<i;r++){var T=o+r,A=f+r;!0===n?c.push(A,A+1,T):c.push(A+1,A,T),b+=3}l.addGroup(v,b,!0===n?1:2),v+=b}g(),!1===o&&(t>0&&y(!0),e>0&&y(!1)),this.setIndex(c),this.addAttribute("position",new kr(u,3)),this.addAttribute("normal",new kr(h,3)),this.addAttribute("uv",new kr(d,2))}function Il(t,e,n,i,r,o,a){kl.call(this,0,t,e,n,i,r,o,a),this.type="ConeGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function Nl(t,e,n,i,r,o,a){Dl.call(this,0,t,e,n,i,r,o,a),this.type="ConeBufferGeometry",this.parameters={radius:t,height:e,radialSegments:n,heightSegments:i,openEnded:r,thetaStart:o,thetaLength:a}}function zl(t,e,n,i){Er.call(this),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},this.fromBufferGeometry(new Bl(t,e,n,i)),this.mergeVertices()}function Bl(t,e,n,i){Br.call(this),this.type="CircleBufferGeometry",this.parameters={radius:t,segments:e,thetaStart:n,thetaLength:i},t=t||1,e=void 0!==e?Math.max(3,e):8,n=void 0!==n?n:0,i=void 0!==i?i:2*Math.PI;var r,o,a=[],s=[],l=[],c=[],u=new Ne,h=new De;for(s.push(0,0,0),l.push(0,0,1),c.push(.5,.5),o=0,r=3;o<=e;o++,r+=3){var d=n+o/e*i;u.x=t*Math.cos(d),u.y=t*Math.sin(d),s.push(u.x,u.y,u.z),l.push(0,0,1),h.x=(s[r]/t+1)/2,h.y=(s[r+1]/t+1)/2,c.push(h.x,h.y)}for(r=1;r<=e;r++)a.push(r,r+1,0);this.setIndex(a),this.addAttribute("position",new kr(s,3)),this.addAttribute("normal",new kr(l,3)),this.addAttribute("uv",new kr(c,2))}wl.prototype=Object.create(Er.prototype),wl.prototype.constructor=wl,_l.prototype=Object.create(yl.prototype),_l.prototype.constructor=_l,Ml.prototype=Object.create(Er.prototype),Ml.prototype.constructor=Ml,El.prototype=Object.create(Br.prototype),El.prototype.constructor=El,Sl.prototype=Object.create(Er.prototype),Sl.prototype.constructor=Sl,Tl.prototype=Object.create(Br.prototype),Tl.prototype.constructor=Tl,Al.prototype=Object.create(Er.prototype),Al.prototype.constructor=Al,Cl.prototype=Object.create(Br.prototype),Cl.prototype.constructor=Cl,Ll.prototype=Object.create(Er.prototype),Ll.prototype.constructor=Ll,Ll.prototype.toJSON=function(){var t=Er.prototype.toJSON.call(this),e=this.parameters.shapes;return Ol(e,t)},Pl.prototype=Object.create(Br.prototype),Pl.prototype.constructor=Pl,Pl.prototype.toJSON=function(){var t=Br.prototype.toJSON.call(this),e=this.parameters.shapes;return Ol(e,t)},Rl.prototype=Object.create(Br.prototype),Rl.prototype.constructor=Rl,kl.prototype=Object.create(Er.prototype),kl.prototype.constructor=kl,Dl.prototype=Object.create(Br.prototype),Dl.prototype.constructor=Dl,Il.prototype=Object.create(kl.prototype),Il.prototype.constructor=Il,Nl.prototype=Object.create(Dl.prototype),Nl.prototype.constructor=Nl,zl.prototype=Object.create(Er.prototype),zl.prototype.constructor=zl,Bl.prototype=Object.create(Br.prototype),Bl.prototype.constructor=Bl;var Fl=Object.freeze({WireframeGeometry:xs,ParametricGeometry:ws,ParametricBufferGeometry:_s,TetrahedronGeometry:Ss,TetrahedronBufferGeometry:Ts,OctahedronGeometry:As,OctahedronBufferGeometry:Cs,IcosahedronGeometry:Ls,IcosahedronBufferGeometry:Ps,DodecahedronGeometry:Os,DodecahedronBufferGeometry:Rs,PolyhedronGeometry:Ms,PolyhedronBufferGeometry:Es,TubeGeometry:ks,TubeBufferGeometry:Ds,TorusKnotGeometry:Is,TorusKnotBufferGeometry:Ns,TorusGeometry:zs,TorusBufferGeometry:Bs,TextGeometry:wl,TextBufferGeometry:_l,SphereGeometry:Ml,SphereBufferGeometry:El,RingGeometry:Sl,RingBufferGeometry:Tl,PlaneGeometry:Hr,PlaneBufferGeometry:Ur,LatheGeometry:Al,LatheBufferGeometry:Cl,ShapeGeometry:Ll,ShapeBufferGeometry:Pl,ExtrudeGeometry:gl,ExtrudeBufferGeometry:yl,EdgesGeometry:Rl,ConeGeometry:Il,ConeBufferGeometry:Nl,CylinderGeometry:kl,CylinderBufferGeometry:Dl,CircleGeometry:zl,CircleBufferGeometry:Bl,BoxGeometry:Fr,BoxBufferGeometry:jr});function jl(t){Gr.call(this),this.type="ShadowMaterial",this.color=new pr(0),this.transparent=!0,this.setValues(t)}function Hl(t){qr.call(this,t),this.type="RawShaderMaterial"}function Ul(t){Gr.call(this),this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new pr(16777215),this.roughness=.5,this.metalness=.5,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Vl(t){Ul.call(this),this.defines={PHYSICAL:""},this.type="MeshPhysicalMaterial",this.reflectivity=.5,this.clearCoat=0,this.clearCoatRoughness=0,this.setValues(t)}function Gl(t){Gr.call(this),this.type="MeshPhongMaterial",this.color=new pr(16777215),this.specular=new pr(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Wl(t){Gl.call(this),this.defines={TOON:""},this.type="MeshToonMaterial",this.gradientMap=null,this.setValues(t)}function $l(t){Gr.call(this),this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function ql(t){Gr.call(this),this.type="MeshLambertMaterial",this.color=new pr(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pr(0),this.emissiveIntensity=1,this.emissiveMap=null,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=X,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.setValues(t)}function Yl(t){Gr.call(this),this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new pr(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Oe,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.skinning=!1,this.morphTargets=!1,this.morphNormals=!1,this.lights=!1,this.setValues(t)}function Xl(t){us.call(this),this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(t)}jl.prototype=Object.create(Gr.prototype),jl.prototype.constructor=jl,jl.prototype.isShadowMaterial=!0,jl.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this},Hl.prototype=Object.create(qr.prototype),Hl.prototype.constructor=Hl,Hl.prototype.isRawShaderMaterial=!0,Ul.prototype=Object.create(Gr.prototype),Ul.prototype.constructor=Ul,Ul.prototype.isMeshStandardMaterial=!0,Ul.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.defines={STANDARD:""},this.color.copy(t.color),this.roughness=t.roughness,this.metalness=t.metalness,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.roughnessMap=t.roughnessMap,this.metalnessMap=t.metalnessMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapIntensity=t.envMapIntensity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Vl.prototype=Object.create(Ul.prototype),Vl.prototype.constructor=Vl,Vl.prototype.isMeshPhysicalMaterial=!0,Vl.prototype.copy=function(t){return Ul.prototype.copy.call(this,t),this.defines={PHYSICAL:""},this.reflectivity=t.reflectivity,this.clearCoat=t.clearCoat,this.clearCoatRoughness=t.clearCoatRoughness,this},Gl.prototype=Object.create(Gr.prototype),Gl.prototype.constructor=Gl,Gl.prototype.isMeshPhongMaterial=!0,Gl.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this.specular.copy(t.specular),this.shininess=t.shininess,this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Wl.prototype=Object.create(Gl.prototype),Wl.prototype.constructor=Wl,Wl.prototype.isMeshToonMaterial=!0,Wl.prototype.copy=function(t){return Gl.prototype.copy.call(this,t),this.gradientMap=t.gradientMap,this},$l.prototype=Object.create(Gr.prototype),$l.prototype.constructor=$l,$l.prototype.isMeshNormalMaterial=!0,$l.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},ql.prototype=Object.create(Gr.prototype),ql.prototype.constructor=ql,ql.prototype.isMeshLambertMaterial=!0,ql.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.emissive.copy(t.emissive),this.emissiveMap=t.emissiveMap,this.emissiveIntensity=t.emissiveIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Yl.prototype=Object.create(Gr.prototype),Yl.prototype.constructor=Yl,Yl.prototype.isMeshMatcapMaterial=!0,Yl.prototype.copy=function(t){return Gr.prototype.copy.call(this,t),this.defines={MATCAP:""},this.color.copy(t.color),this.matcap=t.matcap,this.map=t.map,this.bumpMap=t.bumpMap,this.bumpScale=t.bumpScale,this.normalMap=t.normalMap,this.normalMapType=t.normalMapType,this.normalScale.copy(t.normalScale),this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.alphaMap=t.alphaMap,this.skinning=t.skinning,this.morphTargets=t.morphTargets,this.morphNormals=t.morphNormals,this},Xl.prototype=Object.create(us.prototype),Xl.prototype.constructor=Xl,Xl.prototype.isLineDashedMaterial=!0,Xl.prototype.copy=function(t){return us.prototype.copy.call(this,t),this.scale=t.scale,this.dashSize=t.dashSize,this.gapSize=t.gapSize,this};var Zl=Object.freeze({ShadowMaterial:jl,SpriteMaterial:rs,RawShaderMaterial:Hl,ShaderMaterial:qr,PointsMaterial:fs,MeshPhysicalMaterial:Vl,MeshStandardMaterial:Ul,MeshPhongMaterial:Gl,MeshToonMaterial:Wl,MeshNormalMaterial:$l,MeshLambertMaterial:ql,MeshDepthMaterial:Na,MeshDistanceMaterial:za,MeshBasicMaterial:Zr,MeshMatcapMaterial:Yl,LineDashedMaterial:Xl,LineBasicMaterial:us,Material:Gr}),Jl={arraySlice:function(t,e,n){return Jl.isTypedArray(t)?new t.constructor(t.subarray(e,void 0!==n?n:t.length)):t.slice(e,n)},convertArray:function(t,e,n){return!t||!n&&t.constructor===e?t:"number"===typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)},isTypedArray:function(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)},getKeyframeOrder:function(t){function e(e,n){return t[e]-t[n]}for(var n=t.length,i=new Array(n),r=0;r!==n;++r)i[r]=r;return i.sort(e),i},sortedArray:function(t,e,n){for(var i=t.length,r=new t.constructor(i),o=0,a=0;a!==i;++o)for(var s=n[o]*e,l=0;l!==e;++l)r[a++]=t[s+l];return r},flattenJSON:function(t,e,n,i){var r=1,o=t[0];while(void 0!==o&&void 0===o[i])o=t[r++];if(void 0!==o){var a=o[i];if(void 0!==a)if(Array.isArray(a))do{a=o[i],void 0!==a&&(e.push(o.time),n.push.apply(n,a)),o=t[r++]}while(void 0!==o);else if(void 0!==a.toArray)do{a=o[i],void 0!==a&&(e.push(o.time),a.toArray(n,n.length)),o=t[r++]}while(void 0!==o);else do{a=o[i],void 0!==a&&(e.push(o.time),n.push(a)),o=t[r++]}while(void 0!==o)}}};function Kl(t,e,n,i){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==i?i:new e.constructor(n),this.sampleValues=e,this.valueSize=n}function Ql(t,e,n,i){Kl.call(this,t,e,n,i),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0}function tc(t,e,n,i){Kl.call(this,t,e,n,i)}function ec(t,e,n,i){Kl.call(this,t,e,n,i)}function nc(t,e,n,i){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=Jl.convertArray(e,this.TimeBufferType),this.values=Jl.convertArray(n,this.ValueBufferType),this.setInterpolation(i||this.DefaultInterpolation)}function ic(t,e,n){nc.call(this,t,e,n)}function rc(t,e,n,i){nc.call(this,t,e,n,i)}function oc(t,e,n,i){nc.call(this,t,e,n,i)}function ac(t,e,n,i){Kl.call(this,t,e,n,i)}function sc(t,e,n,i){nc.call(this,t,e,n,i)}function lc(t,e,n,i){nc.call(this,t,e,n,i)}function cc(t,e,n,i){nc.call(this,t,e,n,i)}function uc(t,e,n){this.name=t,this.tracks=n,this.duration=void 0!==e?e:-1,this.uuid=ke.generateUUID(),this.duration<0&&this.resetDuration()}function hc(t){switch(t.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return oc;case"vector":case"vector2":case"vector3":case"vector4":return cc;case"color":return rc;case"quaternion":return sc;case"bool":case"boolean":return ic;case"string":return lc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+t)}function dc(t){if(void 0===t.type)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");var e=hc(t.type);if(void 0===t.times){var n=[],i=[];Jl.flattenJSON(t.keys,n,i,"value"),t.times=n,t.values=i}return void 0!==e.parse?e.parse(t):new e(t.name,t.times,t.values,t.interpolation)}Object.assign(Kl.prototype,{evaluate:function(t){var e=this.parameterPositions,n=this._cachedIndex,i=e[n],r=e[n-1];t:{e:{var o;n:{i:if(!(t<i)){for(var a=n+2;;){if(void 0===i){if(t<r)break i;return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,t,r)}if(n===a)break;if(r=i,i=e[++n],t<i)break e}o=e.length;break n}if(t>=r)break t;var s=e[1];t<s&&(n=2,r=s);for(a=n-2;;){if(void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(n===a)break;if(i=r,r=e[--n-1],t>=r)break e}o=n,n=0}while(n<o){var l=n+o>>>1;t<e[l]?o=l:n=l+1}if(i=e[n],r=e[n-1],void 0===r)return this._cachedIndex=0,this.beforeStart_(0,t,i);if(void 0===i)return n=e.length,this._cachedIndex=n,this.afterEnd_(n-1,r,t)}this._cachedIndex=n,this.intervalChanged_(n,r,i)}return this.interpolate_(n,r,t,i)},settings:null,DefaultSettings_:{},getSettings_:function(){return this.settings||this.DefaultSettings_},copySampleValue_:function(t){for(var e=this.resultBuffer,n=this.sampleValues,i=this.valueSize,r=t*i,o=0;o!==i;++o)e[o]=n[r+o];return e},interpolate_:function(){throw new Error("call to abstract method")},intervalChanged_:function(){}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Kl.prototype,{beforeStart_:Kl.prototype.copySampleValue_,afterEnd_:Kl.prototype.copySampleValue_}),Ql.prototype=Object.assign(Object.create(Kl.prototype),{constructor:Ql,DefaultSettings_:{endingStart:ve,endingEnd:ve},intervalChanged_:function(t,e,n){var i=this.parameterPositions,r=t-2,o=t+1,a=i[r],s=i[o];if(void 0===a)switch(this.getSettings_().endingStart){case ge:r=t,a=2*e-n;break;case ye:r=i.length-2,a=e+i[r]-i[r+1];break;default:r=t,a=n}if(void 0===s)switch(this.getSettings_().endingEnd){case ge:o=t,s=2*n-e;break;case ye:o=1,s=n+i[1]-i[0];break;default:o=t-1,s=e}var l=.5*(n-e),c=this.valueSize;this._weightPrev=l/(e-a),this._weightNext=l/(s-n),this._offsetPrev=r*c,this._offsetNext=o*c},interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=this._offsetPrev,u=this._offsetNext,h=this._weightPrev,d=this._weightNext,p=(n-e)/(i-e),f=p*p,m=f*p,v=-h*m+2*h*f-h*p,g=(1+h)*m+(-1.5-2*h)*f+(-.5+h)*p+1,y=(-1-d)*m+(1.5+d)*f+.5*p,b=d*m-d*f,x=0;x!==a;++x)r[x]=v*o[c+x]+g*o[l+x]+y*o[s+x]+b*o[u+x];return r}}),tc.prototype=Object.assign(Object.create(Kl.prototype),{constructor:tc,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=s-a,c=(n-e)/(i-e),u=1-c,h=0;h!==a;++h)r[h]=o[l+h]*u+o[s+h]*c;return r}}),ec.prototype=Object.assign(Object.create(Kl.prototype),{constructor:ec,interpolate_:function(t){return this.copySampleValue_(t-1)}}),Object.assign(nc,{toJSON:function(t){var e,n=t.constructor;if(void 0!==n.toJSON)e=n.toJSON(t);else{e={name:t.name,times:Jl.convertArray(t.times,Array),values:Jl.convertArray(t.values,Array)};var i=t.getInterpolation();i!==t.DefaultInterpolation&&(e.interpolation=i)}return e.type=t.ValueTypeName,e}}),Object.assign(nc.prototype,{constructor:nc,TimeBufferType:Float32Array,ValueBufferType:Float32Array,DefaultInterpolation:fe,InterpolantFactoryMethodDiscrete:function(t){return new ec(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodLinear:function(t){return new tc(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:function(t){return new Ql(this.times,this.values,this.getValueSize(),t)},setInterpolation:function(t){var e;switch(t){case pe:e=this.InterpolantFactoryMethodDiscrete;break;case fe:e=this.InterpolantFactoryMethodLinear;break;case me:e=this.InterpolantFactoryMethodSmooth;break}if(void 0===e){var n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(n);this.setInterpolation(this.DefaultInterpolation)}return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=e,this},getInterpolation:function(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return pe;case this.InterpolantFactoryMethodLinear:return fe;case this.InterpolantFactoryMethodSmooth:return me}},getValueSize:function(){return this.values.length/this.times.length},shift:function(t){if(0!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]+=t;return this},scale:function(t){if(1!==t)for(var e=this.times,n=0,i=e.length;n!==i;++n)e[n]*=t;return this},trim:function(t,e){var n=this.times,i=n.length,r=0,o=i-1;while(r!==i&&n[r]<t)++r;while(-1!==o&&n[o]>e)--o;if(++o,0!==r||o!==i){r>=o&&(o=Math.max(o,1),r=o-1);var a=this.getValueSize();this.times=Jl.arraySlice(n,r,o),this.values=Jl.arraySlice(this.values,r*a,o*a)}return this},validate:function(){var t=!0,e=this.getValueSize();e-Math.floor(e)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);var n=this.times,i=this.values,r=n.length;0===r&&(console.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);for(var o=null,a=0;a!==r;a++){var s=n[a];if("number"===typeof s&&isNaN(s)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,s),t=!1;break}if(null!==o&&o>s){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,s,o),t=!1;break}o=s}if(void 0!==i&&Jl.isTypedArray(i)){a=0;for(var l=i.length;a!==l;++a){var c=i[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),t=!1;break}}}return t},optimize:function(){for(var t=this.times,e=this.values,n=this.getValueSize(),i=this.getInterpolation()===me,r=1,o=t.length-1,a=1;a<o;++a){var s=!1,l=t[a],c=t[a+1];if(l!==c&&(1!==a||l!==l[0]))if(i)s=!0;else for(var u=a*n,h=u-n,d=u+n,p=0;p!==n;++p){var f=e[u+p];if(f!==e[h+p]||f!==e[d+p]){s=!0;break}}if(s){if(a!==r){t[r]=t[a];var m=a*n,v=r*n;for(p=0;p!==n;++p)e[v+p]=e[m+p]}++r}}if(o>0){t[r]=t[o];for(m=o*n,v=r*n,p=0;p!==n;++p)e[v+p]=e[m+p];++r}return r!==t.length&&(this.times=Jl.arraySlice(t,0,r),this.values=Jl.arraySlice(e,0,r*n)),this},clone:function(){var t=Jl.arraySlice(this.times,0),e=Jl.arraySlice(this.values,0),n=this.constructor,i=new n(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}),ic.prototype=Object.assign(Object.create(nc.prototype),{constructor:ic,ValueTypeName:"bool",ValueBufferType:Array,DefaultInterpolation:pe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),rc.prototype=Object.assign(Object.create(nc.prototype),{constructor:rc,ValueTypeName:"color"}),oc.prototype=Object.assign(Object.create(nc.prototype),{constructor:oc,ValueTypeName:"number"}),ac.prototype=Object.assign(Object.create(Kl.prototype),{constructor:ac,interpolate_:function(t,e,n,i){for(var r=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=t*a,l=(n-e)/(i-e),c=s+a;s!==c;s+=4)Ie.slerpFlat(r,0,o,s-a,o,s,l);return r}}),sc.prototype=Object.assign(Object.create(nc.prototype),{constructor:sc,ValueTypeName:"quaternion",DefaultInterpolation:fe,InterpolantFactoryMethodLinear:function(t){return new ac(this.times,this.values,this.getValueSize(),t)},InterpolantFactoryMethodSmooth:void 0}),lc.prototype=Object.assign(Object.create(nc.prototype),{constructor:lc,ValueTypeName:"string",ValueBufferType:Array,DefaultInterpolation:pe,InterpolantFactoryMethodLinear:void 0,InterpolantFactoryMethodSmooth:void 0}),cc.prototype=Object.assign(Object.create(nc.prototype),{constructor:cc,ValueTypeName:"vector"}),Object.assign(uc,{parse:function(t){for(var e=[],n=t.tracks,i=1/(t.fps||1),r=0,o=n.length;r!==o;++r)e.push(dc(n[r]).scale(i));return new uc(t.name,t.duration,e)},toJSON:function(t){for(var e=[],n=t.tracks,i={name:t.name,duration:t.duration,tracks:e,uuid:t.uuid},r=0,o=n.length;r!==o;++r)e.push(nc.toJSON(n[r]));return i},CreateFromMorphTargetSequence:function(t,e,n,i){for(var r=e.length,o=[],a=0;a<r;a++){var s=[],l=[];s.push((a+r-1)%r,a,(a+1)%r),l.push(0,1,0);var c=Jl.getKeyframeOrder(s);s=Jl.sortedArray(s,1,c),l=Jl.sortedArray(l,1,c),i||0!==s[0]||(s.push(r),l.push(l[0])),o.push(new oc(".morphTargetInfluences["+e[a].name+"]",s,l).scale(1/n))}return new uc(t,-1,o)},findByName:function(t,e){var n=t;if(!Array.isArray(t)){var i=t;n=i.geometry&&i.geometry.animations||i.animations}for(var r=0;r<n.length;r++)if(n[r].name===e)return n[r];return null},CreateClipsFromMorphTargetSequences:function(t,e,n){for(var i={},r=/^([\w-]*?)([\d]+)$/,o=0,a=t.length;o<a;o++){var s=t[o],l=s.name.match(r);if(l&&l.length>1){var c=l[1],u=i[c];u||(i[c]=u=[]),u.push(s)}}var h=[];for(var c in i)h.push(uc.CreateFromMorphTargetSequence(c,i[c],e,n));return h},parseAnimation:function(t,e){if(!t)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;for(var n=function(t,e,n,i,r){if(0!==n.length){var o=[],a=[];Jl.flattenJSON(n,o,a,i),0!==o.length&&r.push(new t(e,o,a))}},i=[],r=t.name||"default",o=t.length||-1,a=t.fps||30,s=t.hierarchy||[],l=0;l<s.length;l++){var c=s[l].keys;if(c&&0!==c.length)if(c[0].morphTargets){for(var u={},h=0;h<c.length;h++)if(c[h].morphTargets)for(var d=0;d<c[h].morphTargets.length;d++)u[c[h].morphTargets[d]]=-1;for(var p in u){var f=[],m=[];for(d=0;d!==c[h].morphTargets.length;++d){var v=c[h];f.push(v.time),m.push(v.morphTarget===p?1:0)}i.push(new oc(".morphTargetInfluence["+p+"]",f,m))}o=u.length*(a||1)}else{var g=".bones["+e[l].name+"]";n(cc,g+".position",c,"pos",i),n(sc,g+".quaternion",c,"rot",i),n(cc,g+".scale",c,"scl",i)}}if(0===i.length)return null;var y=new uc(r,o,i);return y}}),Object.assign(uc.prototype,{resetDuration:function(){for(var t=this.tracks,e=0,n=0,i=t.length;n!==i;++n){var r=this.tracks[n];e=Math.max(e,r.times[r.times.length-1])}return this.duration=e,this},trim:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].trim(0,this.duration);return this},validate:function(){for(var t=!0,e=0;e<this.tracks.length;e++)t=t&&this.tracks[e].validate();return t},optimize:function(){for(var t=0;t<this.tracks.length;t++)this.tracks[t].optimize();return this},clone:function(){for(var t=[],e=0;e<this.tracks.length;e++)t.push(this.tracks[e].clone());return new uc(this.name,this.duration,t)}});var pc={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};function fc(t,e,n){var i=this,r=!1,o=0,a=0,s=void 0;this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=n,this.itemStart=function(t){a++,!1===r&&void 0!==i.onStart&&i.onStart(t,o,a),r=!0},this.itemEnd=function(t){o++,void 0!==i.onProgress&&i.onProgress(t,o,a),o===a&&(r=!1,void 0!==i.onLoad&&i.onLoad())},this.itemError=function(t){void 0!==i.onError&&i.onError(t)},this.resolveURL=function(t){return s?s(t):t},this.setURLModifier=function(t){return s=t,this}}var mc=new fc,vc={};function gc(t){this.manager=void 0!==t?t:mc}function yc(t){this.manager=void 0!==t?t:mc}function bc(t){this.manager=void 0!==t?t:mc,this._parser=null}function xc(t){this.manager=void 0!==t?t:mc,this._parser=null}function wc(t){this.manager=void 0!==t?t:mc}function _c(t){this.manager=void 0!==t?t:mc}function Mc(t){this.manager=void 0!==t?t:mc}function Ec(){this.type="Curve",this.arcLengthDivisions=200}function Sc(t,e,n,i,r,o,a,s){Ec.call(this),this.type="EllipseCurve",this.aX=t||0,this.aY=e||0,this.xRadius=n||1,this.yRadius=i||1,this.aStartAngle=r||0,this.aEndAngle=o||2*Math.PI,this.aClockwise=a||!1,this.aRotation=s||0}function Tc(t,e,n,i,r,o){Sc.call(this,t,e,n,n,i,r,o),this.type="ArcCurve"}function Ac(){var t=0,e=0,n=0,i=0;function r(r,o,a,s){t=r,e=a,n=-3*r+3*o-2*a-s,i=2*r-2*o+a+s}return{initCatmullRom:function(t,e,n,i,o){r(e,n,o*(n-t),o*(i-e))},initNonuniformCatmullRom:function(t,e,n,i,o,a,s){var l=(e-t)/o-(n-t)/(o+a)+(n-e)/a,c=(n-e)/a-(i-e)/(a+s)+(i-n)/s;l*=a,c*=a,r(e,n,l,c)},calc:function(r){var o=r*r,a=o*r;return t+e*r+n*o+i*a}}}Object.assign(gc.prototype,{load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=pc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;if(void 0===vc[t]){var a=/^data:(.*?)(;base64)?,(.*)$/,s=t.match(a);if(s){var l=s[1],c=!!s[2],u=s[3];u=decodeURIComponent(u),c&&(u=atob(u));try{var h,d=(this.responseType||"").toLowerCase();switch(d){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),f=0;f<u.length;f++)p[f]=u.charCodeAt(f);h="blob"===d?new Blob([p.buffer],{type:l}):p.buffer;break;case"document":var m=new DOMParser;h=m.parseFromString(u,l);break;case"json":h=JSON.parse(u);break;default:h=u;break}setTimeout(function(){e&&e(h),r.manager.itemEnd(t)},0)}catch(y){setTimeout(function(){i&&i(y),r.manager.itemError(t),r.manager.itemEnd(t)},0)}}else{vc[t]=[],vc[t].push({onLoad:e,onProgress:n,onError:i});var v=new XMLHttpRequest;for(var g in v.open("GET",t,!0),v.addEventListener("load",function(e){var n=this.response;pc.add(t,n);var i=vc[t];if(delete vc[t],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received.");for(var o=0,a=i.length;o<a;o++){var s=i[o];s.onLoad&&s.onLoad(n)}r.manager.itemEnd(t)}else{for(o=0,a=i.length;o<a;o++){s=i[o];s.onError&&s.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)}},!1),v.addEventListener("progress",function(e){for(var n=vc[t],i=0,r=n.length;i<r;i++){var o=n[i];o.onProgress&&o.onProgress(e)}},!1),v.addEventListener("error",function(e){var n=vc[t];delete vc[t];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),v.addEventListener("abort",function(e){var n=vc[t];delete vc[t];for(var i=0,o=n.length;i<o;i++){var a=n[i];a.onError&&a.onError(e)}r.manager.itemError(t),r.manager.itemEnd(t)},!1),void 0!==this.responseType&&(v.responseType=this.responseType),void 0!==this.withCredentials&&(v.withCredentials=this.withCredentials),v.overrideMimeType&&v.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)v.setRequestHeader(g,this.requestHeader[g]);v.send(null)}return r.manager.itemStart(t),v}vc[t].push({onLoad:e,onProgress:n,onError:i})},setPath:function(t){return this.path=t,this},setResponseType:function(t){return this.responseType=t,this},setWithCredentials:function(t){return this.withCredentials=t,this},setMimeType:function(t){return this.mimeType=t,this},setRequestHeader:function(t){return this.requestHeader=t,this}}),Object.assign(yc.prototype,{load:function(t,e,n,i){var r=this,o=new gc(r.manager);o.setPath(r.path),o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){for(var e=[],n=0;n<t.length;n++){var i=uc.parse(t[n]);e.push(i)}return e},setPath:function(t){return this.path=t,this}}),Object.assign(bc.prototype,{load:function(t,e,n,i){var r=this,o=[],a=new gs;a.image=o;var s=new gc(this.manager);function l(l){s.load(t[l],function(t){var n=r._parser(t,!0);o[l]={width:n.width,height:n.height,format:n.format,mipmaps:n.mipmaps},c+=1,6===c&&(1===n.mipmapCount&&(a.minFilter=yt),a.format=n.format,a.needsUpdate=!0,e&&e(a))},n,i)}if(s.setPath(this.path),s.setResponseType("arraybuffer"),Array.isArray(t))for(var c=0,u=0,h=t.length;u<h;++u)l(u);else s.load(t,function(t){var n=r._parser(t,!0);if(n.isCubemap)for(var i=n.mipmaps.length/n.mipmapCount,s=0;s<i;s++){o[s]={mipmaps:[]};for(var l=0;l<n.mipmapCount;l++)o[s].mipmaps.push(n.mipmaps[s*n.mipmapCount+l]),o[s].format=n.format,o[s].width=n.width,o[s].height=n.height}else a.image.width=n.width,a.image.height=n.height,a.mipmaps=n.mipmaps;1===n.mipmapCount&&(a.minFilter=yt),a.format=n.format,a.needsUpdate=!0,e&&e(a)},n,i);return a},setPath:function(t){return this.path=t,this}}),Object.assign(xc.prototype,{load:function(t,e,n,i){var r=this,o=new We,a=new gc(this.manager);return a.setResponseType("arraybuffer"),a.setPath(this.path),a.load(t,function(t){var n=r._parser(t);n&&(void 0!==n.image?o.image=n.image:void 0!==n.data&&(o.image.width=n.width,o.image.height=n.height,o.image.data=n.data),o.wrapS=void 0!==n.wrapS?n.wrapS:pt,o.wrapT=void 0!==n.wrapT?n.wrapT:pt,o.magFilter=void 0!==n.magFilter?n.magFilter:yt,o.minFilter=void 0!==n.minFilter?n.minFilter:xt,o.anisotropy=void 0!==n.anisotropy?n.anisotropy:1,void 0!==n.format&&(o.format=n.format),void 0!==n.type&&(o.type=n.type),void 0!==n.mipmaps&&(o.mipmaps=n.mipmaps),1===n.mipmapCount&&(o.minFilter=yt),o.needsUpdate=!0,e&&e(o,n))},n,i),o},setPath:function(t){return this.path=t,this}}),Object.assign(wc.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=pc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;var a=document.createElementNS("http://www.w3.org/1999/xhtml","img");function s(){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),pc.add(t,this),e&&e(this),r.manager.itemEnd(t)}function l(e){a.removeEventListener("load",s,!1),a.removeEventListener("error",l,!1),i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}return a.addEventListener("load",s,!1),a.addEventListener("error",l,!1),"data:"!==t.substr(0,5)&&void 0!==this.crossOrigin&&(a.crossOrigin=this.crossOrigin),r.manager.itemStart(t),a.src=t,a},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(_c.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=new co,o=new wc(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);var a=0;function s(n){o.load(t[n],function(t){r.images[n]=t,a++,6===a&&(r.needsUpdate=!0,e&&e(r))},void 0,i)}for(var l=0;l<t.length;++l)s(l);return r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Mc.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=new je,o=new wc(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(t,function(n){r.image=n;var i=t.search(/\.jpe?g($|\?)/i)>0||0===t.search(/^data\:image\/jpeg/);r.format=i?Dt:It,r.needsUpdate=!0,void 0!==e&&e(r)},n,i),r},setCrossOrigin:function(t){return this.crossOrigin=t,this},setPath:function(t){return this.path=t,this}}),Object.assign(Ec.prototype,{getPoint:function(){return console.warn("THREE.Curve: .getPoint() not implemented."),null},getPointAt:function(t,e){var n=this.getUtoTmapping(t);return this.getPoint(n,e)},getPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return e},getSpacedPoints:function(t){void 0===t&&(t=5);for(var e=[],n=0;n<=t;n++)e.push(this.getPointAt(n/t));return e},getLength:function(){var t=this.getLengths();return t[t.length-1]},getLengths:function(t){if(void 0===t&&(t=this.arcLengthDivisions),this.cacheArcLengths&&this.cacheArcLengths.length===t+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;var e,n,i=[],r=this.getPoint(0),o=0;for(i.push(0),n=1;n<=t;n++)e=this.getPoint(n/t),o+=e.distanceTo(r),i.push(o),r=e;return this.cacheArcLengths=i,i},updateArcLengths:function(){this.needsUpdate=!0,this.getLengths()},getUtoTmapping:function(t,e){var n,i=this.getLengths(),r=0,o=i.length;n=e||t*i[o-1];var a,s=0,l=o-1;while(s<=l)if(r=Math.floor(s+(l-s)/2),a=i[r]-n,a<0)s=r+1;else{if(!(a>0)){l=r;break}l=r-1}if(r=l,i[r]===n)return r/(o-1);var c=i[r],u=i[r+1],h=u-c,d=(n-c)/h,p=(r+d)/(o-1);return p},getTangent:function(t){var e=1e-4,n=t-e,i=t+e;n<0&&(n=0),i>1&&(i=1);var r=this.getPoint(n),o=this.getPoint(i),a=o.clone().sub(r);return a.normalize()},getTangentAt:function(t){var e=this.getUtoTmapping(t);return this.getTangent(e)},computeFrenetFrames:function(t,e){var n,i,r,o=new Ne,a=[],s=[],l=[],c=new Ne,u=new Ze;for(n=0;n<=t;n++)i=n/t,a[n]=this.getTangentAt(i),a[n].normalize();s[0]=new Ne,l[0]=new Ne;var h=Number.MAX_VALUE,d=Math.abs(a[0].x),p=Math.abs(a[0].y),f=Math.abs(a[0].z);for(d<=h&&(h=d,o.set(1,0,0)),p<=h&&(h=p,o.set(0,1,0)),f<=h&&o.set(0,0,1),c.crossVectors(a[0],o).normalize(),s[0].crossVectors(a[0],c),l[0].crossVectors(a[0],s[0]),n=1;n<=t;n++)s[n]=s[n-1].clone(),l[n]=l[n-1].clone(),c.crossVectors(a[n-1],a[n]),c.length()>Number.EPSILON&&(c.normalize(),r=Math.acos(ke.clamp(a[n-1].dot(a[n]),-1,1)),s[n].applyMatrix4(u.makeRotationAxis(c,r))),l[n].crossVectors(a[n],s[n]);if(!0===e)for(r=Math.acos(ke.clamp(s[0].dot(s[t]),-1,1)),r/=t,a[0].dot(c.crossVectors(s[0],s[t]))>0&&(r=-r),n=1;n<=t;n++)s[n].applyMatrix4(u.makeRotationAxis(a[n],r*n)),l[n].crossVectors(a[n],s[n]);return{tangents:a,normals:s,binormals:l}},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this},toJSON:function(){var t={metadata:{version:4.5,type:"Curve",generator:"Curve.toJSON"}};return t.arcLengthDivisions=this.arcLengthDivisions,t.type=this.type,t},fromJSON:function(t){return this.arcLengthDivisions=t.arcLengthDivisions,this}}),Sc.prototype=Object.create(Ec.prototype),Sc.prototype.constructor=Sc,Sc.prototype.isEllipseCurve=!0,Sc.prototype.getPoint=function(t,e){var n=e||new De,i=2*Math.PI,r=this.aEndAngle-this.aStartAngle,o=Math.abs(r)<Number.EPSILON;while(r<0)r+=i;while(r>i)r-=i;r<Number.EPSILON&&(r=o?0:i),!0!==this.aClockwise||o||(r===i?r=-i:r-=i);var a=this.aStartAngle+t*r,s=this.aX+this.xRadius*Math.cos(a),l=this.aY+this.yRadius*Math.sin(a);if(0!==this.aRotation){var c=Math.cos(this.aRotation),u=Math.sin(this.aRotation),h=s-this.aX,d=l-this.aY;s=h*c-d*u+this.aX,l=h*u+d*c+this.aY}return n.set(s,l)},Sc.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Sc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.aX=this.aX,t.aY=this.aY,t.xRadius=this.xRadius,t.yRadius=this.yRadius,t.aStartAngle=this.aStartAngle,t.aEndAngle=this.aEndAngle,t.aClockwise=this.aClockwise,t.aRotation=this.aRotation,t},Sc.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.aX=t.aX,this.aY=t.aY,this.xRadius=t.xRadius,this.yRadius=t.yRadius,this.aStartAngle=t.aStartAngle,this.aEndAngle=t.aEndAngle,this.aClockwise=t.aClockwise,this.aRotation=t.aRotation,this},Tc.prototype=Object.create(Sc.prototype),Tc.prototype.constructor=Tc,Tc.prototype.isArcCurve=!0;var Cc=new Ne,Lc=new Ac,Pc=new Ac,Oc=new Ac;function Rc(t,e,n,i){Ec.call(this),this.type="CatmullRomCurve3",this.points=t||[],this.closed=e||!1,this.curveType=n||"centripetal",this.tension=i||.5}function kc(t,e,n,i,r){var o=.5*(i-e),a=.5*(r-n),s=t*t,l=t*s;return(2*n-2*i+o+a)*l+(-3*n+3*i-2*o-a)*s+o*t+n}function Dc(t,e){var n=1-t;return n*n*e}function Ic(t,e){return 2*(1-t)*t*e}function Nc(t,e){return t*t*e}function zc(t,e,n,i){return Dc(t,e)+Ic(t,n)+Nc(t,i)}function Bc(t,e){var n=1-t;return n*n*n*e}function Fc(t,e){var n=1-t;return 3*n*n*t*e}function jc(t,e){return 3*(1-t)*t*t*e}function Hc(t,e){return t*t*t*e}function Uc(t,e,n,i,r){return Bc(t,e)+Fc(t,n)+jc(t,i)+Hc(t,r)}function Vc(t,e,n,i){Ec.call(this),this.type="CubicBezierCurve",this.v0=t||new De,this.v1=e||new De,this.v2=n||new De,this.v3=i||new De}function Gc(t,e,n,i){Ec.call(this),this.type="CubicBezierCurve3",this.v0=t||new Ne,this.v1=e||new Ne,this.v2=n||new Ne,this.v3=i||new Ne}function Wc(t,e){Ec.call(this),this.type="LineCurve",this.v1=t||new De,this.v2=e||new De}function $c(t,e){Ec.call(this),this.type="LineCurve3",this.v1=t||new Ne,this.v2=e||new Ne}function qc(t,e,n){Ec.call(this),this.type="QuadraticBezierCurve",this.v0=t||new De,this.v1=e||new De,this.v2=n||new De}function Yc(t,e,n){Ec.call(this),this.type="QuadraticBezierCurve3",this.v0=t||new Ne,this.v1=e||new Ne,this.v2=n||new Ne}function Xc(t){Ec.call(this),this.type="SplineCurve",this.points=t||[]}Rc.prototype=Object.create(Ec.prototype),Rc.prototype.constructor=Rc,Rc.prototype.isCatmullRomCurve3=!0,Rc.prototype.getPoint=function(t,e){var n,i,r,o,a=e||new Ne,s=this.points,l=s.length,c=(l-(this.closed?0:1))*t,u=Math.floor(c),h=c-u;if(this.closed?u+=u>0?0:(Math.floor(Math.abs(u)/l)+1)*l:0===h&&u===l-1&&(u=l-2,h=1),this.closed||u>0?n=s[(u-1)%l]:(Cc.subVectors(s[0],s[1]).add(s[0]),n=Cc),i=s[u%l],r=s[(u+1)%l],this.closed||u+2<l?o=s[(u+2)%l]:(Cc.subVectors(s[l-1],s[l-2]).add(s[l-1]),o=Cc),"centripetal"===this.curveType||"chordal"===this.curveType){var d="chordal"===this.curveType?.5:.25,p=Math.pow(n.distanceToSquared(i),d),f=Math.pow(i.distanceToSquared(r),d),m=Math.pow(r.distanceToSquared(o),d);f<1e-4&&(f=1),p<1e-4&&(p=f),m<1e-4&&(m=f),Lc.initNonuniformCatmullRom(n.x,i.x,r.x,o.x,p,f,m),Pc.initNonuniformCatmullRom(n.y,i.y,r.y,o.y,p,f,m),Oc.initNonuniformCatmullRom(n.z,i.z,r.z,o.z,p,f,m)}else"catmullrom"===this.curveType&&(Lc.initCatmullRom(n.x,i.x,r.x,o.x,this.tension),Pc.initCatmullRom(n.y,i.y,r.y,o.y,this.tension),Oc.initCatmullRom(n.z,i.z,r.z,o.z,this.tension));return a.set(Lc.calc(h),Pc.calc(h),Oc.calc(h)),a},Rc.prototype.copy=function(t){Ec.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Rc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t.closed=this.closed,t.curveType=this.curveType,t.tension=this.tension,t},Rc.prototype.fromJSON=function(t){Ec.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new Ne).fromArray(i))}return this.closed=t.closed,this.curveType=t.curveType,this.tension=t.tension,this},Vc.prototype=Object.create(Ec.prototype),Vc.prototype.constructor=Vc,Vc.prototype.isCubicBezierCurve=!0,Vc.prototype.getPoint=function(t,e){var n=e||new De,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Uc(t,i.x,r.x,o.x,a.x),Uc(t,i.y,r.y,o.y,a.y)),n},Vc.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Vc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Vc.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Gc.prototype=Object.create(Ec.prototype),Gc.prototype.constructor=Gc,Gc.prototype.isCubicBezierCurve3=!0,Gc.prototype.getPoint=function(t,e){var n=e||new Ne,i=this.v0,r=this.v1,o=this.v2,a=this.v3;return n.set(Uc(t,i.x,r.x,o.x,a.x),Uc(t,i.y,r.y,o.y,a.y),Uc(t,i.z,r.z,o.z,a.z)),n},Gc.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this.v3.copy(t.v3),this},Gc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t.v3=this.v3.toArray(),t},Gc.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this.v3.fromArray(t.v3),this},Wc.prototype=Object.create(Ec.prototype),Wc.prototype.constructor=Wc,Wc.prototype.isLineCurve=!0,Wc.prototype.getPoint=function(t,e){var n=e||new De;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},Wc.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},Wc.prototype.getTangent=function(){var t=this.v2.clone().sub(this.v1);return t.normalize()},Wc.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Wc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Wc.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},$c.prototype=Object.create(Ec.prototype),$c.prototype.constructor=$c,$c.prototype.isLineCurve3=!0,$c.prototype.getPoint=function(t,e){var n=e||new Ne;return 1===t?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(t).add(this.v1)),n},$c.prototype.getPointAt=function(t,e){return this.getPoint(t,e)},$c.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.v1.copy(t.v1),this.v2.copy(t.v2),this},$c.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},$c.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},qc.prototype=Object.create(Ec.prototype),qc.prototype.constructor=qc,qc.prototype.isQuadraticBezierCurve=!0,qc.prototype.getPoint=function(t,e){var n=e||new De,i=this.v0,r=this.v1,o=this.v2;return n.set(zc(t,i.x,r.x,o.x),zc(t,i.y,r.y,o.y)),n},qc.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},qc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},qc.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Yc.prototype=Object.create(Ec.prototype),Yc.prototype.constructor=Yc,Yc.prototype.isQuadraticBezierCurve3=!0,Yc.prototype.getPoint=function(t,e){var n=e||new Ne,i=this.v0,r=this.v1,o=this.v2;return n.set(zc(t,i.x,r.x,o.x),zc(t,i.y,r.y,o.y),zc(t,i.z,r.z,o.z)),n},Yc.prototype.copy=function(t){return Ec.prototype.copy.call(this,t),this.v0.copy(t.v0),this.v1.copy(t.v1),this.v2.copy(t.v2),this},Yc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);return t.v0=this.v0.toArray(),t.v1=this.v1.toArray(),t.v2=this.v2.toArray(),t},Yc.prototype.fromJSON=function(t){return Ec.prototype.fromJSON.call(this,t),this.v0.fromArray(t.v0),this.v1.fromArray(t.v1),this.v2.fromArray(t.v2),this},Xc.prototype=Object.create(Ec.prototype),Xc.prototype.constructor=Xc,Xc.prototype.isSplineCurve=!0,Xc.prototype.getPoint=function(t,e){var n=e||new De,i=this.points,r=(i.length-1)*t,o=Math.floor(r),a=r-o,s=i[0===o?o:o-1],l=i[o],c=i[o>i.length-2?i.length-1:o+1],u=i[o>i.length-3?i.length-1:o+2];return n.set(kc(a,s.x,l.x,c.x,u.x),kc(a,s.y,l.y,c.y,u.y)),n},Xc.prototype.copy=function(t){Ec.prototype.copy.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push(i.clone())}return this},Xc.prototype.toJSON=function(){var t=Ec.prototype.toJSON.call(this);t.points=[];for(var e=0,n=this.points.length;e<n;e++){var i=this.points[e];t.points.push(i.toArray())}return t},Xc.prototype.fromJSON=function(t){Ec.prototype.fromJSON.call(this,t),this.points=[];for(var e=0,n=t.points.length;e<n;e++){var i=t.points[e];this.points.push((new De).fromArray(i))}return this};var Zc=Object.freeze({ArcCurve:Tc,CatmullRomCurve3:Rc,CubicBezierCurve:Vc,CubicBezierCurve3:Gc,EllipseCurve:Sc,LineCurve:Wc,LineCurve3:$c,QuadraticBezierCurve:qc,QuadraticBezierCurve3:Yc,SplineCurve:Xc});function Jc(){Ec.call(this),this.type="CurvePath",this.curves=[],this.autoClose=!1}function Kc(t){Jc.call(this),this.type="Path",this.currentPoint=new De,t&&this.setFromPoints(t)}function Qc(t){Kc.call(this,t),this.uuid=ke.generateUUID(),this.type="Shape",this.holes=[]}function tu(t,e){_r.call(this),this.type="Light",this.color=new pr(t),this.intensity=void 0!==e?e:1,this.receiveShadow=void 0}function eu(t,e,n){tu.call(this,t,n),this.type="HemisphereLight",this.castShadow=void 0,this.position.copy(_r.DefaultUp),this.updateMatrix(),this.groundColor=new pr(e)}function nu(t){this.camera=t,this.bias=0,this.radius=1,this.mapSize=new De(512,512),this.map=null,this.matrix=new Ze}function iu(){nu.call(this,new Ga(50,1,.5,500))}function ru(t,e,n,i,r,o){tu.call(this,t,e),this.type="SpotLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,Object.defineProperty(this,"power",{get:function(){return this.intensity*Math.PI},set:function(t){this.intensity=t/Math.PI}}),this.distance=void 0!==n?n:0,this.angle=void 0!==i?i:Math.PI/3,this.penumbra=void 0!==r?r:0,this.decay=void 0!==o?o:1,this.shadow=new iu}function ou(t,e,n,i){tu.call(this,t,e),this.type="PointLight",Object.defineProperty(this,"power",{get:function(){return 4*this.intensity*Math.PI},set:function(t){this.intensity=t/(4*Math.PI)}}),this.distance=void 0!==n?n:0,this.decay=void 0!==i?i:1,this.shadow=new nu(new Ga(90,1,.5,500))}function au(t,e,n,i,r,o){Va.call(this),this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=void 0!==t?t:-1,this.right=void 0!==e?e:1,this.top=void 0!==n?n:1,this.bottom=void 0!==i?i:-1,this.near=void 0!==r?r:.1,this.far=void 0!==o?o:2e3,this.updateProjectionMatrix()}function su(){nu.call(this,new au(-5,5,5,-5,.5,500))}function lu(t,e){tu.call(this,t,e),this.type="DirectionalLight",this.position.copy(_r.DefaultUp),this.updateMatrix(),this.target=new _r,this.shadow=new su}function cu(t,e){tu.call(this,t,e),this.type="AmbientLight",this.castShadow=void 0}function uu(t,e,n,i){tu.call(this,t,e),this.type="RectAreaLight",this.width=void 0!==n?n:10,this.height=void 0!==i?i:10}function hu(t){this.manager=void 0!==t?t:mc,this.textures={}}Jc.prototype=Object.assign(Object.create(Ec.prototype),{constructor:Jc,add:function(t){this.curves.push(t)},closePath:function(){var t=this.curves[0].getPoint(0),e=this.curves[this.curves.length-1].getPoint(1);t.equals(e)||this.curves.push(new Wc(e,t))},getPoint:function(t){var e=t*this.getLength(),n=this.getCurveLengths(),i=0;while(i<n.length){if(n[i]>=e){var r=n[i]-e,o=this.curves[i],a=o.getLength(),s=0===a?0:1-r/a;return o.getPointAt(s)}i++}return null},getLength:function(){var t=this.getCurveLengths();return t[t.length-1]},updateArcLengths:function(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()},getCurveLengths:function(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;for(var t=[],e=0,n=0,i=this.curves.length;n<i;n++)e+=this.curves[n].getLength(),t.push(e);return this.cacheLengths=t,t},getSpacedPoints:function(t){void 0===t&&(t=40);for(var e=[],n=0;n<=t;n++)e.push(this.getPoint(n/t));return this.autoClose&&e.push(e[0]),e},getPoints:function(t){t=t||12;for(var e,n=[],i=0,r=this.curves;i<r.length;i++)for(var o=r[i],a=o&&o.isEllipseCurve?2*t:o&&(o.isLineCurve||o.isLineCurve3)?1:o&&o.isSplineCurve?t*o.points.length:t,s=o.getPoints(a),l=0;l<s.length;l++){var c=s[l];e&&e.equals(c)||(n.push(c),e=c)}return this.autoClose&&n.length>1&&!n[n.length-1].equals(n[0])&&n.push(n[0]),n},copy:function(t){Ec.prototype.copy.call(this,t),this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push(i.clone())}return this.autoClose=t.autoClose,this},toJSON:function(){var t=Ec.prototype.toJSON.call(this);t.autoClose=this.autoClose,t.curves=[];for(var e=0,n=this.curves.length;e<n;e++){var i=this.curves[e];t.curves.push(i.toJSON())}return t},fromJSON:function(t){Ec.prototype.fromJSON.call(this,t),this.autoClose=t.autoClose,this.curves=[];for(var e=0,n=t.curves.length;e<n;e++){var i=t.curves[e];this.curves.push((new Zc[i.type]).fromJSON(i))}return this}}),Kc.prototype=Object.assign(Object.create(Jc.prototype),{constructor:Kc,setFromPoints:function(t){this.moveTo(t[0].x,t[0].y);for(var e=1,n=t.length;e<n;e++)this.lineTo(t[e].x,t[e].y)},moveTo:function(t,e){this.currentPoint.set(t,e)},lineTo:function(t,e){var n=new Wc(this.currentPoint.clone(),new De(t,e));this.curves.push(n),this.currentPoint.set(t,e)},quadraticCurveTo:function(t,e,n,i){var r=new qc(this.currentPoint.clone(),new De(t,e),new De(n,i));this.curves.push(r),this.currentPoint.set(n,i)},bezierCurveTo:function(t,e,n,i,r,o){var a=new Vc(this.currentPoint.clone(),new De(t,e),new De(n,i),new De(r,o));this.curves.push(a),this.currentPoint.set(r,o)},splineThru:function(t){var e=[this.currentPoint.clone()].concat(t),n=new Xc(e);this.curves.push(n),this.currentPoint.copy(t[t.length-1])},arc:function(t,e,n,i,r,o){var a=this.currentPoint.x,s=this.currentPoint.y;this.absarc(t+a,e+s,n,i,r,o)},absarc:function(t,e,n,i,r,o){this.absellipse(t,e,n,n,i,r,o)},ellipse:function(t,e,n,i,r,o,a,s){var l=this.currentPoint.x,c=this.currentPoint.y;this.absellipse(t+l,e+c,n,i,r,o,a,s)},absellipse:function(t,e,n,i,r,o,a,s){var l=new Sc(t,e,n,i,r,o,a,s);if(this.curves.length>0){var c=l.getPoint(0);c.equals(this.currentPoint)||this.lineTo(c.x,c.y)}this.curves.push(l);var u=l.getPoint(1);this.currentPoint.copy(u)},copy:function(t){return Jc.prototype.copy.call(this,t),this.currentPoint.copy(t.currentPoint),this},toJSON:function(){var t=Jc.prototype.toJSON.call(this);return t.currentPoint=this.currentPoint.toArray(),t},fromJSON:function(t){return Jc.prototype.fromJSON.call(this,t),this.currentPoint.fromArray(t.currentPoint),this}}),Qc.prototype=Object.assign(Object.create(Kc.prototype),{constructor:Qc,getPointsHoles:function(t){for(var e=[],n=0,i=this.holes.length;n<i;n++)e[n]=this.holes[n].getPoints(t);return e},extractPoints:function(t){return{shape:this.getPoints(t),holes:this.getPointsHoles(t)}},copy:function(t){Kc.prototype.copy.call(this,t),this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push(i.clone())}return this},toJSON:function(){var t=Kc.prototype.toJSON.call(this);t.uuid=this.uuid,t.holes=[];for(var e=0,n=this.holes.length;e<n;e++){var i=this.holes[e];t.holes.push(i.toJSON())}return t},fromJSON:function(t){Kc.prototype.fromJSON.call(this,t),this.uuid=t.uuid,this.holes=[];for(var e=0,n=t.holes.length;e<n;e++){var i=t.holes[e];this.holes.push((new Kc).fromJSON(i))}return this}}),tu.prototype=Object.assign(Object.create(_r.prototype),{constructor:tu,isLight:!0,copy:function(t){return _r.prototype.copy.call(this,t),this.color.copy(t.color),this.intensity=t.intensity,this},toJSON:function(t){var e=_r.prototype.toJSON.call(this,t);return e.object.color=this.color.getHex(),e.object.intensity=this.intensity,void 0!==this.groundColor&&(e.object.groundColor=this.groundColor.getHex()),void 0!==this.distance&&(e.object.distance=this.distance),void 0!==this.angle&&(e.object.angle=this.angle),void 0!==this.decay&&(e.object.decay=this.decay),void 0!==this.penumbra&&(e.object.penumbra=this.penumbra),void 0!==this.shadow&&(e.object.shadow=this.shadow.toJSON()),e}}),eu.prototype=Object.assign(Object.create(tu.prototype),{constructor:eu,isHemisphereLight:!0,copy:function(t){return tu.prototype.copy.call(this,t),this.groundColor.copy(t.groundColor),this}}),Object.assign(nu.prototype,{copy:function(t){return this.camera=t.camera.clone(),this.bias=t.bias,this.radius=t.radius,this.mapSize.copy(t.mapSize),this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t={};return 0!==this.bias&&(t.bias=this.bias),1!==this.radius&&(t.radius=this.radius),512===this.mapSize.x&&512===this.mapSize.y||(t.mapSize=this.mapSize.toArray()),t.camera=this.camera.toJSON(!1).object,delete t.camera.matrix,t}}),iu.prototype=Object.assign(Object.create(nu.prototype),{constructor:iu,isSpotLightShadow:!0,update:function(t){var e=this.camera,n=2*ke.RAD2DEG*t.angle,i=this.mapSize.width/this.mapSize.height,r=t.distance||e.far;n===e.fov&&i===e.aspect&&r===e.far||(e.fov=n,e.aspect=i,e.far=r,e.updateProjectionMatrix())}}),ru.prototype=Object.assign(Object.create(tu.prototype),{constructor:ru,isSpotLight:!0,copy:function(t){return tu.prototype.copy.call(this,t),this.distance=t.distance,this.angle=t.angle,this.penumbra=t.penumbra,this.decay=t.decay,this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),ou.prototype=Object.assign(Object.create(tu.prototype),{constructor:ou,isPointLight:!0,copy:function(t){return tu.prototype.copy.call(this,t),this.distance=t.distance,this.decay=t.decay,this.shadow=t.shadow.clone(),this}}),au.prototype=Object.assign(Object.create(Va.prototype),{constructor:au,isOrthographicCamera:!0,copy:function(t,e){return Va.prototype.copy.call(this,t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this},setViewOffset:function(t,e,n,i,r,o){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=n,this.view.offsetY=i,this.view.width=r,this.view.height=o,this.updateProjectionMatrix()},clearViewOffset:function(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()},updateProjectionMatrix:function(){var t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,i=(this.top+this.bottom)/2,r=n-t,o=n+t,a=i+e,s=i-e;if(null!==this.view&&this.view.enabled){var l=this.zoom/(this.view.width/this.view.fullWidth),c=this.zoom/(this.view.height/this.view.fullHeight),u=(this.right-this.left)/this.view.width,h=(this.top-this.bottom)/this.view.height;r+=u*(this.view.offsetX/l),o=r+u*(this.view.width/l),a-=h*(this.view.offsetY/c),s=a-h*(this.view.height/c)}this.projectionMatrix.makeOrthographic(r,o,a,s,this.near,this.far),this.projectionMatrixInverse.getInverse(this.projectionMatrix)},toJSON:function(t){var e=_r.prototype.toJSON.call(this,t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}),su.prototype=Object.assign(Object.create(nu.prototype),{constructor:su}),lu.prototype=Object.assign(Object.create(tu.prototype),{constructor:lu,isDirectionalLight:!0,copy:function(t){return tu.prototype.copy.call(this,t),this.target=t.target.clone(),this.shadow=t.shadow.clone(),this}}),cu.prototype=Object.assign(Object.create(tu.prototype),{constructor:cu,isAmbientLight:!0}),uu.prototype=Object.assign(Object.create(tu.prototype),{constructor:uu,isRectAreaLight:!0,copy:function(t){return tu.prototype.copy.call(this,t),this.width=t.width,this.height=t.height,this},toJSON:function(t){var e=tu.prototype.toJSON.call(this,t);return e.object.width=this.width,e.object.height=this.height,e}}),Object.assign(hu.prototype,{load:function(t,e,n,i){var r=this,o=new gc(r.manager);o.setPath(r.path),o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=this.textures;function n(t){return void 0===e[t]&&console.warn("THREE.MaterialLoader: Undefined texture",t),e[t]}var i=new Zl[t.type];if(void 0!==t.uuid&&(i.uuid=t.uuid),void 0!==t.name&&(i.name=t.name),void 0!==t.color&&i.color.setHex(t.color),void 0!==t.roughness&&(i.roughness=t.roughness),void 0!==t.metalness&&(i.metalness=t.metalness),void 0!==t.emissive&&i.emissive.setHex(t.emissive),void 0!==t.specular&&i.specular.setHex(t.specular),void 0!==t.shininess&&(i.shininess=t.shininess),void 0!==t.clearCoat&&(i.clearCoat=t.clearCoat),void 0!==t.clearCoatRoughness&&(i.clearCoatRoughness=t.clearCoatRoughness),void 0!==t.vertexColors&&(i.vertexColors=t.vertexColors),void 0!==t.fog&&(i.fog=t.fog),void 0!==t.flatShading&&(i.flatShading=t.flatShading),void 0!==t.blending&&(i.blending=t.blending),void 0!==t.combine&&(i.combine=t.combine),void 0!==t.side&&(i.side=t.side),void 0!==t.opacity&&(i.opacity=t.opacity),void 0!==t.transparent&&(i.transparent=t.transparent),void 0!==t.alphaTest&&(i.alphaTest=t.alphaTest),void 0!==t.depthTest&&(i.depthTest=t.depthTest),void 0!==t.depthWrite&&(i.depthWrite=t.depthWrite),void 0!==t.colorWrite&&(i.colorWrite=t.colorWrite),void 0!==t.wireframe&&(i.wireframe=t.wireframe),void 0!==t.wireframeLinewidth&&(i.wireframeLinewidth=t.wireframeLinewidth),void 0!==t.wireframeLinecap&&(i.wireframeLinecap=t.wireframeLinecap),void 0!==t.wireframeLinejoin&&(i.wireframeLinejoin=t.wireframeLinejoin),void 0!==t.rotation&&(i.rotation=t.rotation),1!==t.linewidth&&(i.linewidth=t.linewidth),void 0!==t.dashSize&&(i.dashSize=t.dashSize),void 0!==t.gapSize&&(i.gapSize=t.gapSize),void 0!==t.scale&&(i.scale=t.scale),void 0!==t.polygonOffset&&(i.polygonOffset=t.polygonOffset),void 0!==t.polygonOffsetFactor&&(i.polygonOffsetFactor=t.polygonOffsetFactor),void 0!==t.polygonOffsetUnits&&(i.polygonOffsetUnits=t.polygonOffsetUnits),void 0!==t.skinning&&(i.skinning=t.skinning),void 0!==t.morphTargets&&(i.morphTargets=t.morphTargets),void 0!==t.dithering&&(i.dithering=t.dithering),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.uniforms)for(var r in t.uniforms){var o=t.uniforms[r];switch(i.uniforms[r]={},o.type){case"t":i.uniforms[r].value=n(o.value);break;case"c":i.uniforms[r].value=(new pr).setHex(o.value);break;case"v2":i.uniforms[r].value=(new De).fromArray(o.value);break;case"v3":i.uniforms[r].value=(new Ne).fromArray(o.value);break;case"v4":i.uniforms[r].value=(new He).fromArray(o.value);break;case"m3":i.uniforms[r].value=(new ze).fromArray(o.value);case"m4":i.uniforms[r].value=(new Ze).fromArray(o.value);break;default:i.uniforms[r].value=o.value}}if(void 0!==t.defines&&(i.defines=t.defines),void 0!==t.vertexShader&&(i.vertexShader=t.vertexShader),void 0!==t.fragmentShader&&(i.fragmentShader=t.fragmentShader),void 0!==t.extensions)for(var a in t.extensions)i.extensions[a]=t.extensions[a];if(void 0!==t.shading&&(i.flatShading=1===t.shading),void 0!==t.size&&(i.size=t.size),void 0!==t.sizeAttenuation&&(i.sizeAttenuation=t.sizeAttenuation),void 0!==t.map&&(i.map=n(t.map)),void 0!==t.matcap&&(i.matcap=n(t.matcap)),void 0!==t.alphaMap&&(i.alphaMap=n(t.alphaMap),i.transparent=!0),void 0!==t.bumpMap&&(i.bumpMap=n(t.bumpMap)),void 0!==t.bumpScale&&(i.bumpScale=t.bumpScale),void 0!==t.normalMap&&(i.normalMap=n(t.normalMap)),void 0!==t.normalMapType&&(i.normalMapType=t.normalMapType),void 0!==t.normalScale){var s=t.normalScale;!1===Array.isArray(s)&&(s=[s,s]),i.normalScale=(new De).fromArray(s)}return void 0!==t.displacementMap&&(i.displacementMap=n(t.displacementMap)),void 0!==t.displacementScale&&(i.displacementScale=t.displacementScale),void 0!==t.displacementBias&&(i.displacementBias=t.displacementBias),void 0!==t.roughnessMap&&(i.roughnessMap=n(t.roughnessMap)),void 0!==t.metalnessMap&&(i.metalnessMap=n(t.metalnessMap)),void 0!==t.emissiveMap&&(i.emissiveMap=n(t.emissiveMap)),void 0!==t.emissiveIntensity&&(i.emissiveIntensity=t.emissiveIntensity),void 0!==t.specularMap&&(i.specularMap=n(t.specularMap)),void 0!==t.envMap&&(i.envMap=n(t.envMap)),void 0!==t.envMapIntensity&&(i.envMapIntensity=t.envMapIntensity),void 0!==t.reflectivity&&(i.reflectivity=t.reflectivity),void 0!==t.lightMap&&(i.lightMap=n(t.lightMap)),void 0!==t.lightMapIntensity&&(i.lightMapIntensity=t.lightMapIntensity),void 0!==t.aoMap&&(i.aoMap=n(t.aoMap)),void 0!==t.aoMapIntensity&&(i.aoMapIntensity=t.aoMapIntensity),void 0!==t.gradientMap&&(i.gradientMap=n(t.gradientMap)),i},setPath:function(t){return this.path=t,this},setTextures:function(t){return this.textures=t,this}});var du={decodeText:function(t){if("undefined"!==typeof TextDecoder)return(new TextDecoder).decode(t);for(var e="",n=0,i=t.length;n<i;n++)e+=String.fromCharCode(t[n]);try{return decodeURIComponent(escape(e))}catch(r){return e}},extractUrlBase:function(t){var e=t.lastIndexOf("/");return-1===e?"./":t.substr(0,e+1)}};function pu(){Br.call(this),this.type="InstancedBufferGeometry",this.maxInstancedCount=void 0}function fu(t,e,n,i){"number"===typeof n&&(i=n,n=!1,console.error("THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.")),Sr.call(this,t,e,n),this.meshPerAttribute=i||1}function mu(t){this.manager=void 0!==t?t:mc}pu.prototype=Object.assign(Object.create(Br.prototype),{constructor:pu,isInstancedBufferGeometry:!0,copy:function(t){return Br.prototype.copy.call(this,t),this.maxInstancedCount=t.maxInstancedCount,this},clone:function(){return(new this.constructor).copy(this)},toJSON:function(){var t=Br.prototype.toJSON.call(this);return t.maxInstancedCount=this.maxInstancedCount,t.isInstancedBufferGeometry=!0,t}}),fu.prototype=Object.assign(Object.create(Sr.prototype),{constructor:fu,isInstancedBufferAttribute:!0,copy:function(t){return Sr.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this},toJSON:function(){var t=Sr.prototype.toJSON.call(this);return t.meshPerAttribute=this.meshPerAttribute,t.isInstancedBufferAttribute=!0,t}}),Object.assign(mu.prototype,{load:function(t,e,n,i){var r=this,o=new gc(r.manager);o.setPath(r.path),o.load(t,function(t){e(r.parse(JSON.parse(t)))},n,i)},parse:function(t){var e=t.isInstancedBufferGeometry?new pu:new Br,n=t.data.index;if(void 0!==n){var i=new vu[n.type](n.array);e.setIndex(new Sr(i,1))}var r=t.data.attributes;for(var o in r){var a=r[o],s=(i=new vu[a.type](a.array),a.isInstancedBufferAttribute?fu:Sr),l=new s(i,a.itemSize,a.normalized);void 0!==a.name&&(l.name=a.name),e.addAttribute(o,l)}var c=t.data.morphAttributes;if(c)for(var o in c){for(var u=c[o],h=[],d=0,p=u.length;d<p;d++){a=u[d],i=new vu[a.type](a.array),l=new Sr(i,a.itemSize,a.normalized);void 0!==a.name&&(l.name=a.name),h.push(l)}e.morphAttributes[o]=h}var f=t.data.groups||t.data.drawcalls||t.data.offsets;if(void 0!==f){d=0;for(var m=f.length;d!==m;++d){var v=f[d];e.addGroup(v.start,v.count,v.materialIndex)}}var g=t.data.boundingSphere;if(void 0!==g){var y=new Ne;void 0!==g.center&&y.fromArray(g.center),e.boundingSphere=new qe(y,g.radius)}return t.name&&(e.name=t.name),t.userData&&(e.userData=t.userData),e},setPath:function(t){return this.path=t,this}});var vu={Int8Array:Int8Array,Uint8Array:Uint8Array,Uint8ClampedArray:"undefined"!==typeof Uint8ClampedArray?Uint8ClampedArray:Uint8Array,Int16Array:Int16Array,Uint16Array:Uint16Array,Int32Array:Int32Array,Uint32Array:Uint32Array,Float32Array:Float32Array,Float64Array:Float64Array};function gu(t){this.manager=void 0!==t?t:mc,this.resourcePath=""}Object.assign(gu.prototype,{crossOrigin:"anonymous",load:function(t,e,n,i){var r=this,o=void 0===this.path?du.extractUrlBase(t):this.path;this.resourcePath=this.resourcePath||o;var a=new gc(r.manager);a.setPath(this.path),a.load(t,function(n){var o=null;try{o=JSON.parse(n)}catch(s){return void 0!==i&&i(s),void console.error("THREE:ObjectLoader: Can't parse "+t+".",s.message)}var a=o.metadata;void 0!==a&&void 0!==a.type&&"geometry"!==a.type.toLowerCase()?r.parse(o,e):console.error("THREE.ObjectLoader: Can't load "+t)},n,i)},setPath:function(t){return this.path=t,this},setResourcePath:function(t){return this.resourcePath=t,this},setCrossOrigin:function(t){return this.crossOrigin=t,this},parse:function(t,e){var n=this.parseShape(t.shapes),i=this.parseGeometries(t.geometries,n),r=this.parseImages(t.images,function(){void 0!==e&&e(s)}),o=this.parseTextures(t.textures,r),a=this.parseMaterials(t.materials,o),s=this.parseObject(t.object,i,a);return t.animations&&(s.animations=this.parseAnimations(t.animations)),void 0!==t.images&&0!==t.images.length||void 0!==e&&e(s),s},parseShape:function(t){var e={};if(void 0!==t)for(var n=0,i=t.length;n<i;n++){var r=(new Qc).fromJSON(t[n]);e[r.uuid]=r}return e},parseGeometries:function(t,e){var n={};if(void 0!==t)for(var i=new mu,r=0,o=t.length;r<o;r++){var a,s=t[r];switch(s.type){case"PlaneGeometry":case"PlaneBufferGeometry":a=new Fl[s.type](s.width,s.height,s.widthSegments,s.heightSegments);break;case"BoxGeometry":case"BoxBufferGeometry":case"CubeGeometry":a=new Fl[s.type](s.width,s.height,s.depth,s.widthSegments,s.heightSegments,s.depthSegments);break;case"CircleGeometry":case"CircleBufferGeometry":a=new Fl[s.type](s.radius,s.segments,s.thetaStart,s.thetaLength);break;case"CylinderGeometry":case"CylinderBufferGeometry":a=new Fl[s.type](s.radiusTop,s.radiusBottom,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"ConeGeometry":case"ConeBufferGeometry":a=new Fl[s.type](s.radius,s.height,s.radialSegments,s.heightSegments,s.openEnded,s.thetaStart,s.thetaLength);break;case"SphereGeometry":case"SphereBufferGeometry":a=new Fl[s.type](s.radius,s.widthSegments,s.heightSegments,s.phiStart,s.phiLength,s.thetaStart,s.thetaLength);break;case"DodecahedronGeometry":case"DodecahedronBufferGeometry":case"IcosahedronGeometry":case"IcosahedronBufferGeometry":case"OctahedronGeometry":case"OctahedronBufferGeometry":case"TetrahedronGeometry":case"TetrahedronBufferGeometry":a=new Fl[s.type](s.radius,s.detail);break;case"RingGeometry":case"RingBufferGeometry":a=new Fl[s.type](s.innerRadius,s.outerRadius,s.thetaSegments,s.phiSegments,s.thetaStart,s.thetaLength);break;case"TorusGeometry":case"TorusBufferGeometry":a=new Fl[s.type](s.radius,s.tube,s.radialSegments,s.tubularSegments,s.arc);break;case"TorusKnotGeometry":case"TorusKnotBufferGeometry":a=new Fl[s.type](s.radius,s.tube,s.tubularSegments,s.radialSegments,s.p,s.q);break;case"TubeGeometry":case"TubeBufferGeometry":a=new Fl[s.type]((new Zc[s.path.type]).fromJSON(s.path),s.tubularSegments,s.radius,s.radialSegments,s.closed);break;case"LatheGeometry":case"LatheBufferGeometry":a=new Fl[s.type](s.points,s.segments,s.phiStart,s.phiLength);break;case"PolyhedronGeometry":case"PolyhedronBufferGeometry":a=new Fl[s.type](s.vertices,s.indices,s.radius,s.details);break;case"ShapeGeometry":case"ShapeBufferGeometry":for(var l=[],c=0,u=s.shapes.length;c<u;c++){var h=e[s.shapes[c]];l.push(h)}a=new Fl[s.type](l,s.curveSegments);break;case"ExtrudeGeometry":case"ExtrudeBufferGeometry":for(l=[],c=0,u=s.shapes.length;c<u;c++){h=e[s.shapes[c]];l.push(h)}var d=s.options.extrudePath;void 0!==d&&(s.options.extrudePath=(new Zc[d.type]).fromJSON(d)),a=new Fl[s.type](l,s.options);break;case"BufferGeometry":case"InstancedBufferGeometry":a=i.parse(s);break;case"Geometry":if("THREE"in window&&"LegacyJSONLoader"in THREE){var p=new THREE.LegacyJSONLoader;a=p.parse(s,this.resourcePath).geometry}else console.error('THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type "Geometry".');break;default:console.warn('THREE.ObjectLoader: Unsupported geometry type "'+s.type+'"');continue}a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),!0===a.isBufferGeometry&&void 0!==s.userData&&(a.userData=s.userData),n[s.uuid]=a}return n},parseMaterials:function(t,e){var n={},i={};if(void 0!==t){var r=new hu;r.setTextures(e);for(var o=0,a=t.length;o<a;o++){var s=t[o];if("MultiMaterial"===s.type){for(var l=[],c=0;c<s.materials.length;c++){var u=s.materials[c];void 0===n[u.uuid]&&(n[u.uuid]=r.parse(u)),l.push(n[u.uuid])}i[s.uuid]=l}else void 0===n[s.uuid]&&(n[s.uuid]=r.parse(s)),i[s.uuid]=n[s.uuid]}}return i},parseAnimations:function(t){for(var e=[],n=0;n<t.length;n++){var i=t[n],r=uc.parse(i);void 0!==i.uuid&&(r.uuid=i.uuid),e.push(r)}return e},parseImages:function(t,e){var n=this,i={};function r(t){return n.manager.itemStart(t),a.load(t,function(){n.manager.itemEnd(t)},void 0,function(){n.manager.itemError(t),n.manager.itemEnd(t)})}if(void 0!==t&&t.length>0){var o=new fc(e),a=new wc(o);a.setCrossOrigin(this.crossOrigin);for(var s=0,l=t.length;s<l;s++){var c=t[s],u=c.url;if(Array.isArray(u)){i[c.uuid]=[];for(var h=0,d=u.length;h<d;h++){var p=u[h],f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(p)?p:n.resourcePath+p;i[c.uuid].push(r(f))}}else{f=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c.url)?c.url:n.resourcePath+c.url;i[c.uuid]=r(f)}}}return i},parseTextures:function(t,e){function n(t,e){return"number"===typeof t?t:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",t),e[t])}var i={};if(void 0!==t)for(var r=0,o=t.length;r<o;r++){var a,s=t[r];void 0===s.image&&console.warn('THREE.ObjectLoader: No "image" specified for',s.uuid),void 0===e[s.image]&&console.warn("THREE.ObjectLoader: Undefined image",s.image),a=Array.isArray(e[s.image])?new co(e[s.image]):new je(e[s.image]),a.needsUpdate=!0,a.uuid=s.uuid,void 0!==s.name&&(a.name=s.name),void 0!==s.mapping&&(a.mapping=n(s.mapping,bu)),void 0!==s.offset&&a.offset.fromArray(s.offset),void 0!==s.repeat&&a.repeat.fromArray(s.repeat),void 0!==s.center&&a.center.fromArray(s.center),void 0!==s.rotation&&(a.rotation=s.rotation),void 0!==s.wrap&&(a.wrapS=n(s.wrap[0],xu),a.wrapT=n(s.wrap[1],xu)),void 0!==s.format&&(a.format=s.format),void 0!==s.type&&(a.type=s.type),void 0!==s.encoding&&(a.encoding=s.encoding),void 0!==s.minFilter&&(a.minFilter=n(s.minFilter,wu)),void 0!==s.magFilter&&(a.magFilter=n(s.magFilter,wu)),void 0!==s.anisotropy&&(a.anisotropy=s.anisotropy),void 0!==s.flipY&&(a.flipY=s.flipY),void 0!==s.premultiplyAlpha&&(a.premultiplyAlpha=s.premultiplyAlpha),void 0!==s.unpackAlignment&&(a.unpackAlignment=s.unpackAlignment),i[s.uuid]=a}return i},parseObject:function(t,e,n){var i;function r(t){return void 0===e[t]&&console.warn("THREE.ObjectLoader: Undefined geometry",t),e[t]}function o(t){if(void 0!==t){if(Array.isArray(t)){for(var e=[],i=0,r=t.length;i<r;i++){var o=t[i];void 0===n[o]&&console.warn("THREE.ObjectLoader: Undefined material",o),e.push(n[o])}return e}return void 0===n[t]&&console.warn("THREE.ObjectLoader: Undefined material",t),n[t]}}switch(t.type){case"Scene":i=new es,void 0!==t.background&&Number.isInteger(t.background)&&(i.background=new pr(t.background)),void 0!==t.fog&&("Fog"===t.fog.type?i.fog=new ts(t.fog.color,t.fog.near,t.fog.far):"FogExp2"===t.fog.type&&(i.fog=new Qa(t.fog.color,t.fog.density)));break;case"PerspectiveCamera":i=new Ga(t.fov,t.aspect,t.near,t.far),void 0!==t.focus&&(i.focus=t.focus),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.filmGauge&&(i.filmGauge=t.filmGauge),void 0!==t.filmOffset&&(i.filmOffset=t.filmOffset),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"OrthographicCamera":i=new au(t.left,t.right,t.top,t.bottom,t.near,t.far),void 0!==t.zoom&&(i.zoom=t.zoom),void 0!==t.view&&(i.view=Object.assign({},t.view));break;case"AmbientLight":i=new cu(t.color,t.intensity);break;case"DirectionalLight":i=new lu(t.color,t.intensity);break;case"PointLight":i=new ou(t.color,t.intensity,t.distance,t.decay);break;case"RectAreaLight":i=new uu(t.color,t.intensity,t.width,t.height);break;case"SpotLight":i=new ru(t.color,t.intensity,t.distance,t.angle,t.penumbra,t.decay);break;case"HemisphereLight":i=new eu(t.color,t.groundColor,t.intensity);break;case"SkinnedMesh":console.warn("THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.");case"Mesh":var a=r(t.geometry),s=o(t.material);i=a.bones&&a.bones.length>0?new ss(a,s):new Jr(a,s),void 0!==t.drawMode&&i.setDrawMode(t.drawMode);break;case"LOD":i=new as;break;case"Line":i=new hs(r(t.geometry),o(t.material),t.mode);break;case"LineLoop":i=new ps(r(t.geometry),o(t.material));break;case"LineSegments":i=new ds(r(t.geometry),o(t.material));break;case"PointCloud":case"Points":i=new ms(r(t.geometry),o(t.material));break;case"Sprite":i=new os(o(t.material));break;case"Group":i=new Ua;break;default:i=new _r}if(i.uuid=t.uuid,void 0!==t.name&&(i.name=t.name),void 0!==t.matrix?(i.matrix.fromArray(t.matrix),void 0!==t.matrixAutoUpdate&&(i.matrixAutoUpdate=t.matrixAutoUpdate),i.matrixAutoUpdate&&i.matrix.decompose(i.position,i.quaternion,i.scale)):(void 0!==t.position&&i.position.fromArray(t.position),void 0!==t.rotation&&i.rotation.fromArray(t.rotation),void 0!==t.quaternion&&i.quaternion.fromArray(t.quaternion),void 0!==t.scale&&i.scale.fromArray(t.scale)),void 0!==t.castShadow&&(i.castShadow=t.castShadow),void 0!==t.receiveShadow&&(i.receiveShadow=t.receiveShadow),t.shadow&&(void 0!==t.shadow.bias&&(i.shadow.bias=t.shadow.bias),void 0!==t.shadow.radius&&(i.shadow.radius=t.shadow.radius),void 0!==t.shadow.mapSize&&i.shadow.mapSize.fromArray(t.shadow.mapSize),void 0!==t.shadow.camera&&(i.shadow.camera=this.parseObject(t.shadow.camera))),void 0!==t.visible&&(i.visible=t.visible),void 0!==t.frustumCulled&&(i.frustumCulled=t.frustumCulled),void 0!==t.renderOrder&&(i.renderOrder=t.renderOrder),void 0!==t.userData&&(i.userData=t.userData),void 0!==t.layers&&(i.layers.mask=t.layers),void 0!==t.children)for(var l=t.children,c=0;c<l.length;c++)i.add(this.parseObject(l[c],e,n));if("LOD"===t.type)for(var u=t.levels,h=0;h<u.length;h++){var d=u[h],p=i.getObjectByProperty("uuid",d.object);void 0!==p&&i.addLevel(p,d.distance)}return i}});var yu,bu={UVMapping:rt,CubeReflectionMapping:ot,CubeRefractionMapping:at,EquirectangularReflectionMapping:st,EquirectangularRefractionMapping:lt,SphericalReflectionMapping:ct,CubeUVReflectionMapping:ut,CubeUVRefractionMapping:ht},xu={RepeatWrapping:dt,ClampToEdgeWrapping:pt,MirroredRepeatWrapping:ft},wu={NearestFilter:mt,NearestMipMapNearestFilter:vt,NearestMipMapLinearFilter:gt,LinearFilter:yt,LinearMipMapNearestFilter:bt,LinearMipMapLinearFilter:xt};function _u(t){"undefined"===typeof createImageBitmap&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),"undefined"===typeof fetch&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.manager=void 0!==t?t:mc,this.options=void 0}function Mu(){this.type="ShapePath",this.color=new pr,this.subPaths=[],this.currentPath=null}function Eu(t){this.type="Font",this.data=t}function Su(t,e,n){for(var i=Array.from?Array.from(t):String(t).split(""),r=e/n.resolution,o=(n.boundingBox.yMax-n.boundingBox.yMin+n.underlineThickness)*r,a=[],s=0,l=0,c=0;c<i.length;c++){var u=i[c];if("\n"===u)s=0,l-=o;else{var h=Tu(u,r,s,l,n);s+=h.offsetX,a.push(h.path)}}return a}function Tu(t,e,n,i,r){var o=r.glyphs[t]||r.glyphs["?"];if(o){var a,s,l,c,u,h,d,p,f=new Mu;if(o.o)for(var m=o._cachedOutline||(o._cachedOutline=o.o.split(" ")),v=0,g=m.length;v<g;){var y=m[v++];switch(y){case"m":a=m[v++]*e+n,s=m[v++]*e+i,f.moveTo(a,s);break;case"l":a=m[v++]*e+n,s=m[v++]*e+i,f.lineTo(a,s);break;case"q":l=m[v++]*e+n,c=m[v++]*e+i,u=m[v++]*e+n,h=m[v++]*e+i,f.quadraticCurveTo(u,h,l,c);break;case"b":l=m[v++]*e+n,c=m[v++]*e+i,u=m[v++]*e+n,h=m[v++]*e+i,d=m[v++]*e+n,p=m[v++]*e+i,f.bezierCurveTo(u,h,d,p,l,c);break}}return{offsetX:o.ha*e,path:f}}}function Au(t){this.manager=void 0!==t?t:mc}function Cu(){}_u.prototype={constructor:_u,setOptions:function(t){return this.options=t,this},load:function(t,e,n,i){void 0===t&&(t=""),void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);var r=this,o=pc.get(t);if(void 0!==o)return r.manager.itemStart(t),setTimeout(function(){e&&e(o),r.manager.itemEnd(t)},0),o;fetch(t).then(function(t){return t.blob()}).then(function(t){return void 0===r.options?createImageBitmap(t):createImageBitmap(t,r.options)}).then(function(n){pc.add(t,n),e&&e(n),r.manager.itemEnd(t)}).catch(function(e){i&&i(e),r.manager.itemError(t),r.manager.itemEnd(t)}),r.manager.itemStart(t)},setCrossOrigin:function(){return this},setPath:function(t){return this.path=t,this}},Object.assign(Mu.prototype,{moveTo:function(t,e){this.currentPath=new Kc,this.subPaths.push(this.currentPath),this.currentPath.moveTo(t,e)},lineTo:function(t,e){this.currentPath.lineTo(t,e)},quadraticCurveTo:function(t,e,n,i){this.currentPath.quadraticCurveTo(t,e,n,i)},bezierCurveTo:function(t,e,n,i,r,o){this.currentPath.bezierCurveTo(t,e,n,i,r,o)},splineThru:function(t){this.currentPath.splineThru(t)},toShapes:function(t,e){function n(t){for(var e=[],n=0,i=t.length;n<i;n++){var r=t[n],o=new Qc;o.curves=r.curves,e.push(o)}return e}function i(t,e){for(var n=e.length,i=!1,r=n-1,o=0;o<n;r=o++){var a=e[r],s=e[o],l=s.x-a.x,c=s.y-a.y;if(Math.abs(c)>Number.EPSILON){if(c<0&&(a=e[o],l=-l,s=e[r],c=-c),t.y<a.y||t.y>s.y)continue;if(t.y===a.y){if(t.x===a.x)return!0}else{var u=c*(t.x-a.x)-l*(t.y-a.y);if(0===u)return!0;if(u<0)continue;i=!i}}else{if(t.y!==a.y)continue;if(s.x<=t.x&&t.x<=a.x||a.x<=t.x&&t.x<=s.x)return!0}}return i}var r=fl.isClockWise,o=this.subPaths;if(0===o.length)return[];if(!0===e)return n(o);var a,s,l,c=[];if(1===o.length)return s=o[0],l=new Qc,l.curves=s.curves,c.push(l),c;var u=!r(o[0].getPoints());u=t?!u:u;var h,d,p=[],f=[],m=[],v=0;f[v]=void 0,m[v]=[];for(var g=0,y=o.length;g<y;g++)s=o[g],h=s.getPoints(),a=r(h),a=t?!a:a,a?(!u&&f[v]&&v++,f[v]={s:new Qc,p:h},f[v].s.curves=s.curves,u&&v++,m[v]=[]):m[v].push({h:s,p:h[0]});if(!f[0])return n(o);if(f.length>1){for(var b=!1,x=[],w=0,_=f.length;w<_;w++)p[w]=[];for(w=0,_=f.length;w<_;w++)for(var M=m[w],E=0;E<M.length;E++){for(var S=M[E],T=!0,A=0;A<f.length;A++)i(S.p,f[A].p)&&(w!==A&&x.push({froms:w,tos:A,hole:E}),T?(T=!1,p[A].push(S)):b=!0);T&&p[w].push(S)}x.length>0&&(b||(m=p))}g=0;for(var C=f.length;g<C;g++){l=f[g].s,c.push(l),d=m[g];for(var L=0,P=d.length;L<P;L++)l.holes.push(d[L].h)}return c}}),Object.assign(Eu.prototype,{isFont:!0,generateShapes:function(t,e){void 0===e&&(e=100);for(var n=[],i=Su(t,e,this.data),r=0,o=i.length;r<o;r++)Array.prototype.push.apply(n,i[r].toShapes());return n}}),Object.assign(Au.prototype,{load:function(t,e,n,i){var r=this,o=new gc(this.manager);o.setPath(this.path),o.load(t,function(t){var n;try{n=JSON.parse(t)}catch(o){console.warn("THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead."),n=JSON.parse(t.substring(65,t.length-2))}var i=r.parse(n);e&&e(i)},n,i)},parse:function(t){return new Eu(t)},setPath:function(t){return this.path=t,this}}),Cu.Handlers={handlers:[],add:function(t,e){this.handlers.push(t,e)},get:function(t){for(var e=this.handlers,n=0,i=e.length;n<i;n+=2){var r=e[n],o=e[n+1];if(r.test(t))return o}return null}},Object.assign(Cu.prototype,{crossOrigin:"anonymous",onLoadStart:function(){},onLoadProgress:function(){},onLoadComplete:function(){},initMaterials:function(t,e,n){for(var i=[],r=0;r<t.length;++r)i[r]=this.createMaterial(t[r],e,n);return i},createMaterial:function(){var t={NoBlending:b,NormalBlending:x,AdditiveBlending:w,SubtractiveBlending:_,MultiplyBlending:M,CustomBlending:E},e=new pr,n=new Mc,i=new hu;return function(r,o,a){var s={};function l(t,e,i,r,l){var c,u=o+t,h=Cu.Handlers.get(u);null!==h?c=h.load(u):(n.setCrossOrigin(a),c=n.load(u)),void 0!==e&&(c.repeat.fromArray(e),1!==e[0]&&(c.wrapS=dt),1!==e[1]&&(c.wrapT=dt)),void 0!==i&&c.offset.fromArray(i),void 0!==r&&("repeat"===r[0]&&(c.wrapS=dt),"mirror"===r[0]&&(c.wrapS=ft),"repeat"===r[1]&&(c.wrapT=dt),"mirror"===r[1]&&(c.wrapT=ft)),void 0!==l&&(c.anisotropy=l);var d=ke.generateUUID();return s[d]=c,d}var c={uuid:ke.generateUUID(),type:"MeshLambertMaterial"};for(var u in r){var h=r[u];switch(u){case"DbgColor":case"DbgIndex":case"opticalDensity":case"illumination":break;case"DbgName":c.name=h;break;case"blending":c.blending=t[h];break;case"colorAmbient":case"mapAmbient":console.warn("THREE.Loader.createMaterial:",u,"is no longer supported.");break;case"colorDiffuse":c.color=e.fromArray(h).getHex();break;case"colorSpecular":c.specular=e.fromArray(h).getHex();break;case"colorEmissive":c.emissive=e.fromArray(h).getHex();break;case"specularCoef":c.shininess=h;break;case"shading":"basic"===h.toLowerCase()&&(c.type="MeshBasicMaterial"),"phong"===h.toLowerCase()&&(c.type="MeshPhongMaterial"),"standard"===h.toLowerCase()&&(c.type="MeshStandardMaterial");break;case"mapDiffuse":c.map=l(h,r.mapDiffuseRepeat,r.mapDiffuseOffset,r.mapDiffuseWrap,r.mapDiffuseAnisotropy);break;case"mapDiffuseRepeat":case"mapDiffuseOffset":case"mapDiffuseWrap":case"mapDiffuseAnisotropy":break;case"mapEmissive":c.emissiveMap=l(h,r.mapEmissiveRepeat,r.mapEmissiveOffset,r.mapEmissiveWrap,r.mapEmissiveAnisotropy);break;case"mapEmissiveRepeat":case"mapEmissiveOffset":case"mapEmissiveWrap":case"mapEmissiveAnisotropy":break;case"mapLight":c.lightMap=l(h,r.mapLightRepeat,r.mapLightOffset,r.mapLightWrap,r.mapLightAnisotropy);break;case"mapLightRepeat":case"mapLightOffset":case"mapLightWrap":case"mapLightAnisotropy":break;case"mapAO":c.aoMap=l(h,r.mapAORepeat,r.mapAOOffset,r.mapAOWrap,r.mapAOAnisotropy);break;case"mapAORepeat":case"mapAOOffset":case"mapAOWrap":case"mapAOAnisotropy":break;case"mapBump":c.bumpMap=l(h,r.mapBumpRepeat,r.mapBumpOffset,r.mapBumpWrap,r.mapBumpAnisotropy);break;case"mapBumpScale":c.bumpScale=h;break;case"mapBumpRepeat":case"mapBumpOffset":case"mapBumpWrap":case"mapBumpAnisotropy":break;case"mapNormal":c.normalMap=l(h,r.mapNormalRepeat,r.mapNormalOffset,r.mapNormalWrap,r.mapNormalAnisotropy);break;case"mapNormalFactor":c.normalScale=h;break;case"mapNormalRepeat":case"mapNormalOffset":case"mapNormalWrap":case"mapNormalAnisotropy":break;case"mapSpecular":c.specularMap=l(h,r.mapSpecularRepeat,r.mapSpecularOffset,r.mapSpecularWrap,r.mapSpecularAnisotropy);break;case"mapSpecularRepeat":case"mapSpecularOffset":case"mapSpecularWrap":case"mapSpecularAnisotropy":break;case"mapMetalness":c.metalnessMap=l(h,r.mapMetalnessRepeat,r.mapMetalnessOffset,r.mapMetalnessWrap,r.mapMetalnessAnisotropy);break;case"mapMetalnessRepeat":case"mapMetalnessOffset":case"mapMetalnessWrap":case"mapMetalnessAnisotropy":break;case"mapRoughness":c.roughnessMap=l(h,r.mapRoughnessRepeat,r.mapRoughnessOffset,r.mapRoughnessWrap,r.mapRoughnessAnisotropy);break;case"mapRoughnessRepeat":case"mapRoughnessOffset":case"mapRoughnessWrap":case"mapRoughnessAnisotropy":break;case"mapAlpha":c.alphaMap=l(h,r.mapAlphaRepeat,r.mapAlphaOffset,r.mapAlphaWrap,r.mapAlphaAnisotropy);break;case"mapAlphaRepeat":case"mapAlphaOffset":case"mapAlphaWrap":case"mapAlphaAnisotropy":break;case"flipSided":c.side=p;break;case"doubleSided":c.side=f;break;case"transparency":console.warn("THREE.Loader.createMaterial: transparency has been renamed to opacity"),c.opacity=h;break;case"depthTest":case"depthWrite":case"colorWrite":case"opacity":case"reflectivity":case"transparent":case"visible":case"wireframe":c[u]=h;break;case"vertexColors":!0===h&&(c.vertexColors=y),"face"===h&&(c.vertexColors=g);break;default:console.error("THREE.Loader.createMaterial: Unsupported",u,h);break}}return"MeshBasicMaterial"===c.type&&delete c.emissive,"MeshPhongMaterial"!==c.type&&delete c.specular,c.opacity<1&&(c.transparent=!0),i.setTextures(s),i.parse(c)}}()});var Lu={getContext:function(){return void 0===yu&&(yu=new(window.AudioContext||window.webkitAudioContext)),yu},setContext:function(t){yu=t}};function Pu(t){this.manager=void 0!==t?t:mc}function Ou(){this.coefficients=[];for(var t=0;t<9;t++)this.coefficients.push(new Ne)}function Ru(t,e){tu.call(this,void 0,e),this.sh=void 0!==t?t:new Ou}function ku(t,e,n){Ru.call(this,void 0,n);var i=(new pr).set(t),r=(new pr).set(e),o=new Ne(i.r,i.g,i.b),a=new Ne(r.r,r.g,r.b),s=Math.sqrt(Math.PI),l=s*Math.sqrt(.75);this.sh.coefficients[0].copy(o).add(a).multiplyScalar(s),this.sh.coefficients[1].copy(o).sub(a).multiplyScalar(l)}function Du(t,e){Ru.call(this,void 0,e);var n=(new pr).set(t);this.sh.coefficients[0].set(n.r,n.g,n.b).multiplyScalar(2*Math.sqrt(Math.PI))}function Iu(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ga,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ga,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1}Object.assign(Pu.prototype,{load:function(t,e,n,i){var r=new gc(this.manager);r.setResponseType("arraybuffer"),r.setPath(this.path),r.load(t,function(t){var n=t.slice(0),i=Lu.getContext();i.decodeAudioData(n,function(t){e(t)})},n,i)},setPath:function(t){return this.path=t,this}}),Object.assign(Ou.prototype,{isSphericalHarmonics3:!0,set:function(t){for(var e=0;e<9;e++)this.coefficients[e].copy(t[e]);return this},zero:function(){for(var t=0;t<9;t++)this.coefficients[t].set(0,0,0);return this},getAt:function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e=.282095*o[0],e+=.488603*o[1]*i,e+=.488603*o[2]*r,e+=.488603*o[3]*n,e+=1.092548*o[4]*(n*i),e+=1.092548*o[5]*(i*r),e+=.315392*o[6]*(3*r*r-1),e+=1.092548*o[7]*(n*r),e+=.546274*o[8]*(n*n-i*i),e},getIrradianceAt:function(t,e){var n=t.x,i=t.y,r=t.z,o=this.coefficients;return e=.886227*o[0],e+=2*o[1]*.511664*i,e+=2*o[2]*.511664*r,e+=2*o[3]*.511664*n,e+=2*o[4]*.429043*n*i,e+=2*o[5]*.429043*i*r,e+=o[6]*(.743125*r*r-.247708),e+=2*o[7]*.429043*n*r,e+=.429043*o[8]*(n*n-i*i),e},add:function(t){for(var e=0;e<9;e++)this.coefficients[e].add(t.coefficients[e]);return this},scale:function(t){for(var e=0;e<9;e++)this.coefficients[e].multiplyScalar(t);return this},lerp:function(t,e){for(var n=0;n<9;n++)this.coefficients[n].lerp(t.coefficients[n],e);return this},equals:function(t){for(var e=0;e<9;e++)if(!this.coefficients[e].equals(t.coefficients[e]))return!1;return!0},copy:function(t){return this.set(t.coefficients)},clone:function(){return(new this.constructor).copy(this)},fromArray:function(t){for(var e=this.coefficients,n=0;n<9;n++)e[n].fromArray(t,3*n);return this},toArray:function(){for(var t=[],e=this.coefficients,n=0;n<9;n++)e[n].toArray(t,3*n);return t}}),Object.assign(Ou,{getBasisAt:function(t,e){var n=t.x,i=t.y,r=t.z;e[0]=.282095,e[1]=.488603*i,e[2]=.488603*r,e[3]=.488603*n,e[4]=1.092548*n*i,e[5]=1.092548*i*r,e[6]=.315392*(3*r*r-1),e[7]=1.092548*n*r,e[8]=.546274*(n*n-i*i)}}),Ru.prototype=Object.assign(Object.create(tu.prototype),{constructor:Ru,isLightProbe:!0,copy:function(t){return tu.prototype.copy.call(this,t),this.sh.copy(t.sh),this.intensity=t.intensity,this},toJSON:function(t){var e=tu.prototype.toJSON.call(this,t);return e}}),ku.prototype=Object.assign(Object.create(Ru.prototype),{constructor:ku,isHemisphereLightProbe:!0,copy:function(t){return Ru.prototype.copy.call(this,t),this},toJSON:function(t){var e=Ru.prototype.toJSON.call(this,t);return e}}),Du.prototype=Object.assign(Object.create(Ru.prototype),{constructor:Du,isAmbientLightProbe:!0,copy:function(t){return Ru.prototype.copy.call(this,t),this},toJSON:function(t){var e=Ru.prototype.toJSON.call(this,t);return e}}),Object.assign(Iu.prototype,{update:function(){var t,e,n,i,r,o,a,s,l=new Ze,c=new Ze;return function(u){var h=t!==this||e!==u.focus||n!==u.fov||i!==u.aspect*this.aspect||r!==u.near||o!==u.far||a!==u.zoom||s!==this.eyeSep;if(h){t=this,e=u.focus,n=u.fov,i=u.aspect*this.aspect,r=u.near,o=u.far,a=u.zoom;var d=u.projectionMatrix.clone();s=this.eyeSep/2;var p,f,m=s*r/e,v=r*Math.tan(ke.DEG2RAD*n*.5)/a;c.elements[12]=-s,l.elements[12]=s,p=-v*i+m,f=v*i+m,d.elements[0]=2*r/(f-p),d.elements[8]=(f+p)/(f-p),this.cameraL.projectionMatrix.copy(d),p=-v*i-m,f=v*i-m,d.elements[0]=2*r/(f-p),d.elements[8]=(f+p)/(f-p),this.cameraR.projectionMatrix.copy(d)}this.cameraL.matrixWorld.copy(u.matrixWorld).multiply(c),this.cameraR.matrixWorld.copy(u.matrixWorld).multiply(l)}}()});var Nu=90,zu=1;function Bu(t,e,n,i){_r.call(this),this.type="CubeCamera";var r=new Ga(Nu,zu,t,e);r.up.set(0,-1,0),r.lookAt(new Ne(1,0,0)),this.add(r);var o=new Ga(Nu,zu,t,e);o.up.set(0,-1,0),o.lookAt(new Ne(-1,0,0)),this.add(o);var a=new Ga(Nu,zu,t,e);a.up.set(0,0,1),a.lookAt(new Ne(0,1,0)),this.add(a);var s=new Ga(Nu,zu,t,e);s.up.set(0,0,-1),s.lookAt(new Ne(0,-1,0)),this.add(s);var l=new Ga(Nu,zu,t,e);l.up.set(0,-1,0),l.lookAt(new Ne(0,0,1)),this.add(l);var c=new Ga(Nu,zu,t,e);c.up.set(0,-1,0),c.lookAt(new Ne(0,0,-1)),this.add(c),i=i||{format:Dt,magFilter:yt,minFilter:yt},this.renderTarget=new Ge(n,n,i),this.renderTarget.texture.name="CubeCamera",this.update=function(t,e){null===this.parent&&this.updateMatrixWorld();var n=t.getRenderTarget(),i=this.renderTarget,u=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0),t.render(e,r),t.setRenderTarget(i,1),t.render(e,o),t.setRenderTarget(i,2),t.render(e,a),t.setRenderTarget(i,3),t.render(e,s),t.setRenderTarget(i,4),t.render(e,l),i.texture.generateMipmaps=u,t.setRenderTarget(i,5),t.render(e,c),t.setRenderTarget(n)},this.clear=function(t,e,n,i){for(var r=t.getRenderTarget(),o=this.renderTarget,a=0;a<6;a++)t.setRenderTarget(o,a),t.clear(e,n,i);t.setRenderTarget(r)}}function Fu(t){this.autoStart=void 0===t||t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}function ju(){_r.call(this),this.type="AudioListener",this.context=Lu.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0}function Hu(t){_r.call(this),this.type="Audio",this.listener=t,this.context=t.context,this.gain=this.context.createGain(),this.gain.connect(t.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.startTime=0,this.offset=0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.sourceType="empty",this.filters=[]}function Uu(t){Hu.call(this,t),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}function Vu(t,e){this.analyser=t.context.createAnalyser(),this.analyser.fftSize=void 0!==e?e:2048,this.data=new Uint8Array(this.analyser.frequencyBinCount),t.getOutput().connect(this.analyser)}function Gu(t,e,n){this.binding=t,this.valueSize=n;var i,r=Float64Array;switch(e){case"quaternion":i=this._slerp;break;case"string":case"bool":r=Array,i=this._select;break;default:i=this._lerp}this.buffer=new r(4*n),this._mixBufferRegion=i,this.cumulativeWeight=0,this.useCount=0,this.referenceCount=0}Bu.prototype=Object.create(_r.prototype),Bu.prototype.constructor=Bu,Object.assign(Fu.prototype,{start:function(){this.startTime=("undefined"===typeof performance?Date:performance).now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0},stop:function(){this.getElapsedTime(),this.running=!1,this.autoStart=!1},getElapsedTime:function(){return this.getDelta(),this.elapsedTime},getDelta:function(){var t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){var e=("undefined"===typeof performance?Date:performance).now();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}),ju.prototype=Object.assign(Object.create(_r.prototype),{constructor:ju,getInput:function(){return this.gain},removeFilter:function(){return null!==this.filter&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this},getFilter:function(){return this.filter},setFilter:function(t){return null!==this.filter?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=t,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this},getMasterVolume:function(){return this.gain.gain.value},setMasterVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this},updateMatrixWorld:function(){var t=new Ne,e=new Ie,n=new Ne,i=new Ne,r=new Fu;return function(o){_r.prototype.updateMatrixWorld.call(this,o);var a=this.context.listener,s=this.up;if(this.timeDelta=r.getDelta(),this.matrixWorld.decompose(t,e,n),i.set(0,0,-1).applyQuaternion(e),a.positionX){var l=this.context.currentTime+this.timeDelta;a.positionX.linearRampToValueAtTime(t.x,l),a.positionY.linearRampToValueAtTime(t.y,l),a.positionZ.linearRampToValueAtTime(t.z,l),a.forwardX.linearRampToValueAtTime(i.x,l),a.forwardY.linearRampToValueAtTime(i.y,l),a.forwardZ.linearRampToValueAtTime(i.z,l),a.upX.linearRampToValueAtTime(s.x,l),a.upY.linearRampToValueAtTime(s.y,l),a.upZ.linearRampToValueAtTime(s.z,l)}else a.setPosition(t.x,t.y,t.z),a.setOrientation(i.x,i.y,i.z,s.x,s.y,s.z)}}()}),Hu.prototype=Object.assign(Object.create(_r.prototype),{constructor:Hu,getOutput:function(){return this.gain},setNodeSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=t,this.connect(),this},setMediaElementSource:function(t){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(t),this.connect(),this},setBuffer:function(t){return this.buffer=t,this.sourceType="buffer",this.autoplay&&this.play(),this},play:function(){if(!0!==this.isPlaying){if(!1!==this.hasPlaybackControl){var t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.onended=this.onEnded.bind(this),this.startTime=this.context.currentTime,t.start(this.startTime,this.offset),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}console.warn("THREE.Audio: this Audio has no playback control.")}else console.warn("THREE.Audio: Audio is already playing.")},pause:function(){if(!1!==this.hasPlaybackControl)return!0===this.isPlaying&&(this.source.stop(),this.source.onended=null,this.offset+=(this.context.currentTime-this.startTime)*this.playbackRate,this.isPlaying=!1),this;console.warn("THREE.Audio: this Audio has no playback control.")},stop:function(){if(!1!==this.hasPlaybackControl)return this.source.stop(),this.source.onended=null,this.offset=0,this.isPlaying=!1,this;console.warn("THREE.Audio: this Audio has no playback control.")},connect:function(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].connect(this.filters[t]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this},disconnect:function(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(var t=1,e=this.filters.length;t<e;t++)this.filters[t-1].disconnect(this.filters[t]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this},getFilters:function(){return this.filters},setFilters:function(t){return t||(t=[]),!0===this.isPlaying?(this.disconnect(),this.filters=t,this.connect()):this.filters=t,this},setDetune:function(t){if(this.detune=t,void 0!==this.source.detune)return!0===this.isPlaying&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this},getDetune:function(){return this.detune},getFilter:function(){return this.getFilters()[0]},setFilter:function(t){return this.setFilters(t?[t]:[])},setPlaybackRate:function(t){if(!1!==this.hasPlaybackControl)return this.playbackRate=t,!0===this.isPlaying&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this;console.warn("THREE.Audio: this Audio has no playback control.")},getPlaybackRate:function(){return this.playbackRate},onEnded:function(){this.isPlaying=!1},getLoop:function(){return!1===this.hasPlaybackControl?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop},setLoop:function(t){if(!1!==this.hasPlaybackControl)return this.loop=t,!0===this.isPlaying&&(this.source.loop=this.loop),this;console.warn("THREE.Audio: this Audio has no playback control.")},getVolume:function(){return this.gain.gain.value},setVolume:function(t){return this.gain.gain.setTargetAtTime(t,this.context.currentTime,.01),this}}),Uu.prototype=Object.assign(Object.create(Hu.prototype),{constructor:Uu,getOutput:function(){return this.panner},getRefDistance:function(){return this.panner.refDistance},setRefDistance:function(t){return this.panner.refDistance=t,this},getRolloffFactor:function(){return this.panner.rolloffFactor},setRolloffFactor:function(t){return this.panner.rolloffFactor=t,this},getDistanceModel:function(){return this.panner.distanceModel},setDistanceModel:function(t){return this.panner.distanceModel=t,this},getMaxDistance:function(){return this.panner.maxDistance},setMaxDistance:function(t){return this.panner.maxDistance=t,this},setDirectionalCone:function(t,e,n){return this.panner.coneInnerAngle=t,this.panner.coneOuterAngle=e,this.panner.coneOuterGain=n,this},updateMatrixWorld:function(){var t=new Ne,e=new Ie,n=new Ne,i=new Ne;return function(r){if(_r.prototype.updateMatrixWorld.call(this,r),!0!==this.hasPlaybackControl||!1!==this.isPlaying){this.matrixWorld.decompose(t,e,n),i.set(0,0,1).applyQuaternion(e);var o=this.panner;if(o.positionX){var a=this.context.currentTime+this.listener.timeDelta;o.positionX.linearRampToValueAtTime(t.x,a),o.positionY.linearRampToValueAtTime(t.y,a),o.positionZ.linearRampToValueAtTime(t.z,a),o.orientationX.linearRampToValueAtTime(i.x,a),o.orientationY.linearRampToValueAtTime(i.y,a),o.orientationZ.linearRampToValueAtTime(i.z,a)}else o.setPosition(t.x,t.y,t.z),o.setOrientation(i.x,i.y,i.z)}}}()}),Object.assign(Vu.prototype,{getFrequencyData:function(){return this.analyser.getByteFrequencyData(this.data),this.data},getAverageFrequency:function(){for(var t=0,e=this.getFrequencyData(),n=0;n<e.length;n++)t+=e[n];return t/e.length}}),Object.assign(Gu.prototype,{accumulate:function(t,e){var n=this.buffer,i=this.valueSize,r=t*i+i,o=this.cumulativeWeight;if(0===o){for(var a=0;a!==i;++a)n[r+a]=n[a];o=e}else{o+=e;var s=e/o;this._mixBufferRegion(n,r,0,s,i)}this.cumulativeWeight=o},apply:function(t){var e=this.valueSize,n=this.buffer,i=t*e+e,r=this.cumulativeWeight,o=this.binding;if(this.cumulativeWeight=0,r<1){var a=3*e;this._mixBufferRegion(n,i,a,1-r,e)}for(var s=e,l=e+e;s!==l;++s)if(n[s]!==n[s+e]){o.setValue(n,i);break}},saveOriginalState:function(){var t=this.binding,e=this.buffer,n=this.valueSize,i=3*n;t.getValue(e,i);for(var r=n,o=i;r!==o;++r)e[r]=e[i+r%n];this.cumulativeWeight=0},restoreOriginalState:function(){var t=3*this.valueSize;this.binding.setValue(this.buffer,t)},_select:function(t,e,n,i,r){if(i>=.5)for(var o=0;o!==r;++o)t[e+o]=t[n+o]},_slerp:function(t,e,n,i){Ie.slerpFlat(t,e,t,e,t,n,i)},_lerp:function(t,e,n,i,r){for(var o=1-i,a=0;a!==r;++a){var s=e+a;t[s]=t[s]*o+t[n+a]*i}}});var Wu,$u,qu="\\[\\]\\.:\\/";function Yu(t,e,n){var i=n||Xu.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,i)}function Xu(t,e,n){this.path=e,this.parsedPath=n||Xu.parseTrackName(e),this.node=Xu.findNode(t,this.parsedPath.nodeName)||t,this.rootNode=t}function Zu(){this.uuid=ke.generateUUID(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;var t={};this._indicesByUUID=t;for(var e=0,n=arguments.length;e!==n;++e)t[arguments[e].uuid]=e;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};var i=this;this.stats={objects:{get total(){return i._objects.length},get inUse(){return this.total-i.nCachedObjects_}},get bindingsPerObject(){return i._bindings.length}}}function Ju(t,e,n){this._mixer=t,this._clip=e,this._localRoot=n||null;for(var i=e.tracks,r=i.length,o=new Array(r),a={endingStart:ve,endingEnd:ve},s=0;s!==r;++s){var l=i[s].createInterpolant(null);o[s]=l,l.settings=a}this._interpolantSettings=a,this._interpolants=o,this._propertyBindings=new Array(r),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=he,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}function Ku(t){this._root=t,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}function Qu(t){"string"===typeof t&&(console.warn("THREE.Uniform: Type parameter is no longer needed."),t=arguments[1]),this.value=t}function th(t,e,n){ns.call(this,t,e),this.meshPerAttribute=n||1}function eh(t,e,n,i){this.ray=new Yr(t,e),this.near=n||0,this.far=i||1/0,this.params={Mesh:{},Line:{},LOD:{},Points:{threshold:1},Sprite:{}},Object.defineProperties(this.params,{PointCloud:{get:function(){return console.warn("THREE.Raycaster: params.PointCloud has been renamed to params.Points."),this.Points}}})}function nh(t,e){return t.distance-e.distance}function ih(t,e,n,i){if(!1!==t.visible&&(t.raycast(e,n),!0===i))for(var r=t.children,o=0,a=r.length;o<a;o++)ih(r[o],e,n,!0)}function rh(t,e,n){return this.radius=void 0!==t?t:1,this.phi=void 0!==e?e:0,this.theta=void 0!==n?n:0,this}function oh(t,e,n){return this.radius=void 0!==t?t:1,this.theta=void 0!==e?e:0,this.y=void 0!==n?n:0,this}function ah(t,e){this.min=void 0!==t?t:new De(1/0,1/0),this.max=void 0!==e?e:new De(-1/0,-1/0)}function sh(t,e){this.start=void 0!==t?t:new Ne,this.end=void 0!==e?e:new Ne}function lh(t){_r.call(this),this.material=t,this.render=function(){}}function ch(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16711680,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=3*s.faces.length:s&&s.isBufferGeometry&&(a=s.attributes.normal.count);var l=new Br,c=new kr(2*a*3,3);l.addAttribute("position",c),ds.call(this,l,new us({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function uh(t,e){_r.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=e;for(var n=new Br,i=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1],r=0,o=1,a=32;r<a;r++,o++){var s=r/a*Math.PI*2,l=o/a*Math.PI*2;i.push(Math.cos(s),Math.sin(s),1,Math.cos(l),Math.sin(l),1)}n.addAttribute("position",new kr(i,3));var c=new us({fog:!1});this.cone=new ds(n,c),this.add(this.cone),this.update()}function hh(t){var e=[];t&&t.isBone&&e.push(t);for(var n=0;n<t.children.length;n++)e.push.apply(e,hh(t.children[n]));return e}function dh(t){for(var e=hh(t),n=new Br,i=[],r=[],o=new pr(0,0,1),a=new pr(0,1,0),s=0;s<e.length;s++){var l=e[s];l.parent&&l.parent.isBone&&(i.push(0,0,0),i.push(0,0,0),r.push(o.r,o.g,o.b),r.push(a.r,a.g,a.b))}n.addAttribute("position",new kr(i,3)),n.addAttribute("color",new kr(r,3));var c=new us({vertexColors:y,depthTest:!1,depthWrite:!1,transparent:!0});ds.call(this,n,c),this.root=t,this.bones=e,this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1}function ph(t,e,n){this.light=t,this.light.updateMatrixWorld(),this.color=n;var i=new El(e,4,2),r=new Zr({wireframe:!0,fog:!1});Jr.call(this,i,r),this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}function fh(t,e){this.type="RectAreaLightHelper",this.light=t,this.color=e;var n=[1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],i=new Br;i.addAttribute("position",new kr(n,3)),i.computeBoundingSphere();var r=new us({fog:!1});hs.call(this,i,r);var o=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],a=new Br;a.addAttribute("position",new kr(o,3)),a.computeBoundingSphere(),this.add(new Jr(a,new Zr({side:p,fog:!1}))),this.update()}function mh(t,e,n){_r.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n;var i=new Cs(e);i.rotateY(.5*Math.PI),this.material=new Zr({wireframe:!0,fog:!1}),void 0===this.color&&(this.material.vertexColors=y);var r=i.getAttribute("position"),o=new Float32Array(3*r.count);i.addAttribute("color",new Sr(o,3)),this.add(new Jr(i,this.material)),this.update()}function vh(t,e){this.lightProbe=t,this.size=e;var n={GAMMA_OUTPUT:""},i=new qr({defines:n,uniforms:{sh:{value:this.lightProbe.sh.coefficients},intensity:{value:this.lightProbe.intensity}},vertexShader:["varying vec3 vNormal;","void main() {","\tvNormal = normalize( normalMatrix * normal );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#define RECIPROCAL_PI 0.318309886","vec3 inverseTransformDirection( in vec3 normal, in mat4 matrix ) {","\t// matrix is assumed to be orthogonal","\treturn normalize( ( vec4( normal, 0.0 ) * matrix ).xyz );","}","vec3 linearToOutput( in vec3 a ) {","\t#ifdef GAMMA_OUTPUT","\t\treturn pow( a, vec3( 1.0 / float( GAMMA_FACTOR ) ) );","\t#else","\t\treturn a;","\t#endif","}","// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf","vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {","\t// normal is assumed to have unit length","\tfloat x = normal.x, y = normal.y, z = normal.z;","\t// band 0","\tvec3 result = shCoefficients[ 0 ] * 0.886227;","\t// band 1","\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;","\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;","\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;","\t// band 2","\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;","\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;","\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );","\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;","\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );","\treturn result;","}","uniform vec3 sh[ 9 ]; // sh coefficients","uniform float intensity; // light probe intensity","varying vec3 vNormal;","void main() {","\tvec3 normal = normalize( vNormal );","\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );","\tvec3 irradiance = shGetIrradianceAt( worldNormal, sh );","\tvec3 outgoingLight = RECIPROCAL_PI * irradiance * intensity;","\toutgoingLight = linearToOutput( outgoingLight );","\tgl_FragColor = vec4( outgoingLight, 1.0 );","}"].join("\n")}),r=new El(1,32,16);Jr.call(this,r,i),this.onBeforeRender()}function gh(t,e,n,i){t=t||10,e=e||10,n=new pr(void 0!==n?n:4473924),i=new pr(void 0!==i?i:8947848);for(var r=e/2,o=t/e,a=t/2,s=[],l=[],c=0,u=0,h=-a;c<=e;c++,h+=o){s.push(-a,0,h,a,0,h),s.push(h,0,-a,h,0,a);var d=c===r?n:i;d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3,d.toArray(l,u),u+=3}var p=new Br;p.addAttribute("position",new kr(s,3)),p.addAttribute("color",new kr(l,3));var f=new us({vertexColors:y});ds.call(this,p,f)}function yh(t,e,n,i,r,o){t=t||10,e=e||16,n=n||8,i=i||64,r=new pr(void 0!==r?r:4473924),o=new pr(void 0!==o?o:8947848);var a,s,l,c,u,h,d,p=[],f=[];for(c=0;c<=e;c++)l=c/e*(2*Math.PI),a=Math.sin(l)*t,s=Math.cos(l)*t,p.push(0,0,0),p.push(a,0,s),d=1&c?r:o,f.push(d.r,d.g,d.b),f.push(d.r,d.g,d.b);for(c=0;c<=n;c++)for(d=1&c?r:o,h=t-t/n*c,u=0;u<i;u++)l=u/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b),l=(u+1)/i*(2*Math.PI),a=Math.sin(l)*h,s=Math.cos(l)*h,p.push(a,0,s),f.push(d.r,d.g,d.b);var m=new Br;m.addAttribute("position",new kr(p,3)),m.addAttribute("color",new kr(f,3));var v=new us({vertexColors:y});ds.call(this,m,v)}function bh(t,e,n,i){this.audio=t,this.range=e||1,this.divisionsInnerAngle=n||16,this.divisionsOuterAngle=i||2;var r=new Br,o=this.divisionsInnerAngle+2*this.divisionsOuterAngle,a=new Float32Array(3*(3*o+3));r.addAttribute("position",new Sr(a,3));var s=new us({color:65280}),l=new us({color:16776960});hs.call(this,r,[l,s]),this.update()}function xh(t,e,n,i){this.object=t,this.size=void 0!==e?e:1;var r=void 0!==n?n:16776960,o=void 0!==i?i:1,a=0,s=this.object.geometry;s&&s.isGeometry?a=s.faces.length:console.warn("THREE.FaceNormalsHelper: only THREE.Geometry is supported. Use THREE.VertexNormalsHelper, instead.");var l=new Br,c=new kr(2*a*3,3);l.addAttribute("position",c),ds.call(this,l,new us({color:r,linewidth:o})),this.matrixAutoUpdate=!1,this.update()}function wh(t,e,n){_r.call(this),this.light=t,this.light.updateMatrixWorld(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,void 0===e&&(e=1);var i=new Br;i.addAttribute("position",new kr([-e,e,0,e,e,0,e,-e,0,-e,-e,0,-e,e,0],3));var r=new us({fog:!1});this.lightPlane=new hs(i,r),this.add(this.lightPlane),i=new Br,i.addAttribute("position",new kr([0,0,0,0,0,1],3)),this.targetLine=new hs(i,r),this.add(this.targetLine),this.update()}function _h(t){var e=new Br,n=new us({color:16777215,vertexColors:g}),i=[],r=[],o={},a=new pr(16755200),s=new pr(16711680),l=new pr(43775),c=new pr(16777215),u=new pr(3355443);function h(t,e,n){d(t,n),d(e,n)}function d(t,e){i.push(0,0,0),r.push(e.r,e.g,e.b),void 0===o[t]&&(o[t]=[]),o[t].push(i.length/3-1)}h("n1","n2",a),h("n2","n4",a),h("n4","n3",a),h("n3","n1",a),h("f1","f2",a),h("f2","f4",a),h("f4","f3",a),h("f3","f1",a),h("n1","f1",a),h("n2","f2",a),h("n3","f3",a),h("n4","f4",a),h("p","n1",s),h("p","n2",s),h("p","n3",s),h("p","n4",s),h("u1","u2",l),h("u2","u3",l),h("u3","u1",l),h("c","t",c),h("p","c",u),h("cn1","cn2",u),h("cn3","cn4",u),h("cf1","cf2",u),h("cf3","cf4",u),e.addAttribute("position",new kr(i,3)),e.addAttribute("color",new kr(r,3)),ds.call(this,e,n),this.camera=t,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=t.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update()}function Mh(t,e){this.object=t,void 0===e&&(e=16776960);var n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),i=new Float32Array(24),r=new Br;r.setIndex(new Sr(n,1)),r.addAttribute("position",new Sr(i,3)),ds.call(this,r,new us({color:e})),this.matrixAutoUpdate=!1,this.update()}function Eh(t,e){this.type="Box3Helper",this.box=t;var n=void 0!==e?e:16776960,i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],o=new Br;o.setIndex(new Sr(i,1)),o.addAttribute("position",new kr(r,3)),ds.call(this,o,new us({color:n})),this.geometry.computeBoundingSphere()}function Sh(t,e,n){this.type="PlaneHelper",this.plane=t,this.size=void 0===e?1:e;var i=void 0!==n?n:16776960,r=[1,-1,1,-1,1,1,-1,-1,1,1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,1,0,0,1,0,0,0],o=new Br;o.addAttribute("position",new kr(r,3)),o.computeBoundingSphere(),hs.call(this,o,new us({color:i}));var a=[1,1,1,-1,1,1,-1,-1,1,1,1,1,-1,-1,1,1,-1,1],s=new Br;s.addAttribute("position",new kr(a,3)),s.computeBoundingSphere(),this.add(new Jr(s,new Zr({color:i,opacity:.2,transparent:!0,depthWrite:!1})))}function Th(t,e,n,i,r,o){_r.call(this),void 0===t&&(t=new Ne(0,0,1)),void 0===e&&(e=new Ne(0,0,0)),void 0===n&&(n=1),void 0===i&&(i=16776960),void 0===r&&(r=.2*n),void 0===o&&(o=.2*r),void 0===Wu&&(Wu=new Br,Wu.addAttribute("position",new kr([0,0,0,0,1,0],3)),$u=new Dl(0,.5,1,5,1),$u.translate(0,-.5,0)),this.position.copy(e),this.line=new hs(Wu,new us({color:i})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Jr($u,new Zr({color:i})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(t),this.setLength(n,r,o)}function Ah(t){t=t||1;var e=[0,0,0,t,0,0,0,0,0,0,t,0,0,0,0,0,0,t],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],i=new Br;i.addAttribute("position",new kr(e,3)),i.addAttribute("color",new kr(n,3));var r=new us({vertexColors:y});ds.call(this,i,r)}Object.assign(Yu.prototype,{getValue:function(t,e){this.bind();var n=this._targetGroup.nCachedObjects_,i=this._bindings[n];void 0!==i&&i.getValue(t,e)},setValue:function(t,e){for(var n=this._bindings,i=this._targetGroup.nCachedObjects_,r=n.length;i!==r;++i)n[i].setValue(t,e)},bind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].bind()},unbind:function(){for(var t=this._bindings,e=this._targetGroup.nCachedObjects_,n=t.length;e!==n;++e)t[e].unbind()}}),Object.assign(Xu,{Composite:Yu,create:function(t,e,n){return t&&t.isAnimationObjectGroup?new Xu.Composite(t,e,n):new Xu(t,e,n)},sanitizeNodeName:function(){var t=new RegExp("["+qu+"]","g");return function(e){return e.replace(/\s/g,"_").replace(t,"")}}(),parseTrackName:function(){var t="[^"+qu+"]",e="[^"+qu.replace("\\.","")+"]",n=/((?:WC+[\/:])*)/.source.replace("WC",t),i=/(WCOD+)?/.source.replace("WCOD",e),r=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",t),o=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",t),a=new RegExp("^"+n+i+r+o+"$"),s=["material","materials","bones"];return function(t){var e=a.exec(t);if(!e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);var n={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},i=n.nodeName&&n.nodeName.lastIndexOf(".");if(void 0!==i&&-1!==i){var r=n.nodeName.substring(i+1);-1!==s.indexOf(r)&&(n.nodeName=n.nodeName.substring(0,i),n.objectName=r)}if(null===n.propertyName||0===n.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return n}}(),findNode:function(t,e){if(!e||""===e||"root"===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){var n=t.skeleton.getBoneByName(e);if(void 0!==n)return n}if(t.children){var i=function(t){for(var n=0;n<t.length;n++){var r=t[n];if(r.name===e||r.uuid===e)return r;var o=i(r.children);if(o)return o}return null},r=i(t.children);if(r)return r}return null}}),Object.assign(Xu.prototype,{_getValue_unavailable:function(){},_setValue_unavailable:function(){},BindingType:{Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Versioning:{None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},GetterByBindingType:[function(t,e){t[e]=this.node[this.propertyName]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)t[e++]=n[i]},function(t,e){t[e]=this.resolvedProperty[this.propertyIndex]},function(t,e){this.resolvedProperty.toArray(t,e)}],SetterByBindingTypeAndVersioning:[[function(t,e){this.targetObject[this.propertyName]=t[e]},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++]},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.needsUpdate=!0},function(t,e){for(var n=this.resolvedProperty,i=0,r=n.length;i!==r;++i)n[i]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty[this.propertyIndex]=t[e]},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}],[function(t,e){this.resolvedProperty.fromArray(t,e)},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0},function(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}]],getValue:function(t,e){this.bind(),this.getValue(t,e)},setValue:function(t,e){this.bind(),this.setValue(t,e)},bind:function(){var t=this.node,e=this.parsedPath,n=e.objectName,i=e.propertyName,r=e.propertyIndex;if(t||(t=Xu.findNode(this.rootNode,e.nodeName)||this.rootNode,this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,t){if(n){var o=e.objectIndex;switch(n){case"materials":if(!t.material)return void console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(var a=0;a<t.length;a++)if(t[a].name===o){o=a;break}break;default:if(void 0===t[n])return void console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[n]}if(void 0!==o){if(void 0===t[o])return void console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[o]}}var s=t[i];if(void 0!==s){var l=this.Versioning.None;this.targetObject=t,void 0!==t.needsUpdate?l=this.Versioning.NeedsUpdate:void 0!==t.matrixWorldNeedsUpdate&&(l=this.Versioning.MatrixWorldNeedsUpdate);var c=this.BindingType.Direct;if(void 0!==r){if("morphTargetInfluences"===i){if(!t.geometry)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(t.geometry.isBufferGeometry){if(!t.geometry.morphAttributes)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);for(a=0;a<this.node.geometry.morphAttributes.position.length;a++)if(t.geometry.morphAttributes.position[a].name===r){r=a;break}}else{if(!t.geometry.morphTargets)return void console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.",this);for(a=0;a<this.node.geometry.morphTargets.length;a++)if(t.geometry.morphTargets[a].name===r){r=a;break}}}c=this.BindingType.ArrayElement,this.resolvedProperty=s,this.propertyIndex=r}else void 0!==s.fromArray&&void 0!==s.toArray?(c=this.BindingType.HasFromToArray,this.resolvedProperty=s):Array.isArray(s)?(c=this.BindingType.EntireArray,this.resolvedProperty=s):this.propertyName=i;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}else{var u=e.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+i+" but it wasn't found.",t)}}else console.error("THREE.PropertyBinding: Trying to update node for track: "+this.path+" but it wasn't found.")},unbind:function(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}),
//!\ DECLARE ALIAS AFTER assign prototype !
Object.assign(Xu.prototype,{_getValue_unbound:Xu.prototype.getValue,_setValue_unbound:Xu.prototype.setValue}),Object.assign(Zu.prototype,{isAnimationObjectGroup:!0,add:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._paths,o=this._parsedPaths,a=this._bindings,s=a.length,l=void 0,c=0,u=arguments.length;c!==u;++c){var h=arguments[c],d=h.uuid,p=i[d];if(void 0===p){p=e++,i[d]=p,t.push(h);for(var f=0,m=s;f!==m;++f)a[f].push(new Xu(h,r[f],o[f]))}else if(p<n){l=t[p];var v=--n,g=t[v];i[g.uuid]=p,t[p]=g,i[d]=v,t[v]=h;for(f=0,m=s;f!==m;++f){var y=a[f],b=y[v],x=y[p];y[p]=b,void 0===x&&(x=new Xu(h,r[f],o[f])),y[v]=x}}else t[p]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=n},remove:function(){for(var t=this._objects,e=this.nCachedObjects_,n=this._indicesByUUID,i=this._bindings,r=i.length,o=0,a=arguments.length;o!==a;++o){var s=arguments[o],l=s.uuid,c=n[l];if(void 0!==c&&c>=e){var u=e++,h=t[u];n[h.uuid]=c,t[c]=h,n[l]=u,t[u]=s;for(var d=0,p=r;d!==p;++d){var f=i[d],m=f[u],v=f[c];f[c]=m,f[u]=v}}}this.nCachedObjects_=e},uncache:function(){for(var t=this._objects,e=t.length,n=this.nCachedObjects_,i=this._indicesByUUID,r=this._bindings,o=r.length,a=0,s=arguments.length;a!==s;++a){var l=arguments[a],c=l.uuid,u=i[c];if(void 0!==u)if(delete i[c],u<n){var h=--n,d=t[h],p=--e,f=t[p];i[d.uuid]=u,t[u]=d,i[f.uuid]=h,t[h]=f,t.pop();for(var m=0,v=o;m!==v;++m){var g=r[m],y=g[h],b=g[p];g[u]=y,g[h]=b,g.pop()}}else{p=--e,f=t[p];i[f.uuid]=u,t[u]=f,t.pop();for(m=0,v=o;m!==v;++m){g=r[m];g[u]=g[p],g.pop()}}}this.nCachedObjects_=n},subscribe_:function(t,e){var n=this._bindingsIndicesByPath,i=n[t],r=this._bindings;if(void 0!==i)return r[i];var o=this._paths,a=this._parsedPaths,s=this._objects,l=s.length,c=this.nCachedObjects_,u=new Array(l);i=r.length,n[t]=i,o.push(t),a.push(e),r.push(u);for(var h=c,d=s.length;h!==d;++h){var p=s[h];u[h]=new Xu(p,t,e)}return u},unsubscribe_:function(t){var e=this._bindingsIndicesByPath,n=e[t];if(void 0!==n){var i=this._paths,r=this._parsedPaths,o=this._bindings,a=o.length-1,s=o[a],l=t[a];e[l]=n,o[n]=s,o.pop(),r[n]=r[a],r.pop(),i[n]=i[a],i.pop()}}}),Object.assign(Ju.prototype,{play:function(){return this._mixer._activateAction(this),this},stop:function(){return this._mixer._deactivateAction(this),this.reset()},reset:function(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()},isRunning:function(){return this.enabled&&!this.paused&&0!==this.timeScale&&null===this._startTime&&this._mixer._isActiveAction(this)},isScheduled:function(){return this._mixer._isActiveAction(this)},startAt:function(t){return this._startTime=t,this},setLoop:function(t,e){return this.loop=t,this.repetitions=e,this},setEffectiveWeight:function(t){return this.weight=t,this._effectiveWeight=this.enabled?t:0,this.stopFading()},getEffectiveWeight:function(){return this._effectiveWeight},fadeIn:function(t){return this._scheduleFading(t,0,1)},fadeOut:function(t){return this._scheduleFading(t,1,0)},crossFadeFrom:function(t,e,n){if(t.fadeOut(e),this.fadeIn(e),n){var i=this._clip.duration,r=t._clip.duration,o=r/i,a=i/r;t.warp(1,o,e),this.warp(a,1,e)}return this},crossFadeTo:function(t,e,n){return t.crossFadeFrom(this,e,n)},stopFading:function(){var t=this._weightInterpolant;return null!==t&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},setEffectiveTimeScale:function(t){return this.timeScale=t,this._effectiveTimeScale=this.paused?0:t,this.stopWarping()},getEffectiveTimeScale:function(){return this._effectiveTimeScale},setDuration:function(t){return this.timeScale=this._clip.duration/t,this.stopWarping()},syncWith:function(t){return this.time=t.time,this.timeScale=t.timeScale,this.stopWarping()},halt:function(t){return this.warp(this._effectiveTimeScale,0,t)},warp:function(t,e,n){var i=this._mixer,r=i.time,o=this._timeScaleInterpolant,a=this.timeScale;null===o&&(o=i._lendControlInterpolant(),this._timeScaleInterpolant=o);var s=o.parameterPositions,l=o.sampleValues;return s[0]=r,s[1]=r+n,l[0]=t/a,l[1]=e/a,this},stopWarping:function(){var t=this._timeScaleInterpolant;return null!==t&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(t)),this},getMixer:function(){return this._mixer},getClip:function(){return this._clip},getRoot:function(){return this._localRoot||this._mixer._root},_update:function(t,e,n,i){if(this.enabled){var r=this._startTime;if(null!==r){var o=(t-r)*n;if(o<0||0===n)return;this._startTime=null,e=n*o}e*=this._updateTimeScale(t);var a=this._updateTime(e),s=this._updateWeight(t);if(s>0)for(var l=this._interpolants,c=this._propertyBindings,u=0,h=l.length;u!==h;++u)l[u].evaluate(a),c[u].accumulate(i,s)}else this._updateWeight(t)},_updateWeight:function(t){var e=0;if(this.enabled){e=this.weight;var n=this._weightInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopFading(),0===i&&(this.enabled=!1))}}return this._effectiveWeight=e,e},_updateTimeScale:function(t){var e=0;if(!this.paused){e=this.timeScale;var n=this._timeScaleInterpolant;if(null!==n){var i=n.evaluate(t)[0];e*=i,t>n.parameterPositions[1]&&(this.stopWarping(),0===e?this.paused=!0:this.timeScale=e)}}return this._effectiveTimeScale=e,e},_updateTime:function(t){var e=this.time+t,n=this._clip.duration,i=this.loop,r=this._loopCount,o=i===de;if(0===t)return-1===r?e:o&&1===(1&r)?n-e:e;if(i===ue){-1===r&&(this._loopCount=0,this._setEndings(!0,!0,!1));t:{if(e>=n)e=n;else{if(!(e<0)){this.time=e;break t}e=0}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t<0?-1:1})}}else{if(-1===r&&(t>=0?(r=0,this._setEndings(!0,0===this.repetitions,o)):this._setEndings(0===this.repetitions,!0,o)),e>=n||e<0){var a=Math.floor(e/n);e-=n*a,r+=Math.abs(a);var s=this.repetitions-r;if(s<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,e=t>0?n:0,this.time=e,this._mixer.dispatchEvent({type:"finished",action:this,direction:t>0?1:-1});else{if(1===s){var l=t<0;this._setEndings(l,!l,o)}else this._setEndings(!1,!1,o);this._loopCount=r,this.time=e,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=e;if(o&&1===(1&r))return n-e}return e},_setEndings:function(t,e,n){var i=this._interpolantSettings;n?(i.endingStart=ge,i.endingEnd=ge):(i.endingStart=t?this.zeroSlopeAtStart?ge:ve:ye,i.endingEnd=e?this.zeroSlopeAtEnd?ge:ve:ye)},_scheduleFading:function(t,e,n){var i=this._mixer,r=i.time,o=this._weightInterpolant;null===o&&(o=i._lendControlInterpolant(),this._weightInterpolant=o);var a=o.parameterPositions,s=o.sampleValues;return a[0]=r,s[0]=e,a[1]=r+t,s[1]=n,this}}),Ku.prototype=Object.assign(Object.create(i.prototype),{constructor:Ku,_bindAction:function(t,e){var n=t._localRoot||this._root,i=t._clip.tracks,r=i.length,o=t._propertyBindings,a=t._interpolants,s=n.uuid,l=this._bindingsByRootAndName,c=l[s];void 0===c&&(c={},l[s]=c);for(var u=0;u!==r;++u){var h=i[u],d=h.name,p=c[d];if(void 0!==p)o[u]=p;else{if(p=o[u],void 0!==p){null===p._cacheIndex&&(++p.referenceCount,this._addInactiveBinding(p,s,d));continue}var f=e&&e._propertyBindings[u].binding.parsedPath;p=new Gu(Xu.create(n,d,f),h.ValueTypeName,h.getValueSize()),++p.referenceCount,this._addInactiveBinding(p,s,d),o[u]=p}a[u].resultBuffer=p.buffer}},_activateAction:function(t){if(!this._isActiveAction(t)){if(null===t._cacheIndex){var e=(t._localRoot||this._root).uuid,n=t._clip.uuid,i=this._actionsByClip[n];this._bindAction(t,i&&i.knownActions[0]),this._addInactiveAction(t,n,e)}for(var r=t._propertyBindings,o=0,a=r.length;o!==a;++o){var s=r[o];0===s.useCount++&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(t)}},_deactivateAction:function(t){if(this._isActiveAction(t)){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.useCount&&(r.restoreOriginalState(),this._takeBackBinding(r))}this._takeBackAction(t)}},_initMemoryManager:function(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;var t=this;this.stats={actions:{get total(){return t._actions.length},get inUse(){return t._nActiveActions}},bindings:{get total(){return t._bindings.length},get inUse(){return t._nActiveBindings}},controlInterpolants:{get total(){return t._controlInterpolants.length},get inUse(){return t._nActiveControlInterpolants}}}},_isActiveAction:function(t){var e=t._cacheIndex;return null!==e&&e<this._nActiveActions},_addInactiveAction:function(t,e,n){var i=this._actions,r=this._actionsByClip,o=r[e];if(void 0===o)o={knownActions:[t],actionByRoot:{}},t._byClipCacheIndex=0,r[e]=o;else{var a=o.knownActions;t._byClipCacheIndex=a.length,a.push(t)}t._cacheIndex=i.length,i.push(t),o.actionByRoot[n]=t},_removeInactiveAction:function(t){var e=this._actions,n=e[e.length-1],i=t._cacheIndex;n._cacheIndex=i,e[i]=n,e.pop(),t._cacheIndex=null;var r=t._clip.uuid,o=this._actionsByClip,a=o[r],s=a.knownActions,l=s[s.length-1],c=t._byClipCacheIndex;l._byClipCacheIndex=c,s[c]=l,s.pop(),t._byClipCacheIndex=null;var u=a.actionByRoot,h=(t._localRoot||this._root).uuid;delete u[h],0===s.length&&delete o[r],this._removeInactiveBindingsForAction(t)},_removeInactiveBindingsForAction:function(t){for(var e=t._propertyBindings,n=0,i=e.length;n!==i;++n){var r=e[n];0===--r.referenceCount&&this._removeInactiveBinding(r)}},_lendAction:function(t){var e=this._actions,n=t._cacheIndex,i=this._nActiveActions++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackAction:function(t){var e=this._actions,n=t._cacheIndex,i=--this._nActiveActions,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_addInactiveBinding:function(t,e,n){var i=this._bindingsByRootAndName,r=i[e],o=this._bindings;void 0===r&&(r={},i[e]=r),r[n]=t,t._cacheIndex=o.length,o.push(t)},_removeInactiveBinding:function(t){var e=this._bindings,n=t.binding,i=n.rootNode.uuid,r=n.path,o=this._bindingsByRootAndName,a=o[i],s=e[e.length-1],l=t._cacheIndex;s._cacheIndex=l,e[l]=s,e.pop(),delete a[r];t:{for(var c in a)break t;delete o[i]}},_lendBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=this._nActiveBindings++,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_takeBackBinding:function(t){var e=this._bindings,n=t._cacheIndex,i=--this._nActiveBindings,r=e[i];t._cacheIndex=i,e[i]=t,r._cacheIndex=n,e[n]=r},_lendControlInterpolant:function(){var t=this._controlInterpolants,e=this._nActiveControlInterpolants++,n=t[e];return void 0===n&&(n=new tc(new Float32Array(2),new Float32Array(2),1,this._controlInterpolantsResultBuffer),n.__cacheIndex=e,t[e]=n),n},_takeBackControlInterpolant:function(t){var e=this._controlInterpolants,n=t.__cacheIndex,i=--this._nActiveControlInterpolants,r=e[i];t.__cacheIndex=i,e[i]=t,r.__cacheIndex=n,e[n]=r},_controlInterpolantsResultBuffer:new Float32Array(1),clipAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"===typeof t?uc.findByName(n,t):t,o=null!==r?r.uuid:t,a=this._actionsByClip[o],s=null;if(void 0!==a){var l=a.actionByRoot[i];if(void 0!==l)return l;s=a.knownActions[0],null===r&&(r=s._clip)}if(null===r)return null;var c=new Ju(this,r,e);return this._bindAction(c,s),this._addInactiveAction(c,o,i),c},existingAction:function(t,e){var n=e||this._root,i=n.uuid,r="string"===typeof t?uc.findByName(n,t):t,o=r?r.uuid:t,a=this._actionsByClip[o];return void 0!==a&&a.actionByRoot[i]||null},stopAllAction:function(){var t=this._actions,e=this._nActiveActions,n=this._bindings,i=this._nActiveBindings;this._nActiveActions=0,this._nActiveBindings=0;for(var r=0;r!==e;++r)t[r].reset();for(r=0;r!==i;++r)n[r].useCount=0;return this},update:function(t){t*=this.timeScale;for(var e=this._actions,n=this._nActiveActions,i=this.time+=t,r=Math.sign(t),o=this._accuIndex^=1,a=0;a!==n;++a){var s=e[a];s._update(i,t,r,o)}var l=this._bindings,c=this._nActiveBindings;for(a=0;a!==c;++a)l[a].apply(o);return this},getRoot:function(){return this._root},uncacheClip:function(t){var e=this._actions,n=t.uuid,i=this._actionsByClip,r=i[n];if(void 0!==r){for(var o=r.knownActions,a=0,s=o.length;a!==s;++a){var l=o[a];this._deactivateAction(l);var c=l._cacheIndex,u=e[e.length-1];l._cacheIndex=null,l._byClipCacheIndex=null,u._cacheIndex=c,e[c]=u,e.pop(),this._removeInactiveBindingsForAction(l)}delete i[n]}},uncacheRoot:function(t){var e=t.uuid,n=this._actionsByClip;for(var i in n){var r=n[i].actionByRoot,o=r[e];void 0!==o&&(this._deactivateAction(o),this._removeInactiveAction(o))}var a=this._bindingsByRootAndName,s=a[e];if(void 0!==s)for(var l in s){var c=s[l];c.restoreOriginalState(),this._removeInactiveBinding(c)}},uncacheAction:function(t,e){var n=this.existingAction(t,e);null!==n&&(this._deactivateAction(n),this._removeInactiveAction(n))}}),Qu.prototype.clone=function(){return new Qu(void 0===this.value.clone?this.value:this.value.clone())},th.prototype=Object.assign(Object.create(ns.prototype),{constructor:th,isInstancedInterleavedBuffer:!0,copy:function(t){return ns.prototype.copy.call(this,t),this.meshPerAttribute=t.meshPerAttribute,this}}),Object.assign(eh.prototype,{linePrecision:1,set:function(t,e){this.ray.set(t,e)},setFromCamera:function(t,e){e&&e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize()):e&&e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld)):console.error("THREE.Raycaster: Unsupported camera type.")},intersectObject:function(t,e,n){var i=n||[];return ih(t,this,i,e),i.sort(nh),i},intersectObjects:function(t,e,n){var i=n||[];if(!1===Array.isArray(t))return console.warn("THREE.Raycaster.intersectObjects: objects is not an Array."),i;for(var r=0,o=t.length;r<o;r++)ih(t[r],this,i,e);return i.sort(nh),i}}),Object.assign(rh.prototype,{set:function(t,e,n){return this.radius=t,this.phi=e,this.theta=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.phi=t.phi,this.theta=t.theta,this},makeSafe:function(){var t=1e-6;return this.phi=Math.max(t,Math.min(Math.PI-t,this.phi)),this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+e*e+n*n),0===this.radius?(this.theta=0,this.phi=0):(this.theta=Math.atan2(t,n),this.phi=Math.acos(ke.clamp(e/this.radius,-1,1))),this}}),Object.assign(oh.prototype,{set:function(t,e,n){return this.radius=t,this.theta=e,this.y=n,this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.radius=t.radius,this.theta=t.theta,this.y=t.y,this},setFromVector3:function(t){return this.setFromCartesianCoords(t.x,t.y,t.z)},setFromCartesianCoords:function(t,e,n){return this.radius=Math.sqrt(t*t+n*n),this.theta=Math.atan2(t,n),this.y=e,this}}),Object.assign(ah.prototype,{set:function(t,e){return this.min.copy(t),this.max.copy(e),this},setFromPoints:function(t){this.makeEmpty();for(var e=0,n=t.length;e<n;e++)this.expandByPoint(t[e]);return this},setFromCenterAndSize:function(){var t=new De;return function(e,n){var i=t.copy(n).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}}(),clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.min.copy(t.min),this.max.copy(t.max),this},makeEmpty:function(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this},isEmpty:function(){return this.max.x<this.min.x||this.max.y<this.min.y},getCenter:function(t){return void 0===t&&(console.warn("THREE.Box2: .getCenter() target is now required"),t=new De),this.isEmpty()?t.set(0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)},getSize:function(t){return void 0===t&&(console.warn("THREE.Box2: .getSize() target is now required"),t=new De),this.isEmpty()?t.set(0,0):t.subVectors(this.max,this.min)},expandByPoint:function(t){return this.min.min(t),this.max.max(t),this},expandByVector:function(t){return this.min.sub(t),this.max.add(t),this},expandByScalar:function(t){return this.min.addScalar(-t),this.max.addScalar(t),this},containsPoint:function(t){return!(t.x<this.min.x||t.x>this.max.x||t.y<this.min.y||t.y>this.max.y)},containsBox:function(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y},getParameter:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .getParameter() target is now required"),e=new De),e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y))},intersectsBox:function(t){return!(t.max.x<this.min.x||t.min.x>this.max.x||t.max.y<this.min.y||t.min.y>this.max.y)},clampPoint:function(t,e){return void 0===e&&(console.warn("THREE.Box2: .clampPoint() target is now required"),e=new De),e.copy(t).clamp(this.min,this.max)},distanceToPoint:function(){var t=new De;return function(e){var n=t.copy(e).clamp(this.min,this.max);return n.sub(e).length()}}(),intersect:function(t){return this.min.max(t.min),this.max.min(t.max),this},union:function(t){return this.min.min(t.min),this.max.max(t.max),this},translate:function(t){return this.min.add(t),this.max.add(t),this},equals:function(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}),Object.assign(sh.prototype,{set:function(t,e){return this.start.copy(t),this.end.copy(e),this},clone:function(){return(new this.constructor).copy(this)},copy:function(t){return this.start.copy(t.start),this.end.copy(t.end),this},getCenter:function(t){return void 0===t&&(console.warn("THREE.Line3: .getCenter() target is now required"),t=new Ne),t.addVectors(this.start,this.end).multiplyScalar(.5)},delta:function(t){return void 0===t&&(console.warn("THREE.Line3: .delta() target is now required"),t=new Ne),t.subVectors(this.end,this.start)},distanceSq:function(){return this.start.distanceToSquared(this.end)},distance:function(){return this.start.distanceTo(this.end)},at:function(t,e){return void 0===e&&(console.warn("THREE.Line3: .at() target is now required"),e=new Ne),this.delta(e).multiplyScalar(t).add(this.start)},closestPointToPointParameter:function(){var t=new Ne,e=new Ne;return function(n,i){t.subVectors(n,this.start),e.subVectors(this.end,this.start);var r=e.dot(e),o=e.dot(t),a=o/r;return i&&(a=ke.clamp(a,0,1)),a}}(),closestPointToPoint:function(t,e,n){var i=this.closestPointToPointParameter(t,e);return void 0===n&&(console.warn("THREE.Line3: .closestPointToPoint() target is now required"),n=new Ne),this.delta(n).multiplyScalar(i).add(this.start)},applyMatrix4:function(t){return this.start.applyMatrix4(t),this.end.applyMatrix4(t),this},equals:function(t){return t.start.equals(this.start)&&t.end.equals(this.end)}}),lh.prototype=Object.create(_r.prototype),lh.prototype.constructor=lh,lh.prototype.isImmediateRenderObject=!0,ch.prototype=Object.create(ds.prototype),ch.prototype.constructor=ch,ch.prototype.update=function(){var t=new Ne,e=new Ne,n=new ze;return function(){var i=["a","b","c"];this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);var r=this.object.matrixWorld,o=this.geometry.attributes.position,a=this.object.geometry;if(a&&a.isGeometry)for(var s=a.vertices,l=a.faces,c=0,u=0,h=l.length;u<h;u++)for(var d=l[u],p=0,f=d.vertexNormals.length;p<f;p++){var m=s[d[i[p]]],v=d.vertexNormals[p];t.copy(m).applyMatrix4(r),e.copy(v).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}else if(a&&a.isBufferGeometry){var g=a.attributes.position,y=a.attributes.normal;for(c=0,p=0,f=g.count;p<f;p++)t.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(r),e.set(y.getX(p),y.getY(p),y.getZ(p)),e.applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),o.setXYZ(c,t.x,t.y,t.z),c+=1,o.setXYZ(c,e.x,e.y,e.z),c+=1}o.needsUpdate=!0}}(),uh.prototype=Object.create(_r.prototype),uh.prototype.constructor=uh,uh.prototype.dispose=function(){this.cone.geometry.dispose(),this.cone.material.dispose()},uh.prototype.update=function(){var t=new Ne;return function(){this.light.updateMatrixWorld();var e=this.light.distance?this.light.distance:1e3,n=e*Math.tan(this.light.angle);this.cone.scale.set(n,n,e),t.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(t),void 0!==this.color?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}(),dh.prototype=Object.create(ds.prototype),dh.prototype.constructor=dh,dh.prototype.updateMatrixWorld=function(){var t=new Ne,e=new Ze,n=new Ze;return function(i){var r=this.bones,o=this.geometry,a=o.getAttribute("position");n.getInverse(this.root.matrixWorld);for(var s=0,l=0;s<r.length;s++){var c=r[s];c.parent&&c.parent.isBone&&(e.multiplyMatrices(n,c.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(l,t.x,t.y,t.z),e.multiplyMatrices(n,c.parent.matrixWorld),t.setFromMatrixPosition(e),a.setXYZ(l+1,t.x,t.y,t.z),l+=2)}o.getAttribute("position").needsUpdate=!0,_r.prototype.updateMatrixWorld.call(this,i)}}(),ph.prototype=Object.create(Jr.prototype),ph.prototype.constructor=ph,ph.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},ph.prototype.update=function(){void 0!==this.color?this.material.color.set(this.color):this.material.color.copy(this.light.color)},fh.prototype=Object.create(hs.prototype),fh.prototype.constructor=fh,fh.prototype.update=function(){if(this.scale.set(.5*this.light.width,.5*this.light.height,1),void 0!==this.color)this.material.color.set(this.color),this.children[0].material.color.set(this.color);else{this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity);var t=this.material.color,e=Math.max(t.r,t.g,t.b);e>1&&t.multiplyScalar(1/e),this.children[0].material.color.copy(this.material.color)}},fh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()},mh.prototype=Object.create(_r.prototype),mh.prototype.constructor=mh,mh.prototype.dispose=function(){this.children[0].geometry.dispose(),this.children[0].material.dispose()},mh.prototype.update=function(){var t=new Ne,e=new pr,n=new pr;return function(){var i=this.children[0];if(void 0!==this.color)this.material.color.set(this.color);else{var r=i.geometry.getAttribute("color");e.copy(this.light.color),n.copy(this.light.groundColor);for(var o=0,a=r.count;o<a;o++){var s=o<a/2?e:n;r.setXYZ(o,s.r,s.g,s.b)}r.needsUpdate=!0}i.lookAt(t.setFromMatrixPosition(this.light.matrixWorld).negate())}}(),vh.prototype=Object.create(Jr.prototype),vh.prototype.constructor=vh,vh.prototype.dispose=function(){this.geometry.dispose(),this.material.dispose()},vh.prototype.onBeforeRender=function(){return function(){this.position.copy(this.lightProbe.position),this.scale.set(1,1,1).multiplyScalar(this.size),this.material.uniforms.intensity.value=this.lightProbe.intensity}}(),gh.prototype=Object.assign(Object.create(ds.prototype),{constructor:gh,copy:function(t){return ds.prototype.copy.call(this,t),this.geometry.copy(t.geometry),this.material.copy(t.material),this},clone:function(){return(new this.constructor).copy(this)}}),yh.prototype=Object.create(ds.prototype),yh.prototype.constructor=yh,bh.prototype=Object.create(hs.prototype),bh.prototype.constructor=bh,bh.prototype.update=function(){var t,e,n=this.audio,i=this.range,r=this.divisionsInnerAngle,o=this.divisionsOuterAngle,a=ke.degToRad(n.panner.coneInnerAngle),s=ke.degToRad(n.panner.coneOuterAngle),l=a/2,c=s/2,u=0,h=0,d=this.geometry,p=d.attributes.position;function f(n,r,o,a){var s=(r-n)/o;for(p.setXYZ(u,0,0,0),h++,t=n;t<r;t+=s)e=u+h,p.setXYZ(e,Math.sin(t)*i,0,Math.cos(t)*i),p.setXYZ(e+1,Math.sin(Math.min(t+s,r))*i,0,Math.cos(Math.min(t+s,r))*i),p.setXYZ(e+2,0,0,0),h+=3;d.addGroup(u,h,a),u+=h,h=0}d.clearGroups(),f(-c,-l,o,0),f(-l,l,r,1),f(l,c,o,0),p.needsUpdate=!0,a===s&&(this.material[0].visible=!1)},bh.prototype.dispose=function(){this.geometry.dispose(),this.material[0].dispose(),this.material[1].dispose()},xh.prototype=Object.create(ds.prototype),xh.prototype.constructor=xh,xh.prototype.update=function(){var t=new Ne,e=new Ne,n=new ze;return function(){this.object.updateMatrixWorld(!0),n.getNormalMatrix(this.object.matrixWorld);for(var i=this.object.matrixWorld,r=this.geometry.attributes.position,o=this.object.geometry,a=o.vertices,s=o.faces,l=0,c=0,u=s.length;c<u;c++){var h=s[c],d=h.normal;t.copy(a[h.a]).add(a[h.b]).add(a[h.c]).divideScalar(3).applyMatrix4(i),e.copy(d).applyMatrix3(n).normalize().multiplyScalar(this.size).add(t),r.setXYZ(l,t.x,t.y,t.z),l+=1,r.setXYZ(l,e.x,e.y,e.z),l+=1}r.needsUpdate=!0}}(),wh.prototype=Object.create(_r.prototype),wh.prototype.constructor=wh,wh.prototype.dispose=function(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()},wh.prototype.update=function(){var t=new Ne,e=new Ne,n=new Ne;return function(){t.setFromMatrixPosition(this.light.matrixWorld),e.setFromMatrixPosition(this.light.target.matrixWorld),n.subVectors(e,t),this.lightPlane.lookAt(e),void 0!==this.color?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(e),this.targetLine.scale.z=n.length()}}(),_h.prototype=Object.create(ds.prototype),_h.prototype.constructor=_h,_h.prototype.update=function(){var t,e,n=new Ne,i=new Va;function r(r,o,a,s){n.set(o,a,s).unproject(i);var l=e[r];if(void 0!==l)for(var c=t.getAttribute("position"),u=0,h=l.length;u<h;u++)c.setXYZ(l[u],n.x,n.y,n.z)}return function(){t=this.geometry,e=this.pointMap;var n=1,o=1;i.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),r("c",0,0,-1),r("t",0,0,1),r("n1",-n,-o,-1),r("n2",n,-o,-1),r("n3",-n,o,-1),r("n4",n,o,-1),r("f1",-n,-o,1),r("f2",n,-o,1),r("f3",-n,o,1),r("f4",n,o,1),r("u1",.7*n,1.1*o,-1),r("u2",.7*-n,1.1*o,-1),r("u3",0,2*o,-1),r("cf1",-n,0,1),r("cf2",n,0,1),r("cf3",0,-o,1),r("cf4",0,o,1),r("cn1",-n,0,-1),r("cn2",n,0,-1),r("cn3",0,-o,-1),r("cn4",0,o,-1),t.getAttribute("position").needsUpdate=!0}}(),Mh.prototype=Object.create(ds.prototype),Mh.prototype.constructor=Mh,Mh.prototype.update=function(){var t=new $e;return function(e){if(void 0!==e&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),void 0!==this.object&&t.setFromObject(this.object),!t.isEmpty()){var n=t.min,i=t.max,r=this.geometry.attributes.position,o=r.array;o[0]=i.x,o[1]=i.y,o[2]=i.z,o[3]=n.x,o[4]=i.y,o[5]=i.z,o[6]=n.x,o[7]=n.y,o[8]=i.z,o[9]=i.x,o[10]=n.y,o[11]=i.z,o[12]=i.x,o[13]=i.y,o[14]=n.z,o[15]=n.x,o[16]=i.y,o[17]=n.z,o[18]=n.x,o[19]=n.y,o[20]=n.z,o[21]=i.x,o[22]=n.y,o[23]=n.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}}}(),Mh.prototype.setFromObject=function(t){return this.object=t,this.update(),this},Mh.prototype.copy=function(t){return ds.prototype.copy.call(this,t),this.object=t.object,this},Mh.prototype.clone=function(){return(new this.constructor).copy(this)},Eh.prototype=Object.create(ds.prototype),Eh.prototype.constructor=Eh,Eh.prototype.updateMatrixWorld=function(t){var e=this.box;e.isEmpty()||(e.getCenter(this.position),e.getSize(this.scale),this.scale.multiplyScalar(.5),_r.prototype.updateMatrixWorld.call(this,t))},Sh.prototype=Object.create(hs.prototype),Sh.prototype.constructor=Sh,Sh.prototype.updateMatrixWorld=function(t){var e=-this.plane.constant;Math.abs(e)<1e-8&&(e=1e-8),this.scale.set(.5*this.size,.5*this.size,e),this.children[0].material.side=e<0?p:d,this.lookAt(this.plane.normal),_r.prototype.updateMatrixWorld.call(this,t)},Th.prototype=Object.create(_r.prototype),Th.prototype.constructor=Th,Th.prototype.setDirection=function(){var t,e=new Ne;return function(n){n.y>.99999?this.quaternion.set(0,0,0,1):n.y<-.99999?this.quaternion.set(1,0,0,0):(e.set(n.z,0,-n.x).normalize(),t=Math.acos(n.y),this.quaternion.setFromAxisAngle(e,t))}}(),Th.prototype.setLength=function(t,e,n){void 0===e&&(e=.2*t),void 0===n&&(n=.2*e),this.line.scale.set(1,Math.max(0,t-e),1),this.line.updateMatrix(),this.cone.scale.set(n,e,n),this.cone.position.y=t,this.cone.updateMatrix()},Th.prototype.setColor=function(t){this.line.material.color.copy(t),this.cone.material.color.copy(t)},Th.prototype.copy=function(t){return _r.prototype.copy.call(this,t,!1),this.line.copy(t.line),this.cone.copy(t.cone),this},Th.prototype.clone=function(){return(new this.constructor).copy(this)},Ah.prototype=Object.create(ds.prototype),Ah.prototype.constructor=Ah;function Ch(t){console.warn("THREE.ClosedSplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rc.call(this,t),this.type="catmullrom",this.closed=!0}function Lh(t){console.warn("THREE.SplineCurve3 has been deprecated. Use THREE.CatmullRomCurve3 instead."),Rc.call(this,t),this.type="catmullrom"}function Ph(t){console.warn("THREE.Spline has been removed. Use THREE.CatmullRomCurve3 instead."),Rc.call(this,t),this.type="catmullrom"}Ec.create=function(t,e){return console.log("THREE.Curve.create() has been deprecated"),t.prototype=Object.create(Ec.prototype),t.prototype.constructor=t,t.prototype.getPoint=e,t},Object.assign(Jc.prototype,{createPointsGeometry:function(t){console.warn("THREE.CurvePath: .createPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getPoints(t);return this.createGeometry(e)},createSpacedPointsGeometry:function(t){console.warn("THREE.CurvePath: .createSpacedPointsGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");var e=this.getSpacedPoints(t);return this.createGeometry(e)},createGeometry:function(t){console.warn("THREE.CurvePath: .createGeometry() has been removed. Use new THREE.Geometry().setFromPoints( points ) instead.");for(var e=new Er,n=0,i=t.length;n<i;n++){var r=t[n];e.vertices.push(new Ne(r.x,r.y,r.z||0))}return e}}),Object.assign(Kc.prototype,{fromPoints:function(t){console.warn("THREE.Path: .fromPoints() has been renamed to .setFromPoints()."),this.setFromPoints(t)}}),Ch.prototype=Object.create(Rc.prototype),Lh.prototype=Object.create(Rc.prototype),Ph.prototype=Object.create(Rc.prototype),Object.assign(Ph.prototype,{initFromArray:function(){console.error("THREE.Spline: .initFromArray() has been removed.")},getControlPointsArray:function(){console.error("THREE.Spline: .getControlPointsArray() has been removed.")},reparametrizeByArcLength:function(){console.error("THREE.Spline: .reparametrizeByArcLength() has been removed.")}}),gh.prototype.setColors=function(){console.error("THREE.GridHelper: setColors() has been deprecated, pass them in the constructor instead.")},dh.prototype.update=function(){console.error("THREE.SkeletonHelper: update() no longer needs to be called.")},Object.assign(Cu.prototype,{extractUrlBase:function(t){return console.warn("THREE.Loader: .extractUrlBase() has been deprecated. Use THREE.LoaderUtils.extractUrlBase() instead."),du.extractUrlBase(t)}}),Object.assign(gu.prototype,{setTexturePath:function(t){return console.warn("THREE.ObjectLoader: .setTexturePath() has been renamed to .setResourcePath()."),this.setResourcePath(t)}}),Object.assign(ah.prototype,{center:function(t){return console.warn("THREE.Box2: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box2: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box2: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},size:function(t){return console.warn("THREE.Box2: .size() has been renamed to .getSize()."),this.getSize(t)}}),Object.assign($e.prototype,{center:function(t){return console.warn("THREE.Box3: .center() has been renamed to .getCenter()."),this.getCenter(t)},empty:function(){return console.warn("THREE.Box3: .empty() has been renamed to .isEmpty()."),this.isEmpty()},isIntersectionBox:function(t){return console.warn("THREE.Box3: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionSphere:function(t){return console.warn("THREE.Box3: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)},size:function(t){return console.warn("THREE.Box3: .size() has been renamed to .getSize()."),this.getSize(t)}}),sh.prototype.center=function(t){return console.warn("THREE.Line3: .center() has been renamed to .getCenter()."),this.getCenter(t)},Object.assign(ke,{random16:function(){return console.warn("THREE.Math: .random16() has been deprecated. Use Math.random() instead."),Math.random()},nearestPowerOfTwo:function(t){return console.warn("THREE.Math: .nearestPowerOfTwo() has been renamed to .floorPowerOfTwo()."),ke.floorPowerOfTwo(t)},nextPowerOfTwo:function(t){return console.warn("THREE.Math: .nextPowerOfTwo() has been renamed to .ceilPowerOfTwo()."),ke.ceilPowerOfTwo(t)}}),Object.assign(ze.prototype,{flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix3: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},multiplyVector3:function(t){return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."),t.applyMatrix3(this)},multiplyVector3Array:function(){console.error("THREE.Matrix3: .multiplyVector3Array() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix3: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix3: .applyToVector3Array() has been removed.")}}),Object.assign(Ze.prototype,{extractPosition:function(t){return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."),this.copyPosition(t)},flattenToArrayOffset:function(t,e){return console.warn("THREE.Matrix4: .flattenToArrayOffset() has been deprecated. Use .toArray() instead."),this.toArray(t,e)},getPosition:function(){var t;return function(){return void 0===t&&(t=new Ne),console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead."),t.setFromMatrixColumn(this,3)}}(),setRotationFromQuaternion:function(t){return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."),this.makeRotationFromQuaternion(t)},multiplyToArray:function(){console.warn("THREE.Matrix4: .multiplyToArray() has been removed.")},multiplyVector3:function(t){return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector4:function(t){return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},multiplyVector3Array:function(){console.error("THREE.Matrix4: .multiplyVector3Array() has been removed.")},rotateAxis:function(t){console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."),t.transformDirection(this)},crossVector:function(t){return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."),t.applyMatrix4(this)},translate:function(){console.error("THREE.Matrix4: .translate() has been removed.")},rotateX:function(){console.error("THREE.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.error("THREE.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.error("THREE.Matrix4: .rotateZ() has been removed.")},rotateByAxis:function(){console.error("THREE.Matrix4: .rotateByAxis() has been removed.")},applyToBuffer:function(t){return console.warn("THREE.Matrix4: .applyToBuffer() has been removed. Use matrix.applyToBufferAttribute( attribute ) instead."),this.applyToBufferAttribute(t)},applyToVector3Array:function(){console.error("THREE.Matrix4: .applyToVector3Array() has been removed.")},makeFrustum:function(t,e,n,i,r,o){return console.warn("THREE.Matrix4: .makeFrustum() has been removed. Use .makePerspective( left, right, top, bottom, near, far ) instead."),this.makePerspective(t,e,i,n,r,o)}}),Ye.prototype.isIntersectionLine=function(t){return console.warn("THREE.Plane: .isIntersectionLine() has been renamed to .intersectsLine()."),this.intersectsLine(t)},Ie.prototype.multiplyVector3=function(t){return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."),t.applyQuaternion(this)},Object.assign(Yr.prototype,{isIntersectionBox:function(t){return console.warn("THREE.Ray: .isIntersectionBox() has been renamed to .intersectsBox()."),this.intersectsBox(t)},isIntersectionPlane:function(t){return console.warn("THREE.Ray: .isIntersectionPlane() has been renamed to .intersectsPlane()."),this.intersectsPlane(t)},isIntersectionSphere:function(t){return console.warn("THREE.Ray: .isIntersectionSphere() has been renamed to .intersectsSphere()."),this.intersectsSphere(t)}}),Object.assign(Xr.prototype,{area:function(){return console.warn("THREE.Triangle: .area() has been renamed to .getArea()."),this.getArea()},barycoordFromPoint:function(t,e){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),this.getBarycoord(t,e)},midpoint:function(t){return console.warn("THREE.Triangle: .midpoint() has been renamed to .getMidpoint()."),this.getMidpoint(t)},normal:function(t){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),this.getNormal(t)},plane:function(t){return console.warn("THREE.Triangle: .plane() has been renamed to .getPlane()."),this.getPlane(t)}}),Object.assign(Xr,{barycoordFromPoint:function(t,e,n,i,r){return console.warn("THREE.Triangle: .barycoordFromPoint() has been renamed to .getBarycoord()."),Xr.getBarycoord(t,e,n,i,r)},normal:function(t,e,n,i){return console.warn("THREE.Triangle: .normal() has been renamed to .getNormal()."),Xr.getNormal(t,e,n,i)}}),Object.assign(Qc.prototype,{extractAllPoints:function(t){return console.warn("THREE.Shape: .extractAllPoints() has been removed. Use .extractPoints() instead."),this.extractPoints(t)},extrude:function(t){return console.warn("THREE.Shape: .extrude() has been removed. Use ExtrudeGeometry() instead."),new gl(this,t)},makeGeometry:function(t){return console.warn("THREE.Shape: .makeGeometry() has been removed. Use ShapeGeometry() instead."),new Ll(this,t)}}),Object.assign(De.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector2: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector2: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector2: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Ne.prototype,{setEulerFromRotationMatrix:function(){console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},getPositionFromMatrix:function(t){return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."),this.setFromMatrixPosition(t)},getScaleFromMatrix:function(t){return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."),this.setFromMatrixScale(t)},getColumnFromMatrix:function(t,e){return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."),this.setFromMatrixColumn(e,t)},applyProjection:function(t){return console.warn("THREE.Vector3: .applyProjection() has been removed. Use .applyMatrix4( m ) instead."),this.applyMatrix4(t)},fromAttribute:function(t,e,n){return console.warn("THREE.Vector3: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},distanceToManhattan:function(t){return console.warn("THREE.Vector3: .distanceToManhattan() has been renamed to .manhattanDistanceTo()."),this.manhattanDistanceTo(t)},lengthManhattan:function(){return console.warn("THREE.Vector3: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(He.prototype,{fromAttribute:function(t,e,n){return console.warn("THREE.Vector4: .fromAttribute() has been renamed to .fromBufferAttribute()."),this.fromBufferAttribute(t,e,n)},lengthManhattan:function(){return console.warn("THREE.Vector4: .lengthManhattan() has been renamed to .manhattanLength()."),this.manhattanLength()}}),Object.assign(Er.prototype,{computeTangents:function(){console.error("THREE.Geometry: .computeTangents() has been removed.")},computeLineDistances:function(){console.error("THREE.Geometry: .computeLineDistances() has been removed. Use THREE.Line.computeLineDistances() instead.")}}),Object.assign(_r.prototype,{getChildByName:function(t){return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."),this.getObjectByName(t)},renderDepth:function(){console.warn("THREE.Object3D: .renderDepth has been removed. Use .renderOrder, instead.")},translate:function(t,e){return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."),this.translateOnAxis(e,t)},getWorldRotation:function(){console.error("THREE.Object3D: .getWorldRotation() has been removed. Use THREE.Object3D.getWorldQuaternion( target ) instead.")}}),Object.defineProperties(_r.prototype,{eulerOrder:{get:function(){return console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order},set:function(t){console.warn("THREE.Object3D: .eulerOrder is now .rotation.order."),this.rotation.order=t}},useQuaternion:{get:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")},set:function(){console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")}}}),Object.defineProperties(as.prototype,{objects:{get:function(){return console.warn("THREE.LOD: .objects has been renamed to .levels."),this.levels}}}),Object.defineProperty(ls.prototype,"useVertexTexture",{get:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")},set:function(){console.warn("THREE.Skeleton: useVertexTexture has been removed.")}}),ss.prototype.initBones=function(){console.error("THREE.SkinnedMesh: initBones() has been removed.")},Object.defineProperty(Ec.prototype,"__arcLengthDivisions",{get:function(){return console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions},set:function(t){console.warn("THREE.Curve: .__arcLengthDivisions is now .arcLengthDivisions."),this.arcLengthDivisions=t}}),Ga.prototype.setLens=function(t,e){console.warn("THREE.PerspectiveCamera.setLens is deprecated. Use .setFocalLength and .filmGauge for a photographic setup."),void 0!==e&&(this.filmGauge=e),this.setFocalLength(t)},Object.defineProperties(tu.prototype,{onlyShadow:{set:function(){console.warn("THREE.Light: .onlyShadow has been removed.")}},shadowCameraFov:{set:function(t){console.warn("THREE.Light: .shadowCameraFov is now .shadow.camera.fov."),this.shadow.camera.fov=t}},shadowCameraLeft:{set:function(t){console.warn("THREE.Light: .shadowCameraLeft is now .shadow.camera.left."),this.shadow.camera.left=t}},shadowCameraRight:{set:function(t){console.warn("THREE.Light: .shadowCameraRight is now .shadow.camera.right."),this.shadow.camera.right=t}},shadowCameraTop:{set:function(t){console.warn("THREE.Light: .shadowCameraTop is now .shadow.camera.top."),this.shadow.camera.top=t}},shadowCameraBottom:{set:function(t){console.warn("THREE.Light: .shadowCameraBottom is now .shadow.camera.bottom."),this.shadow.camera.bottom=t}},shadowCameraNear:{set:function(t){console.warn("THREE.Light: .shadowCameraNear is now .shadow.camera.near."),this.shadow.camera.near=t}},shadowCameraFar:{set:function(t){console.warn("THREE.Light: .shadowCameraFar is now .shadow.camera.far."),this.shadow.camera.far=t}},shadowCameraVisible:{set:function(){console.warn("THREE.Light: .shadowCameraVisible has been removed. Use new THREE.CameraHelper( light.shadow.camera ) instead.")}},shadowBias:{set:function(t){console.warn("THREE.Light: .shadowBias is now .shadow.bias."),this.shadow.bias=t}},shadowDarkness:{set:function(){console.warn("THREE.Light: .shadowDarkness has been removed.")}},shadowMapWidth:{set:function(t){console.warn("THREE.Light: .shadowMapWidth is now .shadow.mapSize.width."),this.shadow.mapSize.width=t}},shadowMapHeight:{set:function(t){console.warn("THREE.Light: .shadowMapHeight is now .shadow.mapSize.height."),this.shadow.mapSize.height=t}}}),Object.defineProperties(Sr.prototype,{length:{get:function(){return console.warn("THREE.BufferAttribute: .length has been deprecated. Use .count instead."),this.array.length}},copyIndicesArray:function(){console.error("THREE.BufferAttribute: .copyIndicesArray() has been removed.")}}),Object.assign(Br.prototype,{addIndex:function(t){console.warn("THREE.BufferGeometry: .addIndex() has been renamed to .setIndex()."),this.setIndex(t)},addDrawCall:function(t,e,n){void 0!==n&&console.warn("THREE.BufferGeometry: .addDrawCall() no longer supports indexOffset."),console.warn("THREE.BufferGeometry: .addDrawCall() is now .addGroup()."),this.addGroup(t,e)},clearDrawCalls:function(){console.warn("THREE.BufferGeometry: .clearDrawCalls() is now .clearGroups()."),this.clearGroups()},computeTangents:function(){console.warn("THREE.BufferGeometry: .computeTangents() has been removed.")},computeOffsets:function(){console.warn("THREE.BufferGeometry: .computeOffsets() has been removed.")}}),Object.defineProperties(Br.prototype,{drawcalls:{get:function(){return console.error("THREE.BufferGeometry: .drawcalls has been renamed to .groups."),this.groups}},offsets:{get:function(){return console.warn("THREE.BufferGeometry: .offsets has been renamed to .groups."),this.groups}}}),Object.assign(yl.prototype,{getArrays:function(){console.error("THREE.ExtrudeBufferGeometry: .getArrays() has been removed.")},addShapeList:function(){console.error("THREE.ExtrudeBufferGeometry: .addShapeList() has been removed.")},addShape:function(){console.error("THREE.ExtrudeBufferGeometry: .addShape() has been removed.")}}),Object.defineProperties(Qu.prototype,{dynamic:{set:function(){console.warn("THREE.Uniform: .dynamic has been removed. Use object.onBeforeRender() instead.")}},onUpdate:{value:function(){return console.warn("THREE.Uniform: .onUpdate() has been removed. Use object.onBeforeRender() instead."),this}}}),Object.defineProperties(Gr.prototype,{wrapAround:{get:function(){console.warn("THREE.Material: .wrapAround has been removed.")},set:function(){console.warn("THREE.Material: .wrapAround has been removed.")}},overdraw:{get:function(){console.warn("THREE.Material: .overdraw has been removed.")},set:function(){console.warn("THREE.Material: .overdraw has been removed.")}},wrapRGB:{get:function(){return console.warn("THREE.Material: .wrapRGB has been removed."),new pr}},shading:{get:function(){console.error("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead.")},set:function(t){console.warn("THREE."+this.type+": .shading has been removed. Use the boolean .flatShading instead."),this.flatShading=t===m}}}),Object.defineProperties(Gl.prototype,{metal:{get:function(){return console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead."),!1},set:function(){console.warn("THREE.MeshPhongMaterial: .metal has been removed. Use THREE.MeshStandardMaterial instead")}}}),Object.defineProperties(qr.prototype,{derivatives:{get:function(){return console.warn("THREE.ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives},set:function(t){console.warn("THREE. ShaderMaterial: .derivatives has been moved to .extensions.derivatives."),this.extensions.derivatives=t}}}),Object.assign(Ka.prototype,{clearTarget:function(t,e,n,i){console.warn("THREE.WebGLRenderer: .clearTarget() has been deprecated. Use .setRenderTarget() and .clear() instead."),this.setRenderTarget(t),this.clear(e,n,i)},animate:function(t){console.warn("THREE.WebGLRenderer: .animate() is now .setAnimationLoop()."),this.setAnimationLoop(t)},getCurrentRenderTarget:function(){return console.warn("THREE.WebGLRenderer: .getCurrentRenderTarget() is now .getRenderTarget()."),this.getRenderTarget()},getMaxAnisotropy:function(){return console.warn("THREE.WebGLRenderer: .getMaxAnisotropy() is now .capabilities.getMaxAnisotropy()."),this.capabilities.getMaxAnisotropy()},getPrecision:function(){return console.warn("THREE.WebGLRenderer: .getPrecision() is now .capabilities.precision."),this.capabilities.precision},resetGLState:function(){return console.warn("THREE.WebGLRenderer: .resetGLState() is now .state.reset()."),this.state.reset()},supportsFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsFloatTextures() is now .extensions.get( 'OES_texture_float' )."),this.extensions.get("OES_texture_float")},supportsHalfFloatTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsHalfFloatTextures() is now .extensions.get( 'OES_texture_half_float' )."),this.extensions.get("OES_texture_half_float")},supportsStandardDerivatives:function(){return console.warn("THREE.WebGLRenderer: .supportsStandardDerivatives() is now .extensions.get( 'OES_standard_derivatives' )."),this.extensions.get("OES_standard_derivatives")},supportsCompressedTextureS3TC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTextureS3TC() is now .extensions.get( 'WEBGL_compressed_texture_s3tc' )."),this.extensions.get("WEBGL_compressed_texture_s3tc")},supportsCompressedTexturePVRTC:function(){return console.warn("THREE.WebGLRenderer: .supportsCompressedTexturePVRTC() is now .extensions.get( 'WEBGL_compressed_texture_pvrtc' )."),this.extensions.get("WEBGL_compressed_texture_pvrtc")},supportsBlendMinMax:function(){return console.warn("THREE.WebGLRenderer: .supportsBlendMinMax() is now .extensions.get( 'EXT_blend_minmax' )."),this.extensions.get("EXT_blend_minmax")},supportsVertexTextures:function(){return console.warn("THREE.WebGLRenderer: .supportsVertexTextures() is now .capabilities.vertexTextures."),this.capabilities.vertexTextures},supportsInstancedArrays:function(){return console.warn("THREE.WebGLRenderer: .supportsInstancedArrays() is now .extensions.get( 'ANGLE_instanced_arrays' )."),this.extensions.get("ANGLE_instanced_arrays")},enableScissorTest:function(t){console.warn("THREE.WebGLRenderer: .enableScissorTest() is now .setScissorTest()."),this.setScissorTest(t)},initMaterial:function(){console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")},addPrePlugin:function(){console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")},addPostPlugin:function(){console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")},updateShadowMap:function(){console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")},setFaceCulling:function(){console.warn("THREE.WebGLRenderer: .setFaceCulling() has been removed.")},allocTextureUnit:function(){console.warn("THREE.WebGLRenderer: .allocTextureUnit() has been removed.")},setTexture:function(){console.warn("THREE.WebGLRenderer: .setTexture() has been removed.")},setTexture2D:function(){console.warn("THREE.WebGLRenderer: .setTexture2D() has been removed.")},setTextureCube:function(){console.warn("THREE.WebGLRenderer: .setTextureCube() has been removed.")}}),Object.defineProperties(Ka.prototype,{shadowMapEnabled:{get:function(){return this.shadowMap.enabled},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapEnabled is now .shadowMap.enabled."),this.shadowMap.enabled=t}},shadowMapType:{get:function(){return this.shadowMap.type},set:function(t){console.warn("THREE.WebGLRenderer: .shadowMapType is now .shadowMap.type."),this.shadowMap.type=t}},shadowMapCullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMapCullFace has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ba.prototype,{cullFace:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.cullFace has been removed. Set Material.shadowSide instead.")}},renderReverseSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderReverseSided has been removed. Set Material.shadowSide instead.")}},renderSingleSided:{get:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")},set:function(){console.warn("THREE.WebGLRenderer: .shadowMap.renderSingleSided has been removed. Set Material.shadowSide instead.")}}}),Object.defineProperties(Ge.prototype,{activeCubeFace:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeCubeFace has been removed. It is now the second parameter of WebGLRenderer.setRenderTarget().")}},activeMipMapLevel:{set:function(){console.warn("THREE.WebGLRenderTargetCube: .activeMipMapLevel has been removed. It is now the third parameter of WebGLRenderer.setRenderTarget().")}}}),Object.defineProperties(Ue.prototype,{wrapS:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapS is now .texture.wrapS."),this.texture.wrapS=t}},wrapT:{get:function(){return console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT},set:function(t){console.warn("THREE.WebGLRenderTarget: .wrapT is now .texture.wrapT."),this.texture.wrapT=t}},magFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .magFilter is now .texture.magFilter."),this.texture.magFilter=t}},minFilter:{get:function(){return console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter},set:function(t){console.warn("THREE.WebGLRenderTarget: .minFilter is now .texture.minFilter."),this.texture.minFilter=t}},anisotropy:{get:function(){return console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy},set:function(t){console.warn("THREE.WebGLRenderTarget: .anisotropy is now .texture.anisotropy."),this.texture.anisotropy=t}},offset:{get:function(){return console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset},set:function(t){console.warn("THREE.WebGLRenderTarget: .offset is now .texture.offset."),this.texture.offset=t}},repeat:{get:function(){return console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat},set:function(t){console.warn("THREE.WebGLRenderTarget: .repeat is now .texture.repeat."),this.texture.repeat=t}},format:{get:function(){return console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format},set:function(t){console.warn("THREE.WebGLRenderTarget: .format is now .texture.format."),this.texture.format=t}},type:{get:function(){return console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type},set:function(t){console.warn("THREE.WebGLRenderTarget: .type is now .texture.type."),this.texture.type=t}},generateMipmaps:{get:function(){return console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps},set:function(t){console.warn("THREE.WebGLRenderTarget: .generateMipmaps is now .texture.generateMipmaps."),this.texture.generateMipmaps=t}}}),Object.defineProperties(Za.prototype,{standing:{set:function(){console.warn("THREE.WebVRManager: .standing has been removed.")}},userHeight:{set:function(){console.warn("THREE.WebVRManager: .userHeight has been removed.")}}}),Hu.prototype.load=function(t){console.warn("THREE.Audio: .load has been deprecated. Use THREE.AudioLoader instead.");var e=this,n=new Pu;return n.load(t,function(t){e.setBuffer(t)}),this},Vu.prototype.getData=function(){return console.warn("THREE.AudioAnalyser: .getData() is now .getFrequencyData()."),this.getFrequencyData()},Bu.prototype.updateCubeMap=function(t,e){return console.warn("THREE.CubeCamera: .updateCubeMap() is now .update()."),this.update(t,e)};Be.crossOrigin=void 0,Be.loadTexture=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTexture has been deprecated. Use THREE.TextureLoader() instead.");var r=new Mc;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},Be.loadTextureCube=function(t,e,n,i){console.warn("THREE.ImageUtils.loadTextureCube has been deprecated. Use THREE.CubeTextureLoader() instead.");var r=new _c;r.setCrossOrigin(this.crossOrigin);var o=r.load(t,n,void 0,i);return e&&(o.mapping=e),o},Be.loadCompressedTexture=function(){console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")},Be.loadCompressedTextureCube=function(){console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")}},ac4d:function(t,e,n){n("3a72")("asyncIterator")},ac6a:function(t,e,n){for(var i=n("cadf"),r=n("0d58"),o=n("2aba"),a=n("7726"),s=n("32e9"),l=n("84f2"),c=n("2b4c"),u=c("iterator"),h=c("toStringTag"),d=l.Array,p={CSSRuleList:!0,CSSStyleDeclaration:!1,CSSValueList:!1,ClientRectList:!1,DOMRectList:!1,DOMStringList:!1,DOMTokenList:!0,DataTransferItemList:!1,FileList:!1,HTMLAllCollection:!1,HTMLCollection:!1,HTMLFormElement:!1,HTMLSelectElement:!1,MediaList:!0,MimeTypeArray:!1,NamedNodeMap:!1,NodeList:!0,PaintRequestList:!1,Plugin:!1,PluginArray:!1,SVGLengthList:!1,SVGNumberList:!1,SVGPathSegList:!1,SVGPointList:!1,SVGStringList:!1,SVGTransformList:!1,SourceBufferList:!1,StyleSheetList:!0,TextTrackCueList:!1,TextTrackList:!1,TouchList:!1},f=r(p),m=0;m<f.length;m++){var v,g=f[m],y=p[g],b=a[g],x=b&&b.prototype;if(x&&(x[u]||s(x,u,d),x[h]||s(x,h,g),l[g]=d,y))for(v in i)x[v]||o(x,v,i[v],!0)}},ae37:function(t,e){t.exports=function(t){function e(e,n){this.object=e,this.domElement=void 0!==n?n:document,this.enabled=!0,this.target=new t.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.25,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:t.MOUSE.LEFT,ZOOM:t.MOUSE.MIDDLE,PAN:t.MOUSE.RIGHT},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return u.phi},this.getAzimuthalAngle=function(){return u.theta},this.reset=function(){i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=s.NONE},this.update=function(){var n=new t.Vector3,o=(new t.Quaternion).setFromUnitVectors(e.up,new t.Vector3(0,1,0)),a=o.clone().inverse(),m=new t.Vector3,v=new t.Quaternion;return function(){var t=i.object.position;return n.copy(t).sub(i.target),n.applyQuaternion(o),u.setFromVector3(n),i.autoRotate&&l===s.NONE&&T(E()),u.theta+=h.theta,u.phi+=h.phi,u.theta=Math.max(i.minAzimuthAngle,Math.min(i.maxAzimuthAngle,u.theta)),u.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,u.phi)),u.makeSafe(),u.radius*=d,u.radius=Math.max(i.minDistance,Math.min(i.maxDistance,u.radius)),i.target.add(p),n.setFromSpherical(u),n.applyQuaternion(a),t.copy(i.target).add(n),i.object.lookAt(i.target),!0===i.enableDamping?(h.theta*=1-i.dampingFactor,h.phi*=1-i.dampingFactor):h.set(0,0,0),d=1,p.set(0,0,0),!!(f||m.distanceToSquared(i.object.position)>c||8*(1-v.dot(i.object.quaternion))>c)&&(i.dispatchEvent(r),m.copy(i.object.position),v.copy(i.object.quaternion),f=!1,!0)}}(),this.dispose=function(){i.domElement.removeEventListener("contextmenu",it,!1),i.domElement.removeEventListener("mousedown",X,!1),i.domElement.removeEventListener("wheel",K,!1),i.domElement.removeEventListener("touchstart",tt,!1),i.domElement.removeEventListener("touchend",nt,!1),i.domElement.removeEventListener("touchmove",et,!1),document.removeEventListener("mousemove",Z,!1),document.removeEventListener("mouseup",J,!1),window.removeEventListener("keydown",Q,!1)};var i=this,r={type:"change"},o={type:"start"},a={type:"end"},s={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},l=s.NONE,c=1e-6,u=new t.Spherical,h=new t.Spherical,d=1,p=new t.Vector3,f=!1,m=new t.Vector2,v=new t.Vector2,g=new t.Vector2,y=new t.Vector2,b=new t.Vector2,x=new t.Vector2,w=new t.Vector2,_=new t.Vector2,M=new t.Vector2;function E(){return 2*Math.PI/60/60*i.autoRotateSpeed}function S(){return Math.pow(.95,i.zoomSpeed)}function T(t){h.theta-=t}function A(t){h.phi-=t}var C=function(){var e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,0),e.multiplyScalar(-t),p.add(e)}}(),L=function(){var e=new t.Vector3;return function(t,n){e.setFromMatrixColumn(n,1),e.multiplyScalar(t),p.add(e)}}(),P=function(){var e=new t.Vector3;return function(n,r){var o=i.domElement===document?i.domElement.body:i.domElement;if(i.object instanceof t.PerspectiveCamera){var a=i.object.position;e.copy(a).sub(i.target);var s=e.length();s*=Math.tan(i.object.fov/2*Math.PI/180),C(2*n*s/o.clientHeight,i.object.matrix),L(2*r*s/o.clientHeight,i.object.matrix)}else i.object instanceof t.OrthographicCamera?(C(n*(i.object.right-i.object.left)/i.object.zoom/o.clientWidth,i.object.matrix),L(r*(i.object.top-i.object.bottom)/i.object.zoom/o.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}}();function O(e){i.object instanceof t.PerspectiveCamera?d/=e:i.object instanceof t.OrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom*e)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function R(e){i.object instanceof t.PerspectiveCamera?d*=e:i.object instanceof t.OrthographicCamera?(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/e)),i.object.updateProjectionMatrix(),f=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function k(t){m.set(t.clientX,t.clientY)}function D(t){w.set(t.clientX,t.clientY)}function I(t){y.set(t.clientX,t.clientY)}function N(t){v.set(t.clientX,t.clientY),g.subVectors(v,m);var e=i.domElement===document?i.domElement.body:i.domElement;T(2*Math.PI*g.x/e.clientWidth*i.rotateSpeed),A(2*Math.PI*g.y/e.clientHeight*i.rotateSpeed),m.copy(v),i.update()}function z(t){_.set(t.clientX,t.clientY),M.subVectors(_,w),M.y>0?O(S()):M.y<0&&R(S()),w.copy(_),i.update()}function B(t){b.set(t.clientX,t.clientY),x.subVectors(b,y),P(x.x,x.y),y.copy(b),i.update()}function F(t){}function j(t){t.deltaY<0?R(S()):t.deltaY>0&&O(S()),i.update()}function H(t){switch(t.keyCode){case i.keys.UP:P(0,i.keyPanSpeed),i.update();break;case i.keys.BOTTOM:P(0,-i.keyPanSpeed),i.update();break;case i.keys.LEFT:P(i.keyPanSpeed,0),i.update();break;case i.keys.RIGHT:P(-i.keyPanSpeed,0),i.update();break}}function U(t){m.set(t.touches[0].pageX,t.touches[0].pageY)}function V(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);w.set(0,i)}function G(t){y.set(t.touches[0].pageX,t.touches[0].pageY)}function W(t){v.set(t.touches[0].pageX,t.touches[0].pageY),g.subVectors(v,m);var e=i.domElement===document?i.domElement.body:i.domElement;T(2*Math.PI*g.x/e.clientWidth*i.rotateSpeed),A(2*Math.PI*g.y/e.clientHeight*i.rotateSpeed),m.copy(v),i.update()}function $(t){var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,r=Math.sqrt(e*e+n*n);_.set(0,r),M.subVectors(_,w),M.y>0?R(S()):M.y<0&&O(S()),w.copy(_),i.update()}function q(t){b.set(t.touches[0].pageX,t.touches[0].pageY),x.subVectors(b,y),P(x.x,x.y),y.copy(b),i.update()}function Y(t){}function X(t){if(!1!==i.enabled){if(t.preventDefault(),t.button===i.mouseButtons.ORBIT){if(!1===i.enableRotate)return;k(t),l=s.ROTATE}else if(t.button===i.mouseButtons.ZOOM){if(!1===i.enableZoom)return;D(t),l=s.DOLLY}else if(t.button===i.mouseButtons.PAN){if(!1===i.enablePan)return;I(t),l=s.PAN}l!==s.NONE&&(document.addEventListener("mousemove",Z,!1),document.addEventListener("mouseup",J,!1),i.dispatchEvent(o))}}function Z(t){if(!1!==i.enabled)if(t.preventDefault(),l===s.ROTATE){if(!1===i.enableRotate)return;N(t)}else if(l===s.DOLLY){if(!1===i.enableZoom)return;z(t)}else if(l===s.PAN){if(!1===i.enablePan)return;B(t)}}function J(t){!1!==i.enabled&&(F(t),document.removeEventListener("mousemove",Z,!1),document.removeEventListener("mouseup",J,!1),i.dispatchEvent(a),l=s.NONE)}function K(t){!1===i.enabled||!1===i.enableZoom||l!==s.NONE&&l!==s.ROTATE||(t.preventDefault(),t.stopPropagation(),j(t),i.dispatchEvent(o),i.dispatchEvent(a))}function Q(t){!1!==i.enabled&&!1!==i.enableKeys&&!1!==i.enablePan&&H(t)}function tt(t){if(!1!==i.enabled){switch(t.touches.length){case 1:if(!1===i.enableRotate)return;U(t),l=s.TOUCH_ROTATE;break;case 2:if(!1===i.enableZoom)return;V(t),l=s.TOUCH_DOLLY;break;case 3:if(!1===i.enablePan)return;G(t),l=s.TOUCH_PAN;break;default:l=s.NONE}l!==s.NONE&&i.dispatchEvent(o)}}function et(t){if(!1!==i.enabled)switch(t.preventDefault(),t.stopPropagation(),t.touches.length){case 1:if(!1===i.enableRotate)return;if(l!==s.TOUCH_ROTATE)return;W(t);break;case 2:if(!1===i.enableZoom)return;if(l!==s.TOUCH_DOLLY)return;$(t);break;case 3:if(!1===i.enablePan)return;if(l!==s.TOUCH_PAN)return;q(t);break;default:l=s.NONE}}function nt(t){!1!==i.enabled&&(Y(t),i.dispatchEvent(a),l=s.NONE)}function it(t){t.preventDefault()}i.domElement.addEventListener("contextmenu",it,!1),i.domElement.addEventListener("mousedown",X,!1),i.domElement.addEventListener("wheel",K,!1),i.domElement.addEventListener("touchstart",tt,!1),i.domElement.addEventListener("touchend",nt,!1),i.domElement.addEventListener("touchmove",et,!1),window.addEventListener("keydown",Q,!1),this.update()}return e.prototype=Object.create(t.EventDispatcher.prototype),e.prototype.constructor=e,Object.defineProperties(e.prototype,{center:{get:function(){return console.warn("THREE.OrbitControls: .center has been renamed to .target"),this.target}},noZoom:{get:function(){return console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),!this.enableZoom},set:function(t){console.warn("THREE.OrbitControls: .noZoom has been deprecated. Use .enableZoom instead."),this.enableZoom=!t}},noRotate:{get:function(){return console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),!this.enableRotate},set:function(t){console.warn("THREE.OrbitControls: .noRotate has been deprecated. Use .enableRotate instead."),this.enableRotate=!t}},noPan:{get:function(){return console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),!this.enablePan},set:function(t){console.warn("THREE.OrbitControls: .noPan has been deprecated. Use .enablePan instead."),this.enablePan=!t}},noKeys:{get:function(){return console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),!this.enableKeys},set:function(t){console.warn("THREE.OrbitControls: .noKeys has been deprecated. Use .enableKeys instead."),this.enableKeys=!t}},staticMoving:{get:function(){return console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),!this.enableDamping},set:function(t){console.warn("THREE.OrbitControls: .staticMoving has been deprecated. Use .enableDamping instead."),this.enableDamping=!t}},dynamicDampingFactor:{get:function(){return console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor},set:function(t){console.warn("THREE.OrbitControls: .dynamicDampingFactor has been renamed. Use .dampingFactor instead."),this.dampingFactor=t}}}),e}},aebd:function(t,e){t.exports=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}}},b447:function(t,e,n){var i=n("3a38"),r=Math.min;t.exports=function(t){return t>0?r(i(t),9007199254740991):0}},b50d:function(t,e,n){"use strict";var i=n("c532"),r=n("467f"),o=n("7aac"),a=n("30b5"),s=n("83b9"),l=n("c345"),c=n("3934"),u=n("2d83");t.exports=function(t){return new Promise(function(e,n){var h=t.data,d=t.headers;i.isFormData(h)&&delete d["Content-Type"];var p=new XMLHttpRequest;if(t.auth){var f=t.auth.username||"",m=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";d.Authorization="Basic "+btoa(f+":"+m)}var v=s(t.baseURL,t.url);if(p.open(t.method.toUpperCase(),a(v,t.params,t.paramsSerializer),!0),p.timeout=t.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var i="getAllResponseHeaders"in p?l(p.getAllResponseHeaders()):null,o=t.responseType&&"text"!==t.responseType?p.response:p.responseText,a={data:o,status:p.status,statusText:p.statusText,headers:i,config:t,request:p};r(e,n,a),p=null}},p.onabort=function(){p&&(n(u("Request aborted",t,"ECONNABORTED",p)),p=null)},p.onerror=function(){n(u("Network Error",t,null,p)),p=null},p.ontimeout=function(){var e="timeout of "+t.timeout+"ms exceeded";t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(u(e,t,"ECONNABORTED",p)),p=null},i.isStandardBrowserEnv()){var g=(t.withCredentials||c(v))&&t.xsrfCookieName?o.read(t.xsrfCookieName):void 0;g&&(d[t.xsrfHeaderName]=g)}if("setRequestHeader"in p&&i.forEach(d,function(t,e){"undefined"===typeof h&&"content-type"===e.toLowerCase()?delete d[e]:p.setRequestHeader(e,t)}),i.isUndefined(t.withCredentials)||(p.withCredentials=!!t.withCredentials),t.responseType)try{p.responseType=t.responseType}catch(y){if("json"!==t.responseType)throw y}"function"===typeof t.onDownloadProgress&&p.addEventListener("progress",t.onDownloadProgress),"function"===typeof t.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",t.onUploadProgress),t.cancelToken&&t.cancelToken.promise.then(function(t){p&&(p.abort(),n(t),p=null)}),h||(h=null),p.send(h)})}},b8e3:function(t,e){t.exports=!0},bc3a:function(t,e,n){t.exports=n("cee4")},bcaa:function(t,e,n){var i=n("cb7c"),r=n("d3f4"),o=n("a5b8");t.exports=function(t,e){if(i(t),r(e)&&e.constructor===t)return e;var n=o.f(t),a=n.resolve;return a(e),n.promise}},be13:function(t,e){t.exports=function(t){if(void 0==t)throw TypeError("Can't call method on  "+t);return t}},bf0b:function(t,e,n){var i=n("355d"),r=n("aebd"),o=n("36c3"),a=n("1bc3"),s=n("07e3"),l=n("794b"),c=Object.getOwnPropertyDescriptor;e.f=n("8e60")?c:function(t,e){if(t=o(t),e=a(e,!0),l)try{return c(t,e)}catch(n){}if(s(t,e))return r(!i.f.call(t,e),t[e])}},c098:function(t,e,n){t.exports=n("d4af")},c207:function(t,e){},c284:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=119)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},119:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"el-progress",class:["el-progress--"+t.type,t.status?"is-"+t.status:"",{"el-progress--without-text":!t.showText,"el-progress--text-inside":t.textInside}],attrs:{role:"progressbar","aria-valuenow":t.percentage,"aria-valuemin":"0","aria-valuemax":"100"}},["line"===t.type?n("div",{staticClass:"el-progress-bar"},[n("div",{staticClass:"el-progress-bar__outer",style:{height:t.strokeWidth+"px"}},[n("div",{staticClass:"el-progress-bar__inner",style:t.barStyle},[t.showText&&t.textInside?n("div",{staticClass:"el-progress-bar__innerText"},[t._v(t._s(t.content))]):t._e()])])]):n("div",{staticClass:"el-progress-circle",style:{height:t.width+"px",width:t.width+"px"}},[n("svg",{attrs:{viewBox:"0 0 100 100"}},[n("path",{staticClass:"el-progress-circle__track",style:t.trailPathStyle,attrs:{d:t.trackPath,stroke:"#e5e9f2","stroke-width":t.relativeStrokeWidth,fill:"none"}}),n("path",{staticClass:"el-progress-circle__path",style:t.circlePathStyle,attrs:{d:t.trackPath,stroke:t.stroke,fill:"none","stroke-linecap":t.strokeLinecap,"stroke-width":t.percentage?t.relativeStrokeWidth:0}})])]),t.showText&&!t.textInside?n("div",{staticClass:"el-progress__text",style:{fontSize:t.progressTextSize+"px"}},[t.status?n("i",{class:t.iconClass}):[t._v(t._s(t.content))]],2):t._e()])},r=[];i._withStripped=!0;var o={name:"ElProgress",props:{type:{type:String,default:"line",validator:function(t){return["line","circle","dashboard"].indexOf(t)>-1}},percentage:{type:Number,default:0,required:!0,validator:function(t){return t>=0&&t<=100}},status:{type:String,validator:function(t){return["success","exception","warning"].indexOf(t)>-1}},strokeWidth:{type:Number,default:6},strokeLinecap:{type:String,default:"round"},textInside:{type:Boolean,default:!1},width:{type:Number,default:126},showText:{type:Boolean,default:!0},color:{type:[String,Array,Function],default:""},format:Function},computed:{barStyle:function(){var t={};return t.width=this.percentage+"%",t.backgroundColor=this.getCurrentColor(this.percentage),t},relativeStrokeWidth:function(){return(this.strokeWidth/this.width*100).toFixed(1)},radius:function(){return"circle"===this.type||"dashboard"===this.type?parseInt(50-parseFloat(this.relativeStrokeWidth)/2,10):0},trackPath:function(){var t=this.radius,e="dashboard"===this.type;return"\n        M 50 50\n        m 0 "+(e?"":"-")+t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"-":"")+2*t+"\n        a "+t+" "+t+" 0 1 1 0 "+(e?"":"-")+2*t+"\n        "},perimeter:function(){return 2*Math.PI*this.radius},rate:function(){return"dashboard"===this.type?.75:1},strokeDashoffset:function(){var t=-1*this.perimeter*(1-this.rate)/2;return t+"px"},trailPathStyle:function(){return{strokeDasharray:this.perimeter*this.rate+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset}},circlePathStyle:function(){return{strokeDasharray:this.perimeter*this.rate*(this.percentage/100)+"px, "+this.perimeter+"px",strokeDashoffset:this.strokeDashoffset,transition:"stroke-dasharray 0.6s ease 0s, stroke 0.6s ease"}},stroke:function(){var t=void 0;if(this.color)t=this.getCurrentColor(this.percentage);else switch(this.status){case"success":t="#13ce66";break;case"exception":t="#ff4949";break;case"warning":t="#e6a23c";break;default:t="#20a0ff"}return t},iconClass:function(){return"warning"===this.status?"el-icon-warning":"line"===this.type?"success"===this.status?"el-icon-circle-check":"el-icon-circle-close":"success"===this.status?"el-icon-check":"el-icon-close"},progressTextSize:function(){return"line"===this.type?12+.4*this.strokeWidth:.111111*this.width+2},content:function(){return"function"===typeof this.format?this.format(this.percentage)||"":this.percentage+"%"}},methods:{getCurrentColor:function(t){return"function"===typeof this.color?this.color(t):"string"===typeof this.color?this.color:this.getLevelColor(t)},getLevelColor:function(t){for(var e=this.getColorArray().sort(function(t,e){return t.percentage-e.percentage}),n=0;n<e.length;n++)if(e[n].percentage>t)return e[n].color;return e[e.length-1].color},getColorArray:function(){var t=this.color,e=100/t.length;return t.map(function(t,n){return"string"===typeof t?{color:t,percentage:(n+1)*e}:t})}}},a=o,s=n(0),l=Object(s["a"])(a,i,r,!1,null,null,null);l.options.__file="packages/progress/src/progress.vue";var c=l.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},c345:function(t,e,n){"use strict";var i=n("c532"),r=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];t.exports=function(t){var e,n,o,a={};return t?(i.forEach(t.split("\n"),function(t){if(o=t.indexOf(":"),e=i.trim(t.substr(0,o)).toLowerCase(),n=i.trim(t.substr(o+1)),e){if(a[e]&&r.indexOf(e)>=0)return;a[e]="set-cookie"===e?(a[e]?a[e]:[]).concat([n]):a[e]?a[e]+", "+n:n}}),a):a}},c366:function(t,e,n){var i=n("6821"),r=n("9def"),o=n("77f1");t.exports=function(t){return function(e,n,a){var s,l=i(e),c=r(l.length),u=o(a,c);if(t&&n!=n){while(c>u)if(s=l[u++],s!=s)return!0}else for(;c>u;u++)if((t||u in l)&&l[u]===n)return t||u||0;return!t&&-1}}},c367:function(t,e,n){"use strict";var i=n("8436"),r=n("50ed"),o=n("481b"),a=n("36c3");t.exports=n("30f1")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},c3a1:function(t,e,n){var i=n("e6f3"),r=n("1691");t.exports=Object.keys||function(t){return i(t,r)}},c401:function(t,e,n){"use strict";var i=n("c532");t.exports=function(t,e,n){return i.forEach(n,function(n){t=n(t,e)}),t}},c532:function(t,e,n){"use strict";var i=n("1d2b"),r=Object.prototype.toString;function o(t){return"[object Array]"===r.call(t)}function a(t){return"undefined"===typeof t}function s(t){return null!==t&&!a(t)&&null!==t.constructor&&!a(t.constructor)&&"function"===typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}function l(t){return"[object ArrayBuffer]"===r.call(t)}function c(t){return"undefined"!==typeof FormData&&t instanceof FormData}function u(t){var e;return e="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&t.buffer instanceof ArrayBuffer,e}function h(t){return"string"===typeof t}function d(t){return"number"===typeof t}function p(t){return null!==t&&"object"===typeof t}function f(t){if("[object Object]"!==r.call(t))return!1;var e=Object.getPrototypeOf(t);return null===e||e===Object.prototype}function m(t){return"[object Date]"===r.call(t)}function v(t){return"[object File]"===r.call(t)}function g(t){return"[object Blob]"===r.call(t)}function y(t){return"[object Function]"===r.call(t)}function b(t){return p(t)&&y(t.pipe)}function x(t){return"undefined"!==typeof URLSearchParams&&t instanceof URLSearchParams}function w(t){return t.replace(/^\s*/,"").replace(/\s*$/,"")}function _(){return("undefined"===typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!==typeof window&&"undefined"!==typeof document)}function M(t,e){if(null!==t&&"undefined"!==typeof t)if("object"!==typeof t&&(t=[t]),o(t))for(var n=0,i=t.length;n<i;n++)e.call(null,t[n],n,t);else for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.call(null,t[r],r,t)}function E(){var t={};function e(e,n){f(t[n])&&f(e)?t[n]=E(t[n],e):f(e)?t[n]=E({},e):o(e)?t[n]=e.slice():t[n]=e}for(var n=0,i=arguments.length;n<i;n++)M(arguments[n],e);return t}function S(t,e,n){return M(e,function(e,r){t[r]=n&&"function"===typeof e?i(e,n):e}),t}function T(t){return 65279===t.charCodeAt(0)&&(t=t.slice(1)),t}t.exports={isArray:o,isArrayBuffer:l,isBuffer:s,isFormData:c,isArrayBufferView:u,isString:h,isNumber:d,isObject:p,isPlainObject:f,isUndefined:a,isDate:m,isFile:v,isBlob:g,isFunction:y,isStream:b,isURLSearchParams:x,isStandardBrowserEnv:_,forEach:M,merge:E,extend:S,trim:w,stripBOM:T}},c56a:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!t||!e)throw new Error("instance & callback is required");var r=!1,o=function(){r||(r=!0,e&&e.apply(null,arguments))};i?t.$once("after-leave",o):t.$on("after-leave",o),setTimeout(function(){o()},n+100)}},c69a:function(t,e,n){t.exports=!n("9e1e")&&!n("79e5")(function(){return 7!=Object.defineProperty(n("230e")("div"),"a",{get:function(){return 7}}).a})},c8af:function(t,e,n){"use strict";var i=n("c532");t.exports=function(t,e){i.forEach(t,function(n,i){i!==e&&i.toUpperCase()===e.toUpperCase()&&(t[e]=n,delete t[i])})}},c8ba:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(i){"object"===typeof window&&(n=window)}t.exports=n},ca5a:function(t,e){var n=0,i=Math.random();t.exports=function(t){return"Symbol(".concat(void 0===t?"":t,")_",(++n+i).toString(36))}},cadf:function(t,e,n){"use strict";var i=n("9c6c"),r=n("d53b"),o=n("84f2"),a=n("6821");t.exports=n("01f9")(Array,"Array",function(t,e){this._t=a(t),this._i=0,this._k=e},function(){var t=this._t,e=this._k,n=this._i++;return!t||n>=t.length?(this._t=void 0,r(1)):r(0,"keys"==e?n:"values"==e?t[n]:[n,t[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},cb7c:function(t,e,n){var i=n("d3f4");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},ccb9:function(t,e,n){e.f=n("5168")},ce10:function(t,e,n){var i=n("69a8"),r=n("6821"),o=n("c366")(!1),a=n("613b")("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);while(e.length>l)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},cee4:function(t,e,n){"use strict";var i=n("c532"),r=n("1d2b"),o=n("0a06"),a=n("4a7b"),s=n("2444");function l(t){var e=new o(t),n=r(o.prototype.request,e);return i.extend(n,o.prototype,e),i.extend(n,e),n}var c=l(s);c.Axios=o,c.create=function(t){return l(a(c.defaults,t))},c.Cancel=n("7a77"),c.CancelToken=n("8df4"),c.isCancel=n("2e67"),c.all=function(t){return Promise.all(t)},c.spread=n("0df6"),c.isAxiosError=n("5f02"),t.exports=c,t.exports.default=c},d010:function(t,e,n){"use strict";function i(t,e,n){this.$children.forEach(function(r){var o=r.$options.componentName;o===t?r.$emit.apply(r,[e].concat(n)):i.apply(r,[t,e].concat([n]))})}e.__esModule=!0,e.default={methods:{dispatch:function(t,e,n){var i=this.$parent||this.$root,r=i.$options.componentName;while(i&&(!r||r!==t))i=i.$parent,i&&(r=i.$options.componentName);i&&i.$emit.apply(i,[e].concat(n))},broadcast:function(t,e,n){i.call(this,t,e,n)}}}},d397:function(t,e,n){"use strict";function i(t){return void 0!==t&&null!==t}function r(t){var e=/([(\uAC00-\uD7AF)|(\u3130-\u318F)])+/gi;return e.test(t)}e.__esModule=!0,e.isDef=i,e.isKorean=r},d3f4:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},d4af:function(t,e,n){"use strict";var i=n("8eb7"),r=n("7b3e"),o=10,a=40,s=800;function l(t){var e=0,n=0,i=0,r=0;return"detail"in t&&(n=t.detail),"wheelDelta"in t&&(n=-t.wheelDelta/120),"wheelDeltaY"in t&&(n=-t.wheelDeltaY/120),"wheelDeltaX"in t&&(e=-t.wheelDeltaX/120),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(e=n,n=0),i=e*o,r=n*o,"deltaY"in t&&(r=t.deltaY),"deltaX"in t&&(i=t.deltaX),(i||r)&&t.deltaMode&&(1==t.deltaMode?(i*=a,r*=a):(i*=s,r*=s)),i&&!e&&(e=i<1?-1:1),r&&!n&&(n=r<1?-1:1),{spinX:e,spinY:n,pixelX:i,pixelY:r}}l.getEventType=function(){return i.firefox()?"DOMMouseScroll":r("wheel")?"wheel":"mousewheel"},t.exports=l},d4c0:function(t,e,n){var i=n("0d58"),r=n("2621"),o=n("52a7");t.exports=function(t){var e=i(t),n=r.f;if(n){var a,s=n(t),l=o.f,c=0;while(s.length>c)l.call(t,a=s[c++])&&e.push(a)}return e}},d53b:function(t,e){t.exports=function(t,e){return{value:e,done:!!t}}},d7d1:function(t,e,n){"use strict";var i;(function(r){var o={},a=/d{1,4}|M{1,4}|yy(?:yy)?|S{1,3}|Do|ZZ|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,s="\\d\\d?",l="\\d{3}",c="\\d{4}",u="[^\\s]+",h=/\[([^]*?)\]/gm,d=function(){};function p(t){return t.replace(/[|\\{()[^$+*?.-]/g,"\\$&")}function f(t,e){for(var n=[],i=0,r=t.length;i<r;i++)n.push(t[i].substr(0,e));return n}function m(t){return function(e,n,i){var r=i[t].indexOf(n.charAt(0).toUpperCase()+n.substr(1).toLowerCase());~r&&(e.month=r)}}function v(t,e){t=String(t),e=e||2;while(t.length<e)t="0"+t;return t}var g=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],y=["January","February","March","April","May","June","July","August","September","October","November","December"],b=f(y,3),x=f(g,3);o.i18n={dayNamesShort:x,dayNames:g,monthNamesShort:b,monthNames:y,amPm:["am","pm"],DoFn:function(t){return t+["th","st","nd","rd"][t%10>3?0:(t-t%10!==10)*t%10]}};var w={D:function(t){return t.getDay()},DD:function(t){return v(t.getDay())},Do:function(t,e){return e.DoFn(t.getDate())},d:function(t){return t.getDate()},dd:function(t){return v(t.getDate())},ddd:function(t,e){return e.dayNamesShort[t.getDay()]},dddd:function(t,e){return e.dayNames[t.getDay()]},M:function(t){return t.getMonth()+1},MM:function(t){return v(t.getMonth()+1)},MMM:function(t,e){return e.monthNamesShort[t.getMonth()]},MMMM:function(t,e){return e.monthNames[t.getMonth()]},yy:function(t){return v(String(t.getFullYear()),4).substr(2)},yyyy:function(t){return v(t.getFullYear(),4)},h:function(t){return t.getHours()%12||12},hh:function(t){return v(t.getHours()%12||12)},H:function(t){return t.getHours()},HH:function(t){return v(t.getHours())},m:function(t){return t.getMinutes()},mm:function(t){return v(t.getMinutes())},s:function(t){return t.getSeconds()},ss:function(t){return v(t.getSeconds())},S:function(t){return Math.round(t.getMilliseconds()/100)},SS:function(t){return v(Math.round(t.getMilliseconds()/10),2)},SSS:function(t){return v(t.getMilliseconds(),3)},a:function(t,e){return t.getHours()<12?e.amPm[0]:e.amPm[1]},A:function(t,e){return t.getHours()<12?e.amPm[0].toUpperCase():e.amPm[1].toUpperCase()},ZZ:function(t){var e=t.getTimezoneOffset();return(e>0?"-":"+")+v(100*Math.floor(Math.abs(e)/60)+Math.abs(e)%60,4)}},_={d:[s,function(t,e){t.day=e}],Do:[s+u,function(t,e){t.day=parseInt(e,10)}],M:[s,function(t,e){t.month=e-1}],yy:[s,function(t,e){var n=new Date,i=+(""+n.getFullYear()).substr(0,2);t.year=""+(e>68?i-1:i)+e}],h:[s,function(t,e){t.hour=e}],m:[s,function(t,e){t.minute=e}],s:[s,function(t,e){t.second=e}],yyyy:[c,function(t,e){t.year=e}],S:["\\d",function(t,e){t.millisecond=100*e}],SS:["\\d{2}",function(t,e){t.millisecond=10*e}],SSS:[l,function(t,e){t.millisecond=e}],D:[s,d],ddd:[u,d],MMM:[u,m("monthNamesShort")],MMMM:[u,m("monthNames")],a:[u,function(t,e,n){var i=e.toLowerCase();i===n.amPm[0]?t.isPm=!1:i===n.amPm[1]&&(t.isPm=!0)}],ZZ:["[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z",function(t,e){var n,i=(e+"").match(/([+-]|\d\d)/gi);i&&(n=60*i[1]+parseInt(i[2],10),t.timezoneOffset="+"===i[0]?n:-n)}]};_.dd=_.d,_.dddd=_.ddd,_.DD=_.D,_.mm=_.m,_.hh=_.H=_.HH=_.h,_.MM=_.M,_.ss=_.s,_.A=_.a,o.masks={default:"ddd MMM dd yyyy HH:mm:ss",shortDate:"M/D/yy",mediumDate:"MMM d, yyyy",longDate:"MMMM d, yyyy",fullDate:"dddd, MMMM d, yyyy",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},o.format=function(t,e,n){var i=n||o.i18n;if("number"===typeof t&&(t=new Date(t)),"[object Date]"!==Object.prototype.toString.call(t)||isNaN(t.getTime()))throw new Error("Invalid Date in fecha.format");e=o.masks[e]||e||o.masks["default"];var r=[];return e=e.replace(h,function(t,e){return r.push(e),"@@@"}),e=e.replace(a,function(e){return e in w?w[e](t,i):e.slice(1,e.length-1)}),e.replace(/@@@/g,function(){return r.shift()})},o.parse=function(t,e,n){var i=n||o.i18n;if("string"!==typeof e)throw new Error("Invalid format in fecha.parse");if(e=o.masks[e]||e,t.length>1e3)return null;var r={},s=[],l=[];e=e.replace(h,function(t,e){return l.push(e),"@@@"});var c=p(e).replace(a,function(t){if(_[t]){var e=_[t];return s.push(e[1]),"("+e[0]+")"}return t});c=c.replace(/@@@/g,function(){return l.shift()});var u=t.match(new RegExp(c,"i"));if(!u)return null;for(var d=1;d<u.length;d++)s[d-1](r,u[d],i);var f,m=new Date;return!0===r.isPm&&null!=r.hour&&12!==+r.hour?r.hour=+r.hour+12:!1===r.isPm&&12===+r.hour&&(r.hour=0),null!=r.timezoneOffset?(r.minute=+(r.minute||0)-+r.timezoneOffset,f=new Date(Date.UTC(r.year||m.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0))):f=new Date(r.year||m.getFullYear(),r.month||0,r.day||1,r.hour||0,r.minute||0,r.second||0,r.millisecond||0),f},t.exports?t.exports=o:(i=function(){return o}.call(e,n,e,t),void 0===i||(t.exports=i))})()},d864:function(t,e,n){var i=n("79aa");t.exports=function(t,e,n){if(i(t),void 0===e)return t;switch(n){case 1:return function(n){return t.call(e,n)};case 2:return function(n,i){return t.call(e,n,i)};case 3:return function(n,i,r){return t.call(e,n,i,r)}}return function(){return t.apply(e,arguments)}}},d8d6:function(t,e,n){n("1654"),n("6c1c"),t.exports=n("ccb9").f("iterator")},d8e8:function(t,e){t.exports=function(t){if("function"!=typeof t)throw TypeError(t+" is not a function!");return t}},d925:function(t,e,n){"use strict";t.exports=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}},d940:function(t,e,n){"use strict";e.__esModule=!0,e.validateRangeInOneMonth=e.extractTimeFormat=e.extractDateFormat=e.nextYear=e.prevYear=e.nextMonth=e.prevMonth=e.changeYearMonthAndClampDate=e.timeWithinRange=e.limitTimeRange=e.clearMilliseconds=e.clearTime=e.modifyWithTimeString=e.modifyTime=e.modifyDate=e.range=e.getRangeMinutes=e.getMonthDays=e.getPrevMonthLastDays=e.getRangeHours=e.getWeekNumber=e.getStartDateOfMonth=e.nextDate=e.prevDate=e.getFirstDayOfMonth=e.getDayCountOfYear=e.getDayCountOfMonth=e.parseDate=e.formatDate=e.isDateObject=e.isDate=e.toDate=e.getI18nSettings=void 0;var i=n("d7d1"),r=a(i),o=n("4897");function a(t){return t&&t.__esModule?t:{default:t}}var s=["sun","mon","tue","wed","thu","fri","sat"],l=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],c=function(t,e){for(var n=[],i=t;i<=e;i++)n.push(i);return n},u=e.getI18nSettings=function(){return{dayNamesShort:s.map(function(t){return(0,o.t)("el.datepicker.weeks."+t)}),dayNames:s.map(function(t){return(0,o.t)("el.datepicker.weeks."+t)}),monthNamesShort:l.map(function(t){return(0,o.t)("el.datepicker.months."+t)}),monthNames:l.map(function(t,e){return(0,o.t)("el.datepicker.month"+(e+1))}),amPm:["am","pm"]}},h=e.toDate=function(t){return d(t)?new Date(t):null},d=e.isDate=function(t){return null!==t&&void 0!==t&&(!isNaN(new Date(t).getTime())&&!Array.isArray(t))},p=(e.isDateObject=function(t){return t instanceof Date},e.formatDate=function(t,e){return t=h(t),t?r.default.format(t,e||"yyyy-MM-dd",u()):""},e.parseDate=function(t,e){return r.default.parse(t,e||"yyyy-MM-dd",u())}),f=e.getDayCountOfMonth=function(t,e){return 3===e||5===e||8===e||10===e?30:1===e?t%4===0&&t%100!==0||t%400===0?29:28:31},m=(e.getDayCountOfYear=function(t){var e=t%400===0||t%100!==0&&t%4===0;return e?366:365},e.getFirstDayOfMonth=function(t){var e=new Date(t.getTime());return e.setDate(1),e.getDay()},e.prevDate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(t.getFullYear(),t.getMonth(),t.getDate()-e)});e.nextDate=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Date(t.getFullYear(),t.getMonth(),t.getDate()+e)},e.getStartDateOfMonth=function(t,e){var n=new Date(t,e,1),i=n.getDay();return m(n,0===i?7:i)},e.getWeekNumber=function(t){if(!d(t))return null;var e=new Date(t.getTime());e.setHours(0,0,0,0),e.setDate(e.getDate()+3-(e.getDay()+6)%7);var n=new Date(e.getFullYear(),0,4);return 1+Math.round(((e.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},e.getRangeHours=function(t){var e=[],n=[];if((t||[]).forEach(function(t){var e=t.map(function(t){return t.getHours()});n=n.concat(c(e[0],e[1]))}),n.length)for(var i=0;i<24;i++)e[i]=-1===n.indexOf(i);else for(var r=0;r<24;r++)e[r]=!1;return e},e.getPrevMonthLastDays=function(t,e){if(e<=0)return[];var n=new Date(t.getTime());n.setDate(0);var i=n.getDate();return g(e).map(function(t,n){return i-(e-n-1)})},e.getMonthDays=function(t){var e=new Date(t.getFullYear(),t.getMonth()+1,0),n=e.getDate();return g(n).map(function(t,e){return e+1})};function v(t,e,n,i){for(var r=e;r<n;r++)t[r]=i}e.getRangeMinutes=function(t,e){var n=new Array(60);return t.length>0?t.forEach(function(t){var i=t[0],r=t[1],o=i.getHours(),a=i.getMinutes(),s=r.getHours(),l=r.getMinutes();o===e&&s!==e?v(n,a,60,!0):o===e&&s===e?v(n,a,l+1,!0):o!==e&&s===e?v(n,0,l+1,!0):o<e&&s>e&&v(n,0,60,!0)}):v(n,0,60,!0),n};var g=e.range=function(t){return Array.apply(null,{length:t}).map(function(t,e){return e})},y=e.modifyDate=function(t,e,n,i){return new Date(e,n,i,t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())},b=e.modifyTime=function(t,e,n,i){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),e,n,i,t.getMilliseconds())},x=(e.modifyWithTimeString=function(t,e){return null!=t&&e?(e=p(e,"HH:mm:ss"),b(t,e.getHours(),e.getMinutes(),e.getSeconds())):t},e.clearTime=function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.clearMilliseconds=function(t){return new Date(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),0)},e.limitTimeRange=function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"HH:mm:ss";if(0===e.length)return t;var i=function(t){return r.default.parse(r.default.format(t,n),n)},o=i(t),a=e.map(function(t){return t.map(i)});if(a.some(function(t){return o>=t[0]&&o<=t[1]}))return t;var s=a[0][0],l=a[0][0];a.forEach(function(t){s=new Date(Math.min(t[0],s)),l=new Date(Math.max(t[1],s))});var c=o<s?s:l;return y(c,t.getFullYear(),t.getMonth(),t.getDate())}),w=(e.timeWithinRange=function(t,e,n){var i=x(t,e,n);return i.getTime()===t.getTime()},e.changeYearMonthAndClampDate=function(t,e,n){var i=Math.min(t.getDate(),f(e,n));return y(t,e,n,i)});e.prevMonth=function(t){var e=t.getFullYear(),n=t.getMonth();return 0===n?w(t,e-1,11):w(t,e,n-1)},e.nextMonth=function(t){var e=t.getFullYear(),n=t.getMonth();return 11===n?w(t,e+1,0):w(t,e,n+1)},e.prevYear=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getFullYear(),i=t.getMonth();return w(t,n-e,i)},e.nextYear=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=t.getFullYear(),i=t.getMonth();return w(t,n+e,i)},e.extractDateFormat=function(t){return t.replace(/\W?m{1,2}|\W?ZZ/g,"").replace(/\W?h{1,2}|\W?s{1,3}|\W?a/gi,"").trim()},e.extractTimeFormat=function(t){return t.replace(/\W?D{1,2}|\W?Do|\W?d{1,4}|\W?M{1,4}|\W?y{2,4}/g,"").trim()},e.validateRangeInOneMonth=function(t,e){return t.getMonth()===e.getMonth()&&t.getFullYear()===e.getFullYear()}},d9f6:function(t,e,n){var i=n("e4ae"),r=n("794b"),o=n("1bc3"),a=Object.defineProperty;e.f=n("8e60")?Object.defineProperty:function(t,e,n){if(i(t),e=o(e,!0),i(n),r)try{return a(t,e,n)}catch(s){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(t[e]=n.value),t}},dbdb:function(t,e,n){var i=n("584a"),r=n("e53d"),o="__core-js_shared__",a=r[o]||(r[o]={});(t.exports=function(t,e){return a[t]||(a[t]=void 0!==e?e:{})})("versions",[]).push({version:i.version,mode:n("b8e3")?"pure":"global",copyright:" 2019 Denis Pushkarev (zloirock.ru)"})},dcbc:function(t,e,n){var i=n("2aba");t.exports=function(t,e,n){for(var r in e)i(t,r,e[r],n);return t}},dcdc:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=83)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},4:function(t,e){t.exports=n("d010")},83:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-checkbox",class:[t.border&&t.checkboxSize?"el-checkbox--"+t.checkboxSize:"",{"is-disabled":t.isDisabled},{"is-bordered":t.border},{"is-checked":t.isChecked}],attrs:{id:t.id}},[n("span",{staticClass:"el-checkbox__input",class:{"is-disabled":t.isDisabled,"is-checked":t.isChecked,"is-indeterminate":t.indeterminate,"is-focus":t.focus},attrs:{tabindex:!!t.indeterminate&&0,role:!!t.indeterminate&&"checkbox","aria-checked":!!t.indeterminate&&"mixed"}},[n("span",{staticClass:"el-checkbox__inner"}),t.trueLabel||t.falseLabel?n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":t.indeterminate?"true":"false",name:t.name,disabled:t.isDisabled,"true-value":t.trueLabel,"false-value":t.falseLabel},domProps:{checked:Array.isArray(t.model)?t._i(t.model,null)>-1:t._q(t.model,t.trueLabel)},on:{change:[function(e){var n=t.model,i=e.target,r=i.checked?t.trueLabel:t.falseLabel;if(Array.isArray(n)){var o=null,a=t._i(n,o);i.checked?a<0&&(t.model=n.concat([o])):a>-1&&(t.model=n.slice(0,a).concat(n.slice(a+1)))}else t.model=r},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}}):n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],staticClass:"el-checkbox__original",attrs:{type:"checkbox","aria-hidden":t.indeterminate?"true":"false",disabled:t.isDisabled,name:t.name},domProps:{value:t.label,checked:Array.isArray(t.model)?t._i(t.model,t.label)>-1:t.model},on:{change:[function(e){var n=t.model,i=e.target,r=!!i.checked;if(Array.isArray(n)){var o=t.label,a=t._i(n,o);i.checked?a<0&&(t.model=n.concat([o])):a>-1&&(t.model=n.slice(0,a).concat(n.slice(a+1)))}else t.model=r},t.handleChange],focus:function(e){t.focus=!0},blur:function(e){t.focus=!1}}})]),t.$slots.default||t.label?n("span",{staticClass:"el-checkbox__label"},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.label))]],2):t._e()])},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s={name:"ElCheckbox",mixins:[a.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElCheckbox",data:function(){return{selfModel:!1,focus:!1,isLimitExceeded:!1}},computed:{model:{get:function(){return this.isGroup?this.store:void 0!==this.value?this.value:this.selfModel},set:function(t){this.isGroup?(this.isLimitExceeded=!1,void 0!==this._checkboxGroup.min&&t.length<this._checkboxGroup.min&&(this.isLimitExceeded=!0),void 0!==this._checkboxGroup.max&&t.length>this._checkboxGroup.max&&(this.isLimitExceeded=!0),!1===this.isLimitExceeded&&this.dispatch("ElCheckboxGroup","input",[t])):(this.$emit("input",t),this.selfModel=t)}},isChecked:function(){return"[object Boolean]"==={}.toString.call(this.model)?this.model:Array.isArray(this.model)?this.model.indexOf(this.label)>-1:null!==this.model&&void 0!==this.model?this.model===this.trueLabel:void 0},isGroup:function(){var t=this.$parent;while(t){if("ElCheckboxGroup"===t.$options.componentName)return this._checkboxGroup=t,!0;t=t.$parent}return!1},store:function(){return this._checkboxGroup?this._checkboxGroup.value:this.value},isLimitDisabled:function(){var t=this._checkboxGroup,e=t.max,n=t.min;return!(!e&&!n)&&this.model.length>=e&&!this.isChecked||this.model.length<=n&&this.isChecked},isDisabled:function(){return this.isGroup?this._checkboxGroup.disabled||this.disabled||(this.elForm||{}).disabled||this.isLimitDisabled:this.disabled||(this.elForm||{}).disabled},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},checkboxSize:function(){var t=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._checkboxGroup.checkboxGroupSize||t}},props:{value:{},label:{},indeterminate:Boolean,disabled:Boolean,checked:Boolean,name:String,trueLabel:[String,Number],falseLabel:[String,Number],id:String,controls:String,border:Boolean,size:String},methods:{addToStore:function(){Array.isArray(this.model)&&-1===this.model.indexOf(this.label)?this.model.push(this.label):this.model=this.trueLabel||!0},handleChange:function(t){var e=this;if(!this.isLimitExceeded){var n=void 0;n=t.target.checked?void 0===this.trueLabel||this.trueLabel:void 0!==this.falseLabel&&this.falseLabel,this.$emit("change",n,t),this.$nextTick(function(){e.isGroup&&e.dispatch("ElCheckboxGroup","change",[e._checkboxGroup.value])})}}},created:function(){this.checked&&this.addToStore()},mounted:function(){this.indeterminate&&this.$el.setAttribute("aria-controls",this.controls)},watch:{value:function(t){this.dispatch("ElFormItem","el.form.change",t)}}},l=s,c=n(0),u=Object(c["a"])(l,i,r,!1,null,null,null);u.options.__file="packages/checkbox/src/checkbox.vue";var h=u.exports;h.install=function(t){t.component(h.name,h)};e["default"]=h}})},e11e:function(t,e){t.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},e450:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=114)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},10:function(t,e){t.exports=n("f3ad")},114:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["el-input-number",t.inputNumberSize?"el-input-number--"+t.inputNumberSize:"",{"is-disabled":t.inputNumberDisabled},{"is-without-controls":!t.controls},{"is-controls-right":t.controlsAtRight}],on:{dragstart:function(t){t.preventDefault()}}},[t.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.decrease,expression:"decrease"}],staticClass:"el-input-number__decrease",class:{"is-disabled":t.minDisabled},attrs:{role:"button"},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.decrease(e):null}}},[n("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-down":"minus")})]):t._e(),t.controls?n("span",{directives:[{name:"repeat-click",rawName:"v-repeat-click",value:t.increase,expression:"increase"}],staticClass:"el-input-number__increase",class:{"is-disabled":t.maxDisabled},attrs:{role:"button"},on:{keydown:function(e){return"button"in e||!t._k(e.keyCode,"enter",13,e.key,"Enter")?t.increase(e):null}}},[n("i",{class:"el-icon-"+(t.controlsAtRight?"arrow-up":"plus")})]):t._e(),n("el-input",{ref:"input",attrs:{value:t.displayValue,placeholder:t.placeholder,disabled:t.inputNumberDisabled,size:t.inputNumberSize,max:t.max,min:t.min,name:t.name,label:t.label},on:{blur:t.handleBlur,focus:t.handleFocus,input:t.handleInput,change:t.handleInputChange},nativeOn:{keydown:[function(e){return"button"in e||!t._k(e.keyCode,"up",38,e.key,["Up","ArrowUp"])?(e.preventDefault(),t.increase(e)):null},function(e){return"button"in e||!t._k(e.keyCode,"down",40,e.key,["Down","ArrowDown"])?(e.preventDefault(),t.decrease(e)):null}]}})],1)},r=[];i._withStripped=!0;var o=n(10),a=n.n(o),s=n(22),l=n.n(s),c=n(30),u={name:"ElInputNumber",mixins:[l()("input")],inject:{elForm:{default:""},elFormItem:{default:""}},directives:{repeatClick:c["a"]},components:{ElInput:a.a},props:{step:{type:Number,default:1},stepStrictly:{type:Boolean,default:!1},max:{type:Number,default:1/0},min:{type:Number,default:-1/0},value:{},disabled:Boolean,size:String,controls:{type:Boolean,default:!0},controlsPosition:{type:String,default:""},name:String,label:String,placeholder:String,precision:{type:Number,validator:function(t){return t>=0&&t===parseInt(t,10)}}},data:function(){return{currentValue:0,userInput:null}},watch:{value:{immediate:!0,handler:function(t){var e=void 0===t?t:Number(t);if(void 0!==e){if(isNaN(e))return;if(this.stepStrictly){var n=this.getPrecision(this.step),i=Math.pow(10,n);e=Math.round(e/this.step)*i*this.step/i}void 0!==this.precision&&(e=this.toPrecision(e,this.precision))}e>=this.max&&(e=this.max),e<=this.min&&(e=this.min),this.currentValue=e,this.userInput=null,this.$emit("input",e)}}},computed:{minDisabled:function(){return this._decrease(this.value,this.step)<this.min},maxDisabled:function(){return this._increase(this.value,this.step)>this.max},numPrecision:function(){var t=this.value,e=this.step,n=this.getPrecision,i=this.precision,r=n(e);return void 0!==i?(r>i&&console.warn("[Element Warn][InputNumber]precision should not be less than the decimal places of step"),i):Math.max(n(t),r)},controlsAtRight:function(){return this.controls&&"right"===this.controlsPosition},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},inputNumberSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputNumberDisabled:function(){return this.disabled||!!(this.elForm||{}).disabled},displayValue:function(){if(null!==this.userInput)return this.userInput;var t=this.currentValue;if("number"===typeof t){if(this.stepStrictly){var e=this.getPrecision(this.step),n=Math.pow(10,e);t=Math.round(t/this.step)*n*this.step/n}void 0!==this.precision&&(t=t.toFixed(this.precision))}return t}},methods:{toPrecision:function(t,e){return void 0===e&&(e=this.numPrecision),parseFloat(Math.round(t*Math.pow(10,e))/Math.pow(10,e))},getPrecision:function(t){if(void 0===t)return 0;var e=t.toString(),n=e.indexOf("."),i=0;return-1!==n&&(i=e.length-n-1),i},_increase:function(t,e){if("number"!==typeof t&&void 0!==t)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*t+n*e)/n)},_decrease:function(t,e){if("number"!==typeof t&&void 0!==t)return this.currentValue;var n=Math.pow(10,this.numPrecision);return this.toPrecision((n*t-n*e)/n)},increase:function(){if(!this.inputNumberDisabled&&!this.maxDisabled){var t=this.value||0,e=this._increase(t,this.step);this.setCurrentValue(e)}},decrease:function(){if(!this.inputNumberDisabled&&!this.minDisabled){var t=this.value||0,e=this._decrease(t,this.step);this.setCurrentValue(e)}},handleBlur:function(t){this.$emit("blur",t)},handleFocus:function(t){this.$emit("focus",t)},setCurrentValue:function(t){var e=this.currentValue;"number"===typeof t&&void 0!==this.precision&&(t=this.toPrecision(t,this.precision)),t>=this.max&&(t=this.max),t<=this.min&&(t=this.min),e!==t&&(this.userInput=null,this.$emit("input",t),this.$emit("change",t,e),this.currentValue=t)},handleInput:function(t){this.userInput=t},handleInputChange:function(t){var e=""===t?void 0:Number(t);isNaN(e)&&""!==t||this.setCurrentValue(e),this.userInput=null},select:function(){this.$refs.input.select()}},mounted:function(){var t=this.$refs.input.$refs.input;t.setAttribute("role","spinbutton"),t.setAttribute("aria-valuemax",this.max),t.setAttribute("aria-valuemin",this.min),t.setAttribute("aria-valuenow",this.currentValue),t.setAttribute("aria-disabled",this.inputNumberDisabled)},updated:function(){if(this.$refs&&this.$refs.input){var t=this.$refs.input.$refs.input;t.setAttribute("aria-valuenow",this.currentValue)}}},h=u,d=n(0),p=Object(d["a"])(h,i,r,!1,null,null,null);p.options.__file="packages/input-number/src/input-number.vue";var f=p.exports;f.install=function(t){t.component(f.name,f)};e["default"]=f},2:function(t,e){t.exports=n("5924")},22:function(t,e){t.exports=n("12f2")},30:function(t,e,n){"use strict";var i=n(2);e["a"]={bind:function(t,e,n){var r=null,o=void 0,a=function(){return n.context[e.expression].apply()},s=function(){Date.now()-o<100&&a(),clearInterval(r),r=null};Object(i["on"])(t,"mousedown",function(t){0===t.button&&(o=Date.now(),Object(i["once"])(document,"mouseup",s),clearInterval(r),r=setInterval(a,100))})}}}})},e452:function(t,e,n){"use strict";e.__esModule=!0;var i=i||{};i.Utils=i.Utils||{},i.Utils.focusFirstDescendant=function(t){for(var e=0;e<t.childNodes.length;e++){var n=t.childNodes[e];if(i.Utils.attemptFocus(n)||i.Utils.focusFirstDescendant(n))return!0}return!1},i.Utils.focusLastDescendant=function(t){for(var e=t.childNodes.length-1;e>=0;e--){var n=t.childNodes[e];if(i.Utils.attemptFocus(n)||i.Utils.focusLastDescendant(n))return!0}return!1},i.Utils.attemptFocus=function(t){if(!i.Utils.isFocusable(t))return!1;i.Utils.IgnoreUtilFocusChanges=!0;try{t.focus()}catch(e){}return i.Utils.IgnoreUtilFocusChanges=!1,document.activeElement===t},i.Utils.isFocusable=function(t){if(t.tabIndex>0||0===t.tabIndex&&null!==t.getAttribute("tabIndex"))return!0;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!==t.rel;case"INPUT":return"hidden"!==t.type&&"file"!==t.type;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return!1}},i.Utils.triggerEvent=function(t,e){var n=void 0;n=/^mouse|click/.test(e)?"MouseEvents":/^key/.test(e)?"KeyboardEvent":"HTMLEvents";for(var i=document.createEvent(n),r=arguments.length,o=Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];return i.initEvent.apply(i,[e].concat(o)),t.dispatchEvent?t.dispatchEvent(i):t.fireEvent("on"+e,i),t},i.Utils.keys={tab:9,enter:13,space:32,left:37,up:38,right:39,down:40,esc:27},e.default=i.Utils},e4ae:function(t,e,n){var i=n("f772");t.exports=function(t){if(!i(t))throw TypeError(t+" is not an object!");return t}},e53d:function(t,e){var n=t.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},e62d:function(t,e,n){"use strict";e.__esModule=!0,e.default=function(){if(r.default.prototype.$isServer)return 0;if(void 0!==a)return a;var t=document.createElement("div");t.className="el-scrollbar__wrap",t.style.visibility="hidden",t.style.width="100px",t.style.position="absolute",t.style.top="-9999px",document.body.appendChild(t);var e=t.offsetWidth;t.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",t.appendChild(n);var i=n.offsetWidth;return t.parentNode.removeChild(t),a=e-i,a};var i=n("2b0e"),r=o(i);function o(t){return t&&t.__esModule?t:{default:t}}var a=void 0},e683:function(t,e,n){"use strict";t.exports=function(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}},e6f3:function(t,e,n){var i=n("07e3"),r=n("36c3"),o=n("5b4e")(!1),a=n("5559")("IE_PROTO");t.exports=function(t,e){var n,s=r(t),l=0,c=[];for(n in s)n!=a&&i(s,n)&&c.push(n);while(e.length>l)i(s,n=e[l++])&&(~o(c,n)||c.push(n));return c}},e772:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=53)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},3:function(t,e){t.exports=n("8122")},33:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("li",{directives:[{name:"show",rawName:"v-show",value:t.visible,expression:"visible"}],staticClass:"el-select-dropdown__item",class:{selected:t.itemSelected,"is-disabled":t.disabled||t.groupDisabled||t.limitReached,hover:t.hover},on:{mouseenter:t.hoverItem,click:function(e){return e.stopPropagation(),t.selectOptionClick(e)}}},[t._t("default",[n("span",[t._v(t._s(t.currentLabel))])])],2)},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s=n(3),l="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"===typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c={mixins:[a.a],name:"ElOption",componentName:"ElOption",inject:["select"],props:{value:{required:!0},label:[String,Number],created:Boolean,disabled:{type:Boolean,default:!1}},data:function(){return{index:-1,groupDisabled:!1,visible:!0,hitState:!1,hover:!1}},computed:{isObject:function(){return"[object object]"===Object.prototype.toString.call(this.value).toLowerCase()},currentLabel:function(){return this.label||(this.isObject?"":this.value)},currentValue:function(){return this.value||this.label||""},itemSelected:function(){return this.select.multiple?this.contains(this.select.value,this.value):this.isEqual(this.value,this.select.value)},limitReached:function(){return!!this.select.multiple&&(!this.itemSelected&&(this.select.value||[]).length>=this.select.multipleLimit&&this.select.multipleLimit>0)}},watch:{currentLabel:function(){this.created||this.select.remote||this.dispatch("ElSelect","setSelected")},value:function(t,e){var n=this.select,i=n.remote,r=n.valueKey;if(!this.created&&!i){if(r&&"object"===("undefined"===typeof t?"undefined":l(t))&&"object"===("undefined"===typeof e?"undefined":l(e))&&t[r]===e[r])return;this.dispatch("ElSelect","setSelected")}}},methods:{isEqual:function(t,e){if(this.isObject){var n=this.select.valueKey;return Object(s["getValueByPath"])(t,n)===Object(s["getValueByPath"])(e,n)}return t===e},contains:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];if(this.isObject){var n=this.select.valueKey;return t&&t.some(function(t){return Object(s["getValueByPath"])(t,n)===Object(s["getValueByPath"])(e,n)})}return t&&t.indexOf(e)>-1},handleGroupDisabled:function(t){this.groupDisabled=t},hoverItem:function(){this.disabled||this.groupDisabled||(this.select.hoverIndex=this.select.options.indexOf(this))},selectOptionClick:function(){!0!==this.disabled&&!0!==this.groupDisabled&&this.dispatch("ElSelect","handleOptionClick",[this,!0])},queryChange:function(t){this.visible=new RegExp(Object(s["escapeRegexpString"])(t),"i").test(this.currentLabel)||this.created,this.visible||this.select.filteredOptionsCount--}},created:function(){this.select.options.push(this),this.select.cachedOptions.push(this),this.select.optionsCount++,this.select.filteredOptionsCount++,this.$on("queryChange",this.queryChange),this.$on("handleGroupDisabled",this.handleGroupDisabled)},beforeDestroy:function(){var t=this.select,e=t.selected,n=t.multiple,i=n?e:[e],r=this.select.cachedOptions.indexOf(this),o=i.indexOf(this);r>-1&&o<0&&this.select.cachedOptions.splice(r,1),this.select.onOptionDestroy(this.select.options.indexOf(this))}},u=c,h=n(0),d=Object(h["a"])(u,i,r,!1,null,null,null);d.options.__file="packages/select/src/option.vue";e["a"]=d.exports},4:function(t,e){t.exports=n("d010")},53:function(t,e,n){"use strict";n.r(e);var i=n(33);i["a"].install=function(t){t.component(i["a"].name,i["a"])},e["default"]=i["a"]}})},e974:function(t,e,n){"use strict";e.__esModule=!0;var i=n("2b0e"),r=a(i),o=n("5128");function a(t){return t&&t.__esModule?t:{default:t}}var s=r.default.prototype.$isServer?function(){}:n("6167"),l=function(t){return t.stopPropagation()};e.default={props:{transformOrigin:{type:[Boolean,String],default:!0},placement:{type:String,default:"bottom"},boundariesPadding:{type:Number,default:5},reference:{},popper:{},offset:{default:0},value:Boolean,visibleArrow:Boolean,arrowOffset:{type:Number,default:35},appendToBody:{type:Boolean,default:!0},popperOptions:{type:Object,default:function(){return{gpuAcceleration:!1}}}},data:function(){return{showPopper:!1,currentPlacement:""}},watch:{value:{immediate:!0,handler:function(t){this.showPopper=t,this.$emit("input",t)}},showPopper:function(t){this.disabled||(t?this.updatePopper():this.destroyPopper(),this.$emit("input",t))}},methods:{createPopper:function(){var t=this;if(!this.$isServer&&(this.currentPlacement=this.currentPlacement||this.placement,/^(top|bottom|left|right)(-start|-end)?$/g.test(this.currentPlacement))){var e=this.popperOptions,n=this.popperElm=this.popperElm||this.popper||this.$refs.popper,i=this.referenceElm=this.referenceElm||this.reference||this.$refs.reference;!i&&this.$slots.reference&&this.$slots.reference[0]&&(i=this.referenceElm=this.$slots.reference[0].elm),n&&i&&(this.visibleArrow&&this.appendArrow(n),this.appendToBody&&document.body.appendChild(this.popperElm),this.popperJS&&this.popperJS.destroy&&this.popperJS.destroy(),e.placement=this.currentPlacement,e.offset=this.offset,e.arrowOffset=this.arrowOffset,this.popperJS=new s(i,n,e),this.popperJS.onCreate(function(e){t.$emit("created",t),t.resetTransformOrigin(),t.$nextTick(t.updatePopper)}),"function"===typeof e.onUpdate&&this.popperJS.onUpdate(e.onUpdate),this.popperJS._popper.style.zIndex=o.PopupManager.nextZIndex(),this.popperElm.addEventListener("click",l))}},updatePopper:function(){var t=this.popperJS;t?(t.update(),t._popper&&(t._popper.style.zIndex=o.PopupManager.nextZIndex())):this.createPopper()},doDestroy:function(t){!this.popperJS||this.showPopper&&!t||(this.popperJS.destroy(),this.popperJS=null)},destroyPopper:function(){this.popperJS&&this.resetTransformOrigin()},resetTransformOrigin:function(){if(this.transformOrigin){var t={top:"bottom",bottom:"top",left:"right",right:"left"},e=this.popperJS._popper.getAttribute("x-placement").split("-")[0],n=t[e];this.popperJS._popper.style.transformOrigin="string"===typeof this.transformOrigin?this.transformOrigin:["top","bottom"].indexOf(e)>-1?"center "+n:n+" center"}},appendArrow:function(t){var e=void 0;if(!this.appended){for(var n in this.appended=!0,t.attributes)if(/^_v-/.test(t.attributes[n].name)){e=t.attributes[n].name;break}var i=document.createElement("div");e&&i.setAttribute(e,""),i.setAttribute("x-arrow",""),i.className="popper__arrow",t.appendChild(i)}}},beforeDestroy:function(){this.doDestroy(!0),this.popperElm&&this.popperElm.parentNode===document.body&&(this.popperElm.removeEventListener("click",l),document.body.removeChild(this.popperElm))},deactivated:function(){this.$options.beforeDestroy[0].call(this)}}},ebd6:function(t,e,n){var i=n("cb7c"),r=n("d8e8"),o=n("2b4c")("species");t.exports=function(t,e){var n,a=i(t).constructor;return void 0===a||void 0==(n=i(a)[o])?e:r(n)}},ebfd:function(t,e,n){var i=n("62a0")("meta"),r=n("f772"),o=n("07e3"),a=n("d9f6").f,s=0,l=Object.isExtensible||function(){return!0},c=!n("294c")(function(){return l(Object.preventExtensions({}))}),u=function(t){a(t,i,{value:{i:"O"+ ++s,w:{}}})},h=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!o(t,i)){if(!l(t))return"F";if(!e)return"E";u(t)}return t[i].i},d=function(t,e){if(!o(t,i)){if(!l(t))return!0;if(!e)return!1;u(t)}return t[i].w},p=function(t){return c&&f.NEED&&l(t)&&!o(t,i)&&u(t),t},f=t.exports={KEY:i,NEED:!1,fastKey:h,getWeak:d,onFreeze:p}},eedf:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=97)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},97:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("button",{staticClass:"el-button",class:[t.type?"el-button--"+t.type:"",t.buttonSize?"el-button--"+t.buttonSize:"",{"is-disabled":t.buttonDisabled,"is-loading":t.loading,"is-plain":t.plain,"is-round":t.round,"is-circle":t.circle}],attrs:{disabled:t.buttonDisabled||t.loading,autofocus:t.autofocus,type:t.nativeType},on:{click:t.handleClick}},[t.loading?n("i",{staticClass:"el-icon-loading"}):t._e(),t.icon&&!t.loading?n("i",{class:t.icon}):t._e(),t.$slots.default?n("span",[t._t("default")],2):t._e()])},r=[];i._withStripped=!0;var o={name:"ElButton",inject:{elForm:{default:""},elFormItem:{default:""}},props:{type:{type:String,default:"default"},size:String,icon:{type:String,default:""},nativeType:{type:String,default:"button"},loading:Boolean,disabled:Boolean,plain:Boolean,autofocus:Boolean,round:Boolean,circle:Boolean},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},buttonSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},buttonDisabled:function(){return this.disabled||(this.elForm||{}).disabled}},methods:{handleClick:function(t){this.$emit("click",t)}}},a=o,s=n(0),l=Object(s["a"])(a,i,r,!1,null,null,null);l.options.__file="packages/button/src/button.vue";var c=l.exports;c.install=function(t){t.component(c.name,c)};e["default"]=c}})},f0d9:function(t,e,n){"use strict";e.__esModule=!0,e.default={el:{colorpicker:{confirm:"",clear:""},datepicker:{now:"",today:"",cancel:"",clear:"",confirm:"",selectDate:"",selectTime:"",startDate:"",startTime:"",endDate:"",endTime:"",prevYear:"",nextYear:"",prevMonth:"",nextMonth:"",year:"",month1:"1 ",month2:"2 ",month3:"3 ",month4:"4 ",month5:"5 ",month6:"6 ",month7:"7 ",month8:"8 ",month9:"9 ",month10:"10 ",month11:"11 ",month12:"12 ",weeks:{sun:"",mon:"",tue:"",wed:"",thu:"",fri:"",sat:""},months:{jan:"",feb:"",mar:"",apr:"",may:"",jun:"",jul:"",aug:"",sep:"",oct:"",nov:"",dec:""}},select:{loading:"",noMatch:"",noData:"",placeholder:""},cascader:{noMatch:"",loading:"",placeholder:"",noData:""},pagination:{goto:"",pagesize:"/",total:" {total} ",pageClassifier:""},messagebox:{title:"",confirm:"",cancel:"",error:"!"},upload:{deleteTip:" delete ",delete:"",preview:"",continue:""},table:{emptyText:"",confirmFilter:"",resetFilter:"",clearFilter:"",sumText:""},tree:{emptyText:""},transfer:{noMatch:"",noData:"",titles:[" 1"," 2"],filterPlaceholder:"",noCheckedFormat:" {total} ",hasCheckedFormat:" {checked}/{total} "},image:{error:""},pageHeader:{title:""},popconfirm:{confirmButtonText:"",cancelButtonText:""}}}},f28c:function(t,e){var n,i,r=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}function l(t){if(i===clearTimeout)return clearTimeout(t);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"===typeof clearTimeout?clearTimeout:a}catch(t){i=a}})();var c,u=[],h=!1,d=-1;function p(){h&&c&&(h=!1,c.length?u=c.concat(u):d=-1,u.length&&f())}function f(){if(!h){var t=s(p);h=!0;var e=u.length;while(e){c=u,u=[];while(++d<e)c&&c[d].run();d=-1,e=u.length}c=null,h=!1,l(t)}}function m(t,e){this.fun=t,this.array=e}function v(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];u.push(new m(t,e)),1!==u.length||h||s(f)},m.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},f3ad:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=76)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},11:function(t,e){t.exports=n("2bb5")},21:function(t,e){t.exports=n("d397")},4:function(t,e){t.exports=n("d010")},76:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{class:["textarea"===t.type?"el-textarea":"el-input",t.inputSize?"el-input--"+t.inputSize:"",{"is-disabled":t.inputDisabled,"is-exceed":t.inputExceed,"el-input-group":t.$slots.prepend||t.$slots.append,"el-input-group--append":t.$slots.append,"el-input-group--prepend":t.$slots.prepend,"el-input--prefix":t.$slots.prefix||t.prefixIcon,"el-input--suffix":t.$slots.suffix||t.suffixIcon||t.clearable||t.showPassword}],on:{mouseenter:function(e){t.hovering=!0},mouseleave:function(e){t.hovering=!1}}},["textarea"!==t.type?[t.$slots.prepend?n("div",{staticClass:"el-input-group__prepend"},[t._t("prepend")],2):t._e(),"textarea"!==t.type?n("input",t._b({ref:"input",staticClass:"el-input__inner",attrs:{tabindex:t.tabindex,type:t.showPassword?t.passwordVisible?"text":"password":t.type,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"input",t.$attrs,!1)):t._e(),t.$slots.prefix||t.prefixIcon?n("span",{staticClass:"el-input__prefix"},[t._t("prefix"),t.prefixIcon?n("i",{staticClass:"el-input__icon",class:t.prefixIcon}):t._e()],2):t._e(),t.getSuffixVisible()?n("span",{staticClass:"el-input__suffix"},[n("span",{staticClass:"el-input__suffix-inner"},[t.showClear&&t.showPwdVisible&&t.isWordLimitVisible?t._e():[t._t("suffix"),t.suffixIcon?n("i",{staticClass:"el-input__icon",class:t.suffixIcon}):t._e()],t.showClear?n("i",{staticClass:"el-input__icon el-icon-circle-close el-input__clear",on:{mousedown:function(t){t.preventDefault()},click:t.clear}}):t._e(),t.showPwdVisible?n("i",{staticClass:"el-input__icon el-icon-view el-input__clear",on:{click:t.handlePasswordVisible}}):t._e(),t.isWordLimitVisible?n("span",{staticClass:"el-input__count"},[n("span",{staticClass:"el-input__count-inner"},[t._v("\n            "+t._s(t.textLength)+"/"+t._s(t.upperLimit)+"\n          ")])]):t._e()],2),t.validateState?n("i",{staticClass:"el-input__icon",class:["el-input__validateIcon",t.validateIcon]}):t._e()]):t._e(),t.$slots.append?n("div",{staticClass:"el-input-group__append"},[t._t("append")],2):t._e()]:n("textarea",t._b({ref:"textarea",staticClass:"el-textarea__inner",style:t.textareaStyle,attrs:{tabindex:t.tabindex,disabled:t.inputDisabled,readonly:t.readonly,autocomplete:t.autoComplete||t.autocomplete,"aria-label":t.label},on:{compositionstart:t.handleCompositionStart,compositionupdate:t.handleCompositionUpdate,compositionend:t.handleCompositionEnd,input:t.handleInput,focus:t.handleFocus,blur:t.handleBlur,change:t.handleChange}},"textarea",t.$attrs,!1)),t.isWordLimitVisible&&"textarea"===t.type?n("span",{staticClass:"el-input__count"},[t._v(t._s(t.textLength)+"/"+t._s(t.upperLimit))]):t._e()],2)},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s=n(11),l=n.n(s),c=void 0,u="\n  height:0 !important;\n  visibility:hidden !important;\n  overflow:hidden !important;\n  position:absolute !important;\n  z-index:-1000 !important;\n  top:0 !important;\n  right:0 !important\n",h=["letter-spacing","line-height","padding-top","padding-bottom","font-family","font-weight","font-size","text-rendering","text-transform","width","text-indent","padding-left","padding-right","border-width","box-sizing"];function d(t){var e=window.getComputedStyle(t),n=e.getPropertyValue("box-sizing"),i=parseFloat(e.getPropertyValue("padding-bottom"))+parseFloat(e.getPropertyValue("padding-top")),r=parseFloat(e.getPropertyValue("border-bottom-width"))+parseFloat(e.getPropertyValue("border-top-width")),o=h.map(function(t){return t+":"+e.getPropertyValue(t)}).join(";");return{contextStyle:o,paddingSize:i,borderSize:r,boxSizing:n}}function p(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;c||(c=document.createElement("textarea"),document.body.appendChild(c));var i=d(t),r=i.paddingSize,o=i.borderSize,a=i.boxSizing,s=i.contextStyle;c.setAttribute("style",s+";"+u),c.value=t.value||t.placeholder||"";var l=c.scrollHeight,h={};"border-box"===a?l+=o:"content-box"===a&&(l-=r),c.value="";var p=c.scrollHeight-r;if(null!==e){var f=p*e;"border-box"===a&&(f=f+r+o),l=Math.max(f,l),h.minHeight=f+"px"}if(null!==n){var m=p*n;"border-box"===a&&(m=m+r+o),l=Math.min(m,l)}return h.height=l+"px",c.parentNode&&c.parentNode.removeChild(c),c=null,h}var f=n(9),m=n.n(f),v=n(21),g={name:"ElInput",componentName:"ElInput",mixins:[a.a,l.a],inheritAttrs:!1,inject:{elForm:{default:""},elFormItem:{default:""}},data:function(){return{textareaCalcStyle:{},hovering:!1,focused:!1,isComposing:!1,passwordVisible:!1}},props:{value:[String,Number],size:String,resize:String,form:String,disabled:Boolean,readonly:Boolean,type:{type:String,default:"text"},autosize:{type:[Boolean,Object],default:!1},autocomplete:{type:String,default:"off"},autoComplete:{type:String,validator:function(t){return!0}},validateEvent:{type:Boolean,default:!0},suffixIcon:String,prefixIcon:String,label:String,clearable:{type:Boolean,default:!1},showPassword:{type:Boolean,default:!1},showWordLimit:{type:Boolean,default:!1},tabindex:String},computed:{_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},validateState:function(){return this.elFormItem?this.elFormItem.validateState:""},needStatusIcon:function(){return!!this.elForm&&this.elForm.statusIcon},validateIcon:function(){return{validating:"el-icon-loading",success:"el-icon-circle-check",error:"el-icon-circle-close"}[this.validateState]},textareaStyle:function(){return m()({},this.textareaCalcStyle,{resize:this.resize})},inputSize:function(){return this.size||this._elFormItemSize||(this.$ELEMENT||{}).size},inputDisabled:function(){return this.disabled||(this.elForm||{}).disabled},nativeInputValue:function(){return null===this.value||void 0===this.value?"":String(this.value)},showClear:function(){return this.clearable&&!this.inputDisabled&&!this.readonly&&this.nativeInputValue&&(this.focused||this.hovering)},showPwdVisible:function(){return this.showPassword&&!this.inputDisabled&&!this.readonly&&(!!this.nativeInputValue||this.focused)},isWordLimitVisible:function(){return this.showWordLimit&&this.$attrs.maxlength&&("text"===this.type||"textarea"===this.type)&&!this.inputDisabled&&!this.readonly&&!this.showPassword},upperLimit:function(){return this.$attrs.maxlength},textLength:function(){return"number"===typeof this.value?String(this.value).length:(this.value||"").length},inputExceed:function(){return this.isWordLimitVisible&&this.textLength>this.upperLimit}},watch:{value:function(t){this.$nextTick(this.resizeTextarea),this.validateEvent&&this.dispatch("ElFormItem","el.form.change",[t])},nativeInputValue:function(){this.setNativeInputValue()},type:function(){var t=this;this.$nextTick(function(){t.setNativeInputValue(),t.resizeTextarea(),t.updateIconOffset()})}},methods:{focus:function(){this.getInput().focus()},blur:function(){this.getInput().blur()},getMigratingConfig:function(){return{props:{icon:"icon is removed, use suffix-icon / prefix-icon instead.","on-icon-click":"on-icon-click is removed."},events:{click:"click is removed."}}},handleBlur:function(t){this.focused=!1,this.$emit("blur",t),this.validateEvent&&this.dispatch("ElFormItem","el.form.blur",[this.value])},select:function(){this.getInput().select()},resizeTextarea:function(){if(!this.$isServer){var t=this.autosize,e=this.type;if("textarea"===e)if(t){var n=t.minRows,i=t.maxRows;this.textareaCalcStyle=p(this.$refs.textarea,n,i)}else this.textareaCalcStyle={minHeight:p(this.$refs.textarea).minHeight}}},setNativeInputValue:function(){var t=this.getInput();t&&t.value!==this.nativeInputValue&&(t.value=this.nativeInputValue)},handleFocus:function(t){this.focused=!0,this.$emit("focus",t)},handleCompositionStart:function(){this.isComposing=!0},handleCompositionUpdate:function(t){var e=t.target.value,n=e[e.length-1]||"";this.isComposing=!Object(v["isKorean"])(n)},handleCompositionEnd:function(t){this.isComposing&&(this.isComposing=!1,this.handleInput(t))},handleInput:function(t){this.isComposing||t.target.value!==this.nativeInputValue&&(this.$emit("input",t.target.value),this.$nextTick(this.setNativeInputValue))},handleChange:function(t){this.$emit("change",t.target.value)},calcIconOffset:function(t){var e=[].slice.call(this.$el.querySelectorAll(".el-input__"+t)||[]);if(e.length){for(var n=null,i=0;i<e.length;i++)if(e[i].parentNode===this.$el){n=e[i];break}if(n){var r={suffix:"append",prefix:"prepend"},o=r[t];this.$slots[o]?n.style.transform="translateX("+("suffix"===t?"-":"")+this.$el.querySelector(".el-input-group__"+o).offsetWidth+"px)":n.removeAttribute("style")}}},updateIconOffset:function(){this.calcIconOffset("prefix"),this.calcIconOffset("suffix")},clear:function(){this.$emit("input",""),this.$emit("change",""),this.$emit("clear")},handlePasswordVisible:function(){this.passwordVisible=!this.passwordVisible,this.focus()},getInput:function(){return this.$refs.input||this.$refs.textarea},getSuffixVisible:function(){return this.$slots.suffix||this.suffixIcon||this.showClear||this.showPassword||this.isWordLimitVisible||this.validateState&&this.needStatusIcon}},created:function(){this.$on("inputSelect",this.select)},mounted:function(){this.setNativeInputValue(),this.resizeTextarea(),this.updateIconOffset()},updated:function(){this.$nextTick(this.updateIconOffset)}},y=g,b=n(0),x=Object(b["a"])(y,i,r,!1,null,null,null);x.options.__file="packages/input/src/input.vue";var w=x.exports;w.install=function(t){t.component(w.name,w)};e["default"]=w},9:function(t,e){t.exports=n("7f4d")}})},f494:function(t,e,n){t.exports=function(t){var e={};function n(i){if(e[i])return e[i].exports;var r=e[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(i,r,function(e){return t[e]}.bind(null,r));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/dist/",n(n.s=116)}({0:function(t,e,n){"use strict";function i(t,e,n,i,r,o,a,s){var l,c="function"===typeof t?t.options:t;if(e&&(c.render=e,c.staticRenderFns=n,c._compiled=!0),i&&(c.functional=!0),o&&(c._scopeId="data-v-"+o),a?(l=function(t){t=t||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext,t||"undefined"===typeof __VUE_SSR_CONTEXT__||(t=__VUE_SSR_CONTEXT__),r&&r.call(this,t),t&&t._registeredComponents&&t._registeredComponents.add(a)},c._ssrRegister=l):r&&(l=s?function(){r.call(this,this.$root.$options.shadowRoot)}:r),l)if(c.functional){c._injectStyles=l;var u=c.render;c.render=function(t,e){return l.call(e),u(t,e)}}else{var h=c.beforeCreate;c.beforeCreate=h?[].concat(h,l):[l]}return{exports:t,options:c}}n.d(e,"a",function(){return i})},116:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("label",{staticClass:"el-radio",class:[t.border&&t.radioSize?"el-radio--"+t.radioSize:"",{"is-disabled":t.isDisabled},{"is-focus":t.focus},{"is-bordered":t.border},{"is-checked":t.model===t.label}],attrs:{role:"radio","aria-checked":t.model===t.label,"aria-disabled":t.isDisabled,tabindex:t.tabIndex},on:{keydown:function(e){if(!("button"in e)&&t._k(e.keyCode,"space",32,e.key,[" ","Spacebar"]))return null;e.stopPropagation(),e.preventDefault(),t.model=t.isDisabled?t.model:t.label}}},[n("span",{staticClass:"el-radio__input",class:{"is-disabled":t.isDisabled,"is-checked":t.model===t.label}},[n("span",{staticClass:"el-radio__inner"}),n("input",{directives:[{name:"model",rawName:"v-model",value:t.model,expression:"model"}],ref:"radio",staticClass:"el-radio__original",attrs:{type:"radio","aria-hidden":"true",name:t.name,disabled:t.isDisabled,tabindex:"-1"},domProps:{value:t.label,checked:t._q(t.model,t.label)},on:{focus:function(e){t.focus=!0},blur:function(e){t.focus=!1},change:[function(e){t.model=t.label},t.handleChange]}})]),n("span",{staticClass:"el-radio__label",on:{keydown:function(t){t.stopPropagation()}}},[t._t("default"),t.$slots.default?t._e():[t._v(t._s(t.label))]],2)])},r=[];i._withStripped=!0;var o=n(4),a=n.n(o),s={name:"ElRadio",mixins:[a.a],inject:{elForm:{default:""},elFormItem:{default:""}},componentName:"ElRadio",props:{value:{},label:{},disabled:Boolean,name:String,border:Boolean,size:String},data:function(){return{focus:!1}},computed:{isGroup:function(){var t=this.$parent;while(t){if("ElRadioGroup"===t.$options.componentName)return this._radioGroup=t,!0;t=t.$parent}return!1},model:{get:function(){return this.isGroup?this._radioGroup.value:this.value},set:function(t){this.isGroup?this.dispatch("ElRadioGroup","input",[t]):this.$emit("input",t),this.$refs.radio&&(this.$refs.radio.checked=this.model===this.label)}},_elFormItemSize:function(){return(this.elFormItem||{}).elFormItemSize},radioSize:function(){var t=this.size||this._elFormItemSize||(this.$ELEMENT||{}).size;return this.isGroup&&this._radioGroup.radioGroupSize||t},isDisabled:function(){return this.isGroup?this._radioGroup.disabled||this.disabled||(this.elForm||{}).disabled:this.disabled||(this.elForm||{}).disabled},tabIndex:function(){return this.isDisabled||this.isGroup&&this.model!==this.label?-1:0}},methods:{handleChange:function(){var t=this;this.$nextTick(function(){t.$emit("change",t.model),t.isGroup&&t.dispatch("ElRadioGroup","handleChange",t.model)})}}},l=s,c=n(0),u=Object(c["a"])(l,i,r,!1,null,null,null);u.options.__file="packages/radio/src/radio.vue";var h=u.exports;h.install=function(t){t.component(h.name,h)};e["default"]=h},4:function(t,e){t.exports=n("d010")}})},f4a6:function(t,e,n){"use strict";(function(t){var e=n("a9a4");const i="0.12.1",r={three:"^0.105.2"},o=(i.split(".")[1],r.three.split(".")[1]),a=(r.three.replace(/[^0-9.]/g,""),{ORBIT:0,DEVICEORIENTATION:1}),s={UNKNOWN:0,NORMAL:1,CARDBOARD:2,STEREO:3},l={Info:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADBklEQVR42u2bP08UQRiHnzFaSYCI/xoksdBIqGwIiYWRUBISExpCQ0ej38FWOmlIKKhoMPEbaCxsrrHiYrQgOSlQEaICrT+LHSPZzNzt3s3c3Hn7lHvLzvv82L2dm30XKioqKgYY062BJF0HpoA7wARwBbhsPz4DjoEG8AnYNcZ8Sx1Op8IXJM1KWpdUV3nq9m9nJV1I7VNGfEzSM0mNNqR9NOwxx1L7NRMflbQm6SSgeJ4TO8Zoat+8/LKkg4jieQ4kLaf2RtKwpJ0uiufZkTScSn5S0l5C+b/sSZrstvyMpKPU5uc4kjTTjkvpeYCkaeA1/+7hvcIZMGuMqUULQNIU8Aa4ltrWwyHwyBizGzwASSPAe+B2assW7AH3jTE/i+xcZoa12Qfy2Bo3i+5cKABl99zF1GYlWFTBeULLS0DZrOsDcDNggTXgc27bLWA64BhfgHvGmB8dHUXZ1DM0S45xliKMs9bKr+klIOkqsBrwv9JtVq1DewEAT4Ch1BYdMGQdygeg7Df4SmqDAKyoyXpCszPgITCeuvoAjFuX0gE8jljUdv7bCtiOOJ7XpdUZ8L/gdXHOA5QtYH5NXXVgbrgWWn1nwFTqaiPgdPIFcDd1tRFwOl307DwRuZgXwLvctgfA04hjOp18AcReZ6sZY16e3yDpUuQxnU6+S2AkcjEpcDr1zxOXSPgCKLSa0mc4nXwB/EpdbQScTr4AGqmrjYDTyRfAx9TVRsDp5Aug8LJyH+F0cgZg58z11BUHpO5ruGh2G3ybuuqAeF2aBfAqddUB8bq0OgP2U1cegH3aOQOMMb+BrdTVB2DLupQLwLIOnKY26IBT6+ClaQDGmO/ARmqLDtiwDn7HVkcY+EdjNoTlCI+tYhO2iUppm6HKslPUq2qQKHpUe8AFsjaUXuUQWCgqXyoAG8IuME/WkNRrnAHzZfqDSgdgQ6gBc2Td3b3CMTBXtkOsIzTIjZLnQhjcVtlcEIPZLJ0LoVvt8s/Va+3yuSAG84UJRxB98cpM9dJURUVFxSDzBxKde4Lk3/h2AAAAAElFTkSuQmCC",Arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADPklEQVR42u2bMUscQRiG30/SRaJEI1ZKUiRErNIELRUbQYSAnX8hpVUgkDYp0wgWVjYW+QcJaQzYpLojJIXhtDDEKBpj65ti58ixmdmb2ZvZ7+T2AUHudmfmeXf2bnb3O6CmpqZmgJGqOiI5AWAWwEMA0wDuArht3r4CcAagBeAbgIaI/NQOp1fhIZKLJN+SbDKcptl3keSQtk+I+BjJVyRbJaRdtEybY9p+ReKjJN+QvIwonufS9DGq7ZuXXyd5nFA8zzHJdW1vkLxDcrdC8Ty7JO9oyc+QPFCUb3NAcqZq+TmSp9rmHZySnCvjErwOIPkUwHv8+w7vF64ALIrIfrIASM4C+ADgnratgxMACyLSiB4AyREAnwE80LbswgGAJyJy4bNxyApr6wbIw4xxy3djrwCYfeeuaZsFsEbPdULXU4DZqusLgMkEA21P05EEbf8A8FhEzos28pkBLxLKL5s/r/M1kEkz9vKQHGeatf05yfmOfubNa7G5JDle5NhtBjwHMBz5yFwAWBaRT+0XzP8pZsKwcQiH2fX8Ycojb+kzxUw4ZJn7CSQXqpRPHMKCq7+iZJ71Mvdy/DftXSQ6HcJdSDaqPPKW/mPOBO+lcbvzCU35RCFM2PpwnQKzZQfdgfe0dxH5dLA6uQJ4pC2fIASrkyuA6X6QjxyC1ckVQNn7bNHlI4ZgdXIFUObiJJl8pBCsTjGfuIwA2Cv4FN7xbYjkjqsRAHuIePXoCiDF1Zk2VidXAL+1R5sAq5MrgJb2aBNgdXIF8FV7tAmwOrkCCFs73wysTtYATHFCU3vEEWm6Ci6KvgY/ao86Ik6XogDeaY86Ik6XbjPgSHvkEThCwQy45XpDRK5JbgN4GWkgUyR9H65MRQxgW0SunZ5FezK7pfwd8e8MV8UfAPdF5Jdrg8JrAbPjprZFD2wWyQP6j8ZSEufRmGlgQ9umBBvd5IOgbjFUKLu+XnWBhG+rpsFVZGUo/coJgFVf+aAATAgNACvICpL6jSsAKyH1QcEBmBD2ASwhq+7uF84ALIVWiPUEB7lQsiOEwS2VzQUxmMXSuRCqKpd/zX4rl88FMZg/mLAEcSN+MlP/aKqmpqZmkPkL0hSjwOpNKxwAAAAASUVORK5CYII=",FullscreenEnter:"data:image/svg+xml;base64,PHN2ZyBmaWxsPSIjRkZGRkZGIiBoZWlnaHQ9IjI0IiB2aWV3Qm94PSIwIDAgMjQgMjQiIHdpZHRoPSIyNCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICAgIDxwYXRoIGQ9Ik0wIDBoMjR2MjRIMHoiIGZpbGw9Im5vbmUiLz4KICAgIDxwYXRoIGQ9Ik03IDE0SDV2NWg1di0ySDd2LTN6bS0yLTRoMlY3aDNWNUg1djV6bTEyIDdoLTN2Mmg1di01aC0ydjN6TTE0IDV2MmgzdjNoMlY1aC01eiIvPgo8L3N2Zz4=",FullscreenLeave:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE0SDE5VjE2SDE2VjE5SDE0VjE0TTUsMTRIMTBWMTlIOFYxNkg1VjE0TTgsNUgxMFYxMEg1VjhIOFY1TTE5LDhWMTBIMTRWNUgxNlY4SDE5WiIgLz48L3N2Zz4=",VideoPlay:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTgsNS4xNFYxOS4xNEwxOSwxMi4xNEw4LDUuMTRaIiAvPjwvc3ZnPg==",VideoPause:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggc3R5bGU9ImZpbGw6I2ZmZiIgZD0iTTE0LDE5LjE0SDE4VjUuMTRIMTRNNiwxOS4xNEgxMFY1LjE0SDZWMTkuMTRaIiAvPjwvc3ZnPg==",WhiteTile:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAgAAAAIABAMAAAAGVsnJAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAB1WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iWE1QIENvcmUgNS40LjAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp0aWZmPSJodHRwOi8vbnMuYWRvYmUuY29tL3RpZmYvMS4wLyI+CiAgICAgICAgIDx0aWZmOkNvbXByZXNzaW9uPjE8L3RpZmY6Q29tcHJlc3Npb24+CiAgICAgICAgIDx0aWZmOk9yaWVudGF0aW9uPjE8L3RpZmY6T3JpZW50YXRpb24+CiAgICAgICAgIDx0aWZmOlBob3RvbWV0cmljSW50ZXJwcmV0YXRpb24+MjwvdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPgogICAgICA8L3JkZjpEZXNjcmlwdGlvbj4KICAgPC9yZGY6UkRGPgo8L3g6eG1wbWV0YT4KAtiABQAAACRQTFRFAAAAAAAABgYGBwcHHh4eKysrx8fHy8vLzMzM7OzsAAAABgYG+q7SZgAAAAp0Uk5TAP7+/v7+/v7+/iJx/a8AAAOwSURBVHja7d0hbsNAEAVQo6SFI6XEcALDcgNLvUBvEBQVhpkWVYWlhSsVFS7t5QIshRt695lEASZP+8c7a1kzDL1fz+/zyuvzp6FbvoddrL6uDd1yGZ5eXldeb18N3fIx7A+58prmhm65DfvDcd0952lu6JabFbD/zVprZj1lzcys+fj9z8xTZtbT8rv8yWlu6BYAIgAAAAAAAAAAAABAM6QXEAEAAAAAAAAAgJ2gnaAIiIA3Q2qAGgAAAAAAAAAAAAAAAAAAAAAAAAAAQJsADkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBVlfAcZ3aeZobusUKMGBhV6KUElHGKBERJR6/fxExRkQZl9/lT8S1oVsuhqyYMmPKjCkzvfcCpsxohrwY0Q06EAEAAAAAAAAAAACgGdILiAAAAAAAAAAAwE7QTlAERMCbITVADQAAAAAAAAAAAAAAAAAAAAAAAAAAwKmwQ1ERAAAAAACPQY9BERABERABERABERABERABAAAAAAAAAICdoJ2gCIiAT2bUADVADRABEQAAQBFUBEVABERgEyvAlJm+V4ApM6bMmDJjyowpM6bMdN0LmDKjGfJiRDfoQAQAAAAAAAAAAACAZkgvIAIAAAAAAAAAADtBO0EREAFvhtQANQAAAAAAAAAAAAAAAAAAAAAAAAAAAKfCDkVFAAAAAAA8Bj0GRUAEREAEREAEREAEREAEAAAAAAAAAAB2gnaCIiACPplRA9QANUAERAAAAEVQERQBERCBTawAU2b6XgGmzJgyY8qMKTOmzJgy03UvYMqMZsiLEd2gAxEAAAAAAAAAAAAAmiG9gAgAAAAAAAAAAOwE7QRFQAS8GVID1AAAAAAAAAAAAAAAAAAAAAAAAAAAAJwKOxQVAQAAAADwGPQYFAEREAEREAEREAEREAERAAAAAAAAAADYCdoJioAI+GRGDVAD1AAREAEAABRBRVAEREAENrECTJnpewWYMmPKjCkzpsyYMmPKTNe9gCkzmiEvRnSDDkQAAAAAAAAAAAAAaIb0AiIAAAAAAAAAALATtBMUARHwZkgNUAMAAAAAAAAAAAAAAAAAAAAAAAAAAHAq7FBUBAAAAADAY9BjUAREQAREQAREQAREQAREAAAAAAAAAABgJ2gnKAIi4JMZNUANUANEQAQAAFAEFUEREAER2MQKMGWm7xVgyowpM50PWen9ugNGXz1XaocAFgAAAABJRU5ErkJggg==",Setting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAABIAAAASABGyWs+AAAACXZwQWcAAABAAAAAQADq8/hgAAADn0lEQVR42u2bzUsVURjGnyO6CPzAMnTjppAo3LTwH1CqTfaxbeOiRS37A0wXtROFVi1aRBs3LWohSIGbQAQXViBGRhG0UIRKUCpK7q/FnOB2uc6cOXNmRnGe3eW+H8/7zLln3vNxpQoVKlQ4wjBFJAFOSRqX1O7osivpvjHmU1nChBZglvSYLYJbS0EanCvIJzWK+gnsyH34/8OuMaYjb265jwCgz6N4SWq3vodbAEmnS/KtBDgoAgyU5BteAOAkMAPcBroc7PskDWfgN+wyDwBdltMMcDI3tYBnde/pHeARMNTErgd4APzweP834oeN1dMkz5DlsFNn/yyv4kdiSK4At4AO4CqwGaDwRmza2B0210qM7YhrXU59ANAq6bWkwQTTn5KO5fIE0uVYlXTeGLOXFMx1DrjlULwKKN41x6DlnIjEEQCckPRe0okCiguJr5LOGGO+xhm5jICJQ1i8LOeJJKPYEQAMKvrtt5ZdjSf2FM0Fq/sZJI2A6UNcvCz36TiDfUcAcE1SPu/U6Mm8k/TFfu6XdFb5iX3dGPM8lQfwNod3+TowBnQ3yddtv1vPIe+b1JIBiwEJ1IAJ208k5W21trWA+V/5CHAcmAtU/A2P/DcCiTAHHE8tgCVhgLvAXgYCk17Jo/yTGfLuWe7Zd72AC8CWB4n3OAz7mLytNkZabAEXMhfeQKYfWEpJZCxA3rGUOZeA/qDF15FpAz47EvlNk9neI2e3jeWCz0BbmvipNkSMMX8kuSZYM8Z8zyqAjbHmaN5mOeYjgIXrU93MWrxHrNQjrqiDkQMLHwG+OdqF3NN3jeXKzU8AoF1SzdH8XKhJUO7HZDXLMbwAwICkJUULFxe0SbqSVQAbw3Xi7Ze0ZLmGAzAKbHs0JGU1QtvAaIjCW4B7ZOvJy2qFa5a730RPtBiaz0CgnkiZi6F5fBZDVMvho7EhcuS3xJJ2hV9IupgTqaLw0hhzab8vq23xOG/r+LDsKjLgYVzxUnU0ltwK2wDezUyJmEwqXgp/PL4rvxthaeCSI+zxuA10J8ZkWdJNSb2SLkvayKHwDRu71+ZajrG941J8agALDQ3GU/a/IvMkYCPzmCbtLNEVmacNtgs5iP9fYVNEV1Q6Hez7yNZSL+J2SarTcpqiyV2iUkG0IvPFvbz5FbEn+KEk3wMjwMeSfCsBXFBdly9CAPk9ydyffpECuB5tZfVJjaKWueOSfinln6YK4lahQoUKRxd/AcRPGTcQCAUQAAAAAElFTkSuQmCC",ChevronRight:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTguNTksMTYuNThMMTMuMTcsMTJMOC41OSw3LjQxTDEwLDZMMTYsMTJMMTAsMThMOC41OSwxNi41OFoiIC8+PC9zdmc+",Check:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz48IURPQ1RZUEUgc3ZnIFBVQkxJQyAiLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4iICJodHRwOi8vd3d3LnczLm9yZy9HcmFwaGljcy9TVkcvMS4xL0RURC9zdmcxMS5kdGQiPjxzdmcgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCI+PHBhdGggZD0iTTIxLDdMOSwxOUwzLjUsMTMuNUw0LjkxLDEyLjA5TDksMTYuMTdMMTkuNTksNS41OUwyMSw3WiIgLz48L3N2Zz4=",ViewIndicator:"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPCFET0NUWVBFIHN2ZyBQVUJMSUMgIi0vL1czQy8vRFREIFNWRyAxLjEvL0VOIiAiaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkIj4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiBpZD0idmlldy1pbmRpY2F0b3IiIGhlaWdodD0iMzAiIHdpZHRoPSIzMCIgdmlld0JveD0iLTIuNSAtMSAzMCAzMCI+Cgk8c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7c3Ryb2tlLXdpZHRoOjI7c3Ryb2tlLW1pdGVybGltaXQ6MTA7ZmlsbDpub25lO30uc3Qxe3N0cm9rZS13aWR0aDo2O3N0cm9rZS1taXRlcmxpbWl0OjEwO30KCTwvc3R5bGU+Cgk8Zz4KCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNIDEyLjUgMCBBIDEyLjUgMTIuNSAwIDAgMCAtMTIuNSAwIEEgMTIuNSAxMi41IDAgMCAwIDEyLjUgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0gMTMgMCBMIDEwIDIgTCAxNiAyIFoiPjwvcGF0aD4KCQk8cGF0aCBjbGFzcz0ic3QyIiBkPSJNIDIgMCBBIDIgMiAwIDAgMCAtMiAwIEEgMiAyIDAgMCAwIDIgMCIgdHJhbnNmb3JtPSJtYXRyaXgoMSwwLDAsMSwxMywxNS41KSI+PC9wYXRoPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGlkPSJpbmRpY2F0b3IiIHRyYW5zZm9ybT0ibWF0cml4KDEsMCwwLDEsMTMsMTUuNSkiPjwvcGF0aD4KCTwvZz4KPC9zdmc+"},c={load:function(t,n=(()=>{}),i=(()=>{}),r=(()=>{})){let o,a,s,c,u,h,d;e["e"].enabled=!0;for(let e in l)l.hasOwnProperty(e)&&t===l[e]&&(d=e);if(o=e["e"].get(d||t),void 0!==o)return n&&setTimeout(function(){i({loaded:1,total:1}),n(o)},0),o;u=window.URL||window.webkitURL,h=document.createElementNS("http://www.w3.org/1999/xhtml","img"),e["e"].add(d||t,h);const p=()=>{u.revokeObjectURL(h.src),n(h)};if(0===t.indexOf("data:"))return h.addEventListener("load",p,!1),h.src=t,h;h.crossOrigin=void 0!==this.crossOrigin?this.crossOrigin:"",a=new window.XMLHttpRequest,a.open("GET",t,!0),"test"!==Object({NODE_ENV:"production",BASE_URL:""}).npm_lifecycle_event&&(a.onreadystatechange=function(){4===this.readyState&&this.status>=400&&r()}),a.responseType="arraybuffer",a.addEventListener("error",r),a.addEventListener("progress",t=>{if(!t)return;const{loaded:e,total:n,lengthComputable:r}=t;r&&i({loaded:e,total:n})}),a.addEventListener("loadend",t=>{if(!t)return;const{currentTarget:{response:e}}=t;s=new Uint8Array(e),c=new window.Blob([s]),h.addEventListener("load",p,!1),h.src=u.createObjectURL(c)}),a.send(null)}},u={load:function(t,n=(()=>{}),i,r){var o=new e["J"];return c.load(t,function(i){o.image=i;const r=t.search(/\.(jpg|jpeg)$/)>0||0===t.search(/^data\:image\/jpeg/);o.format=r?e["A"]:e["z"],o.needsUpdate=!0,n(o)},i,r),o}},h={load:function(t,n=(()=>{}),i=(()=>{}),r){var o,a,s,l,u;return o=new e["h"]([]),a=0,s={},l={},t.map(function(t,e){c.load(t,function(t){o.images[e]=t,a++,6===a&&(o.needsUpdate=!0,n(o))},function(t){for(var n in s[e]={loaded:t.loaded,total:t.total},l.loaded=0,l.total=0,u=0,s)u++,l.loaded+=s[n].loaded,l.total+=s[n].total;u<6&&(l.total=l.total/u*6),i(l)},r)}),o}};function d(t){const e={video:{width:{ideal:1920},height:{ideal:1080},facingMode:{exact:"environment"}},audio:!1};this.constraints=Object.assign(e,t),this.container=null,this.scene=null,this.element=null,this.devices=[],this.stream=null,this.ratioScalar=1,this.videoDeviceIndex=0}function p(t=16777215,n=!0,i=1500){this.dpr=window.devicePixelRatio;const{canvas:r,context:o}=this.createCanvas(),a=new e["H"]({color:t,map:this.createCanvasTexture(r)});e["G"].call(this,a),this.canvasWidth=r.width,this.canvasHeight=r.height,this.context=o,this.color=t instanceof e["g"]?t:new e["g"](t),this.autoSelect=n,this.dwellTime=i,this.rippleDuration=500,this.position.z=-10,this.center.set(.5,.5),this.scale.set(.5,.5,1),this.startTimestamp=null,this.timerId=null,this.callback=null,this.frustumCulled=!1,this.updateCanvasArcByProgress(0)}function f(t,e){return e={exports:{}},t(e,e.exports),e.exports}d.prototype=Object.assign(Object.create(e["k"].prototype),{setContainer:function(t){this.container=t},setScene:function(t){this.scene=t},enumerateDevices:function(){const t=this.devices,e=new Promise(e=>{e(t)});return t.length>0?e:window.navigator.mediaDevices.enumerateDevices()},switchNextVideoDevice:function(){const t=this.stop.bind(this),e=this.start.bind(this),n=this.setVideDeviceIndex.bind(this);let i=this.videoDeviceIndex;this.getDevices("video").then(r=>{t(),i++,i>=r.length?(n(0),i--):n(i),e(r[i])})},getDevices:function(t="video"){const e=this.devices,n=t=>{return t.map(t=>{return e.includes(t)||e.push(t),t})},i=e=>{const n=new RegExp(t,"i");return e.filter(t=>n.test(t.kind))};return this.enumerateDevices().then(n).then(i)},getUserMedia:function(t){const e=this.setMediaStream.bind(this),n=this.playVideo.bind(this),i=t=>{console.warn(`PANOLENS.Media: ${t}`)};return window.navigator.mediaDevices.getUserMedia(t).then(e).then(n).catch(i)},setVideDeviceIndex:function(t){this.videoDeviceIndex=t},start:function(t){const e=this.constraints,n=this.getUserMedia.bind(this),i=i=>{if(!i||0===i.length)throw Error("no video device found");const r=t||i[0];return e.video.deviceId=r.deviceId,n(e)};return this.element=this.createVideoElement(),this.getDevices().then(i)},stop:function(){const t=this.stream;if(t&&t.active){const e=t.getTracks()[0];e.stop(),window.removeEventListener("resize",this.onWindowResize.bind(this)),this.element=null,this.stream=null}},setMediaStream:function(t){this.stream=t,this.element.srcObject=t,this.scene&&(this.scene.background=this.createVideoTexture()),window.addEventListener("resize",this.onWindowResize.bind(this))},playVideo:function(){const{element:t}=this;t&&(t.play(),this.dispatchEvent({type:"play"}))},pauseVideo:function(){const{element:t}=this;t&&(t.pause(),this.dispatchEvent({type:"pause"}))},createVideoTexture:function(){const t=this.element,n=new e["M"](t);return n.generateMipmaps=!1,n.minFilter=e["m"],n.magFilter=e["m"],n.format=e["A"],n.center.set(.5,.5),t.addEventListener("canplay",this.onWindowResize.bind(this)),n},createVideoElement:function(){const t=this.dispatchEvent.bind(this),e=document.createElement("video"),n=()=>t({type:"canplay"});return e.setAttribute("autoplay",""),e.setAttribute("muted",""),e.setAttribute("playsinline",""),e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100%",e.style.height="100%",e.style.objectPosition="center",e.style.objectFit="cover",e.style.display=this.scene?"none":"",e.addEventListener("canplay",n),e},onWindowResize:function(){if(this.element&&this.element.videoWidth&&this.element.videoHeight&&this.scene){const{clientWidth:t,clientHeight:e}=this.container,n=this.scene.background,{videoWidth:i,videoHeight:r}=this.element,o=r/i,a=this.container?t/e:1,s=o*a*this.ratioScalar;t>e?n.repeat.set(s,1):n.repeat.set(1,1/s)}}}),p.prototype=Object.assign(Object.create(e["G"].prototype),{constructor:p,setColor:function(t){this.material.color.copy(t instanceof e["g"]?t:new e["g"](t))},createCanvasTexture:function(t){const n=new e["f"](t);return n.minFilter=e["m"],n.magFilter=e["m"],n.generateMipmaps=!1,n},createCanvas:function(){const t=32,e=32,n=document.createElement("canvas"),i=n.getContext("2d"),r=this.dpr;return n.width=t*r,n.height=e*r,i.scale(r,r),i.shadowBlur=5,i.shadowColor="rgba(200,200,200,0.9)",{canvas:n,context:i}},updateCanvasArcByProgress:function(t){const e=this.context,{canvasWidth:n,canvasHeight:i,material:r}=this,o=this.dpr,a=t*Math.PI*2,s=this.color.getStyle(),l=.5*n/o,c=.5*i/o,u=3;e.clearRect(0,0,n,i),e.beginPath(),0===t?(e.arc(l,c,n/16,0,2*Math.PI),e.fillStyle=s,e.fill()):(e.arc(l,c,n/4-u,-Math.PI/2,-Math.PI/2+a),e.strokeStyle=s,e.lineWidth=u,e.stroke()),e.closePath(),r.map.needsUpdate=!0},ripple:function(){const t=this.context,{canvasWidth:e,canvasHeight:n,material:i}=this,r=this.rippleDuration,o=performance.now(),a=this.color,s=this.dpr,l=.5*e/s,c=.5*n/s,u=()=>{const h=window.requestAnimationFrame(u),d=performance.now()-o,p=d/r,f=1-p>0?1-p:0,m=p*e*.5/s;t.clearRect(0,0,e,n),t.beginPath(),t.arc(l,c,m,0,2*Math.PI),t.fillStyle=`rgba(${255*a.r}, ${255*a.g}, ${255*a.b}, ${f})`,t.fill(),t.closePath(),p>=1&&(window.cancelAnimationFrame(h),this.updateCanvasArcByProgress(0),this.dispatchEvent({type:"reticle-ripple-end"})),i.map.needsUpdate=!0};this.dispatchEvent({type:"reticle-ripple-start"}),u()},show:function(){this.visible=!0},hide:function(){this.visible=!1},start:function(t){this.autoSelect&&(this.dispatchEvent({type:"reticle-start"}),this.startTimestamp=performance.now(),this.callback=t,this.update())},end:function(){this.startTimestamp&&(window.cancelAnimationFrame(this.timerId),this.updateCanvasArcByProgress(0),this.callback=null,this.timerId=null,this.startTimestamp=null,this.dispatchEvent({type:"reticle-end"}))},update:function(){this.timerId=window.requestAnimationFrame(this.update.bind(this));const t=performance.now()-this.startTimestamp,e=t/this.dwellTime;this.updateCanvasArcByProgress(e),this.dispatchEvent({type:"reticle-update",progress:e}),e>=1&&(window.cancelAnimationFrame(this.timerId),this.callback&&this.callback(),this.end(),this.ripple())}});var m=f(function(e,n){var i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,e){var n=Object.keys(this._tweens);if(0===n.length)return!1;t=void 0!==t?t:r.now();while(n.length>0){this._tweensAddedDuringUpdate={};for(var i=0;i<n.length;i++){var o=this._tweens[n[i]];o&&!1===o.update(t)&&(o._isPlaying=!1,e||delete this._tweens[n[i]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var r=new i;r.Group=i,r._nextId=0,r.nextId=function(){return r._nextId++},"undefined"===typeof self&&"undefined"!==typeof t&&t.hrtime?r.now=function(){var e=t.hrtime();return 1e3*e[0]+e[1]/1e6}:"undefined"!==typeof self&&void 0!==self.performance&&void 0!==self.performance.now?r.now=self.performance.now.bind(self.performance):void 0!==Date.now?r.now=Date.now:r.now=function(){return(new Date).getTime()},r.Tween=function(t,e){this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=r.Easing.Linear.None,this._interpolationFunction=r.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=e||r,this._id=r.nextId()},r.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(t,e){return this._valuesEnd=Object.create(t),void 0!==e&&(this._duration=e),this},duration:function(t){return this._duration=t,this},start:function(t){for(var e in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==t?"string"===typeof t?r.now()+parseFloat(t):t:r.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[e]instanceof Array){if(0===this._valuesEnd[e].length)continue;this._valuesEnd[e]=[this._object[e]].concat(this._valuesEnd[e])}void 0!==this._object[e]&&(this._valuesStart[e]=this._object[e],this._valuesStart[e]instanceof Array===!1&&(this._valuesStart[e]*=1),this._valuesStartRepeat[e]=this._valuesStart[e]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var t=0,e=this._chainedTweens.length;t<e;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var e,n,i;if(t<this._startTime)return!0;for(e in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(t-this._startTime)/this._duration,n=0===this._duration||n>1?1:n,i=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[e]){var r=this._valuesStart[e]||0,o=this._valuesEnd[e];o instanceof Array?this._object[e]=this._interpolationFunction(o,i):("string"===typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?r+parseFloat(o):parseFloat(o)),"number"===typeof o&&(this._object[e]=r+(o-r)*i))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,n),1===n){if(this._repeat>0){for(e in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"===typeof this._valuesEnd[e]&&(this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(this._valuesEnd[e])),this._yoyo){var a=this._valuesStartRepeat[e];this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=a}this._valuesStart[e]=this._valuesStartRepeat[e]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=t+this._repeatDelayTime:this._startTime=t+this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}return!0}},r.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2,t<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1)}},Back:{In:function(t){var e=1.70158;return t*t*((e+1)*t-e)},Out:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},InOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)}},Bounce:{In:function(t){return 1-r.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*r.Easing.Bounce.In(2*t):.5*r.Easing.Bounce.Out(2*t-1)+.5}}},r.Interpolation={Linear:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),a=r.Interpolation.Utils.Linear;return e<0?a(t[0],t[1],i):e>1?a(t[n],t[n-1],n-i):a(t[o],t[o+1>n?n:o+1],i-o)},Bezier:function(t,e){for(var n=0,i=t.length-1,o=Math.pow,a=r.Interpolation.Utils.Bernstein,s=0;s<=i;s++)n+=o(1-e,i-s)*o(e,s)*t[s]*a(i,s);return n},CatmullRom:function(t,e){var n=t.length-1,i=n*e,o=Math.floor(i),a=r.Interpolation.Utils.CatmullRom;return t[0]===t[n]?(e<0&&(o=Math.floor(i=n*(1+e))),a(t[(o-1+n)%n],t[o],t[(o+1)%n],t[(o+2)%n],i-o)):e<0?t[0]-(a(t[0],t[0],t[1],t[1],-i)-t[0]):e>1?t[n]-(a(t[n],t[n],t[n-1],t[n-1],i-n)-t[n]):a(t[o?o-1:0],t[o],t[n<o+1?n:o+1],t[n<o+2?n:o+2],i-o)},Utils:{Linear:function(t,e,n){return(e-t)*n+t},Bernstein:function(t,e){var n=r.Interpolation.Utils.Factorial;return n(t)/n(e)/n(t-e)},Factorial:function(){var t=[1];return function(e){var n=1;if(t[e])return t[e];for(var i=e;i>1;i--)n*=i;return t[e]=n,n}}(),CatmullRom:function(t,e,n,i,r){var o=.5*(n-t),a=.5*(i-e),s=r*r,l=r*s;return(2*e-2*n+o+a)*l+(-3*e+3*n-2*o-a)*s+o*r+e}}},function(t){e.exports=r}()});function v(t=300,n,i){const r=500,o=1.3;n=n||l.Info,e["G"].call(this),this.type="infospot",this.animated=void 0===i||i,this.isHovering=!1,this.frustumCulled=!1,this.element=null,this.toPanorama=null,this.cursorStyle=null,this.mode=s.NORMAL,this.scale.set(t,t,1),this.rotation.y=Math.PI,this.container=null,this.originalRaycast=this.raycast,this.HANDLER_FOCUS=null,this.material.side=e["i"],this.material.depthTest=!1,this.material.transparent=!0,this.material.opacity=0,this.scaleUpAnimation=new m.Tween,this.scaleDownAnimation=new m.Tween;const a=function(n){if(!this.material)return;const i=n.image.width/n.image.height,a=new e["L"];n.image.width=n.image.naturalWidth||64,n.image.height=n.image.naturalHeight||64,this.scale.set(i*t,t,1),a.copy(this.scale),this.scaleUpAnimation=new m.Tween(this.scale).to({x:a.x*o,y:a.y*o},r).easing(m.Easing.Elastic.Out),this.scaleDownAnimation=new m.Tween(this.scale).to({x:a.x,y:a.y},r).easing(m.Easing.Elastic.Out),this.material.map=n,this.material.needsUpdate=!0}.bind(this);this.showAnimation=new m.Tween(this.material).to({opacity:1},r).onStart(this.enableRaycast.bind(this,!0)).easing(m.Easing.Quartic.Out),this.hideAnimation=new m.Tween(this.material).to({opacity:0},r).onStart(this.enableRaycast.bind(this,!1)).easing(m.Easing.Quartic.Out),this.addEventListener("click",this.onClick),this.addEventListener("hover",this.onHover),this.addEventListener("hoverenter",this.onHoverStart),this.addEventListener("hoverleave",this.onHoverEnd),this.addEventListener("panolens-dual-eye-effect",this.onDualEyeEffect),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("dismiss",this.onDismiss),this.addEventListener("panolens-infospot-focus",this.setFocusMethod),u.load(n,a)}function g(t){t||console.warn("PANOLENS.Widget: No container specified"),e["k"].call(this),this.DEFAULT_TRANSITION="all 0.27s ease",this.TOUCH_ENABLED=!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch),this.PREVENT_EVENT_HANDLER=function(t){t.preventDefault(),t.stopPropagation()},this.container=t,this.barElement=null,this.fullscreenElement=null,this.videoElement=null,this.settingElement=null,this.mainMenu=null,this.activeMainItem=null,this.activeSubMenu=null,this.mask=null}function y(t,n){e["q"].call(this,t,n),this.type="panorama",this.ImageQualityLow=1,this.ImageQualityFair=2,this.ImageQualityMedium=3,this.ImageQualityHigh=4,this.ImageQualitySuperHigh=5,this.animationDuration=1e3,this.defaultInfospotSize=350,this.container=void 0,this.loaded=!1,this.linkedSpots=[],this.isInfospotVisible=!1,this.linkingImageURL=void 0,this.linkingImageScale=void 0,this.material.side=e["a"],this.material.opacity=0,this.scale.x*=-1,this.renderOrder=-1,this.active=!1,this.infospotAnimation=new m.Tween(this).to({},this.animationDuration/2),this.addEventListener("load",this.fadeIn.bind(this)),this.addEventListener("panolens-container",this.setContainer.bind(this)),this.addEventListener("click",this.onClick.bind(this)),this.setupTransitions()}function b(t,n,i){const r=5e3,o=n||new e["F"](r,60,40),a=i||new e["r"]({opacity:0,transparent:!0});y.call(this,o,a),this.src=t,this.radius=r}function x(){const t=new e["d"],n=new e["r"]({color:0,opacity:0,transparent:!0});t.addAttribute("position",new e["c"](new Float32Array,1)),y.call(this,t,n)}function w(t=[]){const n=1e4,i=Object.assign({},e["D"]["cube"]),r=new e["b"](n,n,n),o=new e["E"]({fragmentShader:i.fragmentShader,vertexShader:i.vertexShader,uniforms:i.uniforms,side:e["a"],transparent:!0});y.call(this,r,o),this.images=t,this.edgeLength=n,this.material.uniforms.opacity.value=0}function _(){const t=[];for(let e=0;e<6;e++)t.push(l.WhiteTile);w.call(this,t)}function M(t,n={}){const i=5e3,r=new e["F"](i,60,40),o=new e["r"]({opacity:0,transparent:!0});y.call(this,r,o),this.src=t,this.options={videoElement:document.createElement("video"),loop:!0,muted:!0,autoplay:!1,playsinline:!0,crossOrigin:"anonymous"},Object.assign(this.options,n),this.videoElement=this.options.videoElement,this.videoProgress=0,this.radius=i,this.addEventListener("leave",this.pauseVideo.bind(this)),this.addEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.addEventListener("video-toggle",this.toggleVideo.bind(this)),this.addEventListener("video-time",this.setVideoCurrentTime.bind(this))}function E(t={}){let e;this._parameters=t,this._zoom=null,this._panoId=null,this._panoClient=new google.maps.StreetViewService,this._count=0,this._total=0,this._canvas=[],this._ctx=[],this._wc=0,this._hc=0,this.result=null,this.rotation=0,this.copyright="",this.onSizeChange=null,this.onPanoramaLoad=null,this.levelsW=[1,2,4,7,13,26],this.levelsH=[1,1,2,4,7,13],this.widths=[416,832,1664,3328,6656,13312],this.heights=[416,416,832,1664,3328,6656],this.maxW=6656,this.maxH=6656;try{const t=document.createElement("canvas");e=t.getContext("experimental-webgl"),e||(e=t.getContext("webgl"))}catch(n){}this.maxW=Math.max(e.getParameter(e.MAX_TEXTURE_SIZE),this.maxW),this.maxH=Math.max(e.getParameter(e.MAX_TEXTURE_SIZE),this.maxH)}function S(t,e){b.call(this),this.panoId=t,this.gsvLoader=null,this.loadRequested=!1,this.setupGoogleMapAPI(e)}v.prototype=Object.assign(Object.create(e["G"].prototype),{constructor:v,setContainer:function(t){let e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&this.element&&e.appendChild(this.element),this.container=e},getContainer:function(){return this.container},onClick:function(t){this.element&&this.getContainer()&&(this.onHoverStart(t),this.lockHoverElement())},onDismiss:function(){this.element&&(this.unlockHoverElement(),this.onHoverEnd())},onHover:function(){},onHoverStart:function(t){if(!this.getContainer())return;const e=this.cursorStyle||(this.mode===s.NORMAL?"pointer":"default"),{scaleDownAnimation:n,scaleUpAnimation:i,element:r}=this;if(this.isHovering=!0,this.container.style.cursor=e,this.animated&&(n.stop(),i.start()),r&&t.mouseEvent.clientX>=0&&t.mouseEvent.clientY>=0){const{left:t,right:e,style:n}=r;this.mode===s.CARDBOARD||this.mode===s.STEREO?(n.display="none",t.style.display="block",e.style.display="block",r._width=t.clientWidth,r._height=t.clientHeight):(n.display="block",t&&(t.style.display="none"),e&&(e.style.display="none"),r._width=r.clientWidth,r._height=r.clientHeight)}},onHoverEnd:function(){if(!this.getContainer())return;const{scaleDownAnimation:t,scaleUpAnimation:e,element:n}=this;if(this.isHovering=!1,this.container.style.cursor="default",this.animated&&(e.stop(),t.start()),n&&!this.element.locked){const{left:t,right:e,style:i}=n;i.display="none",t&&(t.style.display="none"),e&&(e.style.display="none"),this.unlockHoverElement()}},onDualEyeEffect:function(t){if(!this.getContainer())return;let e,n,i;this.mode=t.mode,e=this.element,n=this.container.clientWidth/2,i=this.container.clientHeight/2,e&&(e.left||e.right||(e.left=e.cloneNode(!0),e.right=e.cloneNode(!0)),this.mode===s.CARDBOARD||this.mode===s.STEREO?(e.left.style.display=e.style.display,e.right.style.display=e.style.display,e.style.display="none"):(e.style.display=e.left.style.display,e.left.style.display="none",e.right.style.display="none"),this.translateElement(n,i),this.container.appendChild(e.left),this.container.appendChild(e.right))},translateElement:function(t,e){if(!this.element._width||!this.element._height||!this.getContainer())return;let n,i,r,o,a,l,c;c=this.container,r=this.element,o=r._width/2,a=r._height/2,l=void 0!==r.verticalDelta?r.verticalDelta:40,n=t-o,i=e-a-l,this.mode!==s.CARDBOARD&&this.mode!==s.STEREO||!r.left||!r.right||t===c.clientWidth/2&&e===c.clientHeight/2?this.setElementStyle("transform",r,"translate("+n+"px, "+i+"px)"):(n=c.clientWidth/4-o+(t-c.clientWidth/2),i=c.clientHeight/2-a-l+(e-c.clientHeight/2),this.setElementStyle("transform",r.left,"translate("+n+"px, "+i+"px)"),n+=c.clientWidth/2,this.setElementStyle("transform",r.right,"translate("+n+"px, "+i+"px)"))},setElementStyle:function(t,e,n){const i=e.style;"transform"===t&&(i.webkitTransform=i.msTransform=i.transform=n)},setText:function(t){this.element&&(this.element.textContent=t)},setCursorHoverStyle:function(t){this.cursorStyle=t},addHoverText:function(t,e=40){this.element||(this.element=document.createElement("div"),this.element.style.display="none",this.element.style.color="#fff",this.element.style.top=0,this.element.style.maxWidth="50%",this.element.style.maxHeight="50%",this.element.style.textShadow="0 0 3px #000000",this.element.style.fontFamily='"Trebuchet MS", Helvetica, sans-serif',this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e),this.setText(t)},addHoverElement:function(t,e=40){this.element||(this.element=t.cloneNode(!0),this.element.style.display="none",this.element.style.top=0,this.element.style.position="absolute",this.element.classList.add("panolens-infospot"),this.element.verticalDelta=e)},removeHoverElement:function(){this.element&&(this.element.left&&(this.container.removeChild(this.element.left),this.element.left=null),this.element.right&&(this.container.removeChild(this.element.right),this.element.right=null),this.container.removeChild(this.element),this.element=null)},lockHoverElement:function(){this.element&&(this.element.locked=!0)},unlockHoverElement:function(){this.element&&(this.element.locked=!1)},enableRaycast:function(t=!0){this.raycast=t?this.originalRaycast:()=>{}},show:function(t=0){const{animated:e,hideAnimation:n,showAnimation:i,material:r}=this;e?(n.stop(),i.delay(t).start()):(this.enableRaycast(!0),r.opacity=1)},hide:function(t=0){const{animated:e,hideAnimation:n,showAnimation:i,material:r,element:o}=this;if(o){const{style:t}=o;t.display="none"}e?(i.stop(),n.delay(t).start()):(this.enableRaycast(!1),r.opacity=0)},setFocusMethod:function(t){t&&(this.HANDLER_FOCUS=t.method)},focus:function(t,e){this.HANDLER_FOCUS&&(this.HANDLER_FOCUS(this.position,t,e),this.onDismiss())},dispose:function(){const{geometry:t,material:e}=this,{map:n}=e;this.removeHoverElement(),this.parent&&this.parent.remove(this),n&&(n.dispose(),e.map=null),t&&(t.dispose(),this.geometry=null),e&&(e.dispose(),this.material=null)}}),g.prototype=Object.assign(Object.create(e["k"].prototype),{constructor:g,addControlBar:function(){if(this.container){var t,e,n,i,r=this;i="linear-gradient(bottom, rgba(0,0,0,0.2), rgba(0,0,0,0))",t=document.createElement("div"),t.style.width="100%",t.style.height="44px",t.style.float="left",t.style.transform=t.style.webkitTransform=t.style.msTransform="translateY(-100%)",t.style.background="-webkit-"+i,t.style.background="-moz-"+i,t.style.background="-o-"+i,t.style.background="-ms-"+i,t.style.background=i,t.style.transition=this.DEFAULT_TRANSITION,t.style.pointerEvents="none",t.isHidden=!1,t.toggle=function(){t.isHidden=!t.isHidden,e=t.isHidden?"translateY(0)":"translateY(-100%)",n=t.isHidden?0:1,t.style.transform=t.style.webkitTransform=t.style.msTransform=e,t.style.opacity=n};var o=this.createDefaultMenu();this.mainMenu=this.createMainMenu(o),t.appendChild(this.mainMenu);var a=this.createMask();this.mask=a,this.container.appendChild(a),t.dispose=function(){r.fullscreenElement&&(t.removeChild(r.fullscreenElement),r.fullscreenElement.dispose(),r.fullscreenElement=null),r.settingElement&&(t.removeChild(r.settingElement),r.settingElement.dispose(),r.settingElement=null),r.videoElement&&(t.removeChild(r.videoElement),r.videoElement.dispose(),r.videoElement=null)},this.container.appendChild(t),this.mask.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),this.mask.addEventListener(r.TOUCH_ENABLED?"touchend":"click",function(t){t.preventDefault(),t.stopPropagation(),r.mask.hide(),r.settingElement.deactivate()},!1),this.addEventListener("control-bar-toggle",t.toggle),this.barElement=t}else console.warn("Widget container not set")},createDefaultMenu:function(){var t,e=this;return t=function(t,n){return function(){e.dispatchEvent({type:"panolens-viewer-handler",method:t,data:n})}},[{title:"Control",subMenu:[{title:this.TOUCH_ENABLED?"Touch":"Mouse",handler:t("enableControl",a.ORBIT)},{title:"Sensor",handler:t("enableControl",a.DEVICEORIENTATION)}]},{title:"Mode",subMenu:[{title:"Normal",handler:t("disableEffect")},{title:"Cardboard",handler:t("enableEffect",s.CARDBOARD)},{title:"Stereoscopic",handler:t("enableEffect",s.STEREO)}]}]},addControlButton:function(t){let e;switch(t){case"fullscreen":e=this.createFullscreenButton(),this.fullscreenElement=e;break;case"setting":e=this.createSettingButton(),this.settingElement=e;break;case"video":e=this.createVideoControl(),this.videoElement=e;break;default:return}e&&this.barElement.appendChild(e)},createMask:function(){const t=document.createElement("div");return t.style.position="absolute",t.style.top=0,t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.background="transparent",t.style.display="none",t.show=function(){this.style.display="block"},t.hide=function(){this.style.display="none"},t},createSettingButton:function(){let t,e=this;function n(t){t.preventDefault(),t.stopPropagation(),e.mainMenu.toggle(),this.activated?this.deactivate():this.activate()}return t=this.createCustomItem({style:{backgroundImage:'url("'+l.Setting+'")',webkitTransition:this.DEFAULT_TRANSITION,transition:this.DEFAULT_TRANSITION},onTap:n}),t.activate=function(){this.style.transform="rotate3d(0,0,1,90deg)",this.activated=!0,e.mask.show()},t.deactivate=function(){this.style.transform="rotate3d(0,0,0,0)",this.activated=!1,e.mask.hide(),e.mainMenu&&e.mainMenu.visible&&e.mainMenu.hide(),e.activeSubMenu&&e.activeSubMenu.visible&&e.activeSubMenu.hide(),e.mainMenu&&e.mainMenu._width&&(e.mainMenu.changeSize(e.mainMenu._width),e.mainMenu.unslideAll())},t.activated=!1,t},createFullscreenButton:function(){let t,e,n=this,i=!1,r=!0;const{container:o}=this;if(e="panolens-style-addon",document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){if(document.addEventListener("fullscreenchange",s,!1),document.addEventListener("webkitfullscreenchange",s,!1),document.addEventListener("mozfullscreenchange",s,!1),document.addEventListener("MSFullscreenChange",s,!1),t=this.createCustomItem({style:{backgroundImage:'url("'+l.FullscreenEnter+'")'},onTap:a}),!document.querySelector(e)){const t=document.createElement("style");t.id=e,t.innerHTML=":-webkit-full-screen { width: 100% !important; height: 100% !important }",document.body.appendChild(t)}return t}function a(t){t.preventDefault(),t.stopPropagation(),r=!1,i?(document.exitFullscreen&&document.exitFullscreen(),document.msExitFullscreen&&document.msExitFullscreen(),document.mozCancelFullScreen&&document.mozCancelFullScreen(),document.webkitExitFullscreen&&document.webkitExitFullscreen(),i=!1):(o.requestFullscreen&&o.requestFullscreen(),o.msRequestFullscreen&&o.msRequestFullscreen(),o.mozRequestFullScreen&&o.mozRequestFullScreen(),o.webkitRequestFullscreen&&o.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT),i=!0),this.style.backgroundImage=i?'url("'+l.FullscreenLeave+'")':'url("'+l.FullscreenEnter+'")'}function s(){r&&(i=!i,t.style.backgroundImage=i?'url("'+l.FullscreenLeave+'")':'url("'+l.FullscreenEnter+'")'),n.dispatchEvent({type:"panolens-viewer-handler",method:"onWindowResize"}),r=!0}},createVideoControl:function(){const t=document.createElement("span");return t.style.display="none",t.show=function(){t.style.display=""},t.hide=function(){t.style.display="none",t.controlButton.paused=!0,t.controlButton.update()},t.controlButton=this.createVideoControlButton(),t.seekBar=this.createVideoControlSeekbar(),t.appendChild(t.controlButton),t.appendChild(t.seekBar),t.dispose=function(){t.removeChild(t.controlButton),t.removeChild(t.seekBar),t.controlButton.dispose(),t.controlButton=null,t.seekBar.dispose(),t.seekBar=null},this.addEventListener("video-control-show",t.show),this.addEventListener("video-control-hide",t.hide),t},createVideoControlButton:function(){const t=this;function e(e){e.preventDefault(),e.stopPropagation(),t.dispatchEvent({type:"panolens-viewer-handler",method:"toggleVideoPlay",data:!this.paused}),this.paused=!this.paused,n.update()}const n=this.createCustomItem({style:{float:"left",backgroundImage:'url("'+l.VideoPlay+'")'},onTap:e});return n.paused=!0,n.update=function(t){this.paused=void 0!==t?t:this.paused,this.style.backgroundImage='url("'+(this.paused?l.VideoPlay:l.VideoPause)+'")'},n},createVideoControlSeekbar:function(){let t,e,n,i,r,o,a=this,s=!1;function l(t){t.stopPropagation(),s=!0,i=t.clientX||t.changedTouches&&t.changedTouches[0].clientX,r=parseInt(e.style.width)/100,h()}function c(e){if(s){const n=e.clientX||e.changedTouches&&e.changedTouches[0].clientX;o=(n-i)/t.clientWidth,o=r+o,o=o>1?1:o<0?0:o,t.setProgress(o),a.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:o})}}function u(t){t.stopPropagation(),s=!1,d()}function h(){a.container.addEventListener("mousemove",c,{passive:!0}),a.container.addEventListener("mouseup",u,{passive:!0}),a.container.addEventListener("touchmove",c,{passive:!0}),a.container.addEventListener("touchend",u,{passive:!0})}function d(){a.container.removeEventListener("mousemove",c,!1),a.container.removeEventListener("mouseup",u,!1),a.container.removeEventListener("touchmove",c,!1),a.container.removeEventListener("touchend",u,!1)}function p(e){if(e.preventDefault(),e.stopPropagation(),e.target===n)return;const i=e.changedTouches&&e.changedTouches.length>0?(e.changedTouches[0].pageX-e.target.getBoundingClientRect().left)/this.clientWidth:e.offsetX/this.clientWidth;a.dispatchEvent({type:"panolens-viewer-handler",method:"setVideoCurrentTime",data:i}),t.setProgress(e.offsetX/this.clientWidth)}function f(){d(),e=null,n=null}return e=document.createElement("div"),e.style.width="0%",e.style.height="100%",e.style.backgroundColor="#fff",n=document.createElement("div"),n.style.float="right",n.style.width="14px",n.style.height="14px",n.style.transform="translate(7px, -5px)",n.style.borderRadius="50%",n.style.backgroundColor="#ddd",n.addEventListener("mousedown",l,{passive:!0}),n.addEventListener("touchstart",l,{passive:!0}),e.appendChild(n),t=this.createCustomItem({style:{float:"left",width:"30%",height:"4px",marginTop:"20px",backgroundColor:"rgba(188,188,188,0.8)"},onTap:p,onDispose:f}),t.appendChild(e),t.setProgress=function(t){e.style.width=100*t+"%"},this.addEventListener("video-update",function(e){t.setProgress(e.percentage)}),t.progressElement=e,t.progressElementControl=n,t},createMenuItem:function(t){const e=this,n=document.createElement("a");return n.textContent=t,n.style.display="block",n.style.padding="10px",n.style.textDecoration="none",n.style.cursor="pointer",n.style.pointerEvents="auto",n.style.transition=this.DEFAULT_TRANSITION,n.slide=function(t){this.style.transform="translateX("+(t?"":"-")+"100%)"},n.unslide=function(){this.style.transform="translateX(0)"},n.setIcon=function(t){this.icon&&(this.icon.style.backgroundImage="url("+t+")")},n.setSelectionTitle=function(t){this.selection&&(this.selection.textContent=t)},n.addSelection=function(t){const e=document.createElement("span");return e.style.fontSize="13px",e.style.fontWeight="300",e.style.float="right",this.selection=e,this.setSelectionTitle(t),this.appendChild(e),this},n.addIcon=function(t=l.ChevronRight,e=!1,n=!1){const i=document.createElement("span");return i.style.float=e?"left":"right",i.style.width="17px",i.style.height="17px",i.style["margin"+(e?"Right":"Left")]="12px",i.style.backgroundSize="cover",n&&(i.style.transform="rotateZ(180deg)"),this.icon=i,this.setIcon(t),this.appendChild(i),this},n.addSubMenu=function(t,n){return this.subMenu=e.createSubMenu(t,n),this},n.addEventListener("mouseenter",function(){this.style.backgroundColor="#e0e0e0"},!1),n.addEventListener("mouseleave",function(){this.style.backgroundColor="#fafafa"},!1),n},createMenuItemHeader:function(t){const e=this.createMenuItem(t);return e.style.borderBottom="1px solid #333",e.style.paddingBottom="15px",e},createMainMenu:function(t){let e=this,n=this.createMenu();function i(t){t.preventDefault(),t.stopPropagation();let n=e.mainMenu,i=this.subMenu;function r(){n.changeSize(i.clientWidth),i.show(),i.unslideAll()}n.hide(),n.slideAll(),n.parentElement.appendChild(i),e.activeMainItem=this,e.activeSubMenu=i,window.requestAnimationFrame(r)}n._width=200,n.changeSize(n._width);for(var r=0;r<t.length;r++){var o=n.addItem(t[r].title);if(o.style.paddingLeft="20px",o.addIcon().addEventListener(e.TOUCH_ENABLED?"touchend":"click",i,!1),t[r].subMenu&&t[r].subMenu.length>0){var a=t[r].subMenu[0].title;o.addSelection(a).addSubMenu(t[r].title,t[r].subMenu)}}return n},createSubMenu:function(t,e){let n,i=this,r=this.createMenu();function o(t){t.preventDefault(),t.stopPropagation(),n=i.mainMenu,n.changeSize(n._width),n.unslideAll(),n.show(),r.slideAll(!0),r.hide(),"header"!==this.type&&(r.setActiveItem(this),i.activeMainItem.setSelectionTitle(this.textContent),this.handler&&this.handler())}r.items=e,r.activeItem=null,r.addHeader(t).addIcon(void 0,!0,!0).addEventListener(i.TOUCH_ENABLED?"touchend":"click",o,!1);for(let a=0;a<e.length;a++){const t=r.addItem(e[a].title);t.style.fontWeight=300,t.handler=e[a].handler,t.addIcon(" ",!0),t.addEventListener(i.TOUCH_ENABLED?"touchend":"click",o,!1),r.activeItem||r.setActiveItem(t)}return r.slideAll(!0),r},createMenu:function(){const t=this,e=document.createElement("span"),n=e.style;return n.padding="5px 0",n.position="fixed",n.bottom="100%",n.right="14px",n.backgroundColor="#fafafa",n.fontFamily="Helvetica Neue",n.fontSize="14px",n.visibility="hidden",n.opacity=0,n.boxShadow="0 0 12pt rgba(0,0,0,0.25)",n.borderRadius="2px",n.overflow="hidden",n.willChange="width, height, opacity",n.pointerEvents="auto",n.transition=this.DEFAULT_TRANSITION,e.visible=!1,e.changeSize=function(t,e){t&&(this.style.width=t+"px"),e&&(this.style.height=e+"px")},e.show=function(){this.style.opacity=1,this.style.visibility="visible",this.visible=!0},e.hide=function(){this.style.opacity=0,this.style.visibility="hidden",this.visible=!1},e.toggle=function(){this.visible?this.hide():this.show()},e.slideAll=function(t){for(let n=0;n<e.children.length;n++)e.children[n].slide&&e.children[n].slide(t)},e.unslideAll=function(){for(let t=0;t<e.children.length;t++)e.children[t].unslide&&e.children[t].unslide()},e.addHeader=function(e){const n=t.createMenuItemHeader(e);return n.type="header",this.appendChild(n),n},e.addItem=function(e){const n=t.createMenuItem(e);return n.type="item",this.appendChild(n),n},e.setActiveItem=function(t){this.activeItem&&this.activeItem.setIcon(" "),t.setIcon(l.Check),this.activeItem=t},e.addEventListener("mousemove",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mouseup",this.PREVENT_EVENT_HANDLER,!0),e.addEventListener("mousedown",this.PREVENT_EVENT_HANDLER,!0),e},createCustomItem:function(t={}){const e=this,n=t.element||document.createElement("span"),{onDispose:i}=t;return n.style.cursor="pointer",n.style.float="right",n.style.width="44px",n.style.height="100%",n.style.backgroundSize="60%",n.style.backgroundRepeat="no-repeat",n.style.backgroundPosition="center",n.style.webkitUserSelect=n.style.MozUserSelect=n.style.userSelect="none",n.style.position="relative",n.style.pointerEvents="auto",n.addEventListener(e.TOUCH_ENABLED?"touchstart":"mouseenter",function(){n.style.filter=n.style.webkitFilter="drop-shadow(0 0 5px rgba(255,255,255,1))"},{passive:!0}),n.addEventListener(e.TOUCH_ENABLED?"touchend":"mouseleave",function(){n.style.filter=n.style.webkitFilter=""},{passive:!0}),this.mergeStyleOptions(n,t.style),t.onTap&&n.addEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),n.dispose=function(){n.removeEventListener(e.TOUCH_ENABLED?"touchend":"click",t.onTap,!1),i&&t.onDispose()},n},mergeStyleOptions:function(t,e={}){for(let n in e)e.hasOwnProperty(n)&&(t.style[n]=e[n]);return t},dispose:function(){this.barElement&&(this.container.removeChild(this.barElement),this.barElement.dispose(),this.barElement=null)}}),y.prototype=Object.assign(Object.create(e["q"].prototype),{constructor:y,add:function(t){let n;if(arguments.length>1){for(var i=0;i<arguments.length;i++)this.add(arguments[i]);return this}if(t instanceof v){if(n=t,t.dispatchEvent){const{container:e}=this;e&&t.dispatchEvent({type:"panolens-container",container:e}),t.dispatchEvent({type:"panolens-infospot-focus",method:function(t,e,n){this.dispatchEvent({type:"panolens-viewer-handler",method:"tweenControlCenter",data:[t,e,n]})}.bind(this)})}}else n=new e["t"],n.scale.x=-1,n.scalePlaceHolder=!0,n.add(t);e["t"].prototype.add.call(this,n)},load:function(){this.onLoad()},onClick:function(t){t.intersects&&0===t.intersects.length&&this.traverse(function(t){t.dispatchEvent({type:"dismiss"})})},setContainer:function(t){let e;t instanceof HTMLElement?e=t:t&&t.container&&(e=t.container),e&&(this.children.forEach(function(t){t instanceof v&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:e})}),this.container=e)},onLoad:function(){this.loaded=!0,this.dispatchEvent({type:"load"})},onProgress:function(t){this.dispatchEvent({type:"progress",progress:t})},onError:function(){this.dispatchEvent({type:"error"})},getZoomLevel:function(){let t;return t=window.innerWidth<=800?this.ImageQualityFair:window.innerWidth>800&&window.innerWidth<=1280?this.ImageQualityMedium:window.innerWidth>1280&&window.innerWidth<=1920?this.ImageQualityHigh:window.innerWidth>1920?this.ImageQualitySuperHigh:this.ImageQualityLow,t},updateTexture:function(t){this.material.map=t,this.material.needsUpdate=!0},toggleInfospotVisibility:function(t,e){e=void 0!==e?e:0;const n=void 0!==t?t:!this.isInfospotVisible;this.traverse(function(t){t instanceof v&&(n?t.show(e):t.hide(e))}),this.isInfospotVisible=n,this.infospotAnimation.onComplete(function(){this.dispatchEvent({type:"infospot-animation-complete",visible:n})}.bind(this)).delay(e).start()},setLinkingImage:function(t,e){this.linkingImageURL=t,this.linkingImageScale=e},link:function(t,e,n,i){let r,o;if(this.visible=!0,!e)return void console.warn("Please specify infospot position for linking");r=void 0!==n?n:void 0!==t.linkingImageScale?t.linkingImageScale:300,o=i||(t.linkingImageURL?t.linkingImageURL:l.Arrow);const a=new v(r,o);a.position.copy(e),a.toPanorama=t,a.addEventListener("click",function(){this.dispatchEvent({type:"panolens-viewer-handler",method:"setPanorama",data:t})}.bind(this)),this.linkedSpots.push(a),this.add(a),this.visible=!1},reset:function(){this.children.length=0},setupTransitions:function(){this.fadeInAnimation=new m.Tween(this.material).easing(m.Easing.Quartic.Out).onStart(function(){this.visible=!0,this.dispatchEvent({type:"enter-fade-start"})}.bind(this)),this.fadeOutAnimation=new m.Tween(this.material).easing(m.Easing.Quartic.Out).onComplete(function(){this.visible=!1,this.dispatchEvent({type:"leave-complete"})}.bind(this)),this.enterTransition=new m.Tween(this).easing(m.Easing.Quartic.Out).onComplete(function(){this.dispatchEvent({type:"enter-complete"})}.bind(this)).start(),this.leaveTransition=new m.Tween(this).easing(m.Easing.Quartic.Out)},onFadeAnimationUpdate:function(){const t=this.material.opacity,{uniforms:e}=this.material;e&&e.opacity&&(e.opacity.value=t)},fadeIn:function(t){t=t>=0?t:this.animationDuration,this.fadeOutAnimation.stop(),this.fadeInAnimation.to({opacity:1},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).onComplete(function(){this.toggleInfospotVisibility(!0,t/2),this.dispatchEvent({type:"enter-fade-complete"})}.bind(this)).start()},fadeOut:function(t){t=t>=0?t:this.animationDuration,this.fadeInAnimation.stop(),this.fadeOutAnimation.to({opacity:0},t).onUpdate(this.onFadeAnimationUpdate.bind(this)).start()},onEnter:function(){const t=this.animationDuration;this.leaveTransition.stop(),this.enterTransition.to({},t).onStart(function(){this.dispatchEvent({type:"enter-start"}),this.loaded?this.fadeIn(t):this.load()}.bind(this)).start(),this.dispatchEvent({type:"enter"}),this.children.forEach(t=>{t.dispatchEvent({type:"panorama-enter"})}),this.active=!0},onLeave:function(){const t=this.animationDuration;this.enterTransition.stop(),this.leaveTransition.to({},t).onStart(function(){this.dispatchEvent({type:"leave-start"}),this.fadeOut(t),this.toggleInfospotVisibility(!1)}.bind(this)).start(),this.dispatchEvent({type:"leave"}),this.children.forEach(t=>{t.dispatchEvent({type:"panorama-leave"})}),this.active=!1},dispose:function(){function t(e){const{geometry:n,material:i}=e;for(var r=e.children.length-1;r>=0;r--)t(e.children[r]),e.remove(e.children[r]);e instanceof v&&e.dispose(),n&&(n.dispose(),e.geometry=null),i&&(i.dispose(),e.material=null)}this.infospotAnimation.stop(),this.fadeInAnimation.stop(),this.fadeOutAnimation.stop(),this.enterTransition.stop(),this.leaveTransition.stop(),this.dispatchEvent({type:"panolens-viewer-handler",method:"onPanoramaDispose",data:this}),t(this),this.parent&&this.parent.remove(this)}}),b.prototype=Object.assign(Object.create(y.prototype),{constructor:b,load:function(t){t=t||this.src,t?"string"===typeof t?u.load(t,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this)):t instanceof HTMLImageElement&&this.onLoad(new e["J"](t)):console.warn("Image source undefined")},onLoad:function(t){t.minFilter=t.magFilter=e["m"],t.needsUpdate=!0,this.updateTexture(t),window.requestAnimationFrame(y.prototype.onLoad.bind(this))},reset:function(){y.prototype.reset.call(this)},dispose:function(){const{material:{map:t}}=this;e["e"].remove(this.src),t&&t.dispose(),y.prototype.dispose.call(this)}}),x.prototype=Object.assign(Object.create(y.prototype),{constructor:x}),w.prototype=Object.assign(Object.create(y.prototype),{constructor:w,load:function(){h.load(this.images,this.onLoad.bind(this),this.onProgress.bind(this),this.onError.bind(this))},onLoad:function(t){this.material.uniforms["tCube"].value=t,y.prototype.onLoad.call(this)},dispose:function(){const{value:t}=this.material.uniforms.tCube;this.images.forEach(t=>{e["e"].remove(t)}),t instanceof e["h"]&&t.dispose(),y.prototype.dispose.call(this)}}),_.prototype=Object.assign(Object.create(w.prototype),{constructor:_}),M.prototype=Object.assign(Object.create(y.prototype),{constructor:M,isMobile:function(){let t=!1;return function(e){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(e)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(e.substr(0,4)))&&(t=!0)}(window.navigator.userAgent||window.navigator.vendor||window.opera),t},load:function(){const{muted:t,loop:e,autoplay:n,playsinline:i,crossOrigin:r}=this.options,o=this.videoElement,a=this.material,s=this.onProgress.bind(this),l=this.onLoad.bind(this);o.loop=e,o.autoplay=n,o.playsinline=i,o.crossOrigin=r,o.muted=t,i&&(o.setAttribute("playsinline",""),o.setAttribute("webkit-playsinline",""));const c=function(){this.setVideoTexture(o),n&&this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}),this.isMobile()&&(o.pause(),n&&t?this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1}):this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}));const e=()=>{a.map.needsUpdate=!0,s({loaded:1,total:1}),l()};window.requestAnimationFrame(e)};if(o.readyState>2)c.call(this);else{if(0===o.querySelectorAll("source").length){const t=document.createElement("source");t.src=this.src,o.appendChild(t)}o.load()}o.addEventListener("loadeddata",c.bind(this)),o.addEventListener("timeupdate",function(){this.videoProgress=o.duration>=0?o.currentTime/o.duration:0,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:this.videoProgress})}.bind(this)),o.addEventListener("ended",function(){e||(this.resetVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0}))}.bind(this),!1)},setVideoTexture:function(t){if(!t)return;const n=new e["M"](t);n.minFilter=e["m"],n.magFilter=e["m"],n.format=e["A"],this.updateTexture(n)},reset:function(){this.videoElement=void 0,y.prototype.reset.call(this)},isVideoPaused:function(){return this.videoElement.paused},toggleVideo:function(){const t=this.videoElement;t&&t[t.paused?"play":"pause"]()},setVideoCurrentTime:function({percentage:t}){const e=this.videoElement;e&&!Number.isNaN(t)&&1!==t&&(e.currentTime=e.duration*t,this.dispatchEvent({type:"panolens-viewer-handler",method:"onVideoUpdate",data:t}))},playVideo:function(){const t=this.videoElement,e=this.playVideo.bind(this),n=this.dispatchEvent.bind(this),i=()=>{n({type:"play"})},r=t=>{window.requestAnimationFrame(e),n({type:"play-error",error:t})};t&&t.paused&&t.play().then(i).catch(r)},pauseVideo:function(){const t=this.videoElement;t&&!t.paused&&t.pause(),this.dispatchEvent({type:"pause"})},resumeVideoProgress:function(){const t=this.videoElement;t.readyState>=4&&t.autoplay&&!this.isMobile()?(this.playVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!1})):(this.pauseVideo(),this.dispatchEvent({type:"panolens-viewer-handler",method:"updateVideoPlayButton",data:!0})),this.setVideoCurrentTime({percentage:this.videoProgress})},resetVideo:function(){const t=this.videoElement;t&&this.setVideoCurrentTime({percentage:0})},isVideoMuted:function(){return this.videoElement.muted},muteVideo:function(){const t=this.videoElement;t&&!t.muted&&(t.muted=!0),this.dispatchEvent({type:"volumechange"})},unmuteVideo:function(){const t=this.videoElement;t&&this.isVideoMuted()&&(t.muted=!1),this.dispatchEvent({type:"volumechange"})},getVideoElement:function(){return this.videoElement},dispose:function(){const{material:{map:t}}=this;this.pauseVideo(),this.removeEventListener("leave",this.pauseVideo.bind(this)),this.removeEventListener("enter-fade-start",this.resumeVideoProgress.bind(this)),this.removeEventListener("video-toggle",this.toggleVideo.bind(this)),this.removeEventListener("video-time",this.setVideoCurrentTime.bind(this)),t&&t.dispose(),y.prototype.dispose.call(this)}}),Object.assign(E.prototype,{constructor:E,setProgress:function(t,e){this.onProgress&&this.onProgress({loaded:t,total:e})},adaptTextureToZoom:function(){const t=this.widths[this._zoom],e=this.heights[this._zoom],n=this.maxW,i=this.maxH;this._wc=Math.ceil(t/n),this._hc=Math.ceil(e/i);for(let r=0;r<this._hc;r++)for(let o=0;o<this._wc;o++){const a=document.createElement("canvas");o<this._wc-1?a.width=n:a.width=t-n*o,r<this._hc-1?a.height=i:a.height=e-i*r,this._canvas.push(a),this._ctx.push(a.getContext("2d"))}},composeFromTile:function(t,e,n){const i=this.maxW,r=this.maxH;t*=512,e*=512;const o=Math.floor(t/i),a=Math.floor(e/r);t-=o*i,e-=a*r,this._ctx[a*this._wc+o].drawImage(n,0,0,n.width,n.height,t,e,512,512),this.progress()},progress:function(){this._count++,this.setProgress(this._count,this._total),this._count===this._total&&(this.canvas=this._canvas,this.panoId=this._panoId,this.zoom=this._zoom,this.onPanoramaLoad&&this.onPanoramaLoad(this._canvas[0]))},composePanorama:function(){this.setProgress(0,1);const t=this.levelsW[this._zoom],e=this.levelsH[this._zoom],n=this;this._count=0,this._total=t*e;const{useWebGL:i}=this._parameters;for(let r=0;r<e;r++)for(let e=0;e<t;e++){const t="https://geo0.ggpht.com/cbk?cb_client=maps_sv.tactile&authuser=0&hl=en&output=tile&zoom="+this._zoom+"&x="+e+"&y="+r+"&panoid="+this._panoId+"&nbt&fover=2";(function(e,r){if(i){const i=u.load(t,null,function(){n.composeFromTile(e,r,i)})}else{const i=new Image;i.addEventListener("load",function(){n.composeFromTile(e,r,this)}),i.crossOrigin="",i.src=t}})(e,r)}},load:function(t){this.loadPano(t)},loadPano:function(t){const e=this;this._panoClient.getPanoramaById(t,function(t,n){n===google.maps.StreetViewStatus.OK&&(e.result=t,e.copyright=t.copyright,e._panoId=t.location.pano,e.composePanorama())})},setZoom:function(t){this._zoom=t,this.adaptTextureToZoom()}}),S.prototype=Object.assign(Object.create(b.prototype),{constructor:S,load:function(t){this.loadRequested=!0,t=t||this.panoId||{},t&&this.gsvLoader&&this.loadGSVLoader(t)},setupGoogleMapAPI:function(t){const e=document.createElement("script");e.src="https://maps.googleapis.com/maps/api/js?",e.src+=t?"key="+t:"",e.onreadystatechange=this.setGSVLoader.bind(this),e.onload=this.setGSVLoader.bind(this),document.querySelector("head").appendChild(e)},setGSVLoader:function(){this.gsvLoader=new E,this.loadRequested&&this.load()},getGSVLoader:function(){return this.gsvLoader},loadGSVLoader:function(t){this.loadRequested=!1,this.gsvLoader.onProgress=this.onProgress.bind(this),this.gsvLoader.onPanoramaLoad=this.onLoad.bind(this),this.gsvLoader.setZoom(this.getZoomLevel()),this.gsvLoader.load(t),this.gsvLoader.loaded=!0},onLoad:function(t){b.prototype.onLoad.call(this,new e["J"](t))},reset:function(){this.gsvLoader=void 0,b.prototype.reset.call(this)}});const T={uniforms:{tDiffuse:{value:new e["J"]},resolution:{value:1},transform:{value:new e["p"]},zoom:{value:1},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","vUv = uv;","gl_Position = vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform float resolution;","uniform mat4 transform;","uniform float zoom;","uniform float opacity;","varying vec2 vUv;","const float PI = 3.141592653589793;","void main(){","vec2 position = -1.0 +  2.0 * vUv;","position *= vec2( zoom * resolution, zoom * 0.5 );","float x2y2 = position.x * position.x + position.y * position.y;","vec3 sphere_pnt = vec3( 2. * position, x2y2 - 1. ) / ( x2y2 + 1. );","sphere_pnt = vec3( transform * vec4( sphere_pnt, 1.0 ) );","vec2 sampleUV = vec2(","(atan(sphere_pnt.y, sphere_pnt.x) / PI + 1.0) * 0.5,","(asin(sphere_pnt.z) / PI + 0.5)",");","gl_FragColor = texture2D( tDiffuse, sampleUV );","gl_FragColor.a *= opacity;","}"].join("\n")};function A(t="image",n,i=1e4,r=.5){"image"===t&&b.call(this,n,this.createGeometry(i,r),this.createMaterial(i)),this.size=i,this.ratio=r,this.EPS=1e-6,this.frameId=null,this.dragging=!1,this.userMouse=new e["K"],this.quatA=new e["x"],this.quatB=new e["x"],this.quatCur=new e["x"],this.quatSlerp=new e["x"],this.vectorX=new e["L"](1,0,0),this.vectorY=new e["L"](0,1,0),this.addEventListener("window-resize",this.onWindowResize)}function C(t,e,n){A.call(this,"image",t,e,n)}function L(t){const n=5e3,i=new e["F"](n,60,40),r=new e["r"]({visible:!1});y.call(this,i,r),this.media=new d(t),this.radius=n,this.addEventListener("enter",this.start.bind(this)),this.addEventListener("leave",this.stop.bind(this)),this.addEventListener("panolens-container",this.onPanolensContainer.bind(this)),this.addEventListener("panolens-scene",this.onPanolensScene.bind(this))}function P(t,n){this.object=t,this.domElement=void 0!==n?n:document,this.frameId=null,this.enabled=!0,this.target=new e["L"],this.center=this.target,this.noZoom=!1,this.zoomSpeed=1,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.noRotate=!1,this.rotateSpeed=-.15,this.noPan=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.momentumDampingFactor=.9,this.momentumScalingFactor=-.005,this.momentumKeydownFactor=20,this.minFov=30,this.maxFov=120,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.noKeys=!1,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={ORBIT:e["n"].LEFT,ZOOM:e["n"].MIDDLE,PAN:e["n"].RIGHT};var i,r,o,a,s,l=this,c=1e-7,u=1e-4,h=new e["K"],d=new e["K"],p=new e["K"],f=new e["K"],m=new e["K"],v=new e["K"],g=new e["L"],y=new e["L"],b=new e["K"],x=new e["K"],w=new e["K"],_=0,M=0,E=0,S=0,T=1,A=new e["L"],C=new e["L"],L=new e["x"],P=0,O=0,R=!1,k={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_DOLLY:4,TOUCH_PAN:5},D=k.NONE;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom;var I=(new e["x"]).setFromUnitVectors(t.up,new e["L"](0,1,0)),N=I.clone().inverse(),z={type:"change"},B={type:"start"},F={type:"end"};function j(){return 2*Math.PI/60/60*l.autoRotateSpeed}function H(){return Math.pow(.95,l.zoomSpeed)}function U(t){if(R=!1,P=O=0,!1!==l.enabled){if(t.preventDefault(),t.button===l.mouseButtons.ORBIT){if(!0===l.noRotate)return;D=k.ROTATE,h.set(t.clientX,t.clientY)}else if(t.button===l.mouseButtons.ZOOM){if(!0===l.noZoom)return;D=k.DOLLY,b.set(t.clientX,t.clientY)}else if(t.button===l.mouseButtons.PAN){if(!0===l.noPan)return;D=k.PAN,f.set(t.clientX,t.clientY)}D!==k.NONE&&(document.addEventListener("mousemove",V,!1),document.addEventListener("mouseup",G,!1),l.dispatchEvent(B)),l.update()}}function V(t){if(!1!==l.enabled){t.preventDefault();var e=l.domElement===document?l.domElement.body:l.domElement;if(D===k.ROTATE){if(!0===l.noRotate)return;d.set(t.clientX,t.clientY),p.subVectors(d,h),l.rotateLeft(2*Math.PI*p.x/e.clientWidth*l.rotateSpeed),l.rotateUp(2*Math.PI*p.y/e.clientHeight*l.rotateSpeed),h.copy(d),i&&(P=t.clientX-i.clientX,O=t.clientY-i.clientY),i=t}else if(D===k.DOLLY){if(!0===l.noZoom)return;x.set(t.clientX,t.clientY),w.subVectors(x,b),w.y>0?l.dollyIn():w.y<0&&l.dollyOut(),b.copy(x)}else if(D===k.PAN){if(!0===l.noPan)return;m.set(t.clientX,t.clientY),v.subVectors(m,f),l.pan(v.x,v.y),f.copy(m)}D!==k.NONE&&l.update()}}function G(){R=!0,i=void 0,!1!==l.enabled&&(document.removeEventListener("mousemove",V,!1),document.removeEventListener("mouseup",G,!1),l.dispatchEvent(F),D=k.NONE)}function W(t){if(!1!==l.enabled&&!0!==l.noZoom&&D===k.NONE){t.preventDefault(),t.stopPropagation();var e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),e>0?(l.object.fov=l.object.fov<l.maxFov?l.object.fov+1:l.maxFov,l.object.updateProjectionMatrix()):e<0&&(l.object.fov=l.object.fov>l.minFov?l.object.fov-1:l.minFov,l.object.updateProjectionMatrix()),l.update(),l.dispatchEvent(z),l.dispatchEvent(B),l.dispatchEvent(F)}}function $(t){switch(t.keyCode){case l.keys.UP:r=!1;break;case l.keys.BOTTOM:o=!1;break;case l.keys.LEFT:a=!1;break;case l.keys.RIGHT:s=!1;break}}function q(t){if(!1!==l.enabled&&!0!==l.noKeys&&!0!==l.noRotate){switch(t.keyCode){case l.keys.UP:r=!0;break;case l.keys.BOTTOM:o=!0;break;case l.keys.LEFT:a=!0;break;case l.keys.RIGHT:s=!0;break}(r||o||a||s)&&(R=!0,r&&(O=-l.rotateSpeed*l.momentumKeydownFactor),o&&(O=l.rotateSpeed*l.momentumKeydownFactor),a&&(P=-l.rotateSpeed*l.momentumKeydownFactor),s&&(P=l.rotateSpeed*l.momentumKeydownFactor))}}function Y(t){if(R=!1,P=O=0,!1!==l.enabled){switch(t.touches.length){case 1:if(!0===l.noRotate)return;D=k.TOUCH_ROTATE,h.set(t.touches[0].pageX,t.touches[0].pageY);break;case 2:if(!0===l.noZoom)return;D=k.TOUCH_DOLLY;var e=t.touches[0].pageX-t.touches[1].pageX,n=t.touches[0].pageY-t.touches[1].pageY,i=Math.sqrt(e*e+n*n);b.set(0,i);break;case 3:if(!0===l.noPan)return;D=k.TOUCH_PAN,f.set(t.touches[0].pageX,t.touches[0].pageY);break;default:D=k.NONE}D!==k.NONE&&l.dispatchEvent(B)}}function X(t){if(!1!==l.enabled){t.preventDefault(),t.stopPropagation();var e=l.domElement===document?l.domElement.body:l.domElement;switch(t.touches.length){case 1:if(!0===l.noRotate)return;if(D!==k.TOUCH_ROTATE)return;d.set(t.touches[0].pageX,t.touches[0].pageY),p.subVectors(d,h),l.rotateLeft(2*Math.PI*p.x/e.clientWidth*l.rotateSpeed),l.rotateUp(2*Math.PI*p.y/e.clientHeight*l.rotateSpeed),h.copy(d),i&&(P=t.touches[0].pageX-i.pageX,O=t.touches[0].pageY-i.pageY),i={pageX:t.touches[0].pageX,pageY:t.touches[0].pageY},l.update();break;case 2:if(!0===l.noZoom)return;if(D!==k.TOUCH_DOLLY)return;var n=t.touches[0].pageX-t.touches[1].pageX,r=t.touches[0].pageY-t.touches[1].pageY,o=Math.sqrt(n*n+r*r);x.set(0,o),w.subVectors(x,b),w.y<0?(l.object.fov=l.object.fov<l.maxFov?l.object.fov+1:l.maxFov,l.object.updateProjectionMatrix()):w.y>0&&(l.object.fov=l.object.fov>l.minFov?l.object.fov-1:l.minFov,l.object.updateProjectionMatrix()),b.copy(x),l.update(),l.dispatchEvent(z);break;case 3:if(!0===l.noPan)return;if(D!==k.TOUCH_PAN)return;m.set(t.touches[0].pageX,t.touches[0].pageY),v.subVectors(m,f),l.pan(v.x,v.y),f.copy(m),l.update();break;default:D=k.NONE}}}function Z(){R=!0,i=void 0,!1!==l.enabled&&(l.dispatchEvent(F),D=k.NONE)}this.setLastQuaternion=function(t){L.copy(t),l.object.quaternion.copy(t)},this.getLastPosition=function(){return C},this.rotateLeft=function(t){void 0===t&&(t=j()),S-=t},this.rotateUp=function(t){void 0===t&&(t=j()),E-=t},this.panLeft=function(t){var e=this.object.matrix.elements;g.set(e[0],e[1],e[2]),g.multiplyScalar(-t),A.add(g)},this.panUp=function(t){var e=this.object.matrix.elements;g.set(e[4],e[5],e[6]),g.multiplyScalar(t),A.add(g)},this.pan=function(t,n){var i=l.domElement===document?l.domElement.body:l.domElement;if(l.object instanceof e["v"]){var r=l.object.position,o=r.clone().sub(l.target),a=o.length();a*=Math.tan(l.object.fov/2*Math.PI/180),l.panLeft(2*t*a/i.clientHeight),l.panUp(2*n*a/i.clientHeight)}else l.object instanceof e["u"]?(l.panLeft(t*(l.object.right-l.object.left)/i.clientWidth),l.panUp(n*(l.object.top-l.object.bottom)/i.clientHeight)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled.")},this.momentum=function(){R&&(Math.abs(P)<u&&Math.abs(O)<u?R=!1:(O*=this.momentumDampingFactor,P*=this.momentumDampingFactor,S-=this.momentumScalingFactor*P,E-=this.momentumScalingFactor*O))},this.dollyIn=function(t){void 0===t&&(t=H()),l.object instanceof e["v"]?T/=t:l.object instanceof e["u"]?(l.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom*t)),l.object.updateProjectionMatrix(),l.dispatchEvent(z)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.dollyOut=function(t){void 0===t&&(t=H()),l.object instanceof e["v"]?T*=t:l.object instanceof e["u"]?(l.object.zoom=Math.max(this.minZoom,Math.min(this.maxZoom,this.object.zoom/t)),l.object.updateProjectionMatrix(),l.dispatchEvent(z)):console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled.")},this.update=function(t){var e=this.object.position;y.copy(e).sub(this.target),y.applyQuaternion(I),_=Math.atan2(y.x,y.z),M=Math.atan2(Math.sqrt(y.x*y.x+y.z*y.z),y.y),this.autoRotate&&D===k.NONE&&this.rotateLeft(j()),this.momentum(),_+=S,M+=E,_=Math.max(this.minAzimuthAngle,Math.min(this.maxAzimuthAngle,_)),M=Math.max(this.minPolarAngle,Math.min(this.maxPolarAngle,M)),M=Math.max(c,Math.min(Math.PI-c,M));var n=y.length()*T;n=Math.max(this.minDistance,Math.min(this.maxDistance,n)),this.target.add(A),y.x=n*Math.sin(M)*Math.sin(_),y.y=n*Math.cos(M),y.z=n*Math.sin(M)*Math.cos(_),y.applyQuaternion(N),e.copy(this.target).add(y),this.object.lookAt(this.target),S=0,E=0,T=1,A.set(0,0,0),(C.distanceToSquared(this.object.position)>c||8*(1-L.dot(this.object.quaternion))>c)&&(!0!==t&&this.dispatchEvent(z),C.copy(this.object.position),L.copy(this.object.quaternion))},this.reset=function(){D=k.NONE,this.target.copy(this.target0),this.object.position.copy(this.position0),this.object.zoom=this.zoom0,this.object.updateProjectionMatrix(),this.dispatchEvent(z),this.update()},this.getPolarAngle=function(){return M},this.getAzimuthalAngle=function(){return _},this.dispose=function(){this.domElement.removeEventListener("mousedown",U),this.domElement.removeEventListener("mousewheel",W),this.domElement.removeEventListener("DOMMouseScroll",W),this.domElement.removeEventListener("touchstart",Y),this.domElement.removeEventListener("touchend",Z),this.domElement.removeEventListener("touchmove",X),window.removeEventListener("keyup",$),window.removeEventListener("keydown",q)},this.domElement.addEventListener("mousedown",U,{passive:!1}),this.domElement.addEventListener("mousewheel",W,{passive:!1}),this.domElement.addEventListener("DOMMouseScroll",W,{passive:!1}),this.domElement.addEventListener("touchstart",Y,{passive:!1}),this.domElement.addEventListener("touchend",Z,{passive:!1}),this.domElement.addEventListener("touchmove",X,{passive:!1}),window.addEventListener("keyup",$,{passive:!1}),window.addEventListener("keydown",q,{passive:!1}),this.update()}function O(t,n){var i=this,r={type:"change"},o=0,a=0,s=0,l=0;this.camera=t,this.camera.rotation.reorder("YXZ"),this.domElement=void 0!==n?n:document,this.enabled=!0,this.deviceOrientation={},this.screenOrientation=0,this.alpha=0,this.alphaOffsetAngle=0;var c=function(t){i.deviceOrientation=t},u=function(){i.screenOrientation=window.orientation||0},h=function(t){t.preventDefault(),t.stopPropagation(),s=t.touches[0].pageX,l=t.touches[0].pageY},d=function(t){t.preventDefault(),t.stopPropagation(),o+=e["o"].degToRad((t.touches[0].pageX-s)/4),a+=e["o"].degToRad((l-t.touches[0].pageY)/4),i.updateAlphaOffsetAngle(o),s=t.touches[0].pageX,l=t.touches[0].pageY},p=function(t,n,r,o,s){var l,c=new e["L"](0,0,1),u=new e["j"],h=new e["x"],d=new e["x"](-Math.sqrt(.5),0,0,Math.sqrt(.5)),p=new e["x"],f=new e["x"];0==i.screenOrientation?(l=new e["L"](1,0,0),p.setFromAxisAngle(l,-a)):180==i.screenOrientation?(l=new e["L"](1,0,0),p.setFromAxisAngle(l,a)):90==i.screenOrientation?(l=new e["L"](0,1,0),p.setFromAxisAngle(l,a)):-90==i.screenOrientation&&(l=new e["L"](0,1,0),p.setFromAxisAngle(l,-a)),d.multiply(p),d.multiply(f),u.set(r,n,-o,"YXZ"),t.setFromEuler(u),t.multiply(d),t.multiply(h.setFromAxisAngle(c,-s))};this.connect=function(){u(),window.addEventListener("orientationchange",u,{passive:!0}),window.addEventListener("deviceorientation",c,{passive:!0}),window.addEventListener("deviceorientation",this.update.bind(this),{passive:!0}),i.domElement.addEventListener("touchstart",h,{passive:!1}),i.domElement.addEventListener("touchmove",d,{passive:!1}),i.enabled=!0},this.disconnect=function(){window.removeEventListener("orientationchange",u,!1),window.removeEventListener("deviceorientation",c,!1),window.removeEventListener("deviceorientation",this.update.bind(this),!1),i.domElement.removeEventListener("touchstart",h,!1),i.domElement.removeEventListener("touchmove",d,!1),i.enabled=!1},this.update=function(t){if(!1!==i.enabled){var n=i.deviceOrientation.alpha?e["o"].degToRad(i.deviceOrientation.alpha)+i.alphaOffsetAngle:0,o=i.deviceOrientation.beta?e["o"].degToRad(i.deviceOrientation.beta):0,a=i.deviceOrientation.gamma?e["o"].degToRad(i.deviceOrientation.gamma):0,s=i.screenOrientation?e["o"].degToRad(i.screenOrientation):0;p(i.camera.quaternion,n,o,a,s),i.alpha=n,!0!==t&&i.dispatchEvent(r)}},this.updateAlphaOffsetAngle=function(t){this.alphaOffsetAngle=t,this.update()},this.dispose=function(){this.disconnect()},this.connect()}function R(t){var n=new e["u"](-1,1,1,-1,0,1),i=new e["C"],r=new e["I"];r.aspect=.5;var o={minFilter:e["m"],magFilter:e["s"],format:e["z"]},a=new e["N"](512,512,o);a.scissorTest=!0,a.texture.generateMipmaps=!1;var s=new e["K"](.441,.156),l=new e["w"](1,1,10,20).removeAttribute("normal").toNonIndexed(),c=l.attributes.position.array,u=l.attributes.uv.array;l.attributes.position.count*=2,l.attributes.uv.count*=2;var h=new Float32Array(2*c.length);h.set(c),h.set(c,c.length);var d=new Float32Array(2*u.length);d.set(u),d.set(u,u.length);for(var p=new e["K"],f=c.length/3,m=0,v=h.length/3;m<v;m++){p.x=h[3*m+0],p.y=h[3*m+1];var g=p.dot(p),y=1.5+(s.x+s.y*g)*g,b=m<f?0:1;h[3*m+0]=p.x/y*1.5-.5+b,h[3*m+1]=p.y/y*3,d[2*m]=.5*(d[2*m]+b)}l.attributes.position.array=h,l.attributes.uv.array=d;var x=new e["r"]({map:a.texture}),w=new e["q"](l,x);i.add(w),this.setSize=function(e,n){t.setSize(e,n);var i=t.getPixelRatio();a.setSize(e*i,n*i)},this.render=function(e,o){e.updateMatrixWorld(),null===o.parent&&o.updateMatrixWorld(),r.update(o);var s=a.width/2,l=a.height;t.autoClear&&t.clear(),a.scissor.set(0,0,s,l),a.viewport.set(0,0,s,l),t.setRenderTarget(a),t.render(e,r.cameraL),t.clearDepth(),a.scissor.set(s,0,s,l),a.viewport.set(s,0,s,l),t.setRenderTarget(a),t.render(e,r.cameraR),t.clearDepth(),t.setRenderTarget(null),t.render(i,n)}}A.prototype=Object.assign(Object.create(b.prototype),{constructor:A,add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}t instanceof v&&(t.material.depthTest=!1),b.prototype.add.call(this,t)},createGeometry:function(t,n){return new e["w"](t,t*n)},createMaterial:function(t){const n=Object.assign({},T),i=n.uniforms;return i.zoom.value=t,i.opacity.value=0,new e["E"]({uniforms:i,vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:e["a"],transparent:!0})},registerMouseEvents:function(){this.container.addEventListener("mousedown",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("mousemove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("mouseup",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("touchstart",this.onMouseDown.bind(this),{passive:!0}),this.container.addEventListener("touchmove",this.onMouseMove.bind(this),{passive:!0}),this.container.addEventListener("touchend",this.onMouseUp.bind(this),{passive:!0}),this.container.addEventListener("mousewheel",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),{passive:!1}),this.container.addEventListener("contextmenu",this.onContextMenu.bind(this),{passive:!0})},unregisterMouseEvents:function(){this.container.removeEventListener("mousedown",this.onMouseDown.bind(this),!1),this.container.removeEventListener("mousemove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("mouseup",this.onMouseUp.bind(this),!1),this.container.removeEventListener("touchstart",this.onMouseDown.bind(this),!1),this.container.removeEventListener("touchmove",this.onMouseMove.bind(this),!1),this.container.removeEventListener("touchend",this.onMouseUp.bind(this),!1),this.container.removeEventListener("mousewheel",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("DOMMouseScroll",this.onMouseWheel.bind(this),!1),this.container.removeEventListener("contextmenu",this.onContextMenu.bind(this),!1)},onMouseDown:function(t){const e=t.touches&&t.touches.length||1;switch(e){case 1:const n=t.clientX>=0?t.clientX:t.touches[0].clientX,i=t.clientY>=0?t.clientY:t.touches[0].clientY;this.dragging=!0,this.userMouse.set(n,i);break;case 2:const r=t.touches[0].pageX-t.touches[1].pageX,o=t.touches[0].pageY-t.touches[1].pageY,a=Math.sqrt(r*r+o*o);this.userMouse.pinchDistance=a;break;default:break}this.onUpdateCallback()},onMouseMove:function(t){const n=t.touches&&t.touches.length||1;switch(n){case 1:const i=t.clientX>=0?t.clientX:t.touches[0].clientX,r=t.clientY>=0?t.clientY:t.touches[0].clientY,o=.4*e["o"].degToRad(i-this.userMouse.x),a=.4*e["o"].degToRad(r-this.userMouse.y);this.dragging&&(this.quatA.setFromAxisAngle(this.vectorY,o),this.quatB.setFromAxisAngle(this.vectorX,a),this.quatCur.multiply(this.quatA).multiply(this.quatB),this.userMouse.set(i,r));break;case 2:const s=t.touches[0].pageX-t.touches[1].pageX,l=t.touches[0].pageY-t.touches[1].pageY,c=Math.sqrt(s*s+l*l);this.addZoomDelta(this.userMouse.pinchDistance-c);break;default:break}},onMouseUp:function(){this.dragging=!1},onMouseWheel:function(t){t.preventDefault(),t.stopPropagation();let e=0;void 0!==t.wheelDelta?e=t.wheelDelta:void 0!==t.detail&&(e=-t.detail),this.addZoomDelta(e),this.onUpdateCallback()},addZoomDelta:function(t){const e=this.material.uniforms,n=.1*this.size,i=10*this.size;e.zoom.value+=t,e.zoom.value<=n?e.zoom.value=n:e.zoom.value>=i&&(e.zoom.value=i)},onUpdateCallback:function(){this.frameId=window.requestAnimationFrame(this.onUpdateCallback.bind(this)),this.quatSlerp.slerp(this.quatCur,.1),this.material&&this.material.uniforms.transform.value.makeRotationFromQuaternion(this.quatSlerp),!this.dragging&&1-this.quatSlerp.clone().dot(this.quatCur)<this.EPS&&window.cancelAnimationFrame(this.frameId)},reset:function(){this.quatCur.set(0,0,0,1),this.quatSlerp.set(0,0,0,1),this.onUpdateCallback()},onLoad:function(t){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight,this.registerMouseEvents(),this.onUpdateCallback(),this.dispatchEvent({type:"panolens-viewer-handler",method:"disableControl"}),b.prototype.onLoad.call(this,t)},onLeave:function(){this.unregisterMouseEvents(),this.dispatchEvent({type:"panolens-viewer-handler",method:"enableControl",data:a.ORBIT}),window.cancelAnimationFrame(this.frameId),b.prototype.onLeave.call(this)},onWindowResize:function(){this.material.uniforms.resolution.value=this.container.clientWidth/this.container.clientHeight},onContextMenu:function(){this.dragging=!1},dispose:function(){this.unregisterMouseEvents(),b.prototype.dispose.call(this)}}),C.prototype=Object.assign(Object.create(A.prototype),{constructor:C,onLoad:function(t){this.updateTexture(t),A.prototype.onLoad.call(this,t)},updateTexture:function(t){t.minFilter=t.magFilter=e["m"],this.material.uniforms["tDiffuse"].value=t},dispose:function(){const t=this.material.uniforms["tDiffuse"];t&&t.value&&t.value.dispose(),A.prototype.dispose.call(this)}}),L.prototype=Object.assign(Object.create(y.prototype),{constructor:L,onPanolensContainer:function({container:t}){this.media.setContainer(t)},onPanolensScene:function({scene:t}){this.media.setScene(t)},start:function(){return this.media.start()},stop:function(){this.media.stop()}}),P.prototype=Object.assign(Object.create(e["k"].prototype),{constructor:P}),O.prototype=Object.assign(Object.create(e["k"].prototype),{constructor:O});const k=function(t){var n=new e["I"];n.aspect=.5;var i=new e["K"];this.setEyeSeparation=function(t){n.eyeSep=t},this.setSize=function(e,n){t.setSize(e,n)},this.render=function(e,r){e.updateMatrixWorld(),null===r.parent&&r.updateMatrixWorld(),n.update(r),t.getSize(i),t.autoClear&&t.clear(),t.setScissorTest(!0),t.setScissor(0,0,i.width/2,i.height),t.setViewport(0,0,i.width/2,i.height),t.render(e,n.cameraL),t.setScissor(i.width/2,0,i.width/2,i.height),t.setViewport(i.width/2,0,i.width/2,i.height),t.render(e,n.cameraR),t.setScissorTest(!1)}};function D(t){let n;t=t||{},t.controlBar=void 0===t.controlBar||t.controlBar,t.controlButtons=t.controlButtons||["fullscreen","setting","video"],t.autoHideControlBar=void 0!==t.autoHideControlBar&&t.autoHideControlBar,t.autoHideInfospot=void 0===t.autoHideInfospot||t.autoHideInfospot,t.horizontalView=void 0!==t.horizontalView&&t.horizontalView,t.clickTolerance=t.clickTolerance||10,t.cameraFov=t.cameraFov||60,t.reverseDragging=t.reverseDragging||!1,t.enableReticle=t.enableReticle||!1,t.dwellTime=t.dwellTime||1500,t.autoReticleSelect=void 0===t.autoReticleSelect||t.autoReticleSelect,t.viewIndicator=void 0!==t.viewIndicator&&t.viewIndicator,t.indicatorSize=t.indicatorSize||30,t.output=t.output?t.output:"none",t.autoRotate=t.autoRotate||!1,t.autoRotateSpeed=t.autoRotateSpeed||2,t.autoRotateActivationDuration=t.autoRotateActivationDuration||5e3,this.options=t,t.container?(n=t.container,n._width=n.clientWidth,n._height=n.clientHeight):(n=document.createElement("div"),n.classList.add("panolens-container"),n.style.width="100%",n.style.height="100%",n._width=window.innerWidth,n._height=window.innerHeight,document.body.appendChild(n)),this.container=n,this.camera=t.camera||new e["v"](this.options.cameraFov,this.container.clientWidth/this.container.clientHeight,1,1e4),this.scene=t.scene||new e["C"],this.renderer=t.renderer||new e["O"]({alpha:!0,antialias:!1}),this.sceneReticle=new e["C"],this.viewIndicatorSize=this.options.indicatorSize,this.reticle={},this.tempEnableReticle=this.options.enableReticle,this.mode=s.NORMAL,this.panorama=null,this.widget=null,this.hoverObject=null,this.infospot=null,this.pressEntityObject=null,this.pressObject=null,this.raycaster=new e["B"],this.raycasterPoint=new e["K"],this.userMouse=new e["K"],this.updateCallbacks=[],this.requestAnimationId=null,this.cameraFrustum=new e["l"],this.cameraViewProjectionMatrix=new e["p"],this.autoRotateRequestId=null,this.outputDivElement=null,this.touchSupported="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,this.HANDLER_MOUSE_DOWN=this.onMouseDown.bind(this),this.HANDLER_MOUSE_UP=this.onMouseUp.bind(this),this.HANDLER_MOUSE_MOVE=this.onMouseMove.bind(this),this.HANDLER_WINDOW_RESIZE=this.onWindowResize.bind(this),this.HANDLER_KEY_DOWN=this.onKeyDown.bind(this),this.HANDLER_KEY_UP=this.onKeyUp.bind(this),this.HANDLER_TAP=this.onTap.bind(this,{clientX:this.container.clientWidth/2,clientY:this.container.clientHeight/2}),this.OUTPUT_INFOSPOT=!1,this.tweenLeftAnimation=new m.Tween,this.tweenUpAnimation=new m.Tween,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.renderer.setClearColor(0,0),this.renderer.autoClear=!1,this.renderer.domElement.classList.add("panolens-canvas"),this.renderer.domElement.style.display="block",this.container.style.backgroundColor="#000",this.container.appendChild(this.renderer.domElement),this.OrbitControls=new P(this.camera,this.container),this.OrbitControls.id="orbit",this.OrbitControls.minDistance=1,this.OrbitControls.noPan=!0,this.OrbitControls.autoRotate=this.options.autoRotate,this.OrbitControls.autoRotateSpeed=this.options.autoRotateSpeed,this.DeviceOrientationControls=new O(this.camera,this.container),this.DeviceOrientationControls.id="device-orientation",this.DeviceOrientationControls.enabled=!1,this.camera.position.z=1,this.options.passiveRendering&&console.warn("passiveRendering is now deprecated"),this.controls=[this.OrbitControls,this.DeviceOrientationControls],this.control=this.OrbitControls,this.CardboardEffect=new R(this.renderer),this.CardboardEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.StereoEffect=new k(this.renderer),this.StereoEffect.setSize(this.container.clientWidth,this.container.clientHeight),this.effect=this.CardboardEffect,this.addReticle(),this.options.horizontalView&&(this.OrbitControls.minPolarAngle=Math.PI/2,this.OrbitControls.maxPolarAngle=Math.PI/2),!1!==this.options.controlBar&&this.addDefaultControlBar(this.options.controlButtons),this.options.viewIndicator&&this.addViewIndicator(),this.options.reverseDragging&&this.reverseDraggingDirection(),this.options.enableReticle?this.enableReticleControl():this.registerMouseAndTouchEvents(),"overlay"===this.options.output&&this.addOutputElement(),this.registerEventListeners(),this.animate.call(this)}D.prototype=Object.assign(Object.create(e["k"].prototype),{constructor:D,add:function(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}this.scene.add(t),t.addEventListener&&t.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),t instanceof y&&t.dispatchEvent&&t.dispatchEvent({type:"panolens-container",container:this.container}),t instanceof L&&t.dispatchEvent({type:"panolens-scene",scene:this.scene}),"panorama"===t.type&&(this.addPanoramaEventListener(t),this.panorama||this.setPanorama(t))},remove:function(t){t.removeEventListener&&t.removeEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),this.scene.remove(t)},addDefaultControlBar:function(t){if(this.widget)return void console.warn("Default control bar exists");const e=new g(this.container);e.addEventListener("panolens-viewer-handler",this.eventHandler.bind(this)),e.addControlBar(),t.forEach(t=>{e.addControlButton(t)}),this.widget=e},setPanorama:function(t){const e=this.panorama;if("panorama"===t.type&&e!==t){this.hideInfospot();const n=function(){e&&e.onLeave(),t.removeEventListener("enter-fade-start",n)};t.addEventListener("enter-fade-start",n),(this.panorama=t).onEnter()}},eventHandler:function(t){t.method&&this[t.method]&&this[t.method](t.data)},dispatchEventToChildren:function(t){this.scene.traverse(function(e){e.dispatchEvent&&e.dispatchEvent(t)})},activateWidgetItem:function(t,e){const n=this.widget.mainMenu,i=n.children[0],r=n.children[1];let o;if(void 0!==t){switch(t){case 0:o=i.subMenu.children[1];break;case 1:o=i.subMenu.children[2];break;default:o=i.subMenu.children[1];break}i.subMenu.setActiveItem(o),i.setSelectionTitle(o.textContent)}if(void 0!==e){switch(e){case s.CARDBOARD:o=r.subMenu.children[2];break;case s.STEREO:o=r.subMenu.children[3];break;default:o=r.subMenu.children[1];break}r.subMenu.setActiveItem(o),r.setSelectionTitle(o.textContent)}},enableEffect:function(t){if(this.mode===t)return;if(t===s.NORMAL)return void this.disableEffect();this.mode=t;const e=this.camera.fov;switch(t){case s.CARDBOARD:this.effect=this.CardboardEffect,this.enableReticleControl();break;case s.STEREO:this.effect=this.StereoEffect,this.enableReticleControl();break;default:this.effect=null,this.disableReticleControl();break}this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.camera.fov=e+.01,this.effect.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.camera.fov=e,this.dispatchEvent({type:"mode-change",mode:this.mode})},disableEffect:function(){this.mode!==s.NORMAL&&(this.mode=s.NORMAL,this.disableReticleControl(),this.activateWidgetItem(void 0,this.mode),this.dispatchEventToChildren({type:"panolens-dual-eye-effect",mode:this.mode}),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.render(),this.dispatchEvent({type:"mode-change",mode:this.mode}))},enableReticleControl:function(){this.reticle.visible||(this.tempEnableReticle=!0,this.unregisterMouseAndTouchEvents(),this.reticle.show(),this.registerReticleEvent(),this.updateReticleEvent())},disableReticleControl:function(){this.tempEnableReticle=!1,this.options.enableReticle?this.updateReticleEvent():(this.reticle.hide(),this.unregisterReticleEvent(),this.registerMouseAndTouchEvents())},enableAutoRate:function(){this.options.autoRotate=!0,this.OrbitControls.autoRotate=!0},disableAutoRate:function(){clearTimeout(this.autoRotateRequestId),this.options.autoRotate=!1,this.OrbitControls.autoRotate=!1},toggleVideoPlay:function(t){this.panorama instanceof M&&this.panorama.dispatchEvent({type:"video-toggle",pause:t})},setVideoCurrentTime:function(t){this.panorama instanceof M&&this.panorama.dispatchEvent({type:"video-time",percentage:t})},onVideoUpdate:function(t){const{widget:e}=this;e&&e.dispatchEvent({type:"video-update",percentage:t})},addUpdateCallback:function(t){t&&this.updateCallbacks.push(t)},removeUpdateCallback:function(t){const e=this.updateCallbacks.indexOf(t);t&&e>=0&&this.updateCallbacks.splice(e,1)},showVideoWidget:function(){const{widget:t}=this;t&&t.dispatchEvent({type:"video-control-show"})},hideVideoWidget:function(){const{widget:t}=this;t&&t.dispatchEvent({type:"video-control-hide"})},updateVideoPlayButton:function(t){const{widget:e}=this;e&&e.videoElement&&e.videoElement.controlButton&&e.videoElement.controlButton.update(t)},addPanoramaEventListener:function(t){t.addEventListener("enter-fade-start",this.setCameraControl.bind(this)),t instanceof M&&(t.addEventListener("enter-fade-start",this.showVideoWidget.bind(this)),t.addEventListener("leave",function(){this.panorama instanceof M||this.hideVideoWidget.call(this)}.bind(this)))},setCameraControl:function(){this.OrbitControls.target.copy(this.panorama.position)},getControl:function(){return this.control},getScene:function(){return this.scene},getCamera:function(){return this.camera},getRenderer:function(){return this.renderer},getContainer:function(){return this.container},getControlId:function(){return this.control.id},getNextControlId:function(){return this.controls[this.getNextControlIndex()].id},getNextControlIndex:function(){const t=this.controls,e=this.control,n=t.indexOf(e)+1;return n>=t.length?0:n},setCameraFov:function(t){this.camera.fov=t,this.camera.updateProjectionMatrix()},enableControl:function(t){switch(t=t>=0&&t<this.controls.length?t:0,this.control.enabled=!1,this.control=this.controls[t],this.control.enabled=!0,t){case a.ORBIT:this.camera.position.copy(this.panorama.position),this.camera.position.z+=1;break;case a.DEVICEORIENTATION:this.camera.position.copy(this.panorama.position);break;default:break}this.control.update(),this.activateWidgetItem(t,void 0)},disableControl:function(){this.control.enabled=!1},toggleNextControl:function(){this.enableControl(this.getNextControlIndex())},getScreenVector:function(t){const e=t.clone(),n=this.container.clientWidth/2,i=this.container.clientHeight/2;return e.project(this.camera),e.x=e.x*n+n,e.y=-e.y*i+i,e.z=0,e},checkSpriteInViewport:function(t){return this.camera.matrixWorldInverse.getInverse(this.camera.matrixWorld),this.cameraViewProjectionMatrix.multiplyMatrices(this.camera.projectionMatrix,this.camera.matrixWorldInverse),this.cameraFrustum.setFromMatrix(this.cameraViewProjectionMatrix),t.visible&&this.cameraFrustum.intersectsSprite(t)},reverseDraggingDirection:function(){this.OrbitControls.rotateSpeed*=-1,this.OrbitControls.momentumScalingFactor*=-1},addReticle:function(){this.reticle=new p(16777215,!0,this.options.dwellTime),this.reticle.hide(),this.camera.add(this.reticle),this.sceneReticle.add(this.camera)},tweenControlCenter:function(t,n,i){if(this.control!==this.OrbitControls)return;let r,o,a,s,l,c,u,h,d,p;t instanceof Array&&(n=t[1],i=t[2],t=t[0]),n=void 0!==n?n:1e3,i=i||m.Easing.Exponential.Out,r=this,s=this.camera.getWorldDirection(new e["L"]),l=s.clone(),h=this.panorama.getWorldPosition(new e["L"]).sub(this.camera.getWorldPosition(new e["L"])),c=t.clone(),c.x*=-1,c.add(h).normalize(),u=c.clone(),s.y=0,c.y=0,o=Math.atan2(c.z,c.x)-Math.atan2(s.z,s.x),o=o>Math.PI?o-2*Math.PI:o,o=o<-Math.PI?o+2*Math.PI:o,a=Math.abs(l.angleTo(s)+(l.y*u.y<=0?u.angleTo(c):-u.angleTo(c))),a*=u.y<l.y?1:-1,d={left:0,up:0},p={left:0,up:0},this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.tweenLeftAnimation=new m.Tween(d).to({left:o},n).easing(i).onUpdate(function(t){r.control.rotateLeft(t.left-p.left),p.left=t.left}).start(),this.tweenUpAnimation=new m.Tween(d).to({up:a},n).easing(i).onUpdate(function(t){r.control.rotateUp(t.up-p.up),p.up=t.up}).start()},tweenControlCenterByObject:function(t,n,i){let r=!1;if(t.traverseAncestors(function(t){t.scalePlaceHolder&&(r=!0)}),r){const r=new e["L"](-1,1,1);this.tweenControlCenter(t.getWorldPosition(new e["L"]).multiply(r),n,i)}else this.tweenControlCenter(t.getWorldPosition(new e["L"]),n,i)},onWindowResize:function(t,e){let n,i;const r=this.container.classList.contains("panolens-container")||this.container.isFullscreen;if(void 0!==t&&void 0!==e)n=t,i=e,this.container._width=t,this.container._height=e;else{const t=/(android)/i.test(window.navigator.userAgent),e=t?Math.min(document.documentElement.clientWidth,window.innerWidth||0):Math.max(document.documentElement.clientWidth,window.innerWidth||0),o=t?Math.min(document.documentElement.clientHeight,window.innerHeight||0):Math.max(document.documentElement.clientHeight,window.innerHeight||0);n=r?e:this.container.clientWidth,i=r?o:this.container.clientHeight,this.container._width=n,this.container._height=i}this.camera.aspect=n/i,this.camera.updateProjectionMatrix(),this.renderer.setSize(n,i),(this.options.enableReticle||this.tempEnableReticle)&&this.updateReticleEvent(),this.dispatchEvent({type:"window-resize",width:n,height:i}),this.scene.traverse(function(t){t.dispatchEvent&&t.dispatchEvent({type:"window-resize",width:n,height:i})})},addOutputElement:function(){const t=document.createElement("div");t.style.position="absolute",t.style.right="10px",t.style.top="10px",t.style.color="#fff",this.container.appendChild(t),this.outputDivElement=t},outputPosition:function(){const t=this.raycaster.intersectObject(this.panorama,!0);if(t.length>0){const n=t[0].point.clone(),i=new e["L"](-1,1,1),r=this.panorama.getWorldPosition(new e["L"]);n.sub(r).multiply(i);const o={x:n.x.toFixed(2),y:n.y.toFixed(2),z:n.z.toFixed(2)},a=`${o.x}, ${o.y}, ${o.z}`;if(0===n.length())return;switch(this.options.output){case"event":this.dispatchEvent({type:"position-output",position:o});break;case"console":console.info(a);break;case"overlay":this.outputDivElement.textContent=a;break;default:break}}},onMouseDown:function(t){t.preventDefault(),this.userMouse.x=t.clientX>=0?t.clientX:t.touches[0].clientX,this.userMouse.y=t.clientY>=0?t.clientY:t.touches[0].clientY,this.userMouse.type="mousedown",this.onTap(t)},onMouseMove:function(t){t.preventDefault(),this.userMouse.type="mousemove",this.onTap(t)},onMouseUp:function(t){let e=!1;this.userMouse.type="mouseup";const n=this.userMouse.x>=t.clientX-this.options.clickTolerance&&this.userMouse.x<=t.clientX+this.options.clickTolerance&&this.userMouse.y>=t.clientY-this.options.clickTolerance&&this.userMouse.y<=t.clientY+this.options.clickTolerance||t.changedTouches&&this.userMouse.x>=t.changedTouches[0].clientX-this.options.clickTolerance&&this.userMouse.x<=t.changedTouches[0].clientX+this.options.clickTolerance&&this.userMouse.y>=t.changedTouches[0].clientY-this.options.clickTolerance&&this.userMouse.y<=t.changedTouches[0].clientY+this.options.clickTolerance?"click":void 0;if((!t||!t.target||t.target.classList.contains("panolens-canvas"))&&(t.preventDefault(),e=t.changedTouches&&1===t.changedTouches.length?this.onTap({clientX:t.changedTouches[0].clientX,clientY:t.changedTouches[0].clientY},n):this.onTap(t,n),this.userMouse.type="none",!e&&"click"===n)){const{options:{autoHideInfospot:t,autoHideControlBar:e},panorama:n,toggleControlBar:i}=this;t&&n&&n.toggleInfospotVisibility(),e&&i()}},onTap:function(t,e){const{left:n,top:i}=this.container.getBoundingClientRect(),{clientWidth:r,clientHeight:o}=this.container;if(this.raycasterPoint.x=(t.clientX-n)/r*2-1,this.raycasterPoint.y=-(t.clientY-i)/o*2+1,this.raycaster.setFromCamera(this.raycasterPoint,this.camera),!this.panorama)return;("mousedown"!==t.type&&this.touchSupported||this.OUTPUT_INFOSPOT)&&this.outputPosition();const a=this.raycaster.intersectObjects(this.panorama.children,!0),s=this.getConvertedIntersect(a),l=a.length>0?a[0].object:void 0;if("mouseup"===this.userMouse.type&&(s&&this.pressEntityObject===s&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),"mouseup"===this.userMouse.type&&(l&&this.pressObject===l&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0),"click"===e?(this.panorama.dispatchEvent({type:"click",intersects:a,mouseEvent:t}),s&&s.dispatchEvent&&s.dispatchEvent({type:"click-entity",mouseEvent:t}),l&&l.dispatchEvent&&l.dispatchEvent({type:"click",mouseEvent:t})):(this.panorama.dispatchEvent({type:"hover",intersects:a,mouseEvent:t}),(this.hoverObject&&a.length>0&&this.hoverObject!==s||this.hoverObject&&0===a.length)&&(this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverleave",mouseEvent:t}),this.reticle.end()),this.hoverObject=void 0),s&&a.length>0&&(this.hoverObject!==s&&(this.hoverObject=s,this.hoverObject.dispatchEvent&&(this.hoverObject.dispatchEvent({type:"hoverenter",mouseEvent:t}),(this.options.autoReticleSelect&&this.options.enableReticle||this.tempEnableReticle)&&this.reticle.start(this.onTap.bind(this,t,"click")))),"mousedown"===this.userMouse.type&&this.pressEntityObject!=s&&(this.pressEntityObject=s,this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressstart-entity",mouseEvent:t})),"mousedown"===this.userMouse.type&&this.pressObject!=l&&(this.pressObject=l,this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressstart",mouseEvent:t})),("mousemove"===this.userMouse.type||this.options.enableReticle)&&(l&&l.dispatchEvent&&l.dispatchEvent({type:"hover",mouseEvent:t}),this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&this.pressEntityObject.dispatchEvent({type:"pressmove-entity",mouseEvent:t}),this.pressObject&&this.pressObject.dispatchEvent&&this.pressObject.dispatchEvent({type:"pressmove",mouseEvent:t}))),!s&&this.pressEntityObject&&this.pressEntityObject.dispatchEvent&&(this.pressEntityObject.dispatchEvent({type:"pressstop-entity",mouseEvent:t}),this.pressEntityObject=void 0),!l&&this.pressObject&&this.pressObject.dispatchEvent&&(this.pressObject.dispatchEvent({type:"pressstop",mouseEvent:t}),this.pressObject=void 0)),l&&l instanceof v){if(this.infospot=l,"click"===e)return!0}else this.infospot&&this.hideInfospot();this.options.autoRotate&&"mousemove"!==this.userMouse.type&&(clearTimeout(this.autoRotateRequestId),this.control===this.OrbitControls&&(this.OrbitControls.autoRotate=!1,this.autoRotateRequestId=window.setTimeout(this.enableAutoRate.bind(this),this.options.autoRotateActivationDuration)))},getConvertedIntersect:function(t){let e;for(let n=0;n<t.length;n++)if(t[n].distance>=0&&t[n].object&&!t[n].object.passThrough){if(t[n].object.entity&&t[n].object.entity.passThrough)continue;if(t[n].object.entity&&!t[n].object.entity.passThrough){e=t[n].object.entity;break}e=t[n].object;break}return e},hideInfospot:function(){this.infospot&&(this.infospot.onHoverEnd(),this.infospot=void 0)},toggleControlBar:function(){const{widget:t}=this;t&&t.dispatchEvent({type:"control-bar-toggle"})},onKeyDown:function(t){this.options.output&&"none"!==this.options.output&&"Control"===t.key&&(this.OUTPUT_INFOSPOT=!0)},onKeyUp:function(){this.OUTPUT_INFOSPOT=!1},update:function(){m.update(),this.updateCallbacks.forEach(function(t){t()}),this.control.update(),this.scene.traverse(function(t){if(t instanceof v&&t.element&&(this.hoverObject===t||"none"!==t.element.style.display||t.element.left&&"none"!==t.element.left.style.display||t.element.right&&"none"!==t.element.right.style.display))if(this.checkSpriteInViewport(t)){const{x:n,y:i}=this.getScreenVector(t.getWorldPosition(new e["L"]));t.translateElement(n,i)}else t.onDismiss()}.bind(this))},render:function(){this.mode===s.CARDBOARD||this.mode===s.STEREO?(this.renderer.clear(),this.effect.render(this.scene,this.camera),this.effect.render(this.sceneReticle,this.camera)):(this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.renderer.clearDepth(),this.renderer.render(this.sceneReticle,this.camera))},animate:function(){this.requestAnimationId=window.requestAnimationFrame(this.animate.bind(this)),this.onChange()},onChange:function(){this.update(),this.render()},registerMouseAndTouchEvents:function(){const t={passive:!1};this.container.addEventListener("mousedown",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("mousemove",this.HANDLER_MOUSE_MOVE,t),this.container.addEventListener("mouseup",this.HANDLER_MOUSE_UP,t),this.container.addEventListener("touchstart",this.HANDLER_MOUSE_DOWN,t),this.container.addEventListener("touchend",this.HANDLER_MOUSE_UP,t)},unregisterMouseAndTouchEvents:function(){this.container.removeEventListener("mousedown",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("mousemove",this.HANDLER_MOUSE_MOVE,!1),this.container.removeEventListener("mouseup",this.HANDLER_MOUSE_UP,!1),this.container.removeEventListener("touchstart",this.HANDLER_MOUSE_DOWN,!1),this.container.removeEventListener("touchend",this.HANDLER_MOUSE_UP,!1)},registerReticleEvent:function(){this.addUpdateCallback(this.HANDLER_TAP)},unregisterReticleEvent:function(){this.removeUpdateCallback(this.HANDLER_TAP)},updateReticleEvent:function(){const t=this.container.clientWidth/2+this.container.offsetLeft,e=this.container.clientHeight/2;this.removeUpdateCallback(this.HANDLER_TAP),this.HANDLER_TAP=this.onTap.bind(this,{clientX:t,clientY:e}),this.addUpdateCallback(this.HANDLER_TAP)},registerEventListeners:function(){window.addEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.addEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.addEventListener("keyup",this.HANDLER_KEY_UP,!0)},unregisterEventListeners:function(){window.removeEventListener("resize",this.HANDLER_WINDOW_RESIZE,!0),window.removeEventListener("keydown",this.HANDLER_KEY_DOWN,!0),window.removeEventListener("keyup",this.HANDLER_KEY_UP,!0)},dispose:function(){function t(e){for(let n=e.children.length-1;n>=0;n--)t(e.children[n]),e.remove(e.children[n]);e instanceof y||e instanceof v?(e.dispose(),e=null):e.dispatchEvent&&e.dispatchEvent("dispose")}this.tweenLeftAnimation.stop(),this.tweenUpAnimation.stop(),this.unregisterEventListeners(),t(this.scene),this.widget&&(this.widget.dispose(),this.widget=null),e["e"]&&e["e"].enabled&&e["e"].clear()},destroy:function(){this.dispose(),this.render(),window.cancelAnimationFrame(this.requestAnimationId)},onPanoramaDispose:function(t){t instanceof M&&this.hideVideoWidget(),t===this.panorama&&(this.panorama=null)},loadAsyncRequest:function(t,e=(()=>{})){const n=new window.XMLHttpRequest;n.onloadend=function(t){e(t)},n.open("GET",t,!0),n.send(null)},addViewIndicator:function(){const t=this;function n(n){if(0===n.loaded)return;const i=n.target.responseXML.documentElement;i.style.width=t.viewIndicatorSize+"px",i.style.height=t.viewIndicatorSize+"px",i.style.position="absolute",i.style.top="10px",i.style.left="10px",i.style.opacity="0.5",i.style.cursor="pointer",i.id="panolens-view-indicator-container",t.container.appendChild(i);const r=i.querySelector("#indicator"),o=function(){t.radius=.225*t.viewIndicatorSize,t.currentPanoAngle=t.camera.rotation.y-e["o"].degToRad(90),t.fovAngle=e["o"].degToRad(t.camera.fov),t.leftAngle=-t.currentPanoAngle-t.fovAngle/2,t.rightAngle=-t.currentPanoAngle+t.fovAngle/2,t.leftX=t.radius*Math.cos(t.leftAngle),t.leftY=t.radius*Math.sin(t.leftAngle),t.rightX=t.radius*Math.cos(t.rightAngle),t.rightY=t.radius*Math.sin(t.rightAngle),t.indicatorD="M "+t.leftX+" "+t.leftY+" A "+t.radius+" "+t.radius+" 0 0 1 "+t.rightX+" "+t.rightY,t.leftX&&t.leftY&&t.rightX&&t.rightY&&t.radius&&r.setAttribute("d",t.indicatorD)};t.addUpdateCallback(o);const a=function(){this.style.opacity="1"},s=function(){this.style.opacity="0.5"};i.addEventListener("mouseenter",a),i.addEventListener("mouseleave",s)}this.loadAsyncRequest(l.ViewIndicator,n)},appendControlItem:function(t){const e=this.widget.createCustomItem(t);return"video"===t.group?this.widget.videoElement.appendChild(e):this.widget.barElement.appendChild(e),e},clearAllCache:function(){e["e"].clear()}}),e["y"]!=o&&console.warn(`three.js version is not matched. Please consider use the target revision ${o}`),window.TWEEN=m}).call(this,n("f28c"))},f605:function(t,e){t.exports=function(t,e,n,i){if(!(t instanceof e)||void 0!==i&&i in t)throw TypeError(n+": incorrect invocation!");return t}},f6b4:function(t,e,n){"use strict";var i=n("c532");function r(){this.handlers=[]}r.prototype.use=function(t,e){return this.handlers.push({fulfilled:t,rejected:e}),this.handlers.length-1},r.prototype.eject=function(t){this.handlers[t]&&(this.handlers[t]=null)},r.prototype.forEach=function(t){i.forEach(this.handlers,function(e){null!==e&&t(e)})},t.exports=r},f751:function(t,e,n){var i=n("5ca1");i(i.S+i.F,"Object",{assign:n("7333")})},f772:function(t,e){t.exports=function(t){return"object"===typeof t?null!==t:"function"===typeof t}},f893:function(t,e,n){t.exports={default:n("f921"),__esModule:!0}},f921:function(t,e,n){n("014b"),n("c207"),n("69d3"),n("765d"),t.exports=n("584a").Symbol},fa5b:function(t,e,n){t.exports=n("5537")("native-function-to-string",Function.toString)},fab2:function(t,e,n){var i=n("7726").document;t.exports=i&&i.documentElement}}]);